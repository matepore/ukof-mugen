;=====================================================================
;  CNS File For "Foxy"                                  Made By M.M.R.
;                                       Ver. 1.0           2002.Apr.14
;=====================================================================

;---------------------------------------------------------------------
; 変数表
;	Var(1)	: 各種ヒット判定
;	Var(2)	: イントロ乱数
;	Var(3)	: 総合ヒット数カウンタ
;	Var(4)	: ガードキャンセルフラグ
;	Var(5)	: ヒットカウント
;	Var(6)	: ユニコーンの角・空振りダメージ変数
;	Var(7)	: みつバチ・ヒットフラグ
;	Var(8)	: 対　クーラ／イグニス　フラグ
;	Var(19)	: １Ｐ側・２Ｐ側フラグ
;	Var(20)	: キャンセルストライカー可否フラグ
;	Var(24)	: ターゲットＩＤ
;	Var(25)	: 小or中ジャンプフラグ
;	Var(26)	: 大ジャンプフラグ
;	Var(27) : 大ジャンプ中のレバー入力管理
;	Var(28) : 大ジャンプフラグ２
;	Var(29) : ＣＰＵ専用乱数
;	Var(30) : ＣＰＵ専用フラグ
;---------------------------------------------------------------------

;---------------------------------------------------------------------
; 基本設定
[Data]
life = 3000          ; 体力ゲージ、上限値（デフォルト：1000）
attack = 100         ; 攻撃力（％）
defence = 100        ; 防御力（％）
fall.defence_up = 50 ; 空中コンボ修正率（％）
liedown.time = 40    ; ダウン時間
airjuggle = 8        ; 空中コンボ
sparkno = 2        ; 初期ヒットスパーク番号
guard.sparkno = 40 ; 初期ガードスパーク番号
KO.echo = 0          ; ＫＯボイスエコー（0:OFF、1:ON）
volume = -5          ; キャラボイスボリューム値
power = 5000


[Size]
xscale = 1           ; 水平サイズ倍率
yscale = 1           ; 垂直サイズ倍率
ground.back = 18     ; キャラ幅（地上、後ろ側）
ground.front = 18    ; キャラ幅（地上、前側）
air.back = 12        ; キャラ幅（空中、後ろ側）
air.front = 12       ; キャラ幅（空中、前側）
z.width = 10         ; キャラ幅（ｚ軸）
height = 60	     ; キャラの高さ（ジャンプで飛び越せる高さ）
attack.width = 4,4   ;Default attack width: back, front
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   
head.pos = 0,-100    ; 頭部座標
mid.pos = 0,-70      ; 体中心部座標
shadowoffset = 1     ; キャラの影・オフセット値

[Velocity]
walk.fwd  = 3.21		; 前進速度
walk.back = -2.00		; 後退速度
run.fwd  = 6.22, 0		; 前ダッシュ速度（y<0の場合、ホップステップ）
run.back = -7.50,-2.58		; バックステップ速度（y=0の場合、走り）
jump.neu = 0,-8.17		; 垂直ジャンプ速度
jump.back = -3.00		; 後方ジャンプ速度
jump.fwd = 3.20			; 前方ジャンプ速度
runjump.back = -4.20,-8.17	; 後方ジャンプ速度（ダッシュ中）
runjump.fwd = 4.40,-8.17	; 前方ジャンプ速度（ダッシュ中）
;airjump.neu = 0,-9.3		; 空中垂直ジャンプ速度
;airjump.back = -2.55,-8.1	; 空中後方ジャンプ速度
;airjump.fwd = 2.5,-8.1		; 空中前方ジャンプ速度

[Movement]
airjump.num = 0       ; 空中ジャンプ回数
;airjump.height = 35  ; 空中ジャンプ最低高度
yaccel = .43          ; キャラ重力加速度
stand.friction = .85  ; 摩擦係数（立ち状態）
crouch.friction = .82 ; 摩擦係数（しゃがみ状態）

;===============================================================================
; Definition of the Basic Action
;===============================================================================
;-------------------------------------------------------------------------------
; ダッシュ
[Statedef 100]
type    = S
movetype = I
physics = N
anim = 100
ctrl = 0

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 100,1]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 100, 0

[State 100,2]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 100, 1

[State 100,3]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 100, 2

[State 100,3]
type = ChangeState
trigger1 = Command != "holdfwd" && Time >= 12
value = 101
ctrl = 1

[State 100,ChangeState]
type = ChangeState
trigger1 = Command = "holdup"
value = 40

[State 100,4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;------------------------ 停止
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0

[State 101,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; バックステップ
;------------------------ 開始
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 105,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 105,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105,VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .43

[State 105,0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105, 0

[State 105,1]
type = ChangeState
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;------------------------ 着地
[Statedef 106]
type = S
movetype = I
physics = S
anim = 106
velset = 0, 0

[State 106,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106,2]
type = MakeDust
trigger1 = Time >= 0
pos = -30, 0

[State 106,3]
type = PlaySnd
trigger1 = Time = 0
value = 47, 0

[State 106,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
trigger3 = var(59)
trigger3 = enemynear,hitdefattr = SCA,AT
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holddown"
trigger2 = var(59) > 0
trigger2 = enemynear,statetype = C
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
trigger3 = var(59)
trigger3 = enemynear,hitdefattr = SCA,AT
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holddown"
trigger2 = var(59) > 0
trigger2 = enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = enemynear,statetype = A
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
trigger3 = var(59)
trigger3 = enemynear,hitdefattr = SCA,AT
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59) > 0
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52
;===============================================================================
; Definition of the Win/Lose/Intro Pause
;===============================================================================

;-------------------------------------------------------------------------------
; 時間切れ負け
[Statedef 170]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 170,1]
type = NotHitBy
trigger1 = 1
value = SCA

;-------------------------------------------------------------------------------
; 時間切れ引き分け
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175,0]
type = ChangeState
trigger1 = Time = 0
value = 170

;-------------------------------------------------------------------------------
; 勝利
[Statedef 180]
type = S
ctrl = 0
anim = 180
velset = 0,0


[State 180,]
type = VarRandom
trigger1 = 1
v = 21
range = 0,4

[State 180,]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(21) = 0
value = 181

[State 180,]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(21) = 1
value = 182

[State 180,]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(21) = 2
value = 183

[State 180,]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(21) = 3
value = 184

[State 180,]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(21) = 4
value = 185

;-------------------------------------------------------------------------------
; 勝-１
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0,0

[State 181,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 181,Explod]
type = Explod
trigger1 = Time = 0
anim = 182
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
shadow = -1

[State 181,PlaySnd]
type = PlaySnd
trigger1 = Time = 10
value = 181, 0

[State 181,PlaySnd]
type = PlaySnd
trigger1 = Time = 85
value = 900, 3

[State 181,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 181, 1

[State 181,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12
value = 900, 0

[State 181,Explod]
type = Explod
trigger1 = AnimElem = 12
anim = 2100
pos = -24,-102
postype = P1
sprpriority = -1
bindtime = 1
ownpal = 1

[State 181,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 14
value = 181, 2

[State 181,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 14, = 5
value = 181, 3

[State 181,3]
type = AssertSpecial
trigger1 = Time = [0,380]
flag = RoundNotOver

[State 181, ChangeState]
type = ChangeState
trigger1 = Matchover = 1
trigger1 = Time = 250
value = 8600
;-------------------------------------------------------------------------------
; 勝利２
[Statedef 182]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 00]
type = PlaySnd
trigger1 = animelem = 1
value = 182,0

[State 00]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = 182,1


[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, ChangeState]
type = ChangeState
trigger1 = Matchover = 1
trigger1 = Time = 150
value = 8500

[State 182, 4]
type = AssertSpecial
trigger1 = time = [0,190]
flag = roundnotover

;-------------------------------------------------------------------------------
; 勝利３　（対　イグニス　専用）
[Statedef 183]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 00]
type = PlaySnd
trigger1 = animelem = 1
value = 181,0

[State 00]
type = PlaySnd
trigger1 = animelem = 8
value = 181,1

[State 183, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, ChangeState]
type = ChangeState
trigger1 = Matchover = 1
trigger1 = Time = 80
value = 8500

[State 183, 4]
type = AssertSpecial
trigger1 = time = [0,190]
flag = roundnotover


;-------------------------------------------------------------------------------
; 勝利３　（対　イグニス　専用）
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0,0
sprpriority = 3

[State 183,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 183,Explod]
type = Explod
trigger1 = Time = 0
anim = 185
pos = 0, 0
postype = P1
sprpriority = 1
bindtime = -1
ownpal = 1
shadow = -1

[State 183,Explod]
type = Explod
trigger1 = Time = 0
anim = 186
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
shadow = -1

[State 183,PlaySnd]
type = PlaySnd
trigger1 = Time = 78
value = 900, 3

[State 183,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11
value = 183, 0

[State 183,4]
type = AssertSpecial
trigger1 = Time = [0,430]
flag = RoundNotOver

[State 183,4 ChangeState]
type = ChangeState
trigger1 = Matchover = 1
trigger1 = Time = 420
value = 8600

;-------------------------------------------------------------------------------
; 勝利４  （対　クーラ・ダイアモンド　専用）
[Statedef 185]
type = S
ctrl = 0
anim = 187
velset = 0,0,0

[State 184,0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 184,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3, = 20
value = 184, 0

[State 184,4]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 181, ChangeState]
type = ChangeState
trigger1 = Matchover = 1
trigger1 = Time = 195
value = 8500

;---------------------------------------------------------------------------
; プレイントロ
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190,VarSet]
type = VarSet
trigger1 = Time = 0
v = 19
value = Facing

[State 190, 2]
type = ChangeState
trigger1 = P2Name = "k9999"
trigger1 = Time = 0
value = 196

[State 190,VarSet]
type = VarSet
trigger1 = Time = 0
trigger1 = P2Name = "Yukino Ozawa" || P4Name = "Yukino Ozawa" || P2Name = "Kula Diamond" || P4Name = "Kula Diamond"
v = 8
value = 1

[State 190,VarSet]
type = VarSet
trigger1 = Time = 0
trigger1 = P2Name = "Igniz" || P4Name = "Igniz" || P2Name = "Igniz by Third" || P4Name = "Igniz by Third"
trigger2 = P2Name = "original zero" || P4Name = "original zero" || P2Name = "zero" || P4Name = "zero"
v = 8
value = 2

[State 190, 2]
type = ChangeState
trigger1 = Time = 0
value = IfElse(Var(8) = 0,191,IfElse(Var(8) = 1,192,193))

;-------------------------------------------------------------------------------
; イントロ
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0,0

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7700
ID = 7700
pos = 30,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7703
ID = 7700
pos = 6,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7701
ID = 7700
pos = 22,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7702
ID = 7700
pos = 38,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,4]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 191, 0

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = 200, 0


[State 191,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0


;-------------------------------------------------------------------------------
; イントロ
[Statedef 196]
type = S
ctrl = 0
anim = 195
velset = 0,0,0

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7700
ID = 7700
pos = 30,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7703
ID = 7700
pos = 6,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7701
ID = 7700
pos = 22,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7702
ID = 7700
pos = 38,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,4]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 196
pos = -40, 5
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1


[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 30
value = 900, 3
volume = 100

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 666, 10
volume = 300

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 666, 11
volume = 100


[State 191,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------------
; イントロ２（対　クーラ・ダイアモンド　専用）
[Statedef 192]
type = S
anim = 192

[State 192,0]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7700
ID = 7700
pos = 30,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7703
ID = 7700
pos = 6,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7701
ID = 7700
pos = 22,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7702
ID = 7700
pos = 38,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 192,Explod]
type = Explod
trigger1 = Time = 72
anim = 193
pos = 0, 0
postype = P1
sprpriority = 1
bindtime = -1
ownpal = 1
shadow = -1

[State 192,PlaySnd]
type = PlaySnd
trigger1 = Time = 72 || Time = 180
value = 900, 3

[State 192,PlaySnd]
type = PlaySnd
trigger1 = Time = 90
value = 192, 0

[State 192,PlaySnd]
type = PlaySnd
trigger1 = Time = 185
value = 192, 1

[State 00]
type = PlaySnd
trigger1 = animelem = 9
value = 181,0




[State 192,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ３（対　イグニス　専用）
[Statedef 193]
type = S
anim = 194

[State 193,0]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7700
ID = 7700
pos = 30,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7703
ID = 7700
pos = 6,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7701
ID = 7700
pos = 22,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 120
anim = 7702
ID = 7700
pos = 38,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 193,Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 262
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1

[State 193,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = 200, 0

[State 193,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 666, 5

[State 193,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 10
value = 1100, 1


[State 193,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; 挑発
[Statedef 195]
type = S
movetype = I
physics = S
anim = 199
velset = 0, 0
ctrl = 0

[State 195,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 195, 0
channel = 20

[State 195,CtrlSet]
type = CtrlSet
trigger1 = Time = 34
value = 1

[State 195,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Definition of the Basic Arts
;===============================================================================

;-------------------------------------------------------------------------------
; 近距離・立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
anim = 200
velset = 0,0
poweradd = 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 28

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2900
pos = 0,-82
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 200,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
damage    = 28
getpower = 90
givepower = 22
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 10,10
numhits = 1
sparkno = S2410
guard.sparkno = S2050
sparkxy = -10,-82
hitsound = S400, 0
guardsound = S0, 0
ground.type = High
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -6
air.velocity = -3.0,-2

[State 200,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
anim = 210
velset = 0,0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 56

[State 200,Explod]
type = Explod
trigger1 = MoveHit && AnimElemNo(0) < 6
persistent = 0
anim = 2910
pos = 0,-81
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 200,MoveHitReset]
type = MoveHitReset
trigger1 = AnimElem = 5

[State 200,Explod]
type = Explod
trigger1 = MoveHit && AnimElemNo(0) >= 6
persistent = 0
anim = 2910
pos = 0,-104
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 220,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 56
getpower = 90
givepower = 22
guardflag = M
pausetime = 8,11
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-81
hitsound = S400, 1
guardsound = S0, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 21
ground.velocity = -2.5
air.velocity = -3.2,-3.2

[State 220,3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Hard
damage    = Ceil(56 / (2 ** HitCount))
getpower = 90
givepower = 22
guardflag = M
pausetime = 12,12
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-104
hitsound = S400, 1
guardsound = S0, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 21
ground.velocity = -6.5
air.velocity = -3.2,-3.2

[State 220,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 211
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
removeongethit = 1

[State 220,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち弱キック
[Statedef 220]
type    = S
movetype= A
physics = S
anim = 220
velset = 0,0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 35

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2900
pos = 0,-52
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 210,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    = 35
getpower = 90
givepower = 22
guardflag = M
pausetime = 10,10
numhit = 1
sparkno = S2410
guard.sparkno = S2050
sparkxy = -15,-52
hitsound = S400, 0
guardsound = S0, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -6
air.velocity = -3.0,-2

[State 210,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち強キック
[Statedef 230]
type    = S
movetype= A
physics = S
anim = 230
velset = 0,0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 77

[State 230,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 200, 1

[State 230,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 77
getpower = 90
givepower = 22
guardflag = H
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = -15,-72
hitsound = S300, 3
guardsound = S0, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 21
ground.velocity = -2.5
air.velocity = -3.2,-3.2

[State 230,3]
type = HitDef
trigger1 = AnimElem = 9
attr = S, NA
animtype  = DiagUp
damage    = Ceil(77 / (2 ** HitCount))
getpower = 90
givepower = 22
guardflag = H
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = -15,-46
hitsound = S300, 3
guardsound = S0, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 21
ground.velocity = -1.5,2.4
guard.velocity = -6.5
air.velocity = -1.2,2.4
fall = 1
recover = 0
fall.recover = 0
air.recover = 0
fall.envshake.time = 15

[State 230,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち弱パンチ
[Statedef 250]
type    = S
movetype= A
physics = S
anim = 250
velset = 0,0
poweradd = 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 35

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2900
pos = 0,-75
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 200,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
damage    = 35
getpower = 90
givepower = 22
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 10,10
numhits = 1
sparkno = S2410
guard.sparkno = S2050
sparkxy = -10,-75
hitsound = S400, 0
guardsound = S0, 0
ground.type = High
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -6
air.velocity = -3.0,-2

[State 200,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち強パンチ
[Statedef 260]
type    = S
movetype= A
physics = S
anim = 260
velset = 0,0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 70

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2910
pos = 0,-55
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 220,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 70
getpower = 180
givepower = 45
guardflag = M
pausetime = 12,12
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-55
hitsound = S400, 1
guardsound = S0, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -7.5
air.velocity = -3.2,-3.2

[State 260,PosAdd]
type = PosAdd
trigger1 = AnimTime = 0
x = 2

[State 220,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 261
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
removeongethit = 1

[State 220,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち弱キック
[Statedef 270]
type    = S
movetype= A
physics = S
anim = 270
velset = 0,0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 42

[State 210,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    = 42
getpower = 90
givepower = 22
guardflag = M
pausetime = 10,10
numhit = 1
sparkno = S2000
guard.sparkno = S2050
sparkxy = -15,-52
hitsound = S300, 1
guardsound = S0, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -6
air.velocity = -3.2,-2

[State 210,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち強キック
[Statedef 280]
type    = S
movetype= A
physics = S
anim = 280
velset = 0,0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 84

[State 230,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 84
getpower = 180
givepower = 45
guardflag = M
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = -15,-71
hitsound = S300, 3
guardsound = S0, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 21
ground.velocity = -7.5
air.velocity = -3.2,-2

[State 230,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ弱パンチ
[Statedef 300]
type    = C
movetype= A
physics = C
anim = 300
velset = 0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 28

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2900
pos = 0,-50
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 300,3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Light
damage    = 28
getpower = 90
givepower = 22
hitflag = MAF
guardflag = M
pausetime = 10,10
sparkno = S2410
guard.sparkno = S2050
sparkxy = -15,-50
hitsound = S400, 0
guardsound = S0, 0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -6
air.velocity = -3.0,-2

[State 300,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ強パンチ
[Statedef 310]
type    = C
movetype= A
physics = C
anim = 310
velset = 0,0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 77

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2910
pos = 0,-82
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 320,3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Hard
damage    = 77
getpower = 180
givepower = 45
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-82
hitsound = S400, 1
guardsound = S0, 0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 18
ground.velocity = -6.5
air.velocity = -3.2,-4.2

[State 220,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 311
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
removeongethit = 1
removetime = 5

[State 320,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ弱キック
[Statedef 320]
type    = C
movetype= A
physics = C
anim = 320
velset = 0, 0
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 28

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2900
pos = 0,-16
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 310,3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype = Light
damage    = 28
getpower = 90
givepower = 22
hitflag = MAF
guardflag = L
pausetime = 10,10
sparkno = S2410
guard.sparkno = S2050
sparkxy = -15,-16
hitsound = S400, 0
guardsound = S0, 0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -6
air.velocity = -3.0,-2

[State 310,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ強キック
[Statedef 330]
type    = C
movetype= A
physics = C
anim = 330
velset = 0,0
poweradd= 0
ctrl = 0
juggle  = 8

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 98

[State 330,3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype = Hard
damage    = 98
getpower = 180
givepower = 45
hitflag = MAF
guardflag = L
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = -15,-3
hitsound = S300, 3
guardsound = S0, 0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -3.2,-2
air.velocity = -3.0,-3
guard.velocity = -5
fall = 1

[State 330,PosAdd]
type = PosAdd
trigger1 = AnimElemNo(0) = [3,5]
x = 4

[State 330,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ弱パンチ
[Statedef 500]
type    = A
movetype= A
physics = A
anim = 500
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = IfElse(Vel X = 0,42,28)

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2900
pos = 0,-Floor(P2Dist Y + 30)
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 500,3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
damage    = IfElse(Vel X = 0,42,28)
getpower = 90
givepower = 22
guardflag = HA
priority = 3
pausetime = 10,10
sparkno = S2410
guard.sparkno = S2050
sparkxy = -15,-30
hitsound = S400, 0
guardsound = S0, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 15
ground.velocity = -6.0
ground.cornerpush.veloff = -8.0
air.velocity = -3.0,-3

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ強パンチ
[Statedef 510]
type    = A
movetype= A
physics = A
anim = 510
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = IfElse(Vel X = 0,70,IfElse(Vel X > 0,70,70))

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2910
pos = 0,-Floor(P2Dist Y + 14)
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 520,3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = IfElse(Vel X = 0,70,IfElse(Vel X > 0,70,70))
getpower = 180
givepower = 45
guardflag = HA
priority = 3
pausetime = 10,10
sparkno = S2400
guard.sparkno = S2060
sparkxy = -10,-14
hitsound = S400, 1
guardsound = S0, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7.0
ground.cornerpush.veloff = -8.0
air.velocity = -3.2,-3.2

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ弱キック
[Statedef 520]
type    = A
movetype= A
physics = A
anim = IfElse(Vel X = 0,520,570)
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = IfElse(Vel X >= 0,35,35)

[State 510,3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
damage    = IfElse(Vel X >= 0,35,35)
getpower = 90
givepower = 22
guardflag = HA
priority = 3
pausetime = 10,10
sparkno = S2000
guard.sparkno = S2050
sparkxy = -10,-3
hitsound = S300, 1
guardsound = S0, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 15
ground.velocity = -6.0
ground.cornerpush.veloff = -8.0
air.velocity = -3.0,-3

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ強キック
[Statedef 530]
type    = A
movetype= A
physics = A
anim = 530
poweradd= 0
ctrl = 0
juggle  = 4

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = IfElse(Vel X = 0,98,IfElse(Vel X > 0,91,91))

[State 530,3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = IfElse(Vel X = 0,98,IfElse(Vel X > 0,91,91))
getpower = 180
givepower = 45
guardflag = HA
priority = 3
pausetime = 10,10
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-19
hitsound = S300, 3
guardsound = S0, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7.0
ground.cornerpush.veloff = -8.0
air.velocity = -3.2,-3.2

;-------------------------------------------------------------------------------
; 地上ふっとばし攻撃
[Statedef 600]
type = S
movetype = A
physics = S
anim = 600
velset = 0,0
poweradd= 0
ctrl = 0

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 98

[State 600,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200, 1

[State 601,ChangeState]
type = ChangeState
trigger1 = AnimElem = 4
value = 601 + (P2MoveType = A)

;------------------------ ノーマルヒット時
[Statedef 601]
type = S
movetype = A
physics = S
juggle = 8

[State 600,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 98
getpower = 240
givepower = 60
guardflag = M
hitflag = MAF
pausetime = 12,14
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-77
hitsound = S300, 4
guardsound = S0, 0
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4.2,-3.5
fall = 1
recover = 0
fall.recover = 0
air.recover = 0

[State 600,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ カウンター時（疑似）・ワイヤーダメージ発生
[Statedef 602]
type = S
movetype = A
physics = S
juggle = 3

[State 600,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 98
getpower = 240
givepower = 60
guardflag = M
hitflag = MAF
priority = 5, Miss
pausetime = 12,14
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-77
hitsound = S300, 4
guardsound = S0, 0
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4.2,-3.5
fall = 1
recover = 0
fall.recover = 0
air.recover = 0
p2facing = 1
p2stateno = 603

[State 600,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ ワイヤーダメージ（喰らい側）
[Statedef 603]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 603,EnvColor]
type = EnvColor
trigger1 = Time = 0
time = 2
value = 248,248,248
under = 1
ignorehitpause = 1

[State 603,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 603, 1]
type = ChangeAnim
trigger1 = Time = 0 && GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 603, 2]
type = ChangeAnim
trigger1 = Time = 0 && GetHitVar(animtype) = [3,5]
value = 5030

[State 603, 3]
type = ChangeAnim
trigger1 = Time = 0 && (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 603, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 603, 5]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 603, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 604

[State 603, FFB Hard]
type = ForceFeedback
trigger1 = Time = 0
time = 15
waveform = sinesquare
ampl = 140

;------------------------ 
[Statedef 604]
type = A
movetype = H
physics = N
velset = -14.0,-4.0

[State 604,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 604,PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 604,VelAdd]
type = VelAdd
trigger1 = 1
y = .25

[State 604,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5900)
trigger1 = AuthorName = "M.M.R."
trigger2 = AuthorName = "Mouser"
trigger3 = AuthorName = "Tin"
trigger4 = AuthorName = "CAMRAT Type KOF"
trigger5 = AuthorName = "H”"
value = 5900

[State 604,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5400)
trigger1 = AuthorName = "butti" && Name = "angel"
value = 5400

[State 604,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0 && !SelfAnimExist(5900)
trigger1 = !(AuthorName = "butti" && Name = "angel")
value = 605

[State 604,ChangeState]
type = ChangeState
trigger1 = BackEdgeBodyDist < 5
value = 605

;------------------------ 
[Statedef 605]
type = A
movetype = H
physics = N
anim = 5050
velset = 0, 0

[State 605,Turn]
type = Turn
trigger1 = Time = 0

[State 605,PosFreeze]
type = PosFreeze
trigger1 = Time = [0,3]

[State 605,EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15

[State 605,VelSet]
type = VelSet
trigger1 = Time = 4
x = -2.8
y = -9.6

[State 605,VelAdd]
type = VelAdd
trigger1 = Time >= 4
y = .50

[State 605,ChangeAnim]
type = ChangeAnim
trigger1 = Time > 4 && Vel Y > 0 && SelfAnimExist(5060)
persistent = 0
value = 5060

[State 605,SelfState]
type = SelfState
trigger1 = Time > 4 && Vel Y > 0 && Pos Y >= 0
value = 5100

;-------------------------------------------------------------------------------
; 空中ふっとばし攻撃
[Statedef 610]
type = A
movetype = A
physics = A
anim = 610
poweradd= 0
ctrl = 0

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 91

[State 610,ChangeState]
type = ChangeState
trigger1 = AnimElem = 6
value = 611 + (P2MoveType = A)

;------------------------ ノーマルヒット時
[Statedef 611]
type = A
movetype = A
physics = A
juggle = 8

[State 610,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = 91
getpower = 240
givepower = 60
guardflag = MA
hitflag = MAF
pausetime = 12,14
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-19
hitsound = S300, 4
guardsound = S0, 0
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4.2,-3.5
fall = 1
recover = 0
fall.recover = 0
air.recover = 0

;------------------------ カウンター時（疑似）・ワイヤーダメージ発生
[Statedef 612]
type = A
movetype = A
physics = A
juggle = 3

[State 612,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = 91
getpower = 240
givepower = 60
guardflag = MA
hitflag = MAF
pausetime = 12,14
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-19
hitsound = S300, 4
guardsound = S0, 0
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4.2,-3.5
fall = 1
recover = 0
fall.recover = 0
air.recover = 0
p2facing = 1
p2stateno = 603

;===============================================================================
; Definition of the (Dir + Button) attack
;===============================================================================

;-------------------------------------------------------------------------------
; 七つの金属（→＋Ｘ）
[Statedef 700]
type    = S
movetype= A
physics = S
anim = 700
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 7

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 56

[State 700,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 700, 0

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2910
pos = 0,-59
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 700,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 56
getpower = 90
givepower = 22
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-59
hitsound = S400, 1
guardsound = S0, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -6.5
air.velocity = -5.0,-3.5

[State 700,PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 700,PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = -10

[State 700,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 七つの金属（→＋Ｘ）　＊通常技キャンセル版
[Statedef 705]
type    = S
movetype= A
physics = S
anim = 705
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 7

[State 700,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 700, 0

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2910
pos = 0,-59
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 700,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 56
getpower = 90
givepower = 22
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-59
hitsound = S400, 1
guardsound = S0, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -6.5
air.velocity = -5.0,-3.5

[State 700,PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 700,PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = 10

[State 700,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 七つの鉱物（３＋Ｘ）
[Statedef 710]
type = S
movetype = A
physics = S
anim = 710
velset = 0, 0
poweradd = 0
ctrl = 0
juggle = 7

[State 700,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1

[State 600,VarSet]
type = VarSet
trigger1 = Time = 0 && NumHelper(1000) = 1 && Var(6) = 0
v = 6
value = 56

[State 710,PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = 20

[State 710,PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = 14

[State 200,Explod]
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 2910
pos = 0,-65
postype = P2
facing = -1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 700,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 56
getpower = 90
givepower = 22
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2400
guard.sparkno = S2060
sparkxy = -15,-65
hitsound = S400, 1
guardsound = S0, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -6.5
air.velocity = -5.0,-3.5

[State 710,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 七重の循環（→＋Ａ）
[Statedef 720]
type    = S
movetype= A
physics = S
anim = 720
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 7

[State 720,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 725
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
ignorehitpause = 1
removeongethit = 1

[State 720,ReversalDef]
type = ReversalDef
trigger1 = AnimElem = 5 && P2MoveType != H
attr = S, NA
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
priority = 3,Miss
numhits = 0
getpower = 30
givepower = 7
pausetime = 10,10
sparkno = S2060
sparkxy = 35,-86
hitsound = S0, 0
p1stateno = 725

[State 720,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 
[Statedef 725]
type = S
movetype = I
physics = S

[State 725,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 七重の蒸留（３＋Ａ）
[Statedef 730]
type    = S
movetype= A
physics = S
anim = 730
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 7

[State 730,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 735
pos = 0, 0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1
ignorehitpause = 1
removeongethit = 1

[State 730,ReversalDef]
type = ReversalDef
trigger1 = AnimElem = 5 && P2MoveType != H
attr = S, NA
reversal.attr = SCA, NA, SA, HA, NP, SP, HP
priority = 3,Miss
numhits = 0
getpower = 30
givepower = 7
pausetime = 10,10
sparkno = S2060
sparkxy = 42,-44
hitsound = S0, 0
p1stateno = 725

[State 730,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Definition of the Basic Throws
;===============================================================================

;-------------------------------------------------------------------------------
; 第三の鍵（Ｐ通常投げ）
[Statedef 800]
type = S
movetype = A
physics = S
anim = 800
velset = 0, 0
ctrl = 0

[State 800,1]
type = Hitdef
trigger1 = Time = 0
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
givepower = 120
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
hitsound = S900, 0
fall = 1
fall.recover = 0

[State 800,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 210

;-------------------------------------------------------------------------------
; 第三の鍵（成功）
[Statedef 810]
type = S
movetype = A
physics = S
anim = 810
velset = 0, 0
poweradd = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2100
pos = 42,-80
postype = P1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 40, 0
time = 19

[State 810,Width]
type = Width
trigger1 = AnimElem = 1 && FrontEdgeDist < 45
edge = 45,20

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
pos = 65, 0
time = 21

[State 810,Width]
type = Width
trigger1 = AnimElem = 2 && FrontEdgeDist < 65
edge = 65,20

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 4
pos = 60, 0
time = 1

[State 810,Width]
type = Width
trigger1 = AnimElem = 4 && FrontEdgeDist < 60
edge = 60,20

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 5
pos = 80, 0
time = 1

[State 810,Width]
type = Width
trigger1 = AnimElem = 5 && FrontEdgeDist < 80
edge = 80,20

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 2420
pos = 90,-60
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 2920
pos = 90,-60
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -100

[State 810,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 900, 1

[State 810,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 400, 1

[State 810,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 第三の鍵（投げられ側）
[Statedef 820]
type = A
movetype = H
physics = N
ctrl = 0

[State 820,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 820,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 820,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 830

;------------------------ 
[Statedef 830]
type = A
movetype = H
physics = N
anim = 5050
velset = 0, 0
ctrl = 0

[State 830,VelSet]
type = VelSet
trigger1 = Time = 1
x = -4.8
y = -6.0

[State 830,VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .43

[State 830,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > 0 && SelfAnimExist(5060)
persistent = 0
value = 5060

[State 830,SelfState]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 25
value = 5100

;-------------------------------------------------------------------------------
; 第十二の鍵（Ｋ通常投げ）
[Statedef 850]
type = S
movetype = A
physics = S
anim = 850
velset = 0, 0
ctrl = 0

[State 850,1]
type = Hitdef
trigger1 = Time = 0
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
givepower = 120
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 860
p2stateno = 870
p2getp1state = 1
hitsound = S900, 0; -1
fall = 1
fall.recover = 0

[State 850,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; 第十二の鍵（成功）
[Statedef 860]
type = S
movetype = A
physics = S
anim = 860
velset = 0, 0
poweradd = 0
sprpriority = 1

[State 860,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 860,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 860,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 2100
pos = 42,-80
postype = P1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 40, 0
time = 21

[State 810,Width]
type = Width
trigger1 = AnimElem = 1 && FrontEdgeDist < 45
edge = 45,20

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
pos = 65, 0
time = 24

[State 810,Width]
type = Width
trigger1 = (AnimElem = 2 || AnimElem = 6) && FrontEdgeDist < 65
edge = 65,20

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 9
pos = 80, 0
time = 1

[State 810,Width]
type = Width
trigger1 = AnimElem = 9 && FrontEdgeDist < 80
edge = 80,20

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 2420
pos = 90,-60
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 2920
pos = 90,-60
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 860,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -100

[State 860,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 865
pos = 130, 0
postype = P1
sprpriority = 1
facing = -1
bindtime = -1
ownpal = 1

[State 860,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 900, 3

[State 810,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = 900, 1

[State 810,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = 400, 1

[State 860,PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
x = 130

[State 860,Turn]
type = Turn
trigger1 = AnimElem = 6

[State 860,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 第十二の鍵（投げられ側）
[Statedef 870]
type = A
movetype = H
physics = N
ctrl = 0

[State 820,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 820,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 870

[State 820,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 880

;------------------------ 
[Statedef 880]
type = A
movetype = H
physics = N
anim = 5050
velset = 0, 0
ctrl = 0

[State 880,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 830,VelSet]
type = VelSet
trigger1 = Time = 1
x = 4.8
y = -6.0

[State 830,VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .43

[State 830,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > 0 && SelfAnimExist(5060)
persistent = 0
value = 5060

[State 830,SelfState]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 25
value = 5100

;=====================================================================
; 特殊動作
;=====================================================================
;
;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作（前）
[Statedef 4000]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4000
velset = 0, 0
poweradd = -1000

[State 4000,0]
type = ChangeState
trigger1 = Time = 0
trigger1 = Command = "holdback"
value = 4100

[State 4000,1]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 2
anim = S2300
pos = 0,-50

[State 4000,EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 248,248,248
time = 2
under = 1

[State 4000,5]
type = PlaySnd
trigger1 = Time = 1
value = 4000, 0

[State 4000,3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4000,4]
type = PlayerPush
trigger1 = 1
value = 0

[State 4000,5]
type = VelSet
trigger1 = AnimElem = 3
x = 5.50

[State 4000,6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4000,7]
type = AfterImage
trigger1 = Time = 0
time = 24
length = 20
timegap = 2
framegap = 4
palbright = 80,80,80
palcontrast = 150,100,150
paladd = 20,20,20
palmul = .25,.25,.25
trans = add

[State 4000,8]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 4000,Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 4000,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 緊急回避動作（前）
[Statedef 4050]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4000
velset = 0, 0

[State 4050,0]
type = NotHitBy
trigger1 = AnimElem = 8, < 0
value = SCA

[State 4050,1]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 4050,2]
type = PlayerPush
trigger1 = 1
value = 0

[State 4050,3]
type = VelSet
trigger1 = AnimElem = 3
x = 5.25

[State 4050,4]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4050,5]
type = PlaySnd
trigger1 = Time = 1
value = 4000, 0

[State 4600,9]
type = AfterImage
trigger1 = Time = 0
time = 14
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 4000,Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 4050,6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作（後）
[Statedef 4100]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4100
velset = 0, 0

[State 4100,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 2
anim = S2300
pos = 0,-50

[State 4100,EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 248,248,248
time = 2
under = 1

[State 4100,5]
type = PlaySnd
trigger1 = Time = 1
value = 4000, 0

[State 4100,2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4100,3]
type = PlayerPush
trigger1 = 1
value = 0

[State 4100,4]
type = VelSet
trigger1 = AnimElem = 3
x = -5.50

[State 4100,5]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4100,6]
type = AfterImage
trigger1 = Time = 0
time = 25
length = 20
timegap = 2
framegap = 4
palbright = 80,80,80
palcontrast = 150,100,150
paladd = 20,20,20
palmul = .25,.25,.25
trans = add

[State 4100,7]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 4100,9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 緊急回避動作（後）
[Statedef 4150]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4100
velset = 0, 0

[State 4150,0]
type = NotHitBy
trigger1 = AnimElem = 8, < 0
value = SCA

[State 4150,1]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 4150,2]
type = PlayerPush
trigger1 = 1
value = 0

[State 4150,3]
type = VelSet
trigger1 = AnimElem = 3
x = -5.00

[State 4150,4]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4150,5]
type = PlaySnd
trigger1 = Time = 1
value = 4000, 0

[State 4600,9]
type = AfterImage
trigger1 = Time = 0
time = 14
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 4150,6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル吹っ飛ばし攻撃
[Statedef 4500]
type = S
movetype = A
physics = S
ctrl = 0
anim = 4500
velset = 0, 0
poweradd = -1000

[State 4500,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200, 1

[State 4500,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 2
anim = S2300
pos = 0,-60

[State 4500,2]
type = NotHitBy
trigger1 = AnimElem = 6, < 0
value = SCA

[State 4500,3]
type = AfterImage
trigger1 = Time = 0
time = 29
length = 20
timegap = 2
framegap = 4
palbright = 80,80,80
palcontrast = 150,100,150
paladd = 20,20,20
palmul = .25,.25,.25
trans = add

[State 4500,4]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 4500,9]
type = Hitdef
trigger1 = Time = 0
attr = S, SA
animtype = Hard
damage    = 100
getpower = 0
givepower = 45
guardflag = M
hitflag = MAF
pausetime = 12,14
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-77
hitsound = S300, 4
guardsound = S0, 0
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4.2,-3.5
fall = 1
fall.recover = 0
air.recover = 0
recover = 0

[State 4500,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;---------------------------------------------------------------------
; ストライカー　クーラ・ダイアモンド
[Statedef 6000]
type = S
movetype = I
physics = S
anim = 6010
velset = 0, 0
ctrl = 0

[State 6000,ChangeState]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time = 0 && Command = "holdfwd"
value = 6100

[State 6000,ChangeState]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time = 0 && Command = "holdback"
value = 6200

[State 6000,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 17

[State 6000,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 12

[State 6000,Helper]
type = Helper
trigger1 = AnimElem = 3 && P2Dist X > -10
helpertype = normal
name = "Kula Diamond"
ID = 7000
pos = -30, 0
postype = back
facing = 1
stateno = 7000
keyctrl = 0
ownpal = 1

[State 6000,Helper]
type = Helper
trigger1 = AnimElem = 3 && P2Dist X <= -10
helpertype = normal
name = "Kula Diamond"
ID = 7000
pos = 30, 0
postype = front
facing = -1
stateno = 7000
keyctrl = 0
ownpal = 1

[State 6000,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ストライカー　ダイアナ
[Statedef 6100]
type = S
movetype = I
physics = S
velset = 0, 0
ctrl = 0

[State 6000,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 17

[State 6000,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 12

[State 6000,Helper]
type = Helper
trigger1 = AnimElem = 3 && P2Dist X > -10
helpertype = normal
name = "Diana"
ID = 7100
pos = -60, 0
postype = back
facing = 1
stateno = 7100
keyctrl = 0
ownpal = 1

[State 6000,Helper]
type = Helper
trigger1 = AnimElem = 3 && P2Dist X <= -10
helpertype = normal
name = "Diana"
ID = 7100
pos = 60, 0
postype = front
facing = -1
stateno = 7100
keyctrl = 0
ownpal = 1

[State 6000,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ストライカー　キャンディー・ダイアモンド
[Statedef 6200]
type = S
movetype = I
physics = S
velset = 0, 0
ctrl = 0

[State 6000,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 17

[State 6000,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 12

[State 6000,Helper]
type = Helper
trigger1 = AnimElem = 3 && P2Dist X > -10
helpertype = normal
name = "Candy Diamond"
ID = 7200
pos = -30, 0
postype = back
facing = 1
stateno = 7200
keyctrl = 0
ownpal = 1

[State 6000,Helper]
type = Helper
trigger1 = AnimElem = 3 && P2Dist X <= -10
helpertype = normal
name = "Candy Diamond"
ID = 7200
pos = 30, 0
postype = front
facing = -1
stateno = 7200
keyctrl = 0
ownpal = 1

[State 6000,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=====================================================================
; 共通ステート上書き
;=====================================================================

;---------------------------------------------------------------------
; 各種ジャンプ
[Statedef 40]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,2]
type = VarSet
trigger1 = Command = "holdfwd"
v = 27
value = 1

[State 40,3]
type = VarSet
trigger1 = Command = "holdback"
v = 27
value = -1

[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(26) = 0
trigger2 = PrevStateNo = 100 && Var(27) != 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x),Const(velocity.jump.fwd.x)))
y = Const(velocity.jump.y)

[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = Var(26) = 1
trigger2 = PrevStateNo = 100 && Var(27) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x),Const(velocity.runjump.fwd.x)))
y = Const(velocity.jump.y)

[State 40,A]
type = VelSet
triggerall = AnimTime = 0
trigger1 = Command != "holdup"
y = -5.16

[State 40,VarSet]
type = VarSet
triggerall = AnimTime = 0
trigger1 = Command != "holdup"
v = 25
value = 1

[State 40,9]
type = AfterImage
trigger1 = Var(26) = 1 || (PrevStateNo = 100 && Var(27) = 1)
trigger1 = Var(27) != 0
trigger1 = AnimTime = 0
time = 16
length = 20
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(26) = 1 || (PrevStateNo = 100 && Var(27) = 1)
trigger1 = Var(27) != 0
value = 40, 1

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(26) = 0 || (PrevStateNo = 100 && Var(27) != 1)
trigger2 = Var(26) = 1 || (PrevStateNo = 100 && Var(27) = 1)
trigger2 = Var(27) = 0
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; ジャンプ（上昇）
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && Var(25) = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Var(25) = 1
value = IfElse(Vel X <= 0,51,52)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2 && Var(25) = 0
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2 && Var(25) = 1
persistent = 0
value = Anim + 2

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0, 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]),15, 20)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 25
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
type = ChangeState
value = 5110

;---------------------------------------------------------------------
; ダウン回避
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200
velset = -4.0, 0
ctrl = 0

[State 5201,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,VelMul]
type = VelMul
trigger1 = Time >= 15
x = .95

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5201,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 2

[State 5201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900,VarSet]
type = VarSet
trigger1 = 1
v = 19
value = Facing

[State 191,Explod]
type = Explod
trigger1 = Time = 0 && RoundNo != 1
anim = 7510
ID = 7500
pos = 30,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 0 && RoundNo != 1
anim = 7513
ID = 7500
pos = 6,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 0 && RoundNo != 1
anim = 7511
ID = 7500
pos = 22,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 191,Explod]
type = Explod
trigger1 = Time = 0 && RoundNo != 1
anim = 7512
ID = 7500
pos = 38,210
postype = back
ownpal = 1
bindtime = -1
ontop = 1

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

;=====================================================================
; Stuff to do
;=====================================================================

[Statedef -2]
;================================================================================
; ------- COUNTER HIT (Based on Sander's Method) --------
;===============================================================================
[State -2, VarSet];Checks if opponent is in attack state
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = a
var(56) = 1
ignorehitpause = 1

[State -2, VarSet];This resets the condition if counter not succesful and succesful
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = i || var(57) >= 1  ;Enemy is Idle | Counter was Succesful
trigger2 = var(57) > 10 && enemy, movetype = h  ;10 ticks passed & enemy is on gethit state
var(56) = 0
ignorehitpause = 1

[State -2, VarSet];Counter Hit Succesful
type = VarSet
trigger1 = var(56) = 1 && movehit ;Counter Check Ok, Move Hit Succesfully.
trigger2 = var(56) = 1 && projhit = 1  ;Counter Check Ok, Projectile Hit Succesfully.
var(57) = 1
ignorehitpause = 1

[State -2, VarAdd];Counter Hit Timer
type = VarAdd
trigger1 = var(57) >= 1 ;Counter was succesful
var(57) = 1
ignorehitpause = 1

[State -2, VarSet];Counter Hit Reset
type = VarSet
trigger1 = var(57) >= 22 && movehit ;Reset if 22 ticks passed and move hit
trigger2 = p2movetype != h ;Reset if P2 is no longer in gethit state
trigger3 = movetype = h ;Reset if P1 is getting hit
trigger4 = var(57) >= 22 && projhit = 1 ;Reset if 22 ticks passed and projectile hit
var(57) = 0
ignorehitpause = 1

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = numenemy
triggerall = var(21)
triggerall = stateno != [900,979] ;Does not activate during throws.
triggerall = stateno != [3000,4000] ;Don't activate during Hyper Moves
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = var(56) = 1 && movehit  ;Move hit, Ok
trigger2 = var(56) = 1 && projhit = 1 ;Projectile hit, Ok
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = f13000
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = f13001
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

;----------------------------------------------------------
;Intro and K.O. no Lifebars
[State -2]
type = AssertSpecial
trigger1 = roundstate = [0,1]
trigger2 = roundstate = 4
trigger3 = Ctrl = 0 && (Anim = [0,2]) && MoveType != H
flag = NoBarDisplay
ignorehitpause = 1
;-----------------------------------------------------------------------------

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = gametime%2 = 0
flag = noshadow
ignorehitpause = 1





;---------------------------------------------------------------------
; ダメージ時の特殊エフェクト消去
[State -2,AfterImageTime]
type = AfterImageTime
trigger1 = MoveType = H
trigger2 = Time = 1 && (StateNo = [1000,2000])
time = 0

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作判定
[State -2,2]
type = VarSet
trigger1 = Time = 0 && (StateNo = 150 || StateNo = 152 || StateNo = 154)
v = 4
value = 1

[State -2,3]
type = VarSet
trigger1 = Var(4)  = 1 && Time = 15
v = 4
value = 0

;---------------------------------------------------------------------
; Sound Fix
[State -2,4]
type = PlaySnd
trigger1 = Time = 1 && StateNo = 52
value = 47, 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5000 || Anim = 5010 || Anim = 5020
value = 5000, 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5001 || Anim = 5011 || Anim = 5021
value = 5000, 1

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5002 || Anim = 5012 || Anim = 5022
value = 5000, 2

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1
trigger1 = (StateNo = [200,210]) || (StateNo = [250,260])
trigger2 = (StateNo = [300,310])
trigger3 = (StateNo = [500,510])
trigger4 = (StateNo = [700,710])
value = 200, 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1
trigger1 = (StateNo = [220,230]) || (StateNo = [270,280])
trigger2 = (StateNo = [320,330])
trigger3 = (StateNo = [520,530]) || StateNo = 610
value = 200, 1

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1 && Random < 600
trigger1 = StateNo = 200 || StateNo = 220 || StateNo = 300
trigger2 = StateNo = 320 || StateNo = 500 || StateNo = 520
trigger3 = StateNo = 250 || StateNo = 270
value = 500, 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1
trigger1 = StateNo = 210 || StateNo = 230 || StateNo = 310
trigger2 = StateNo = 330 || StateNo = 510 || StateNo = 530
trigger3 = StateNo = 260 || StateNo = 280
value = 500, 1

[State -2,PlaySnd]
type = PlaySnd
triggerall = !MoveType = H && Time = 1 && Random < 600
trigger1 = StateNo = 600 || StateNo = 610 || StateNo = 4500
value = 500, 2

[State -2,StopSnd]
type = StopSnd
trigger1 = MoveType = H
channel = 15

[State -2,StopSnd]
type = StopSnd
trigger1 = StateNo != 195
channel = 20

;-----------------------------------------------------------
; ＣＰＵ専用フラグ
[State -2,12]
type = VarSet
trigger1 = Command = "cpu"
persistent = 0
v = 30
value = 1

[State -2,13]
type = VarRandom
trigger1 = Var(30) = 1
trigger1 = Ctrl = 1
persitent = 0
v = 29
range = 0,99

;---------------------------------------------------------------------
; 各種ジャンプ用フラグ
[State -2,VarSet]
type = VarSet
trigger1 = Time = 0 && Command = "holddown"
persistent = 0
v = 28
value = 1

[State -2,VarSet]
type = VarSet
trigger1 = Var(28) != 0 && Time = 5
v = 28
value = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(25) != 0 && (StateType != A || MoveType = H)
v = 25
value = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(26) != 0 && (StateType = A || MoveType = H)
v = 26
value = 0

;---------------------------------------------------------------------
; 攻撃力補正・ヒットカウント数セット
[State -2,VarAdd]
type = VarAdd
trigger1 = HitPauseTime = 1
v = 3
value = 1
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
triggerall = Var(3) != 0
trigger1 = !P2MoveType = H || (P2StateNo = [150,155]) || (P2StateNo = [5200,5201])
v = 3
value = 0

;---------------------------------------------------------------------
; ユニコーンの角・ヒット判定
[State -2,VarSet]
type = VarSet
trigger1 = Var(6) = -1 && ProjHit1000 = 1
v = 6
value = 0
ignorehitpause = 1

[State -2,EnvColor]
type = EnvColor
trigger1 = ProjHit1000 = 1 || ProjHit3300 = 1
time = 1
value = 248,248,248
under = 1
ignorehitpause = 1

;---------------------------------------------------------------------
; 惑星の祈り・ヒット効果
[State -2,Explod]
type = Explod
trigger1 = ProjHit3300 = 1
anim = 2420
pos = 0,-(55 + Floor(Random / 80))
postype = P2
sprpriority = 6
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State -2,Explod]
type = Explod
trigger1 = ProjHit3300 = 1
anim = 2920
pos = 0,-(55 + Floor(Random / 80))
postype = P2
sprpriority = 6
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State -2,Explod]
type = Explod
trigger1 = ProjGuarded3300 = 1
anim = 2070
pos = 0,-(55 + Floor(Random / 80))
postype = P2
sprpriority = 6
bindtime = 1
ownpal = 1
ignorehitpause = 1

;---------------------------------------------------------------------
; 対　クーラ／イグニス　フラグセット
[State -2,VarSet]
type = VarSet
trigger1 = Var(8) = 0
trigger1 = P2Name = "Kula" || P4Name = "Kula" || P2Name = "Kula Diamond" || P4Name = "Kula Diamond"
v = 8
value = 1

[State -2,VarSet]
type = VarSet
trigger1 = Var(8) = 0
trigger1 = P2Name = "Igniz" || P4Name = "Igniz" || P2Name = "Igniz by Third" || P4Name = "Igniz by Third"
v = 8
value = 2

;---------------------------------------------------------------------
; ターゲットセット
[State -2,VarSet]
type = VarSet
trigger1 = NumTarget > 0
v = 24
value = Target,ID
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
trigger1 = NumTarget = 0
v = 24
value = 0

;---------------------------------------------------------------------
; キャンセルストライカー可否判定
[State -2,VarSet]
type = VarSet
triggerall = Var(20) != 0 && Time = 1
trigger1 = (StateNo = [200,710]) || (StateNo = [1000,2000))
v = 20
value = 0

[State -2,VarSet]
type = VarSet
triggerall = Var(20) = 0 && MoveContact
trigger1 = (StateNo = [200,710]) && StateNo != 230 && StateNo != 330
trigger1 = StateNo != [600,620]
trigger2 = StateNo = [1400,1500]
persistent = 0
v = 20
value = 1
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
triggerall = Var(20) = 0 && MoveGuarded
trigger1 = StateNo = 230 && AnimElemNo(0) >= 9
trigger2 = StateNo = 330 && (StateNo = [600,620])
trigger3 = (StateNo = [1100,1150]) || StateNo = 1230
persistent = 0
v = 20
value = 1
ignorehitpause = 1

;---------------------------------------------------------------------
; ＳＴ　クーラ・ダイアモンドコンボ制限解除
[State -2,TargetDrop]
type = TargetDrop
triggerall = NumHelper(7000) = 1
trigger1 = Helper(7000),StateNo = 7010 && Helper(7000),MoveHit
persistent = 0

;---------------------------------------------------------------------
; ＳＴ呼び出し時　攻撃力補正
[State -2,AttackMulSet]
type = AttackMulSet
trigger1 = NumHelper(7000) = 1 && Var(3) != 0
trigger1 = Helper(7000),MoveContact
trigger2 = NumHelper(7100) = 1 && Var(3) != 0
trigger2 = Helper(7100),MoveContact
trigger3 = NumHelper(7200) = 1 && Var(3) != 0
trigger3 = Helper(7200),MoveContact
value = .625

[State -2,AttackMulSet]
type = AttackMulSet
trigger1 = Var(3) = 0
value = 1.000

;---------------------------------------------------------------------
; Debug Code
[State -2,test]
type = Null;DisplayToClipboard
trigger1 = 1
text = "1P or 2P ? = %d"
params = Var(19)

;---------------------------------------------------
; MAX3演出-pヘルパー

[Statedef 8000]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 8000
sprpriority = -50
velset = -15,0

[State 200,]
type = null;Posset
trigger1 = 1
y = -218

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = facing = 1
trigger1 = pos X <= 0
trigger2 = facing = -1
trigger2 = pos X >= 0
name = "MAX3"
stateno = 8000
ID = 8000
helpertype = normal
pos = 320,0
postype = P1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 181, "ﾁ殊効果]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = noshadow

[State 800, ステートoﾏ更]
type = DestroySelf
triggerall = time > 0
trigger1 = time = 30
trigger2 = root,stateno != [3400,6600]
trigger2 = time = 10
trigger3 = root,stateno = 3420
trigger3 = root,time = 10
trigger4 = root,stateno = 3640
trigger4 = root,time = 20
trigger5 = root,stateno = 3630
trigger5 = root,time = 30
;---------------------------------------------------------------------------------
; MAX3演出-pヘルパー
; パリー"

[Statedef 8010]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 9999
sprpriority = -50

[State 200,]
type = Posset
trigger1 = time = 0
x = 0
y = 0

[State 181, "ﾁ殊効果]
type = AssertSpecial
trigger1 = time = [0,6]
flag = noBG

[State 181, "ﾁ殊効果]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = noshadow

[State 2000]
type = Explod
trigger1 = time = 0
anim = 8010
ID = 8010
pos = ifelse(facing=1,-320,0),0
ownpal = 1
postype = front
supermove = 1
sprpriority = -15
vel = 0,0

[State 1000, 音を-ﾂらす]
type = PlaySnd
trigger1 = time = 7
value = s126,4

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 8




;...................................................................................................................
;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;Helper Winner
[Statedef 8500]
type = A
ctrl = 0
anim = 99999
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
flag3 = Nobardisplay

;Musica de fondo
[State a];
type = PlaySnd
trigger1 = time = 84
value = 666, 7

;Voz "Winner"
[State a];
type = PlaySnd
trigger1 = time = 325
value = 666, 6

;Que el round no termine hasta llegar a los 10 segundos
[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,600]
flag = roundnotover

;Detiene la musica del stage
[state a]
type = AssertSpecial
trigger1 = time >= 32
flag = nomusic

;Con esto hace el Brillo blanco del winner
[state a]
type = varadd
trigger1 = time <= 32
trigger2 = time >= 172
trigger2 = time < 204
v = 1
value = 8

[state a]
type = varset
trigger1 = time = 32
v = 1
value = 256

[state a]
type = varset
trigger1 = time = 172
v = 1
value = -256

[state a]
type = varadd
trigger1 = time >= 108
trigger1 = time < 172
v = 1
value = -8

[State a]
type = AllPalfx
trigger1 = time <= 32
trigger2 = time >= 140
trigger2 = time < 204
time = 1
add = var(1),var(1),var(1)
invertall = 0
color = 256

;Cartel Pequeo winner
[State a]
type = Explod
trigger1 = time = 32
anim = 8500
id = 8500
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1
scale = 9999,9999

;Frase "player won the match"
[State a]
type = Explod
trigger1 = time = 64
anim = 8501
id = 8500
sprpriority = 3
postype = left
pos = 56,118
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;Con esto desap疵ece los carteles de info anteriores
[state a]
type = removeexplod
trigger1 = time = 172
id = 8500

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 172
anim = 8504
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1

;1ｰ Fondo del Winner
[State a]
type = Explod
trigger1 = time = 172
anim = 8508
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 172
anim = 8504
id = 8504
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1

;Quita el fondo negro
[state a]
type = removeexplod
trigger1 = time = 238
id = 8504

;Borde superior
[State a]
type = Explod
trigger1 = time = 172
anim = 8502
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;Borde superior 2
[State a]
type = Explod
trigger1 = time = 172
anim = 8503
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,42
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,46
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,50
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,54
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,0

;Borde inferior-1 (Superior Frase)
[State a]
type = Explod
trigger1 = time = 250
anim = 8507
id = 8507
sprpriority = 3
postype = left
pos = 0,208
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;Con esta variable va a ajustar el Explod para que tenga el efecto de Apertura
[state a]
type = varadd
trigger1 = time >= 252
trigger1 = time < 259
v = 2
value = 14


;Borde inferior (inferior Frase)
[State a]
type = Explod
trigger1 = time = 250
anim = 8505
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Borde inferior (inferior Frase)
[State a]
type = Explod
trigger1 = time = 250
anim = 8506
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Carte Arriba a la izquierda "Winner"
[State a]
type = Explod
trigger1 = time = 270
anim = 8509
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

; Face
[State a]
type = Explod
trigger1 = time = 270
anim = 8530
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Nombre
[State a]
type = Explod
trigger1 = time = 250
anim = 8540
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Otra vez usa las variables para el brillo "Blanco"
[state a]
type = varset
trigger1 = time = 269
v = 1
value = 256

[state a]
type = varadd
trigger1 = time >= 271
trigger1 = time < 335
v = 1
value = -4

[State a]
type = AllPalfx
trigger1 = time >= 269
trigger1 = time < 335
time = 1
add = var(1),var(1),var(1)
invertall = 0
color = 256

;Cursor parpadeante para el inicio de la frase...
[State a]
type = Explod
trigger1 = time = 250
anim = 8515
sprpriority = 3
postype = left
pos = 21,192
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Frase
[State a]
type = Explod
trigger1 = time = 250
trigger1 = var(5) = 0
anim = 8520
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Cursor
[State a]
type = Explod
trigger1 = time = 250
trigger1 = var(5) = 0
anim = 8525
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Helper Winner
[Statedef 8600]
type = A
ctrl = 0
anim = 99999
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
flag3 = Nobardisplay

;Musica de fondo
[State a];
type = PlaySnd
trigger1 = time = 84
value = 666, 7

;Voz "Winner"
[State a];
type = PlaySnd
trigger1 = time = 325
value = 666, 6

;Que el round no termine hasta llegar a los 10 segundos
[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,600]
flag = roundnotover

;Detiene la musica del stage
[state a]
type = AssertSpecial
trigger1 = time >= 32
flag = nomusic

;Con esto hace el Brillo blanco del winner
[state a]
type = varadd
trigger1 = time <= 32
trigger2 = time >= 172
trigger2 = time < 204
v = 1
value = 8

[state a]
type = varset
trigger1 = time = 32
v = 1
value = 256

[state a]
type = varset
trigger1 = time = 172
v = 1
value = -256

[state a]
type = varadd
trigger1 = time >= 108
trigger1 = time < 172
v = 1
value = -8

[State a]
type = AllPalfx
trigger1 = time <= 32
trigger2 = time >= 140
trigger2 = time < 204
time = 1
add = var(1),var(1),var(1)
invertall = 0
color = 256

;Cartel Pequeo winner
[State a]
type = Explod
trigger1 = time = 32
anim = 8500
id = 8500
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1
scale = 9999,9999

;Frase "player won the match"
[State a]
type = Explod
trigger1 = time = 64
anim = 8501
id = 8500
sprpriority = 3
postype = left
pos = 56,118
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;Con esto desap疵ece los carteles de info anteriores
[state a]
type = removeexplod
trigger1 = time = 172
id = 8500

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 172
anim = 8504
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1

;1ｰ Fondo del Winner
[State a]
type = Explod
trigger1 = time = 172
anim = 8508
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 172
anim = 8504
id = 8504
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1

;Quita el fondo negro
[state a]
type = removeexplod
trigger1 = time = 238
id = 8504

;Borde superior
[State a]
type = Explod
trigger1 = time = 172
anim = 8502
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;Borde superior 2
[State a]
type = Explod
trigger1 = time = 172
anim = 8503
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,42
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,46
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,50
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

;pixel negro XD!
[State a]
type = Explod
trigger1 = time = 238
anim = 8504
sprpriority = 3
postype = left
pos = 0,54
vel = 0,12
bindtime = 1
under = 0
ownpal = 1
removetime = 30
pausemovetime = 99999
supermovetime = 99999
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,0

;Borde inferior-1 (Superior Frase)
[State a]
type = Explod
trigger1 = time = 250
anim = 8507
id = 8507
sprpriority = 3
postype = left
pos = 0,208
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999
supermovetime = 99999
ontop = 1

;Con esta variable va a ajustar el Explod para que tenga el efecto de Apertura
[state a]
type = varadd
trigger1 = time >= 252
trigger1 = time < 259
v = 2
value = 14


;Borde inferior (inferior Frase)
[State a]
type = Explod
trigger1 = time = 250
anim = 8505
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Borde inferior (inferior Frase)
[State a]
type = Explod
trigger1 = time = 250
anim = 8506
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Carte Arriba a la izquierda "Winner"
[State a]
type = Explod
trigger1 = time = 270
anim = 8509
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

; Face
[State a]
type = Explod
trigger1 = time = 270
anim = 9001
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Nombre
[State a]
type = Explod
trigger1 = time = 250
anim = 8540
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Otra vez usa las variables para el brillo "Blanco"
[state a]
type = varset
trigger1 = time = 269
v = 1
value = 256

[state a]
type = varadd
trigger1 = time >= 271
trigger1 = time < 335
v = 1
value = -4

[State a]
type = AllPalfx
trigger1 = time >= 269
trigger1 = time < 335
time = 1
add = var(1),var(1),var(1)
invertall = 0
color = 256

;Cursor parpadeante para el inicio de la frase...
[State a]
type = Explod
trigger1 = time = 250
anim = 8515
sprpriority = 3
postype = left
pos = 21,192
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Frase
[State a]
type = Explod
trigger1 = time = 250
trigger1 = var(5) = 0
anim = 8520
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1

;Cursor
[State a]
type = Explod
trigger1 = time = 250
trigger1 = var(5) = 0
anim = 8525
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
under = -1
ownpal = 1
pausemovetime = 99999999
supermovetime = 99999999
ontop = 1
;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------

; Var(2) - StateDef 180
; Var(3) - StateDef -2
; Var(4) - StateDef 4000, 4100, 4500, -2
; Var(6) - StateDef 1000, 1050, 1100, 1150, 1210, 1260, 1400, 200, 220, 230, 250, 270, 280, 300, 310, 320, 330, 500, 510, 520, 530, 600, 610, 700, 710, -2
; Var(7) - StateDef 3400, 3430
; Var(8) - StateDef 190, -2
; Var(19) - StateDef 190, 5900
; Var(20) - StateDef -2
; Var(24) - StateDef -2
; Var(25) - StateDef 40, -2
; Var(26) - StateDef 40, -2
; Var(27) - StateDef 40
; Var(28) - StateDef -2
; Var(29) - StateDef -2
; Var(30) - StateDef -2
; Var(56) - StateDef -2
; Var(57) - StateDef -2

;--------------------- Float Variable List ----------------------


;===========================

[Statedef 10000]
anim=10000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 10000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(9)=-1

[State 10000,立ったら消失]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = root,var(9)||var(9)=-1
trigger2=command="up"&&root,command="up"
trigger3=command="down"&&root,command="down"
trigger4=command="back"&&root,command="back"
trigger5=command="fwd"&&root,command="fwd"
trigger6=command="a"&&root,command="a"
trigger7=command="b"&&root,command="b"
trigger8=command="c"&&root,command="c"
trigger9=command="x"&&root,command="x"
trigger10=command="y"&&root,command="y"
trigger11=command="z"&&root,command="z"
trigger12=command="start"&&root,command="start"

[State 10000,ﾌﾗｸﾞON]
type=varset
triggerall=var(9)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(9)=1

;-------------------------------------------------------------------------------




;///////////////////////////////////////////////////////
;仰け反り時間

[Statedef 10001]
anim=10001;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State -2];ガード時間・のけぞり時間・受身不能時間。
type=varadd
trigger1=var(0) > 0
var(0)=-1
ignorehitpause=1

[State -2];ガード時間・のけぞり時間・受身不能時間
type=varset
triggerall=var(0)>0
trigger1=EnemyNear(Var(21)),Movetype!=H
var(0)=0

[State -2];ガード硬直
type=varset
triggerall=EnemyNear(root,Var(21)),Movetype=H
triggerall=EnemyNear(root,Var(21)),stateno < 200
triggerall=EnemyNear(root,Var(21)),Statetype=A
trigger1=!EnemyNear(root,Var(21)),gethitvar(fall)
trigger1=!(EnemyNear(root,Var(21)),hitshakeover)
trigger1=EnemyNear(root,Var(21)),time=1 || var(0)=0
var(0)=EnemyNear(root,Var(21)),gethitvar(ctrltime)+EnemyNear(root,Var(21)),gethitvar(hitshaketime)
ignorehitpause=1

[State -2];ガード硬直
type=varset
triggerall=EnemyNear(root,Var(21)),Movetype=H
triggerall=EnemyNear(root,Var(21)),stateno < 200
triggerall=EnemyNear(root,Var(21)),Statetype!=A
trigger1=!EnemyNear(root,Var(21)),gethitvar(fall)
trigger1=!(EnemyNear(root,Var(21)),hitshakeover)
trigger1=EnemyNear(root,Var(21)),time=1 || var(0)=0
var(0)=ifelse(EnemyNear(root,Var(21)),gethitvar(ctrltime)<EnemyNear(root,Var(21)),gethitvar(hittime),EnemyNear(root,Var(21)),gethitvar(ctrltime),EnemyNear(root,Var(21)),gethitvar(hittime))+EnemyNear(root,Var(21)),gethitvar(hitshaketime)
ignorehitpause=1

[State -2];のけぞり時間
type=varset
triggerall=EnemyNear(root,Var(21)),Movetype=H
triggerall=EnemyNear(root,Var(21)),stateno > 199
trigger1=!EnemyNear(root,Var(21)),gethitvar(fall)
trigger1=!(EnemyNear(root,Var(21)),hitshakeover)
trigger1=EnemyNear(root,Var(21)),time=1
var(0)=EnemyNear(root,Var(21)),gethitvar(hittime)+EnemyNear(root,Var(21)),gethitvar(hitshaketime)
ignorehitpause=1

[State 10000,立ったら消失]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = ishelper && (root,life <= 0 || !root,Alive || root,stateno = 5150 || roundstate = 3)

[Statedef 21000]
Type = A
Ctrl = 0
Anim = 0
Velset = ifelse(ishelper(21005),5,-5),0
Movetype = I
Physics = N
Sprpriority = 1

[State 21000]
type = assertspecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[State 21000]
type = NotHitBy
value = SCA
trigger1 = 1

[State 21000]
type = PlayerPush
trigger1 = 1
value = 0

[State 21000]
type = SprPriority
trigger1 = 1
value = -5

[State 21000]
type=selfstate
trigger1=!ishelper
value=0

[state 21000]
Type=Projectile
Trigger1 = time = 0
Velocity = ifelse(ishelper(21005),5,-5),0
ProjID = ifelse(ishelper(21005),21005,21000)
Projanim = 0
projhits = 9999
projpriority = 9999
Offset = 0,9999
projstagebound = const(size.ground.front)
Projedgebound = 100000
Projremovetime = -1
supermovetime = 9999
pausemovetime = 9999


[state 21000]
type = velset
Trigger1 = !Root,NumProjID(ifelse(ishelper(21005),21005,21000)) && time
x = 0
y = 0

[State 21000]
Type = DestroySelf
Trigger1 = ishelper && (RoundState > 2 || Root,Life <= 0)

;------------------------------------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;重力計算
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[state -1, yaccel]
type = varset
trigger1 = fvar(39) != enemynear(Var(21)),const(movement.yaccel)
trigger1 = enemynear(Var(21)),stateno != [5000,5210]
trigger1 = enemynear(Var(21)),Vel Y != 0
FV = 39
value = enemynear(Var(21)),const(movement.yaccel)
ignorehitpause = 1

[state -1, yaccel]
type = varset
trigger1 = fvar(39) != enemynear(Var(21)),GetHitVar(yaccel)
trigger1 = enemynear(Var(21)),stateno = [5000,5210]
;trigger1 = enemynear(Var(21)),Vel Y != 0
FV = 39
value = enemynear(Var(21)),GetHitVar(yaccel)
ignorehitpause = 1


[State -3,受身対策]
type = varset
Trigger1 = EnemyNear(Var(21)),StateNo = [5200,5299]
Trigger2 = EnemyNear(Var(21)),AuthorName = "jin"
Trigger2 = EnemyNear(Var(21)),StateNo = 52000
Trigger3 = EnemyNear(Var(21)),AuthorName = "ahuron"
Trigger3 = EnemyNear(Var(21)),StateNo = [700,702]
V = 40
Value = 1

[State -3,受身対策]
type = varset
Trigger1 = EnemyNear(Var(21)),StateNo != [5200,5299]
Trigger2 = EnemyNear(Var(21)),AuthorName = "jin"
Trigger2 = EnemyNear(Var(21)),StateNo != 52000
Trigger3 = EnemyNear(Var(21)),AuthorName = "ahuron"
Trigger3 = EnemyNear(Var(21)),StateNo != [700,702]
V = 40
Value = 0

[State -1,死体に反応しないように]
Type = Varset
trigger1 = NumEnemy > 1
trigger1 = EnemyNear(0),Life > 0
trigger2 = NumEnemy = 1
V = 21
Value = 0

[State -1,死体に反応しないように]
Type = Varset
trigger1 = NumEnemy > 1
trigger1 = EnemyNear(0),Life <= 0
V = 21
Value = 1

[State -3,中段記憶]
Type = VarSet
triggerall = var(59)
triggerall = var(22) = 0
trigger1 = Statetype = C
trigger1 = StateNo != [120,159]
trigger1 = EnemyNear(Var(21)),StateType != A
trigger1 = MoveType = H
teigger1 = StateNo = [5000,5011]
trigger1 = PrevStateNo=131||(PrevStateNo=[151,153])
V = 22
Value = EnemyNear(Var(21)),StateNo

[State -3,中段記憶]
Type = VarSet
triggerall = var(59)
trigger1 = Var(22) > 0
trigger1 = EnemyNear(Var(21)),StateNo = Var(22)
V = 23
Value = 1

[State -3,中段記憶]
Type = VarSet
triggerall = var(59)
trigger1 = Var(22) > 0
trigger1 = EnemyNear(Var(21)),StateNo != Var(22)
V = 23
Value = 0

[State -3,下段記憶]
Type = VarSet
triggerall = var(59)
triggerall = var(24) = 0
trigger1 = Statetype = S
trigger1 = StateNo != [120,159]
trigger1 = EnemyNear(Var(21)),StateType = S
trigger1 = MoveType = H
teigger1 = StateNo = [5000,5001]
trigger1 = PrevStateNo=130||(PrevStateNo=[150,151])
V = 24
Value = EnemyNear(Var(21)),StateNo

[State -3,下段記憶]
Type = VarSet
triggerall = var(59)
trigger1 = Var(24) > 0
trigger1 = EnemyNear(Var(21)),StateNo = Var(24)
V = 25
Value = 1

[State -3,下段記憶]
Type = VarSet
triggerall = var(59)
trigger1 = Var(24) > 0
trigger1 = EnemyNear(Var(21)),StateNo != Var(24)
V = 25
Value = 0

[State -3,コンボ確認]
type = Varset
trigger1 = 1
var(31) = 0

[State -3, AI]
Type = null;VarSet
Triggerall = !var(59)
Trigger1 = RoundState = 2
Trigger1 = Ctrl
var(59) = 11
ignorehitpause = 1

[State -3, AI]
type=helper
trigger1=!NumHelper(10000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(59)=0
Trigger1=(PrevStateNo=[191,194])||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=10000
ID=10000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -3, AI]
type=changestate
trigger1= ishelper(10000)
trigger1= stateno!=10000
value=10000

[State -3, AI]
Type = VarSet
Triggerall = !var(59)
Triggerall = RoundState = [1,2]
Trigger1 = Command = "AI0"
Trigger2 = Command = "AI1"
Trigger3 = Command = "AI2"
Trigger4 = Command = "AI3"
Trigger5 = Command = "AI4"
Trigger6 = Command = "AI5"
Trigger7 = Command = "AI6"
Trigger8 = Command = "AI7"
Trigger9 = Command = "AI8"
Trigger10 = Command = "AI9"
Trigger11 = Command = "AI10"
Trigger12 = Command = "AI11"
Trigger13 = Command = "AI12"
Trigger14 = Command = "AI13"
Trigger15 = Command = "AI14"
Trigger16 = Command = "AI15"
Trigger17 = Command = "AI16"
Trigger18 = Command = "AI17"
Trigger19 = Command = "AI18"
Trigger20 = Command = "AI19"
Trigger21 = Command = "AI20"
Trigger22 = Command = "AI21"
Trigger23 = Command = "AI22"
Trigger24 = Command = "AI23"
Trigger25 = Command = "AI24"
Trigger26 = Command = "AI25"
Trigger27 = Command = "AI26"
Trigger28 = Command = "AI27"
Trigger29 = Command = "AI28"
Trigger30 = Command = "AI29"
Trigger31 = Command = "AI30"
Trigger32 = numhelper(10000)
Trigger32 = helper(10000),var(59)
var(59) = 11
ignorehitpause = 1

[State -3,常時AI起動]
Type = VarSet
Triggerall = roundstate != 1
Triggerall = roundstate = 2
Triggerall = roundstate != 3
Triggerall = roundstate != 4
trigger1 = !EnemyNear(Var(21)),vel x = 0
trigger2 = !EnemyNear(Var(21)),vel y = 0
trigger3 = EnemyNear(Var(21)),ctrl
V = 41
value = 0

;================================================================================================
;
[state -3, yaccel]
type = varset
trigger1 = fvar(30) != EnemyNear(floor(fvar(37))),const(movement.yaccel)
trigger1 = EnemyNear(floor(fvar(37))),stateno != [5000,5210]
trigger1 = EnemyNear(floor(fvar(37))),Vel Y != 0
FV = 30
value = EnemyNear(floor(fvar(37))),const(movement.yaccel)
ignorehitpause = 1


[state -3, yaccel]
type = varset
trigger1 = fvar(30) != EnemyNear(floor(fvar(37))),GetHitVar(yaccel)
trigger1 = EnemyNear(floor(fvar(37))),stateno = [5000,5210]
;trigger1 = EnemyNear(floor(fvar(37))),Vel Y != 0
FV = 30
value = EnemyNear(floor(fvar(37))),GetHitVar(yaccel);
ignorehitpause = 1


[state -3, yaccel]
type = varset
trigger1 = fvar(30) != 0
trigger1 = EnemyNear(floor(fvar(37))),Vel Y = 0
FV = 30
value = 0
ignorehitpause = 1


;================================================================================================
;
[State -3]
Type = varset
Triggerall = var(59)
Trigger1 = Stateno = 1351 && Movehit
fvar(36) = 1


[State -3]
Type = varset
Triggerall = var(59)
Trigger1 = P2MoveType != H
fvar(36) = 0


;================================================================================================
;
[State -3]
Type = varset
Triggerall = var(59)
Trigger1 = Stateno = 3021 && Movehit
fvar(36) = 2


[State -3]
Type = varset
Triggerall = var(59)
Trigger1 = P2MoveType != H
fvar(36) = 0


;================================================================================================


[State -3]
type = varset
trigger1 = RoundState != 2
var(25) = 0

[State -3]
type = varset
triggerall = !var(25)
trigger1 = Ctrl
var(25) = GameTime
persistent = 0

[State -3];
type = varset
triggerall = RoundState = 2
trigger1 = GameTime = var(25)
trigger2 = (GameTime - var(25))%200 = 1
trigger2 = P2MoveType != A
var(26) = Enemy(0),NumHelper
ignorehitpause = 1

[State -3];
type = varset
triggerall = NumEnemy = 2
trigger1 = GameTime = var(25)
trigger2 = (GameTime - var(25))%200 = 1
trigger2 = P2MoveType != A
var(27) = Enemy(1),NumHelper
ignorehitpause = 1

[State -3]
type = varset
triggerall = Enemy(0),NumHelper - var(26) > 0
trigger1 = NumEnemy = 1
trigger2 = NumEnemy = 2
trigger2 = Enemy(1),NumHelper - var(27) > 0
var(28) = 1
ignorehitpause = 1

[State -3]
type = varset
trigger1 = NumEnemy = 1
trigger1 = Enemy(0),NumHelper - var(26) <= 0
trigger2 = NumEnemy = 2
trigger2 = Enemy(0),NumHelper - var(26) <= 0
trigger2 = Enemy(1),NumHelper - var(27) <= 0
var(28) = 0
ignorehitpause = 1


;================================================================================================

[State -3]
Type = varset
Trigger1 = numenemy=1
fvar(37) = 0


[State -3]
Type = varset
Trigger1 = numenemy=2
fvar(37) = ifelse(EnemyNear(0),alive,0,1)

;==============================================================================
; 変数管理
;==============================================================================
;v56 VarRandom (0-19)
;v57 Facing
;v58 Tag
;v59 AI

;fv37 Coefficient of Friction
;fv38 Tag mode
;fv39 Combo
;==============================================================================
[State -1, AI]
Type = VarSet
TriggerAll = Var(59) >= 1	;AIがセットされた状態
Trigger1 = RoundState = 4	;ラウンド終了後
Trigger2 = Win = 1			;勝ったとき
Trigger3 = Lose = 1			;負けたとき
Trigger4 = DrawGame = 1		;引き分けたとき
V = 59
Value = -Var(59)

[State -1, AI]
Type = VarSet
TriggerAll = Var(59) <= -1	;AIを停止させた状態
Trigger1 = RoundState = 2	;ラウンド開始
V = 59
Value = -Var(59)

[State -1, タッグ用生死判別]
Type = VarSet
triggerall = var(59)>0
triggerall = RoundState = 2
trigger1 = NumEnemy = 1
trigger2 = NumEnemy = 2
trigger2 = EnemyNear(0),life > 0
var(58) = 0
IgnoreHitPause = 1

[State -1, タッグ用生死判別]
Type = VarSet
triggerall = var(59)>0
triggerall = RoundState = 2
trigger1 = NumEnemy = 2
trigger1 = EnemyNear(0),life <= 0
var(58) = 1
IgnoreHitPause = 1
;------------------------------------------------------------------------------
;摩擦計算関係
[State -2, Facing]
type = VarSet
trigger1 = 1
var(57) = -(Facing)*(EnemyNear(var(58)),Facing)
ignorehitpause = 1

[State -1, 相手摩擦係数]
Type = VarSet
Trigger1 = 1
fvar(37) = IfElse(enemynear(var(58)),StateType=C,(EnemyNear(var(58)),Const(movement.crouch.friction)),(EnemyNear(var(58)),Const(movement.stand.friction)))
IgnoreHitPause = 1
;------------------------------------------------------------------------------
;コンボ関係
[State -1, 変数リセット]
Type = VarSet
triggerall = var(59) >= 1
trigger1 = RoundState = 4
trigger2 = stateno = 5120 || movetype = H
trigger3 = EnemyNear,StateNo = [5070,5120]
trigger4 = fvar(39) = 2
trigger4 = EnemyNear(var(58)),GetHitVar(HitShakeTime) + EnemyNear(var(58)),GetHitVar(HitTime) <= 0
trigger5 = stateno = 200 || stateno = 215 || stateno = 210 || stateno = 230|| stateno = 205|| stateno = 235 || stateno = 240|| stateno = 245
trigger6 = fvar(39) = 3
trigger6 = stateno = 1000 || stateno = 1010 || stateno = 1081 || stateno = 1082
fvar(39) = 0
IgnoreHitPause = 1

[State -1];J攻撃hit
Type = VarSet
triggerall = var(59) >= 1
trigger1 = stateno = 310 && movehit
trigger2 = stateno = 310 && movecontact
trigger3 = stateno = 215 && movecontact
fvar(39) = 1
IgnoreHitPause = 1

[State -1];ベノム
Type = VarSet
triggerall = var(59) >= 1
triggerall = stateno!=1000
trigger1 = projhittime(1000) = 1
trigger2 = projhittime(1010) = 1
fvar(39) = 2
IgnoreHitPause = 1

[State -1];トルネード
Type = VarSet
triggerall = var(59) >= 1
trigger1 = stateno = 1025 && movehit
trigger2 = stateno = 310 && movehit
fvar(39) = 3
IgnoreHitPause = 1
;------------------------------------------------------------------------------
;VarRandom
[State -1,VarRandom]
Type = VarRandom
TriggerAll = Var(59) >= 1
Trigger1 = Time = 1
Trigger2 = Time%60 = 1
Trigger2 = MoveType != I
Trigger3 = Time%1 = 0
Trigger3 = MoveType = I
V = 56
Range = 0,19
IgnoreHitPause = 1


;---------------------------------------------------

;---------------------------------------------------


[State -1, S]
type = ChangeState
value = 1150
triggerall = var(59)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2StateType != L
triggerall = P2StateType != A
triggerall = P2bodydist X = [-15,50]
triggerall = P2bodydist y >= 0
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -7
Triggerall = prevstateno = [4000,4150]
triggerall = EnemyNear(floor(fvar(37))),ctrl = 0
Trigger1 = Random <= var(59)*100

[State -3, Guard]
Type = ChangeState
Value = 120
TriggerAll = var(59)
TriggerAll = StateType = A
TriggerAll = Ctrl
TriggerAll = IfElse(Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0,(Abs(P2Dist X) <= 60),1)
triggerall = Random<=var(59)*100
Trigger1 = InGuardDist || (Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0 && P2MoveType = A)
Trigger1 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger2 = InGuardDist || Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0
Trigger2 = Enemy,NumProj > 0
Trigger3 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger3 = P2BodyDist X < 0
Trigger4 = EnemyNear(floor(fvar(37))),Vel X > 0
Trigger4 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger5 = P2movetype = A
Trigger5 = Var(28)


[State -3, Guard]
Type = ChangeState
Value = 120
TriggerAll = var(59)
TriggerAll = StateType != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
TriggerAll = IfElse(Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0,(Abs(P2Dist X) <= 60),1)
triggerall = Random<=var(59)*100
Trigger1 = InGuardDist || (Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0 && P2MoveType = A)
Trigger1 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger2 = InGuardDist || Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0
Trigger2 = Enemy,NumProj > 0
Trigger3 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger3 = P2BodyDist X < 0
Trigger4 = EnemyNear(floor(fvar(37))),Vel X > 0
Trigger4 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger5 = P2movetype = A
Trigger5 = Var(28)

[State -3, Dash]
type = ChangeState
value = 100
triggerall = var(59)
triggerall = !fvar(36)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2BodyDist X >= 30
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22
triggerall = Stateno != 100
triggerall = !inguarddist
triggerall = P2MoveType = H
triggerall = P2StateType != L
Trigger1 = Random <= var(59)*100

[State -1,バックステップ]
Type     = ChangeState
Value    = 105
TriggerAll = var(59) >= 1
triggerall = Roundstate = 2
Triggerall = StateType != A
Triggerall = enemynear(var(58)),MoveType != H
Triggerall = enemynear(var(58)),Stateno != [120,159]
Triggerall = statetype = S
Triggerall = backedgebodydist > 50
triggerall = (ctrl || stateno=19 || stateno=21) && (stateno != 20 && stateno != 11)
triggerall = fvar(39)=0
Trigger1 = enemynear(var(58)),StateType != L
Trigger1 = P2BodyDist X <= 45
trigger1 = Random <= var(59)*100
Trigger2 = enemynear(var(58)),StateType != L
trigger2 = p2bodydist X =[-10,110]
trigger2 = random < (15-var(59))*100
Trigger3 = enemynear(var(58)),StateType != L
Trigger3 = P2BodyDist X <= 30
trigger3 = random <= var(59)*100
trigger4 = enemynear(var(58)),statetype = L
trigger4 = p2bodydist x <= 35
trigger5 = random <= var(59)*100
trigger5 = (NumEnemy = 2 && fvar(38) = 1)
trigger5 = p2bodydist x <= 110

;---------------------------------------------------

[State -3, T S]
type = ChangeState
value = 4050
triggerall = var(59)
Triggerall = RoundState = 2
TriggerAll = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType != L
TriggerAll = P2BodyDist X = [-10,110]
TriggerAll = P2BodyDist Y >= -60
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100;|| stateno = 2003|| stateno = 2004|| stateno = 2005
triggerall = !EnemyNear(floor(fvar(37))),HitDefAttr = SCA,NT,ST,HT
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -30
TriggerAll = Random<= var(59)*100
triggerall = EnemyNear(floor(fvar(37))),Time >=30 || Time <= 2 || var(59) >= 11
trigger1 = EnemyNear(floor(fvar(37))),Time >=50 || var(59) >= 11
Trigger2 = (PrevStateNo=[5000,5270]) || prevstateno = 5200
Trigger3 = (PrevStateNo=[120,159])

[State -3, T S]
type = ChangeState
value = 4050
triggerall = var(59)
Triggerall = RoundState = 2
TriggerAll = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType != L
TriggerAll = P2BodyDist X = [-10,110]
TriggerAll = P2BodyDist Y >= -60
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100;|| stateno = 2003|| stateno = 2004|| stateno = 2005
triggerall = !EnemyNear(floor(fvar(37))),HitDefAttr = SCA,NT,ST,HT
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -30
Triggerall = Random <= var(59)*100
triggerall = EnemyNear(floor(fvar(37))),Time >=30 || Time <= 2 || var(59) >= 11
trigger1 = EnemyNear(floor(fvar(37))),Time >=50 || var(59) >= 11
Trigger2 = (PrevStateNo=[5000,5270]) || prevstateno = 5200
Trigger3 = (PrevStateNo=[120,159])



[State -3, LW]
type = ChangeState
value = 4050
Triggerall = var(59)
Triggerall = StateType != A
Triggerall = RoundState = 2
Triggerall = !InGuardDist
triggerall = P2StateType != L
Triggerall = P2BodyDist X = [120,160]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100
Triggerall = numprojID(1000) = 0
Triggerall = Random <= var(59)*100
Trigger1 = EnemyNear(floor(fvar(37))),NumProj >= 1
Trigger2 = Var(28)
Trigger2 = EnemyNear(floor(fvar(37))),HitDefAttr = ,AP

[State -3, Throw]
type = ChangeState
value = 4000
triggerall = var(59)
triggerall = roundstate = 2
triggerall = power >= 1000
triggerall = stateno = [150,151]
triggerall = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType != L
triggerall = EnemyNear(floor(fvar(37))),Animtime <= -13
triggerall = BackEdgeBodyDist <= 15
triggerall = P2BodyDist X = [-5,60]
triggerall = P2BodyDist Y >= 45
Trigger1 = Random <= var(59)*100


[State -3, T S]
type = ChangeState
value = 4000
triggerall = var(59)
triggerall = roundstate = 2
triggerall = stateno = [150,151]
triggerall = power >= 1000
triggerall = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType != L
triggerall = EnemyNear(floor(fvar(37))),Animtime <= -30
triggerall = EnemyNear(floor(fvar(37))),BackEdgeBodyDist >= 40
triggerall = BackEdgeBodyDist <= 16
triggerall = P2BodyDist X = [0,120]
Trigger1 = Random <= var(59)*100

[State -3, Guard Cancel Attack]
Type = ChangeState
Value = 4500
triggerall = var(59) && RoundState = 2
triggerall = statetype != A && Power = [1000,3000]
triggerall = EnemyNear(var(51)),StateType != L
triggerall = p2bodydist X = [-10,50]
triggerall = EnemyNear(var(51)),AnimTime <= -3
triggerall = random <= var(59)*100
trigger1 = (StateNo = 150) || (StateNo = 152)

[State -1, Taunt]
Type = ChangeState
Value = 195
triggerall = var(59)
triggerall = alive
triggerall = life > 0
triggerall = roundstate = 3
triggerall = statetype != A
triggerall = prevstateno != 195
trigger1 = ctrl
ignorehitpause = 0

[State -3, UKEMI]
type = ChangeState
value = 5201
triggerall = Var(59)
triggerall = roundstate = 2
triggerall = stateno = 5050
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
triggerall = inguarddist
trigger1 = random <= 100*var(59)

[State -1, AI Silent Nage]
type = ChangeState
triggerall = NumEnemy
triggerall = roundstate = 2 && var(59)
triggerall = ctrl && StateType != A
triggerall = P2statetype != A && P2statetype != L
triggerall = P2movetype = I && P2movetype != H
triggerall = P2bodyDist X <= 10
triggerall = P2stateno != 5120
Trigger1 = Random<= var(59)*100
value = ifelse(random<=300,850,800)

[State -1, Throw]
type = ChangeState
value = 850
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != C
triggerall = power >= 1000
triggerall = life<=lifemax*0.6
trigger1 = stateno = 150 || stateno = 152
trigger1 = p2bodydist x <= 45
trigger1 = random <= var(59)*100

[State -1, Throw]
type = ChangeState
value = 800
triggerall = var(59) >= 1
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = (ctrl || stateno=19 || stateno=21)
triggerall = stateno!=[99,100]
triggerall = EnemyNear(var(51)),stateno != 5120
TriggerAll = EnemyNear(var(51)),StateType != L
TriggerAll = EnemyNear(var(51)),MoveType != H
triggerall = EnemyNear(var(51)),statetype != A
triggerall = p2bodydist x = [-3,15]
Trigger1 = Random <= var(59)*100
Trigger2 = p2StateNo=[120,159]
trigger3 = prevstateno=[4000,4150]

[State -3, Sjump]
type = ChangeState
value = 43
triggerall = var(59)
triggerall = !fvar(36)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100;|| stateno = 2003|| stateno = 2004|| stateno = 2005
triggerall = P2BodyDist X = [0,90]
triggerall = P2BodyDist Y >= 0
triggerall = !inguarddist
triggerall = P2movetype = H
triggerall = P2StateType != L
triggerall = P2StateType = C
triggerall = P2stateno = [120,159]
Trigger1 = Random <= var(59)*100

[State -1, Walk]
type = ChangeState
value = 21
triggerall = !fvar(36)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = BackEdgeBodyDist > 0
triggerall = !inguarddist
triggerall = stateno != [10,12]
triggerall = ctrl || stateno = 19
trigger1 = enemynear,movetype != H
trigger1 = P2BodyDist X >= 240
trigger1 = random <= 5*var(59)
trigger2 = enemynear,movetype != H
trigger2 = P2BodyDist X = [120,240]
trigger2 = random <= 10*var(59)
trigger3 = enemynear,movetype != H
trigger3 = P2BodyDist X = [0,120]
trigger3 = random <= 10*var(59)
trigger4 = enemynear,statetype = L
trigger4 = P2BodyDist X <= 30
trigger4 = random <= 10*var(59)
trigger5 = enemynear,movetype = H
trigger5 = enemynear,statetype = A
trigger5 = P2BodyDist X <= 5
trigger5 = enemynear,BackEdgeBodyDist <= 0 || enemynear,FrontEdgeBodyDist <= 0
trigger5 = random <= 8*var(59)

[State -1, Walk]
type = ChangeState
value = 22
triggerall = !fvar(36)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = frontedgebodydist > 0
triggerall = !inguarddist
triggerall = ctrl || stateno = 21
triggerall = stateno != [10,12]
trigger1 = P2BodyDist X = [240,270]
trigger1 = random <= 7*(var(59))
trigger2 = P2BodyDist X = [120,240]
trigger2 = random <= 10*(var(59))
trigger3 = P2BodyDist X = [0,120]
trigger3 = random <= 8*(var(59))
trigger3 = enemynear,stateno != [5000,5210]
trigger4 = enemynear,StateNo= [120,155]
trigger4 = random <= 10*(var(59))
trigger4 = P2BodyDist X <= 60
trigger5 = enemynear,statetype != A
trigger5 = enemynear,statetype = L
trigger5 = P2BodyDist X = [40,120]
trigger5 = Random <= var(59)*100*(var(59))
trigger6 = enemynear,statetype != L
trigger6 = enemynear,movetype = H
trigger6 = enemynear,stateno = [5000,5029]
trigger6 = Random <= var(59)*100*var(59)

[State -3, H-Jump]
type = ChangeState
value = 44
Triggerall = var(59)
Triggerall = StateType != A
Triggerall = RoundState = 2
triggerall = P2StateType != L
triggerall = P2StateType != A
triggerall = P2MoveType != H
Triggerall = P2BodyDist X >= 200
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100;|| stateno = 2003|| stateno = 2004|| stateno = 2005
Triggerall = Random <= var(59)*100
trigger1 = EnemyNear(floor(fvar(37))),NumProj >= 1 || EnemyNear(floor(fvar(37))),HitDefAttr = SC,NP,SP,HP
Trigger2 = Var(28)
Trigger2 = EnemyNear(floor(fvar(37))),HitDefAttr = ,AP

[State -3, FWalk]
type = ChangeState
value = 500
TriggerAll = var(59)
triggerall = statetype = A && vel x != 0
triggerall = p2statetype != A
triggerall = p2bodydist x < 0
TriggerAll = EnemyNear(floor(fvar(37))),BackEdgeBodyDist >= 20
trigger1 = vel y > .1 ;|| p2bodydist Y <= 35
trigger1 = ctrl

[State -3, SKr]
type = ChangeState
value = ifelse(power>=2000,6600,1150)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100|| stateno = 725|| stateno = 1710
triggerall = P2bodydist X = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),65+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2bodydist y = [-72-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30)),0-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30))]
triggerall = P2statetype != L
triggerall = P2movetype != H
triggerall = P2Statetype = A
Trigger1 = Random <= var(59)*100

[State -3, Dash]
Type = ChangeState
Value = 100
Ctrl = 0
Triggerall = var(59)
Triggerall = RoundState = 2
Triggerall = StateType != A
Triggerall = P2StateType = L
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22
triggerall = Stateno != 100
Triggerall = P2BodyDist X = [15,200]
Triggerall = Facing != EnemyNear(floor(fvar(37))),Facing
Triggerall = EnemyNear(floor(fvar(37))),BackEdgeBodyDist >= 40
Trigger1 = Random <= var(59)*100
Trigger1 = P2StateNo = [5030,5110]

[State -3, LC]
type = ChangeState
value = 7000
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
Triggerall = P2BodyDist Y >= -60
Triggerall = P2BodyDist X >= 160
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100|| stateno = 725|| stateno = 1710
Triggerall = P2StateType != A
triggerall = power >= 1000
Triggerall = P2moveType != H
Triggerall = P2MoveType = I
Triggerall = P2StateType != L
Triggerall = !InGuardDist
Trigger1 = EnemyNear(floor(fvar(37))),Vel X <= 0
Trigger1 = Random <= var(59)*100

[State -3, LC]
type = ChangeState
value = 1050
triggerall = var(59) && roundstate = 2
triggerall = EnemyNear(floor(fvar(37))),Facing
triggerall = stateno != [100,101]
TriggerAll = NumHelper(1000) = 0
Triggerall = Random <= 800
triggerall = (stateno != [5000,5270])
triggerall = !IsHelper
triggerall = EnemyNear(floor(fvar(37))),numproj = 0
triggerall = p2statetype != A
triggerall = statetype != A
triggerall = p2movetype != A
triggerall = ctrl
trigger1 = p2bodydist X = [140 + enemynear(var(50)),vel x * 10,190]
trigger1 = random <= var(59)*100

[State -3,G･C]
type = ChangeState
value = 3000
triggerall = var(59) >= 10
TriggerAll = RoundState = 2
triggerall = P2StateType != L
TriggerAll = StateType != A
TriggerAll = power >= 1000
triggerall = P2bodydist X > 120;= [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
;triggerall = P2bodydist y = [-72-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30)),0-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30))]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100|| stateno = 725
TriggerAll = P2MoveType = A
TriggerAll = Random<= 999;var(59)*100
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -8
triggerall = EnemyNear(floor(fvar(37))),Time >=30 || Time <= 2 || var(59) >= 11
trigger1 = EnemyNear(floor(fvar(37))),Time >=50 || var(59) >= 11
Trigger2 = (PrevStateNo=[5000,5270]) || prevstateno = 5201
Trigger3 = (PrevStateNo=[120,159])

[State -1,G･C]
type = ChangeState
value = 7500
triggerall = var(59) >= 10
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2StateType != L
triggerall = power >= 1000
triggerall = P2bodydist X = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2bodydist y = [-72-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30)),0-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30))]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100|| stateno = 725|| stateno = 1710
TriggerAll = P2MoveType = A
TriggerAll = Random<= var(59)*100
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -8
triggerall = EnemyNear(floor(fvar(37))),Time >=30 || Time <= 2 || var(59) >= 11
trigger1 = EnemyNear(floor(fvar(37))),Time >=50 || var(59) >= 11
Trigger2 = (PrevStateNo=[5000,5270]) || prevstateno = 5201
Trigger3 = (PrevStateNo=[120,159])

[State -1,G･C]
type = ChangeState
value = ifelse(random<=300,720,730)
triggerall = var(59) >= 10
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2StateType != L
triggerall = P2bodydist X = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2bodydist y = [-72-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30)),0-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*(8+1)/2)*fvar(30))]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100|| stateno = 1710
TriggerAll = P2MoveType = A
TriggerAll = Random<= var(59)*100
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -4
triggerall = EnemyNear(floor(fvar(37))),Time >=30 || Time <= 2 || var(59) >= 11
trigger1 = EnemyNear(floor(fvar(37))),Time >=50 || var(59) >= 11
Trigger2 = (PrevStateNo=[5000,5270]) || prevstateno = 5201
Trigger3 = (PrevStateNo=[120,159])

[State -1, LK]
type = ChangeState
value = 1200
triggerall = Var(59)
triggerall = roundstate = 2
triggerall = !IsHelper
triggerall = statetype != A
triggerall = p2statetype != L
triggerall = EnemyNear(floor(fvar(37))),stateno != 5120
triggerall = stateno != [5000,5270]
triggerall = ctrl
Triggerall = Random <= var(59)*100
triggerall = EnemyNear(floor(fvar(37))),animtime <= -14
triggerall = EnemyNear(floor(fvar(37))),vel x >= 0
triggerall = p2bodydist X + enemynear(var(51)),vel x * 14 <= 90
triggerall = p2movetype != H
triggerall = EnemyNear(floor(fvar(37))),MoveType=A
Trigger1 = EnemyNear(floor(fvar(37))),Time >= 5
trigger1 = Random <= var(59)*100

[State -3,]
Type = ChangeState
value = 330
TriggerAll = var(59)
triggerall = roundstate = 2
TriggerAll = StateType != A
TriggerAll = P2StateType = L
Triggerall = Facing != EnemyNear(floor(fvar(37))),Facing
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100
Triggerall = P2BodyDist X = [-5,40]
Trigger1 = P2StateNo = 5120
Trigger1 = Random <= var(59)*100


;ジャンプ弱キック
[State -1, ジャンプ弱キック]
type = ChangeState
value = 610
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = stateno != 105
triggerall = ctrl
triggerall = p2bodydist x + vel x*8 = [-6,75]
triggerall = p2bodydist y + vel y*8 = [20,85]
trigger1 = var(56)=[0,9]

;ジャンプ強パンチ
[State -1, ジャンプ強パンチ]
type = ChangeState
value = 530
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = (enemynear(var(58)),statetype = A && vel Y<0) || (vel Y>-1)
triggerall = EnemyNear(Var(58)),statetype != L || (EnemyNear(Var(58)),stateno = 5120 && EnemyNear(Var(58)),AnimTime = [-4,0])
triggerall = stateno != 105
triggerall = ctrl
;triggerall = vel Y>=0
triggerall = p2bodydist x = [-5,70+vel x*7+EnemyNear(var(58)),vel x*7]
triggerall = p2bodydist y - vel y*7 = [-70,30]
triggerall = Pos Y < -25-vel Y*7
trigger1 = random<=var(59)*100

;ジャンプ強キック
[State -1, ジャンプ強キック]
type = ChangeState
value = 520
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = (enemynear(var(58)),statetype = A && vel Y<0) || (vel Y>-1); || (EnemyNear(Var(58)),stateno = 5120 && (EnemyNear(Var(58)),AnimTime = [-4,0]))
triggerall = EnemyNear(Var(58)),statetype != L || (EnemyNear(Var(58)),stateno = 5120 && EnemyNear(Var(58)),AnimTime = [-4,0])
triggerall = stateno != 105
triggerall = ctrl
;triggerall = vel Y>=0
triggerall = p2bodydist x = [-10,70+vel x*11+EnemyNear(var(58)),vel x*11]
triggerall = p2bodydist y - vel y*11 = [-80,70]
triggerall = Pos Y < -25-vel Y*11
trigger1 = random<=var(59)*100

;空中ふっとばし
[State -1, 空中ふっとばし]
type = ChangeState
value = 510
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = (enemynear(var(58)),statetype = A && vel Y<0) || (vel Y>-1)
triggerall = EnemyNear(Var(58)),statetype != L; || (EnemyNear(Var(58)),stateno = 5120 && EnemyNear(Var(58)),AnimTime = [-4,0])
triggerall = stateno != 105
triggerall = ctrl
;triggerall = vel Y>=0
triggerall = p2bodydist x = [38,80+vel x*2+EnemyNear(var(58)),vel x*2]
triggerall = p2bodydist y - vel y*12 = [-75,60]
triggerall = Pos Y < -35-vel Y*2
trigger1 = random<=var(59)*100

;しゃがみ強パンチ
[State -1, しゃがみ強パンチ]
type = ChangeState
value = 210
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
triggerall = EnemyNear(var(58)),statetype = A
triggerall = EnemyNear(var(58)),statetype!= L
triggerall = EnemyNear(var(58)),movetype != H
TriggerAll =!InGuardDist
triggerall = P2BodyDist X = [-3,50]
triggerall = enemynear(var(58)),vel x >= 0
triggerall = p2bodydist y = [-140,-30]
TriggerAll = EnemyNear(var(58)),Time >= 30 || (!Time&&(var(59)>8)) || var(59)>9
trigger1 = random <= var(59)*100

;しゃがみ弱キック
[State -1, しゃがみ弱キック]
type = ChangeState
value = 300
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(var(58)),statetype != A
triggerall = EnemyNear(var(58)),statetype != L
triggerall = P2bodydist X <= 53
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
trigger1 = var(56)=[0,2]
trigger2 = fvar(39)=1

;近距離立ち弱キック
[State -1, 立ち弱キック(close)]
type = ChangeState
value = IfElse(P2BodyDist X <= 18,220,270)
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(var(58)),statetype != A
triggerall = EnemyNear(var(58)),statetype != L
triggerall = P2bodydist X <= 15
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
trigger1 = var(56)=[6,8]

;しゃがみ弱パンチ
[State -1, しゃがみ弱パンチ]
type = ChangeState
value = 300
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(var(58)),statetype != A
triggerall = EnemyNear(var(58)),statetype != L
triggerall = P2bodydist X <= 42
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
trigger1 = var(56)=[3,5]

;近距離立ち強キック
[State -1, 立ち強キック(close)]
type = ChangeState
value = IfElse(P2BodyDist X <= 20,230,280)
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(var(58)),statetype != A
triggerall = EnemyNear(var(58)),statetype != C
triggerall = EnemyNear(var(58)),statetype != L
triggerall = p2bodydist Y >= -100
triggerall = P2bodydist X <= 15
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
trigger1 = var(56)=[0,2]
trigger2 = fvar(39)=1


;立ち弱パンチ
[State -1, 立ち弱パンチ]
type = ChangeState
value = IfElse(P2BodyDist X <= 20,200,250)
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(var(58)),statetype != C
triggerall = EnemyNear(var(58)),statetype != L
triggerall = p2bodydist Y >= -100
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
trigger1 = var(56)=[3,5]
trigger2 = fvar(39)=1


;しゃがみ弱パンチ
[State -1, しゃがみ弱パンチ]
type = ChangeState
value = 320
TriggerAll = var(59) >= 1
TriggerAll = Roundstate = 2
TriggerAll = stateType != A
TriggerAll = enemynear(var(58)),StateType != L
TriggerAll = enemynear(var(58)),StateType != A
TriggerAll = enemynear(var(58)),MoveType != H
TriggerAll =!InGuardDist
TriggerAll = P2BodyDist X <= 42
TriggerAll =(enemynear(var(58)),StateNo != [120,159])
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
Trigger1 = var(56)=[0,2]

;しゃがみ強キック
[State -1, しゃがみ強キック]
type = ChangeState
value = 310
TriggerAll = var(59) >= 1
TriggerAll = Roundstate = 2
TriggerAll = stateType != A
TriggerAll = enemynear(var(58)),StateType != L
TriggerAll = enemynear(var(58)),StateType != A
TriggerAll = enemynear(var(58)),MoveType != H
TriggerAll =!InGuardDist
TriggerAll = P2BodyDist X <= 40
TriggerAll =(enemynear(var(58)),StateNo != [120,159])
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
Trigger1 = var(56)=[5,6]

;立ち強パンチ
[State -1, 立ち強パンチ]
type = ChangeState
value = 320
TriggerAll = var(59) >= 1
TriggerAll = Roundstate = 2
TriggerAll = stateType != A
TriggerAll = enemynear(var(58)),StateType != L
TriggerAll = enemynear(var(58)),StateType != C
TriggerAll = enemynear(var(58)),MoveType != H
TriggerAll =!InGuardDist
TriggerAll = P2BodyDist X <= 60
triggerall = P2bodydist y >=-60
TriggerAll =(enemynear(var(58)),StateNo != [120,159])
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
Trigger1 = var(56)=[5,6]

;立ち強キック
[State -1, 立ち強キック]
type = ChangeState
value = IfElse(P2BodyDist X <= 25,210,260)
TriggerAll = var(59) >= 1
TriggerAll = Roundstate = 2
TriggerAll = stateType != A
TriggerAll = enemynear(var(58)),StateType != L
TriggerAll = enemynear(var(58)),StateType != C
TriggerAll = enemynear(var(58)),MoveType != H
TriggerAll =!InGuardDist
TriggerAll = P2BodyDist X <= 68
triggerall = P2bodydist y >=-65
TriggerAll =(enemynear(var(58)),StateNo != [120,159])
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
Trigger1 = var(56)=[5,6]

;ふっとばし
[State -1, ふっとばし]
type = ChangeState
value = 300
TriggerAll = var(59) >= 1
TriggerAll = Roundstate = 2
TriggerAll = stateType != A
TriggerAll = enemynear(var(58)),StateType != L
TriggerAll = enemynear(var(58)),MoveType != H
TriggerAll =!InGuardDist
TriggerAll = P2BodyDist X <= 60
triggerall = P2bodydist y >=-60
triggerall = enemynear(var(58)),vel x > 0
TriggerAll =(enemynear(var(58)),StateNo != [120,159])
triggerall = (ctrl || stateno=19 || stateno=21) || stateno=99 || stateno = 725|| stateno = 1710
Trigger1 = random<var(59)*100

[State -1, トラップキック]
type = ChangeState
value = 230
TriggerAll = var(59) >= 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(var(58)),statetype != A
triggerall = EnemyNear(var(58)),statetype != L
triggerall = P2bodydist X <= 50
triggerall = stateno=100 && projcontacttime(1010) = 1
trigger1 = var(56)=[15,17]

[State -3, LK]
type = ChangeState
value = 1000
triggerall = var(59) >= 1 && numenemy
triggerall = roundstate = 2 && statetype != A
triggerall = (p2dist X = [1,320]) && !inguarddist
triggerall = numhelper(1000) = 0
triggerall = EnemyNear(Var(51)),stateno != 5120 && EnemyNear(Var(51)),stateno != [120,159]
triggerall = ctrl || (stateno = [21,22]) || (stateno = [100,101]) || (movetype != H && stateno = [120,149])
triggerall = (random = [0,80]) || (p2bodydist X > 160 && random = [0,150])
trigger1 = EnemyNear(Var(51)),statetype = L && p2bodydist X >= 100
trigger2 = EnemyNear(Var(51)),statetype = A && EnemyNear(Var(51)),movetype = H
trigger2 = (EnemyNear(Var(51)),Vel X < 0 && EnemyNear(Var(51)),facing = -facing) || (EnemyNear(Var(51)),Vel X > 0 && EnemyNear(Var(51)),facing = facing)
trigger2 = p2bodydist X > 70

[State -3, Crouching Light Punch]
type = ChangeState
value = 250
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = stateno = 200 && movecontact
trigger1 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = ifelse(random<=300,300,320)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
triggerall = P2bodydist X <= 40
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = stateno = 300 && movecontact
trigger1 = random <=999
trigger2 = stateno = 320 && movecontact
trigger2 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 705
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
triggerall = P2bodydist X > 40
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = stateno = 300 && movecontact
trigger1 = random <=999
trigger2 = stateno = 320 && movecontact
trigger2 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 270
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 250
trigger1 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 270
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2bodydist X <= 40
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 270
trigger1 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 705
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2bodydist X > 40
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 270
trigger1 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 705
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 210 && AnimElem = 7
trigger1 = random <=999
trigger2 = MoveContact && StateNo = 220
trigger2 = random <=999
trigger3 = MoveContact && StateNo = 310 && AnimElem = 4
trigger3 = random <=999
trigger4 = MoveContact && ((StateNo = [601,602]) && AnimElemNo(0) <= 5)
trigger4 = random <=999
trigger5 = MoveContact && StateNo = 230
trigger5 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 1150
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype = A
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 210 && AnimElem = 7
trigger1 = random <=999


[State -3, Crouching Light Punch]
type = ChangeState
value = 710
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 705
trigger1 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = ifelse(random<=300,1250,1400)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = MoveContact && StateNo = 710
trigger1 = random <=999

[State -3, Crouching Light Punch]
type = ChangeState
value = 3600
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
Triggerall = P2StateType != L
triggerall = power >= 2000
Triggerall = !InGuardDist
Trigger1 = stateno = 1210 && Movehit
Trigger1 = Random <= 999
Trigger2 = stateno = 1260 && Movehit
Trigger2 = Random <= 999
Trigger3 = stateno = 1100 && Movehit
Trigger3 = Random <= 999
Trigger4 = stateno = 1150 && Movehit
Trigger4 = Random <= 999
Trigger5 = stateno = 1400 && Movehit
Trigger5 = Random <= 999

[State -3, Crouching Light Punch]
type = ChangeState
value = ifelse(power>=2000,6600,3000)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
Triggerall = P2StateType = A
triggerall = power >= 1000
Triggerall = !InGuardDist
Trigger1 = stateno = 1100 && Movehit
Trigger1 = Random <= 999
Trigger2 = stateno = 1150 && Movehit
Trigger2 = Random <= 999

[State -3, Crouching Light Punch]
type = ChangeState
value = 3000
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
Triggerall = P2StateType != L
triggerall = power >= 1000
Triggerall = !InGuardDist
Trigger1 = stateno = 1210 && Movehit
Trigger1 = Random <= 999
Trigger2 = stateno = 1260 && Movehit
Trigger2 = Random <= 999
Trigger3 = stateno = 1100 && Movehit && animelem = 6
Trigger3 = Random <= 999
Trigger4 = stateno = 1150 && Movehit && animelem = 6
Trigger4 = Random <= 999

[State -3, Crouching Light Punch]
type = ChangeState
value = 3500
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype = A
Triggerall = P2StateType != L
triggerall = power >= 2000
Triggerall = !InGuardDist
Trigger1 = stateno = 1300 && Movehit
Trigger1 = Random <= 999
Trigger2 = stateno = [500,530]
Trigger2 = Movehit && Random <= 999
Trigger3 = stateno = 610 && Movehit
Trigger3 = Random <= 999

[State -3, Crouching Light Punch]
type = ChangeState
value = 1500
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = Movecontact && StateNo = 1400
trigger1 = random <=999



[State -3, Crouching Light Punch]
type = ChangeState
value = 1300
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
Trigger1 = stateno = 1210 && Movehit
Trigger1 = Random <= 999
Trigger2 = stateno = 1260 && Movehit
Trigger2 = Random <= 999

[State -3, ]
type = ChangeState
value = 720
triggerall = var(59)
triggerall = RoundState = 2
triggerall = P2StateNo < 700
triggerall = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType = S
triggerall = random = [0,50]
triggerall = !inguarddist
trigger1 = random <= 999
trigger1 = P2BodyDist X = [-40,40]
trigger1 = (stateno != [1000,4999]) && ctrl

[State -3, ]
type = ChangeState
value = 730
triggerall = var(59)
triggerall = RoundState = 2
triggerall = P2StateNo != [700,999]
triggerall = P2StateNo != [5100,5119]
triggerall = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType = C
triggerall = random = [0,50]
triggerall = !inguarddist
trigger1 = random <= 999
trigger1 = P2BodyDist X = [-40,40]
trigger1 = (stateno != [1000,4999]) && ctrl

[State -1, AKE]
type = ChangeState
value = 720
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 100|| stateno = 725|| stateno = 1710
triggerall = P2bodydist X = [-10+floor(9*(EnemyNear(floor(fvar(37))),vel X)),30+floor(9*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2bodydist y = [-81-floor(9*(EnemyNear(floor(fvar(37))),vel Y)+(9*(9+1)/2)*fvar(30)),0-floor(9*(EnemyNear(floor(fvar(37))),vel Y)+(9*(9+1)/2)*fvar(30))]
triggerall = P2statetype != L
triggerall = P2movetype != H
triggerall = P2Statetype = A
Trigger1 = Random <= 999

[State -3, Throw]
type = ChangeState
value = 1700
triggerall = var(59)
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = p2statetype != L && p2statetype != A
triggerall = p2stateno != [305,307]
triggerall = !inguarddist
trigger1 = ctrl && (P2BodyDist X = [90,220])
trigger1 = random <= 999

[State -3, ]
type = ChangeState
value = 330
triggerall = var(59) && RoundState = 2
triggerall = StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(51)),StateType != L
triggerall = EnemyNear(var(51)),StateType = S
triggerall = EnemyNear(var(51)),StateNo != [35,49]
triggerall = EnemyNear(var(51)),StateNo != [100,105]
triggerall = EnemyNear(var(51)),StateNo != [16,25]
triggerall = (p2Bodydist X = [60,80])
triggerall = random <= 400
trigger1 = EnemyNear(var(51)),MoveType != H
trigger1 = EnemyNear(var(51)),MoveType != A
trigger1 = EnemyNear(var(51)),ctrl = 0

trigger2 = TeamMode = simul
trigger2 = (NumEnemy >= 2 && var(37) = 1) || NumEnemy = 1
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(51)),MoveType = H
trigger2 = p2bodydist Y >= -50
trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = (EnemyNear(var(51)),Facing = 1 && Facing = 1) || (EnemyNear(var(51)),Facing = -1 && Facing = -1)
trigger3 = EnemyNear(var(51)),MoveType = A
trigger3 = p2bodydist Y >= -50

[State -3, Crouching Light Punch]
type = ChangeState
value = ifelse(random<=300,1400,1250)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = P2statetype != A
Triggerall = P2StateType != L
Triggerall = !InGuardDist
trigger1 = Moveguarded && StateNo = 330
trigger1 = random <=999

[State -3, 仰け反り時間確認ヘルパー]
type=helper
trigger1=!IsHelper
trigger1=!NumHelper(10001)
trigger1=roundstate=2
trigger1=alive
helpertype=normal
name="NOKEZORI"
stateno=10001
ID=10001
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

;念のため↓も付けておく
[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(10001)
trigger1= stateno!=10001
value=10001

[State -3, Right]
Type = Helper
Trigger1 = !NumHelper(21000+id) && !IsHelper && RoundState < 3 && alive
HelperType = Normal
Name = "Right"
PosType = left
StateNo = 21000
ID = 21000+id
PauseMoveTime = 0
facing = -1
pos=160,9999
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0
IgnoreHitPause = 1
KeyCtrl = 0
Ownpal = 0

[State -3, Left]
Type = Helper
Trigger1 = !NumHelper(21005+id) && !IsHelper && RoundState < 3 && alive
HelperType = Normal
Name = "Left"
PosType = left
StateNo = 21000
ID = 21005+id
PauseMoveTime = 0
pos=160,9999
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0
IgnoreHitPause = 1
KeyCtrl = 0
Ownpal = 0

[State -3]
type=changestate
trigger1= ishelper
trigger1= (ishelper(21000+root,id)||ishelper(21005+root,id)) && stateno !=21000
value=21000



;==============================================================================
; 変数管理
;==============================================================================
;v56 VarRandom (0-19)
;v57 Facing
;v58 Tag
;v59 AI

;fv37 Coefficient of Friction
;fv38 Tag mode
;fv39 Combo
;==============================================================================
[State -1, AI]
Type = VarSet
TriggerAll = Var(59) >= 1	;AIがセットされた状態
Trigger1 = RoundState = 4	;ラウンド終了後
Trigger2 = Win = 1			;勝ったとき
Trigger3 = Lose = 1			;負けたとき
Trigger4 = DrawGame = 1		;引き分けたとき
V = 59
Value = -Var(59)

[State -1, AI]
Type = VarSet
TriggerAll = Var(59) <= -1	;AIを停止させた状態
Trigger1 = RoundState = 2	;ラウンド開始
V = 59
Value = -Var(59)

[State -1, タッグ用生死判別]
Type = VarSet
triggerall = var(59)>0
triggerall = RoundState = 2
trigger1 = NumEnemy = 1
trigger2 = NumEnemy = 2
trigger2 = EnemyNear(0),life > 0
var(58) = 0
IgnoreHitPause = 1

[State -1, タッグ用生死判別]
Type = VarSet
triggerall = var(59)>0
triggerall = RoundState = 2
trigger1 = NumEnemy = 2
trigger1 = EnemyNear(0),life <= 0
var(58) = 1
IgnoreHitPause = 1
;------------------------------------------------------------------------------
;摩擦計算関係
[State -2, Facing]
type = VarSet
trigger1 = 1
var(57) = -(Facing)*(EnemyNear(var(58)),Facing)
ignorehitpause = 1

[State -1, 相手摩擦係数]
Type = VarSet
Trigger1 = 1
fvar(37) = IfElse(enemynear(var(58)),StateType=C,(EnemyNear(var(58)),Const(movement.crouch.friction)),(EnemyNear(var(58)),Const(movement.stand.friction)))
IgnoreHitPause = 1
;------------------------------------------------------------------------------
;コンボ関係
[State -1, 変数リセット]
Type = VarSet
triggerall = var(59) >= 1
trigger1 = RoundState = 4
trigger2 = stateno = 5120 || movetype = H
trigger3 = EnemyNear,StateNo = [5070,5120]
trigger4 = fvar(39) = 2
trigger4 = EnemyNear(var(58)),GetHitVar(HitShakeTime) + EnemyNear(var(58)),GetHitVar(HitTime) <= 0
trigger5 = stateno = 200 || stateno = 215 || stateno = 210 || stateno = 230|| stateno = 205|| stateno = 235 || stateno = 240|| stateno = 245
trigger6 = fvar(39) = 3
trigger6 = stateno = 1000 || stateno = 1010 || stateno = 1081 || stateno = 1082
fvar(39) = 0
IgnoreHitPause = 1

[State -1];J攻撃hit
Type = VarSet
triggerall = var(59) >= 1
trigger1 = stateno = 310 && movehit
trigger2 = stateno = 310 && movecontact
trigger3 = stateno = 215 && movecontact
fvar(39) = 1
IgnoreHitPause = 1

[State -1];ベノム
Type = VarSet
triggerall = var(59) >= 1
triggerall = stateno!=1000
trigger1 = projhittime(1000) = 1
trigger2 = projhittime(1010) = 1
fvar(39) = 2
IgnoreHitPause = 1

[State -1];トルネード
Type = VarSet
triggerall = var(59) >= 1
trigger1 = stateno = 1025 && movehit
trigger2 = stateno = 310 && movehit
fvar(39) = 3
IgnoreHitPause = 1
;------------------------------------------------------------------------------
;VarRandom
[State -1,VarRandom]
Type = VarRandom
TriggerAll = Var(59) >= 1
Trigger1 = Time = 1
Trigger2 = Time%60 = 1
Trigger2 = MoveType != I
Trigger3 = Time%1 = 0
Trigger3 = MoveType = I
V = 56
Range = 0,19
IgnoreHitPause = 1
;---------------------------------------------------
