;===========================================================================================================================
;Igniz Eagrose Version, original char by Gonzo-, re-written by Eagrose
;CNS file part: Hyper Moves
;===========================================================================================================================
;-------------------------------------------------------------------------------
; HYPER MOVE: CHAOS TIDE (DM)
[Statedef 1070]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 1070
sprpriority = 2

[state 1070, PowerAdd]; ---- SuperCancel poweradd
type = PowerAdd
trigger1 = prevstateno = [1000,1062]
value = -1000
persistent = 0
ignorehitpause = 1

[state 1070, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel Helper"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 1070, PalFX]; ---- SuperCancel PalFX
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

;[State 1070, HitBy]; ---- CHAOS TIDE proj invincible start
;type = HitBy
;trigger1 = AnimElem = 1, >= 0
;trigger1 = AnimElem = 17, < 0
;value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
;ignorehitpause = 1
;supermovetime = 99999
;pausemovetime = 99999

[State 1070, NotHitBy]; ---- CHAOS TIDE completely invincible when launched
type = NotHitBy
trigger1 = AnimElem = 17, >= 0
trigger1 = AnimElem = 17, < 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1070, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = time = 0
value = S0,37
channel = ifelse(IsHelper(97864),20,0)

[State 1070, PlaySnd]; ---- powerup sound
type = PlaySnd
trigger1 = time = 0
value = S0,36

[State 1070, PlaySnd]; ---- launch sound
type = PlaySnd
trigger1 = animelem = 17
value = S0,27

[State 1070, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 1070, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

[State 1070, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
;sound =
;pos =
movetime = 30
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -1000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

;---------------------- old kof2001 DM spark
;[State 1070, 4]
;type = Explod
;trigger1 = time = 0
;anim = 512
;postype = p1
;pos = 0,0
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 10,-110
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 1070, PlaySnd]; ---- XI_supermove_sound1
type = PlaySnd
trigger1 = time = 0
value = S0,65

[State 1070, PlaySnd]; ---- XI_supermove_sound2
type = PlaySnd
trigger1 = time = 18
value = S0,66

[State 1070, Explod]; ---- XI_supermove_lv1
type = Explod
trigger1 = time = 0
anim = 12010
sprpriority = -1
postype = p1
pos = 10,-110
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1070, Explod]; ---- XI_supermove_lv1_foreground
type = Explod
trigger1 = Time = 10
anim = 12011
sprpriority = 3
postype = p1
pos = 10,-110
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1070, Helper]; ---- CHAOS TIDE proj Helper
type = Helper
trigger1 = Animelem = 17
ID = 1070
name = "CHAOS TIDE proj"
postype = p1
pos = -3,0
sprpriority = 4
stateno = 1071
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 1070, EnvShake]
type = EnvShake
trigger1 = AnimElem = 17
time = 20
freq = 120
ampl = 6
phase = 120
;ignorehitpause =
;persistent =

[State 1070, ReversalDef]; ---- igniz is protected from any projectiles by the Light power
type = NULL;ReversalDef
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 16, < 2
reversal.attr = SCA   ; <---- DO NOT change this !!
priority = 99999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = P  ; <---- only projectiles, DO NOT change this !!
numhits = 0
sparkno = -1
;hitsound =
;p1stateno =
;p2stateno =
guard.dist = 0
ignorehitpause = 1
;persistent =

[State 1070, VarSet]; ---- var(1) palfx changing
type = VarSet
trigger1 = 1
var(1) = 0
persistent = 0

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
var(1) = 8

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 16, >= 2
trigger1 = AnimElem = 31, < 0
var(1) = -2

[State 1070, PalFX]; ---- palfx changing
type = PalFX
triggerall = var(1) > 0
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 31, < 0
time = 1
;add = floor(var(1)/3),floor(var(1)/3),var(1)
add = ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,var(1),floor(var(1)/3*2))
mul = 256,256,256
;sinadd = 0,0,0,10
ignorehitpause = 1
;persistent =

[State 1070, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; CHAOS TIDE proj Helper -------------------------------------------------------
[Statedef 1071]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = ifelse(root,fvar(4)=0,1071,1075)
sprpriority = 4

[State 1071, SprPriority]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause =  1

[State 1071, HitOverRide]; ---- debug
type = HitOverRide
trigger1 = 1
slot = 1
attr = SCA, AA,AT,AP
stateno = 2705
ignorehitpause = 1

[State 1071, AssertSpecial]; ---- noshadow
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1071, BindToParent]
type = BindToParent
triggerall = parent,movetype != H
trigger1 = parent,stateno = 1070
pos = -3,0

[State 1071, VarSet]; ---- var(11) set spark pos Y
type = VarSet
trigger1 = 1
var(11) = 0
persistent = 0

[State 1071, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 1071, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 1071, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = 1
var(12) = 0
persistent = 0

[State 1071, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = var(12) != floor(p2dist X)
var(12) = floor(p2dist X)

[State 1071, Projectile]; ---- projectile nullifier to SP
type = Projectile
projID = 10711
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 5, <= 0
attr = S, SP
hitflag = P
guardflag = N
projremove = 0
Projremovetime = 2
projhits = 1
projremanim = -1
projhitanim = -1
projpriority = 99999 ;max priority
projanim = 2230
offset = 0,0 ;35,-105
velocity = 0,0

[State 1071, ReversalDef]; ---- consume NP,SP hitdef helpers
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NP,SP
priority = 99999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HLMAFDP
numhits = 0
sparkno = -1
;hitsound =
;p1stateno =
p2stateno = 1026
guard.dist = 0
ignorehitpause = 1
;persistent =

;-------------------------------------- CHAOS TIDE 4HITS PROJ

[State 1071, Projectile]; ---- 1st HIT
type = Projectile
trigger1 = AnimElem = 2
ProjID = ifelse(parent,IsHelper(97864),10714,10710)
projanim = 1073   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 30    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 7    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 4
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(80*root,fvar(3)),floor(8*root,fvar(3))
pausetime = 0,10
;guard.pause ,0
sparkno = 3
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 15    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 18    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = .4    ;y acceleration
ground.velocity = -4,-5
guard.velocity = -6    ;Defaults to x_velocity of ground.velocity
air.velocity = -4,-4    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 4
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 0
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 20
palfx.add = 0,0,ifelse(root,fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(root,fvar(4)=0,100,200),5
envshake.time = 15
envshake.freq = 120
envshake.ampl = 6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent =


[State 1071, Projectile]; ---- 2nd HIT
type = Projectile
trigger1 = AnimElem = 3
ProjID = ifelse(parent,IsHelper(97864),10715,10711)
projanim = 1073   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 30    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 7    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 4
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(80*root,fvar(3)),floor(8*root,fvar(3))
pausetime = 0,10
;guard.pause ,0
sparkno = 3
guard.sparkno = 40
sparkxy = var(12)-5,-45 + var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 15    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 18    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = .4    ;y acceleration
ground.velocity = -4,-5
guard.velocity = -6    ;Defaults to x_velocity of ground.velocity
air.velocity = -4,-4    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 4
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 0
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 20
palfx.add = 0,0,ifelse(root,fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(root,fvar(4)=0,100,200),5
envshake.time = 15
envshake.freq = 120
envshake.ampl = 6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent =


[State 1071, Projectile]; ---- 3rd HIT
type = Projectile
trigger1 = AnimElem = 4
ProjID = ifelse(parent,IsHelper(97864),10716,10712)
projanim = 1074   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 30    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 7    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 4
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(80*root,fvar(3)),floor(8*root,fvar(3))
pausetime = 0,10
;guard.pause ,0
sparkno = 3
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 15    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 18    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = .4    ;y acceleration
ground.velocity = -4,-5
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -4,-4    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 2
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 20
palfx.add = 0,0,ifelse(root,fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(root,fvar(4)=0,100,200),5
envshake.time = 15
envshake.freq = 120
envshake.ampl = 6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent =


[State 1071, Projectile]; ---- 4th HIT
type = Projectile
trigger1 = AnimElem = 4
ProjID = ifelse(parent,IsHelper(97864),10717,10713)
projanim = 1074   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 30    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 7    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 4
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(80*root,fvar(3)),floor(8*root,fvar(3))
pausetime = 0,10
;guard.pause ,0
sparkno = 3
guard.sparkno = 40
sparkxy = var(12)+5,-65 + var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 15    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 18    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = .4    ;y acceleration
ground.velocity = -4,-5
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -4,-4    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 2
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 20
palfx.add = 0,0,ifelse(root,fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(root,fvar(4)=0,100,200),5
envshake.time = 15
envshake.freq = 120
envshake.ampl = 6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent =
;-------------------------------------- CHAOS TIDE 4HITS PROJ end

[State 1071, EnvColor]
type = EnvColor
triggerall = !parent,IsHelper
trigger1 = root,ProjHit10710 = 1, <=1
trigger2 = root,ProjHit10711 = 1, <=1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1071, EnvColor2]
type = EnvColor
triggerall = !parent,IsHelper
trigger1 = root,ProjHit10712 = 1, <=1
trigger2 = root,ProjHit10713 = 1, <=1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1071, EnvColor]; ---- shadow clone igniz's chaos tide
type = EnvColor
triggerall = parent,IsHelper(97864)
trigger1 = root,ProjHit10714 = 1, <=1
trigger2 = root,ProjHit10715 = 1, <=1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1071, EnvColor2]; ---- shadow clone igniz's chaos tide
type = EnvColor
triggerall = parent,IsHelper(97864)
trigger1 = root,ProjHit10716 = 1, <=1
trigger2 = root,ProjHit10717 = 1, <=1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1071, VarSet]; ---- var(13) CHAOS TIDE slowdown effect dudge
type = VarSet
trigger1 = 1
var(13) = 0
persistent = 0

[State 1071, VarSet]
type = VarSet
triggerall = !parent,IsHelper(97864)
trigger1 = root,ProjHit10710 = 1, <=30
trigger2 = root,ProjHit10711 = 1, <=30
trigger3 = root,ProjHit10712 = 1, <=30
trigger4 = root,ProjHit10713 = 1, <=30
var(13) = 1
ignorehitpause = 1
persistent = 0

[State 1071, VarSet]; ---- shadow clone igniz's chaos tide
type = VarSet
triggerall = parent,IsHelper(97864)
trigger1 = root,ProjHit10714 = 1, <=30
trigger2 = root,ProjHit10715 = 1, <=30
trigger3 = root,ProjHit10716 = 1, <=30
trigger4 = root,ProjHit10717 = 1, <=30
var(13) = 1
ignorehitpause = 1
persistent = 0

[State 1071, Pause]; ---- CHAOS TIDE delay effect
type = Pause
triggerall = p2life != 0
trigger1 = var(13) = 1
trigger1 = (GameTime%2) =1
time = 1
movetime = 0

[State 1071, VarSet]; ---- helper,var(1) Trans changing
type = VarSet
trigger1 = 1
var(1) = 256
persistent = 0

[State 1071, VarAdd]; ---- helper,var(1) Trans changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 9, >= 0
var(1) = -13

[State 1071, VarSet]; ---- helper,var(1) Trans changing
type = VarSet
triggerall = var(1) <= 0
trigger1 = AnimElem = 9, >= 0
var(1) = 0

[State 1071, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = var(1),256
ignorehitpause =  1
;persistent =

[State 1071, DestroySelf]
type = DestroySelf
trigger1 = animTime = 0

;-------------------------------------------------------------------------------
; HYPER MOVE: EIDEANN BLADE (DM)
[Statedef 1080]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 1080
sprpriority = 2

[State 1080, HitBy]; ---- EIDEANN BLADE invincible start, unused
type = NULL;HitBy
trigger1 = AnimElem = 1, >= 0
;trigger1 = AnimElem = 17, < 0
trigger1 = AnimElem = 21, < 0
value = SCA,NT,ST,HT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1080, notHitBy]; ---- EIDEANN BLADE conpletely invincible
type = NotHitBy
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 26, < 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 1080, PowerAdd]; ---- SuperCancel poweradd
type = PowerAdd
trigger1 = prevstateno = [1000,1062]
value = -1000
ignorehitpause = 1
persistent = 0

[State 1080, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 1080, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 1080, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = animelem = 1
value = S0,40
channel = ifelse(IsHelper(97864),20,0)

[State 1080, PlaySnd]; ---- launch sound
type = PlaySnd
trigger1 = animelem = 20
value = S0,41

[State 1080, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 1080, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

[State 1080, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
;sound =
;pos =
movetime = 30
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -1000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

;---------------------- old kof2001 DM spark
;[State 240, 4]
;type = Explod
;trigger1 = time = 0
;anim = 512
;postype = p1
;pos = 5,-110
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 5,-110
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 1080, PlaySnd]; ---- XI_supermove_sound1
type = PlaySnd
trigger1 = time = 0
value = S0,65

[State 1080, PlaySnd]; ---- XI_supermove_sound2
type = PlaySnd
trigger1 = time = 18
value = S0,66

[State 1080, Explod]; ---- XI_supermove_lv1
type = Explod
trigger1 = time = 0
anim = 12010
sprpriority = -1
postype = p1
pos = -5,-140
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1080, Explod]; ---- XI_supermove_lv1_foreground
type = Explod
trigger1 = Time = 10
anim = 12011
sprpriority = 3
postype = p1
pos = -5,-140
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1080, Helper]; ---- EIDEANN BLADE proj helper
type = Helper
trigger1 = Animelem = 21
ID = ifelse(IsHelper(97864),91081,1081)
name = "EIDEANN BLADE proj"
postype = p1
pos = 15,0
sprpriority = 4
stateno = 1081
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 1080, EnvShake]
type = EnvShake
trigger1 = AnimElem = 21
time = 20
ampl = 6
freq = 120
phase = 120
ignorehitpause = 1

[State 1070, VarSet]; ---- var(1) palfx changing
type = VarSet
trigger1 = 1
var(1) = 0
persistent = 0

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
trigger1 = AnimElem = 9, >= 0
trigger1 = AnimElem = 12, < 0
var(1) = 11

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 21, >= 1
trigger1 = AnimElem = 32, < 0
var(1) = -1

[State 1070, PalFX]; ---- palfx changing
type = PalFX
triggerall = var(1) > 0
trigger1 = AnimElem = 9, >= 0
trigger1 = AnimElem = 32, < 0
time = 1
;add = floor(var(1)/3),floor(var(1)/3),var(1)
;add = floor(var(1)/3*2),floor(var(1)/3*2),floor(var(1)/3*2)
add = ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,var(1),floor(var(1)/3*2))
mul = 256,256,256
;sinadd = 0,0,0,10
ignorehitpause = 1
;persistent =

[State 1080, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; EIDEANN BLADE proj helper ----------------------------------------------------
[Statedef 1081]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2231 ;2035
sprpriority = 4
juggle = 0

[State 1081, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 1081, Explod]; ---- EIDEANN BLADE proj anim
type = Explod
trigger1 = 1
anim = ifelse(root,fvar(4)=0,1081,1084)
ID = 1081
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 1081, PlaySnd]; ---- sound
type = PlaySnd
trigger1 = animelem = 1
value = S0,42
volume = ifelse(FrontEdgeBodyDist < -60,100,255)

[State 1081, Helper]; ---- EIDEANN BLADE proj helper recreate (recursion)
type = Helper
trigger1 = time = 8
ID = ifelse(IsHelper(91081),91081,1081)
name = "EIDEANN BLADE proj helper"
postype = p1
pos = 45,0
sprpriority = 4
stateno = 1081
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 1081, Explod]; ---- movehit spark
type = Explod
triggerall = movehit
triggerall = p2movetype = H
trigger1 = AnimElem = 2,= 1
anim = F3
postype = p2
pos = -10,-68
sprpriority = 5
ignorehitpause = 1

[State 1081, VarSet]; ---- var(11) set spark pos Y
type = VarSet
trigger1 = 1
var(11) = 0
persistent = 0

[State 1081, VarSet]; ---- var(11) set spark pos Y
type = varset
trigger1 = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 1081, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 1081, Projectile]; ---- Projectile nullifier to SP
type = Projectile
projID = 2231
trigger1 = time >= 5
trigger1 = 1
hitflag = P
guardflag =
attr = S, SP
projremove = 0
Projremovetime = 2
projhits = 1
projremanim = -1
projhitanim = -1
projpriority = 99999
projanim = 2231
offset = 0,0 ;35,-105
velocity = 0,0

;---------------------------------------
[State 1081, ReversalDef]; ---- consume NP,SP hitdef helpers
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NP,SP
priority = 99999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HLMAFDP
numhits = 0
sparkno = -1
;hitsound =
;p1stateno =
p2stateno = 1026
guard.dist = 0
ignorehitpause = 1
;persistent =
;---------------------------------------

[State 1081, Projectile]
type = Projectile
trigger1 = 1
ProjID = ifelse(IsHelper(91081),91081,1081)
projanim = 1083   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
projremanim = -1   ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 1    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 12    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 2147483648    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 240    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 240
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = DiagUp    ;light,medium,hard,back,up,diagup
air.animtype = DiagUp    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(70*root,fvar(3)),floor(7*root,fvar(3))
pausetime = 0,7
;guard.pause ,0
sparkno = 3
guard.sparkno = 40
sparkxy = -10, -76 + var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 12    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 15    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 15    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = .4    ;y acceleration
ground.velocity = -3.5,-9.5
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -3.5,-8.5    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 4
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 18
palfx.add = 0,0,ifelse(root,fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(root,fvar(4)=0,100,200),5
envshake.time = 18
envshake.freq = 120
envshake.ampl = 6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
persistent = 0

[State 1081, DestroySelf]
type = DestroySelf
trigger1 = time = 10
trigger2 = FrontEdgeBodyDist < -240


; Unused old code (helper summon) ----------------------------------------------
;[Statedef 1089]
;type    = S
;physics = S
;moveytpe = A
;anim = 2028
;velset = 0,0
;ctrl = 0

;[State 1089, Helper]
;type = Helper
;triggerall = numhelper(1090) = 0
;trigger1 = animelem = 9
;ID = 1090
;name = "basara"
;sprpriority = 5
;pos = -30,-20
;postype = back
;stateno = 1090
;helpertype = normal
;keyctrl = 0
;persistent = 0
;ignorehitpause = 1
;ownpal = 1

;[State 1089, PlaySnd]
;type = PlaySnd
;trigger1 = Time = 0
;value = S0,56

;[State 1089, ChangeState]
;type = ChangeState
;trigger1 = animTime = 0
;value = 0
;ctrl = 1

; Unused old code --------------------------------------------------------------
;[Statedef 1090]
;type    = A
;physics = N
;movetype = A
;poweradd = 0
;ctrl = 0
;velset = 12,-3
;anim = 1092
;sprpriority = 4

;[State -3, 5]
;type = PlaySnd
;trigger1 = Time = 0
;value = S0,50

;[State 106, 1]
;type = VelAdd
;trigger1 = Time > 0
;y = .3

;[State 170, 1]
;type = HitBy
;trigger1 = 1
;value = SCA, AA, AP
;ignorehitpause = 1

;[State 170, 1]
;type = null;NotHitBy
;trigger1 = time = 0
;value = SCA, AT
;time = 1000
;ignorehitpause = 1

;[State 106, 1]
;type = hitoverride
;trigger1 = 1
;time = 2
;attr = SCA,AA,AP
;stateno = 1099
;ignorehitpause = 1

;[State 191, 1]
;type = varrandom
;trigger1 = time = 0
;v = 5
;range = 1,2

;[State 800, 1]
;type = HitDef
;Trigger1 = 1
;trigger1 = var(5) = 1
;pausetime = 0,0
;attr = A, SA
;hitflag = MA
;guardflag = MA
;priority = 4, Miss
;sparkno = -1
;sprpriority = 4
;p2facing = 1
;p1stateno = 1092
;p2stateno = 1094
;fall = 1
;fall.recover = 0
;guardsound = S0,10

;[State 800, 1]
;type = HitDef
;Trigger1 = 1
;trigger1 = var(5) = 2
;pausetime = 0,0
;attr = A, SA
;hitflag = MA
;guardflag = MA
;priority = 1, Miss
;sparkno = -1
;sprpriority = 4
;p2facing = 1
;p1stateno = 2020
;p2stateno = 2023
;fall = 1
;fall.recover = 0
;guardsound = S0,10

;[State 821, 4]
;type = changestate
;trigger1 = moveguarded = 1
;value = 1098

;[State 821, 4]
;type = changestate
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
;value = 1091

; Unused old code --------------------------------------------------------------
;[Statedef 1091]
;type    = S
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 1091
;sprpriority = 4

;[State 821, 4]
;type = playsnd
;trigger1 = time = 0
;trigger1 = var(11) = 1
;value = S0,52

;[State -3, 5]
;type = PlaySnd
;trigger1 = Time = 0
;value = S0,16

;[State 106, 1]
;type = posset
;trigger1 = Time = 0
;y = 0

;[State 821, 4]
;type = varset
;trigger1 = time = 20
;var(11) = 0

;[State 821, 4]
;type = changestate
;trigger1 = time = 20
;value = 1093

; Unused old code --------------------------------------------------------------
;[Statedef 1092]
;type    = S
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 1093
;sprpriority = 4

;[State 106, 1]
;type = posset
;trigger1 = Time = 0
;y = 0

;[State 821, 4]
;type = targetbind
;trigger1 = time = 0
;postype = p1
;pos = 36,0

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 59,= 1
;anim = 511
;postype = p1
;pos = 40,-110
;sprpriority = 4

;[State 821, 4]
;type = targetstate
;trigger1 = AnimElem = 52,= 1
;value = 1097

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 52
;value = S0,51

;[State 821, 4]
;type = targetstate
;trigger1 = AnimElem = 59,= 1
;value = 1095

;[state 821, 4]
;type = targetbind
;trigger1 = AnimElem = 59,= 2
;postype = p1
;pos = 40,-120

;[State 821, 4]
;type = targetstate
;trigger1 = AnimElem = 63,= 1
;value = 1096

;[State 821, 4]
;type = targetbind
;trigger1 = AnimElem = 63,= 2
;postype = p1
;pos = 35,-50
;time = 1

;[State 821, 4]
;type = envcolor
;trigger1 = AnimElem = 63
;value = 255,0,0
;time = 2
;under = -1

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 4
;trigger2 = AnimElem = 8
;trigger3 = AnimElem = 13
;trigger4 = AnimElem = 18
;trigger5 = AnimElem = 24
;trigger6 = AnimElem = 28
;trigger7 = AnimElem = 30
;trigger8 = AnimElem = 34
;trigger9 = AnimElem = 44
;trigger10 = AnimElem = 48
;trigger11 = AnimElem = 51
;anim = 510
;postype = p1
;pos = 40,-60
;random = 10,30
;sprpriority = 7

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 4
;trigger2 = AnimElem = 8
;trigger3 = AnimElem = 13
;trigger4 = AnimElem = 18
;trigger5 = AnimElem = 24
;trigger6 = AnimElem = 28
;trigger7 = AnimElem = 30
;trigger8 = AnimElem = 34
;trigger9 = AnimElem = 44
;trigger10 = AnimElem = 43
;trigger11 = AnimElem = 51
;anim = 509
;postype = p1
;pos = 40,-60
;random = 10,30
;sprpriority = 7

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 4
;trigger2 = AnimElem = 44
;trigger3 = AnimElem = 30
;anim = 2019
;postype = p1
;pos = 40,0
;random = 10,30
;sprpriority = 7

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 28
;trigger2 = AnimElem = 13
;anim = 2020
;postype = p1
;pos = 40,0
;random = 10,30
;sprpriority = 7

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 34
;anim = 2021
;postype = p1
;pos = 40,0
;random = 10,30
;sprpriority = 7

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 4
;trigger2 = AnimElem = 8
;trigger3 = AnimElem = 13
;trigger4 = AnimElem = 18
;trigger5 = AnimElem = 24
;trigger6 = AnimElem = 28
;trigger7 = AnimElem = 30
;trigger8 = AnimElem = 34
;trigger9 = AnimElem = 44
;trigger10 = AnimElem = 43
;trigger11 = AnimElem = 51
;value = S0,55

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 10
;trigger2 = AnimElem = 48
;value = S0,9

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 10
;trigger2 = AnimElem = 48
;anim = 503
;postype = p1
;pos = 40,-5
;sprpriority = 7

;[State 821, 4]
;type = hitadd
;trigger1 = AnimElem = 4
;trigger2 = AnimElem = 8
;trigger3 = AnimElem = 13
;trigger4 = AnimElem = 18
;trigger5 = AnimElem = 24
;trigger6 = AnimElem = 28
;trigger7 = AnimElem = 30
;trigger8 = AnimElem = 34
;trigger9 = AnimElem = 44
;trigger10 = AnimElem = 48
;trigger11 = AnimElem = 51
;trigger12 = AnimElem = 10
;trigger13 = AnimElem = 48
;trigger14 = AnimElem = 63
;value = 1

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 63
;value = S0,14

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 59
;value = S0,12

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 63
;anim = 510
;postype = p2
;pos = 40,-100
;sprpriority = 7

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 63
;anim = 509
;postype = p1
;pos = 40,-100
;sprpriority = 7

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 63
;anim = 1094
;postype = p1
;pos = 0,-10
;sprpriority = 7
;ignorehitpause = 1

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 72
;value = S0,53

;[State 821, 4]
;type = changestate
;trigger1 = animtime = 0
;value = 1093

; Unused old code --------------------------------------------------------------
;[Statedef 1093]
;type    = S
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 1096
;sprpriority = 4

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 1
;value = S0,15

;[State 106, 1]
;type = velset
;trigger1 = Time >= 0
;y = -10
;x = -10

;[State 821, 4]
;type = destroyself
;trigger1 = time = 30

; Unused old code --------------------------------------------------------------
;[Statedef 1094]
;type    = S
;physics = N
;movetype = H
;poweradd = 0
;ctrl = 0
;velset = 0,0
;sprpriority = 3

;[State 9000, 1]
;type = ScreenBound
;trigger1 = 1
;movecamera = 1,0

;[State 821, 4]
;type = changeanim2
;trigger1 = time = 0
;value = 1097

; Unused old code --------------------------------------------------------------
;[Statedef 1095]
;type    = S
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0
;sprpriority = 3
;movetype = H

;[State 9000, 1]
;type = ScreenBound
;trigger1 = 1
;movecamera = 1,0

;[State 821, 4]
;type = changeanim2
;trigger1 = time = 0
;value = 1098

; Unused old code --------------------------------------------------------------
;[Statedef 1096]
;type    = A
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0;-1,-15
;sprpriority = 3
;movetype = H

;[State 9000, 1]
;type = ScreenBound
;trigger1 = 1
;movecamera = 1,0

;[State 821, 4]
;type = lifeadd
;trigger1 = time = 0
;value = -170

;[State 821, 4]
;type = changeanim2
;trigger1 = time = 0
;value = 1099

;[State 106, 1]
;type = Velset
;trigger1 = Time = 1;[1,20]
;x = -1
;y = -8

;[State 106, 1]
;type = VelAdd
;trigger1 = Time > 1
;y = .4

;[State 821, 4]
;type = selfstate
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
;value = 5100

; Unused old code --------------------------------------------------------------
;[Statedef 1097]
;type    = A
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0
;sprpriority = 3
;movetype = H

;[State 9000, 1]
;type = ScreenBound
;trigger1 = 1
;movecamera = 1,0

;[State 821, 4]
;type = changeanim2
;trigger1 = time = 0
;value = 1100

; Unused old code --------------------------------------------------------------
;[Statedef 1098]
;type    = A
;physics = N
;poweradd = 0
;ctrl = 0
;velset = -3,-8
;sprpriority = 4
;anim = 1090

;[State 106, 1]
;type = VelAdd
;trigger1 = Time > 1
;y = .4

;[State 821, 4]
;type = changestate
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
;value = 1091

;[Statedef 1099];
;type    = A
;physics = N
;movetype = H
;poweradd = 0
;ctrl = 0
;velset = -3,-8
;sprpriority = 4
;anim = 1090

;[State 106, 1]
;type = varset
;trigger1 = Time = 0
;var(11) = 1
;
;[State 106, 1]
;type = VelAdd
;trigger1 = Time > 1
;y = .4

;[State 821, 4]
;type = changestate
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
;value = 1091

;-------------------------------------------------------------------------------
; HYPER MOVE: Brutal GOD PROJECT (SDM)
[Statedef 2000]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2000
sprpriority = 2

[State 2001, notHitBy]; ---- Brutal GOD PROJECT invincible
type = notHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2000, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2000, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = 1070 || prevstateno = 1080
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2000, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 2000,AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,28]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

;[State 2000, 4]
;type = varset
;trigger1 = time = 0  ;plan for : if reversaldef hits then god_hitdef_helper is unnecessary debug
;var(50) = 0

[state 2000, PowerAdd]; ----Dreamcancel poweradd
type = PowerAdd
trigger1 = prevstateno = 1070 || prevstateno = 1080
value = -1000
ignorehitpause = 1
persistent = 0

[State 2000, Helper]; ---- DreamCancel Helper
type = Helper
trigger1 = prevstateno = 1070
trigger2 = prevstateno = 1080
helpertype = normal ;player
name = "DreamCancel"
ID = 10000
stateno = 10000
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[state 2000, PowerAdd]; ---- SuperCancel poweradd
type = PowerAdd
trigger1 = prevstateno = [1000,1062]
value = -1000
ignorehitpause = 1
persistent = 0

[State 2000, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 2000, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
;sound =
;pos =
movetime = 28
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -2000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

[State 2000, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,44
channel = ifelse(IsHelper(97864),20,0)

;---------------------- old kof2001 DM spark
;[State 240, 4]
;type = Explod
;trigger1 = time = 0
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 2000, PlaySnd]; ---- XI_supermove_sound1
type = PlaySnd
trigger1 = time = 0
value = S0,67

[State 2000, PlaySnd]; ---- XI_supermove_sound2
type = PlaySnd
trigger1 = time = 17
value = S0,68

[State 2000, Explod]; ---- XI_supermove_lv2
type = Explod
trigger1 = time = 0
anim = 12020
sprpriority = -1
postype = p1
pos = -22,-75
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 2000, Explod]; ---- XI_supermove_lv2_foreground
type = Explod
trigger1 = Time = 10
anim = 12021
sprpriority = 3
postype = p1
pos = -22,-75
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 2000, BGPalFX]
type = BGPalFX
trigger1 = Time >= 27
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2001

; Brutal GOD PROJECT dash attack attempt ---------------------------------------
[Statedef 2001]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 8,0
anim = 2001
sprpriority = 2
juggle = 0

;[State 2001, ReversalDef]; ---- Brutal GOD PROJECT unstoppedable by any hitdef attacks (but not projectiles)
;type = ReversalDef
;trigger1 = 1
;reversal.attr = SCA,NA,SA
;sparkno = -1
;p2stateno = 1026
;pausetime = 0,2
;ignorehitpause = 1
;supermovetime = 99999
;pausemovetime = 99999

[State 2001, HitBy]; ---- Brutal GOD PROJECT invincible
type = null;HitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,ST,HT,NP,SP,HP,AP
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2001, Afterimage]
type = Afterimage
;TRIGGERALL = palno != 12
triggerall = !IsHelper
triggerall = roundstate != 0
trigger1 = 1
time = 6
length = 4
palbright = 0,0,30
palcontrast = 125,125,125
paladd = 0,0,15
palmul = .60,.60,.70
timegap = 1
framegap = 1
trans = add
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 2001, AfterImageTime]
type = AfterImageTime
triggerall = (palno = [1,11]) && !((palno=[7,11]) && var(58)=1 && floor(var(42)/10)%10=1)
triggerall = !IsHelper
trigger1 = time%4=0
time = 6
ignorehitpause = 1

[State 2000, Width]
type = Width
trigger1 = 1
player = 60,0
edge = 60,0

[State 2001, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2001, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2001, Helper]; ---- Brutal GOD PROJECT dash attack Reversaldef helper
type = Helper
;triggerall = palno = 12
triggerall = !IsHelper
trigger1 = !NumHelper(20010)
ID = 20010
name = "Brutal GOD PROJECT dash attack Reversaldef helper"
postype = p1
facing = 1
pos = 0,0
sprpriority = 0
stateno = 20010
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 2001, Helper]; ---- Brutal GOD PROJECT dash attack Reversaldef helper
type = Helper
;triggerall = palno = 12
triggerall = IsHelper(97864)
trigger1 = !NumHelper(20019)
ID = 20019
name = "Brutal GOD PROJECT dash attack Reversaldef helper"
postype = p1
facing = 1
pos = 0,0
sprpriority = 0
stateno = 20010
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 2001, 1]
type = null;HitDef
trigger1 = animelem = 1
trigger2 = animelem = 2
Trigger3 = animelem = 3
pausetime = 0,0
damage = 0,0
guard.pausetime = 5,5
attr = S, HA
hitflag = MAF
sparkno = S511
guard.sparkno = 40
sparkxy = -10,-60
guardflag = M
priority = 7, hit ;miss
hitsound = S0,55
guardsound = S0,10
sprpriority = 4
p2facing = 1
p1stateno = 2003
p2stateno = 2010
numhits = 0
id = ifelse(IsHelper(97864),92001,2001)

[State 2001, 1]
type = HitDef
trigger1 = 1
;trigger1 = animelem = 1
;trigger2 = animelem = 2
;Trigger3 = animelem = 3
attr = ,AA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF   ;HLAFDP+-
guardflag = M    ;MHLA
getpower = floor(125*fvar(10)),floor(75*fvar(10))
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 4,hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = 0,0
pausetime = 0,0
guard.pausetime = 5,5
sparkno = S511
guard.sparkno = 40
sparkxy = -10,-60
hitsound = S0,55
guardsound = S0,10
ground.type = Trip      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime =10    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 10    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.4    ;y acceleration
ground.velocity = -4.5,-6
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -4.5,-6    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 4
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
p2facing = 1
;p1stateno = 2003
;p2stateno = 2010
;p2getp1state = 1
;forcestand = 0
fall = 1
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.recover = 1
fall.recovertime = 4
fall.damage = 0
;air.fall = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
id = ifelse(IsHelper(97864),92001,2001)
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 0
;palfx.time = 0
;palfx.mul = 0,0,0
;palfx.add = 0,0,0
;envshake.time = 5
;envshake.freq = 120
;envshake.ampl = 5
;envshake.phase = 120
;fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause =
;persistent =

;---------------------------- unused old code
;[State 4100,1]    ;god hitdef helper
;type = Helper
;trigger1 = NumHelper(20010) = 0
;trigger1 = time = 0
;trigger2 = NumHelper(20010) = 1
;trigger2 = Helper(20010),MoveReversed
;ID = 20010
;name = "god_hitdef_helper"
;postype = p1
;facing = 1
;pos = 0,0
;sprpriority = 2
;stateno = 20010
;helpertype = normal
;keyctrl = 0
;ownpal = 1

;[State 800, 4]   ;if god_hitdef_helper hits then reversaldef is unnecessary, debug
;type = VarSet
;trigger1 = helper(20010),movehit
;var(50) = 1

;[State 2001, 1]   ;for Debug only
;type = HitOverride
;trigger1 = helper(20010),movehit
;value = SCA, AA,AT,AP
;stateno = 5300
;slot = 2
;time = 2

;[State 800, 4]  ;if god_hitdef_helper hits then parent hits also
;type = ChangeState
;trigger1 = helper(20010),movehit
;;trigger1 = FrontEdgeBodyDist < 30
;value = 2003
;----------------------------

[State 2001, ChangeState]
type = ChangeState
trigger1 = movehit
;trigger2 = helper(20010),moveguarded  ;if god_hitdef_helper moveguarded then parent moveguarded also
;trigger1 = FrontEdgeBodyDist < 30
value = 2003

[State 2001, ChangeState]
type = ChangeState
triggerall = prevstateno != 1070 && prevstateno != 1080
trigger1 = Time = 42
trigger2 = moveguarded
;trigger2 = helper(20010),moveguarded  ;if god_hitdef_helper moveguarded then parent moveguarded also
;trigger1 = FrontEdgeBodyDist < 30
value = 2002

[State 2001, ChangeState]; ---- generate a longer time when doing dream cancel
type = ChangeState
triggerall = prevstateno = 1070 || prevstateno = 1080
trigger1 = Time = 46
trigger2 = moveguarded
;trigger2 = helper(20010),moveguarded  ;if god_hitdef_helper moveguarded then parent moveguarded also
;trigger1 = FrontEdgeBodyDist < 30
value = 2002

; Brutal GOD PROJECT dash attack Reversaldef helper-----------------------------
[Statedef 20010]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 8,0
anim = 20010
sprpriority = 2
juggle = 0

[State 20010, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 20010, BindToParent]
type = BindToParent
trigger1 = 1
time = -1
facing = 1
pos = 0, 0
persistent = 0

[State 20010, ReversalDef]; ---- Brutal GOD PROJECT unstoppedable by any hitdef attacks (but not projectiles)
type = ReversalDef
trigger1 = IsHelper(20010) ; ---- Brutal GOD PROJECT of Original Igniz
trigger1 = root,stateno = 2001
trigger2 = IsHelper(20019) ; ---- Brutal GOD PROJECT of Shadow Clone Igniz
trigger2 = Parent,stateno = 2001
trigger3 = IsHelper(25010) ; ---- Jibaku
trigger3 = Parent,stateno = 2501
reversal.attr = SCA,NA,SA
sparkno = -1
p2stateno = 20011 ;1046
pausetime = 0,0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
palfx.time = 14
palfx.add = 0,0,100
palfx.mul = 250,250,250
palfx.sinadd = 200,200,100,5

[State 20010, ReversalDef]; ---- Brutal GOD PROJECT unstoppedable by any hitdef attacks (but not projectiles)
type = ReversalDef
trigger1 = IsHelper(20010) ; ---- Brutal GOD PROJECT of Original Igniz
trigger1 = root,stateno != 2001
trigger2 = IsHelper(20019) ; ---- Brutal GOD PROJECT of Shadow Clone Igniz
trigger2 = Parent,stateno != 2001
trigger3 = IsHelper(25010) ; ---- Jibaku
trigger3 = Parent,stateno != 2501
reversal.attr = SCA,NA,SA,HA
sparkno = -1
p2stateno = 20011 ;1046
pausetime = 0,0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
palfx.time = 14
palfx.add = 0,0,100
palfx.mul = 250,250,250
palfx.sinadd = 200,200,100,5

[State 20010, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 0
ignorehitpause = 1
persistent = 0

[State 20010, VarAdd]
type = VarAdd
trigger1 = var(0) >= 0
v = 0
value = 1
ignorehitpause = 1

[State 20010, DestroySelf]
type = DestroySelf
trigger1 = var(0) >= 10
ignorehitpause = 1

[State 20010, VarSet]
type = VarSet
trigger1 = IsHelper(20010) ; ---- Brutal GOD PROJECT of Original Igniz
trigger1 = root,stateno != 2001
trigger2 = IsHelper(20019) ; ---- Brutal GOD PROJECT of Shadow Clone Igniz
trigger2 = Parent,stateno != 2001
trigger3 = IsHelper(25010) ; ---- Jibaku
trigger3 = Parent,stateno != 2501
v = 0
value = 1
ignorehitpause = 1
persistent = 0

;God both-hit P2STATENO --------------------------------------------------------
[Statedef 20011]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 1406, EnvColor]
type     = EnvColor
Trigger1 = 1
value    = 255,255,255
time     = 1
under    = 1
ignorehitpause = 1
persistent = 0

[State 1046, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2041
ignorehitpause = 1

[State 1046, ChangeAnim2]
type = ChangeAnim
triggerall = SelfAnimExist(5030)
triggerall = pos Y < 0
trigger1 = time = 0
value = 5030
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1046, NotHitBy]; ---- Reversaled helper debug
type = NotHitBy
trigger1 = isHelper
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 1046, RemoveExplod]; ---- Reversaled helper debug
type = RemoveExplod
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1046, DestroySelf]; ---- Reversaled helper debug
type = DestroySelf
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1046, PosSet]
type = PosSet
trigger1 = time = 0
trigger1 = pos Y >= 0
y = 0
ignorehitpause = 1

[State 1046, PosAdd]
type = PosAdd
Trigger1 = time = [2,21]
x = -2
ignorehitpause = 1

[State 1046, HitFallSet]
type = NULL;HitFallSet
trigger1 = time = 0
trigger1 = pos Y < 0
value = 1
;xvel =
yvel = -4.5
ignorehitpause = 1
persistent = 0

[State 1046, SelfState]
type = SelfState
trigger1 = pos Y < 0
trigger1 = Time >= 21
value = 5030

[State 1046, SelfState]
type = SelfState
trigger1 = Time >= 21
value = 0
ctrl = 1

;===============================================================================
; god hitdef helper------------------------------------------------
;[Statedef 20010]
;type    = S
;movetype= A
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 8,0
;anim = 20010
;sprpriority = 2
;juggle = 0

;[State 20010, if self is god_hitdef_helper debug]
;type = BindToRoot
;trigger1 = AnimTime != 0
;time = 999
;facing = 1
;pos = 0, 0

;[State 840,0]
;type = PlayerPush
;trigger1 = 1
;value = 1

;[State 800, 1]
;type = HitDef
;triggerall = root,stateno = 2001
;triggerall = p2life > 0
;trigger1 = 1
;pausetime = 0,0
;damage = 0,0
;guard.pausetime = 5,0
;attr = S, HA
;hitflag = MAF
;sparkno = 2
;guard.sparkno = 42
;sparkxy = -10,-60
;guardflag = M
;priority = 999, hit
;hitsound = S0,55
;guardsound = S0,10
;sparkno = -1
;sprpriority = 4
;p2facing = 1
;p1stateno = 2003
;p2stateno = 2010

;[State 821, 4]
;type = destroyself
;trigger1 = MoveReversed        ;Debug when enemy's reversaldef hits god_hitdef_helper
;trigger2 = root,stateno != 2001  ;if parent misses then god_hitdef_helper should destroyself
;trigger3 = root,movehit   ;if parent hits then god_hitdef_helper is unnecessary, debug
;trigger4 = moveguarded    ;if god_hitdef_helper moveguarded then it should destroyself
;===============================================================================

; Brutal GOD PROJECT dash attack failed ----------------------------------------
[Statedef 2002]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2002
sprpriority = 2

[State 2002, PosAdd]
type = PosAdd
trigger1 = animelem = 1
x = 10

[State 2002, VelSet]
type = VelSet
trigger1 = Time = [0,13]
x = 1.5

[State 2002, VelSet]
type = VelSet
trigger1 = Time = [14,18]
x = 1

[State 2002, VelSet]
type = VelSet
trigger1 = Time = 19
x = 0

[State 2002, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; Brutal GOD PROJECT success P1STATENO -----------------------------------------
[Statedef 2003]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 8,0
anim = 2001
sprpriority = 2

;---------------------------- unused old code
;[State 2003, 1]
;type = AssertSpecial
;triggerAll = ishelper
;trigger1 = 1
;flag = invisible

;[State 2003, if self is god_hitdef_helper debug]
;type = BindToRoot
;trigger1 = ishelper
;trigger1 = AnimTime != 0
;time = 999
;facing = 1
;pos = 0, 0

;[State 170, destroyself]  ;if parent misses but god_hitdef_helper hits, that is incorrect, debug
;type = destroyself
;triggerall = ishelper
;trigger1 = root,stateno!=2003 && root,stateno!=2004 && root,stateno!=106 && root,stateno!=107 && root,stateno!=2005 && root,stateno!=2006 && root,stateno!=2007
;ignorehitpause = 1

;[State 821, 4]
;type = destroyself
;triggerall = ishelper
;trigger1 = MoveReversed        ;Debug when enemy's reversaldef hits god_hitdef_helper
;----------------------------

[State 2003, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA, AA,AT,AP
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, TargetState]
type = TargetState
trigger1 = 1
value = 2010
ID = ifelse(IsHelper(97864),92001,2001)
ignorehitpause = 1

[State 2003, Afterimage]
type = Afterimage
;TRIGGERALL = palno != 12
triggerall = !IsHelper
triggerall = roundstate != 0
trigger1 = 1
time = 6
length = 4
palbright = 0,0,30
palcontrast = 125,125,125
paladd = 0,0,15
palmul = .60,.60,.70
timegap = 1
framegap = 1
trans = add
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 2003, AfterImageTime]
type = AfterImageTime
triggerall = (palno = [1,11]) && !((palno=[7,11]) && var(58)=1 && floor(var(42)/10)%10=1)
triggerall = !IsHelper
trigger1 = time%4=0
time = 6
ignorehitpause = 1

[State 2003, ChangeState]; ---- if reversed target is helper, not player, debug
type = ChangeState
triggerall = target,ishelper
trigger1 = time = 1
value = 2001
persistent = 0
ignorehitpause = 1

[State 2003, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2003, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2003, TargetBind]
type = TargetBind
trigger1 = 1
id = ifelse(IsHelper(97864),92001,2001)
pos = 75, 0
postype = p1
time = 2
ignorehitpause = 1

[State 2003, ChangeState]; ---- towards wall
type = ChangeState
triggerall = NumEnemy = 1 || (NumEnemy=2&&!(EnemyNear(0),alive)*(EnemyNear(1),alive))
triggerall = !NumPartner || !Partner,alive
triggerall = FrontEdgeBodyDist < 93
triggerall = target,BackEdgeBodyDist <= 5
trigger1 = facing = 1 ; ---- towards right
trigger1 = ScreenPos X >= 226 ;(319-93)
trigger2 = facing = -1 ; ---- towards left
trigger2 = ScreenPos X <= 93
value = 2004

[State 2003, ChangeState]; ---- towards edge when screen limited by another Enemy
type = ChangeState
triggerall = NumEnemy = 2
triggerall = EnemyNear(0),alive
triggerall = EnemyNear(1),alive
trigger1 = FrontEdgeBodyDist < 93
value = 2004

[State 2003, ChangeState]; ---- towards edge when screen limited by Partner
type = ChangeState
triggerall = NumPartner
triggerall = Partner,alive
trigger1 = FrontEdgeBodyDist < 93
value = 2004

[State 2003, ChangeState]; ---- debug
type = ChangeState
trigger1 = time >= 100
value = 2004

;[State 240, 4]
;type = ChangeState
;triggerAll = ishelper
;trigger1 = parent,stateno != 2001
;trigger1 = parent,stateno != 2003
;value = 2004

; Brutal GOD PROJECT success P1STATENO hit wall---------------------------------
[Statedef 2004]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2003
sprpriority = 2

;---------------------------- unused old code
;[State 2004, 1]
;type = AssertSpecial
;triggerAll = ishelper
;trigger1 = 1
;flag = invisible

;[State 2004, if self is god_hitdef_helper debug]
;type = BindToRoot
;trigger1 = ishelper
;trigger1 = AnimTime != 0
;time = 999
;facing = 1
;pos = 0, 0

;[State 170, destroyself]  ;if parent misses but god_hitdef_helper hits, that is incorrect, debug
;type = destroyself
;triggerall = ishelper
;trigger1 = root,stateno!=2003 && root,stateno!=2004 && root,stateno!=106 && root,stateno!=107 && root,stateno!=2005 && root,stateno!=2006 && root,stateno!=2007
;ignorehitpause = 1
;----------------------------

[State 2004, AfterImageTime]; ---- state 2004 be nicer if has no afterimage
type = AfterImageTime
triggerall = !IsHelper
trigger1 = animelem = 3, >0
trigger1 = animelem = 3, <=5
time = 0
ignorehitpause = 1 

[State 2004, Width]
type = Width
trigger1 = 1
edge = 93,0

[State 2004, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2004, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,17

[State 2004, Targetstate]
type = Targetstate
trigger1 = 1
id = ifelse(IsHelper(97864),92001,2001)
value = 2011
persistent = 0

[State 2004, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 17
freq = 100
ampl = -9
phase = 120
;ignorehitpause =
;persistent =

[State 2004, VarSet]
type = VarSet
trigger1 = 1
var(5) = 1
persistent = 0

[State 2004, PosAdd]
type = PosAdd
trigger1 = animTime = 0
x = 4

[State 2004, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 106

; Brutal GOD PROJECT success P1STATENO CHAINBLADE SLICE ------------------------
[Statedef 2005]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2015
sprpriority = 2

;---------------------------- unused old code
;[State 2005, 1]
;type = AssertSpecial
;triggerAll = ishelper
;trigger1 = 1
;flag = invisible

;[State 2005, if self is god_hitdef_helper debug]
;type = BindToRoot
;trigger1 = ishelper
;trigger1 = AnimTime != 0
;time = 999
;facing = 1
;pos = 0, 0

;[State 170, destroyself]  ;if parent misses but god_hitdef_helper hits, that is incorrect, debug
;type = destroyself
;triggerall = ishelper
;trigger1 = root,stateno!=2003 && root,stateno!=2004 && root,stateno!=106 && root,stateno!=107 && root,stateno!=2005 && root,stateno!=2006 && root,stateno!=2007
;ignorehitpause = 1
;----------------------------

[State 2005, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = 3

[State 2005, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 5

[State 2005, PosAdd]
type = PosAdd
trigger1 = animelem = 10
x = 7

[State 2005, PosAdd]
type = PosAdd
trigger1 = animelem = 11
x = 8

[State 2005, PosAdd]
type = PosAdd
trigger1 = animelem = 12
x = 5

[State 2005, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2005, PlaySnd]; ---- slice sound
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 13
value = S0,55

[State 2005, PlaySnd]; ---- chainblade sound
type = PlaySnd
trigger1 = AnimElem = 8
value = S0,30
channel = 1

[State 2005, StopSnd]
type = StopSnd
trigger1 = AnimElem = 11
channel = 1

[State 2005, PlaySnd]; ---- hitsound
type = PlaySnd
trigger1 = AnimElem = 11
value = S0,14

[State 2005, HitAdd]
type = HitAdd
trigger1 = AnimElem = 12
value = 1

[State 2005, HitAdd]
type = HitAdd
trigger1 = AnimElem = 13
value = 2

[State 2005, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 13
id = ifelse(IsHelper(97864),92001,2001)
value = floor(-25*fvar(3))
kill = 0
absolute = 1

[State 2005, EnvColor]
type = EnvColor
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
time = 1
under = 1
value = 255,255,255
ignorehitpause = 1

[State 2005, Explod]; ---- bloody spark
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 13
anim = 510
postype = p2
pos = 1,-76
sprpriority = 4

[State 2005, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 11
anim = F3
postype = p2
pos = -1,-58
sprpriority = 4

[State 2005, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 12
anim = F2
postype = p2
pos = -1,-58
sprpriority = 4

[State 2005, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 13
anim = F3
postype = p2
pos = -1,-63
sprpriority = 4

[State 2005, Explod]; ---- slice spark
type = Explod
trigger1 = AnimElem = 13
anim = 509
postype = p2
pos = 1,-75
sprpriority = 4

[State 2005, TargetState]
type = TargetState
trigger1 = animelem = 12
id = ifelse(IsHelper(97864),92001,2001)
value = 2012

[State 2005, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 2006

; Brutal GOD PROJECT success P1STATENO fast-hitting ----------------------------
[Statedef 2006]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2004
sprpriority = 2

;---------------------------- unused old code
;[State 2006, 1]
;type = AssertSpecial
;triggerAll = ishelper
;trigger1 = 1
;flag = invisible

;[State 2006, if self is god_hitdef_helper debug]
;type = BindToRoot
;trigger1 = ishelper
;trigger1 = AnimTime != 0
;time = 999
;facing = 1
;pos = 0, 0

;[State 170, destroyself]  ;if parent misses but god_hitdef_helper hits, that is incorrect, debug
;type = destroyself
;triggerall = ishelper
;trigger1 = root,stateno!=2003 && root,stateno!=2004 && root,stateno!=106 && root,stateno!=107 && root,stateno!=2005 && root,stateno!=2006 && root,stateno!=2007
;ignorehitpause = 1
;----------------------------

[State 2006, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2006, PlaySnd]
type = null;playsnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
value = S0,45
;channel = 2

[State 2006, PlaySnd]; ---- fast-hitting sound
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,76
channel = 5

[State 2006, HitAdd]
type = HitAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
value = 1

[State 2006, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
id = ifelse(IsHelper(97864),92001,2001)
value = floor(-10*fvar(3))
kill = 0
absolute = 1

[State 2006, EnvColor]
type = EnvColor
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
ignorehitpause = 1
time = 1
under = 1
value = 255,255,255

[State 2006, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
anim = F2
postype = p2
pos = 0,-28
random = 30,0
sprpriority = 4

[State 2006, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 18
trigger4 = AnimElem = 28
anim = F2
postype = p2
pos = 0,-68
random = 30,0
sprpriority = 4

[State 2006, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 25
anim = F2
postype = p2
pos = 0,-98
random = 30,0
sprpriority = 4

[State 2006, TargetState]
type = TargetState
trigger1 = time = 0
id = ifelse(IsHelper(97864),92001,2001)
value = 2013

[State 240, 4]
type = ChangeState
trigger1 = animTime = 0
value = 2007

; Brutal GOD PROJECT success P1STATENO light energy explosion ------------------
[Statedef 2007]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2005
sprpriority = 2

[State 801, NotHitBy]
type = NotHitBy
trigger1 =  1
value = SCA
time = 2
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2007, StopSnd]
type = StopSnd
trigger1 =  AnimElem = 2
channel = 5

;---------------------------- unused old code
;[State 2007, 1]
;type = AssertSpecial
;triggerAll = ishelper
;trigger1 = 1
;flag = invisible

;[State 2007, if self is god_hitdef_helper debug]
;type = BindToRoot
;trigger1 = ishelper
;trigger1 = AnimTime != 0
;time = 999
;facing = 1
;pos = 0, 0

;[State 170, destroyself]  ;if parent misses but god_hitdef_helper hits, that is incorrect, debug
;type = destroyself
;triggerall = ishelper
;trigger1 = root,stateno!=2003 && root,stateno!=2004 && root,stateno!=106 && root,stateno!=107 && root,stateno!=2005 && root,stateno!=2006 && root,stateno!=2007
;ignorehitpause = 1
;----------------------------

[State 2007, BGPalFX]
type = BGPalFX
trigger1 = time < 169
time = 2
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
invertall = 1
ignorehitpause = 1

[State 2007, BGPalFX]
type = BGPalFX
trigger1 = time = 169
time = 85
add = 0,0,ifelse(fvar(4)=0,100,0)
mul = 125,125,125
sinadd = 150,150,ifelse(fvar(4)=0,100,150),6
invertall = 1
ignorehitpause = 1

[State 2007, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,46

[State 2007, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
value = S0,36
pan = ifelse((AnimElem = 3),50,-50)

[State 2007, TargetState]
type = TargetState
trigger1 = time = 0
id = ifelse(IsHelper(97864),92001,2001)
value = 2014

[State 2007, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 40
value = S0,27

[State 2007, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 41,= 1
anim = F3
postype = p2
pos = 10,-98
sprpriority = 5
ignorehitpause = 1

[State 2007, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 42,= 1
anim = F3
postype = p2
pos = 10,-48
sprpriority = 5
ignorehitpause = 1

[State 2007, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 43,= 1
anim = F3
postype = p2
pos = -30,-88
sprpriority = 5
ignorehitpause = 1

[State 2007, Explod]; ---- hit spark
type = Explod
trigger1 = AnimElem = 44,= 1
anim = F3
postype = p2
pos = -30,-68
sprpriority = 5
ignorehitpause = 1

[State 2007, PlaySnd]; ---- hit sound
type = PlaySnd
trigger1 = AnimElem = 43
value = S0,17

[State 2007, Targetstate]
type = Targetstate
trigger1 = animelem = 41
id = ifelse(IsHelper(97864),92001,2001)
value = ifelse(fvar(4)=0,2015,2035)

[State 2007, Pause]
type = Pause
trigger1 = (GameTime%2) = 1
trigger1 = animelem = 41, >= 0
trigger1 = animelem = 47, <= 0
time = 1
movetime = 0

[State 2007, EnvColor]
type = EnvColor
trigger1 = animelem = 41
trigger2 = animelem = 42
trigger3 = animelem = 43
ignorehitpause = 1
time = 2
under = 1
value = 255,255,255

[State 2007, EnvShake]
type = EnvShake
trigger1 = animelem = 41
trigger2 = animelem = 42
trigger3 = animelem = 43
trigger4 = animelem = 44
time = 10
freq = 120
ampl = -6
phase = 120
ignorehitpause = 1
;persistent =

[State 2007, HitAdd]
type = HitAdd
trigger1 = animelem = 41
trigger2 = animelem = 42
trigger3 = animelem = 43
trigger4 = animelem = 44
value = 1

[State 2007, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 41
trigger2 = animelem = 42
trigger3 = animelem = 43
trigger4 = animelem = 44
id = ifelse(IsHelper(97864),92001,2001)
value = floor(-40*fvar(3))
kill = 0
absolute = 1

[State 2007, Explod]; ---- CHAOS TIDE explod
type = Explod
trigger1 = animelem = 40
anim = ifelse(fvar(4)=0,1072,1075)
pos = -3,0
postype = p1
sprpriority = 3
removetime = -2
bindtime = -1
;pausemovetime = 99999
ownpal = 1

[State 1070, VarSet]; ---- var(1) palfx changing
type = VarSet
trigger1 = 1
var(1) = 0
persistent = 0

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
var(1) = 7

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 40, >= 0
trigger1 = AnimElem = 51, < 0
var(1) = -3

[State 1070, PalFX]; ---- palfx changing
type = PalFX
triggerall = var(1) > 0
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 51, < 0
time = 1
;add = floor(var(1)/3),floor(var(1)/3),var(1)
add = ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,var(1),floor(var(1)/3*2))
mul = 256,256,256
;sinadd = 0,0,0,10
ignorehitpause = 1
;persistent =

[State 2007, EnvShake]
type = EnvShake
trigger1 = animelem = 67
trigger2 = animelem = 69
trigger3 = animelem = 71
trigger4 = animelem = 73
trigger5 = animelem = 75
trigger6 = animelem = 77
trigger7 = animelem = 79
time = 15
freq = 120
ampl = -7
phase = 120
ignorehitpause = 1
;persistent =

[State 2007, PlaySnd]; ---- energy sound
type = PlaySnd
trigger1 = AnimElem = 50
value = S0,1

[State 2007, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 50
value = S0,47

[State 2007, 2]
type = null;explod
;triggerall = !ishelper
trigger1 = animelem = 67
anim = 2006
pos = 138,-90
postype = p1
sprpriority = 3

;[State 2007, Projectile]; ---- light energy explosion visual proj(unused, use helper instead)
;type = Projectile
;trigger1 = animelem = 67
;ProjID = 2006
;projanim = 2006
;projhitanim = 2006
;projremanim = 2006
;projcancelanim = 2006
;projscale = 1,1
;projremovetime = -2
;velocity = 0,0
;projhits = 1
;projpriority = 999999999
;projsprpriority = 3
;offset = 138,-90
;postype = p1         ;p2,front,back,left,right
;projshadow = 0,0,0
;damage = 0,0
;sprpriority = 1
;numhits = 0
;afterimage.time = -1
;afterimage.length = 5
;afterimage.palbright = 0,0,25
;afterimage.palcontrast = 250, 250, 250
;afterimage.timegap = 1
;afterimage.framegap = 1
;afterimage.trans = addalpha
;afterimage.alpha = 175,225
;ignorehitpause = 1

[State 2007, Helper]; ---- light energy launch visual helper
type = Helper
trigger1 = animelem = 55
helpertype = normal ;player
name = "light energy launch visual helper"
ID = 2008
stateno = 2008
pos = 138,-90
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
;supermove
;pausemove
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
;persistent =

[State 2007, Helper]; ---- light energy explosion visual helper
type = Helper
trigger1 = animelem = 67
helpertype = normal ;player
name = "light energy explosion visual helper"
ID = 2009
stateno = 2009
pos = 138,-90
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
;supermove
;pausemove
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
;persistent =


[State 2007, PosFreeze]
type = PosFreeze
trigger1 = 1
ignorehitpause = 1

[State 2007, PlaySnd]; ---- lihgt energy exploding sound
type = PlaySnd
trigger1 = animelem = 67
;trigger2 = animelem = 59
trigger2 = animelem = 71
;trigger4 = animelem = 63
trigger3 = animelem = 75
;trigger6 = animelem = 67
trigger4 = animelem = 79
;trigger8 = animelem = 71
value = S0,49

[State 2007, Explod]; ---- exploding spark
type = Explod
;triggerall = movehit
trigger1 = animelem = 67, = 1
trigger2 = animelem = 69, = 1
trigger3 = animelem = 71, = 1
trigger4 = animelem = 73, = 1
trigger5 = animelem = 75, = 1
trigger6 = animelem = 77, = 1
trigger7 = animelem = 79, = 1
trigger8 = animelem = 81, = 1
anim = 517
postype = p2
pos = -10,-60
random = 15,30
sprpriority = 8

[State 2007, TargetState]
type = TargetState
trigger1 = animelem = 67
trigger2 = animelem = 69
trigger3 = animelem = 71
trigger4 = animelem = 73
trigger5 = animelem = 75
trigger6 = animelem = 77
trigger7 = animelem = 79
id = ifelse(IsHelper(97864),92001,2001)
value = ifelse(fvar(4)=0,2017,2037)

[State 2007, PlaySnd]; ---- lihgt energy exploding sound2
type = PlaySnd
;trigger1 = animelem = 67
trigger1 = animelem = 69
;trigger2 = animelem = 71
trigger2 = animelem = 73
;trigger3 = animelem = 75
trigger3 = animelem = 77
;trigger4 = animelem = 79
value = S0,48

[State 2007, PlaySnd]; ---- hit sound
type = playsnd
;trigger1 = animelem = 67
trigger1 = animelem = 69
;trigger2 = animelem = 71
trigger2 = animelem = 73
;trigger3 = animelem = 75
trigger3 = animelem = 77
;trigger4 = animelem = 79
value = S0,17

[State 2007, TargetState]
type = TargetState
trigger1 = animelem = 81
id = ifelse(IsHelper(97864),92001,2001)
value = ifelse(fvar(4)=0,2018,2038)

[State 2007, HitAdd]
type = HitAdd
;triggerall = !ishelper
trigger1 = animelem = 67
trigger2 = animelem = 69
trigger3 = animelem = 71
trigger4 = animelem = 73
trigger5 = animelem = 75
trigger6 = animelem = 77
trigger7 = animelem = 79
trigger8 = animelem = 80
value = 1

[State 2007, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 67
trigger2 = animelem = 69
trigger3 = animelem = 71
trigger4 = animelem = 73
trigger5 = animelem = 75
trigger6 = animelem = 77
trigger7 = animelem = 78
id = ifelse(IsHelper(97864),92001,2001)
value = floor(-25*fvar(3))
kill = 1
absolute = 1

[State 2007, TargetLifeAdd]; ---- moved to p2stateno in order to exactly kill opponent
type = null;targetlifeadd
trigger1 = animelem = 81
id = ifelse(IsHelper(97864),92001,2001)
value = -25
kill = 1
absolute = 1

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
trigger1 = AnimElem = 51, >= 0
trigger1 = AnimElem = 60, < 0
var(1) = 3

[State 1070, VarAdd]; ---- var(1) palfx changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 80, >= 0
trigger1 = AnimElem = 86, < 0
var(1) = -1

[State 1070, PalFX]; ---- palfx changing
type = PalFX
triggerall = var(1) > 0
trigger1 = AnimElem = 51, >= 0
trigger1 = AnimElem = 86, < 0
time = 1
;add = floor(var(1)/3),floor(var(1)/3),var(1)
add = ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,floor(var(1)/3),floor(var(1)/3*2)),ifelse(fvar(4)=0,var(1),floor(var(1)/3*2))
mul = 256,256,256
;sinadd = 0,0,0,10
ignorehitpause = 1
;persistent =

[State 2007, Helper]
type = null;Helper
trigger1 = animelem = 67
ID = 2007
name = "denki"
sprpriority = 5
pos = -30,-20
postype = back
stateno = 2016
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 2007, EnvColor]
type = EnvColor
trigger1 = animelem = 67
trigger2 = animelem = 71
trigger3 = animelem = 75
trigger4 = animelem = 79
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 2007, Pause]
type = Pause
trigger1 = (GameTime%3) = 1
trigger1 = animelem = 67,>= 0
trigger1 = animelem = 81,<= 0
trigger1 = p2life != 0
time = 1
movetime = 0

[State 2007, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

;[State 240, destroyself] ;destroy god_hitdef_helper at the end of god supermove
;type = destroyself
;trigger1 = AnimTime = 0

[State 2007, Unfolding of the Ture Universe]; ---- AI
type = ChangeState
value = 2800
;**************
TriggerAll = var(59)
TriggerAll = RoundState = 2
TriggerAll= !IsHelper(97864) ; ---- Not Shadow Clone Igniz
;TriggerAll = fvar(37) = 0
;**************
TriggerAll = power >= 3000
TriggerAll = statetype != A
;TriggerAll = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3) || stateno = 100
;**************
;TriggerAll = P2StateType = L
TriggerAll = EnemyNear(floor(fvar(36))),ctrl = 0
;TriggerAll = EnemyNear(floor(fvar(36))),AnimTime <= -1
;**************
TriggerAll = EnemyNear(floor(fvar(36))),Time >= var(55)
TriggerAll = Random<=var(59)*85
;**************
TriggerAll = !Numpartner
;**************
;Trigger1 = EnemyNear(floor(fvar(36))),stateno = [5100,5119]
trigger1 = animTime = 0
Trigger1 = P2moveType = H

[State 2007, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; Brutal God Project light energy launch visual helper -------------------------
[Statedef 2008]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = ifelse(root,fvar(4)=0,2037,2047)
sprpriority = 3

[State 2008, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2008, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
;persistent =

[State 2008, ChangeAnim]; ---- HSDM
type = ChangeAnim
triggerall = anim = 2037
trigger1 = ishelper(2801)
value = 2042
;elem = 1
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 1
type = AngleDraw
trigger1 = animelem = 1, >=0
trigger1 = animelem = 2, <0
scale = .18,.18

[State 2008, BindToParent]; ---- Expanding 1
type = BindToParent
trigger1 = animelem = 1, >=0
trigger1 = animelem = 2, <0
time = -1
facing = 1
pos = 38,-100
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 2
type = AngleDraw
trigger1 = animelem = 2, >=0
trigger1 = animelem = 3, <0
scale = .23,.23

[State 2008, BindToParent]; ---- Expanding 2
type = BindToParent
trigger1 = animelem = 2, >=0
trigger1 = animelem = 3, <0
time = -1
facing = 1
pos = 38,-122
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 3
type = AngleDraw
trigger1 = animelem = 3, >=0
trigger1 = animelem = 4, <0
scale = .3,.3

[State 2008, BindToParent]; ---- Expanding 3
type = BindToParent
trigger1 = animelem = 3, >=0
trigger1 = animelem = 4, <0
time = -1
facing = 1
pos = 25,-140
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 4
type = AngleDraw
trigger1 = animelem = 4, >=0
trigger1 = animelem = 5, <0
scale = .3,.3

[State 2008, BindToParent]; ---- Expanding 4
type = BindToParent
trigger1 = animelem = 4, >=0
trigger1 = animelem = 5, <0
time = -1
facing = 1
pos = 12,-147
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 5
type = AngleDraw
trigger1 = animelem = 5, >=0
trigger1 = animelem = 6, <0
scale = .4,.4

[State 2008, BindToParent]; ---- Expanding 5
type = BindToParent
trigger1 = animelem = 5, >=0
trigger1 = animelem = 6, <0
time = -1
facing = 1
pos = 4,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 6
type = AngleDraw
trigger1 = animelem = 6, >=0
trigger1 = animelem = 7, <0
scale = .6,.6

[State 2008, BindToParent]; ---- Expanding 6
type = BindToParent
trigger1 = animelem = 6, >=0
trigger1 = animelem = 7, <0
time = -1
facing = 1
pos = -12,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 7
type = AngleDraw
trigger1 = animelem = 7, >=0
trigger1 = animelem = 8, <0
scale = .7,.7

[State 2008, BindToParent]; ---- Expanding 7
type = BindToParent
trigger1 = animelem = 7, >=0
trigger1 = animelem = 8, <0
time = -1
facing = 1
pos = -14,-153
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 8
type = AngleDraw
trigger1 = animelem = 8, >=0
trigger1 = animelem = 9, <0
scale = .75,.75

[State 2008, BindToParent]; ---- Expanding 8
type = BindToParent
trigger1 = animelem = 8, >=0
trigger1 = animelem = 9, <0
time = -1
facing = 1
pos = -15,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 9
type = AngleDraw
trigger1 = animelem = 9, >=0
trigger1 = animelem = 10, <0
scale = .65,.65

[State 2008, BindToParent]; ---- Expanding 9
type = BindToParent
trigger1 = animelem = 9, >=0
trigger1 = animelem = 10, <0
time = -1
facing = 1
pos = -10,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 10
type = AngleDraw
trigger1 = animelem = 10, >=0
trigger1 = animelem = 11, <0
scale = .6,.6

[State 2008, BindToParent]; ---- Expanding 10
type = BindToParent
trigger1 = animelem = 10, >=0
trigger1 = animelem = 11, <0
time = 1
facing = 1
pos = -12,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 11
type = AngleDraw
trigger1 = animelem = 11, >=0
trigger1 = animelem = 12, <0
scale = .7,.7

[State 2008, BindToParent]; ---- Expanding 11
type = BindToParent
trigger1 = animelem = 11, >=0
trigger1 = animelem = 12, <0
time = 1
facing = 1
pos = -4,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 12
type = AngleDraw
trigger1 = animelem = 12, >=0
scale = .8,.8

[State 2008, BindToParent]; ---- Expanding 12
type = BindToParent
trigger1 = animelem = 12, >=0
time = 1
facing = 1
pos = 59,-138
ignorehitpause = 1
;persistent =

[State 2008, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 2008, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

; Brutal God Project light energy explosion visual helper ----------------------
[Statedef 2009]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = ifelse(root,fvar(4)=0,2038,2048)
sprpriority = 3

[State 2009, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2008, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
;persistent =

[State 2009, AngleDraw]; ---- Expanding 0
type = AngleDraw
trigger1 = animelem = 1, >=0
trigger1 = animelem = 2, <0
trigger2 = animelem = 6, >=0
trigger2 = animelem = 7, <0
trigger3 = animelem = 11, >=0
trigger3 = animelem = 12, <0
trigger4 = animelem = 16, >=0
trigger4 = animelem = 17, <0
scale = 1.6,1.6

[State 2009, AngleDraw]; ---- Expanding 1
type = AngleDraw
trigger1 = animelem = 2, >=0
trigger1 = animelem = 3, <0
trigger2 = animelem = 7, >=0
trigger2 = animelem = 8, <0
trigger3 = animelem = 12, >=0
trigger3 = animelem = 13, <0
trigger4 = animelem = 17, >=0
trigger4 = animelem = 18, <0
scale = 1.45,1.45

[State 2009, AngleDraw]; ---- Expanding 2
type = AngleDraw
trigger1 = animelem = 3, >=0
trigger1 = animelem = 4, <0
trigger2 = animelem = 8, >=0
trigger2 = animelem = 9, <0
trigger3 = animelem = 13, >=0
trigger3 = animelem = 14, <0
trigger4 = animelem = 18, >=0
trigger4 = animelem = 19, <0
scale = 1.38,1.38

[State 2009, AngleDraw]; ---- Expanding 3
type = AngleDraw
trigger1 = animelem = 4, >=0
trigger1 = animelem = 5, <0
trigger2 = animelem = 9, >=0
trigger2 = animelem = 10, <0
trigger3 = animelem = 14, >=0
trigger3 = animelem = 15, <0
trigger4 = animelem = 19, >=0
trigger4 = animelem = 20, <0
scale = 1.32,1.32

[State 2009, AngleDraw]; ---- Expanding 4
type = AngleDraw
trigger1 = animelem = 5, >=0
trigger1 = animelem = 6, <0
trigger2 = animelem = 10, >=0
trigger2 = animelem = 11, <0
trigger3 = animelem = 15, >=0
trigger3 = animelem = 16, <0
trigger4 = animelem = 20, >=0
trigger4 = animelem = 21, <0
scale = 1.1,1.1

[State 2009, Trans]
type = Trans
trigger1 = animelem = 21, <0
trans = add
ignorehitpause = 1

[State 2009, VarSet]; ---- helper,var(1) Trans changing
type = VarSet
trigger1 = 1
var(1) = 256
persistent = 0

[State 2009, VarAdd]; ---- helper,var(1) Trans changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 21, >= 0
var(1) = -4

[State 2009, Trans]; ---- Fade out
type = Trans
triggerall = var(1) > 0
trigger1 = animelem = 21, >=0
trans = addalpha
alpha = var(1),256
ignorehitpause = 1

[State 2009, Trans]; ---- invisible
type = Trans
triggerall = var(1) <= 0
trigger1 = animelem = 21, >=0
trans = addalpha
alpha = 0,256
ignorehitpause = 1

[State 2009, VarSet]; ---- helper,fvar(1) scale changing
type = VarSet
trigger1 = 1
fvar(1) = 1.1
persistent = 0

[State 2009, VarAdd]; ---- helper,fvar(1) scale changing
type = VarAdd
triggerall = fvar(1) > 0
trigger1 = AnimElem = 21, >= 0
fvar(1) = -.03

[State 2009, AngleDraw]
type = AngleDraw
trigger1 = animelem = 21, >=0
scale = fvar(1),fvar(1)

[State 2009, DestroySelf]
type = DestroySelf
trigger1 = var(1) <= 0

; Brutal GOD PROJECT victim P2STATENO pushing ----------------------------------
[Statedef 2010]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2010, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2009

[State 2010, Nothitby]  ;either reservaldef hits or god_hitdef_helper hits, debug
Type = NotHitBy
Trigger1 = 1
Value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2010, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 2010, RemoveExplod]; ---- ifishelper debug
type = RemoveExplod
trigger1 = ishelper
ignorehitpause = 1

[State 2010, DestroySelf]; ---- ifishelper debug
type = DestroySelf
trigger1 = ishelper
ignorehitpause = 1

[State 2010, SelfState]; ---- if misses debug
type = SelfState
triggerall = Vel X = 0
trigger1 = time >= 800
value = 5030
ignorehitpause = 1

[State 2010, SelfState]; ---- if root misses but god_hitdef_helper hits debug
type = null;SelfState
triggerall = time >= 1
triggerall = backedgebodydist > 5
trigger1 = Vel X = 0
value = 5030
ignorehitpause = 1

; Brutal GOD PROJECT victim P2STATENO hit wall ---------------------------------
[Statedef 2011]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2013, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2011, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 2011, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2010

[State 2011, ForceFeedback]
type = ForceFeedback
trigger1 = time = 7
waveform = "sine"    ;"square","sinesquare","off"
time = 20
freq = 128,0,0,0
ampl = 128,0,0,0
self = 1
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 7
trigger1 = time%4=0
x = 0
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 7
trigger1 = time%4=1
x = 1
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 7
trigger1 = time%4=2
x = 0
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 7
trigger1 = time%4=3
x = -1
ignorehitpause = 1
;persistent =

; Brutal GOD PROJECT victim P2STATENO slice/fast-hits --------------------------
[Statedef 2012]
type    = S
movetype= H
physics = S
velset = 0,0

[State 2013, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2012, PosAdd]
type = PosAdd
Trigger1 = animelem = 3, = 1
Trigger2 = animelem = 4, = 1
x = 15

[State 2012, ChangeAnim2]; ---- get hit
type = ChangeAnim2
Trigger1 = Time = 0
value = 2011

[State 2011, Offset]
type = Offset
triggerall = time >= 16
trigger1 = time%4=0
x = 0
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 16
trigger1 = time%4=1
x = 1
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 16
trigger1 = time%4=2
x = 0
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 16
trigger1 = time%4=3
x = -1
ignorehitpause = 1
;persistent =

; Brutal GOD PROJECT victim P2STATENO chaos tide -------------------------------
[Statedef 2013]
type    = S
movetype= H
physics = S
velset = 0,0

[State 2013, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2013, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2012

; Brutal GOD PROJECT victim P2STATENO dizzy ------------------------------------
[Statedef 2014]
type    = S
movetype= H
physics = S
velset = 0,0

[State 2014, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2014, HitFallSet]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 2014, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2014, ChangeAnim]; ---- dizzy
type = ChangeAnim
trigger1 = AnimExist(5300)
trigger1 = time = 0
value = 5300

[State 2014, ChangeAnim]
type = ChangeAnim2
trigger1 = !AnimExist(5300)
trigger1 = time = 0
value = 2014

; Brutal GOD PROJECT victim P2STATENO chaos tide -------------------------------
[Statedef 2015]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2015, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2017, PalFx]
type = PalFx
trigger1 = 1
time = 100
add = 0,0,100
mul = 250,250,250
sinadd = 200,200,100,5
persistent = 0

[State 2015, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2013

[State 2011, Offset]
type = Offset
triggerall = time >= 20
trigger1 = time%4=0
x = -1
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 20
trigger1 = time%4=1
x = 1
ignorehitpause = 1
;persistent =

; Brutal GOD PROJECT spark -----------------------------------------------------
[Statedef 2016]
type    = S
velset = 0,0
anim = 2016

[State 2016, Explod]
type = Explod
trigger1 = time % 3 = 0
trigger1 = 1
anim = 2007
postype = p2
pos = 0,-40
random = 80,80
ownpal = 1
sprpriority = 4

[State 2016, DestroySelf]
type = DestroySelf
trigger1 = time = 130

; Brutal GOD PROJECT energy explod ---------------------------------------------
[Statedef 2017]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2017, PosAdd]
type = PosAdd
Trigger1 = time = 0
x = -4

[State 2017, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2017, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2232

[State 2017, PalFx]
type = PalFx
trigger1 = 1
time = 110
add = 0,0,100
mul = 250,250,250
sinadd = 200,200,100,5
persistent = 0

; Brutal GOD PROJECT energy explod ---------------------------------------------
[Statedef 2018]
type    = A
movetype = H
physics = N
velset = -5,-8.5
sprpriority = -1

[State 2018, PalFx]
type = PalFx
trigger1 = 1
time = 40
add = 0,0,100
mul = 250,250,250
sinadd = 200,200,100,5
persistent = 0

[State 2018, NotHitBy]
type = NotHitBy
trigger1 = 1 ;time = [0,1]
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2017, LifeAdd]; ---- lifeadd p2stateno in order to exactly kill opponent
type = lifeadd
trigger1 = life=1
value = -10
kill = 1
absolute = 1
persistent = 0
ignorehitpause = 1

[State 2018, VelAdd]
type = VelAdd
Trigger1 = time > 0
y = .4

[State 2018, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfAnimExist(5052)
value = 5052

[State 2018, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
trigger1 = !selfAnimExist(5052)
value = 2233

[State 2018, ChangeAnim]
type = ChangeAnim
trigger1 = time = 20
trigger1 = selfAnimExist(5062)
value = 5062

[State 2018, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 20
trigger1 = !selfAnimExist(5062)
value = 2234

[State 2018, HitBy]; ---- ally combo enable
type = null;HitBy
trigger1 = time > 1
value = SCA,NA,SA,HA,AA,NP,SP,HP,AP,NT,ST,HT,AT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2018, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time >= 20 ;25
value = 5100

; Brutal GOD PROJECT victim P2STATENO chaos tide ORIGINAL ----------------------
[Statedef 2035]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2015, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2017, PalFx]
type = PalFx
trigger1 = 1
time = 100
add = 0,0,0
mul = 250,250,250
sinadd = 200,200,200,5
persistent = 0

[State 2015, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2013

[State 2011, Offset]
type = Offset
triggerall = time >= 20
trigger1 = time%4=0
x = -1
ignorehitpause = 1
;persistent =

[State 2011, Offset]
type = Offset
triggerall = time >= 20
trigger1 = time%4=1
x = 1
ignorehitpause = 1
;persistent =

; Brutal GOD PROJECT energy explod ---------------------------------------------
[Statedef 2037]
type    = S
movetype= H
physics = N
velset = 0,0

[State 2017, PosAdd]
type = PosAdd
Trigger1 = time = 0
x = -4

[State 2017, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2017, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2232

[State 2017, PalFx]
type = PalFx
trigger1 = 1
time = 110
add = 0,0,0
mul = 250,250,250
sinadd = 200,200,200,5
persistent = 0

; Brutal GOD PROJECT energy explod ---------------------------------------------
[Statedef 2038]
type    = A
movetype = H
physics = N
velset = -5,-8.5
sprpriority = -1

[State 2018, PalFx]
type = PalFx
trigger1 = 1
time = 40
add = 0,0,0
mul = 250,250,250
sinadd = 200,200,200,5
persistent = 0

[State 2018, NotHitBy]
type = NotHitBy
trigger1 = time = [0,1]
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2017, LifeAdd]; ---- lifeadd p2stateno in order to exactly kill opponent
type = lifeadd
trigger1 = life=1
value = -10
kill = 1
absolute = 1
persistent = 0
ignorehitpause = 1

[State 2018, VelAdd]
type = VelAdd
Trigger1 = time > 0
y = .4

[State 2018, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfAnimExist(5052)
value = 5052

[State 2018, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
trigger1 = !selfAnimExist(5052)
value = 2233

[State 2018, ChangeAnim]
type = ChangeAnim
trigger1 = time = 20
trigger1 = selfAnimExist(5062)
value = 5062

[State 2018, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 20
trigger1 = !selfAnimExist(5062)
value = 2234

[State 2018, HitBy]; ---- ally combo enable
type = HitBy
trigger1 = time > 1
value = SCA,NA,SA,HA,AA,NP,SP,HP,AP,NT,ST,HT,AT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2018, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time >= 20 ;25
value = 5100

; Unused old code --------------------------------------------------------------
;[Statedef 2020]
;type    = S
;physics = N
;poweradd = 0
;ctrl = 0;
;velset = 0,0
;anim = 2017
;sprpriority = 4

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 2
;value = S0,54

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 1
;anim = 511
;postype = p1
;pos = 40,-70
;sprpriority = 4

;[State 106, 1]
;type = playsnd
;trigger1 = Time = 0
;value = S0,12

;[State 106, 1]
;type = posset
;trigger1 = Time = 0
;y = 0

;[State 821, 4]
;type = targetbind
;trigger1 = time = 0
;postype = p1
;pos = 36,0

;[State 820, 1]
;type = changestate
;trigger1 = animtime = 0
;value = 2021

; Unused old code  -------------------------------------------------------------
;[Statedef 2021]
;type    = S
;physics = N
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 2016
;sprpriority = 4

;[State 2021, Explod]
;type = Explod
;trigger1 = Time = 0
;trigger2 = Time = 10
;trigger3 = Time = 20
;trigger4 = Time = 30
;trigger5 = Time = 40
;trigger6 = Time = 50
;trigger7 = Time = 60
;trigger8 = Time = 70
;trigger9 = Time = 80
;trigger10 = Time = 90
;trigger11 = Time = 100
;trigger12 = Time = 110
;trigger13 = Time = 120
;trigger14 = Time = 130
;trigger15 = Time = 140
;trigger16 = Time = 150
;trigger17 = Time = 160
;anim = F2
;postype = p1
;pos = 40,-60
;random = 10,30
;sprpriority = 7

;[State 2021, Explod]
;type = Explod
;trigger1 = Time = 0
;trigger2 = Time = 10
;trigger3 = Time = 20
;trigger4 = Time = 30
;trigger5 = Time = 40
;trigger6 = Time = 50
;trigger7 = Time = 60
;trigger8 = Time = 70
;trigger9 = Time = 80
;trigger10 = Time = 90
;trigger11 = Time = 100
;trigger12 = Time = 110
;trigger13 = Time = 120
;trigger14 = Time = 130
;trigger15 = Time = 140
;trigger16 = Time = 150
;trigger17 = Time = 160
;anim = 510
;postype = p1
;pos = 40,-60
;random = 10,30
;sprpriority = 7

;[State 2021, Explod]
;type = playsnd
;trigger1 = Time = 0
;trigger2 = Time = 10
;trigger3 = Time = 20
;trigger4 = Time = 30
;trigger5 = Time = 40
;trigger6 = Time = 50
;trigger7 = Time = 60
;trigger8 = Time = 70
;trigger9 = Time = 80
;trigger10 = Time = 90
;trigger11 = Time = 100
;trigger12 = Time = 110
;trigger13 = Time = 120
;trigger14 = Time = 130
;trigger15 = Time = 140
;trigger16 = Time = 150
;trigger17 = Time = 160
;value = S0,7

;[State 2021, Projectile]
;type = Projectile
;trigger1 = time = 1
;projremove = 1
;Projremovetime = 40
;projpriority = 5
;projanim = 2022
;offset = 0,10
;velocity = 1,-1

;[State 1034, 2]
;type = Projectile
;trigger1 = time = 40
;projremove = 1
;Projremovetime = 40
;projpriority = 5
;projanim = 2023
;offset = 20,-30
;velocity = -1,1

;[State 1034, 2]
;type = Projectile
;trigger1 = time = 80
;projremove = 1
;Projremovetime = 40
;projpriority = 5
;projanim = 2024
;offset = -20,-60
;velocity = 1,1

;[State 1034, 2]
;type = Projectile
;trigger1 = time = 120
;projremove = 1
;Projremovetime = 40
;projpriority = 5
;projanim = 2025
;offset = 20,-30
;velocity = 1,-1

;[State 821, 4]
;type = targetstate
;trigger1 = time = 0
;value = 2024

;[State 820, 1]
;type = changestate
;trigger1 = time = 160
;value = 2022

; Unused old code  -------------------------------------------------------------
;[Statedef 2022]
;type    = A
;physics = N
;movetype = A
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 2018
;sprpriority = 4

;[State 4000, BGPalFX]
;type = BGPalFX
;trigger1 = 1
;;mul = 200,200,200
;time = 2
;add = -100,-100,-100
;color = 0
;invertall = 1
;ignorehitpause = 1

;[State 821, 4]
;type = envcolor
;trigger1 = animelem = 2, = 1
;trigger2 = animelem = 2, = 2
;trigger3 = animelem = 2, = 3
;trigger4 = animelem = 2, = 5
;trigger5 = animelem = 2, = 7
;value = 255,255,255
;time = 1
;under = -1

;[State 821, 4]
;type = playsnd
;trigger1 = AnimElem = 2
;value = S0,51

;[State 821, 4]
;type = velset
;trigger1 = time >= 5
;y = -8

;[State 240, 4]
;type = Explod
;triggerall = movehit
;trigger1 = animelem = 2, = 1
;trigger2 = animelem = 2, = 2
;trigger3 = animelem = 2, = 3
;trigger4 = animelem = 2, = 5
;trigger5 = animelem = 2, = 7
;anim = 510
;postype = p2
;pos = 0,-48
;sprpriority = 4

;[State 240, 4]
;type = Explod
;triggerall = movehit
;trigger1 = animelem = 2, = 1
;trigger2 = animelem = 2, = 2
;trigger3 = animelem = 2, = 3
;trigger4 = animelem = 2, = 5
;trigger5 = animelem = 2, = 7
;anim = 509
;postype = p2
;pos = 0,-48
;sprpriority = 4

;[State 1034, 2]
;type = hitdef
;trigger1 = animelem = 2, = 1
;trigger2 = animelem = 2, = 2
;trigger3 = animelem = 2, = 3
;trigger4 = animelem = 2, = 5
;trigger5 = animelem = 2, = 7
;attr = S, SA
;damage   = 34
;animtype = Up
;pausetime = 2,6
;hitflag = MAF
;guardflag = M
;sparkno = -1;2
;guard.sparkno = 42
;sparkxy = -1;90,-65
;hitsound = S0,14
;guardsound = S0,10
;pausetime = 0,10
;ground.type = High
;ground.slidetime = 0
;ground.hittime  = 0
;guard.hittime = 0
;ground.velocity = 0,-11
;air.velocity = 0,-11
;fall = 1
;fall.recover = 0

;[State 821, 4]
;type = targetstate
;trigger1 = time = 0
;value = 2025

;[State 820, 1]
;type = destroyself
;trigger1 = time = 80

; Unused old code  -------------------------------------------------------------
;[Statedef 2023]
;type    = S
;movetype= H
;physics = S
;velset = 0,0

;[State 820, 1]
;type = ChangeAnim2
;trigger1 = time = 0
;value = 2026

; Unused old code  -------------------------------------------------------------
;[Statedef 2024]
;type    = S
;movetype= H
;physics = S
;velset = 0,0

;[State 820, 1]
;type = ChangeAnim2
;trigger1 = time = 0
;value = 2012

; Unused old code  -------------------------------------------------------------
;[Statedef 2025]
;type    = S
;movetype= H
;physics = S
;velset = 0,0

;[State 820, 1]
;type = ChangeAnim2
;trigger1 = time = 0
;value = 1099

;-------------------------------------------------------------------------------
; HYPER MOVE: Hakura Messei Han (DM)
[Statedef 2100]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2117
sprpriority = 2

[State 2100, NotHitBy]; ---- Hakura Messei Han completely invincible
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2100, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2100, PalFX]; ---- SuperCancel PalFX
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2100, PlaySnd]; ---- cloak release sound
type = PlaySnd
trigger1 = time = 0
value = S0,36

[State 2100, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = time = 30
value = S0,73
channel = 0
volume = 255

[State 2100, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 2100, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,1
invertall = 0
color = 256
;ignorehitpause = 0
;persistent = 1

[State 2100, EnvColor]
type = null;EnvColor
trigger1 = Time >= 30
value = 0,0,0
under = -1

[State 2100, AssertSpecial]
type = null;AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

[state 2100, PowerAdd]; ---- SuperCancel poweradd
type = PowerAdd
trigger1 = prevstateno = [1000,1062]
value = -1000
persistent = 0
ignorehitpause = 1

[state 2100, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel Helper"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 2100, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
;sound =
;pos =
movetime = 30
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -1000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

;---------------------- old kof2001 DM spark
;[State 240, 4]
;type = Explod
;trigger1 = time = 0
;anim = 512
;postype = p1
;pos = 0,0
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 10,-110
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 2100, PlaySnd]; ---- XI_supermove_sound1
type = PlaySnd
trigger1 = time = 0
value = S0,65

[State 2100, PlaySnd]; ---- XI_supermove_sound2
type = PlaySnd
trigger1 = time = 18
value = S0,66

[State 2100, Explod]; ---- XI_supermove_lv1
type = Explod
trigger1 = time = 0
anim = 12010
sprpriority = -1
postype = p1
pos = 10,-110
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 2100, Explod]; ---- XI_supermove_lv1_foreground
type = Explod
trigger1 = Time = 10
anim = 12011
sprpriority = 3
postype = p1
pos = 10,-110
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 2100, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5
time = 0
freq = 120
ampl = 6
phase = 120
;ignorehitpause =
;persistent =

[State 2100, PlaySnd]; ---- hit ground sound
type = PlaySnd
trigger1 = AnimElem = 6
value = S0,13

[State 2100, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 515
postype = p1
pos = 24,0
sprpriority = 6

[State 2100, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 516
postype = p1
pos = 24,0
sprpriority = -2

[State 2100, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 2101

; HYPER MOVE: Hakura Messei Han progressing ------------------------------------
[Statedef 2101]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2118
sprpriority = 2

[State 2101, NotHitBy]; ---- Hakura Messei Han completely invincible
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

[State 2101, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2101, PlaySnd]; ---- Hakura sound
type = PlaySnd
trigger1 = time >= 0
value = S0,57
channel = 3
persistent = 0

[State 2101, Projectile]; ---- Projectile nullifier
type = Projectile
projID = 1000
trigger1 = time%2=0
hitflag = P
guardflag = N
attr = S, SP
projremove = 0
Projremovetime = 2
projhits = 0
projremanim = -1
projpriority = 9999999
projanim = 2108
offset = 0,0
velocity = 0,0

;[State 4100,1]
;type = Helper
;trigger1 = time = 0
;ID = 2100
;name = "kougeki"
;postype = p1
;pos = 0,0
;sprpriority = 2
;stateno = 2103
;helpertype = normal
;keyctrl = 0
;persistent = 0
;ignorehitpause = 1

;-------------------------
[state 2101, Helper]; ---- Hakura Reversaldef Helper
type = Helper
Trigger1 = !numhelper(2107)
helpertype = normal
name="Hakura Reversaldef Helper"
stateno = 2107
ID= 2107
pos = 0,0
postype = p1
keyctrl = 0
facing = 1
supermovetime=99999
pausemovetime=99999
ownpal = 1
;-------------------------

[State 4100,1]; ---- Hakura center blackhole helper
type = Helper
trigger1 = time = 0
ID = 2106
name = "Hakura center blackhole helper"
postype = p1
pos = 27,-133 ;-8,-110
sprpriority = -2
stateno = 2106
helpertype = normal
keyctrl = 0
ownpal = 1

[State 2101, Explod]; ---- hakura center blackhole light reflect
type = Explod
trigger1 = time = 0
anim = 2120
ID = 2120
postype = p1
pos = 27,-133 ;-8,-110
sprpriority = -1
removetime = 98
bindtime = -1
ownpal = 1

[State 4100,1]; ---- Hakura center hitdef helper
type = Helper
trigger1 = time = 0
ID = 2104
name = "Hakura center hitdef helper"
postype = p1
pos = 27,-133 ;-8,-108
sprpriority = 2
stateno = 2104
helpertype = normal
keyctrl = 0
ownpal = 1

[State 2101, Helper]; ---- Hakura hitdef helper
type = Helper
trigger1 = AnimElem = 1
ID = 21050
name = "Hakura hitdef helper 0"
postype = p1
pos = 0,0
sprpriority = 2
stateno = 2105
helpertype = normal
keyctrl = 0
ownpal = 1

[State 2101, Helper]; ---- Hakura hitdef helper
type = Helper
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
trigger4 = animelem = 17
trigger5 = animelem = 21
trigger6 = animelem = 25
;trigger2 = animelem = 9
;trigger3 = animelem = 17
;trigger4 = animelem = 25
;trigger5 = animelem = 33
;trigger6 = animelem = 41
;trigger7 = animelem = 49
;trigger8 = animelem = 57
ID = 21051
name = "Hakura hitdef helper 1"
postype = p1
pos = 0,0
sprpriority = 2
stateno = 2105
helpertype = normal
keyctrl = 0
ownpal = 1

[State 2101, Helper]; ---- Hakura hitdef helper
type = Helper
trigger1 = animelem = 29
;trigger2 = animelem = 9
;trigger3 = animelem = 17
;trigger4 = animelem = 25
;trigger5 = animelem = 33
;trigger6 = animelem = 41
;trigger7 = animelem = 49
;trigger8 = animelem = 57
ID = 21052
name = "Hakura hitdef helper 2"
postype = p1
pos = 0,0
sprpriority = 2
stateno = 2105
helpertype = normal
keyctrl = 0
ownpal = 1

[State 2101, Explod]; ---- hakura center
type = Explod
trigger1 = time = 0
anim = 2110
ID = 2101
postype = p1
pos = 27,-133 ;-8,-110
bindtime = -1
sprpriority = -1
removetime = 120
bindtime = -1
ownpal = 1

[State 2101, Explod]; ---- hakura ball center
type = Explod
trigger1 = time = 0
anim = 2115
ID = 2115
postype = p1
pos = 27,-133 ;-8,-110
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1

[State 2101, Explod]; ---- hakura ball1
type = Explod
trigger1 = time = 0
anim = 2105
ID = 2101
postype = p1
pos = 27,-133 ;-8,-110
bindtime = -1
sprpriority = 3
removetime = 120
ownpal = 1

[State 2101, Explod]; ---- hakura ball2
type = Explod
trigger1 = time = 0
anim = 2106
ID = 2101
postype = p1
pos = 27,-133 ;-8,-110
bindtime = -1
sprpriority = 3
removetime = 120
ownpal = 1

[State 2101, Explod]; ---- hakura ball3
type = Explod
trigger1 = time = 0
anim = 2107
ID = 2101
postype = p1
pos = 27,-133 ;-8,-110
bindtime = -1
sprpriority = 3
removetime = 120
ownpal = 1

[State 2101, RemoveExplod]
type = RemoveExplod
trigger1 = AnimTime = 0
ID = 2101

[State 2101, VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 2101, VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 2101, VarSet]
type = VarSet
trigger1 = 1
var(14) = 0
persistent = 0

[State 2101, VarSet]
type = VarSet
trigger1 = EnemyNear(floor(fvar(36))),movetype = H
trigger1 = EnemyNear(floor(fvar(36))),stateno != [120,159]
trigger1 = EnemyNear(floor(fvar(36))),statetype != L
trigger2 = ifelse((NumEnemy=2 && EnemyNear(0),alive && EnemyNear(1),alive),(EnemyNear(floor(fvar(36))+1),movetype = H),0)
trigger2 = ifelse((NumEnemy=2 && EnemyNear(0),alive && EnemyNear(1),alive),(EnemyNear(floor(fvar(36))+1),stateno != [120,159]),0)
var(14) = 1

[State 2101, Pause]; ---- Hakura hit pause
type = Pause
triggerall = var(14) = 1
trigger1 = (GameTime%2) = 1
time = 1
movetime = 0

[State 2101, Pause]; ---- Hakura center hit pause
type = Pause
triggerall = var(14) = 2
trigger1 = (GameTime%3) = 1
time = 1
movetime = 0

;[State 2101, EnvColor]
;type = EnvColor
;trigger1 = 1
;time = 5
;value = 0,0,0
;under = 1
;ignorehitpause = 1
;pausemovetime = 99999

[State 2101, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,1
invertall = 0
color = 256
ignorehitpause = 1
pausemovetime = 99999
;persistent = 1

[State 2101, VarSet]; ---- var(1) palfx changing
type = VarSet
trigger1 = 1
var(1) = -100
persistent = 0

[State 2101, VarAdd]; ---- var(1) palfx changing
type = VarAdd
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
trigger2 = AnimElem = 9, >= 0
trigger2 = AnimElem = 13, < 0
trigger3 = AnimElem = 17, >= 0
trigger3 = AnimElem = 21, < 0
trigger4 = AnimElem = 25, >= 0
trigger4 = AnimElem = 29, < 0
var(1) = 10

[State 2101, VarAdd]; ---- var(1) palfx changing
type = VarAdd
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 9, < 0
trigger2 = AnimElem = 13, >= 0
trigger2 = AnimElem = 17, < 0
trigger3 = AnimElem = 21, >= 0
trigger3 = AnimElem = 25, < 0
trigger4 = AnimElem = 29, >= 0
trigger4 = AnimElem = 31, < 2
var(1) = -10

[State 2101, VarSet]; ---- var(1) palfx changing
type = VarSet
trigger1 = AnimElem = 31, >= 2
var(1) = 0
persistent = 0

[State 2101, PalFX]
type = PalFX
trigger1 = 1
time = 3
add = var(1),var(1),var(1)
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1

[State 2101, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 2102

;--------------------------------------------------------
;[Statedef 21011];reversaldef P2StateNo for hakura
;type    = A
;movetype= H
;physics = N
;anim = 5030
;velset = -0.5,-2
;ctrl = 0

;[State 810, 2]
;type = HitBy
;trigger1 = Time >= 0
;value = SCA, AA,AT,AP
;time = 99999

;[State 810, 2]
;type = DestroySelf
;trigger1 = Time >= 0

;[State 821, 5]
;type = SelfState
;triggerall = pos y > 0
;trigger1 = time >= 10
;value = 5030

;[State 821, 5]
;type = SelfState
;triggerall = pos y <= 0
;trigger1 = animtime = 0
;trigger2 = time >= 35
;value = 5070

; HYPER MOVE: Hakura Messei Han end --------------------------------------------
[Statedef 2102]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2119
sprpriority = 2

[State 2102, NotHitBy]; ---- Hakura Messei Han completely invincible
type = NotHitBy
trigger1 = animelem = 1, >= 0
trigger1 = animelem = 10, < 0
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2102, Pause]
type = Pause
triggerall = animelem = 12, < 0
triggerall = var(14) = 1
trigger1 = (GameTime%2) = 1
time = 1
movetime = 0

[State 2102, Pause]
type = Pause
triggerall = animelem = 12, < 0
triggerall = var(14) = 2
trigger1 = (GameTime%3) = 1
time = 1
movetime = 0

[State 2102, Explod]; ---- Hakura center anim end
type = Explod
trigger1 = time = 0
anim = 2104
postype = p1
pos = 27,-133 ;-8,-110
bindtime = 1
sprpriority = -1
ownpal = 1
removeongethit = 1

[State 2102, EnvColor]
type = null;EnvColor
trigger1 = 1
time = 2
value = 0,0,0
under = 1
ignorehitpause = 1

[State 2102, VarSet]; ---- var(1) BGpalfx changing
type = VarSet
trigger1 = 1
var(1) = 100
persistent = 0

[State 2101 VarAdd]; ---- var(1) BGpalfx changing
type = VarAdd
trigger1 = var(1) < 256
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 12, <= 0
var(1) = 8

[State 2102, BGPalFX]
type = BGPalFX
trigger1 = var(1) < 256
time = 2
add = 0,0,0
mul = var(1),var(1),var(1)
sinadd = 0,0,0,1
invertall = 0
color = 256
ignorehitpause = 1
pausemovetime = 99999
;persistent = 1

[State 2102, PalFX]
type = PalFX
trigger1 = time <= 30
time = 3
add = time-30,time-30,time-30
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1

[State 2102, StopSnd]; ---- stop Hakura sound
type = StopSnd
trigger1 = Animtime = 0
channel = 3

[State 2102, Unfolding of the Ture Universe]
type = ChangeState
value = 2800
;**************
TriggerAll = var(59)
TriggerAll = RoundState = 2
TriggerAll= !IsHelper(97864) ; ---- Not Shadow Clone Igniz
;TriggerAll = fvar(37) = 0
;**************
TriggerAll = power >= 3000
TriggerAll = statetype != A
;TriggerAll = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3) || stateno = 100
;**************
;TriggerAll = P2StateType = L
TriggerAll = EnemyNear(floor(fvar(36))),ctrl = 0
;TriggerAll = EnemyNear(floor(fvar(36))),AnimTime <= -1
;**************
TriggerAll = EnemyNear(floor(fvar(36))),Time >= var(55)
TriggerAll = Random<=var(59)*85
;**************
TriggerAll = !Numpartner
;**************
;Trigger1 = EnemyNear(floor(fvar(36))),stateno = [5100,5119]
trigger1 = animTime = 0
Trigger1 = P2moveType = H

[State 2101, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; Hakura Messei Han center anim end --------------------------------------------
;[Statedef 2103]
;type    = S
;movetype= A
;physics = S
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 2109
;sprpriority = 2

;[State 240, 4]
;type = envcolor
;trigger1 = 1
;time = 5
;value = 0,0,0
;under = -1
;ignorehitpause = 1

;[State 240, 4]
;type = bindtoroot
;trigger1 = 1
;trigger1 = animelem = 16 <= 15
;time = 2
;ignorehitpause = 1

;[State 240, 4]
;type = bindtoroot
;trigger1 = 1
;trigger1 = animelem = 17 >= 0
;pos = -8,-110
;time = 2
;ignorehitpause = 1

;[State 821, 4]
;type = destroyself
;trigger1 = animtime = 0

; Hakura Messei Han hakura hitdef center helper --------------------------------
[Statedef 2104]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2103
sprpriority = -2

[State 2104, HitOverRide]; ---- self hitoverride
type = Hitoverride
trigger1 = 1
slot = 3
attr = SCA, AA,AT,AP
stateno = 2705
ignorehitpause = 1

[State 2104, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 2104, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2104, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2104, HitDef]
type = HitDef
trigger1 = Animelem = 2
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(20*root,fvar(3)),floor(2*root,fvar(3))
pausetime = 0,14
guard.pausetime = 0,20
sparkno = 2
guard.sparkno = 40
sparkxy = 0,-55 + var(11)
hitsound   = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 5    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.44    ;y acceleration
ground.velocity = -5,-5
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -5,-5    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = -2
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 0
;palfx.mul = 0,0,0
;palfx.add = 0,0,0
envshake.time = 5
envshake.freq = 60
envshake.ampl = 5
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause =
;persistent =

[State 2104, BindToParent]
type = BindToParent
trigger1 = 1
pos = 27,-133 ;-8,-110
time = 2
ignorehitpause = 1

[State 2104, ParentVarSet]; ---- parent,var(14) hakura center hit success judge
type = ParentVarSet
trigger1 = movehit
var(14) = 2
ignorehitpause = 1

[State 2104, VarSet]; ---- var(11) set spark pos Y
type = VarSet
trigger1 = 1
var(11) = 0
persistent = 0

[State 2104, VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype = C
trigger1 = var(11) != 30
var(11) = 30

[State 2104, VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype != C
trigger1 = var(11) != -150 - (-150 - floor(p2bodydist y))
var(11) = -150 - (-150 - floor(p2bodydist y))

[State 2104, DestroySelf]
type = DestroySelf
trigger1 = parent,stateno = 2102
trigger2 = MoveReversed
ignorehitpause = 1

; Hakura Messei Han hakura hitdef helper ---------------------------------------
[Statedef 2105]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2114
sprpriority = -2

[State 2105, HitOverRide]
type = HitOverRide
trigger1 = 1
slot = 5
attr = SCA, AA,AT,AP
stateno = 2705
ignorehitpause = 1

[State 2105, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999
persistent = 0

[State 2105, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2105, HitDef]
type = HitDef
triggerall = Animelem = 1
;trigger1 = Parent,Animelem = 1
trigger1 = Ishelper(21050)
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(99*root,fvar(3)),floor(10*root,fvar(3))
pausetime = 0,10
guard.pausetime = 0,16
sparkno = 2
guard.sparkno = 40
sparkxy = -15,-85 + parent,var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.44    ;y acceleration
ground.velocity = -19,-5.5
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -19,-5    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = -2
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 25
palfx.add = 0,0,0
palfx.mul = 175,175,175
palfx.sinadd = 150,150,150,5
envshake.time = 5
envshake.ampl = 4
envshake.freq = 60
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause =
;persistent =


[State 2105, HitDef]
type = HitDef
triggerall = Animelem = 1
trigger1 = Ishelper(21051)
;trigger1 = Parent,Animelem = 5
;trigger2 = Parent,Animelem = 9
;trigger3 = Parent,Animelem = 13
;trigger4 = Parent,Animelem = 17
;trigger5 = Parent,Animelem = 21
;trigger6 = Parent,Animelem = 25
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(13*root,fvar(3)),floor(1*root,fvar(3))
pausetime = 0,10
guard.pausetime = 0,16
sparkno = 2
guard.sparkno = 40
sparkxy = -15,-85 + parent,var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.44    ;y acceleration
ground.velocity = -11,-3
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -11,-3    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = -2
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 25
palfx.add = 0,0,0
palfx.mul = 175,175,175
palfx.sinadd = 150,150,150,5
envshake.time = 5
envshake.ampl = 4
envshake.freq = 60
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause =
;persistent =


[State 2105, HitDef]
type = HitDef
triggerall = Animelem = 1
trigger1 = Ishelper(21052)
;trigger1 = Parent,Animelem = 29
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(13*root,fvar(3)),floor(1*root,fvar(3))
pausetime = 0,10
guard.pausetime = 0,16
sparkno = 2
guard.sparkno = 40
sparkxy = -15,-85 + parent,var(11)
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
;yaccel = 0.5    ;y acceleration
ground.velocity = -6,-7
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -6,-7    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = -2
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 30
palfx.add = 0,0,0
palfx.mul = 175,175,175
palfx.sinadd = 150,150,150,5
envshake.time = 5
envshake.ampl = 4
envshake.freq = 60
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause =
;persistent =

[State 2105, EnvColor]
type = EnvColor
trigger1 = Movehit
time = 1
value = 150,150,150
under = 1
ignorehitpause = 1
persistent = 0

[State 2105, DestroySelf]
type = DestroySelf
trigger1 = Time >= 16
trigger2 = MoveReversed
ignorehitpause = 1

; Hakura Messei Han hakura center blackhole helper -----------------------------
[Statedef 2106]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2116
sprpriority = -2

[State 2106, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 2106, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2106, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2106, BindToParent]
type = BindToParent
trigger1 = 1
pos = 27,-133 ;-8,-108
time = 2
ignorehitpause = 1

[State 2106, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1
;persistent =

[State 2106, VarSet]; ---- helper,fvar(1) Scale changing
type = VarSet
trigger1 = 1
fvar(1) = 1
persistent = 0

[State 2106 VarAdd]; ---- helper,fvar(1) scale changing
type = VarAdd
;trigger1 = Parent,stateno = 2102
trigger1 = time >= 97
trigger1 = fvar(1) > 0
fvar(1) = -0.03

[State 2106, AngleDraw]
type = AngleDraw
;trigger1 = Parent,stateno = 2102
trigger1 = time >= 97
trigger1 = fvar(1) > 0
scale = fvar(1),fvar(1)
ignorehitpause = 1
;persistent =

[State 2104, DestroySelf]
type = DestroySelf
trigger1 = Parent,movetype = H
trigger2 = fvar(1) <= 0
trigger3 = Parent,stateno = 2102
trigger3 = animtime = 0

; Hakura reversaldef helper ----------------------------------------------------
[statedef 2107]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = -1
anim = 2604
ctrl = 0

[State 2107, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2107, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2107, HitOverRide]
type = HitOverRide
trigger1 = 1
time = -1
slot = 1
attr = SCA,AA,AT,AP
stateno = 2107
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

;----------------------
[State 2107, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NP,SP,HP
hitflag = HLMAFDP
numhits = 0
sparkno = -1
priority = 99999, hit
p2stateno = 1026
ignorehitpause = 1
;----------------------

[State 2107, DestroySelf]
type = DestroySelf
trigger1 = Time >= 96
trigger2 = parent,stateno != 2101

;-------------------------------------------------------------------------------
; unused old Hyper Move: Combination Move
;[Statedef 2200]
;type    = S
;movetype= A
;physics = S
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 2204
;sprpriority = 2

;[State 2200, PalFX]
;type = PalFX
;trigger1 = Time < 16 && Time % 2
;trigger1 = prevstateno = [1000,1062]
;time = 1
;add = 255,255,255
;ignorehitpause = 1

;[State 2200, NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA
;ignorehitpause = 1
;supermovetime = 99999
;pausemovetime = 99999

;[State 2200, EnvColor]
;type = EnvColor
;trigger1 = time = 0
;value = 255,255,255
;time = 2
;under = 1
;ignorehitpause = 1

;[State 2200, AssertSpecial]
;type = AssertSpecial
;trigger1 = Time = [0,30]
;flag = NoFG
;flag2 = NoBG
;ignorehitpause = 1

;[State 1070, SuperPause]
;type = SuperPause
;trigger1 = time = 0
;time = 30
;anim = -1
;sound = S0,39
;;pos =
;movetime = 30
;;darken = 1
;p2defmul = 1
;poweradd = -1000
;unhittable = 1
;;endcmdbuftime = (winmugen only)
;;pausebg =  (winmugen only)
;ignorehitpause = 1
;;persistent =

;[State 240, 4]
;type = Explod
;trigger1 = time = 1
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1

;[State 800, 1]
;type = reversalDef
;triggerall = P2MoveType = A
;triggerall = enemynear,stateno != [120,153]
;Trigger1 = animelem = 1
;Trigger2 = animelem = 2
;animtype  = Up
;reversal.attr = SCA, AA,AT
;hitflag = M
;guardflag = N
;priority = 1, Hit
;sparkno = -1
;numhits = 0
;sprpriority = 1
;p2facing = 1
;p1stateno = 2201
;p2stateno = 2202
;guard.dist = 0

;[State 800, 1]
;type = HitDef
;triggerall = P2MoveType != A
;triggerall = enemynear,stateno != [120,153]
;Trigger1 = animelem = 1
;Trigger2 = animelem = 2
;animtype  = Up
;attr = S, HT
;hitflag = M
;guardflag = N
;priority = 1, Miss
;sparkno = -1
;numhits = 0
;sprpriority = 1
;p2facing = 1
;p1stateno = 2201
;p2stateno = 2202
;guard.dist = 0

;[State 3005, 1]
;type = BGPalFX
;trigger1 = Time >= 25
;time = 20
;invertall = 1
;ignorehitpause = 1

;[State 195, 2]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

; unused old Combination Move --------------------------------------------------
;[Statedef 2201]
;type    = S
;movetype= A
;physics = S
;poweradd = 0
;ctrl = 0
;velset = 0,0
;anim = 2205
;sprpriority = 2

;[State 701, 1]
;type = Width
;trigger1 = 1
;edge = 0,30

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 4
;trigger1 = anim = 2205
;anim = 511
;postype = p1
;pos = 45,-78
;sprpriority = 4

;[State 701, 1]
;type = playsnd
;trigger1 = animelem = 4
;trigger1 = anim = 2205
;value = S0,12

;[State 240, 4]
;type = envcolor
;trigger1 = 1
;time = 2
;value = 0,0,0
;under = -1
;ignorehitpause = 1

;[state 190]
;type = superpause
;trigger1 = time = 1
;time = 30
;movetime = 30
;anim = -1
;darken = 0
;unhittable = 1
;sound = S0,39
;p2defmul = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 1
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1

;[State 810, Bind 1]
;type = TargetBind
;trigger1 = AnimElem = 1, >= 0
;trigger1 = AnimElem = 7, <= 0
;trigger1 = anim = 2205
;ignorehitpause = 1
;pos = 40, 0

;[State 701, 1]
;type = velset
;trigger1 = frontedgedist <= 160
;trigger1 = AnimElem = 1, >= 0
;x = -2

;[State 701, 1]
;type = velset
;trigger1 = frontedgedist >= 160
;trigger1 = AnimElem = 1, >= 0
;x = 0

;[State 200, 1]
;type = HitDef
;trigger1 = AnimElem = 7
;attr = S, HT
;damage = 50, 0
;animtype = Light
;guardflag = MA
;hitflag = MAF
;priority = 3, Hit
;pausetime = 4, 10
;sparkno = 0
;guard.sparkno = 40
;sparkxy = -10, -76
;hitsound = S0,6
;guardsound = S0,10
;ground.type = High
;ground.slidetime = 5
;ground.hittime  = 10
;ground.velocity = -2
;airguard.velocity = 0
;kill = 0

;[State 200, 1]
;type = HitDef
;trigger1 = AnimElem = 10
;attr = S, HT
;damage = 50, 0
;animtype = Light
;guardflag = MA
;hitflag = MAF
;priority = 3, Hit
;pausetime = 4, 3
;sparkno = 0
;guard.sparkno = 40
;sparkxy = -10, -56
;hitsound = S0,9
;guardsound = S0,10
;ground.type = High
;ground.slidetime = 5
;;ground.hittime  = 10
;ground.velocity = 0
;airguard.velocity = 0
;air.type = High
;p2stateno = 2203
;kill = 0

;[State 4100,1];w
;type = Helper
;trigger1 = AnimElem = 13
;trigger1 = anim = 2205
;ID = 1
;name = "basara"
;postype = p2
;pos = -60,0
;sprpriority = 2
;stateno = 2210
;helpertype = normal
;keyctrl = 0
;ignorehitpause = 1
;ownpal = 1

;[State 195, 2]
;type = varset
;trigger1 = time = 50
;var(30) = 1

;[State 195, 2]
;type = varset
;trigger1 = time = 50
;var(31) = 1

;[State 195, 2]
;type = playsnd
;trigger1 = time = 240
;value = S0,56
;persistent = 0

;[State 195, 2]
;type = Changeanim
;trigger1 = time = 230
;value = 181
;persistent = 0

;[State 4100,1]
;type = Helper
;trigger1 = time = 275
;name = "krizalid"
;postype = back
;pos = -20,0
;sprpriority = 2
;stateno = 2205
;helpertype = normal
;keyctrl = 0
;persistent = 0
;ignorehitpause = 1

;[State 195, 2]
;type = ChangeState
;trigger1 = numhelper(2209) = 1
;value = 2230

; Combination Move P2STATENO start ---------------------------------------------
[Statedef 2202]
type    = A
movetype= H
physics = N
velset = 0,0
;anim = 811
sprpriority = -1

[State 2202, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 2202, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2202, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2202, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 2207

[State 2202, SelfState]; ---- DEBUG
type = SelfState
trigger1 = time >= 600
value = 5000
;ctrl =
ignorehitpause = 1
persistent = 0


; unused old Combination Move --------------------------------------------------
;[Statedef 2203]
;type    = S
;movetype= H
;physics = S
;velset = 0,0
;sprpriority = -1

;[State 9000, 1]
;type = ScreenBound
;trigger1 = 1
;movecamera = 1,0

;[State 5050, 1]
;type = velset
;trigger1 = time = 0
;x = -14

;[State 5050, 1]
;type = ChangeAnim2
;trigger1 = time = 0
;value = 2207

; unused old Combination Move --------------------------------------------------
;[Statedef 2210]
;type    = S
;movetype= A
;physics = S
;velset = 0,0
;anim = 2206
;sprpriority = -2

;[State 840,0]
;type = palfx
;trigger1 = 1
;time = 2
;add = var(21),var(21),var(21)

;[state 190]
;type = varset
;trigger1 = time = 0
;var(21) = -250

;[state 190]
;type = varadd
;trigger1 = 1;time >= 70
;trigger1 = var(21) <= 0
;var(21) = 7

;[State 191, 1]
;type = playsnd
;trigger1 = AnimElem = 13
;value = S0,12

;[State 821, 4]
;type = targetbind
;trigger1 = AnimElem = 13, = 1
;postype = p1
;pos = 40,-120

;[State 240, 4]
;type = Explod
;trigger1 = AnimElem = 13
;anim = 511
;postype = p1
;pos = 40,-110
;sprpriority = 4

;[State 191, 1]
;type = playsnd
;trigger1 = AnimElem = 3
;value = S0,51

;[State 200, 1]
;type = HitDef
;trigger1 = AnimElem = 13
;trigger1 = p2movetype = H
;attr = S, HT
;damage = 300,0
;animtype = Light
;guardflag = MA
;hitflag = MAF
;;priority = 3, Hit
;pausetime = 0, 0
;sparkno = -1;0
;guard.sparkno = 40
;;sparkxy = -10, -76
;;hitsound = S0,12
;numhits = 0
;guardsound = S0,10
;ground.type = High
;ground.slidetime = 5
;ground.hittime  = 0
;ground.velocity = 0
;airguard.velocity = 0
;air.type = High
;p2stateno = 2204
;kill = 0

;[State 240, 4]
;type = null;Explod
;trigger1 = time = 130
;anim = 2201
;postype = p1
;pos = 150,0
;sprpriority = 4
;removetime = 200
;facing = -1

;[State 821, 4]
;type = targetstate
;trigger1 = numhelper(2208) = 1
;value = 2211
;persistent = 0

;[State 821, 4]
;type = targetstate
;trigger1 = numhelper(2209) = 1
;value = 2212
;persistent = 0

;[State 5050, 1]
;type = targetstate
;trigger1 = numhelper(2210) = 1
;value = 2220
;persistent = 0

;[State 107, 2]
;type = playsnd
;trigger1 = numhelper(2209) = 1
;value = S0,52
;ignorehitpause = 1
;persistent = 0

;[State 5050, 1]
;type = Changestate
;trigger1 = numhelper(2210) = 1
;value = 2221
;persistent = 0

; unused old Combination Move --------------------------------------------------
[Statedef 2211]
type    = A
movetype= H
velset = 0,0
sprpriority = -1

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 5050, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 2210

; unused old Combination Move --------------------------------------------------
[Statedef 2212]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 5050, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 2209

; unused old Combination Move --------------------------------------------------
[Statedef 2204]
type    = A
movetype= H
physics = N
velset = 0,0
;anim = 811
sprpriority = -1

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 5050, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 2209

; unused old Combination Move --------------------------------------------------
[Statedef 2205]
type    = S
physics = N
movetype = I
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2200
sprpriority = 5

[State 1051, 2]
type = velset
trigger1 = 1
x = 5

[State 810, 1]
type = PlayerPush
trigger1 = 1
value = 1

[State 1051, 2]
type = ChangeState
trigger1 = p2bodydist x <= 120
value = 2206

; unused old Combination Move --------------------------------------------------
[Statedef 2206]
type    = S
physics = N
movetype = I
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2201
sprpriority = 5

[State 810, 1]
type = PlayerPush
trigger1 = 1
value = 1

[State 191, 1]
type = parentvaradd
trigger1 = animelem = 3
var(30) = 1
;persistent = 0

[State 191, 1]
type = varrandom
trigger1 = 1
v = 4
range = 2,3 ;502,503

[State 191, 1]
type = playsnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
value = S0,7

[State 191, 1]
type = playsnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 18
trigger4 = AnimElem = 28
value = S0,6

[State 191, 1]
type = playsnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 25
value = S0,8

[State 821, 4]
type = hitadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
trigger4 = AnimElem = 4
trigger5 = AnimElem = 10
trigger6 = AnimElem = 18
trigger7 = AnimElem = 28
trigger8 = AnimElem = 6
trigger9 = AnimElem = 13
trigger10 = AnimElem = 25
value = 1

[State 821, 4]
type = envcolor
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
trigger4 = AnimElem = 4
trigger5 = AnimElem = 10
trigger6 = AnimElem = 18
trigger7 = AnimElem = 28
trigger8 = AnimElem = 6
trigger9 = AnimElem = 13
trigger10 = AnimElem = 25
value = 255,255,255
under = -1
time = 1

[State 240, 4]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
anim = F0+var(4)
postype = p1
pos = 110,-28
random = 30,0
sprpriority = 4

[State 240, 4]
type = Explod
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 18
trigger4 = AnimElem = 28
anim = F0+var(4)
postype = p1
pos = 110,-68
random = 30,0
sprpriority = 4

[State 240, 4]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 25
anim = F0+var(4)
postype = p1
pos = 110,-98
random = 30,0
sprpriority = 4

[State 4100,1]
type = Helper
trigger1 = animelem = 2
name = "mu"
ID = 2208
postype = back
pos = 0,0
sprpriority = 2
stateno = 2208
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 4100,1]
type = Helper
trigger1 = time = 130
name = "mu"
ID = 2209
postype = back
pos = 0,0
sprpriority = 2
stateno = 2208
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1051, 2]
type = ChangeState
trigger1 = time = 130
value = 2207

; unused old Combination Move --------------------------------------------------
[Statedef 2207]
type    = S
physics = N
movetype = I
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2202
sprpriority = 4

[State 107, 2]
type = playsnd
trigger1 = animelem = 1
value = S0,62

[State 821, 4]
type = posadd
trigger1 = AnimElem = 12
x = 20

[State 821, 4]
type = hitadd
trigger1 = AnimElem = 12
value = 3

[State 240, 4]
type = Explod
trigger1 = AnimElem = 12
anim = F3 ;503
postype = p1
pos = 95,-60
sprpriority = 8
pausemovetime = 999999

[State 240, 4]
type = Explod
trigger1 = AnimElem = 12
anim = F3 ;503
postype = p2
pos = 0,-20
sprpriority = 8
pausemovetime = 999999

[State 4100,1]
type = Helper
trigger1 = animelem = 12
name = "mu"
ID = 2210
postype = back
pos = 0,0
sprpriority = 2
stateno = 2208
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 810, 1]
type = PlayerPush
trigger1 = 1
value = 1

[State 240, 4]
type = Explod
trigger1 = AnimElem = 11
anim = 2211
postype = p1
pos = 0,0
sprpriority = 5

[State 240, 4]
type = envshake
trigger1 = AnimElem = 12
time = 25

[State 240, 4]
type = envcolor
trigger1 = AnimElem = 12, = 0
value = 255,0,0
time = 4
under = -1
ignorehitpause = 1

[State 1051, 2]
type = ChangeState
trigger1 = animtime = 0
value = 2222

; unused old Combination Move --------------------------------------------------
[Statedef 2208]
type    = S
physics = N
movetype = I
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2029
sprpriority = 4

[State 810, 1]
type = PlayerPush
trigger1 = 1
value = 1

[State 810, 1]
type = destroyself
trigger1 = p2stateno = 2220

; unused old Combination Move --------------------------------------------------
[Statedef 2220]
type    = A
movetype= H
physics = N
velset = 0,0

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 1281, 2]
type = PalFX
trigger1 = Time >= 30
trigger1 = 1
time = 50
add = 80,-44,-124
sinadd = 30,30,0,10
color = 0
invertall = 1
ignorehitpause = 1

[State 9020, 1]
type = ChangeAnim2
trigger1 = Time  = 0
value = 2212

[State 9020, 1]
type = posadd
trigger1 = Time = 0
y = 90
x = 10

[State 9020, 1]
type = velset
trigger1 = Time = 30
y = -15

[State 9020, 1]
type = veladd
trigger1 = Time > 33
y = .2

[State 9020, 1]
type = lifeadd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = -160
absolute = 1

[State 9020, 3]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; unused old Combination Move --------------------------------------------------
[Statedef 2221]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 2213
sprpriority = -2

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
;mul = 200,200,200
time = 2
add = -100,-100,-100
color = 0
invertall = 1
ignorehitpause = 1

[State 107, 2]
type = playsnd
trigger1 = time = 40
value = S0,49
ignorehitpause = 1

[State 191, 1]
type = envcolor
trigger1 = time = 40
trigger2 = time = 45
trigger3 = time = 50
trigger4 = time = 55
trigger5 = time = 60
value = 0,0,255
time = 2
under = -1
ignorehitpause = 1

[State 107, 2]
type = playsnd
trigger1 = time = 80
value = S0,59

[State 240, 4]
type = Explod
trigger1 = time = 80
anim = 2216
postype = p1
pos = 40,-60
sprpriority = 7

[State 820, 2]
type = targetlifeadd
trigger1 = Time = 6
value = -350
ignorehitpause = 1
absolute = 1

[State 820, 2]
type = Pause
trigger1 = Time = 5
time = 55
movetime = 55

[State 240, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 510
postype = p2
pos = 40,-80
sprpriority = 7
pausemovetime = 9999

[State 240, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 509
postype = p1
pos = 40,-80
sprpriority = 7
pausemovetime = 9999

[State 240, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 1094
postype = p1
pos = 0,-10
sprpriority = 7
ignorehitpause = 1
pausemovetime = 9999

[State 821, 4]
type = playsnd
trigger1 = AnimElem = 2
value = S0,14

[State 821, 4];
type = playsnd
trigger1 = AnimElem = 2
value = S0,17

[State 821, 4];LbN
type = playsnd
trigger1 = AnimElem = 2
value = S0,9

[State 821, 4]
type = playsnd
trigger1 = AnimElem = 9
value = S0,53

[State 821, 4]
type = changestate
trigger1 = animtime = 0
value = 2224

; Combination Move of Krizalid summoned helper end -----------------------------
[Statedef 2222]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 2219
sprpriority = -2

[State 2222, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,63

[State 2222, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 2223

; Combination Move of Krizalid summoned helper end -----------------------------
[Statedef 2223]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 2220
sprpriority = -2

[State 2223, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,15

[State 2223, VelSet]
type = VelSet
trigger1 = time = 7
y = -13
x = -4

[State 2223, DestroySelf]
type = DestroySelf
trigger1 = time = 40

; unused old Combination Move --------------------------------------------------
[Statedef 2224]
type    = S
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 1096
sprpriority = 4

[State 821, 4]
type = playsnd
trigger1 = AnimElem = 1
value = S0,15

[State 106, 1]
type = velset
trigger1 = Time >= 0
y = -13
x = -4

[State 821, 4]
type = destroyself
trigger1 = time = 40

; unused old Combination Move --------------------------------------------------
[Statedef 2230]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 2214
sprpriority = -2

[State 107, 2]
type = playsnd
trigger1 = time = 0
value = S0,40
ignorehitpause = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
;mul = 200,200,200
time = 2
add = -100,-100,-100
color = 0
invertall = 1
ignorehitpause = 1

[State 9020, 1]
type = velset
trigger1 = animelem = 3
y = -15
x = 2

[State 5050, 1]
type = Changestate
trigger1 = time = 44
value = 2231

; unused old Combination Move --------------------------------------------------
[Statedef 2231]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 2215
sprpriority = -2

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 107, 2]
type = null;playsnd
trigger1 = time = 3
value = S0,44

[State 4000, BGPalFX]
type = BGPalFX
trigger1 = 1
;mul = 200,200,200
time = 2
add = -100,-100,-100
color = 0
invertall = 1
ignorehitpause = 1

[State 9020, 1]
type = posset
trigger1 = time = 0
y = -120

[State 9020, 1]
type = posadd
trigger1 = time = 0
x = FrontEdgeDist - (FrontEdgeDist - p2BodyDist X) + enemynear,const(size.ground.front)-33

[State 9020, 1]
type = veladd
trigger1 = time >= 0
y = 1

[State 5050, 1]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2232

; unused old Combination Move --------------------------------------------------
[Statedef 2232]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 0
sprpriority = -2

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 4100,1]
type = Helper
trigger1 = time = 20
ID = 2222
name = "hinoko"
sprpriority = 5
pos = -30,-20
postype = back
stateno = 2233
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 4100,1]
type = Helper
trigger1 = p2stateno = 5100
ID = 2223
name = "hinoko"
sprpriority = 5
pos = -30,-20
postype = back
stateno = 2234
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 4100,1]
type = Helper
trigger1 = time = 20
ID = 2223
name = "hinoko"
sprpriority = 5
pos = -30,-20
postype = back
stateno = 2235
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 5050, 1]
type = posset
trigger1 = time = 0
y = 0

[State 5050, 1]
type = Changeanim
trigger1 = time = 150
value = 2221

[State 5050, 1]
type = Changestate
trigger1 = animtime = 0
trigger1 = time >= 180
value = 0
ctrl = 1

; unused old Combination Move --------------------------------------------------
[Statedef 2233]
type    = S
velset = 0,0
anim = 2016

[State 107, 2]
type = explod
trigger1 = time % 10 = 0
trigger1 = 1
anim = 2218
postype = p2
pos = 0,-40
random = 80,80
ownpal = 1
sprpriority = 4

[State 820, 1]
type = destroyself
trigger1 = time = 150

; unused old Combination Move --------------------------------------------------
[Statedef 2234]
type    = S
velset = 0,0
anim = 2016

[State 107, 2]
type = explod
trigger1 = time % 7 = 0
trigger1 = 1
anim = 2217
postype = p2
pos = 0,-40
random = 80,80
ownpal = 1
sprpriority = 4

[State 820, 1]
type = destroyself
trigger1 = time = 50

; unused old Combination Move --------------------------------------------------
[Statedef 2235]
type    = S
velset = 0,0
anim = 2016

[State 107, 2]
type = explod
trigger1 = time % 8 = 0
trigger1 = 1
anim = 2225
postype = p2
pos = 0,-40
random = 80,80
ownpal = 1
sprpriority = 4

[State 820, 1]
type = destroyself
trigger1 = time = 150
;===============================================================================
;-------------------------------------------------------------------------------
; Hyper Move: END OF HEAVEN (SDM)
[Statedef 2300]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2222
sprpriority = 2

[State 2300, NotHitBy]; ---- END OF HEAVEN completely invincible
type = NotHitBy
trigger1 = animelem = 24, <0
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2300, PalFX]
type = PalFX
trigger1 = animelem = 5, >= 10
time = 70  ;120-42-10
sinadd = 48,50,32,16
add = 220,100,0
ignorehitpause = 1
persistent = 0

[State 2300, PalFX]; ---- SuperCancel PalFX
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2300, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 2300, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,25]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

[state 2300, PowerAdd]; ---- SuperCancel poweradd
type = PowerAdd
trigger1 = prevstateno = [1000,1062]
value = -1000
ignorehitpause = 1
persistent = 0

[State 2300, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 2300, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
;sound =
;pos =
movetime = 30
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -2000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

[State 2300, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,44
channel = 0

;---------------------- old kof2001 DM spark
;[State 240, 4]
;type = Explod
;trigger1 = time = 0
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 2300, PlaySnd]; ---- XI_supermove_lv2_sound1
type = PlaySnd
trigger1 = time = 0
value = S0,67

[State 2300, PlaySnd]; ---- XI_supermove_lv2_sound2
type = PlaySnd
trigger1 = time = 17
value = S0,68

[State 2300, Explod]; ---- XI_supermove_lv2
type = Explod
trigger1 = time = 0
anim = 12020
sprpriority = -1
postype = p1
pos = 0,-90
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 2300, Explod]; ---- XI_supermove_lv2_foreground
type = Explod
trigger1 = Time = 10
anim = 12021
sprpriority = 3
postype = p1
pos = 0,-90
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 2300, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 5
add = -100,-100,-100
;mul = 200,200,200
color = 0
invertall = 1
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 2300, Explod]; ---- flame pillar
type = Explod
trigger1 = animelem = 5
anim = 2226
postype = p1
pos = 0,7
sprpriority = 5
supermove = 1
ownpal = 1

[State 2300, Explod]; ---- flame wing
type = Explod
trigger1 = animelem = 24
anim = 2229
postype = p1
pos =-10,-90
ownpal = 1
sprpriority = 2

[State 2300, VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 2300, VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 2300, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = 1
var(12) = 0
persistent = 0

[State 2300, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = var(12) != floor(p2dist X)
var(12) = floor(p2dist X)

[State 2300, Projectile]; ---- flame pillar proj
type = Projectile
Trigger1 = animelem = 8
Trigger2 = animelem = 9
ProjID = 2300
projanim = 2236   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 3    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 99999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFD    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 99999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(50*fvar(3)),floor(5*fvar(3))
pausetime = 0,0
guard.pausetime = 0,10
sparkno = 2
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,61
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 18    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 21    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 0    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.3    ;y acceleration
ground.velocity = -.05,-8
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -.05,-8    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 40
palfx.add = 80,-44,-124
;palfx.mul = 0,0,0
palfx.sinadd = 30,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 6
envshake.freq = 60
envshake.ampl = -6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
;ignorehitpause =
;persistent =


[State 2300, Projectile]; ---- flame wing proj if flame pillar hit
type = Projectile
Trigger1 = animelem = 24
ProjID = 2300
projanim = 2237   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 7    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 99999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF+    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 99999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(50*fvar(3)),floor(5*fvar(3))
pausetime = 0,4
guard.pausetime = 0,10
sparkno = 2
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,61
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 18    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 21    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 0    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.3    ;y acceleration
ground.velocity = -1.95,-10
guard.velocity = -3    ;Defaults to x_velocity of ground.velocity
air.velocity = -1.95,-10  ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 40
palfx.add = 80,-44,-124
;palfx.mul = 0,0,0
palfx.sinadd = 30,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 6
envshake.freq = 60
envshake.ampl = -6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
;ignorehitpause =
;persistent =

[State 2300, Projectile]; ---- flame wing proj if flame pillar miss
type = Projectile
Trigger1 = animelem = 24
ProjID = 2300
projanim = 2237   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 7    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 99999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MA-    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 99999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(50*fvar(3)),floor(5*fvar(3))
pausetime = 0,4
guard.pausetime = 0,10
sparkno = 2
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,61
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 18    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 21    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 0    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.3    ;y acceleration
ground.velocity = -2,-12
guard.velocity = -3    ;Defaults to x_velocity of ground.velocity
air.velocity = -2,-12   ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 40
palfx.add = 80,-44,-124
;palfx.mul = 0,0,0
palfx.sinadd = 30,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 6
envshake.freq = 60
envshake.ampl = -6
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
;ignorehitpause =
;persistent =

[State 2301, EnvColor]
type = EnvColor
trigger1 = ProjHit2300 = 1
value = 255,175,175
time = 1
under = 1
ignorehitpause = 1
;persistent = 0

[State 2300, Helper]; ---- END OF HEAVEN hit spark helper
type = Helper
trigger1 = ProjHit2300 = 1, <=20
trigger1 = time = 20
ID = 2222
name = "END OF HEAVEN hit spark helper"
sprpriority = 5
pos = 0,0
postype = back
stateno = 2303
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1

[State 2300, Helper]; ---- END OF HEAVEN flame spark helper
type = Helper
trigger1 =ProjHit2300 = 1
trigger1 = numhelper(2304) = 0
ID = 2304
name = "END OF HEAVEN flame spark helper"
sprpriority = 5
pos = 0,0
postype = back
stateno = 2304
helpertype = normal
keyctrl = 0
ignorehitpause = 1
ownpal = 1

[State 2300, PlaySnd]; ---- flame explod sound
type = PlaySnd
trigger1 = animelem = 5
value = S0,60

[State 2300, PlaySnd]; ---- energy gathering sound
type = PlaySnd
trigger1 = animelem = 24
value = S0,36
pan = -50

[State 2300, PlaySnd]; ---- energy gathering sound
type = PlaySnd
trigger1 = animelem = 24, =2
value = S0,36
pan = 50

[State 240, 4]
type = ChangeState
trigger1 = animTime = 0
value = 2301

; END OF HEAVEN dash fwd -------------------------------------------------------
[Statedef 2301]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2223
sprpriority = 2
juggle = 0

[State 2301, HitBy]; ---- END OF HEAVEN invincible
type = HitBy
Trigger1 = animelem = 9, >=0
value = SCA,SA,HA,ST,HT,NP,SP,HP
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2301, PalFX]
type = PalFX
trigger1 = 1
time = 10
sinadd = 48,50,32,16
add = 220,100,0
ignorehitpause = 1
pausemovetime = 999

[State 2301, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 7.5

[State 2301, Width]
type = Width
trigger1 = 1
player = 30,0
pausemovetime = 999

[State 2301, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 15
add = -100,-100,-100
;mul = 200,200,200
color = 0
invertall = 1
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 2301, VarSet]; ---- var(11) set spark pos Y
type = VarSet
trigger1 = 1
var(11) = 0
persistent = 0

[State 2301, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 2301, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 2301, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = 1
var(12) = 0
persistent = 0

[State 2301, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = var(12) != floor(p2dist X)
var(12) = floor(p2dist X)

[State 2301, Projectile]
type = Projectile
Trigger1 = animelem = 9
Trigger2 = animelem = 10
Trigger3 = animelem = 11
Trigger4 = animelem = 12
Trigger5 = animelem = 13
Trigger6 = animelem = 14
Trigger7 = animelem = 15
Trigger8 = animelem = 16
ProjID = 2301
projanim = 2238   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 1    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 3    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 7.5,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 7    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 40    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 40
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF   ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(20*fvar(3)),floor(2*fvar(3))
pausetime = 0,ifelse((animelem = 16),16,0)
guard.pausetime = 12,15
sparkno = 2
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,61
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 18    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 21    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 0    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.3    ;y acceleration
ground.velocity = -5,ifelse((animelem = 16),-7,-3)
guard.velocity = -12    ;Defaults to x_velocity of ground.velocity
air.velocity = -4,ifelse((animelem = 16),-7,-.65)    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = .5 ;-4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 0
guard.kill = 0
fall.kill = 0
numhits = 1
palfx.time = 39
palfx.add = 80,-44,-124
;palfx.mul = 0,0,0
palfx.sinadd = 30,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 13
envshake.freq = 60
envshake.ampl = 5
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
;ignorehitpause =
;persistent =

[State 2301, EnvColor]
type = EnvColor
trigger1 = ProjHit2301 = 1
value = 255,175,175
time = 1
under = 1
ignorehitpause = 1
pausemovetime = 999
;persistent = 0

[State 2301, Pause]
type = Pause
trigger1 = ProjHit2301 = 1
time = 13
movetime = 0
ignorehitpause = 1
;persistent =
;endcmdbuftime = (winmugen only)
pausebg = 0 ;(winmugen only)

[State 2301, Explod]; ---- dash flame
type = Explod
trigger1 = animelem = 8
anim = 2227
ID = 2227
postype = p1
pos = 60,-54
removetime = 9999
bindtime = -1
ownpal = 1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999

[State 2301, Explod]; ---- hit spark
type = Explod
trigger1 = movehit
anim = 2217
postype = p2
pos = 0,-50
random = 60,70
ownpal = 1
sprpriority = 5
pausemovetime = 999

[State 2301, Explod]; ---- flame spark
type = Explod
trigger1 = movehit
anim = 2218
postype = p2
pos = 0,-50
random = 60,70
ownpal = 1
sprpriority = 5
pausemovetime = 999

[State 2301, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 2302

; END OF HEAVEN finish ---------------------------------------------------------
[Statedef 2302]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2224
sprpriority = 2
juggle = 0

[State 2302, HitBy]; ---- END OF HEAVEN invincible
type = HitBy
trigger1 = animelem = 5, >=0
trigger1 = animelem = 7, <0
value = SCA,SA,HA,ST,HT,NP,SP,HP
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2302, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 2
ID = 2227

[State 2302, Explod]; ---- flame explode
type = Explod
trigger1 = animelem = 4
anim = 2228
postype = p1
pos = 65,-70
ownpal = 1
sprpriority = 5
ignorehitpause = 1
pausemovetime = 999

[State 2302, BGPalFX]
type = BGPalFX
trigger1 = animtime < -4
time = 10
add = -100,-100,-100
;mul = 200,200,200
color = 0
invertall = 1
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 2302, BGPalFX]
type = BGPalFX
trigger1 = animtime = -4
time = 7
add = -100,-100,-100
;mul = 200,200,200
color = 0
invertall = 1
ignorehitpause = 1

[State 2302, EnvColor]
type = EnvColor
trigger1 = ProjHit2302 = 1
value = 255,175,175
time = 1
under = 1
ignorehitpause = 1
pausemovetime = 999
;persistent = 0

[State 2302, Posadd]
type = Posadd
trigger1 = time = 0
x = 10

[State 2302, PalFX]
type = PalFX
trigger1 = 1
time = 10
sinadd = 48,50,32,16
add = 220,100,0
ignorehitpause = 1
persistent = 0

[State 2302, Helper]; ---- END OF HEAVEN hit spark helper
type = Helper
trigger1 = time = 20
ID = 2222
name = "END OF HEAVEN hit spark helper"
sprpriority = 5
pos = 0,0
postype = back
stateno = 2303
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1
ownpal = 1
pausemovetime = 999

[State 2302, Helper]; ---- END OF HEAVEN flame spark helper
type = Helper
trigger1 = ProjHit2302 = 1
trigger1 = numhelper(2304) = 0
ID = 2304
name = "END OF HEAVEN flame spark helper"
sprpriority = 5
pos = 0,0
postype = back
stateno = 2304
helpertype = normal
keyctrl = 0
ignorehitpause = 1
ownpal = 1
pausemovetime = 999

[State 2302, Explod]
type = Explod
trigger1 = ProjHit2302 = 1, <=20
trigger1 = time <= 20
anim = 2225
postype = p2
pos = 0,-50
random = 60,100
ownpal = 1
sprpriority = 5
ignorehitpause = 1

[State 2302, Pause]
type = Pause
trigger1 = ProjHit2302 = 1, <=60
trigger1 = (GameTime%2) =1
trigger1 = time <= 60
trigger1 = p2life != 0
time = 1
movetime = 0

[State 2302, PlaySnd]; ---- flame explod sound
type = PlaySnd
Trigger1 = animelem = 2
value = S0,61

[State 2302, VarSet]; ---- var(11) set spark pos Y
type = VarSet
trigger1 = 1
var(11) = 0
persistent = 0

[State 2302, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 2302, VarSet]; ---- var(11) set spark pos Y
type = varset
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 2302, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = 1
var(12) = 0
persistent = 0

[State 2302, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = var(12) != floor(p2dist X)
var(12) = floor(p2dist X)

[State 2302, Projectile]
type = Projectile
Trigger1 = animelem = 5
ProjID = 2302
projanim = 2239   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 1    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 17    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 7    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 150    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 150
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFD    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = Diagup    ;light,medium,hard,back,up,diagup
air.animtype = Diagup    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(300*fvar(3)),floor(30*fvar(3))
pausetime = 0,3
;guard.pause ,0
sparkno = -1
guard.sparkno = 40
sparkxy = var(12),-65 + var(11)
hitsound = S0,61
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 18    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 21    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 0    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.44    ;y acceleration
ground.velocity = -5,-9
guard.velocity = -17   ;Defaults to x_velocity of ground.velocity
air.velocity = -5,-9   ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
;p2stateno = 0
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 50
palfx.add = 80,-44,-124
;palfx.mul = 0,0,0
palfx.sinadd = 30,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.freq = 120
envshake.ampl = -7
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
;ignorehitpause =
;persistent =

[State 2302, VarSet]; ---- var(1) palfx changing
type = VarSet
trigger1 = 1
var(1) = 220
persistent = 0

[State 2302, VarAdd]; ---- var(1) palfx changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 4, >= 0
var(1) = -5

[State 2302, PalFX]; ---- palfx changing
type = PalFX
triggerall = var(1) > 0
trigger1 = AnimElem = 4, >= 0
time = 1
add = var(1),floor(var(1)/2),0
mul = 256,256,256
;sinadd = 0,0,0,10
ignorehitpause = 1
;persistent =

[State 2302, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; END OF HEAVEN hit spark helper -----------------------------------------------
[Statedef 2303]
type    = S
velset = 0,0
anim = 2016 ; ---- infinite blank anim

[State 2303, Explod]; ---- hit spark
type = Explod
triggerall = time % 12 = 0
trigger1 = p2stateno = 5110
trigger2 = p2stateno = 5101
triggerall = 1
anim = 2217
postype = p2
pos = 0,-40
random = 80,80
ownpal = 1
sprpriority = 4

[State 2303, DestroySelf]
type = DestroySelf
trigger1 = p2statetype = S

; END OF HEAVEN flame spark helper ---------------------------------------------
[Statedef 2304]
type    = S
velset = 0,0
anim = 2016 ; ---- infinite blank anim

[State 2304, Explod]; ---- flame spark
type = Explod
trigger1 = time % 10 = 0
trigger1 = 1
anim = 2218
postype = p2
pos = 0,-40
random = 80,80
ownpal = 1
sprpriority = 4

[State 2304, DestroySelf]
type = DestroySelf
trigger1 = time = 24


;-------------------------------------------------------------------------------
; Hyper Move: Combination Throw of Krizalid
[Statedef 2400]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2204
sprpriority = 2

[state 2400, NotHitBy]; ---- Combination Throw of Krizalid completely invincible
type = NotHitBy
trigger1 = 1
;trigger1 = animelem = 1, >=0
;trigger1 = animelem = 2, <0
value = SCA
time = 2
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2400, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2400, PalFX]
type = PalFX
trigger1 = animelem = 2, >=0
trigger1 = animelem = 16, <0
add = 0,0,100
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 256
ignorehitpause = 1
supermove = 1
;persistent =

[State 2400, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 2400, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2400, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 1
anim = -1
;sound =
;pos =
movetime = 1
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -2000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

[State 2400, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,73
channel = 0

;---------------------- old kof2001 DM spark
;[State 240, 4]
;type = Explod
;trigger1 = time = 1
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10;
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 2400, PlaySnd]; ---- XI_supermove_sound1
type = PlaySnd
trigger1 = time = 0
value = S0,67

[State 2400, PlaySnd]; ---- XI_supermove_sound2
type = PlaySnd
trigger1 = time = 17
value = S0,68

[State 2400, Explod]; ---- XI_supermove_lv2
type = Explod
trigger1 = time = 0
anim = 12020
sprpriority = -1
postype = p1
pos = 0,-90
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 2400, Explod]; ---- XI_supermove_lv2_foreground
type = Explod
trigger1 = Time = 10
anim = 12021
sprpriority = 3
postype = p1
pos = 0,-90
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 2400, ReversalDef]; ---- Combination Throw of Krizalid reversaldef
type = ReversalDef
Trigger1 = time = [0,5]
reversal.attr = SC,NA,SA,HA,NT,ST,HT   ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
priority = 99999, miss    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HL  ;HLMAFDP
numhits = 0
sparkno = -1
;hitsound =
;p1stateno =
p2stateno = 2408
guard.dist = 0
ignorehitpause = 1
supermovetime = 99999
;persistent =

[State 2400, Projectile]
type = Projectile
Trigger1 = time = [0,6]
ProjID = 2400
projanim = 2409   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 2    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 100    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 100
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 99999    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HT    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = HL    ;HLAFDP+-
guardflag = N    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = up    ;light,medium,hard,back,up,diagup
air.animtype = up    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 7,miss    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = 0,0
pausetime = 0,0
;guard.pause ,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
;hitsound = 0,0
;guardsound = 0,0
;ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
;ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
;ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
;air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
;yaccel = 0.5    ;y acceleration
;ground.velocity = 0,0
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
;air.velocity = 0,0    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 0
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
;p1getp2facing = 0
p2facing = 1
p1stateno = 2401
p2stateno = 2202
;p2getp1state = 1
;forcestand = 0
fall = 0
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 0
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 0
guard.kill = 0
fall.kill = 0
numhits = 0
palfx.time = 0
;palfx.mul = 0,0,0
;palfx.add = 0,0,0
envshake.time = 0
;envshake.freq = 0
;envshake.ampl = 0
;envshake.phase = 0
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent =

[State 2400, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=0
trigger1 = animelem = 13, <0
time = 5
invertall = 1
ignorehitpause = 1
supermovetime = 999

[State 2400, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Combination Throw of Krizalid success P1STATENO -------------------------------
[Statedef 2401]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2400
sprpriority = 2

[State 2401, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2404, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2401, VelSet]; ---- moving to screen center
type = VelSet
trigger1 = frontedgedist <= 160
trigger1 = AnimElem = 1, >= 0
x = -4

[State 2401, VelSet]; ---- moving to screen center
type = VelSet
trigger1 = backedgedist <= 70
trigger1 = AnimElem = 1, >= 0
x = 4

[State 2401, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2401, TargetBind]
type = TargetBind
trigger1 = 1
pos = 40, 0

[State 2401, Explod]; ---- throw grap spark
type = Explod
trigger1 = AnimElem = 4
anim = 511
postype = p1
pos = 45,-78
sprpriority = 4

[State 2401, PlaySnd]; ---- throw grap sound
type = PlaySnd
trigger1 = animelem = 4
value = S0,12

[State 2401, Envcolor]; ---- black background
type = Envcolor
trigger1 = 1
time = 2
value = 0,0,0
under = 1
ignorehitpause = 1

[State 2401, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 30
anim = -1
sound = S0,39
;pos =
movetime = 30
;darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

;---------------------- old kof2001 DM spark
;[State 240, 4]
;type = Explod
;trigger1 = time = 1
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 240, 4]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 2401, Explod]; ---- XI_supermove_lv2
type = Explod
trigger1 = time = 0
anim = 12020
sprpriority = -1
postype = p1
pos = 0,-90
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 2401, Explod]; ---- XI_supermove_lv2_foreground
type = Explod
trigger1 = Time = 10
anim = 12021
sprpriority = 3
postype = p1
pos = 0,-90
bindtime = -1
supermove = 1
under = 0
ownpal = 1

[State 2401, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2402

; Combination Throw of Krizalid P1STATENO roll bwd ------------------------------
[Statedef 2402]
type = S
movetype = I
physics = S
anim = 910
velset = 0,0
ctrl = 0
sprpriority = 1
poweradd = 0

[State 2402, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2402, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2402, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2402, Helper]; ---- summon 99' Krizalid
type = Helper
trigger1 = time = 0
name = "Combination Move: Krizalid"
postype = p2
pos = -120,-150
sprpriority = 2
stateno = 2410
helpertype = normal
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 2402, VelSet]
type = VelSet
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
x = -4

[State 2402, VelSet]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 2402, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2403

; Combination Throw of Krizalid P1STATENO fast-hits -----------------------------
[Statedef 2403]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2401
sprpriority = 2

[State 2403, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2403, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2403, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2403, TargetState]
type = TargetState
trigger1 = Time = 0
value = 2420

[State 2403, TargetState]
type = TargetState
trigger1 = Time = 160
value = 2421

[State 2403, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
value = S0,45
;channel = 2

[State 2403, HitAdd]
type = HitAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
value = 1

[State 2403, EnvColor]
type = EnvColor
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1

[State 2403, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 16
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 28
trigger9 = AnimElem = 32
trigger10 = AnimElem = 36
value = floor(-10*fvar(3))
kill = 0
absolute = 1

[State 2403, Explod]; ---- unused krizalid expold
type = null;Explod
trigger1 = time = 0
anim = 2201
postype = p2
pos = -120,-2
sprpriority = 4
removetime = 200

[State 2403, ChangeState]
type = ChangeState
trigger1 = Time = 160
value = 2404

; Combination Throw of Krizalid P1STATENO Krizalid hit-up -----------------------
[Statedef 2404]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 0
sprpriority = 2

[State 2404, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2404, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2404, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2404, TargetLifeAdd]; ---- Krizalid hit-up
type = TargetLifeAdd
trigger1 = time = 40
value = floor(-100*fvar(3))
kill = 0
absolute = 1

[State 2404, EnvColor]
type = EnvColor
trigger1 = time = 40
time = 1
value = 250,250,250
ignorehitpause = 1

[State 2404, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 50
value = 1060

[State 2404, TargetLifeAdd]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = TargetLifeAdd
triggerall = anim = 1060
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
trigger3 = AnimElem = 10
value = floor(-20*fvar(3))
kill = 0
absolute = 1

[State 2404, HitAdd]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = HitAdd
triggerall = anim = 1060
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
value = 1

[State 2404, EnvColor]
type = EnvColor
triggerall = anim = 1060
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1

[State 2404, PlaySnd]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = PlaySnd
triggerall = anim = 1060
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
value = S0,55

[State 2404, Explod]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = Explod
triggerall = anim = 1060
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
anim = 509
postype = p2
pos = -10,-58
sprpriority = 4

[State 2404, Explod]
type = Explod
triggerall = anim = 1060
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
anim = 510
postype = p2
pos = -10,-58
sprpriority = 4

[State 2404, TargetState]
type = TargetState
trigger1 = Time = 45
value = 2422

[State 2404, ChangeState]
type = ChangeState
trigger1 = animTime = 0
trigger1 = anim = 1060
value = 2405

; Combination Throw of Krizalid P1STATENO CHAINBLADE SLICE air ------------------
[Statedef 2405]
type    = A
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = .01,-7
anim = 2410
sprpriority = 2

[State 2405, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2405, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2405, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2405, PlaySnd]; ---- hit sound
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
value = S0,55

[State 2405, PlaySnd]; ---- hit sound
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
value = S0,14

[State 2405, TargetLifeAdd]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = TargetLifeAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
value = floor(-5*fvar(3))
kill = 0
absolute = 1

[State 2405, HitAdd]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = HitAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
value = 1

[State 2405, EnvColor]
type = EnvColor
trigger1 = AnimElem = 5
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1

[State 2405, Explod]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
anim = 509
postype = p2
pos = -10,-58
sprpriority = 4

[State 2405, Explod]; ---- CHAINBLADE SAGITTALRIUS SLICE
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
anim = 510
postype = p2
pos = -10,-58
sprpriority = 4

[State 2405, VelAdd]
type = VelAdd
Trigger1 = time > 5
y = .5

[State 2405, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2406

; Combination Throw of Krizalid P1STATENO CHAINBLADE head pull -----------------
[Statedef 2406]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2406
sprpriority = 2

[State 2406, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2406, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2406, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 2
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2406, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1

[State 2406, PlaySnd]; ---- land sound
type = PlaySnd
trigger1 = time = 0
value = S0,16

[State 2406, PlaySnd]; ---- head grap sound
type = PlaySnd
trigger1 = AnimElem = 3,= 0
value = S0,12

[State 2406, PlaySnd]; ---- p2 hit ground sound
type = PlaySnd
trigger1 = p2stateno = 5100 || p2stateno = 5101
value = S0,13
persistent = 0

[State 2406, Explod]; ---- make dust
type = Explod
trigger1 = p2stateno = 5100 || p2stateno = 5101
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
anim = 515
postype = p1
pos = floor(p2dist x),0
sprpriority = 4
persistent = 0

[State 2406, Explod]; ---- make dust
type = Explod
trigger1 = p2stateno = 5100 || p2stateno = 5101
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
anim = 516
postype = p1
pos = floor(p2dist x),0
sprpriority = -2
persistent = 0

[State 2406, PosSet]
type = PosSet
Trigger1 = time = 0
y = 0

[State 2406, TargetState]
type = TargetState
trigger1 = AnimElem = 3,= 0
value = 2423

[State 2406, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3,= 0
pos = 108,-120
time = 4

[State 2406, TargetBind]
type = TargetBind
trigger1 = AnimElem = 4,= 0
pos = 138,-172
time = 4

[State 2406, TargetBind]
type = TargetBind
trigger1 = AnimElem = 5,= 0
pos = 75,-172
time = 4

[State 2406, TargetBind]
type = TargetBind
trigger1 = AnimElem = 6,= 0
pos = 29,-168
time = 4

[State 2406, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7,= 0
pos = -15,-158
time = 4

[State 2406, TargetBind]
type = TargetBind
trigger1 = AnimElem = 8,= 0
pos = -55,-125
time = 4

[State 2406, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Combination Throw of Krizalid Reversaldef victim -----------------------------
[statedef 2407]
type    = U
movetype = H
physics = U
poweradd = 0
velset = 0,0
sprpriority = 3
anim = 9999
ctrl = 0

[state 2407, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2407, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2407, DestroySelf]
type = DestroySelf
trigger1 = ishelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2407, StateTypeSet]
type = StateTypeSet
trigger1 = !ishelper
statetype = S
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2407, PosSet]
type = PosSet
trigger1 = !ishelper
y = 0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2407, SelfState]
type = SelfState
trigger1 = !ishelper
value = 5000
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Mu ni Kaerou Victim State (stun)
[Statedef 2408]
type    = U
movetype= H
physics = N
velset = 0,0

[state haha]  ;target is ishelper, debug
type = nothitby
trigger1 = ishelper
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State , RemoveExplod0]  ;target is ishelper, debug
type = RemoveExplod
triggerall = ishelper
trigger1 = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state haha] ;target is ishelper, debug
type = destroyself
triggerall = ishelper
trigger1 = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State , HitBy0]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state haha]
type = lifeset
trigger1 = life <= 1
value = 0
ignorehitpause = 1

[state haha]
type = lifeadd
trigger1 = life <= 1
value = -99999
ignorehitpause = 1
absolute = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7]
type = selfState ;changestate
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

; Combination Throw of Krizalid summoned Krizalid ------------------------------
[Statedef 2410]
type    = A
movetype= I
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2402
sprpriority = 2

[State 2410, Afterimage]
type = NULL;Afterimage
trigger1 = root,palno = 12
trans = add
PalContrast =  125, 125, 125
PalBright = 25,0,0
time    =  -1
length  = 12
TimeGap = 1
FrameGap = 1
persistent = 0

[state 2410, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2410, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2410, VelAdd]
type = VelAdd
Trigger1 = time > 0
y = .6

[State 2410, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2411

; Combination Throw of Krizalid summoned Krizalid landing ----------------------
[Statedef 2411]
type    = A
movetype= I
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2403
sprpriority = 2

[state 2410, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2411, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2410, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,16

[State 2410, PosSet]
type = PosSet
Trigger1 = time = 0
y = 0

[State 2410,  ChangeState]
type = ChangeState
trigger1 = Parent,Stateno = 2403
value = 2412

; Combination Throw of Krizalid summoned Krizalid fast-hit ---------------------
[Statedef 2412]
type    = A
movetype= I
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2201
sprpriority = 2

[state 2412, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2412, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2412, VarRandom]; ---- hit sparkno random set
type = VarRandom
trigger1 = 1
v = 4
range = 1,3  ;502,503

[State 2412, PlaySnd]; ---- hit sound
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
value = S0,7

[State 2412, PlaySnd]; ---- hit sound2
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 18
trigger4 = AnimElem = 28
value = S0,6

[State 2412, PlaySnd]; ---- hit sound3
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 25
value = S0,9

[State 2412, HitAdd]
type = HitAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
trigger4 = AnimElem = 4
trigger5 = AnimElem = 10
trigger6 = AnimElem = 18
trigger7 = AnimElem = 28
trigger8 = AnimElem = 6
trigger9 = AnimElem = 13
trigger10 = AnimElem = 25
value = 1

[State 2412, Explod]; ---- hitspark
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 22
anim = F0+var(4)
postype = p1
pos = 110,-28
random = 30,0
sprpriority = 4

[State 2412, Explod]; ---- hitspark
type = Explod
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 18
trigger4 = AnimElem = 28
anim = F0+var(4)
postype = p1
pos = 110,-68
random = 30,0
sprpriority = 4

[State 2412, Explod]; ---- hitspark
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 25
anim = F0+var(4)
postype = p1
pos = 110,-98
random = 30,0
sprpriority = 4

[State 2412, ChangeState]
type = ChangeState
trigger1 = parent,stateno != 2403
value = 2413

; Combination Throw of Krizalid summoned Krizalid hit-up -----------------------
[Statedef 2413]
type    = S
physics = N
movetype = I
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2202
sprpriority = 4

[state 2413, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2413, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoFG
flag2 = NoBG
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2413, PlaySnd]; ---- Krizalid voice
type = PlaySnd
trigger1 = animelem = 1
value = S0,62

[State 2413, PlaySnd]; ---- strong hit sound
type = PlaySnd
trigger1 = animelem = 12
value = S0,17

[State 2413, HitAdd]
type = HitAdd
trigger1 = AnimElem = 12
value = 1

[State 2413, Pause]; ---- hit pause
type = Pause
trigger1 = AnimElem = 12
time = 30
movetime = 30

[State 2413, EnvColor]
type = EnvColor
trigger1 = AnimElem = 12
time = 4
value = 250,0,0
under = 1
ignorehitpause = 1

[State 2413, Explod]
type = Explod
trigger1 = AnimElem = 12
anim = F3
postype = p1
pos = 95,-60
sprpriority = 8
pausemovetime = 9999

[State 2413, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 2211
postype = p1
pos = 0,0
sprpriority = 5

[State 2413, EnvShake]
type = EnvShake
trigger1 = AnimElem = 12
time = 25

[State 2413, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 2222

; Combination Throw of Krizalid P2STATENO fast-hit -----------------------------
[Statedef 2420]
type    = S
movetype= H
physics = S
poweradd = 0
ctrl = 0
velset = 0,0

[State 2420, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2420, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2420, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2404

; Combination Throw of Krizalid P2STATENO dizzy---------------------------------
[Statedef 2421]
type    = S
movetype= H
physics = S
velset = 0,0

[State 2421, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2421, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2421, HitFallSet]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 2421, ChangeAnim]
type = ChangeAnim
trigger1 = AnimExist(5300)
trigger1 = time = 0
value = 5300

[State 2421, ChangeAnim2]
type = ChangeAnim2
trigger1 = !AnimExist(5300)
trigger1 = time = 0
value = 2014

; Combination Throw of Krizalid P2STATENO hit-up -------------------------------
[Statedef 2422]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2422, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 2422, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2422, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time  = 0
value = 2212

[State 2422, VelSet]
type = VelSet
trigger1 = Time = 0
y = -8

[State 2422, VelAdd]
type = VelAdd
trigger1 = Time > 3
y = .2

[State 2422, EnvColor]
type = EnvColor
trigger1 = Pos Y >= 0 && Vel Y > 0
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1

[State 2422, VelSet]
type = VelSet
trigger1 = Pos Y >= 0 && Vel Y > 0
y = 20

[State 2422, LifeAdd]
type = LifeAdd
trigger1 = Pos Y >= 0 && Vel Y > 0
value = -40
kill = 1
persistent = 0
absolute = 1

[State 2422, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

; Combination Throw of Krizalid P2STATENO head-pull hit-ground -----------------
[Statedef 2423]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2423, ScreenBound]
type = ScreenBound
trigger1 = time <= 20
movecamera = 1,0

[State 2423, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time  = 0
value = 2405

[State 2423, ChangeAnim]; ---- common 5050
type = ChangeAnim
trigger1 = time = 20
trigger1 = AnimExist(5101)
value = 5101

[State 2423, ChangeAnim]; ---- common 5050
type = ChangeAnim
trigger1 = time = 20
trigger1 = selfAnimExist(5171) && !selfAnimExist(5101)
value = 5171

[State 2423, ChangeAnim]; ---- common 5050
type = ChangeAnim
trigger1 = time = 20
trigger1 = selfAnimExist(5172) && !selfAnimExist(5101) && !selfAnimExist(5171)
value = 5172

[State 2423, VelSet]
type = VelSet
trigger1 = 1
trigger1 = !(Pos Y >= 0 && Vel Y > 0)
x = 6
y = 8

[State 2423, LifeAdd]
type = LifeAdd
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = -40
kill = 1
persistent = 0
absolute = 1

[State 2423, EnvColor]
type = EnvColor
trigger1 = Pos Y >= 0 && Vel Y > 0
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1

[State 2423, VelSet]
type = VelSet
trigger1 = Pos Y >= 0 && Vel Y > 0
x = 6
y = 20

[State 2423, SelfState]; ---- common 5050
type = SelfState
trigger1 = !selfAnimExist(5172) && !selfAnimExist(5101) && !selfAnimExist(5171)
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

[State 2423, SelfState]; ---- common 5050
type = SelfState
trigger1 = selfAnimExist(5172) ||  selfAnimExist(5101) ||  selfAnimExist(5171)
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5101

;-------------------------------------------------------------------------------
;Hidden Hyper Move: Jibaku (Fallen of Steel Castle)
[Statedef 2500]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2500
sprpriority = 2

[state 2500, HitBy]; ---- Fallen of Steel Castle high invincible
type = NotHitBy
trigger1 = 1
value = SCA,AA,AT,AP
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2500, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2500, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = 1070 || prevstateno = 1080
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2500, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 2500,AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,25]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

[State 2500, Helper]; ---- DreamCancel Helper
type = Helper
trigger1 = prevstateno = 1070
trigger2 = prevstateno = 1080
helpertype = normal ;player
name = "DreamCancel"
ID = 10000
stateno = 10000
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 2500, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 2500, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 48
anim = -1
;sound =
;pos =
movetime = 48
;darken = 1
p2defmul = 1
poweradd = ifelse(Ishelper(97864),0,-5000) ; ---- Jibaku give up any hope (also must below 1/3 life but cost no power)
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

[State 2500, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,37
channel = 0

;---------------------- old kof2001 DM spark
;[State 2500, Explod]
;type = Explod
;trigger1 = time = 0
;anim = 512
;postype = p1
;pos = 0,-90
;sprpriority = -1
;supermove = 1
;ownpal = 1

;[State 2500, Explod]
;type = Explod
;trigger1 = time = 10
;anim = 513
;postype = p1
;pos = 0,-90
;sprpriority = 5
;supermove = 1
;ownpal = 1
;----------------------

[State 2500, Explod]; ---- XI_supermove_lv3
type = Explod
trigger1 = Time = 0
anim = 11001
pos = -96,-155
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 99
sprpriority = -1
ownpal = 1

[State 2500, Explod]; ---- XI_supermove_lv3_foreground
type = Explod
trigger1 = Time = 10
anim = 11000
pos = -57,-120
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 99
sprpriority = 9
ownpal = 1

[State 2500, BGPalFX]
type = BGPalFX
trigger1 = time >= 25
time = 2
add = -100,-100,-100
color = 0
invertall = 1

[State 2500, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 2501

;Jibaku (Fallen of Steel Castle) -----------------------------------------------
[Statedef 2501]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 8,0
anim = 2001
sprpriority = 2
juggle = 0;

[State 2501, NotHitBy]; ---- Fallen of Steel Castle completely invincible at first
type = NULL;NotHitBy
trigger1 = time = [0,3]
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2501, HitBy]; ---- Fallen of Steel Castle high level invincible
type = NULL;HitBy
trigger1 = time > 3
value = SCA,HA,HP,HT
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2501, Width]
type = null;Width
trigger1 = 1
player = 60,0

[State 2501, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 2501, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 10
add = -100,-100,-100
color = 0
invertall = 1

[State 2501, Explod]
type = Explod
trigger1 = time = 0
anim = 2408
ID = 2408
postype = p1
scale = 1.3,1
pos = 73,-67
removetime = -1
bindtime = -1
sprpriority = 4
supermove = 1
ownpal = 1
removeongethit = 1

[State 2501, Helper]; ---- Fallen of Steel Castle dash attack Reversaldef helper
type = Helper
trigger1 = !NumHelper(25010)
trigger1 = time>=0
ID = 25010
name = "Fallen of Steel Castle dash attack Reversaldef helper"
postype = p1
facing = 1
pos = 0,0
sprpriority = 0
stateno = 20010
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 2501, HitDef]
type = HitDef
Trigger1 = 1
trigger1 = p2life > 0
pausetime = 0,0
damage = 0,0
guard.pausetime = 5,15
attr = S, HA
hitflag = MAF
sparkno = 2
guard.sparkno = 40
sparkxy = -10,-60
guardflag = M
priority = 7, Miss
hitsound = S0,55
guardsound = S0,10
sparkno = -1
sprpriority = 4
p2facing = 1
p1stateno = 2503
p2stateno = 2010

[State 2501, RemoveExplod]
type = RemoveExplod
trigger1 = moveguarded
trigger2 = FrontEdgeBodyDist < 30
trigger3 = time >= 180
ID = 2408
ignorehitpause = 1

[State 2501, ChangeState]
type = ChangeState
trigger1 = moveguarded
trigger2 = FrontEdgeBodyDist < 30
trigger3 = time >= 180
value = 2002 ;2508

;Jibaku (Fallen of Steel Castle) P1STATENO pushing -----------------------------
[Statedef 2503]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 8,0
anim = 2001
sprpriority = 2

[State 2503, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2003, ChangeState]; ---- if reversed target is helper, not player, debug
type = ChangeState
triggerall = target,ishelper
trigger1 = time = 1
value = 2501
persistent = 0
ignorehitpause = 1

[State 2503, Explod]
type = null;Explod
trigger1 = animelem = 2
anim = 2407
postype = p1
pos = 70,0
sprpriority = 3
supermove = 1
ownpal = 1

[State 2503, Explod]
type = Explod
trigger1 = time = 0
anim = 2408
ID = 2408
postype = p1
scale = 1.3,1
pos = 73,-67
removetime = 999
bindtime = -1
sprpriority = -1
supermove = 1
ownpal = 1

[State 2503, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 50
add = -100,-100,-100
color = 0
invertall = 1

[State 2503, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2503, TargetBind]
type = TargetBind
trigger1 = 1
pos = 75, 0
postype = p1
time = 2

[State 2503, RemoveExplod]
type = RemoveExplod
triggerall = NumEnemy = 1 || (NumEnemy=2&&!(EnemyNear(0),alive)*(EnemyNear(1),alive))
triggerall = FrontEdgeBodyDist < 93
trigger1 = facing = 1 ; ---- towards right
trigger1 = ScreenPos X >= 226 ;(319-93)
trigger2 = facing = -1 ; ---- towards left
trigger2 = ScreenPos X <= 93
ID = 2408

[State 2503, ChangeState]
type = ChangeState
triggerall = NumEnemy = 1 || (NumEnemy=2&&!(EnemyNear(0),alive)*(EnemyNear(1),alive))
triggerall = FrontEdgeBodyDist < 93
trigger1 = facing = 1 ; ---- towards right
trigger1 = ScreenPos X >= 226 ;(319-93)
trigger2 = facing = -1 ; ---- towards left
trigger2 = ScreenPos X <= 93
value = 2504

[State 2503, RemoveExplod]
type = RemoveExplod
triggerall = NumEnemy = 2
triggerall = EnemyNear(0),alive
triggerall = EnemyNear(1),alive
trigger1 = FrontEdgeBodyDist < 93
ID = 2408

[State 2503, ChangeState]
type = ChangeState
triggerall = NumEnemy = 2
triggerall = EnemyNear(0),alive
triggerall = EnemyNear(1),alive
trigger1 = FrontEdgeBodyDist < 93
value = 2504

;Jibaku (Fallen of Steel Castle) P1STATENO hit wall ----------------------------
[Statedef 2504]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2501
sprpriority = 2

[State 2504, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 2408

[State 2504, Explod]
type = Explod
trigger1 = 1
anim = 2407
postype = p1
pos = 65,0
scale = 1.3,1.2
sprpriority = 3
supermove = 1
ownpal = 1
persistent = 0

[State 2504, Width]
type = Width
trigger1 = 1
edge = 93,0

[State 2504, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = -100,-100,-100
color = 0
invertall = 1

[State 2504, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,17

[State 2504, TargetState]
type = TargetState
trigger1 = time = 0
value = 2011

[State 2501, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 30
ampl = -30
freq = 100

[State 2501, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 2505

;Jibaku (Fallen of Steel Castle) P1STATENO nearly dead wlk ---------------------
[Statedef 2505]
type    = S
movetype= I
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2008
sprpriority = 2

[State 2505, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,18

[State 2505, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 50
add = -100,-100,-100
color = 0
invertall = 1

[State 2505, TargetState]
type = TargetState
trigger1 = time = 0
value = 2509 ;2014

[State 2505, PosAdd]
type = PosAdd
Trigger1 = animelem = 6
x = -14

[State 2505, ChangeState]
type = ChangeState
trigger1 = Time = 170
value = 2506

;Jibaku (Fallen of Steel Castle) P1STATENO jibaku ------------------------------
[Statedef 2506]
type    = S
movetype= I
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2502
sprpriority = 2

[State 2506, Explod]
type = Explod
trigger1 = animelem = 1, >=20
anim = 2503
ID =  2503
pos = 50,10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
;supermove = 1
;pausemove = 1
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 2506, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S0,109
persistent = 9

[State 2506, PlaySnd]
type = PlaySnd
trigger1 = time = 59
value = S0,110

[State 2506, PlaySnd]
type = PlaySnd
trigger1 = time = 65
value = S0,111

[State 2506, EnvShake]
type = EnvShake
trigger1 = time = 30
time = 260
freq = 120
ampl = -6
phase = 120
ignorehitpause = 1
;persistent =

[State 2506, Explod]
type = null;Explod
trigger1 = time = 150
anim = 2235
ID = 2235
postype = p2
pos = 230,-230
facing = -1
scale = 1.2,1.2
vel = -1.1,1.1
sprpriority = -1

[State 2506, PlaySnd]; ---- Steel Castle falling sound
type = null;PlaySnd
trigger1 = time = 150
value = S0,36

[State 2506, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = time = 180
value = S0,47
pan = -50

[State 2506, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = time = 182
value = S0,47
pan = 50

[State 2506, RemoveExplod]
type = RemoveExplod
trigger1 = time = 290
ID = 2235

[State 2506, PlaySnd]; ---- explod sound
type = PlaySnd
trigger1 = time = 280
trigger2 = time = 282
trigger3 = time = 286
trigger4 = time = 290
value = S0,59

[State 2506, Explod]; ---- explod spark
type = Explod
trigger1 = time = 280
trigger2 = time = 282
trigger3 = time = 286
trigger4 = time = 290
anim = 2216
postype = p1
pos = 60,-20
random = 80,80
pausemovetime = 9999
ownpal = 1
ignorehitpause = 1
supermove = 1
sprpriority = 6

[State 2506, Explod]; ---- explod spark2
type = Explod
trigger1 = time = 280
trigger2 = time = 282
trigger3 = time = 286
trigger4 = time = 290
anim = 2216
postype = p1
facing = -1
pos = 60,-20
random = 80,80
pausemovetime = 9999
ownpal = 1
ignorehitpause = 1
supermove = 1
sprpriority = 6

[State 2506, Pause]
type = null;Pause
trigger1 = time = 290
time = 20
movetime = 0

[State 2506, PalFx]
type = PalFx
trigger1 = time = 290
time = 40
add = 80,-44,-124
sinadd = 30,30,0,10
color = 0
invertall = 1
ignorehitpause = 1

[State 2506, EnvColor]
type = EnvColor
trigger1 = time = 290
trigger2 = time = 292
trigger3 = time = 294
value = 255,0,0
time = 1
under = 1
persistent = 0
ignorehitpause = 1

[State 2506, EnvShake]
type = EnvShake
trigger1 = Time = 289
time = 20
freq = 10
ampl = -12
phase = 120
ignorehitpause = 1
;persistent =

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, <30
time = 20
add = -100,-100,-100
color = 0
invertall = 1
ignorehitpause = 1

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=30
time = 60
add = -150,-150,-150
sinadd = -100,-100,-100,9
color = 0
invertall = 1
persistent = 0

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=70
time = 60
add = -100,-100,-100
sinadd = -70,-70,-70,8
color = 0
invertall = 1
persistent = 0

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=110
time = 60
add = -50,-50,-50
sinadd = -40,-40,-40,7
color = 0
invertall = 1
persistent = 0

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=150
time = 60
add = 0,0,0
sinadd = -10,-10,-10,6
color = 0
invertall = 1
persistent = 0

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=190
time = 60
add = 40,40,40
sinadd = 30,30,30,5
color = 0
invertall = 1
persistent = 0

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=230
time = 60
add = 80,80,80
sinadd = 60,60,60,4
color = 0
invertall = 1
persistent = 0

[State 2506, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1, >=270
time = 60
add = 100,100,100
sinadd = 80,80,80,3
color = 0
invertall = 1
persistent = 0

[State 2506, TargetState]
type = TargetState
trigger1 = time = 289
value = 2507

[State 2506, VarRandom]; ---- var(4) survive chance judge (20%)
type = VarRandom
trigger1 = 1
v = 4
range = 1,100
persistent = 0

[State 2506, ChangeState]
type = ChangeState
trigger1 = Time = 290
value = 2508

;Jibaku (Fallen of Steel Castle) P2STATENO knock out ---------------------------
[Statedef 2507]
type    = A
movetype = H
physics = N
velset = -2,-5
sprpriority = -1

[State 2507, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2507, LifeSet]
type = lifeset
trigger1 = 1
value = 0
persistent = 0

[State 2507, PalFx]
type = AllPalFx
trigger1 = 1
time = 75
add = 80,-44,-124
sinadd = 30,30,0,10
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 2507, VelAdd]
type = VelAdd
Trigger1 = time = [0,79]
y = .08

[State 2507,  VelAdd]
type = VelAdd
Trigger1 = time >= 80
y = .4

[State 2507, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = selfAnimExist(5052)
value = 5052

[State 2507, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
trigger1 = !selfAnimExist(5052)
value = 2233

[State 2507, ChangeAnim]
type = ChangeAnim
trigger1 = time = 80
trigger1 = selfAnimExist(5062)
value = 5062

[State 2507, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 80
trigger1 = !selfAnimExist(5062)
value = 2234

[State 2507, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time >= 20
value = 5100

;Jibaku (Fallen of Steel Castle) P1STATENO knock out ---------------------------
[Statedef 2508]
type    = A
movetype = H
physics = N
velset = -2,-5
sprpriority = -1
anim = 5052

[State 2508, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2508, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 2503
ignorehitpause = 1
persistent = 0

[State 2508, PlaySnd]; ---- explod sound
type = PlaySnd
trigger1 = time = 0
value = S0,59

[State 2508, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 2408

[State 2508, VarSet]
type = VarSet
trigger1 = 1
var(22) = 200
ignorehitpause = 1
persistent = 0

[State 2508, VarAdd]
type = VarAdd
trigger1 = var(22)
trigger1 = time > 79
var(22) = -7
ignorehitpause = 1

[State 2508, BGPalFx]
type = BGPalFx
trigger1 = var(22)
time = 1
add = var(22),-25,-25
;mul = 256,256,256
sprpriority = 5
ignorehitpause = 1

[State 2508, Explod]
type = Explod
trigger1 = time = 0
anim = 2216
postype = p1
facing = -1
scale = 2,2
pos = 30,-10 ;30,-50
pausemovetime = 9999
ownpal = 1
supermove = 1
sprpriority = 6
ignorehitpause = 1

[State 2508, EnvColor]
type = EnvColor
trigger1 = 1
value = 255,255,255
time = 2
under = 0
ignorehitpause = 1
persistent = 0

[State 2508, LifeSet]; ---- 90% chance dead
type = LifeSet
trigger1 = var(4) = [1,89]
value = 0
persistent = 0

[State 2508, LifeSet]; ---- 10% chance survive
type = LifeSet
trigger1 = var(4) = [90,100]
value = 1
persistent = 0

[State 2508, PalFx]
type = AllPalFx
trigger1 = 1
time = 75
add = 80,-44,-124
sinadd = 30,30,0,10
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 2508, VelAdd]
type = VelAdd
Trigger1 = time = [0,79]
y = .08

[State 2508, VelAdd]
type = VelAdd
Trigger1 = time >= 80
y = .4

[State 2508, ChangeAnim]
type = ChangeAnim
trigger1 = time = 80
value = 5062

[State 2508, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = time >= 25
value = 5100

;Jibaku (Fallen of Steel Castle) victim P2STATENO dizzy+palfx ------------------
[Statedef 2509];(2104)
type    = S
movetype= H
physics = S
velset = 0,0

[State 2509, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2509, HitFallSet]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 2509, ChangeAnim]; ---- dizzy
type = ChangeAnim
trigger1 = AnimExist(5300)
trigger1 = time = 0
value = 5300

[State 2509, ChangeAnim]
type = ChangeAnim2
trigger1 = !AnimExist(5300)
trigger1 = time = 0
value = 2014

[State 2509, PowerAdd]
type = PowerAdd
trigger1 = time >= 30+170
value = -50
ignorehitpause = 1
;persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 30+170
time = 60
add = -150,-150,-150
sinadd = -100,-100,-100,9
color = 256
invertall = 0
persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 70+170
time = 60
add = -100,-100,-100
sinadd = -70,-70,-70,8
color = 256
invertall = 0
persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 110+170
time = 60
add = -50,-50,-50
sinadd = -40,-40,-40,7
color = 256
invertall = 0
persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 150+170
time = 60
add = 0,0,0
sinadd = 40,40,40,6
color = 256
invertall = 0
persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 190+170
time = 60
add = 40,40,40
sinadd = 80,80,80,5
color = 256
invertall = 0
persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 230+170
time = 60
add = 80,80,80
sinadd = 120,120,120,5
color = 256
invertall = 0
persistent = 0

[State 2509, PalFX]
type = PalFX
trigger1 = time >= 270+170
time = 60
add = 100,100,100
sinadd = 160,160,160,5
color = 256
invertall = 0
persistent = 0

;-------------------------------------------------------------------------------
; Hyper Move: Azure Wrath (Extintion)
[statedef 2600]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = 2
anim = 2600
facing = 1
ctrl = 0

[state 2600, NotHitBy]; ---- Azure Wrath completely invincible
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

[State 2600, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = [1000,1062]
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2600, PalFX]
type = PalFX
trigger1 = Time < 16 && Time % 2
trigger1 = prevstateno = 1070 || prevstateno = 1080
time = 1
add = 255,255,255
ignorehitpause = 1

[State 2600, EnvColor]
type = EnvColor
trigger1 = Time = 0
time = 2
value = 255,255,255
under = 1

[State 2600, AssertSpecial]
type = null;AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NoBG

[state 2600, PowerAdd]; ----Dreamcancel poweradd
type = PowerAdd
trigger1 = prevstateno = 1070 || prevstateno = 1080
value = -1000
ignorehitpause = 1
persistent = 0

[State 2600, Helper]; ---- DreamCancel Helper
type = Helper
trigger1 = prevstateno = 1070
trigger2 = prevstateno = 1080
helpertype = normal ;player
name = "DreamCancel"
ID = 10000
stateno = 10000
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[state 2600, PowerAdd]; ---- SuperCancel poweradd
type = PowerAdd
trigger1 = prevstateno = [1000,1062]
value = -1000
ignorehitpause = 1
persistent = 0

[State 2600, Helper]; ---- SuperCancel Helper
type = Helper
trigger1 = prevstateno = [1000,1062]
helpertype = normal ;player
name = "SuperCancel"
ID = 10001
stateno = 10001
pos = 160,-120
postype = left    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 2600, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
anim = -1
sound = S0,70 ;64
;pos =
movetime = 30
darken = 1
p2defmul = 1 ;ifelse(palno=12,1,ifelse(((prevstateno=[1000,1062])||(prevstateno=[1070,1080])),1,0))
poweradd = -3000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

[State 2600, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,40 ;44
channel = 0

[State 2600, PlaySnd]; ---- sound
type = PlaySnd
trigger1 = Time >= 38
value = S0,77
channel = 1
loop = 1
pan = -50
persistent = 0

[State 2600, PlaySnd]; ---- sound
type = PlaySnd
trigger1 = Time >= 40
value = S0,77
channel = 2
loop = 1
pan = 50
persistent = 0

[State 2600, Explod]; ---- XI_supermove_lv3
type = Explod
trigger1 = Time = 0
anim = 11001
pos = -96,-155
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
sprpriority = -1
ownpal = 1
removeongethit = 1

[State 2600, Explod]; ---- XI_supermove_lv3_foreground
type = Explod
trigger1 = Time = 10
anim = 11000
pos = -57,-120
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
sprpriority = 9
ownpal = 1
removeongethit = 1

[State 2600, Explod]; ---- Azure Wrath energy BG
type = Explod
triggerall = !NumExplod(2602)
trigger1 = Time >= 39
anim = 2602
ID = 2602
pos = 0,0
scale = 2.5
postype = back
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 0
sprpriority = 9
ownpal = 1
ignorehitpause = 1

[State 2600, Explod]; ---- Azure Wrath energy shockwave
type = Explod
triggerall = !NumExplod(2603)
trigger1 = Time >= 39
anim = 2603
ID = 2603
pos = 0,0
scale = 2
postype = back
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 0
sprpriority = 9
ownpal = 1
ignorehitpause = 1

;***********************************************************
;Azure Wrath Special Effects
;written by Eagrose
;*******************
[State 2600, Explod]; ---- Azure Wrath energy ball1
type = Explod
triggerall = Time >= 39
trigger1 = time%30=0
anim = 2611
ID = 2611
pos = -30,40
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 15,0
accel = 0,0
random = 0,0
removetime = 24
;supermove
;pausemove
scale = .49,.49
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
;persistent =

[State 2600, Explod]; ---- Azure Wrath energy ball1 trail
type = Explod
triggerall = Time >= 60
trigger1 = time%30=0
trigger2 = time%30=4
trigger3 = time%30=8
trigger4 = time%30=12
trigger5 = time%30=16
trigger6 = time%30=20
trigger7 = time%30=24
anim = 2610
ID = 2610
pos = (-30+time%30*15),40
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
;supermove
;pausemove
scale = 1,1
sprpriority = 8
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
;persistent =

;*******************
[State 2600, Explod]; ---- Azure Wrath energy ball2
type = Explod
triggerall = Time >= 39
trigger1 = (time-10)%30=0
anim = 2611
ID = 2611
pos = -30,120
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 15,0
accel = 0,0
random = 0,0
removetime = 24
;supermove
;pausemove
scale = .49,.49
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
;persistent =

[State 2600, Explod]; ---- Azure Wrath energy ball2 trail
type = Explod
triggerall = Time >= 40
trigger1 = (time-10)%30=0
trigger2 = (time-10)%30=4
trigger3 = (time-10)%30=8
trigger4 = (time-10)%30=12
trigger5 = (time-10)%30=16
trigger6 = (time-10)%30=20
trigger7 = (time-10)%30=24
anim = 2610
ID = 2610
pos = (-30+(time-10)%30*15),120
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
;supermove
;pausemove
scale = 1,1
sprpriority = 8
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
;persistent =

;*******************
[State 2600, Explod]; ---- Azure Wrath energy ball3
type = Explod
triggerall = Time >= 39
trigger1 = (time-20)%30=0
anim = 2611
ID = 2611
pos = -30,200
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 15,0
accel = 0,0
random = 0,0
removetime = 24
;supermove
;pausemove
scale = .49,.49
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
;persistent =

[State 2600, Explod]; ---- Azure Wrath energy ball3 trail
type = Explod
triggerall = Time >= 50
trigger1 = (time-20)%30=0
trigger2 = (time-20)%30=4
trigger3 = (time-20)%30=8
trigger4 = (time-20)%30=12
trigger5 = (time-20)%30=16
trigger6 = (time-20)%30=20
trigger7 = (time-20)%30=24
anim = 2610
ID = 2610
pos = (-30+(time-20)%30*15),200
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
;supermove
;pausemove
scale = 1,1
sprpriority = 8
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
;persistent =

;***********************************************************

[State 2600, VarSet]; ---- var(1) PalFX/BGpalfx changing
type = VarSet
trigger1 = 1
var(1) = 20
persistent = 0

[State 2600, VarAdd]; ---- var(1) PalFX/BGpalfx changing
type = VarAdd
trigger1 = var(1) < 100
trigger1 = time <= 31
var(1) = 5
supermove = 1

[State 2600, PalFX]
type = PalFX
trigger1 = time <= 30
time = 220
add = 0,0,var(1)
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1

[State 2600, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 10
add = 0,0,var(1)
mul = 256,256,256
invertall = 0
ignorehitpause = 1
supermove = 1

[State 2600, PalFX]
type = PalFX
trigger1 = time = [31,39]
time = 10
add = 0,0,100
mul = 256,256,256
sinadd = 100,100,100,16
invertall = 0
color = 256
ignorehitpause = 1

[State 2600, PalFX]
type = PalFX
trigger1 = time >= 39
time = 220
add = 0,0,100
mul = 256,256,256
sinadd = 100,100,100,16
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0

[state 2600, Helper]; ---- Azure Wrath Reversaldef Helper
type = Helper
Trigger1 = !NumHelper(2606)
Trigger1 = time >= 39
helpertype = normal
name="Azure Wrath Reversaldef Helper"
stateno = 2606
ID= 2606
pos = 0,0
postype = p1
keyctrl = 0
facing = 1
supermovetime=99999
pausemovetime=99999
ownpal = 1

[state 2600, Helper]; ---- Azure Wrath HitDef Helper
type = Helper
Triggerall = time >= 39
triggerall = Time <= 235
Trigger1 = time%4 = 0
helpertype = normal
name="Azure Wrath HitDef Helper"
stateno = 2601
ID= 2601
pos = 0,0
postype = p1
keyctrl = 0
facing = 1
supermovetime=99999
pausemovetime=99999
persistent = 1
ownpal = 1

;[state 2600, Helper]; ---- Azure Wrath HitDef Helper 2
;type = Helper
;Triggerall = time >= 19
;triggerall = Time <= 217
;Trigger1 = time%4 = 2
;helpertype = normal
;name="Azure Wrath HitDef Helper"
;stateno = 2601
;ID= 2602
;pos = 0,0
;postype = p1
;keyctrl = 0
;facing = 1
;supermovetime=99999
;pausemovetime=99999
;persistent = 1
;ownpal = 1

[state 2600, Helper]; ---- Azure Wrath HitDef End Helper
type = Helper
Trigger1 = time = 236
helpertype = normal
name="Azure Wrath HitDef End Helper"
stateno = 2601
ID= 2602 ;2603
pos = 0,0
postype = p1
keyctrl = 0
facing = 1
supermovetime=99999
pausemovetime=99999
persistent = 1
ownpal = 1

[State 2600, EnvShake]
type = EnvShake
Trigger1 = time = 39
time = 194
freq = 90
ampl = -6
phase = 120
ignorehitpause = 1
persistent = 0

[State 2600,  VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)
ignorehitpause = 1
supermove = 1

[State 2600,  VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)
ignorehitpause = 1
supermove = 1

[State 2600,  VarRandom]; ---- var(12) spark pos Random
type = VarRandom
trigger1 = time%4=0
v = 12
range = 0,1
ignorehitpause = 1
supermove = 1

[State 2600,  RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 2600 ; ---- DEBUG
id = 2602
ignorehitpause = 1

[State 2600,  RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 2600 ; ---- DEBUG
id = 2603
ignorehitpause = 1

[State 2600,  RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 2600 ; ---- DEBUG
id = 2610
ignorehitpause = 1

[State 2600,  RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 2600 ; ---- DEBUG
id = 2611
ignorehitpause = 1

[State 2600, ChangeState]
type = ChangeState
trigger1 = Time = 239;223
value = 2602

; Azure Wrath HitDef Helper & HitDef End Helper---------------------------------
; (2 hit per helper)
[statedef 2601]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = -1
anim = ifelse(IsHelper(2601),2605,2607)

[State 2601, HitOverRide]
type = HitOverRide
trigger1 = 1
time = -1
slot = 0
attr = SCA
stateno = 2705
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 2601, NotHitby]
type = NotHitby
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2601, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2601, Projectile]; ---- projectile nullifier to SP
type = Projectile
projID = 2601
trigger1 = animelem = 1
attr = S, SP
hitflag = P
guardflag = N
projremove = 0
Projremovetime = 4
projhits = 1
projremanim = -1
projhitanim = -1
projpriority = 9999999 ;max priority
projanim = 2606
offset = 0,0
velocity = 0,0

;-----------------------------------
[State 2601, HitDef]; ---- common 1st hit, show hit/guard spark, sound, palfx
type = HitDef
trigger1 = animelem = 1
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
givepower = 0,-10    ;No Power Give, lost power when guarding
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 9999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(5*root,fvar(3)),floor(1*root,fvar(3))
pausetime = 0,1
;guard.pausetime = 0,0
sparkno = 1+var(12)
guard.sparkno = 40
sparkxy = -15+ifelse(root,var(12)=1,5,-5),-65 + root,var(11)+ifelse(root,var(12)=1,10,-10)
hitsound = S0,80 ;17 78 79 80
guardsound = S0,10
ground.type = Low      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 12    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 15    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.3    ;y acceleration
ground.velocity = -.25,-1
guard.velocity = -1    ;Defaults to x_velocity of ground.velocity
air.velocity = -.25,-.4    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
p2facing = 1
;p1stateno = 0
p2stateno = 2707
;p2getp1state = 1
;forcestand = 0
fall = 0
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 0
guard.kill = 1
fall.kill = 0
numhits = 1
palfx.time = 6
palfx.add = 0,0,25
palfx.mul = 175,175,256
palfx.invertall = 1
envshake.time = 0
;envshake.freq = 0
;envshake.ampl = 0
;envshake.phase = 0
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause = 1
;persistent =

;-----------------------------------
[State 2601, HitDef]; ---- Helper(2601), 2nd hit, no spark show, no sound, no palfx
type = HitDef
triggerall = IsHelper(2601)
trigger1 = animelem = 3
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
givepower = 0,-10   ;No Power Give, lost power when guarding
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 9999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(5*root,fvar(3)),floor(1*root,fvar(3))
pausetime = 0,1
;guard.pausetime = 0,0
sparkno = -1 ;1+var(12)
guard.sparkno = -1 ;40
;sparkxy = -15+ifelse(var(12)=1,0,-5),-65 + var(11)+ifelse(var(12)=1,10,-10)
;hitsound = S0,8 ;78 ;17
;guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 12    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 15    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.3    ;y acceleration
ground.velocity = -.25,-1
guard.velocity = -1    ;Defaults to x_velocity of ground.velocity
air.velocity = -.25,-.4    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
p2facing = 1
;p1stateno = 0
p2stateno = 2707
;p2getp1state = 1
;forcestand = 0
fall = 0
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 0
guard.kill = 1
fall.kill = 0
numhits = 1
palfx.time = 0
;palfx.add = 0,0,25
;palfx.mul = 175,175,256
;palfx.invertall = 1
envshake.time = 0
;envshake.freq = 0
;envshake.ampl = 0
;envshake.phase = 0
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;ignorehitpause = 1
;persistent =

;-----------------------------------
[State 2601, HitDef]; ---- Helper(2602), HitDef Helper end hit (2nd hit)
type = HitDef
triggerall = IsHelper(2602)
trigger1 = animelem = 3
attr = S,HP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
givepower = 0,-10    ;No Power Give, lost power when guarding
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 9999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = floor(145*root,fvar(3)),floor(15*root,fvar(3))
pausetime = 0,1
;guard.pausetime = 0,0
sparkno = 2
guard.sparkno = 40
sparkxy = -15,-65 + root,var(11)
hitsound = S0,71
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 12    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 15    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 2    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.4    ;y acceleration
ground.velocity = -12,-.8
guard.velocity = -15    ;Defaults to x_velocity of ground.velocity
air.velocity = -12,-.8    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
p2facing = 1
;p1stateno = 0
p2stateno = 2603
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 0
numhits = 1
palfx.time = 80
palfx.add = 0,0,100
palfx.mul = 250,250,250
palfx.sinadd = 200,200,100,5
envshake.time = 30
envshake.freq = 60
envshake.ampl = -7
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
ignorehitpause = 1
;persistent =

;-----------------------------------
[State 2601, HitDef]; ---- guard-break effect after End-hit guarded
type = HitDef
triggerall = IsHelper(2602)
triggerall = MoveGuarded
trigger1 = animelem = 4
attr = S,HT    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MA    ;HLAFDP+-
guardflag = N    ;MHLA
getpower = 0,0
givepower = 0,0    ;No Power Give
;affectteam = E    ;B,E,F
animtype = hard    ;light,medium,hard,back,up,diagup
air.animtype = hard    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 9999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = 0,0
pausetime = 0,5
;guard.pausetime = 0,0
sparkno = -1
guard.sparkno = -1
;sparkxy = -15,-65 + var(11)
hitsound = S0,71
;guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 0    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
;yaccel = 0.4    ;y acceleration
;ground.velocity = -10,-.8
;guard.velocity = -15    ;Defaults to x_velocity of ground.velocity
;air.velocity = -10,-.8    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
p2facing = 1
;p1stateno = 0
p2stateno = 2605
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 0
guard.kill = 0
fall.kill = 0
numhits = 0
palfx.time = 37
palfx.add = 0,0,100
palfx.mul = 250,250,250
palfx.sinadd = 200,200,100,5
envshake.time = 30
envshake.freq = 60
envshake.ampl = -7
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
ignorehitpause = 1
;persistent =

;-----------------------------------

[State 2601, DestroySelf]
type = DestroySelf
trigger1 = IsHelper(2601) && Time >= 5
trigger2 = IsHelper(2602) && Time >= 9
trigger3 = MoveReversed
ignorehitpause = 1

; Azure Wrath end --------------------------------------------------------------
[Statedef 2602]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = 2
anim = 2601
ctrl = 0

[State 2602, NotHitBy]; ---- invincible end
type = NotHitBy
trigger1 = animelem = 2, <=0
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2602,  RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 2602
ignorehitpause = 1
persistent = 0

[State 2602,  RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 2603
ignorehitpause = 1
persistent = 0

[State 2602,  RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 2610
ignorehitpause = 1
persistent = 0

[State 2602,  RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 2611
ignorehitpause = 1
persistent = 0

[State 2602, EnvColor]
type = EnvColor
trigger1 = time >= 3
value = 255,255,255
time = 2
under = 0
ignorehitpause = 1
persistent = 0

[State 2602, Explod]
type = Explod
trigger1 = time >= 0
anim = 2608
ID = 2608
pos = 0,0
postype = left  ;p2,front,back,left,right
facing = 1
;vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove = 0
pausemove = 1
scale = 1,1
sprpriority = 9
;ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 2602, PlaySnd]
type = PlaySnd
trigger1 = time >= 3
value = S0,82
pan = -50
ignorehitpause = 1
persistent = 0

[State 2602, PlaySnd]
type = PlaySnd
trigger1 = time >= 4
value = S0,82
pan = 50
ignorehitpause = 1
persistent = 0

[State 2600, VarAdd]; ---- var(1) palfx/BGpalfx changing
type = VarAdd
trigger1 = 1
var(1) = -20
ignorehitpause = 1
persistent = 0

[State 2600, VarAdd]; ---- var(1) palfx/BGpalfx changing
type = VarAdd
trigger1 = var(1) > 0
var(1) = -2
supermove = 1

[State 2600, BGPalFX]
type = BGPalFX
trigger1 = var(1) > 0
time = 10
add = 0,0,var(1)
mul = 256,256,256
invertall = 0
ignorehitpause = 1

[State 2600, PalFX]
type = PalFX
trigger1 = var(1) > 0
time = 10
add = 0,0,var(1)
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1

[State 2600, StopSnd]
type = StopSnd
trigger1 = animelem = 1, >2
channel = 1
ignorehitpause = 1
persistent = 0

[State 2600, StopSnd]
type = StopSnd
trigger1 = animelem = 1, >2
channel = 2
ignorehitpause = 1
persistent = 0

[State 2602, ChangeState]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

; Azure Wrath knock off victim P2STATENO hit off -------------------------------
[Statedef 2603]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 2603, NotHitBy]; ---- Reversaled helper debug
type = NotHitBy
trigger1 = isHelper
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2603, RemoveExplod]; ---- Reversaled helper debug
type = RemoveExplod
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2603, DestroySelf]; ---- Reversaled helper debug
type = DestroySelf
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2603, HitVelSet]; ---- GetHit Vel function
type = HitVelSet
trigger1 = 1
x = 1
persistent = 0

[State 2604, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State 2604, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
;persistent =

[State 2604, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 911
ignorehitpause = 1

[state 2604, ChangeState]
type = ChangeState
Trigger1 = backedgedist <= 0
Trigger2 = frontedgedist <= 0
value = 2604

; Azure Wrath knock off victim P2STATENO hit wall ------------------------------
[Statedef 2604]
type    = A
movetype= H
physics = N
velset = 4.5,-10
ctrl = 0

[State 2605, LifeAdd]
type = LifeAdd
Trigger1 = Time = 0
value = -10
kill = 0
absolute = 1

[State 1022, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn
ignorehitpause = 1

[State 2605, Turn]
type = Turn
trigger1 = time = 0
value = 1

[State 2605, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 912

[State 2605, VelAdd]
type = VelAdd
Trigger1 = time > 3
y = .5
x = .05

[State 2605, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;Azure Wrath guard-break P2STATENO ---------------------------------------------
[Statedef 2605]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 2605, NotHitBy]; ---- Reversaled helper debug
type = NotHitBy
trigger1 = isHelper
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2605, RemoveExplod]; ---- Reversaled helper debug
type = RemoveExplod
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2605, DestroySelf]; ---- Reversaled helper debug
type = DestroySelf
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2605, ChangeAnim2]
type = ChangeAnim2
Trigger1 = time = 0
value = 2609
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2605, PosAdd]
type = PosAdd
Trigger1 = time = [6,9]
x = -5.5
ignorehitpause = 1

[State 2605, PosAdd]
type = PosAdd
Trigger1 = time = [10,13]
x = -4.75
ignorehitpause = 1

[State 2605, PosAdd]
type = PosAdd
Trigger1 = time = [14,17]
x = -3.75
ignorehitpause = 1

[State 2605, PosAdd]
type = PosAdd
Trigger1 = time = [18,21]
x = -3
ignorehitpause = 1

[State 2605, PosAdd]
type = PosAdd
Trigger1 = time = [22,25]
x = -2.5
ignorehitpause = 1

[State 2605, PosAdd]
type = PosAdd
Trigger1 = time = [26,29]
x = -2
ignorehitpause = 1

[State 2605, SelfState]
type = SelfState
trigger1 = pos Y < 0
trigger1 = AnimTime = 0
value = 5030

[State 2605, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Azure Wrath reversaldef helper -----------------------------------------------
[statedef 2606]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = -1
anim = 2604
ctrl = 0

[State 2606, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2606, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2601, HitOverRide]
type = HitOverRide
trigger1 = 1
time = -1
slot = 1
attr = SCA
stateno = 2606
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2601, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,AA,AT,AP
hitflag = HLMAFDP
numhits = 0
sparkno = -1
priority = 99999, hit
p2stateno = 1026
ignorehitpause = 1

[State 2601, DestroySelf]
type = DestroySelf
trigger1 = Time >= 221
trigger2 = parent,stateno != 2600

;-------------------------------------------------------------------------------
; Ultimate Move: Armageddon
[statedef 2700]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = 2
;==========================================
anim = ifelse((var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)),2750,2700)
;=====================END=====================
ctrl = 0
facep2 = 1

[state 2700, NotHitBy]; ---- Armageddon completely invincible
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

;==========================================
[State 0, LifeSet]; 
type = LifeSet
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
TRIGGERALL = lifemax = [1,2147483647]
Trigger1 = roundstate != 2
Trigger2 = var(49) != [1,Lifemax]
value = lifemax
ignorehitpause = 1

[State 0, LifeSet]; 
type = LifeSet
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
TRIGGERALL = lifemax = [1,2147483647]
Trigger1 = roundstate = 2
Trigger1 = var(49) = [1,Lifemax]
value = var(49)
ignorehitpause = 1

[State 0, LifeSet]; lifemax
type = LifeSet
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
Trigger1 = lifemax != [1,2147483647]
value = 1000
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900)
ID = 11000
ignorehitpause = 1
persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900)
ID = 11001
ignorehitpause = 1
persistent = 0

[State 0, PlayerPush]
type = PlayerPush
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900)
value = 0
ignorehitpause = 1
;=====================END=====================

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 2700, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1
ignorehitpause = 1

[State 2700, EnvColor]
type = EnvColor
trigger1 = Time = 0
time = 2
value = 255,255,255
under = 1

[State 2700, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NoBG
ignorehitpause = 1

[State 2700, SuperPause]
type = SuperPause
Trigger1 = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900))
trigger1 = time = 0
time = 30
anim = -1
sound = -1
;pos =
movetime = 30
darken = 1
p2defmul = 1
poweradd = -4000
unhittable = 1
;endcmdbuftime = (winmugen only)
;pausebg =  (winmugen only)
ignorehitpause = 1
;persistent =

[State 0, PlaySnd];SuperPause snd
type = PlaySnd
trigger1 = time = 0
value = S0,70
ignorehitpause = 1

[State 2700, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,131 ;44
channel = 0

[State 2700, Explod]; ---- XI_supermove_lv3
type = Explod
trigger1 = Time = 0
anim = 11001
ID = 11001
pos = -96,-235
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 2147483648
pausemovetime = 2147483648
sprpriority = -1
ownpal = 1

[State 2700, Explod]; ---- XI_supermove_lv3_foreground
type = Explod
trigger1 = Time = 0
anim = 11000
ID = 11000
pos = -57,-200
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 2147483648
pausemovetime = 2147483648
sprpriority = 9
ownpal = 1

[State 2700, Helper]; ---- Armageddon ball launch visual Helper
type = Helper
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))
trigger1 = time = 11
helpertype = normal ;player
name = "Armageddon ball launch visual Helper"
ID = 2702
stateno = 2702
pos = 0,0
bindtime = 0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1

;==========================================
[State 2700, Helper]; ---- Armageddon ball launch visual Helper
type = Helper
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) ;==========================================
trigger1 = time >= 11
trigger1 = time <= 80
trigger1 = !numhelper(2702)
helpertype = player
name = "Armageddon ball launch visual Helper"
ID = 2702
stateno = 2702
pos = 0,0
bindtime = 0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 2147483648
pausemovetime = 2147483648
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
;=====================END=====================

[State 2700, PlaySnd]; ---- looping energy gathering sound
type = PlaySnd
trigger1 = time%60 = 0
value = S0,36
channel = 9
ignorehitpause = 1

[State 2700,  VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)
ignorehitpause = 1

[State 2700,  VarSet]; ---- var(11) set spark pos Y
type = VarSet
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)
ignorehitpause = 1

[State 2700, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = 1
var(12) = 0
persistent = 0

[State 2700, VarSet]; ---- var(12) set spark pos X
type = VarSet
trigger1 = var(12) != floor(p2dist X)
var(12) = floor(p2dist X)

[State 2700, VarSet]; ---- var(13) PalFX/BGpalfx changing
type = VarSet
trigger1 = 1
var(13) = 10
persistent = 0

[State 2700, VarAdd]; ---- var(13) PalFX/BGpalfx changing
type = VarAdd
triggerall = time >= 30
trigger1 = var(13) < 100
trigger1 = time%15=0
var(13) = 10
supermovetime = 99999
ignorehitpause = 1

[State 2700, VarAdd]; ---- var(13) PalFX/BGpalfx changing
type = VarAdd
triggerall = time >= 30
trigger1 = var(13) > 100
var(13) = 100
supermovetime = 99999
ignorehitpause = 1

[State 2700, BGPalFX]
type = BGPalFX
triggerall = time >= 30
trigger1 = time%15=0
time = 75
add = 0,0,0
mul = 265,265,265
sinadd = var(13),var(13),var(13),16
invertall = 0
ignorehitpause = 1

[State 2700, PalFXWiz]
type = PalFX
triggerall = time >= 0
trigger1 = time%15=0
time = 75
add = 75,75,75
mul = 256,256,256
sinadd = var(13),var(13),var(13),16
invertall = 0
color = 256
ignorehitpause = 0
persistent = 1

[State 2700, VarSet]; ---- var(14) EnvShake changing
type = VarSet
trigger1 = 1
var(14) = 60
persistent = 0

[State 2700, VarAdd]; ---- var(14) EnvShake changing
type = VarAdd
triggerall = time > 30
trigger1 = time%15=0
var(14) = 4
supermovetime = 99999
ignorehitpause = 1

[State 2700, EnvShake]
type = EnvShake
triggerall = time >= 30
trigger1 = time%15=0
time = 75
freq = var(14)
ampl = -2
phase = 120
ignorehitpause = 1
;persistent =

[State 2700, EnvShake]
type = EnvShake
triggerall = time >= 60
trigger1 = time%15=0
time = 75
freq = var(14)
ampl = -3
phase = 120
ignorehitpause = 1
;persistent =

[State 2700, EnvShake]
type = EnvShake
triggerall = time >= 90
trigger1 = time%15=0
time = 75
freq = var(14)
ampl = -4
phase = 120
ignorehitpause = 1
;persistent =

[State 2700, EnvShake]
type = EnvShake
triggerall = time >= 120
trigger1 = time%15=0
time = 75
freq = var(14)
ampl = -5
phase = 120
ignorehitpause = 1
;persistent =

[State 2700, EnvShake]
type = EnvShake
triggerall = time >= 150
trigger1 = time%15=0
time = 75
freq = var(14)
ampl = -6
phase = 120
ignorehitpause = 1
;persistent =

[State 2700, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = time = 120
value = S0,129
pan = 100
ignorehitpause = 1

[State 2700, PlaySnd]; ---- voice
type = PlaySnd
trigger1 = time = 120
value = S0,129
pan = -100
ignorehitpause = 1


[State 2700, Helper]; ---- Armageddon ball power gathering visual Helper
type = Helper
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900))
Triggerall = !NumHelper(2703)
Trigger1 = time >= 80
Trigger1 = time < 80+153
helpertype = normal ;player
name = "Armageddon ball power gathering visual Helper"
ID = 2703
stateno = 2703
pos = -15,-160
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1

;==========================================
[State 2700, Helper]; ---- Armageddon ball power gathering visual Helper
type = Helper
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900)
Triggerall = !NumHelper(2703)
Trigger1 = time >= 80
Trigger1 = time < 80+153
helpertype = player
name = "Armageddon ball power gathering visual Helper"
ID = 2703
stateno = 2703
pos = -15,-160
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 2147483648
pausemovetime = 2147483648
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
;=====================END=====================

[State 2700, Projectile]
type = Projectile
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900))
trigger1 = time = 0
trigger2 = time = 11
trigger3 = time = 22
trigger4 = time = 33
trigger5 = time = 44
trigger6 = time = 55
trigger7 = time = 66
trigger8 = time = 77
trigger9 = time = 88
trigger10 = time = 99
trigger11 = time = 110
trigger12 = time = 121
trigger13 = time = 132
ProjID = 2711
projanim = ifelse((time=[0,22]),2711,ifelse((time=[33,55]),2712,ifelse((time=[66,88]),2713,ifelse((time=[99,121]),2714,2715))))   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
projremanim = -1   ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = ifelse(time=132,91,11) ;223 ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 99999    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 999999999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 200    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 200
projheightbound = -360    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = -15,-160
postype = p1         ;p2,front,back,left,right
supermovetime = 2147483648
pausemovetime = 2147483648
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFP    ;HLAFDP+-
guardflag = N    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = DiagUp    ;light,medium,hard,back,up,diagup
air.animtype = DiagUp    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 999999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
;damage = floor(10*fvar(3)),floor(1*fvar(3))
damage = floor(10*fvar(3)),floor(1*fvar(3))
pausetime = 0,0
;guard.pause ,0
sparkno = 2
guard.sparkno = 40
sparkxy = var(12)+15, -76+var(11)+160
hitsound = S0,17
guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 3    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 5    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 5    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
guard.dist = 0    ;useful for trigger inguarddist
yaccel = 0.44    ;y acceleration
ground.velocity = -15,-3
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -15,-2    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
p2stateno = 2707
;p2getp1state = 1
forcestand = 1
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 30
palfx.add = 0,0,ifelse(fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(fvar(4)=0,100,200),5
envshake.time = 0
;envshake.freq = 0
;envshake.ampl = 0
;envshake.phase = 0
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1


[State 2700, Helper]; ---- gravitation set (right-hand)
type = Helper
triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))  ;==========================================
triggerall = !NumHelper(2706)
trigger1 = enemynear(floor(fvar(36))),Pos X > Pos X  ;
helpertype = normal
name = "2P push"
ID = 2706
pos = ( abs(enemynear(floor(fvar(36))),Pos x - Pos X) + enemynear(floor(fvar(36))),Const(size.ground.back)+15 ) , 0
;pos = ( abs(enemynear,Pos x - Pos X) + enemynear,Const(size.ground.back) + 15) , 0
facing = 1
postype = p1
stateno = 2706
keyctrl = 0
ownpal = 1
ground.back = 0  ; Player width (back, ground)
ground.front = 0  ; Player width (front, ground)
stand.friction = 0;.85  ; Friction coefficient when standing
crouch.friction = 0;.82  ; Friction coefficient when crouching
;supermovetime = 99999

[State 2700, Helper]; ---- gravitation set (left-hand)
type = Helper
triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))  ;==========================================
triggerall = !NumHelper(2706)
trigger1 = enemynear(floor(fvar(36))),Pos X < Pos X  ;
helpertype = normal
name = "2P push"
ID = 2706
pos = ( abs(enemynear(floor(fvar(36))),Pos x -Pos X) - enemynear(floor(fvar(36))),Const(size.ground.back)-15 ) , 0
;pos = ( abs(enemynear,Pos x -Pos X) - enemynear,Const(size.ground.back) - 15) , 0
facing = 1
postype = p1
stateno = 2706
keyctrl = 0
ownpal = 1
ground.back = 0  ; Player width (back, ground)
ground.front = 0  ; Player width (front, ground)
stand.friction = 0;.85  ; Friction coefficient when standing
crouch.friction = 0;.82  ; Friction coefficient when crouching
;supermovetime = 99999

[State 800, Repel] ;using reversaldef to reversal enemy's invincible attacks
type = ReversalDef
trigger1 = !((var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))  ;==========================================
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = HLMAFDP
pausetime = 0,0
guard = 0
animtype = DiagUp
numhits = 0
sparkno = -1
getpower = 0,0
givepower = 0,0
hitsound = S0,71
priority = 999, hit
sparkxy = 100, -100
ground.velocity = -20, -9.5
air.velocity = -20, -9.5
guard.cornerpush.veloff = -10
guard.velocity = -10
yaccel = .51
fall.xvelocity = -3.27;272725105286
fall.yvelocity = -3.25;555985694885
;p1stateno = 2305
p2stateno = 2720
damage = 0
fall.damage = 0
;2110 + (5 * (var(25) = 1 && var(32) = 0)) + (roundno >= 2 && var(25) = 1 && var(32) = 0)
fall = 1
p2facing = 1 ;(facing * -1)
;p1getp2facing = ifelse(facing = -1, 1, 0)
fall.recover = 0
;snap = ceil(24 * const(size.xscale)),0
guard.dist = 0

[State 2700, AttackDist]; ---- prevent auto guarding, allowing enemy wlk bwd
type = AttackDist
trigger1 = 1
value = 0

[State 0, Turn]; ---- turn if necessary
type = Turn
triggerall = time >= 80
trigger1 = facing = -1
trigger1 = Pos X < EnemyNear(floor(fvar(36))),Pos X
trigger2 = facing = 1
trigger2 = Pos X >= EnemyNear(floor(fvar(36))),Pos X
ignorehitpause = 1

;==========================================
[State 0, Projectile]
type = Projectile
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
trigger1 = time%2=0
ProjID = 2711
projanim = 2108   ;Defaults to 0 if omitted.
projhitanim = 2108   ;when projectile hits the opponent. Defaults to -1 (no change in animation).
projremanim = 2108   ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
projcancelanim = 2108   ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 2    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 9999999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 40    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 40
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 2147483647
pausemovetime = 2147483647
; ---- the following is HitDef content
attr = SCA,AA,AT,AP    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFD    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = diagup    ;light,medium,hard,back,up,diagup
air.animtype = diagup    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 9999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = 2147483648,2147483648
pausetime = 0,0
;guard.pause ,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S0,ifelse(gametime%20=0,71,-1) ;0,71
guardsound = S0,ifelse(gametime%20=0,71,-1) ;0,71
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
;yaccel = 0.5    ;y acceleration
ground.velocity = -8,-8
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = -8,-8    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
p2stateno = 2147483647
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 2147483648
air.fall = 1
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 20
palfx.add = 50,50,50
palfx.mul = 250,250,250
palfx.sinadd = 200,200,200,5
envshake.time = 10
envshake.freq = 120
envshake.ampl = -7
envshake.phase = 120
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent = 0
;=====================END=====================


;==========================================
;==================================================================
;Power Gathering Special Effects
;written by Eagrose
;==================================================================
[State 2702, VarSet]; ---- helper,var(1) random power atom changing
type = VarSet
trigger1 = 1
var(1) = 0
persistent = 0

[State 2702, VarSet]; ---- helper,var(2) random power atom changing
type = VarSet
trigger1 = 1
var(2) = 0
persistent = 0

;************************************************1st left-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(backedgedist)-30)>-130,-130,-(backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 80,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=0
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0 ;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************2nd center-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = -110,110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 130,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=4
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************3rd right-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((frontedgedist)+30)<130,130,(frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 80,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=8
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************4th left-center area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(backedgedist)-30)>-130,-130,-(backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -79,79
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=12
trigger2 = time%20=8
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************5th right-center area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((frontedgedist)+30)<130,130,(frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -79,79
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=16
trigger2 = time%20=8
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************6th left-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(backedgedist)-30)>-130,-130,-(backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-80
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = time%15=0
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************7th center-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = -79,79
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-130
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = time%15=5
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************8th right-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((frontedgedist)+30)<130,130,(frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-80
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
triggerall = StateNo = 2700
triggerall = time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = time%15=10
anim = ifelse(fvar(4)=0,2717,2727)
ID = 2716
pos = var(1)-15,var(2)-160
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
supermove = 1
pausemove = 1
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;==================================================================

[State 2700, ChangeState]
type = ChangeState
trigger1 = Time = 223
value = 2701

; Armageddon ball throw out ----------------------------------------------------
[statedef 2701]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = 2
anim = 2701
anim = ifelse((var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)),27010,2701) ;==========================================
ctrl = 0

[state 2701, NotHitBy]; ---- Armageddon ball completely invincible
type = NotHitBy
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))
trigger1 = animelem = 1, >=0
trigger1 = animelem = 21, <0
value = SCA
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

;==========================================
[state 2701, NotHitBy]; ---- Armageddon ball completely invincible
type = NotHitBy
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

[State 0, LifeSet]; 
type = LifeSet
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
TRIGGERALL = lifemax = [1,2147483647]
Trigger1 = roundstate != 2
Trigger2 = var(49) != [1,Lifemax]
value = lifemax
ignorehitpause = 1

[State 0, LifeSet]; 
type = LifeSet
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
TRIGGERALL = lifemax = [1,2147483647]
Trigger1 = roundstate = 2
Trigger1 = var(49) = [1,Lifemax]
value = var(49)
ignorehitpause = 1

[State 0, LifeSet]; lifemax
type = LifeSet
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
Trigger1 = lifemax != [1,2147483647]
value = 1000
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900)
value = 0
ignorehitpause = 1
;=====================END=====================


[State 2700, Helper]; ---- Armageddon ball power gathering visual Helper
type = Helper
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900))
Triggerall = !NumHelper(2703)
Trigger1 = time < 42
helpertype = normal ;player
name = "Armageddon ball power gathering visual Helper"
ID = 2703
stateno = 2703
pos = -15,-160
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 30
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1

;==========================================
[State 2700, Helper]; ---- Armageddon ball power gathering visual Helper
type = Helper
Triggerall = (var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900)
Triggerall = !NumHelper(2703)
Trigger1 = time < 42
helpertype = player
name = "Armageddon ball power gathering visual Helper"
ID = 2703
stateno = 2703
pos = -15,-160
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 2147483648
pausemovetime = 2147483648
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
;=====================END=====================

[State 2700, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1
ignorehitpause = 1

[State 2701, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,130 ;47
channel = 0
pan = -50

[State 2701, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,130 ;47
channel = 1
pan = 50

[State 2701, BGPalFX]
type = BGPalFX
trigger1 = Time = 0
time = 70+ (FrontEdgeDist+140)/15*5
add = 0,0,ifelse(fvar(4)=0,25,0)
mul = 265,265,265
sinadd = 100,100,100,16
invertall = 0
ignorehitpause = 1

[State 2701, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 70+ (FrontEdgeDist+140)/15*5
freq = 120
ampl = -6
phase = 120
ignorehitpause = 1
;persistent =

[State 2701, VarSet]; ---- fvar(11) PalFX
type = VarSet
trigger1 = 1
fvar(11) = 100
persistent = 0

[State 2701, VarAdd]; ---- fvar(11) PalFX
type = VarAdd
triggerall = animelem = 10, >=0
trigger1 = fvar(11) > 0
fvar(11) = -.85

[State 2701, VarAdd]; ---- fvar(11) PalFX
type = VarSet
trigger1 = fvar(11) <= 0
fvar(11) = 0

[State 2701, PalFX]
type = PalFX
trigger1 = fvar(11) > 0
time = 1
;add = floor(fvar(11)),floor(fvar(11)),floor(fvar(11)*1.5)
add = floor(fvar(11)),floor(fvar(11)),ifelse(fvar(4)=0,floor(fvar(11)*1.5),floor(fvar(11)))
mul = 256,256,256
invertall = 0
color = 256
ignorehitpause = 1
;persistent =

[State 2701, Projectile]
type = Projectile
projID = 2701
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900))
trigger1 = time = 24
projremove = 0
Projremovetime = 8
projhits = 99999
;projmisstime = 4
projremanim = -1
;projhitanim = -1
projpriority = 999999999
;projremove = 1344
projanim = 2704
offset = -5,-160
velocity = 0,0
attr = S, HA
;damage = floor(10*fvar(3)),floor(1*fvar(3))
damage = floor(10*fvar(3)),floor(1*fvar(3))
getpower = 0,0
givepower = 10,0
animtype = DiagUp
guardflag = M
hitflag = MAFP
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
;hitsound = S0,17 ;ifelse(random <= 666,17,-1)
;guardsound = S0,10 ;ifelse(random <= 666,10,-1)
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
guard.hittime = 5
yaccel = 0.25
ground.velocity = -6,-2.5
air.velocity = -6,-2
fall = 1
fall.recover = 0
sprpriority = 4
ignorehitpause = 1
palfx.time = 30
palfx.add = 0,0,ifelse(fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(fvar(4)=0,100,200),5
p2stateno = 2707
supermovetime = 2147483648
pausemovetime = 2147483648

[State 2701, Projectile]
type = Projectile
projID = 2701
Triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && stateno != 5900))
trigger1 = time = 32
projremove = 0
Projremovetime = 8
projhits = 99999
;projmisstime = 4
projremanim = -1
;projhitanim = -1
projpriority = 999999999
;projremove = 1344
projanim = 2704
offset = 53,-144
velocity = 0,0
attr = S, HA
;damage = floor(10*fvar(3)),floor(1*fvar(3))
damage = floor(10*fvar(3)),floor(1*fvar(3))
getpower = 0,0
givepower = 10,0
animtype = DiagUp
guardflag = M
hitflag = MAFP
pausetime = 0,10
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
;hitsound = S0,17 ;ifelse(random <= 666,17,-1)
;guardsound = S0,10 ;ifelse(random <= 666,10,-1)
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
guard.hittime = 5
yaccel = 0.25
ground.velocity = -4,-2.5
air.velocity = -4,-2
fall = 1
fall.recover = 0
sprpriority = 4
ignorehitpause = 1
palfx.time = 30
palfx.add = 0,0,ifelse(fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(fvar(4)=0,100,200),5
p2stateno = 2707
supermovetime = 2147483648
pausemovetime = 2147483648

[State 2701, Helper]; ---- gravitation set (left-hand)
type = Helper
triggerall = !((var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))  ;==========================================
triggerall = animelem = 1, >=0
triggerall = animelem = 5, <0
triggerall = !NumHelper(2706)
trigger1 = enemynear(floor(fvar(36))),Pos X < Pos X  ;
helpertype = normal
name = "2P push"
ID = 2706
pos = ( abs(enemynear(floor(fvar(36))),Pos x -Pos X) - enemynear(floor(fvar(36))),Const(size.ground.back)-15 ) , 0
;pos = ( abs(enemynear,Pos x -Pos X) - enemynear,Const(size.ground.back) - 15) , 0
facing = 1
postype = p1
stateno = 2706
keyctrl = 0
ownpal = 1
ground.back = 0  ; Player width (back, ground)
ground.front = 0  ; Player width (front, ground)
stand.friction = 0;.85  ; Friction coefficient when standing
crouch.friction = 0;.82  ; Friction coefficient when crouching
;supermovetime = 99999
supermovetime = 2147483648
pausemovetime = 2147483648


[State 2701, Helper]; ---- Armageddon ball Proj Helper
type = Helper
trigger1 = !((var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)))
trigger1 = time = 41
helpertype = normal ;player
name = "Armageddon ball Proj Helper"
ID = 2704
stateno = 2704
pos = 50,-110
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

;==========================================
[State 2701, Helper]; ---- Armageddon ball Proj Helper
type = Helper
trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) ||  (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
trigger1 = !numhelper(2704)
trigger1 = time >= 41
helpertype = player
name = "Armageddon ball Proj Helper"
ID = 2704
stateno = 2704
pos = 50,-110
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 2147483648
pausemovetime = 2147483648
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0
;==========================================

;==========================================
;[State 0, ChangeState]
;type = ChangeState
;triggerall = palno = 9
;Trigger1 = win
;value = 180

;[State 0, ChangeState]
;type = ChangeState
;TriggerAll = !IsHelper(97864) ; ---- Not Shadow Clone Igniz
;TriggerAll = !NumHelper(97864) && !NumHelper(46879)
;trigger1 = palno = 9
;trigger1 = AnimTime = 0
;value = 3000

;[State 0, ChangeState]
;type = ChangeState
;trigger1 = palno = 9
;trigger1 = roundstate = 4
;trigger1 = AnimTime = 0
;value = 181

[State 0, ChangeState]
type = ChangeState
Trigger1 = (var(51)=6666 && var(58)=1 && var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
trigger1 = Animelem = 17, >=0
value = 2700
;=====================END=====================


[State 2701, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Armageddon ball launch visual Helper -----------------------------------------
[Statedef 2702]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = ifelse(root,fvar(4)=0,2710,2720)
sprpriority = 3

;==========================================
[State 5900, 1] ;Clear all int variables
type = VarRangeSet
Trigger1 = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
value = 0
persistent = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
Trigger1 = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
fvalue = 0
persistent = 0
;=====================END=====================

[State 2702, NotHitBy]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 2702
time = -1
ignorehitpause = 1

[State 2702, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
;persistent =

[State 2704, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2704, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 12
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 15
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 2
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 18
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 21
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 4
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 24
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 5
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 30
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 6
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 36
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 7
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 41
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 8
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 45
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 9
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 48
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 10
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 50
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 11
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 52
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 12
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 54
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 13
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 57
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 14
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 60
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 15
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 63
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 16
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 66
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 11
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 69
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 17
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 72
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 18
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 75
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 19
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 78
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 20
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 81
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 21
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 84
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 22
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time = 86
value = ifelse(root,fvar(4)=0,2710,2720)
elem = 23
ignorehitpause = 1


[State 2702, AngleDraw]; ---- Expanding 1
type = AngleDraw
trigger1 = animelem = 1, >=0
trigger1 = animelem = 2, <0
scale = .18,.18

[State 2702, BindToParent]; ---- Expanding 1
type = BindToParent
trigger1 = animelem = 1, >=0
trigger1 = animelem = 2, <0
time = -1
facing = 1
pos = 38,-100
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 2
type = AngleDraw
trigger1 = animelem = 2, >=0
trigger1 = animelem = 3, <0
scale = .23,.23

[State 2702, BindToParent]; ---- Expanding 2
type = BindToParent
trigger1 = animelem = 2, >=0
trigger1 = animelem = 3, <0
time = -1
facing = 1
pos = 38,-122
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 3
type = AngleDraw
trigger1 = animelem = 3, >=0
trigger1 = animelem = 4, <0
scale = .3,.3

[State 2702, BindToParent]; ---- Expanding 3
type = BindToParent
trigger1 = animelem = 3, >=0
trigger1 = animelem = 4, <0
time = -1
facing = 1
pos = 25,-140
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 4
type = AngleDraw
trigger1 = animelem = 4, >=0
trigger1 = animelem = 5, <0
scale = .3,.3

[State 2702, BindToParent]; ---- Expanding 4
type = BindToParent
trigger1 = animelem = 4, >=0
trigger1 = animelem = 5, <0
time = -1
facing = 1
pos = 12,-147
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 5
type = AngleDraw
trigger1 = animelem = 5, >=0
trigger1 = animelem = 6, <0
scale = .4,.4

[State 2702, BindToParent]; ---- Expanding 5
type = BindToParent
trigger1 = animelem = 5, >=0
trigger1 = animelem = 6, <0
time = -1
facing = 1
pos = 4,-155
ignorehitpause = 1
;persistent =

[State 2008, AngleDraw]; ---- Expanding 6
type = AngleDraw
trigger1 = animelem = 6, >=0
trigger1 = animelem = 7, <0
scale = .6,.6

[State 2702, BindToParent]; ---- Expanding 6
type = BindToParent
trigger1 = animelem = 6, >=0
trigger1 = animelem = 7, <0
time = -1
facing = 1
pos = -12,-155
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 7
type = AngleDraw
trigger1 = animelem = 7, >=0
trigger1 = animelem = 8, <0
scale = .7,.7

[State 2702, BindToParent]; ---- Expanding 7
type = BindToParent
trigger1 = animelem = 7, >=0
trigger1 = animelem = 8, <0
time = -1
facing = 1
pos = -14,-153
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 8
type = AngleDraw
trigger1 = animelem = 8, >=0
trigger1 = animelem = 9, <0
scale = .75,.75

[State 2702, BindToParent]; ---- Expanding 8
type = BindToParent
trigger1 = animelem = 8, >=0
trigger1 = animelem = 9, <0
time = -1
facing = 1
pos = -15,-155
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 9
type = AngleDraw
trigger1 = animelem = 9, >=0
trigger1 = animelem = 10, <0
scale = .65,.65

[State 2702, BindToParent]; ---- Expanding 9
type = BindToParent
trigger1 = animelem = 9, >=0
trigger1 = animelem = 10, <0
time = -1
facing = 1
pos = -10,-155
ignorehitpause = 1
;persistent =

[State 2702, AngleDraw]; ---- Expanding 10
type = AngleDraw
trigger1 = animelem = 10, >=0
trigger1 = animelem = 11, <0
scale = .6,.6

[State 2702, BindToParent]; ---- Expanding 10
type = BindToParent
trigger1 = animelem = 10, >=0
trigger1 = animelem = 11, <0
time = 1
facing = 1
pos = -12,-155
ignorehitpause = 1
;persistent =

[State 2702, VarSet]; ---- helper,fvar(1) scale changing
type = VarSet
trigger1 = 1
fvar(1) = .7
persistent = 0

[State 2702, VarAdd]; ---- helper,fvar(1) scale changing
type = NULL;VarAdd
triggerall = fvar(1) > 0
trigger1 = AnimElem = 11, >0
fvar(1) = .01

[State 2702, AngleDraw]; ---- Expanding 11
type = NULL;AngleDraw
trigger1 = animelem = 11, >=0
scale = fvar(1),fvar(1)

[State 2702, AngleDraw]; ---- Expanding 11
type = AngleDraw
trigger1 = animelem = 11, >=0
scale = 0.7+(38+animtime)*0.01,0.7+(38+animtime)*0.01

[State 2702, BindToParent]; ---- Expanding 11
type = BindToParent
trigger1 = animelem = 11, >=0
time = 1
facing = 1
pos = -8,-155
ignorehitpause = 1
;persistent =

[State 2702, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

;==================================================================
;Power Gathering Special Effects
;written by Eagrose
;==================================================================
[State 2702, VarSet]; ---- helper,var(1) random power atom changing
type = VarSet
trigger1 = 1
var(1) = 0
persistent = 0

[State 2702, VarSet]; ---- helper,var(2) random power atom changing
type = VarSet
trigger1 = 1
var(2) = 0
persistent = 0

;************************************************1st left-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(root,backedgedist)-30)>-130,-130,-(root,backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 80,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = animelem = 2, >=0
trigger1 = time%20=0
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0 ;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************2nd center-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = -110,110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 130,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = animelem = 2, >=0
trigger1 = time%20=4
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************3rd right-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((root,frontedgedist)+30)<130,130,(root,frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 80,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = animelem = 2, >=0
trigger1 = time%20=8
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************4th left-center area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(root,backedgedist)-30)>-130,-130,-(root,backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -79,79
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = animelem = 1, >=0
trigger1 = time%20=12
trigger2 = animelem = 1, >=0
trigger2 = time%20=8
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************5th right-center area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((root,frontedgedist)+30)<130,130,(root,frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -79,79
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = animelem = 1, >=0
trigger1 = time%20=16
trigger2 = animelem = 1, >=0
trigger2 = time%20=8
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************6th left-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(root,backedgedist)-30)>-130,-130,-(root,backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-80
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = animelem = 2, >=0
trigger1 = time%15=0
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************7th center-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = -110,110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-130
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = animelem = 2, >=0
trigger1 = time%15=5
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************8th right-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((root,frontedgedist)+30)<130,130,(root,frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-80
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = animelem = 2, >=0
trigger1 = time%15=10
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/65),-(var(2)/65)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 64
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;==================================================================

[State 2702, ChangeState]
type = ChangeState
Triggerall = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900)
trigger1 = root,StateNo = 2700
trigger1 = root,time >= 81
trigger2 = root,StateNo != 2700
value = 792702
ignorehitpause = 1

[State 2702, DestroySelf]
type = DestroySelf
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
trigger1 = root,StateNo = 2700
trigger1 = root,time >= 81
trigger2 = root,StateNo != 2700

; Armageddon ball power gathering visual Helper --------------------------------
[statedef 2703]
type    = S
movetype = A
physics = S
poweradd = 0
velset = 0,0
sprpriority = 3
anim = ifelse(root,fvar(4)=0,2708,2738) ;2702
ctrl = 0

;==========================================
[State 5900, 1] ;Clear all int variables
type = VarRangeSet
Trigger1 = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
value = 0
persistent = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
Trigger1 = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
fvalue = 0
persistent = 0
;=====================END=====================

[state 2703, NotHitBy]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 2703
time = -1
ignorehitpause = 1

[State 2703, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
;persistent =

[State 2704, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2704, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2700
trigger1 = root,time >= 80
value = ifelse(root,fvar(4)=0,2708,2738)
elem = floor((root,time-80)/3)+1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,stateno = 2701
trigger1 = root,time%6=0
value = ifelse(root,fvar(4)=0,2708,2738)
elem = 50
ignorehitpause = 1

[State 2703, VarSet]; ---- helper,fvar(1) scale changing
type = VarSet
trigger1 = 1
fvar(1) = 1
persistent = 0

[State 2703, VarAdd]; ---- helper,fvar(1) scale changing
type = NULL;VarAdd
triggerall = fvar(1) > 0
trigger1 = AnimElem = 35, < 0
fvar(1) = .01

[State 2703, AngleDraw]
type = NULL;AngleDraw
trigger1 = 1
scale = fvar(1),fvar(1)

[State 2703, AngleDraw]
type = AngleDraw
trigger1 = root,StateNo = 2700
;trigger1 = AnimElem = 35, <= 0
scale = 1+(AnimElemNo(0)*0.03),1+(AnimElemNo(0)*0.03)

[State 2703, AngleDraw]
type = AngleDraw
trigger1 = root,StateNo = 2701
scale = 2.05,2.05

[State 2703, Trans]
type = Trans
trigger1 = 1
trans = add
;alpha =
ignorehitpause = 1
;persistent =

[State 2000, Explod]
type = null;Explod
trigger1 = Time = 10
anim = 11000
pos = -57,-200
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 99
sprpriority = 9
ownpal = 1

[State 2703, BindToRoot]
type = BindToRoot
trigger1 = root,StateNo = 2700
ignorehitpause = 1
pos = -15,-160

[State 2703, BindToRoot]
type = BindToRoot
triggerall = root,StateNo = 2701
trigger1 = root,time = [0,16]
ignorehitpause = 1
pos = -15,-160

[State 2703, BindToRoot]
type = BindToRoot
triggerall = root,StateNo = 2701
trigger1 = root,time = [17,24]
ignorehitpause = 1
pos = -10,-160

[State 2703, BindToRoot]
type = BindToRoot
triggerall = root,StateNo = 2701
trigger1 = root,time = [25,32]
ignorehitpause = 1
pos = -5,-160

[State 2703, BindToRoot]
type = BindToRoot
triggerall = root,StateNo = 2701
trigger1 = root,time = [33,42]
ignorehitpause = 1
pos = 53,-144

[State 2703, ReversalDef]
type = ReversalDef
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
Trigger1 = 1
;animtype  = Up
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = HLMAFDP
;guardflag = N
priority = 99999, Hit
hitsound = S0,71
sparkno = -1
numhits = 0
sprpriority = 1
p2facing = 1
p2stateno = 1026
damage = 0
fall.damage = 0
guard.dist = 0

;==================================================================
;Power Gathering Special Effects
;written by Eagrose
;==================================================================
[State 2702, VarSet]; ---- helper,var(1) random power atom changing
type = VarSet
trigger1 = 1
var(1) = 0
persistent = 0

[State 2702, VarSet]; ---- helper,var(2) random power atom changing
type = VarSet
trigger1 = 1
var(2) = 0
persistent = 0

;************************************************1st left-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(root,backedgedist)-30)>-130,-130,-(root,backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 80,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=0
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0 ;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************2nd center-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = -110,110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 130,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=4
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************3rd right-down area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((root,frontedgedist)+30)<130,130,(root,frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = 80,200
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=8
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************4th left-center area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(root,backedgedist)-30)>-130,-130,-(root,backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -79,79
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=12
trigger2 = time%20=8
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************5th right-center area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((root,frontedgedist)+30)<130,130,(root,frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -79,79
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
trigger1 = time%20=16
trigger2 = time%20=8
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************6th left-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = ifelse((-(root,backedgedist)-30)>-130,-130,-(root,backedgedist)-30),-110
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-80
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = time%15=0
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************7th center-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = -79,79
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-130
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = time%15=5
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;************************************************8th right-up area
[State 2702, VarRandom];X
type = VarRandom
triggerall = 1
trigger1 = 1
v = 1
range = 110,ifelse(((root,frontedgedist)+30)<130,130,(root,frontedgedist)+30)
ignorehitpause = 1

[State 2702, VarRandom];Y
type = VarRandom
trigger1 = 1
v = 2
range = -200,-80
ignorehitpause = 1

[State 2702, Explod]; ---- random power atom gathering
type = Explod
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
triggerall = root,StateNo = 2700
triggerall = root,time <= 193 ;(223-60)
triggerall = helper(2702),NumExplod(2716)+helper(2703),NumExplod(2716) <= 30
triggerall = EnemyNear(floor(fvar(36))),Pos Y <= -160
trigger1 = time%15=10
anim = ifelse(root,fvar(4)=0,2717,2727)
ID = 2716
pos = var(1),var(2)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -(var(1)/55),-(var(2)/55)
accel = 0,0;0.5*sin(Atan(var(2)/var(1))),2*cos(Atan(var(2)/var(1)))
random = 0,0
removetime = 54
;supermove
;pausemove
scale = .15,.15
sprpriority = 9
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

;==================================================================

[State 2703, ChangeState]
type = ChangeState
Triggerall = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900)
trigger1 = root,StateNo = 2701
trigger1 = root,Time >= 42
trigger2 = root,StateNo != 2700
trigger2 = root,StateNo != 2701
value = 792703
ignorehitpause = 1

[State 2703, DestroySelf]
type = DestroySelf
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
trigger1 = root,StateNo = 2701
trigger1 = root,Time >= 42
trigger2 = root,StateNo != 2700
trigger2 = root,StateNo != 2701

; Armageddon ball Proj Helper --------------------------------------------------
[statedef 2704]
type    = S
movetype = A
physics = N
poweradd = 0
velset = 0,0
sprpriority = 5
anim = ifelse(root,fvar(4)=0,2709,2739) ;2703
ctrl = 0

;==========================================
[State 5900, 1] ;Clear all int variables
type = VarRangeSet
Trigger1 = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
value = 0
persistent = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
Trigger1 = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || (!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100))
fvalue = 0
persistent = 0
;=====================END=====================

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2704, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
;persistent =

[State 2704, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2704, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 2704, VelSet]
type = VelSet
trigger1 = 1
x = 3
y = 0
ignorehitpause = 1
;persistent =

[state 2704, Trans]
type = Trans
trigger1 = 1
trans = add

[State 2704, PlaySnd]
type = PlaySnd
trigger1 = time%25 =0
value = S0,48
channel = 6
ignorehitpause = 1

[State 2704, PlaySnd]
type = PlaySnd
trigger1 = time%30 =0
value = S0,49
channel = 7
ignorehitpause = 1

[State 2704, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 2,2
ignorehitpause = 1

[State 2704, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2704, VarSet]; ---- helper,var(11) set spark pos Y
type = VarSet
trigger1 = 1
var(11) = 0
persistent = 0

[State 2704, VarSet]; ---- helper,var(11) set spark pos Y
type = varset
triggerall = P2statetype = C
trigger1 = var(11) != 30 + floor(p2bodydist Y)
var(11) = 30 + floor(p2bodydist Y)

[State 2704, VarSet]; ---- helper,var(11) set spark pos Y
type = varset
triggerall = P2statetype != C
trigger1 = var(11) != floor(p2bodydist Y)
var(11) = floor(p2bodydist Y)

[State 2704, VarSet]; ---- helper,var(12) set spark pos X
type = VarSet
trigger1 = 1
var(12) = 0
persistent = 0

[State 2704, VarSet]; ---- helper,var(12) set spark pos X
type = VarSet
trigger1 = var(12) != floor(p2dist X)
var(12) = floor(p2dist X)

[State 2704, Projectile]
type = Projectile
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
trigger1 = time%2 = 0
ProjID = 2704
projanim = 2704   ;Defaults to 0 if omitted.
;projhitanim =    ;when projectile hits the opponent. Defaults to -1 (no change in animation).
;projremanim =    ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
;projcancelanim =    ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 1    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 4    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 3,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 999999999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 240    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 240
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 2147483648    ;important while using SuperPause. 99999
pausemovetime = 2147483648    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = S,HA    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAFDP    ;HLAFDP+-
guardflag = M    ;MHLA
getpower = 0,0
givepower = 0,-100
;affectteam = E    ;B,E,F
animtype = DiagUp    ;light,medium,hard,back,up,diagup
air.animtype = DiagUp    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 999999999,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
;damage = floor(40*root,fvar(3)),floor(2*root,fvar(3))
damage = floor(1000*root,fvar(3)),floor(5*root,fvar(3))
pausetime = 0,1
;guard.pause ,0
sparkno = 3
guard.sparkno = 40
sparkxy = var(12), -76 + var(11)
;hitsound = S0,17
;guardsound = S0,10
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 5    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
guard.slidetime = 15    ;Defaults to guard.hittime
ground.hittime = 7    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
guard.hittime = 17        ;Defaults to ground.hittime
air.hittime = 10   ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
yaccel = 0.44    ;y acceleration
ground.velocity = -5.5,-7
guard.velocity = -10    ;Defaults to x_velocity of ground.velocity
air.velocity = -5.5,-2    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
;p2facing = 1
;p1stateno = 0
p2stateno = 270700
;p2getp1state = 1
;forcestand = 0
fall = 0
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 1
air.fall.recover = 0
down.velocity = 0,-7    ;gethit while lying down ;Defaults to air.velocity
down.hittime = 20
down.bounce = 0
;id = 0
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
palfx.time = 60
palfx.add = 0,0,ifelse(root,fvar(4)=0,100,0)
palfx.mul = 250,250,250
palfx.sinadd = 200,200,ifelse(root,fvar(4)=0,100,200),5
envshake.time = 0
;envshake.freq = 0
;envshake.ampl = 0
;envshake.phase = 0
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
ignorehitpause = 1
;persistent =

[State 2704, PlaySnd]
type = PlaySnd
triggerall = time%3=0
trigger1 = root,ProjHit2704 = 1, <=4
value = S0,17
channel = ifelse(time%12=0,2,ifelse(time%12=3,3,ifelse(time%12=6,4,5)))
ignorehitpause = 1

[State 2704, PlaySnd]
type = PlaySnd
triggerall = time%3=0
trigger1 = root,ProjGuarded2704 = 1, <=4
value = S0,10
channel = ifelse(time%12=0,2,ifelse(time%12=3,3,ifelse(time%12=6,4,5)))
ignorehitpause = 1

[State 2704, ReversalDef]
type = ReversalDef
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
Trigger1 = 1
;animtype  = Up
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = HLMAFDP
;guardflag = N
priority = 99999, Hit
hitsound = S0,71
sparkno = -1
numhits = 0
sprpriority = 1
p2facing = 1
p2stateno = 2705
damage = 0
fall.damage = 0
guard.dist = 0

[State 2704, ChangeState]
type = ChangeState
Triggerall = (root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900)
trigger1 = FrontEdgeBodydist <= -150
value = 792704
ignorehitpause = 1

[State 2704, DestroySelf]
type = DestroySelf
Triggerall = !((root,var(51)=6666 && root,var(58)=1 && root,var(42)%10=1) || ((!numhelper(701100) || (numhelper(701100) && helper(701100),stateno!=701100)) && root,stateno != 5900))
trigger1 = FrontEdgeBodydist <= -150

; Armageddon ball Reversaldef victim -------------------------------------------
; (also the Global ReversalDef common used P2STATENO)
[statedef 2705]
type    = U
movetype = H
physics = U
poweradd = 0
velset = 0,0
sprpriority = 3
anim = 9999
ctrl = 0

[state 2705, Nothitby]
type = Nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2705, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[state 2705, DestroySelf]
type = DestroySelf
trigger1 = ishelper
trigger1 = time > 0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 2705, SelfState]
type = SelfState
triggerall = !isHelper
trigger1 = pos Y < 0
value = 5030
ignorehitpause = 1

[state 2705, SelfState]
type = SelfState
trigger1 = !ishelper
value = 5000
ignorehitpause = 1

;-------------------------------------------------------------------------------
; Enemynear Push helper for Armageddon
; (Code original referred from Orochi by OrochiHerman, modified & enhanced by Eagrose)
[Statedef 2706]
type = C
movetype = I
ctrl = 0
anim = 2707
physics = N
velset = 0,0
;facep2 = 0;

;helperfvar(36)EnemyNear(fvar(36)),,
[State 0, fvar(36)];             ;TAGAI (1,fvar(36) = 0)
Type = varset
Trigger1 = numenemy=1
fvar(36) = 0

[State 0, fvar(36)];            ;TAGAI (2)
Type = varset
Trigger1 = numenemy=2
fvar(36) = ifelse(EnemyNear(0),alive,0,1)  ;,fvar(36) = 0,fvar(36) = 1,

[State 0, DestroySelf] ;resummon helper when enemy's facing changes (enemy jump to the other side)
type = DestroySelf
trigger1 = enemynear(floor(fvar(36))),Facing != Facing    ;enemynearhelper
trigger1 = parentdist X > 0             ;parenthelper

;[State haha]
;type = VarSet
;trigger1 = 1 ;time = 0
;var(0) = (enemynear, ID)    ;var(0)ID

;[State haha]
;type = VarSet
;trigger1 = 1 ;time = 0
;var(1) = (enemy(0), ID)     ;var(1)2P ID

;[State haha]
;type = VarSet
;trigger1 = 1 ;time = 0
;var(2) = (enemy(0),Const(size.ground.back)) ;var(2)2P ground.back

;[State haha]
;type = VarSet
;trigger1 = NumEnemy > 1
;var(3) = (enemy(1), ID)     ;var(3)4P ID

;[State haha]
;type = VarSet
;trigger1 = NumEnemy > 1
;var(4) = (enemy(1),Const(size.ground.back)) ;var(4)4P ground.back

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State Haha] ; push enable
type = PlayerPush
trigger1 = time <= 0
value = 0
ignorehitpause = 1

[State Haha] ; push enable
type = PlayerPush
trigger1 = time > 0
value = 1
ignorehitpause = 1

[State Haha] ; pushing speed
type = NULL;VelSet
trigger1 = enemynear(floor(fvar(36))),const(velocity.jump.back.x) != 0
x = -0.95 * enemynear(floor(fvar(36))),const(velocity.jump.back.x)

[State Haha] ; pushing speed
type = VelSet
trigger1 = 1 ;enemynear(floor(fvar(36))),const(velocity.jump.back.x) = 0
x = 3

[State Haha]
type = Turn
trigger1 = root,Facing != - Facing
ignorehitpause = 1

[State Haha] ;Y()
type = PosSet
trigger1 = enemynear(floor(fvar(36))),StateType = A  ;
trigger2 = enemynear(floor(fvar(36))),StateType != A
trigger2 = enemynear(floor(fvar(36))),Vel x != 0   ;X
y = enemynear,Pos y

[State Haha]  ;X pusher  
type = PosSet
triggerall = Facing = -1    ;helper
trigger1 = enemynear(floor(fvar(36))),Pos X > Pos X  ;2Phelper
x = enemynear(floor(fvar(36))),Pos x + enemynear(floor(fvar(36))),Const(size.ground.back) + 15    ;X

[State Haha]  ;X pusher  
type = PosSet
triggerall = Facing = 1    ;helper
trigger1 = enemynear(floor(fvar(36))),Pos X < Pos X  ;2Phelper
x = enemynear(floor(fvar(36))),Pos x - enemynear(floor(fvar(36))),Const(size.ground.back) - 15   ;X

[State Haha]  ;width set to 0,0
type = Width
trigger1 = 1
value = 5,0
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root, MoveType = H
trigger2 = root, StateNo != [2700,2701]
trigger3 = root, StateNo = 2701
trigger3 = root, animelem = 5,>=0
trigger4 = Time > 200
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = NumEnemy = 2
triggerall = EnemyNear(0),alive
triggerall = EnemyNear(1),alive
trigger1 = time = 20
;trigger1 = (abs(playerID(root,var(22)),Pos X - root,Pos X) - abs(playerID(root,var(20)),Pos X - root,Pos X)) > (15 + playerID(root,var(20)),Const(size.ground.back) + playerID(root,var(22)),Const(size.ground.front))
;trigger2 = abs(enemy(1),Pos x - root,Pos X) < abs(enemynear(floor(fvar(36))),Pos x - root,Pos X)

;-------------------------------------------------------------------------------
; HITG_SHAKE P2STATENO Override (5000)
[Statedef 2707]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7] ;must fall
type = ChangeState
trigger1 = HitShakeOver
value = 2708 ;5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;-------------------------------------------------------------------------------
; HITG_SHAKE P2STATENO Override (5000)
[Statedef 270700]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeSet]
type = LifeSet
trigger1 = alive
value = 0
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7] ;must fall
type = ChangeState
trigger1 = HitShakeOver
value = 2708 ;5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-------------------------------------------------------------------------------
; HITA_UP (initial going up) P2STATENO Override (5030)
[Statedef 2708]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]; must fall
type = ChangeState
;triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 2710 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2709 ;HITA_UP (transition)

;-------------------------------------------------------------------------------
; HITA_UP_T (transition) P2STATENO Override (5035)
[Statedef 2709]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 2710 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling) P2STATENO Override (5050)
[Statedef 2710]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
;triggerall = var(22) = 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 2711 ;HIT_BOUNCE

[State 5050, 9]
type = width
trigger1 = time = 0
edge = 10,10

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground) P2STATENO Override (5100)
[Statedef 2711]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 2713 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 2712

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20


;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air) P2STATENO Override (5101)
[Statedef 2712]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 2713

;---------------------------------------------------------------------------
; HIT_LIEDOWN P2STATENO Override (5110)
[Statedef 2713]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState ;ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 0, ChangeState]
type = ChangeState
triggerall = alive
triggerall = anim = [5110,5119]
;trigger1 = animtime = 0
trigger1 = const(data.liedown.time) >= 55
trigger1 = time >= const(data.liedown.time)-5
trigger2 = const(data.liedown.time) < 55
trigger2 = time >= 50
value = 2714
ignorehitpause = 1

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP  P2STATENO Override (5120)
[Statedef 2714]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = null;NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = null;NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = null;NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = SelfState ;ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Armageddon guard-break P2STATENO ----------------------------------------------
[Statedef 2720]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 15
add = 0,0,100
mul = 250,250,250
sinadd = 200,200,100,5
invertall = 0
color = 256
ignorehitpause = 1
persistent = 0

[State 1026, NotHitBy]; ---- Reversaled helper debug
type = NotHitBy
trigger1 = isHelper
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 1026, RemoveExplod]; ---- Reversaled helper debug
type = RemoveExplod
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1026, DestroySelf]; ---- Reversaled helper debug
type = DestroySelf
trigger1 = isHelper
trigger1 = time > 0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1026, ChangeAnim2]
type = ChangeAnim2
triggerall = !isHelper
trigger1 = time = 0
value = 2032
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1026, ChangeAnim2]
type = ChangeAnim
triggerall = !isHelper
triggerall = SelfAnimExist(5030)
triggerall = pos Y < 0
trigger1 = time = 0
value = 5030
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1026, PosSet]
type = PosSet
triggerall = !isHelper
trigger1 = pos Y >= 0
;x = 0
y = 0
ignorehitpause = 1
persistent = 0

[State 1026, PosAdd]
type = PosAdd
triggerall = !isHelper
Trigger1 = time = [3,15]
x = -2.7 ;-3
ignorehitpause = 1

[State 3100, HitFallSet]
type = HitFallSet
triggerall = !isHelper
trigger1 = pos Y < 0
value = 1
;xvel =
yvel = -4.5
ignorehitpause = 1
persistent = 0

[State 1026, SelfState]
type = SelfState
triggerall = !isHelper
trigger1 = pos Y < 0
trigger1 = Time >= 25
value = 5030

[State 1026, SelfState]
type = SelfState
triggerall = !isHelper
trigger1 = Time >= 25
value = 0
ctrl = 1


;-------------------------------------------------------------------------------
; Hyper Move: Unfolding of the Ture Universe (Extintion)
[Statedef 2800]
type    = S
movetype= A
physics = S
poweradd = -3000
ctrl = 0
velset = 0,0
anim = 2800
sprpriority = 2

[State 2800, NotHitBy]
type = NotHitBy
trigger1 = 1
;trigger1 = animelem = 1, >=0
;trigger1 = animelem = 18, <0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 2
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2800, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,73
ignorehitpause = 1

;[State 2800, envcolor]
;type = envcolor
;trigger1 = Time = 0
;time = 40
;value = 0,0,0
;under = -1

[State 2800, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,0
mul = 0,0,0
;sinadd = 0,0,0,10
;invertall = 0
;color = 256
ignorehitpause = 1
;persistent =

[State 2800, superpause]
type = superpause
trigger1 = time = 0
time = 30
movetime = 0
anim = -1
darken = 0
p2defmul = 1
unhittable = 1
sound = S0,70

[State 2800, Explod]; ---- XI_supermove_lv3
type = Explod
trigger1 = Time = 0
anim = 11001
pos = -86,-165
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
sprpriority = -1
ownpal = 1
removeongethit = 1

[State 2800, Explod]; ---- XI_supermove_lv3_foreground
type = Explod
trigger1 = Time = 0
anim = 11000
pos = -47,-130
scale = 1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
sprpriority = 9
ownpal = 1
removeongethit = 1

[State 2800, Helper]; ---- HSDM hitdef helper
type = Helper
trigger1 = time = 0
ID = 2803
name = "HSDM hitdef helper"
postype = p2
facing = -1
pos = 0,0 ;-8,-108
sprpriority = 2
stateno = 2803
helpertype = normal
keyctrl = 0
ownpal = 1


;------------------------------------------
[State 2800, Helper]
type = Helper
triggerall = !numhelper(20001)
trigger1 = time = 0
helpertype = normal
name = "02um HSDM BG"
ID = 20001
stateno = 20001
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 2800, Helper]
type = Helper
triggerall = !numhelper(20003)
trigger1 = time = 0
helpertype = normal
name = "02um HSDM Portrait"
ID = 20003
stateno = 20003
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;------------------------------------------

[State 2800, VarSet]
type = VarSet
trigger1 = projhit2803=1 ;helper(2803),movehit
fv = 13
value = helper(2803),pos X
ignorehitpause = 1
;persistent =

[State 2800, ChangeState]
type = ChangeState
trigger1 = projhit2803=1 ;helper(2803),movehit
value = 2801
ctrl = 0
;anim =
ignorehitpause = 1
;persistent =

[State 2800, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 2801]
type = S
movetype = A
physics = S
juggle = 0
anim = 2802
poweradd = 0
ctrl = 0
Velset = 0,0
sprpriority = 2

[State 2801, Helper]
type = Helper
trigger1 = time = 0
trigger1 = !numhelper(2802)
helpertype = normal
name = "HSDM enemy helper"
ID = 2802
stateno = 2802
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
ignorehitpause = 1
supermovetime = 2147483647
pausemovetime = 2147483647

;------------------------------------------
[State 2801, Helper]
type = Helper
triggerall = !numhelper(20001)
trigger1 = time = 0
helpertype = normal
name = "02um HSDM BG"
ID = 20001
stateno = 20001
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 2801, Helper]
type = Helper
triggerall = !numhelper(20003)
trigger1 = time = 0
helpertype = normal
name = "02um HSDM Portrait"
ID = 20003
stateno = 20003
pos = 160,120
postype = left
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
;------------------------------------------

[State 2801, TargetState]
type = TargetState
trigger1 = animelem = 4,< 0
value = 2810
ignorehitpause = 1

[State 2801, TargetState]
type = TargetState
trigger1 = Animelem = 9
value = 2811
ignorehitpause = 1

[State 2801, TargetState]
type = TargetState
trigger1 = Animelem = 36
value = 2812
ignorehitpause = 1

[State 2801, TargetState]
type = TargetState
trigger1 = Animelem = 90
value = 2813
ignorehitpause = 1

[State 2801, TargetFacing]
type = null;TargetFacing
trigger1 = Animelem = 91
value = 1

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 22,=0
value = S0,27

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 30,=0
value = S0,29
ignorehitpause = 1

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 46,=0
value = S0,46
channel = 0
volume = 255

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 46,=0
value = S0,1
volume = 255

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 70,=0
value = S0,47
channel = 0
volume = 255

[State 2801, EnvShake]
type = EnvShake
trigger1 = Time = 179
trigger2 = Time = 183
trigger3 = Time = 187
trigger4 = Time = 191
trigger5 = Time = 195
trigger6 = Time = 199
trigger7 = Time = 203
trigger8 = Time = 207
trigger9 = Time = 211
trigger10 = Time = 215
trigger11 = Time = 239
time = 10
ignorehitpause = 1

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Time = 178
trigger2 = Time = 186
trigger3 = Time = 194
trigger4 = Time = 202
trigger5 = Time = 210
trigger6 = Time = 238
value = S0,17
channel = 10

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Time = 182
trigger2 = Time = 190
trigger3 = Time = 198
trigger4 = Time = 206
trigger5 = Time = 214
value = S0,17
channel = 11

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Time = 179
trigger2 = Time = 183
trigger3 = Time = 187
trigger4 = Time = 191
trigger5 = Time = 195
trigger6 = Time = 199
trigger7 = Time = 203
trigger8 = Time = 207
trigger9 = Time = 211
trigger10 = Time = 215
trigger11 = Time = 239
value = S0,122
channel = 9

[State 2801, PlaySnd]
type = PlaySnd
trigger1 = Time = 239
value = S0,123

[State 2801, PlaySnd]
type = NULL;PlaySnd
trigger1 = Time = 0
value = S0,124
volume = 255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 63
value = S0,125

[State 2801, HitAdd]
type = HitAdd
trigger1 = Time = 179
trigger2 = Time = 183
trigger3 = Time = 187
trigger4 = Time = 191
trigger5 = Time = 195
trigger6 = Time = 199
trigger7 = Time = 203
trigger8 = Time = 207
trigger9 = Time = 211
trigger10 = Time = 215
value = 1

[State 2801, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Time = 179
trigger2 = Time = 183
trigger3 = Time = 187
trigger4 = Time = 191
trigger5 = Time = 195
trigger6 = Time = 199
trigger7 = Time = 203
trigger8 = Time = 207
trigger9 = Time = 211
trigger10 = Time = 215
value = floor(-30*fvar(3))
kill = 0
absolute = 1

[State 2801, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Time = 240
value = floor(-349*fvar(3))
kill = 1
absolute = 1

[State 2801, TargetDrop]
type = TargetDrop
trigger1 = Time = 365
excludeID = -1
keepone = 0
ignorehitpause =1


[State 2801, afterimage]; ---- conflict with global afterimage
type = NULL;afterimage
trigger1 = Animelem = 32,= 0
time = 40
length = 12
palinvertall = 0
palcontrast = 256, 256, 256
palbright = 0, 0, 0
palpostbright = -25, 0, 0
paladd = 0, 0, 0
palmul = 1, 1, 1
FrameGap = 2
ignorehitpause = 1

[State 2801, afterimage]; ---- conflict with global afterimage
type = NULL;afterimage
trigger1 = Time = 195
time = 80
length = 10
palinvertall = 0
palcontrast = 256, 256, 256
palbright = 0, 0, 0
palpostbright = -25, 0, 0
paladd = 0, 0, 0
palmul = 1, 1, 1
FrameGap = 2
ignorehitpause = 1
trans = add1

[State 2801, afterimageTime]; ---- conflict with global afterimage
type = NULL;AfterImageTime
trigger1 = Animtime = 0
time = 0
ignorehitpause = 1

[State 2801, Helper]; ---- light energy launch visual helper
type = Helper
trigger1 = animelem = 50
helpertype = normal ;player
name = "light energy launch visual helper"
ID = 2801
stateno = 2008
pos = 138,-90
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
;supermove
;pausemove
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
;persistent =

;---------------------------
[State 2801, VarSet]; ---- fvar(12) PalFX
type = VarSet
trigger1 = time = 0
fvar(12) = 100
persistent = 0

[State 2801, VarSet]; ---- fvar(12) PalFX
type = VarAdd
triggerall = time >= 246
triggerall = time < 260
trigger1 = fvar(12) > 0
fvar(12) = 19

[State 2801, VarSet]; ---- fvar(12) PalFX
type = VarSet
trigger1 = time >= 260
trigger1 = time <= 270
fvar(12) = 255

[State 2801, VarSet]; ---- fvar(12) PalFX
type = VarAdd
triggerall = time >= 270
triggerall = time <= 290
trigger1 = fvar(12)-25 > 0
fvar(12) = -25

[State 2801, BGPalFX]
type = AllPalFX
trigger1 = time >= 246
trigger1 = time <= 290
time = 2
add = floor(fvar(12)),floor(fvar(12)),floor(fvar(12))
mul = 256,256,256
;sinadd = 0,0,0,10
;invertall = 0
;color = 256
ignorehitpause = 1
;persistent =

;---------------------------

[State 2801, PosAdd]
type = PosAdd
trigger1 = Animelem = 31,>= 0 && Animelem  = 41, < 0
x = -3

[State 2801, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[StateDef 2802]
anim = 9999
ctrl = 0
type = A

[State 2802, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1

[State 2802, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper
value = 9999
ignorehitpause = 1

[State 2802, PosSet]
type = PosSet
triggerall = ishelper
trigger1 = root,Animelem = 90, <=0
x = floor(root,fvar(13))
y = 0
ignorehitpause = 1
persistent = 0

;---------------------------------
[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2806
ID = 2806
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
supermovetime = 99999
pausemovetime = 99999
facing = 1
shadow = 0
ownpal = 1
sprpriority = -3

[State 2802, Explod]
type = null;Explod
trigger1 = ishelper
trigger1 = parent,Time = 2
anim = 2807
ID = 2807
pos = 0,0
postype = p1
removetime = 250
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
removeongethit = 1
sprpriority = -4

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 22,=0
anim = 2808
ID = 2808
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0,0,0
ownpal = 1
sprpriority = 2

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 22,=0
anim = 2809
ID = 2809
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0,0,0
ownpal = 1
ontop = 0
sprpriority = -10

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2810
ID = 2810
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = 1

;-------------------------------
[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=0
anim = 2811
ID = 2811
pos = 0,-120
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=3
anim = 2811
ID = 2811
pos = 20,-80
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=6
anim = 2811
ID = 2811
pos = -10,-20
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=9
anim = 2811
ID = 2811
pos = 0,-90
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=12
anim = 2811
ID = 2811
pos = -30,-95
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=15
anim = 2811
ID = 2811
pos = 30,-80
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=18
anim = 2811
ID = 2811
pos = -20,-90
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=18
anim = 2811
ID = 2811
pos = -30,-70
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=18
anim = 2811
ID = 2811
pos = 0,80
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]; ---- ball explod
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 68,=18
anim = 2811
ID = 2811
pos = 40,105
scale = .5,.5
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2
;-------------------------------

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2812
ID = 2812
pos = 0,0
postype = p1
removetime = 70
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -1

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2813
ID = 2813
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -1

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2814
ID = 2814
pos = 0,0
postype = p1
removetime = 70
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -1

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2815
ID = 2815
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -1

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2816
ID = 2816
pos = 0,0
postype = p1
removetime = 100
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2

[State 2802, Explod]
type = Explod
trigger1 = ishelper
trigger1 = parent,Animelem = 64,=0
anim = 2817
ID = 2817
pos = 0,0
postype = p1
removetime = -2
bindtime = -1
facing = 1
shadow = 0
ownpal = 1
sprpriority = -2
;------------------------------

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3006
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3007
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3008
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3009
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3010
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3011
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3012
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3013
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3014
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3015
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3016
ignorehitpause = 1

[State 2802, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper
trigger1 = root,time >= 290
id = 3017
ignorehitpause = 1

[State 2802, DestroySelf]
type = DestroySelf
trigger1 = parent,StateNo != 2801
trigger2 = parent,StateNo  = 2801
trigger2 = parent,time >= 291
ignorehitpause = 1

; HSDM hitdef helper -----------------------------------------------------------
[Statedef 2803]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 2820
sprpriority = -4

[State 2803, HitOverRide]; ---- self hitoverride
type = Hitoverride
trigger1 = 1
slot = 3
attr = SCA, AA,AT,AP
stateno = 2705
ignorehitpause = 1

[State 2803, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1
;persistent =

[State 2803, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 2803, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2803, projectile]
type = Projectile
Trigger1 = time >= 0
Trigger1 = time < 30
ProjID = 2803
projanim = 2823   ;Defaults to 0 if omitted.
projhitanim = -1   ;when projectile hits the opponent. Defaults to -1 (no change in animation).
projremanim = -1   ;when projectile is removed (due to its time expiring or hitting its removal boundaries, etc.) Defaults to projhitanim.
projcancelanim = -1   ;when projectile is cancelled by hitting another projectile. Defaults to projremanim.
projscale = 1,1
projremove = 0    ;If nonzero, projectile be removed after it hits. Defaults to 1.
projremovetime = 1    ;number of ticks after which the projectile should be removed from the screen. Defaults to -1.
projshadow = 0,0,0   ;Specifies the R, G, and B components of the projectile's shadow.
velocity = 0,0
remvelocity = 0,0    ;velocities at which the projectile should travel while being removed.
accel = 0,0    ;acceleration
velmul = 1    ;projectile's velocity is multiplied by this multiplier on every tick. Default to 1.
projhits = 1    ;number of hits that projectile should be able to do before being removed. Defaults to 1.
projmiss = 0    ;specifies the least number of ticks that must elapse between multi-hits.
projpriority = 9999999    ;1 3 5 7 9 999 99999 9999999
projsprpriority = 3
projedgebound = 40    ;distance (in pixels) off the edge of the screen before the projectile is deleted. Defaults to 40.
projstagebound = 40
projheightbound = -240    ;the least and greatest y values the projectile is allowed to reach. Default to -240,1.
offset = 0,0
postype = p1         ;p2,front,back,left,right
supermovetime = 0    ;important while using SuperPause. 99999
pausemovetime = 0    ;important while using Pause. 99999
; ---- the following is HitDef content
attr = C,HT    ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = HLFD    ;HLAFDP+-
guardflag = N    ;MHLA
getpower = 0,0
;givepower = 0,0
;affectteam = E    ;B,E,F
animtype = light    ;light,medium,hard,back,up,diagup
air.animtype = light    ;light,medium,hard,back,up,diagup
;fall.animtype = Back
priority = 4,Hit    ;Hit,Miss,Dodge 3 4 7 99999 9999999
damage = 0,0
pausetime = 0,0
;guard.pause ,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = 0,0
guardsound = 0,0
ground.type = High      ;Hign,Low,Trip,None ;High/Low have no effect if Back, If hit from behind, High will be displayed Low
;air.type = High    ;Defaults to ground.type
ground.slidetime = 0    ;don't include pausetime ;applicable only to hits that keep P2 on the ground
;guard.slidetime = 0    ;Defaults to guard.hittime
ground.hittime = 0    ;Applicable only to hits that keep P2 on the ground ;Defaults to 0
;guard.hittime = 0        ;Defaults to ground.hittime
air.hittime = 20    ;has no effect if fall=1, default 20
;guard.ctrltime  = 0    ;Defaults to guard.slidetime
;airguard.ctrltime = 0
;guard.dist = 320    ;useful for trigger inguarddist
;yaccel = 0.5    ;y acceleration
ground.velocity = 0,0
;guard.velocity = 0    ;Defaults to x_velocity of ground.velocity
air.velocity = 0,0    ;Defaults to 0,0
;airguard.velocity = 0,0    ;Defaults to x_velocity*1.5, y_velocity/2 of air.velocity
;ground.cornerpush.veloff = 0    ;If arg1 of attr is "A", default value is 0. Otherwise,defaults to 1.3*guard.velocity.
;air.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.velof
;down.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;guard.cornerpush.veloff = 0    ;Defaults to ground.cornerpush.veloff
;airguard.cornerpush.veloff = 0    ;Defaults to guard.cornerpush.veloff
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
sprpriority = 1
;p1sprpriority = 0;(winmugen only)
;p2sprpriority = 0;(winmugen only)
;p1facing = 0
p1getp2facing = 0
p2facing = 1
;p1stateno = 2801
p2stateno = 2810
;p2getp1state = 1
;forcestand = 0
fall = 1
fall.recover = 0
fall.recovertime = 4
;fall.xvelocity = 0    ;Defaults to no change
fall.yvelocity = -4.5    ;Defaults to -4.5
fall.damage = 0
air.fall = 0
air.fall.recover = 0
;down.velocity = 0,0    ;gethit while lying down ;Defaults to air.velocity
;down.hit
down.bounce = 0
id = 2800
;chainID = -1
;nochainID = -1
;hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 0
palfx.time = 0
;palfx.mul = 0,0,0
;palfx.add = 0,0,0
envshake.time = 0
;envshake.freq = 0
;envshake.ampl = 0
;envshake.phase = 0
fall.envshake.time = 0
;fall.envshake.freq = 0
;fall.envshake.ampl = 0
;fall.envshake.phase = 0
;(afterimage winmugen only)
afterimage.time = 0
;afterimage.length =
;afterimage.palcolor =
;afterimage.palinvertall =
;afterimage.palbright = 0,0,0
;afterimage.palcontrast = 0,0,0
;afterimage.palpostbright =0,0,0
;afterimage.paladd =  0,0,0
;afterimage.palmul = 0,0,0
;afterimage.timegap =
;afterimage.framegap =
;afterimage.trans = ;none,add,add1,addalpha,sub
;ignorehitpause =
;persistent =

[State 2803, ChangeAnim]
type = ChangeAnim
triggerall = anim = 2820
trigger1 = root,stateno = 2801
value = 2822
elem = AnimElemNo(0)
ignorehitpause = 1
;persistent =

[State 2803, PosSet]
type = PosSet
triggerall = ishelper
trigger1 = anim = 2822
x = floor(root,fvar(13))
y = 0
ignorehitpause = 1
persistent = 0

[State 2803, DestroySelf]
type = DestroySelf
trigger1 = anim = 2820
trigger1 = animtime = 0
trigger2 = anim = 2822
trigger2 = root,stateno = 2801
trigger2 = root,time >= 250
trigger3 = anim = 2822
trigger3 = root,stateno != [2800,2801]
trigger4 = MoveReversed
ignorehitpause = 1

;-------------------------------------------------------------------------------
[Statedef 2810]
type = S
movetype = H
physics = N
juggle = 0
ctrl = 0
sprpriority = 1

[State 2810, NotHitBy]
type = NotHitBy
trigger1 = ishelper
value = SCA
;value2 = S,NA
time = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2810, DestroySelf]
type = DestroySelf
trigger1 = ishelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

[State 2810, Turn]
type = Turn
trigger1 = Time = 0
trigger1 = Enemynear(0),Name = "Igniz Eagrose Version"
trigger1 = facing*(Enemynear(0),facing)=1
trigger1 = Time = 0
trigger1 = Enemynear(1),Name = "Igniz Eagrose Version"
trigger1 = facing*(Enemynear(1),facing)=1
ignorehitpause = 1

[State 2810, VelSet]
type = VelSet
trigger1 = 1
x = 0
ignorehitpause =1

[State 2810, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =1

[State 2810, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 2803

[State 2810, SelfState]
type = SelfState
trigger1 = Time >= 200
value = 5050

;-------------------------------------------------------------------------------
[Statedef 2811]
type = S
movetype = H
physics = N
juggle = 0
ctrl = 0
Velset = 0,0

[State 2811, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =1

[State 2811, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 2804

;-------------------------------------------------------------------------------
[Statedef 2812]
type = S
movetype = H
physics = N
juggle = 0
ctrl = 0

[State 2812, VelSet]
type = VelSet
trigger1 = 1
x = 0
ignorehitpause =1

[State 2812, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause =1

[State 2812, HitFallSet]
type = HitFallSet
trigger1 = Time = 1
value = 1
xvel = -4
yvel = -6

[State 2812, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 9999

;-------------------------------------------------------------------------------
[Statedef 2813]
type = A
movetype = H
physics = N
velset = -2.2,-15.3
sprpriority = -6

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ishelper
value = SCA
ignorehitpause = 1

[State 2813, DestroySelf]
Type = DestroySelf
trigger1 = ishelper
ignorehitpause = 1

[State 2813, AssertSpecial]
type = AssertSpecial
trigger1 = Vel Y < 0
flag = invisible
ignorehitpause = 1
;persistent =

[State 2813, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2805

[State 2813, VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .6

[State 2813, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 16
ampl = 10
freq = 90
phase = 90
ignorehitpause = 1

[State 2813, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -1
absolute = 1

[State 2813, LifeAdd]
type = null;LifeAdd
trigger1 = Pos Y >= 0
trigger1 = life <= 95
value = -1
absolute = 1

[State 2813, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;===============================================================================
;UNKNOWN ULTIMATE MOVE : SHADOW CLONE
;made by Eagrose
;===============================================================================
[Statedef 3000]
type    = S
physics = S
movetype = I
anim = 3000
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
;persistent = 0

;-----------------------striker reset
[State -2, Striker Time Cooldown start]
type = VarSet
trigger1 = fvar(20) < floor(var(40)/2)
fv = 20
value = 0
ignorehitpause = 1
persistent = 0

[State -2, Striker Time Cooldown start]
type = VarSet
trigger1 = fvar(21) < floor(var(40)/2)
fv = 21
value = 0.0
ignorehitpause = 1
persistent = 0

[State -2, Striker Time Cooldown start]
type = VarSet
trigger1 = fvar(22) < floor(var(40)/2)
fv = 22
value = 0.0
ignorehitpause = 1
persistent = 0

[State -2, Striker Time Cooldown start]
type = VarSet
trigger1 = fvar(23) < floor(var(40)/2)
fv = 23
value = 0.0
ignorehitpause = 1
persistent = 0
;-----------------------

[State 3000, PosAdd]
type = PosAdd
trigger1 = frontEdgeDist < 60
x = -(70-frontEdgeDist)
;y = 0
ignorehitpause = 1
persistent = 0

[State 3000, VarSet]; ---- var(1) BGPALFX changing
type = VarSet
trigger1 = 1
var(1) = 256
persistent = 0
ignorehitpause = 1

[State 3000, VarAdd]; ---- var(1) BGPALFX changing
type = VarAdd
triggerall = var(1) > 0
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 10, < 1
var(1) = -6

[State 3000, VarSet]; ---- var(1) BGPALFX changing
type = VarSet
trigger1 = var(1) < 0
var(1) = 0
ignorehitpause = 1

[State 3000, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 10, < 1
time = 1
add = 0,0,0
mul = var(1),var(1),var(1)
;sinadd = 0,0,0,10
invertall = 1
color = 256
ignorehitpause = 1

[State 3000, AssertSpecial]
type = AssertSpecial
Trigger1 = 1
flag = nobardisplay
flag2 = timerfreeze
ignorehitpause = 1

[State 3000, AssertSpecial]
type = AssertSpecial
Trigger1 = AnimElem = 10, >=0
Trigger1 = AnimElem = 11, <1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = 1
time = 268  ;36+60+172
anim = -1
;sound =
;pos =
movetime = 268
darken = 0
p2defmul = 1
poweradd = 0;ifelse(((palno=12) || ((palno=[7,11]) && var(58)=1 && floor(var(42)/10)%10=1)),0,-5000)
unhittable = 1
;endcmdbuftime = (winmugen only)
pausebg = 1 ;(winmugen only)
ignorehitpause = 1
persistent = 0

[State 3000, Helper]; ---- UNKNOWN ULTIMATE MOVE FLASH from mai_mvc2
type = Helper
Trigger1 = AnimElem = 10, >=0
helpertype = normal
stateno = 31030
ID = 31010
name = "UNKNOWN ULTIMATE MOVE FLASH from mai_mvc2"
pos = 3,-105
PosType = P1
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 3000, PlaySnd]
type = PlaySnd
Trigger1 = AnimElem = 10, >=0
value = S0,121
ignorehitpause = 1
persistent = 0

[State 3000, Ultimate Move Screen helper]
Type = Helper
Trigger1 = AnimElem = 10, >=0
StateNo = 6300
ID = 6301
Name = "Ultimate Move Screen helper"
Pos = 0,0
PosType = P1
facing = 1
Ownpal = 1
SuperMoveTime = 999
PauseMoveTime = 999
persistent = 0

[State 3000, Explod]
type = Explod
trigger1 = animelem = 10, >=0
anim = 3003
ID = 3003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 1,0
accel = 0,0
random = 0,0
removetime = 60
supermovetime = 999
pausemovetime = 999
scale = 1,1
sprpriority = 1
ontop = 0
shadow = 255,255,255
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 3000, Helper]; ---- Shadow Clone Igniz
type = Helper
triggerall = !numhelper(97864)
trigger1 = animelem = 10, >=61
helpertype = player
name = "Shadow Clone Igniz"
ID = 97864  ; ---- MUST NOT change this !
stateno = 3099
pos = 60,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 1
ownpal = 1
supermovetime = 172
pausemovetime = 172
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1, >=0 ;animelem = 10, >=59
value = S0,20
pan = -50
persistent = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1, >=2 ;animelem = 10, >=61
value = S0,20
pan = 50
persistent = 0

;****************************************
[State 191, Helper]; ---- Lightning
Type = Helper
trigger1 = animelem = 11, >=0
StateNo = 8000
ID = 8000
Name = "Lightning"
Pos = -13,50
PosType = P1
Ownpal = 1
Size.XScale = 2
Size.YScale = 2
ignoreHitPause = 1
supermovetime = 999
pausemovetime = 999
persistent = 0

[State 191, Helper]; ---- Lightning BG
Type = Helper
trigger1 = animelem = 11, >=0
StateNo = 8001
ID = 8001
Name = "Lightning BG"
Pos = -4,60
PosType = P1
Ownpal = 1
Size.XScale = 2
Size.YScale = 2
ignoreHitPause = 1
supermovetime = 999
pausemovetime = 999
persistent = 0

[State 191, EnvColor]; ---- Lightning EnvColor
type = EnvColor
trigger1 = animelem = 11, >=0
value = 255,255,255
time = 1
ignorehitpause = 1
ignoreHitPause = 1
persistent = 0

[State 191, PlaySnd]; ---- Lightning sound
type = PlaySnd
trigger1 = animelem = 11, >=0
value = S0,74
channel = 7
pan = -50
ignoreHitPause = 1
persistent = 0

[State 191, PlaySnd]; ---- Lightning sound
type = PlaySnd
trigger1 = animelem = 11, >=0
value = S0,74
channel = 8
pan = 50
ignoreHitPause = 1
persistent = 0

[State 191, PlaySnd]; ---- cloak release sound
type = PlaySnd
trigger1 = time = 171
value = S0,1
ignoreHitPause = 1
;****************************************

[State 3000, ChangeState]
type = ChangeState
trigger1 = animTime = 0   ;468-36-36=396
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Shadow Clone Igniz recreater system helper
[Statedef 3098]
type = S
physics = N
movetype = I
anim = 9999 ;blank
ctrl = 0

[State 3098, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3098, BindToParent]
type = BindToParent
trigger1 = root,NumHelper(97864)
time = 1
facing = 1
pos = 0,0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3098, VarSet]; ---- recreate judger var initialize
type = VarSet
trigger1 = 1
v = 1
value = 0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3098, VarSet]; ---- recreate judge
type = VarSet
trigger1 = !root,NumHelper(97864)
v = 1
value = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3098, Helper]; ---- Shadow Clone Igniz Recreate when destroyselfed by enemy p2stateno
type = Helper
trigger1 = var(1)
helpertype = player
name = "Shadow Clone Igniz"
ID = 97864  ; ---- MUST NOT change this !
stateno = 3100
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 1
ownpal = 1
supermovetime = 0
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3098, DestroySelf]
type = DestroySelf
trigger1 = var(1)
trigger2 = parent,stateno = 5150 ; ---- dead
trigger3 = roundstate != 2
Trigger4 = root,var(39) = 1
trigger4 = NumPartner && Numhelper(4211) && Helper(4211),stateno = 4215 ;Is team-mode IGNIZ's BIONIC LINK
trigger4 = parent,life <= 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999


; Shadow Clone Igniz Intro Pose ------------------------------------------------------
[Statedef 3099]
type = S
ctrl = 0
anim = 3099
velset = 0,0

[State 3099, Helper]; ---- Shadow Clone Igniz recreater system helper
type = Helper
triggerall = !root,NumHelper(46879)
trigger1 = 1
helpertype = normal
name = "Shadow Clone Igniz recreater system helper"
ID = 46879  ; ---- MUST NOT change this !
stateno = 3098
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 3099, LifeSet]
type = LifeSet
triggerall = root,alive
trigger1 = root,life > (root,lifemax/3)
value = root,life
ignorehitpause = 1
persistent = 0

[State 3099, LifeSet]
type = LifeSet
triggerall = root,alive
trigger1 = root,life <= (root,lifemax/3)
value = floor(root,lifemax/3)
ignorehitpause = 1
persistent = 0

[State 3099, Aura]
type = Afterimage
trigger1 = 1
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,30
time    =  -1
length  = 12
TimeGap = 1
FrameGap = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3099, BGPalFX]; ---- BG darken
Type = BGPalFX
trigger1 = time = [0,172]
Mul = floor(time*1.48),floor(time*1.48),floor(time*1.48)
Time = 3
ignoreHitPause = 1

[State 3099, Helper]; ---- Lightning
Type = Helper
Trigger1 = 1
StateNo = 8000
ID = 8000
Name = "Lightning"
Pos = -13,50
PosType = P1
Ownpal = 1
Size.XScale = 2
Size.YScale = 2
ignoreHitPause = 1
supermovetime = 999
pausemovetime = 999
persistent = 0

[State 3099, Helper]; ---- Lightning BG
Type = Helper
Trigger1 = 1
StateNo = 8001
ID = 8001
Name = "Lightning BG"
Pos = -4,60
PosType = P1
Ownpal = 1
Size.XScale = 2
Size.YScale = 2
ignoreHitPause = 1
supermovetime = 999
pausemovetime = 999
persistent = 0

[State 3099, EnvColor]; ---- Lightning EnvColor
type = EnvColor
trigger1 = 1
value = 255,255,255
time = 1
ignorehitpause = 1
ignoreHitPause = 1
persistent = 0

[State 3099, PlaySnd]; ---- Lightning sound
type = PlaySnd
trigger1 = 1
value = S0,74
channel = 7
pan = -50
ignoreHitPause = 1
persistent = 0

[State 3099, PlaySnd]; ---- Lightning sound
type = PlaySnd
trigger1 = 1
value = S0,74
channel = 8
pan = 50
ignoreHitPause = 1
persistent = 0

[State 3099, PlaySnd]; ---- cloak release sound
type = PlaySnd
trigger1 = time = 75
value = S0,1
ignoreHitPause = 1

[State 3099, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Shadow Clone Igniz recreate dizzy ---------------------------------------------
[Statedef 3100]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3100, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 3100
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3100, NotHitBy]; ---- Reversaled helper debug
type = NotHitBy
trigger1 = IsHelper(97864)
value = SCA
time = 25
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3100, RemoveExplod]; ---- Reversaled helper debug
type = RemoveExplod
trigger1 = IsHelper(97864)
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3100, Helper]; ---- Shadow Clone Igniz recreater system helper
type = Helper
triggerall = !root,NumHelper(46879)
trigger1 = 1
helpertype = normal
name = "Shadow Clone Igniz recreater system helper"
ID = 46879  ; ---- MUST NOT change this !
stateno = 3098
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
ignorehitpause = 1
persistent = 0

[State 3100, LifeSet]; ---- recreated SCIgniz life set
type = LifeSet
trigger1 = root,fvar(5)!=0
value = ifelse((root,fvar(6)!=0),floor((root,fvar(5))*LifeMax/1000.0-root,fvar(6)),floor((root,fvar(5))*LifeMax/1000.0)-20)
ignorehitpause = 1
persistent = 0

[State 3100, Aura]
type = Afterimage
trigger1 = 1
trans = add
PalContrast =  250, 250, 250
PalBright = 0,0,30
time    =  -1
length  = 12
TimeGap = 1
FrameGap = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
persistent = 0

[State 3100, ChangeAnim]
type = ChangeAnim
triggerall = AnimExist(5030)
triggerall = pos Y < 0
trigger1 = time = 0
value = 5030
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3100, PosSet]
type = PosSet
trigger1 = pos Y >= 0
;x = 0
y = 0
ignorehitpause = 1
persistent = 0

[State 3100, PosAdd]
type = PosAdd
Trigger1 = time = [3,15]
x = -2.7 ;-3
ignorehitpause = 1

[State 3100, HitBy]
type = HitBy
trigger1 = root,NumHelper(46879)
value = SCA,NA,SA,HA,AA,NP,SP,HP,AP,NT,ST,HT,AT
time = 1
ignorehitpause = 1

[State 3100, HitFallSet]
type = HitFallSet
trigger1 = pos Y < 0
value = 1
;xvel =
yvel = -4.5
ignorehitpause = 1
persistent = 0

[State 3100, SelfState]
type = ChangeState
trigger1 = pos Y < 0
trigger1 = Time >= 25
value = 5030

[State 3100, SelfState]
type = ChangeState
trigger1 = Time >= 25
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Shadow Clone Igniz fade out
[Statedef 3101]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 3101, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3101, AfterImageTime]; ---- destroy afterimage
type = AfterImageTime
trigger1 = 1
time = 0
ignorehitpause = 1

[State 3101, AssertSpecial]
type = AssertSpecial
trigger1 = 100-(time-205) <= 0
flag = invisible
ignorehitpause = 1

[State 3101, AssertSpecial]
type = AssertSpecial
triggerall = roundstate > 2
trigger1 = Time = [0,255]
flag = RoundNotOver
ignorehitpause = 1

[State 3101, Trans]
type = Trans
trigger1 = time <= 255
trans = addalpha
alpha = 50, time
ignorehitpause = 1

[State 3101, Trans]
type = Trans
trigger1 = time >= 255
trigger1 = 100-(time-205) >= 0
trans = addalpha
alpha = 100-(time-205), 256
ignorehitpause = 1

[State 0, Explod];shadow clone explod line end
type = null;Explod
triggerall = NumPartner && Numhelper(4211) && Helper(4211),stateno = 4215 ;Is team-mode IGNIZ's BIONIC LINK
triggerall = AuthorName = "GONZO-,Eagrose"
triggerall = Name = "Igniz Eagrose Version"
triggerall = Ishelper(97864) ;shadow clone
triggerall = !NumExplod(4224)
trigger1 = 1
anim = 4223
ID = 4224
pos = 0,ifelse(statetype = L,0,const(size.head.pos.y)+10)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1.5,1.5
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 1
persistent = 0


;===============================================================================
;Unique Team-Only Move : Igniz's Bionic Link
;made by Eagrose
;===============================================================================
[Statedef 4200]
type    = S
physics = S
movetype = I
anim = 0
velset = 0,0
ctrl = 0
sprpriority = 2

[State 4200, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ParentVarSet];caculate igniz life var(8)
type = VarSet
trigger1 = 1
var(8) = life
ignorehitpause = 1
persistent = 0

[State 4200, Helper]
type = null;Helper
trigger1 = !Numhelper(4210)
helpertype = normal ;player
name = "Igniz's Bionic Link Reversaldef Helper"
ID = 4210
stateno = 4210
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1

[State 4200, Helper]
type = Helper
trigger1 = !Numhelper(4211)
helpertype = normal ;player
name = "Igniz's Bionic Link Hitdef Helper"
ID = 4211
stateno = 4211
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 2147483647
pausemovetime = 2147483647
ignorehitpause = 1

[State 4200, ChangeState]
type = ChangeState
trigger1 = numhelper(4211)
;trigger1 = time >= 60
value = 0
ctrl = 1


;-------------------------------------------------------------------------------
;Igniz's Bionic Link Reversaldef Helper
[Statedef 4210]
type    = S
physics = S
movetype = A
anim = 4210
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
affectteam = F
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,AA,AP,AT
priority = 9999999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HLMAFD
numhits = 0
sparkno = -1
hitsound = -1
p1stateno = 4215
p2stateno = 4216
guard.dist = 0
ID = 4000
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 600
trigger2 = movereversed
trigger3 = !partner,alive
ignorehitpause = 1


;-------------------------------------------------------------------------------
;Igniz's Bionic Link Hitdef Helper
[Statedef 4211]
type    = S
physics = S
movetype = A
anim = 4210
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Hitdef]
type = Hitdef
trigger1 = time%3=0
affectteam = F
attr = SCA,HA
priority = 9999999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HLMAFD
guardflag = N
numhits = 0
sparkno = -1
hitsound = -1
p1stateno = 4215
p2stateno = 4216
guard.dist = 0
hitonce = 1
ID = 4000
ignorehitpause = 1

[State 0, Hitdef]
type = Hitdef
trigger1 = time%3=1
affectteam = F
attr = SCA,HT
priority = 9999999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HLMAFD
guardflag = N
numhits = 0
sparkno = -1
hitsound = -1
p1stateno = 4215
p2stateno = 4216
guard.dist = 0
hitonce = 1
ID = 4000
ignorehitpause = 1

[State 0, Hitdef]
type = Hitdef
trigger1 = time%3=2
affectteam = F
attr = SCA,HP
priority = 9999999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = HLMAFD
guardflag = N
numhits = 0
sparkno = -1
hitsound = -1
p1stateno = 4215
p2stateno = 4216
guard.dist = 0
hitonce = 1
ID = 4000
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 600
trigger2 = movereversed
trigger3 = !partner,alive
ignorehitpause = 1


;-------------------------------------------------------------------------------
;Infinit-target Helper 
;change with rather much CAUTION !!
;-------------------------------------------------------------------------------
[Statedef 4215]
type    = S
physics = S
movetype = I
anim = 9999
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1
facing = 1
pos = 0,0
ignorehitpause =  1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, TargetDrop];Drop other helper target (for example shadow clone)
type = TargetDrop
trigger1 = Numtarget > 1
trigger2 = target,ishelper
keepone = 1
ignorehitpause = 1

[State 0, TargetDrop]
type = TargetDrop
trigger1 = IsHelper(4210)
trigger1 = !(target,ID = partner,ID)
keepone = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall = !win || !lose || !drawgame
trigger1 = IsHelper(4210)
trigger1 = !(target,ID = partner,ID)
value = 4210
ignorehitpause = 1

[State 0, TargetDrop]
type = TargetDrop
trigger1 = IsHelper(4211)
trigger1 = !(target,ID = partner,ID)
keepone = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall = !win || !lose || !drawgame
trigger1 = IsHelper(4211)
trigger1 = !(target,ID = partner,ID)
value = 4211
ignorehitpause = 1

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA
priority = 9999999, hit    ;;Hit,Miss,Dodge 3 4 7 99999 9999999
hitflag = P
numhits = 0
sparkno = -1
hitsound = -1
guard.dist = 0
ID = 4000
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = 1
time = 70
anim = -1
movetime = 70
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1
ignorehitpause = 1
persistent = 0

[State 3000, Helper]; ---- UNKNOWN ULTIMATE MOVE FLASH from mai_mvc2
type = Helper
Trigger1 = 1
helpertype = normal
stateno = 31030
ID = 31010
name = "UNKNOWN ULTIMATE MOVE FLASH from mai_mvc2"
;pos = IfElse(TeamSide=2,303,17),-146
pos = (160+floor(Partner,Pos X)),(Partner,Pos Y)-Pos Y+(partner,const(size.mid.pos.y))
PosType = left
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 3000, PlaySnd]
type = PlaySnd
Trigger1 = 1
value = S0,121
ignorehitpause = 1
persistent = 0

[State 3000, PlaySnd]
type = PlaySnd
Trigger1 = time = 60
value = S0,127
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = target,ID = partner,ID
var(10) = 1
ignorehitpause = 1

;This Setting is used ONLY during Nightmare Mode, for sharing life among self/partner/ShadowClone
[State 0, ParentVarSet];caculate partner life var(8), caution this is ParentVarSet !!!
type = ParentVarSet
trigger1 = 1
var(8) = Parent,life
ignorehitpause = 1
persistent = 0   ;the first time, only run once.

;This Setting is used ONLY during Nightmare Mode, for sharing life among self/partner/ShadowClone
[State 0, ParentVarSet];caculate partner life var(9), caution this is ParentVarSet !!!
type = ParentVarSet
trigger1 = NumPartner
var(9) = Partner,life
ignorehitpause = 1
persistent = 0   ;the first time, only run once.

[State 0, ParentVarSet];syn var(29) init
type = ParentVarSet
trigger1 = 1
var(29) = 0
ignorehitpause = 1
persistent = 0   ;the first time, only run once.

;----------------------------------------------------------------------
;main system start from here, in helper's state 4215
;also include targetlifeadd on partner (but not include lifeadd on Igniz, because THIS IS HELPER)
;in order to perform lifeadd on Igniz, I use parent-vars to send infomation to ROOT Igniz
;but CAUTION, there is delay between helper here and the root igniz. this delay must be count in.
;
;----------------------------------------------------------------------
[State 0, AssertSpecial]; ---- DO NOT CHANGE THIS!!!
type = AssertSpecial
triggerall = !((win || lose || drawgame) && roundstate = 2)
trigger1 = parent,var(21) = 1
flag = noko
ignorehitpause =  1

;------------------------------
;caculate igniz life
;------------------------------
;CAUTION: parent-life caculating must count in the "delay of root's lifeadd", otherwise may cause BUG
[State 0, VarSet];caculate igniz life-lost parent,var(17)
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = Parent,life < Parent,LifeMax ;count in the "delay of root's lifeadd"
var(17) = Parent,LifeMax-Parent,life  ;count in the "delay of root's lifeadd"
ignorehitpause = 1

;CAUTION: parent-life caculating must count in the "delay of root's lifeadd", otherwise may cause BUH
[State 0, VarSet];caculate igniz no change
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = Parent,life >= Parent,LifeMax ;count in the "delay of root's lifeadd"
var(17) = 0
ignorehitpause = 1

;------------------------------
;caculate partner life
;------------------------------
[State 0, VarSet];caculate partner life-lost parent,var(18)  ;parent,var(18) is positive !!!
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = NumPartner
trigger1 = Partner,life < partner,LifeMax
var(18) = partner,LifeMax-partner,life
ignorehitpause = 1

[State 0, VarSet];caculate partner no change
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = NumPartner
trigger1 = Partner,life >= partner,LifeMax
var(18) = 0
ignorehitpause = 1

;------------------------------
;igniz life-chain --- cannot perform here, so send parent-vars to ROOT
;shadow clone one-way life-chain is also here
;------------------------------
[State 0, TargetLifeAdd];life chain - igniz (+/-) ---send to parent,var(23)
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = parent,var(23) = 0  ;It is not helper's duty to reset this var !!!
triggerall = !((Parent,life=[0,1]) || (partner,life=[0,1]))  ;Life-share end when either nearly dead (but link not broken until both nearly dead)
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = !NumHelper(97864)     ;shadow clone doesn't exists
var(23) = Parent,var(17)-floor((Parent,var(17)+Parent,var(18))/2)
ignorehitpause = 1

[State 0, TargetLifeAdd];life chain - igniz (+/-) (nightmare mode) (clone one-way share 1/4) ---send to parent,var(23)
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = parent,var(23) = 0  ;It is not helper's duty to reset this var !!!
triggerall = !((Parent,life=[0,1]) || (partner,life=[0,1]))  ;Life-share end when either nearly dead (but link not broken until both nearly dead)
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = NumHelper(97864)     ;shadow clone exists
var(23) = Parent,var(17)-floor((Parent,var(17)+Parent,var(18))/2)+floor((Parent,var(8)-Parent,life+Parent,var(9)-partner,life)/3)
ignorehitpause = 1

[State 0, TargetLifeAdd];life chain - shadow clone (only -) (nightmare mode) (clone one-way share 1/2) ---send to parent,var(24)
type = ParentVarSet
triggerall = parent,var(24) = 0  ;It is not helper's duty to reset this var !!!
triggerall = !((Parent,life=[0,1]) || (partner,life=[0,1]))  ;Life-share end when either nearly dead (but link not broken until both nearly dead)
triggerall = parent,alive
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = NumHelper(97864)
;var(24) = -floor((Parent,var(17)+Parent,var(18))/2)  ;shadow clone only take damage, don't share
var(24) = -floor((Parent,var(8)-Parent,life+Parent,var(9)-partner,life)/3)
ignorehitpause = 1

;------------------------------
;partner life-chain
;------------------------------
[State 0, TargetLifeAdd];life chain - partner (+/-)
type = TargetLifeAdd
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = !((Parent,life=[0,1]) || (partner,life=[0,1]))  ;Life-share end when either nearly dead (but link not broken until both nearly dead)
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = !NumHelper(97864)
value = parent,var(18)-floor((parent,var(17)+parent,var(18))/2)
kill = 0
absolute = 1
ignorehitpause = 1

[State 0, TargetLifeAdd];life chain - partner (+/-) (nightmare mode) (clone one-way share 1/4)
type = TargetLifeAdd
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
triggerall = !((Parent,life=[0,1]) || (partner,life=[0,1]))  ;Life-share end when either nearly dead (but link not broken until both nearly dead)
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
trigger1 = NumHelper(97864)
value = parent,var(18)-floor((parent,var(17)+parent,var(18))/2)+floor((Parent,var(8)-Parent,life+Parent,var(9)-partner,life)/3)
kill = 0
absolute = 1
ignorehitpause = 1

;------------------------------
;partner is nearly dead, life-share end, but link not broken until self is also nearly dead.
;------------------------------
[State -2, SuperPause]
type = SuperPause
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
triggerall = partner,alive
triggerall = partner,life = 0   ;partner nearly dead, life-share end
trigger1 = parent,life > 1    ;self not nearly dead
trigger1 = parent,alive
Trigger2 = Partner,AuthorName = "Orochi Herman,Eagrose"
Trigger2 = Partner,Name = "Orochi Eagrose Version"
Trigger2 = Partner,alive
Trigger2 = Partner,var(39) = 1
Trigger2 = Partner,Numhelper(4211)
Trigger2 = (Partner,var(32) = [0,1]) || (Partner,var(32) = 2 && parent,stateno = 4230 && parent,life != floor(parent,lifemax/2))  ;Orochi cause Igniz resurrect
time = 2
anim = -1
movetime = 2
darken = 1
p2defmul = 1
poweradd = 0
unhittable = 1
ignorehitpause =  1

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
triggerall = partner,alive
triggerall = partner,life = 0   ;partner nearly dead, life-share end
trigger1 = parent,life > 1    ;self not nearly dead
trigger1 = parent,alive
Trigger2 = Partner,AuthorName = "Orochi Herman,Eagrose"
Trigger2 = Partner,Name = "Orochi Eagrose Version"
Trigger2 = Partner,alive
Trigger2 = Partner,var(39) = 1
Trigger2 = Partner,Numhelper(4211)
Trigger2 = (Partner,var(32) = [0,1]) || (Partner,var(32) = 2 && parent,stateno = 4230 && parent,life != floor(parent,lifemax/2))  ;Orochi cause Igniz resurrect
flag = noko
ignorehitpause =  1

[State 0, TargetLifeadd]
type = TargetLifeadd
triggerall = IsHelper(4211)
triggerall = var(10) = 1        ;IGNIZ's BIONIC LINK is on
triggerall = partner,alive
triggerall = partner,life = 0   ;partner nearly dead, life-share end
trigger1 = parent,life > 1    ;self not nearly dead
trigger1 = parent,alive
Trigger2 = Partner,AuthorName = "Orochi Herman,Eagrose"
Trigger2 = Partner,Name = "Orochi Eagrose Version"
Trigger2 = Partner,alive
Trigger2 = Partner,var(39) = 1
Trigger2 = Partner,Numhelper(4211)
Trigger2 = (Partner,var(32) = [0,1]) || (Partner,var(32) = 2 && parent,stateno = 4230 && parent,life != floor(parent,lifemax/2))  ;Orochi cause Igniz resurrect
value = 1
kill = 0
absolute = 1
ignorehitpause = 1

[State 0, TargetState];Partner Still linking noko DEBUG TargetState (for "5150 p2state" instant-kill moves)
type = TargetState
triggerall = NumPartner
triggerall = Partner,alive
trigger1 = Partner,stateno = 5150
value = 4216
ignorehitpause =  1

;------------------------------
;This Setting is used ONLY during Nightmare Mode, for sharing life among self/partner/ShadowClone
;after calculate, reset life var (igniz)
;------------------------------
[State 0, ParentVarSet];caculate igniz life var(8) reset at tick end, caution this is ParentVar !!!
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
trigger1 = 1
var(8) = parent,life+parent,var(23)
ignorehitpause = 1

;------------------------------
;This Setting is used ONLY during Nightmare Mode, for sharing life among self/partner/ShadowClone
;after calculate, reset life var (partner)
;------------------------------
[State 0, ParentVarSet];caculate partner life var(9) reset at tick end, caution this is ParentVarSet !!!
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
trigger1 = NumPartner
var(9) = Partner,life
ignorehitpause = 1

;------------------------------
;Syn reset var 29
;------------------------------
[State 0, ParentVarSet];var(29) reset tell root to continue
type = ParentVarSet
triggerall = root,var(29) = 0   ;SYN ready
;Triggerall = partner,stateno!=[120,159]  ;SYN ready
;Triggerall = root,stateno!=[120,159]  ;SYN ready
trigger1 = 1
var(29) = 1111
ignorehitpause = 1

;------------------------------
;Igniz dead, link line explod disapear
;------------------------------
[State 3000, PlaySnd]
type = PlaySnd
triggerall = !NumExplod(4220)
trigger1 = !parent,alive
trigger2 = roundstate > 2
value = S0,126
ignorehitpause = 1
persistent = 0

[State 0, Explod];igniz explod
type = Explod
triggerall = !NumExplod(4220)
trigger1 = !parent,alive
trigger2 = roundstate > 2
anim = 4221
ID = 4222
pos = 0,ifelse(parent,statetype = L,0,const(size.mid.pos.y))
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1.5,1.5
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 1
persistent = 0

;------------------------------
;Partner dead, link line explod disapear
;------------------------------
[State 3000, PlaySnd]
type = PlaySnd
triggerall = !NumExplod(4221)
trigger1 = !partner,alive
trigger2 = roundstate > 2
value = S0,126
ignorehitpause = 1
persistent = 0

[State 0, Explod];partner explod
type = Explod
triggerall = !NumExplod(4221)
trigger1 = !partner,alive
trigger2 = roundstate > 2
anim = 4221
ID = 4223
;pos = (160+floor(Partner,Pos X)),(Partner,Pos Y)+(partner,const(size.mid.pos.y))+240
pos = floor(Partner,ScreenPos X),(Partner,ScreenPos Y)+(partner,const(size.mid.pos.y))
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1.5,1.5
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 1
persistent = 0

;------------------------------
;DEBUG
;------------------------------

;[State 0, TargetLifeAdd];life chain - partner fake dead DEBUG
;type = TargetLifeAdd
;triggerall = var(10) = 1
;trigger1 = partner,stateno = 5150
;trigger1 = !partner,alive
;trigger1 = partner,life > 0
;value = -1
;kill = 1
;absolute = 1
;ignorehitpause = 1

[State 0, HitAdd];Infinite-Target hitadd not reset DEBUG
type = HitAdd
trigger1 = 1
value = -999
ignorehitpause = 1

[State 0, TargetDrop]
type = TargetDrop
trigger1 = win || lose || drawgame
excludeID = -1
keepone = 0
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = win || lose || drawgame
ignorehitpause = 1

;-------------------------------------------------------------------------------
;Infinit-target Helper P2stateno
[Statedef 4216]
type    = U
physics = U
movetype = H
anim = -1
velset = 0,0
ctrl = 0
sprpriority = -1

[State 0, ChangeAnim2]
type = null;ChangeAnim2
trigger1 = 1
value = 0;5030
ignorehitpause = 1
persistent = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, RemoveExplod]; ---- Reversaled helper debug
type = RemoveExplod
triggerall = !IsHelper(97864) ; ---- Not Shadow Clone Igniz
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]; ---- Reversaled helper debug
type = DestroySelf
triggerall = !IsHelper(97864) ; ---- Not Shadow Clone Igniz
trigger1 = isHelper
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, SelfState]
type = SelfState
triggerall = statetype = A
trigger1 = time >= 1
value = 5210
ctrl = 1
ignorehitpause = 0

[State 0, SelfState]
type = SelfState
triggerall = statetype != A
trigger1 = time >= 1
value = 5201
ctrl = 1
ignorehitpause = 0


;-------------------------------------------------------------------------------
[Statedef 4230]
type    = U
physics = U
movetype = I
anim = -1
velset = 0,0
ctrl = 0
sprpriority = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5300
ignorehitpause = 1
persistent = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, LifeSet]
type = LifeSet
trigger1 = !alive
trigger2 = life < floor(lifemax/2)
value = floor(lifemax/2)
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = !alive
trigger2 = life < floor(lifemax/2)
flag = noko
flag2 = timerfreeze
ignorehitpause =  1

[State 0, SelfState]
type = SelfState
triggerall = life = floor(lifemax/2)
;triggerall = alive
trigger1 = anim = 5300
trigger1 = animtime = 0
trigger2 = time >= 300
value = 5030
ignorehitpause = 1


;-------------------------------------------------------------------------------
[Statedef 4240]
type    = U
physics = U
movetype = I
anim = 0
velset = 0,0
ctrl = 0
sprpriority = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = roundstate = 2
trigger1 = life > 0
value = 20
ctrl = 1
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = roundstate > 2
value = 5050
ignorehitpause = 1

;-------------------------------------------------------------------------------
[Statedef 4241]
type    = U
physics = U
movetype = I
anim = 0
velset = 0,0
ctrl = 0
sprpriority = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, SelfState]
type = SelfState
trigger1 = 1
value = 180
ctrl = 0
ignorehitpause = 1


