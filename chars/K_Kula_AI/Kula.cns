[Data]
life = 3000
power = 5000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 9
airjuggle = 7
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 255
IntPersistIndex = 50
FloatPersistIndex = 5

[Size]
xscale = 1           
yscale = 1           
ground.back = 21     
ground.front = 19    
air.back = 16        
air.front = 18       
height = 60          
attack.dist = 160    
proj.attack.dist = 90
proj.doscale = 0     
head.pos = -2, -94   
mid.pos = -6, -66    
shadowoffset = 0     
draw.offset = 0,0    

[Velocity]
walk.fwd  = 3.3009185791015625
walk.back = -3.3009185791015625
run.fwd  = 6.3125, 0   
run.back = -5.95703125,-4 
jump.neu = 0,-8.76953125 ;8.2578125
jump.back = -3.3009185791015625 
jump.fwd = 3.3009185791015625       
runjump.back = -4.951171875,-8.76953125
runjump.fwd = 4.951171875,-8.76953125
airjump.neu = 0 
airjump.back = 0
airjump.fwd = 0      

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = 0.51171875         ;Vertical acceleration
stand.friction = .828125  ;Friction coefficient when standing
crouch.friction = .828125 ;Friction coefficient when crouching


;---------------------------------------------------------------------------
; Variable usage:
; Var(2) Jump Stuff

;---------------------------------------------------------------------------
;Basic Stuff 
;---------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 1020, Diana]
type=explod
trigger1 = animelem = 2
anim=1170
sprpriority = -3
postype=p1
pos= 0, 0
ownpal = 1
removetime = -1
ignorehitpause = 0
vel = 0,0


; Win state decider
[Statedef 180]
type = S

[State 180, Random Winpose Decider]
Type = VarRandom
Trigger1 = !Var(0) && Time = 15
v = 0
Range = 181, 182

[State 180, Switch To Win Pose]
Type = ChangeState
Trigger1 = !Var(0)
Trigger1 = Var(0) := ifelse(command = "hold_x", 181, ifelse(command = "hold_y", 181, ifelse(command = "hold_a", 182, ifelse(command = "hold_b", 182,0))))
Trigger2 = Var(0)
Value = Var(0)
;---------------------------------------------------------------------------
; Win pose 1 
[Statedef 181]
type = S
velset = 0,0
anim = 181
spriority = -1
ctrl=0

[State 200, snd]
type=playsnd
trigger1= time = 9
value=1000,20
[State 200, snd]
type=playsnd
trigger1= animelem=3
value=180,0
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=5
value=180,1 
[State 200, snd]
type=playsnd
trigger1= animelem=11
value=180,2
 

[State 1020, Diana]
type=explod
trigger1 = !time
anim=1181
sprpriority = -3
postype=p1
pos= 0, 0
ownpal = 1
removetime = -1
ignorehitpause = 0
vel = 0,0

[State 182, 2] ;
type = AssertSpecial
trigger1 = time <270
flag = roundnotover

[Statedef 182]
type = S
velset = 0,0
anim = 182
spriority = -1
ctrl=0

[State 200, snd]
type=playsnd
trigger1= animelem=7
value=180,3
channel=0   
[State 200, snd]
type=playsnd
trigger1= animelem=12
value=180,4
channel=0 


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;Intro 
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 200, snd]
type=playsnd
triggerall = anim = 190
trigger1= time = 23
value=1000,17 
[State 200, snd]
type=playsnd
triggerall = anim = 190
trigger1= time = 103
value=190,0 
[State 200, snd]
type=playsnd
triggerall = anim = 190
trigger1= time = 183
value=190,1 
[State 200, snd]
type=playsnd
triggerall = anim = 190
trigger1= time = 84
trigger2= time = 215
value=1000,20

[State 1020, Diana]
type=explod
triggerall = anim = 190
trigger1 = animelem = 1
anim=1190
id = 190
sprpriority = -3
postype=p1
pos= 0, 0
ownpal = 1
removeongethit=0
ignorehitpause = 0
vel = 0,0
[State 1020, Ice]
type=explod
triggerall = anim = 190
trigger1 = animelem = 1
anim=2190
id = 190
sprpriority = -3
postype=p1
pos= 0, 0
ownpal = 1
removeongethit=0
ignorehitpause = 0
vel = 0,0

[State 192]
type=changestate
trigger1 = p2name = "K'" 
trigger2 = p2name = "K9999"
trigger3 = p2name = "Nameless"
value = 192

[State 192, 2] ;
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, 3] ;
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;Intro vs Nests Characters
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 200, snd]
type=playsnd
triggerall = p2name = "K'" && Enemy, AuthorName = "K.O.D"
trigger1= animelem = 1
trigger1 = enemy,selfanimexist(185)
value=190,2 
[State 200, snd]
type=playsnd
trigger1= animelem = 20
value=190,3 

[State 200, snd]
type=playsnd
trigger1= time = 156
trigger2= time = 228
value=1000,20

[State 1000, remove fx]
type = RemoveExplod
trigger1 = !time
ID = 190

[State 191, Diana]
type = Explod
triggerall = p2name = "K'" && Enemy, AuthorName = "K.O.D"
trigger1 = enemy,selfanimexist(185)
trigger1 = animelem =1
anim = 1191
pos = -3, -2
postype = p2
ontop = 1
ownpal = 1
removeongethit=1
ignorehitpause = 0
bindtime = -1
[State 191, Diana]
type = Explod
trigger1 = animelem =1
anim = 1192
pos = 0, 0
postype = p1
sprpriority = 7
ownpal = 1
removeongethit=1
ignorehitpause = 0
bindtime = -1
[State 191, Diana]
type = Explod
trigger1 = animelem =1
anim = 1193
pos = 0, 0
postype = p1
ontop = 1
ownpal = 1
removeongethit=1
ignorehitpause = 0
bindtime = -1

[State 192, 2] ;
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, 3] ;
type = ChangeState
trigger1 = AnimTime = 0
value = 0

; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 200, snd]
type=playsnd
trigger1= animelem=1
value=195,0
channel=19   

[State 195, 1]
type = CtrlSet
triggerall = Roundstate = 2
trigger1 = var(59) = 0
trigger1 = Time = 40
value = 1

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = var(59) >= 1
trigger2 = time >= 40
trigger2 = EnemyNear(var(45)),movetype = A
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; NORMAL ATTACKS
;---------------------------------------------------------------------------
;CLOSE A
[Statedef 200]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 200  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0

[State 205, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 2
attr = S, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -76
hitsound = s3+(var(32)*2),1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Far A
[Statedef 205]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 205  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 1000
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 206
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0

[State 205, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 3
attr = S, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -77 
hitsound = s3+(var(32)*2),1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ICE :3
[Statedef 206]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 206
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;CLOSE C
[Statedef 210]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 210  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 3
attr = S, NA
damage = floor(31*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -70
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = 0
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 8
attr = S, NA
damage = floor(41*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -70
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
id = 200

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1    

;FAR C
[Statedef 215]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 215  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 1000: Helper]
type = Helper
trigger1 = animelem = 6
helpertype = Normal
id = 200
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 216
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 220, pos]
type = Posadd
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
x = 8

[State 220, pos]
type = Posadd
trigger1 = animelem = 9
trigger2 = animelem = 10
trigger3 = animelem = 11
trigger4 = animtime = 0
x = -8

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = (animelemno(0) = [6,7])
attr = S, NA
damage = floor(71*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -75
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
id = 200

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1    

;ICE :3
[Statedef 216]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 216
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;CLOSE B
[Statedef 220]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 220  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),4

[State 205, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = S, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -52
hitsound = s3+(var(32)*2),5
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;FAR B
[Statedef 225]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 225  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),4

[State 205, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = (animelemno(0) = [5,6])
attr = S, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -15, -70
hitsound = s3+(var(32)*2),5
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
persistent = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;CLOSE D
[Statedef 230]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 230 
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 220, Explod]
type = Explod
trigger1 = numhelper
trigger1 = helper(247), var(1)=1
anim = 17007
pos = -10,-55
postype = p2  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 4
attr = S, NA
damage = floor(35*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17004+(var(31)*10001)
sparkxy = -15, -75   
hitsound = s3+(var(32)*2),20
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 6,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = 0
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 6
attr = S, NA
damage = floor(35*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17004+(var(31)*10001)
sparkxy = -15, -90  
hitsound = s3+(var(32)*2),20
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),6

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1  

;Far D
[Statedef 235]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 235 
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 4
attr = S, NA
damage = floor(35*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -90   
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 6,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = 0
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 8
attr = S, NA
damage = floor(35*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -24   
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),6

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;STAND CD
[Statedef 240]
type    = S                      
movetype= A                    
physics = S                     
juggle  = 10             
velset = 0,0                    
ctrl = 0                       
anim = 240
poweradd= 0                               
sprpriority = 2 
facep2 = 1  

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=200,2
channel=0  
;volume = 200

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),8-(var(32)*2)

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = S, NA
damage = 107
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 980
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 240, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1    

;GUARD CANCEL CD
[Statedef 245]
type    = S                      
movetype= A                    
physics = S                     
juggle  = 10             
velset = 0,0                    
ctrl = 0                       
anim = 245
poweradd= -1000                               
sprpriority = 2 
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=200,1
channel=0  
;volume = 200

[State 245]
type = Nothitby
trigger1 = animelemtime(5) < 0
value = SCA

[State 240, 9]
type = HitDef
trigger1 = time = 0 
damage = 40, 0   
animtype=diagup
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -55    
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -55               
attr = S, NA  
guardflag = M                  
hitflag = MAF  
priority = 5, Hit                                          
pausetime = 11,13                                                                  
ground.velocity = -4,-8                            
air.velocity = -4,-7                              
guard.velocity = -12                                  
guard.pausetime = 11,11                            
guard.slidetime = 22                               
guard.hittime = 22                             
guard.ctrltime = 22                                
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0                  
yaccel = .5                                                
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower= 0,0

[State 245, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1       

;ONE INCH
[Statedef 250]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 250  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=4 
value=200,4
channel=0

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 5
attr = S, SA
damage = floor(40*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 14, 15
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -55
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(var(56),10900,1406)
fall = 1   
fall.recover = 1
fall.recovertime = 120

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 5
time = 12
ampl = -5
freq = 180

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1= animelem=4 
value = 3+(var(32)*2),2

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1   

;ONE INCH CANCEL
[Statedef 251]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 251  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=4 
value=200,4
channel=0


[State 210, 1]
type = HitDef
triggerall = p2movetype != H
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 5
attr = S, SA
damage = floor(40*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 14, 15
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -55
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(var(56),10900,1406)
fall = 1   
fall.recover = 1
fall.recovertime = 120

[State 230, 1]
type = HitDef
triggerall = p2movetype = H
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 5
attr = S, NA
damage = floor(31*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -55  
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 14,14
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 5
time = 12
ampl = -5
freq = 180

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1= animelem=4 
value = 3+(var(32)*2),2

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1   

;Slide Shoot
[Statedef 260]
type    = C                      
movetype= A                    
physics = N                    
velset = 0,0                    
ctrl = 0                       
anim = 260 
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=5 
value=200,5
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=5
value=1000,3

[State 850, slide]
type = velset
trigger1 = Animelem = 5
x = 9.208221435546875
[State 850, mul]
type = velmul
trigger1 = Animelemtime(5) > 0
x = 0.92082290751818648814356968863407
[State 850, stop]
type = velset
trigger1 = Animelem = 11
x = 0
[State 850, Back]
type = posadd
trigger1 = Animelem = 12
trigger2 = Animelem = 13
x = 8

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = C, NA
animtype = Hard
air.animtype = back
guardflag = L
hitflag = MAF
priority = 5, Hit
damage = 40, 0   
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 12 
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -7    
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -12       
ground.type = Trip
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 27
ground.hittime = 27
guard.hittime = 18
guard.slidetime = 18
guard.ctrltime = 29
ground.velocity = -1.75,-10.25341796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5,-8.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 506
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.807692307692307692307692307692308

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),6

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1    

;Critical Ice
[Statedef 270]
type    = S                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 270  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=4 
value=200,6
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=4
value=1000,11

[State 1000: Helper]
type = Helper
trigger1 = animelem = 4
helpertype = Normal
id = 200
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 271
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 230, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 6
trigger2 = animelem = 8
attr = S, NA
damage = floor(21*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -75   
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 3,12
guard.pausetime = 3,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -5.796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5


[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = (animelemno(0) = [11, 16]) 
attr = S, SA
damage = floor(20*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 13
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -75
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 1406
fall = 1   
fall.recover = 1
fall.recovertime = 120
id = 270
nochainID = 270 ;NO SHENANIGANS

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1   

;ICE :3
[Statedef 271]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 271
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;CROUCH A
[Statedef 400]
type    = C                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 400  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0

[State 205, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = C, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = M
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -47
hitsound = s3+(var(32)*2),1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;CROUCH C
[Statedef 410]
type    = C                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 410  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 400
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 411
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = C, NA
damage = floor(71*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -15, -96
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1    

;ICE :3
[Statedef 411]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 411
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;CROUCH B
[Statedef 420]
type    = C                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 420  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),4

[State 205, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = C, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = L
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -10  
hitsound = s3+(var(32)*2),5
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 10,11
guard.pausetime = 10,9
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;CROUCH D
[Statedef 430]
type    = C                      
movetype= A                    
physics = S                    
velset = 0,0                    
ctrl = 0                       
anim = 430  
poweradd= 0                               
sprpriority = 2  
juggle =10   
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = C, NA
animtype = Hard
air.animtype = back
guardflag = L
hitflag = MAF
priority = 5, Hit
damage = 70, 0   
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 12 
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -10    
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -10       
ground.type = Trip
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 27
ground.hittime = 27
guard.hittime = 18
guard.slidetime = 18
guard.ctrltime = 29
ground.velocity = -1.75,-10.25341796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5,-8.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 506
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.807692307692307692307692307692308

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),6

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1    

;JUMP A
[Statedef 600]
type    = A                      
movetype= A                    
physics = N                     
juggle  = 10          
ctrl = 0                       
anim = 600+(ifelse((Vel X != 0),5,ifelse((prevstateno=41),5,0)))   
poweradd= 0                               
sprpriority = 2 

[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 600
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 606
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0  

[State 600, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = A, NA
damage = floor(45*ifelse(var(56),1.25,1))
animtype = Medium
air.animtype = Back
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),1
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 10,10
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 17
ground.type = low
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0       

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;ICE :3
[Statedef 606]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 606
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 600


;JUMP C
[Statedef 610]
type    = A                      
movetype= A                    
physics = N                     
juggle  = 3          
ctrl = 0                       
anim =  610+(ifelse((Vel X != 0),5,ifelse((prevstateno=41),5,0)))  
poweradd= 0                               
sprpriority = 2 

[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 600
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 611
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0  

[State 600, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = A, NA
damage = floor(65*ifelse(var(56),1.25,1))
animtype = medium
air.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 12,12
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 22
ground.velocity = -5.796875
guard.velocity = -11.1796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,1
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2       

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;ICE :3
[Statedef 611]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 611
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 610

;JUMP B
[Statedef 620]
type    = A                      
movetype= A                    
physics = N                     
juggle  = 10          
ctrl = 0                       
anim = 620+(ifelse((Vel X != 0),5,ifelse((prevstateno=41),5,0)))   
poweradd= 0                               
sprpriority = 2 

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 600, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = A, NA
damage = floor(45*ifelse(var(56),1.25,1))
animtype = Medium
air.animtype = Back
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
pausetime = 12,13
guard.pausetime = 10,10
ground.slidetime = 9
ground.hittime = 9
guard.hittime = 9
guard.slidetime = 9
guard.ctrltime = 17
ground.type = low
ground.velocity = -5.796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5  
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, snd]
type=playsnd
trigger1= animelem=1 && random<500
value=200,0
channel=0  
;volume = 200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),4       

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;JUMP D
[Statedef 630]
type    = A                      
movetype= A                    
physics = N                     
juggle  = 10          
ctrl = 0                       
anim = 630+(ifelse((Vel X != 0),5,ifelse((prevstateno=41),5,0)))  
poweradd= 0                               
sprpriority = 2 

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0  

[State 600, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = A, NA
damage = floor(90*ifelse(var(56),1.25,1))
animtype = medium
air.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 12,12
ground.slidetime = 12
ground.hittime = 12
guard.hittime = 10
guard.slidetime = 10
guard.ctrltime = 22
ground.velocity = -5.796875
guard.velocity = -11.1796875
air.velocity = -4.5,-6.5
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
id = 200

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),6       

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;JUMP CD
[Statedef 640]
type    = A                      
movetype= A                    
physics = N                     
juggle  = 10                                  
ctrl = 0                       
anim = 640
poweradd= 0                               
sprpriority = 2 

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0  

[State 600, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = animelem = 5
attr = A, NA
damage = 126
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
guard.pausetime = 10,10
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.velocity = -4.5,-6.5
air.juggle = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 94,94
givepower = 16,16
id = 980
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=200,2
channel=0  

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),8-(var(32)*2)

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(16) = 0
ignorehitpause = 1

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52   
;---------------------------------------------------------------------------
; ROLLS
;--------------------------------------------------------------------------- 
;FORWARD ROLL
[Statedef 710, Roll]
type    = S                      
movetype = I                      
physics = N  
ctrl = 0                         
anim = 710
velset=0,0

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=200,19
channel=0  
;volume = 200

[State 0, Pause]
type = Pause
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
time = 3
movetime = 3
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
time = 3
add = 100,100,100
mul = 256,256,256
sinadd = -80,-80,-80,4
invertall = 0
color = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = AnimElem = 1
value = -1000

[State 710]
type = playerpush
trigger1 = 1
value = 0

[State 710: NotHitBy]
type = NotHitBy
trigger1 = (Time < 25)
value = , NA, SA, HA, NP, SP, HP

[State 710: VelSet]
type = VelSet
trigger1 = (Time = 9)
x = 5

[State 710: VelSet]
type = VelAdd
triggerall = prevstateno = 101
trigger1 = (Time = 9)
x = 2

[State 710: VelSet]
type = VelSet
trigger1 = (Time = 26)
x = 0

[State 710]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;BACKWARDS ROLL
[Statedef 711, Roll]
type    = S                      
movetype = I                      
physics = N  
ctrl = 0                        
anim = 711
velset=0,0

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=200,19
channel=0  
;volume = 200

[State 0, Pause]
type = Pause
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
time = 3
movetime = 3
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
time = 3
add = 100,100,100
mul = 256,256,256
sinadd = -80,-80,-80,4
invertall = 0
color = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = 150 || prevstateno = 151
trigger1 = AnimElem = 1
value = -1000

[State 711]
type = playerpush
trigger1 = 1
value = 0

[State 711: NotHitBy]
type = NotHitBy
trigger1 = (Time < 28)
value = , NA, SA, HA, NP, SP, HP

[State 711: VelSet]
type = VelSet
trigger1 = (Time = 9)
x = -5

[State 711: VelSet]
type = VelSet
trigger1 = (Time = 29)
x = 0

[State 711]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; THROWS
;---------------------------------------------------------------------------
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = HitDef
triggerall = p2stateno != 40 && p2stateno !=52
Trigger1 = animelem = 1
attr = S, NT          
hitflag = M-         
priority = 1, Miss   
sparkno = -1         
p1sprpriority = 1                     
p2facing = 1          
p1stateno = 801    
p2stateno = 1801
guard.dist = 0       
fall = 1              
ID = 800

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 210

[StateDef 801]
MoveType = A
VelSet = 0,0
Anim = 801
SprPriority = 2
ctrl = 0

[State 200, snd]
type=playsnd
trigger1= animelem=3 
value=200,3
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=3 
value=1000,1
channel = 7
[State 200, snd]
type=playsnd
trigger1= animelem=16 
value=1000,2
channel = 7

[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 800
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 812
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 800
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 813
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 910, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 910, 1]
type = VarSet
triggerall = var(1) = 1
triggerall = Time < 7 && !fVar(8)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(8) = 1

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 910, ChangeState]
type = ChangeState
trigger1 = Time < 7 && FVar(8)
value = 950

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 805, hitspark]
type = Explod
trigger1 = animelem = 1
anim = 20000
pos = 22, -72
postype = p1
SprPriority = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 2+(var(32)*10), 0

[State 801, fat]
type = Width
trigger1 = animelem = 9, < 0
edge = 64

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(16) < 0
ID = 800
pos = 51, 0

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 16
value = 1802
ignorehitpause = 1
ID = 800

[State 801, Damage]
Type = TargetLifeAdd
Trigger1 = animelem = 5
Trigger2 = animelem = 8
Trigger3 = animelem = 11
value = -40
ID = 800
absolute = 1
kill = 0
[State 801, Damage]
Type = TargetLifeAdd
Trigger1 = animelem = 14
value = -40
ID = 800
absolute = 1

[State 801, 10]
type = ChangeState
Trigger1 = animtime = 0
value = 0
ctrl = 1 

[StateDef 1801]
Type = A
MoveType =  H
VelSet = 0, 0
sprpriority = 0 
Ctrl = 0

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 802

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

[StateDef 1802]
Type = A
MoveType =  H
VelSet = -4, -6.5
sprpriority = 1 
Ctrl = 0

[State 2000, 0]
type = NotHitBy
trigger1 = 1
value = sca

[State 1040, go]
type = VelAdd
trigger1 = time > 0
y = 0.5

[State 811, Anim]
Type = ChangeAnim
Trigger1 = !Time
Value = 5050

[State 811, 2]
type = SelfState
Trigger1 = vel y > 0 && pos y >= 0
value = 5100
;---------------------------------------------------------------------------
[Statedef 810]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = HitDef
triggerall = p2stateno != 40 && p2stateno !=52
Trigger1 = animelem = 1
attr = S, NT          
hitflag = M-         
priority = 1, Miss   
sparkno = -1         
p1sprpriority = 1                     
p2facing = 1          
p1stateno = 811    
p2stateno = 1811
guard.dist = 0       
fall = 1              
ID = 810

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 230

[StateDef 811]
MoveType = A
VelSet = 0,0
Anim = 810
SprPriority = 2
ctrl = 0

[State 910, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 910, 1]
type = VarSet
triggerall = var(1) = 1
triggerall = Time < 7 && !fVar(8)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(8) = 1

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 910, ChangeState]
type = ChangeState
trigger1 = Time < 7 && FVar(8)
value = 950

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 801, fat]
type = Width
trigger1 = animelem = 9, < 0
edge = 64

[State 810, bind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(4) < 0
ID = 810
pos = 20, 0

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 4
value = 3+(var(32)*2),20
[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 4
value = 200,23
channel = 0
[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 9
value = 1000,20

[State 801, fly p2]
type = TargetState
trigger1 = animelem = 4
value = 1812
ignorehitpause = 1
ID = 810

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 17004+(var(31)*10001)
pos = 22,-88
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 220, Explod]
type = Explod
trigger1 = animelem = 4
anim = 17007
pos = 22,-88
postype = p2  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1


[State 801, Damage]
Type = TargetLifeAdd
Trigger1 = animelem = 4
value = -155
ID = 810
absolute = 1

[State 801, 10]
type = ChangeState
Trigger1 = animtime = 0
value = 0
ctrl = 1 

;ICE :3
[Statedef 812]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 814
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;ICE :3
[Statedef 813]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 815
sprpriority = -4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

[StateDef 1811]
Type = A
MoveType =  H
VelSet = 0, 0
sprpriority = 5 
Ctrl = 0

[State 2000, 0]
type = NotHitBy
trigger1 = 1
value = sca

[State 811]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 811

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

[StateDef 1812]
Type = A
MoveType =  H
physics = N
VelSet = 0, 0
sprpriority = 5 
Ctrl = 0

[State 1040, go]
type = VelSet
Trigger1 = animelem = 5
x = 4
y = -6.5

[State 1040, go]
type = PosAdd
Trigger1 = animelem = 3
y = -10
x = 10

[State 1040, go]
type = PosAdd
Trigger1 = animelem = 4
y = -60
x = 60

[State 1040, go]
type = VelAdd
Trigger1 = animelemtime(5) > 0
y = 0.5

[State 811, Anim]
Type = ChangeAnim2
Trigger1 = !Time
Value = 813

[State 811, 2]
type = SelfState
Triggerall = animelemtime(5) > 0
Trigger1 = vel y > 0 && pos y >= 0
value = 5100

;---------------------------------------------------------------------------
; SPECIAL MOVES
;---------------------------------------------------------------------------
;Diamond Breath
[StateDef 1000]
type = S
MoveType = A
VelSet = 0, 0
Anim = 1000
SprPriority = 2
ctrl=0
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=7 
value=200,7
channel=0  

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(7) = 1
id = 7000
name = "Ice Breath"
pos = 0,0
postype = P1
stateno = 1003
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Diamond Breath
[StateDef 1001]
type = S
MoveType = A
VelSet = 0, 0
Anim = 1001
SprPriority = 2
ctrl=0
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=2 
value=200,8
channel=0  

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(7) = 1
id = 7000
name = "Ice Breath"
pos = 0,0
postype = P1
stateno = 1004
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Ice Breath
[Statedef 1003]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 1004
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 1
trigger1 != root,NumProjID(1000) = 0
ProjAnim = 1002
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = 7
ProjID = 1000
projpriority = 1
offset = 0, 0        
velocity = parent,var(15),0
hitflag = MA   
attr = S, SP
damage    = 70,5
animtype  = Hard
guardflag = M
pausetime = 0,12
guard.pausetime = 0,2
hitsound = s3+(parent,var(32)*2),3
guardsound = s3+(parent,var(32)*2), 12 
sparkno = -1
sparkxy = 20, -75  
guard.sparkno = -1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-7.77564102564102564102564102563869
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = parent,var(40)*1000+6
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 78,78
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 805, hitspark]
type = Explod
trigger1 = root,projhittime(1000) = 1
anim = 17002+(parent,var(31)*10000)
pos = 122, -52
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 805, hitspark]
type = Explod
trigger1 = root,ProjGuardedTime(1000) = 1
anim = 17502+(parent,var(31)*10000)
pos = 122, -52
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;Ice Breath
[Statedef 1004]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 1004
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 1
trigger1 != root,NumProjID(1000) = 0
ProjAnim = 1002
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = 7
ProjID = 1000
projpriority = 1
offset = 0, 0        
velocity = parent,var(15),0
hitflag = MAF    
attr = S, SP
damage    = 70,5
animtype  = Hard
guardflag = M
pausetime = 0,16
guard.pausetime = 0,2
hitsound = s3+(parent,var(32)*2),3
guardsound = s3+(parent,var(32)*2), 12 
sparkno = -1
sparkxy = 20, -75  
guard.sparkno = -1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -12.61205725171355925864938338293
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = parent,var(40)*1000+6
air.fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 78,78
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 805, hitspark]
type = Explod
trigger1 = root,projhittime(1000) = 1
anim = 17002+(parent,var(31)*10000)
pos = 122, -52
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 805, hitspark]
type = Explod
trigger1 = root,ProjGuardedTime(1000) = 1
anim = 17502+(parent,var(31)*10000)
pos = 122, -52
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;Crow Bites
[Statedef 1010]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 109
juggle = 0
facep2 = 1
anim = 1010

[State 200, snd]
type=playsnd
trigger1= animelem=2 
value=200,9
channel=0 
[State 200, snd]
type=playsnd
trigger1= animelem=2
value=1000,5 

[State 1000: Helper]
type = Helper
trigger1 = animelem = 1
helpertype = Normal
id = 10010
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 10010
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 10
movetype = I

[State 1100, Velocity]
type = PosAdd
trigger1 = AnimElem = 3
x = 7
[State 1100, Velocity]
type = PosAdd
trigger1 = AnimElem = 4
x = 3

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 6
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 6.25
y = -4.5;-9.5))
[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(6) > 1
y = 0.42578125
[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(6) > 1
x = 3.25;4.01629638671875

[State 240, 9]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = (animelemno(0) = [2,8])
damage = 40, 5   
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 12 
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -65    
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -65         
attr = A, SA  
guardflag = M                  
hitflag = MAF  
priority = 5, Hit                                          
pausetime = 7,12                                                                  
ground.velocity = -4,-8                            
air.velocity = -4,-7                              
guard.velocity = -12                                  
guard.pausetime = 11,12                            
guard.slidetime = 22                               
guard.hittime = 22                             
guard.ctrltime = 22                                
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0                  
yaccel = .5             
persistent = 0                                   
fall = 1
fall.recover = 1
fall.recovertime = 120
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 1100, ChangeState]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
trigger1 = AnimElemTime(6) >= 2
value = 1015

;Crow Bites
[Statedef 1011]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 109
juggle = 0
facep2 = 1
anim = 1012

[State 200, snd]
type=playsnd
trigger1= animelem=2 
value=200,9
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=2
value=1000,5 

[State 230, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 2
trigger2 = animelem = 4
attr = S, NA  
guardflag = M                  
hitflag = MAF    
animtype = hard
ground.type = low
damage = 20, 5   
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 12 
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -65    
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -68            
priority = 4, Hit
pausetime = 7,13
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -8.6953125
air.velocity = -3.5,-6
guard.velocity = -12
guard.pausetime = 11,11
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .5  
air.fall = 1
fall.recover = 0
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 240, 9]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = (animelemno(0) = [7,9])
damage = 20, 5   
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 12 
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -65    
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -65         
attr = A, SA  
guardflag = M                  
hitflag = MAF  
priority = 5, Hit                                          
pausetime = 7,12                                                                  
ground.velocity = -4,-8                            
air.velocity = -4,-7                              
guard.velocity = -12                                  
guard.pausetime = 11,12                            
guard.slidetime = 22                               
guard.hittime = 22                             
guard.ctrltime = 22                                
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0                  
yaccel = .5             
persistent = 0                                   
fall = 1
fall.recover = 0
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 


[State 1000: Helper]
type = Helper
trigger1 = animelem = 1
helpertype = Normal
id = 10010
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 10010
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 10
movetype = I

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 1
x = 7.30078125
[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(1) = 1
x = 4

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 6
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 6.25
y = -9.5
[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(6) > 1
y = 0.42578125
[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(6) > 1
x = 4.01629638671875

[State 1100, ChangeState]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
trigger1 = AnimElemTime(6) >= 2
value = 1015

;---------------------------------------------------------------------------
;Land
[Statedef 1015]
type = S
physics = S
ctrl = 0
anim = 1011
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = F40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ICE :3
[Statedef 10010]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1014
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;Counter Shell
[Statedef 1020]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70
juggle = 8
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=3 
value=200,10
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=4
value=1000,13

[State 1000: Helper]
type = Helper
trigger1 = animelem = 4
helpertype = Normal
id = 10020
pos = 20, -54 ;50
postype = p1
facing = 1
stateno = 10020
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 1000: Helper]
type = Helper
trigger1 = animelem = 5
helpertype = Normal
id = 10020
pos = 8, 0 ;50
postype = p1
facing = 1
stateno = 10020
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 801, fat]
type = Width
trigger1 = 1
edge = 0,30

[State 1020, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1020

[State 1020, Back]
type = posadd
trigger1 = Animelem = 3
trigger2 = Animelem = 4
x = -8
[State 1020, Back]
type = posadd
trigger1 = Animelem = 7
trigger2 = Animelem = 8
x = 8

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(3) = 1
id = 7000
name = "Counter Shell Attack"
pos = 0,0
postype = P1
stateno = 1022
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 0, ReversalDef]
type = ReversalDef
trigger1 = (animelemno(0) = [3,7])
;attr = S, SP
reversal.attr = SCA, AP
hitflag = MAFP
pausetime = 0,15
sparkno = s8100
sparkxy = 10,-10
p1stateno = 1021
p2stateno = 1580
hitsound = -1
persistent = 1
guard.dist = 0 
numhits = 0

[State 1000, 5]
type = Projectile
trigger1 = animelem = 3
ProjAnim = 1028
projremovetime = 25
Projhitanim = -1
ProjID = 1111
projpriority = 5
offset = 0, 0        
velocity = 0,0
hitflag = P    
attr = S, HP
hitsound = -1
[State 1000, 5]
type = Projectile
trigger1 = animelem = 3
ProjAnim = 1029
projremovetime = 25
Projhitanim = -1
ProjID = 1112
projpriority = 1
offset = 0, 0        
velocity = 0,0
hitflag = P    
attr = S, NP
hitsound = -1

[State 1000,ChangeState]
type = ChangeState
triggerall = (animelemno(0) = [3,7])
trigger1 = NumProjID(1111) = 0 || NumProjID(1112) = 0
value = 1021
ctrl = 1

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;HELPER PROJECTILE KILLER >:
[Statedef 1580]
physics = N
ctrl = 0

[State 1580]
type = DestroySelf
trigger1 = IsHelper
ignorehitpause = 1

[State 1580]
type = SelfState
trigger1 = !IsHelper
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Counter Shell Reversal
[Statedef 1021]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 8
facep2 = 1

[State 1000: Helper]
type = Helper
trigger1 = animelem = 6
helpertype = Normal
id = 10030
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 10030
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1021

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(8) = 1
id = 7000
name = "Counter Shell Projectile"
pos = 45,0
postype = P1
stateno = 1023
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Counter Shell Reversal Projectile
[Statedef 1023]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 1024
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1050, MUTEKI MODO]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 8

[State 1100, Voice]
type = PlaySnd
trigger1 = time = 1
value = 1000,14

[State 1000, 5]
type = Projectile
trigger1 = time = 1
trigger1 != root,NumProjID(1025) = 0
ProjAnim = 1022
Projhitanim = -1
ProjID = 1025
projpriority = 1
offset = 0, 0        
velocity = 8,0
hitflag = MAF   
attr = S, SP
damage    = 49,5
animtype  = Hard
guardflag = M
pausetime = 0,12
guard.pausetime = 0,2
hitsound = s3+(parent,var(32)*2),3
guardsound = s3+(parent,var(32)*2), 12 
sparkno = s17002+(parent,var(31)*10000)
sparkxy = 20, -75  
guard.sparkno = s17501+(parent,var(31)*10000)
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-6.5
air.type = High
air.velocity = -4,-6.5
air.hittime = 13
air.juggle = 6
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 78,78
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 


[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1025) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1025)
value = 1025

;---------------------------------------------------------------------------
;Disperse
[Statedef 1025]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 1025

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;Counter Shell Hitdef (Because mugen needs workarounds)
[Statedef 1022]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 1026
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projID = 1020
projanim = 1023
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = 18
projscale = 0,0
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = 0,0
attr = S, SA
damage=50,5
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 13, 15
guard.pausetime = 0,2
sparkno = s17002+(parent,var(31)*10000)
sparkxy = 40, -65
hitsound = s3+(parent,var(32)*2),3
guardsound = s3+(parent,var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(parent,var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.juggle = parent,var(40)*1000+6
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 1406
fall = 1   
fall.recover = 1
fall.recovertime = 120
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;ICE :3
[Statedef 10020]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1027
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;Ray Spin
[Statedef 1030]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=5 
value=200,11
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=2
value=1000,14

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(4) = 0
ignorehitpause = 1
[State 800, VarSet]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd" 
trigger1 = command = "a" || command = "hold_a"
trigger2 = var(59) >= 1 && var(4) = 0 && (var(54) != [7,8]) && var(54) != 2
trigger2 = EnemyNear(var(45)),movetype = H
trigger2 = EnemyNear(var(45)),statetype = A
var(4) = 1 

[State 800, VarSet]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd" 
trigger1 = command = "b" || command = "hold_b"
trigger2 = var(59) >= 1 && var(4) = 0 && (var(54) != [7,8]) && var(54) != 2
trigger2 = EnemyNear(var(45)),movetype = H
var(4) = 2 

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1030

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = -4;-5.625
[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(2) > 1
y = 0.375

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 8
attr = S, NA
damage = floor(21*ifelse(var(56),1.25,1)),5
animtype = Hard
air.animtype = Back
ground.type = Low
guardflag = M
hitflag = MAF
priority = 5, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -15, -67
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 8,13
guard.pausetime = 8,11
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
getpower = 94,94
givepower = 16,16
air.fall = 1
fall.recover = 1
fall.recovertime = 120
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
id = 1020

[State 1100, STAND]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
triggerall = AnimElemTime(2) > 2
trigger1 = var(4) = 1
value = 1031

[State 1100, SIT]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
triggerall = AnimElemTime(2) > 2
trigger1 = var(4) = 2
value = 1032

[State 1100, SHIT]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
trigger1 = AnimElemTime(2) > 2
value = 1035

;Ray Spin
[Statedef 1033]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=5 
value=200,11
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=2
value=1000,14

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(4) = 0
ignorehitpause = 1

[State 800, VarSet]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd" 
trigger1 = command = "a" || command = "hold_a"
trigger2 = var(59) >= 1 && var(4) = 0
trigger2 = var(54) = 7 && var(42) = 0
var(4) = 1 

[State 800, VarSet]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd" 
trigger1 = command = "b" || command = "hold_b"
var(4) = 2 

[State 800, VarSet]
type = VarSet
trigger1 = var(59) >= 1
trigger1 = var(54) = 7 && var(42) = 4
var(4) = 0 

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1031

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = -5.625
[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(2) > 1
y = 0.375

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 8
attr = S, NA
damage = floor(51*ifelse(var(56),1.25,1)),5
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120
[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 16
attr = S, NA
damage = floor(51*ifelse(var(56),1.25,1)),5
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-10.9
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-9.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120
id = 1020
[State 210, 1]
type = HitDef
triggerall = numtarget(1020) = 1
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 8
attr = S, NA
damage = floor(51*ifelse(var(56),1.25,1)),5
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MA
priority = 4, Hit
pausetime = 12, 12
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120
id = 1030
[State 210, 1]
type = HitDef
triggerall = numtarget(1020) = 1
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = animelem = 16
attr = S, NA
damage = floor(51*ifelse(var(56),1.25,1)),5
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MA
priority = 4, Hit
pausetime = 12, 12
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-10.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-9.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120
id = 1030

[State 1100, STAND]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
triggerall = AnimElemTime(2) > 2
trigger1 = var(4) = 1
value = 1031

[State 1100, SIT]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
triggerall = AnimElemTime(2) > 2
trigger1 = var(4) = 2
value = 1032

[State 1100, SHIT]
type = ChangeState
triggerall = Vel Y + Pos Y >= 0
trigger1 = AnimElemTime(2) > 2
value = 1035


;Stand
[Statedef 1031]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 8
facep2 = 1
anim = 1021

[State 210, 1]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
triggerall = facing = enemynear(0), facing
trigger1 = time = 0
attr = S, NA
damage = 70
animtype = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4.5,-6.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 980
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 120

[State 200, snd]
type=playsnd
trigger1= animelem=6 
value=200,12
channel=0  

[State 1000: Helper]
type = Helper
trigger1 = animelem = 6
helpertype = Normal
id = 10030
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 10030
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S1000,0+var(11)
channel = 0

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(8) = 1
id = 7000
name = "ICE PROJECTILE"
pos = 45,0
postype = P1
stateno = 1036
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ICE :3
[Statedef 10030]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1033
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;Sit
[Statedef 1032]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 260
sprpriority = 2
facep2 = 1

[State 200, snd]
type=playsnd
trigger1= animelem=5 
value=200,13
channel=0  
[State 200, snd]
type=playsnd
trigger1= animelem=5
value=1000,3

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 850, slide]
type = velset
trigger1 = Animelem = 5
x = 9.208221435546875
[State 850, mul]
type = velmul
trigger1 = Animelemtime(5) > 0
x = 0.92082290751818648814356968863407
[State 850, stop]
type = velset
trigger1 = Animelem = 11
x = 0
[State 850, Back]
type = posadd
trigger1 = Animelem = 12
trigger2 = Animelem = 13
x = 8

[State 225, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = F0,2
channel = 1
[State 200, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S0,1+(random%2)+(var(11)*10)
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 240, 9]
type = HitDef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
damage = 30, 5   
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 12 
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -10   
guard.sparkno = s17501+(var(31)*10000)
guard.sparkxy = 0, -10         
attr = A, SA  
guardflag = L                  
hitflag = MA
priority = 5, Hit                                          
pausetime = 6,12                                                                  
ground.velocity = -2,-11.9                           
air.velocity = -2,-11.9                          
guard.velocity = -12                                  
guard.pausetime = 11,12                            
guard.slidetime = 22                               
guard.hittime = 22                             
guard.ctrltime = 22                                
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0                  
yaccel = .5             
persistent = 0                                   
fall = 1
fall.recover = 1
fall.recovertime = 120
id = 1020

[State 225, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1035]
type = S
physics = S
ctrl = 0
anim = 1032
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Stand Projectile (sorry JJBA not included ;_; )
[Statedef 1036]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 1024
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,14

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1050, MUTEKI MODO]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 8

[State 1000, 5]
type = Projectile
trigger1 = time = 1
trigger1 != root,NumProjID(1030) = 0
ProjAnim = 1022
Projhitanim = -1
ProjID = 1030
projpriority = 1
offset = 0, 0        
velocity = 8,0
hitflag = MAF   
attr = S, SP
damage    = 59,5
animtype  = Hard
guardflag = M
pausetime = 0,12
guard.pausetime = 0,2
hitsound = s3+(parent,var(32)*2),3
guardsound = s3+(parent,var(32)*2), 12 
sparkno = s17002+(parent,var(31)*10000)
sparkxy = 20, -75  
guard.sparkno = s17501+(parent,var(31)*10000)
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-6.5
air.type = High
air.velocity = -4,-6.5
air.hittime = 13
air.juggle = 6
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 78,78
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1030)
value = 1025

[StateDef 1040]
type = A
MoveType = A
physics = N
VelSet = 0,0
anim = 1040
poweradd = 109
SprPriority = 2
ctrl=0

[State 200, snd]
type=playsnd
trigger1= animelem=1
value=1000,18

[State 1000: Helper]
type = Helper
trigger1 = animelem = 3
helpertype = Normal
id = 10040
pos = 0, -61 ;50
postype = p1
facing = 1
stateno = 10041
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(7) = 1
id = 7000
name = "snowflake of DEATH"
pos = 30,-65
postype = P1
stateno = 1045
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000, VarSet]
type = VarSet
trigger1 = var(59) = 0
trigger1 = !time
v = 15
value = ifelse(command = "a",4,0) 

[State 1000, VarSet AI]
type = VarSet
trigger1 = var(59) >= 1
trigger1 = var(54) = 3
v = 15
value = 4 

[State 1000, VarSet AI]
type = VarSet
trigger1 = var(59) >= 1
trigger1 = var(54) != 3
v = 15
value = 0 

[State 11020, stay]
type = PosFreeze
trigger1 = (animelemno(0) = [1,11])
value = 1 

[State 0, VelSet]
type = gravity
trigger1 = AnimElem = 12, > 0

[State 1000, 7]
type = ChangeState
Triggerall = animelemtime(12) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1015
ctrl = 1  

;FUCKING SNOWFLAKE THAT CAN HURT YOU
[Statedef 1045]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 1041
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,19
volume = -100

[State 1000: Helper]
type = Helper
trigger1 = timemod = 7,0
helpertype = Normal
id = 10040
pos = -10, 0 ;50
postype = p1
facing = 1
stateno = 10040
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 5.5
y = parent,var(15)

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 1
trigger1 != root,NumProjID(1040) = 0
ProjAnim = 1042
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
ProjID = 1040
projpriority = 5
offset = 0, 0        
velocity = vel X, vel Y
hitflag = MAF    
attr = S, HP
damage    = 99,5
animtype  = Hard
guardflag = M
pausetime = 0,12
guard.pausetime = 0,2
hitsound = s3+(parent,var(32)*2),9
guardsound = s3+(parent,var(32)*2), 12 
sparkno = -1
sparkxy = 20, -75  
guard.sparkno = -1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-7.77564102564102564102564102563869
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = parent,var(40)*1000+6
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 78,78
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 

[State 805, hitspark]
type = Explod
trigger1 = root,projhittime(1040) = 1
anim = 17002+(parent,var(31)*10000)
pos = 20, 0
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 805, hitspark]
type = Explod
trigger1 = root,ProjGuardedTime(1040) = 1
anim = 17502+(parent,var(31)*10000)
pos = 20, 0
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 
trigger2 = !root,NumProjID(1040)

;ICE :3
[Statedef 10040]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1043
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;ICE :3
[Statedef 10041]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 1044
sprpriority = 4

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = -1000
ctrl = 0
anim = ifelse(var(59) = 0,(ifelse(command = "x",3000,3001)),3000) 
sprpriority = 2

[State 200, snd]
type=playsnd
trigger1= animelem=2 
value=200,14
channel=0 
[State 200, snd]
type=playsnd
trigger1= animelem=7 
value=200,15
channel=0 

[State 1000: Helper]
type = Helper
trigger1 = animelemtime(7) = 1
helpertype = Normal
name = "Ice Pillar"
id = 13000
pos = 20, 0 ;50
postype = p1
facing = 1
stateno = 13000
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(5) = ifElse((prevstateno = [1000,1500]),1,0)

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 0
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 220,0,10;255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 1
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 1000: Helper]
type = Helper
triggerall = var(31) = 0
trigger1 = !numhelper(40000)
trigger1 = prevstateno = [1000,1500]
helpertype = Normal
name = "SuperCancel"
id = 40000
pos = 0, 0 ;50
postype = left
facing = 1
stateno = 40000
keyctrl = 0
ownpal = 1
ontop = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
ignorehitpause = 1
persistent = 0

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [1, 2])
value = SCA

[State 2000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 29

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,28]
flag = noBG
flag2 = noFG

[State 13000, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2010, Pause]
Type = SuperPause
Trigger1 = time = 1
Time = 33
movetime = 33
anim = -1
sound = s3+(var(32)*2),10
Pos = 14, -88
Darken = 0
UnHittAble = 1
poweradd = 0
p2defmul = 1

[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15200-(var(31)*200)
pos = 5,-66
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15201-(var(31)*200)
pos = 5,-66
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 2000, 0]
type = NotHitBy
trigger1 = animelem = 1
value = sca

[State 1001, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;DM Projectile
[Statedef 13000]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
sprpriority = 4
juggle = 10
anim = 3005

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,9

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 1
ProjAnim = 3004
Projhitanim = -1
projremovetime = 10
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3000
projpriority = 5
offset = 0, 0        
velocity = 0
hitflag = MAF    
attr = S, HP
damage = ifelse(enemynear,gethitvar(hitcount)<3||enemynear,movetype!=H ||(enemynear,stateno=[120,155]),250,ifelse(enemynear,gethitvar(hitcount)<4,120,70)),5 
animtype  = Up
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(parent,var(32)*2),3
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-7.77564102564102564102564102563869
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = parent,var(40)*1000+6
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 
yaccel = .5
id = 3000

[State 805, hitspark]
type = Explod
trigger1 = root,projhittime(3000) = 1
anim = 17002+(parent,var(31)*10001)
pos = 40, -75
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 805, hitspark]
type = Explod
trigger1 = root,ProjGuardedTime(3000) = 1
anim = 17502+(parent,var(31)*10000)
pos = 40, -75
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 1201, PlaySnd]
type = PlaySnd
trigger1 = root,projguardedtime(3000) = 1
value = 3+(parent,var(32)*2), 12
channel = 4

[State 1000, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = animtime = 0

[Statedef 3005]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = -2000
ctrl = 0
anim = 3002
sprpriority = 2

[State 200, snd]
type=playsnd
trigger1= animelem=2 
value=200,16
channel=0 
[State 200, snd]
type=playsnd
trigger1= animelem=7 
value=200,17
channel=0 

[State 1000: Helper]
type = Helper
trigger1 = animelemtime(7) = 1
helpertype = Normal
name = "Ice Pillar"
id = 13000
pos = 20, 0 ;50
postype = p1
facing = 1
stateno = 13001
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 1000: Helper]
type = Helper
trigger1 = animelemtime(11) = 1
helpertype = Normal
name = "Ice Pillar"
id = 13000
pos = 60, 0 ;50
postype = p1
facing = 1
stateno = 13001
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 1000: Helper]
type = Helper
trigger1 = animelemtime(15) = 1
helpertype = Normal
name = "Ice Pillar"
id = 13000
pos = 90, 0 ;50
postype = p1
facing = 1
stateno = 13001
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(5) = ifElse((prevstateno = [1000,1500]),1,0)

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 0
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 220,0,10;255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 1
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 1000: Helper]
type = Helper
triggerall = var(31) = 0
trigger1 = !numhelper(40000)
trigger1 = prevstateno = [1000,1500]
helpertype = Normal
name = "SuperCancel"
id = 40000
pos = 0, 0 ;50
postype = left
facing = 1
stateno = 40000
keyctrl = 0
ownpal = 1
ontop = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
ignorehitpause = 1
persistent = 0

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [1, 2])
value = SCA

[State 2000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 29

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,28]
flag = noBG
flag2 = noFG

[State 13000, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2010, Pause]
Type = SuperPause
Trigger1 = time = 1
Time = 33
movetime = 33
anim = -1
sound = s3+(var(32)*2),10
Pos = 14, -88
Darken = 0
UnHittAble = 1
poweradd = 0
p2defmul = 1

[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15200-(var(31)*200)
pos = 5,-66
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15201-(var(31)*200)
pos = 5,-66
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 2000, 0]
type = NotHitBy
trigger1 = animelem = 1
value = sca

[State -2, Launchers]
type = varSet
trigger1 = AnimTime = 0
var(16) = 0
ignorehitpause = 1

[State 1001, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;SDM Projectile
[Statedef 13001]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
sprpriority = 4
juggle = 10
anim = 3005

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,9

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 1
ProjAnim = 3004
Projhitanim = -1
projremovetime = 10
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3010
projpriority = 5
offset = 0, 0        
velocity = 0
hitflag = MAF    
attr = S, HP
damage = ifelse(enemynear,gethitvar(hitcount)<3||enemynear,movetype!=H ||(enemynear,stateno=[120,155]),140,ifelse(enemynear,gethitvar(hitcount)<4,100,70)),5 
animtype  = Up
guardflag = M
pausetime = 0,6
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(parent,var(32)*2),3
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-6.77564102564102564102564102563869
air.type = High
air.velocity = -4,-6.77564102564102564102564102563869
air.hittime = 13
air.juggle = parent,var(40)*1000+6
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 
yaccel = .5

[State 805, hitspark]
type = Explod
trigger1 = root,projhittime(3010) = 1
anim = 17002+(parent,var(31)*10001)
pos = 40, -75
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 805, hitspark]
type = Explod
trigger1 = root,ProjGuardedTime(3010) = 1
anim = 17502+(parent,var(31)*10000)
pos = 40, -75
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 1201, PlaySnd]
type = PlaySnd
trigger1 = root,projguardedtime(3010) = 1
value = 3+(parent,var(32)*2), 12
channel = 4

[State 1000, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = animtime = 0

[Statedef 3010]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = -2000
ctrl = 0
anim = 3010
sprpriority = 2

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(5) = ifElse((prevstateno = 3000),10,0)

[State 200, snd]
type=playsnd
trigger1= animelem=2 
value=200,18
channel=0 

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 0
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 220,0,10;255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 1
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 0
trigger1 = prevstateno = [3000,3500]
trigger1 = time < 17
time = 1
add = 220,0,10;255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 1000: Helper]
type = Helper
triggerall = var(31) = 0
trigger1 = !numhelper(40000)
trigger1 = prevstateno = [1000,1500]
helpertype = Normal
name = "SuperCancel"
id = 40000
pos = 0, 0 ;50
postype = left
facing = 1
stateno = 40000
keyctrl = 0
ownpal = 1
ontop = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
ignorehitpause = 1
persistent = 0
[State 1000: Helper]
type = Helper
triggerall = var(31) = 0
trigger1 = !numhelper(40005)
trigger1 = prevstateno = [3000,3029]
helpertype = Normal
name = "DreamCancel"
id = 40005
pos = 0, 0 ;50
postype = left
facing = 1
stateno = 40005
keyctrl = 0
ownpal = 1
ontop = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
ignorehitpause = 1
persistent = 0

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [1, 2])
value = SCA

[State 2000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 29

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,28]
flag = noBG
flag2 = noFG

[State 13000, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2010, Pause]
Type = SuperPause
Trigger1 = time = 1
Time = 33
movetime = 33
anim = -1
sound = s3,11+(var(32)*6)
Pos = 14, -88
Darken = 0
UnHittAble = 1
poweradd = 0
p2defmul = 1

[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15300-(var(31)*200)
pos = 4,-70
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15301-(var(31)*200)
pos = 4,-70
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 2000, 0]
type = NotHitBy
trigger1 = animelem = 1
value = sca

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(2) = 1
id = 3010
name = "DIANA WILL KILL YOU"
pos = 0,0
postype = P1
stateno = 13010
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 2000, 0]
type = NotHitBy
triggerall = numenemy
triggerall = numtarget(3100) = 1 && (enemynear,stateno != [120,160])
trigger1 = time > 1
value = SCA

[State 2010]
type = ChangeState
triggerall = numenemy
triggerall = numtarget(3100) = 1 && (enemynear,stateno != [120,160])
trigger1 = AnimTime = 0
value = 3011

[State 2010]
type = ChangeState
triggerall = numenemy
triggerall = numtarget(3100) = 0 ||numtarget(3100) = 1 && (enemynear,stateno = [120,160])
trigger1 = AnimTime = 0
value = 3012

[Statedef 3011]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
anim = 3011
juggle = 8
facep2 = 1

[State 2000, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 200, snd]
type=playsnd
trigger1= animelem=1
value=1000,15

[State 805, hitspark]
type = Explod
trigger1 = projhittime(3010) = 1
anim = 17002+(var(31)*10001)
pos = Const(size.mid.pos.x),Const(size.mid.pos.y)-10
postype = p2
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 3105, Ice]
type = Explod
triggerall = !numexplod(3111)
trigger1 = !time
anim = 3015
ID = 3111
pos = 0,0
postype = left  
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -30
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 15
ProjAnim = 3016
projremovetime = 100
projhits = 15
projmisstime = 5
Projhitanim = -1
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3010
projpriority = 5
offset = 0, 0        
velocity = 0,0
hitflag = MAF    
attr = S, HP
damage = ifelse(enemynear,gethitvar(hitcount)<3||enemynear,movetype!=H ||(enemynear,stateno=[120,155]),30-var(5),ifelse(enemynear,gethitvar(hitcount)<4,20,15)),0 
animtype  = Up
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(var(32)*2),9
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-2.77564102564102564102564102563869
air.type = High
air.velocity = -4,-2.77564102564102564102564102563869
air.hittime = 13
air.juggle = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 
yaccel = .5
kill = 0 
[State 1000, 5]
type = Projectile
trigger1 = time = 77
ProjAnim = 3016
projremovetime = 100
Projhitanim = -1
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3010
projpriority = 5
offset = 0, 0        
velocity = 0,0
hitflag = MAF    
attr = S, HP
damage = 40
animtype  = Up
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(var(32)*2),9
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-7.77564102564102564102564102563869
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 40
palfx.color = 0
palfx.invertall = 1
palfx.add = 200,200,200
palfx.mul = 152,160,250
palfx.sinadd = 40,30,0,10 
yaccel = .5
id = 3100

[State 13000, EnvColor]
type = null;EnvColor
trigger1 = !time
value = 20,20,100
time = 93
under = 1
ignorehitpause = 1
persistent = 0

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3012
ctrl = 1

;End
[Statedef 3012]
type = S
physics = S
ctrl = 0
anim = 3012
velset = 0,0

[State -2, Launchers]
type = varSet
trigger1 = AnimTime = 0
var(16) = 0
ignorehitpause = 1
[State -2, Launchers]
type = varSet
trigger1 = AnimTime = 0
var(5) = 0
ignorehitpause = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 13010]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 3013
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= !time
value=1000,16

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 16

[State 1000, 5]
type = Projectile
trigger1 = time = 1
ProjAnim = 3014
Projhitanim = -1
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3010
projpriority = 5
offset = 0, 0        
velocity = 16
hitflag = MAF    
attr = S, HA
damage = 0
animtype  = Up
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(parent,var(32)*2),20
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-7.77564102564102564102564102563869
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
id = 3100
nochainID = 3100

[State 805, hitspark]
type = Explod
trigger1 = root,projhittime(3010) = 1
anim = 17004+(parent,var(31)*10001)
pos = 103, -65
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
[State 805, hitspark]
type = Explod
trigger1 = root,ProjGuardedTime(3010) = 1
anim = 17502+(parent,var(31)*10000)
pos = 103, -65
postype = p1
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[Statedef 3030]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = -3000
ctrl = 0
anim = 3030
sprpriority = 2

[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 29
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40003)
trigger1 = time = 5
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 0
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 220,0,10;255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State -2, PalFX]
type = PalFX
triggerall = var(31) = 1
trigger1 = prevstateno = [1000,1500]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [1, 2])
value = SCA

[State 2000, 0]
type = NotHitBy
trigger1 = (animelemno(0) = [3, 5])
value = , NA, SA, HA, NP, SP, HP

[State 1000: Helper]
type = Helper
triggerall = var(31) = 0
trigger1 = !numhelper(40000)
trigger1 = prevstateno = [1000,1500]
helpertype = Normal
name = "SuperCancel"
id = 40000
pos = 0, 0 ;50
postype = left
facing = 1
stateno = 40000
keyctrl = 0
ownpal = 1
ontop = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
ignorehitpause = 1
persistent = 0

[State 2000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 29

[State 2010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,28]
flag = noBG
flag2 = noFG

[State 13000, EnvColor]
type = EnvColor
trigger1 = !time
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2010, Pause]
Type = SuperPause
Trigger1 = time = 1
Time = 33
movetime = 33
anim = -1
sound = s3,11+(var(32)*4)
Pos = 14, -88
Darken = 0
UnHittAble = 1
poweradd = -1000
p2defmul = 1

[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15400+(var(31)*100)
pos = 4,-70
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 0
anim = 15401+(var(31)*100)
pos = 4,-70
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 2000, 0]
type = NotHitBy
trigger1 = animelem = 1
value = sca

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 2010, 1]
type = hitdef
triggerall = var(40) < 1 || var(57) > 0 || var(16) > 0
trigger1 = time = 0
attr = S, HA   
animtype = hard 
damage = 80, 0 
ground.hittime = 30   
guardflag = H              
hitflag = MAF
priority = 4, Hit
pausetime = 12,0
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -62
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17502+(var(31)*10000)
guard.sparkxy = 0, -61          
ground.velocity = -11.1796875
yaccel = .5 
p1stateno = 3031
p2stateno = 700
p2facing = 1   
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
snap = 60
id=3030
kill = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 11
time = 12
ampl = -5
freq = 180

[State 210, Punch Attempt Sound]
type = Playsnd
trigger1= animelem=10 
value = 3+(var(32)*2),2

[State 1001, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

[StateDef 3031]
type = s
MoveType = A
VelSet = 0, 0
Anim = 3031
SprPriority = 2 
ctrl=0

[State 200, snd]
type=playsnd
trigger1= animelem=16
value=1000,15

[State 3105, Ice]
type = Explod
triggerall = !numexplod(3111)
trigger1 = animelem = 16
anim = 3039
ID = 3111
pos = 0,0
postype = left  
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -10
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 200, snd]
type=playsnd
trigger1= animelem=41 
value=200,20
channel=0 
[State 200, snd]
type=playsnd
trigger1= animelem=58 
value=180,4
channel=0 

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(3) = 1
id = 3030
name = "Diana"
pos = -40,-60
postype = P2
stateno = 13031
helpertype = normal
keyctrl = 0
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(10) = 1
id = 3030
name = "Foxy"
pos = 0,0
postype = P1
stateno = 13033
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(40) = 3
id = 3030
name = "Candy"
pos = 50,10
postype = P2
stateno = 13034
helpertype = normal
keyctrl = 0
ownpal = 1
facing = -1
ignorehitpause = 1

[State 801, fly p2]
type = TargetState
triggerall = numenemy
trigger1 = numtarget(3030) = 1 && (enemynear,stateno!=[120,155])
trigger1 = !time
value = 3101
ignorehitpause = 1
ID = 3030

[State 0, Explod]
type = Explod
trigger1 = time = 60
anim = 17004+(var(31)*10001)
pos = 46,-90
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 0, Explod]
type = Explod
trigger1 = time = 69
anim = 17004+(var(31)*10001)
pos = 46,-55
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 801, fly p2]
type = TargetState
trigger1 = time = 60
value = 3100
ignorehitpause = 1
ID = 3030

[State 5100, 10]
type = PlaySnd
trigger1 = time = 60
value = 3+(var(32)*2),20

[State 5100, 10]
type = PlaySnd
trigger1 = time = 214
trigger2 = time = 229
trigger3 = time = 244 ;262
value = 4,3

[State 801, fly p2]
type = TargetState
trigger1 = time = 214
trigger2 = time = 229
trigger3 = time = 244 ;262
value = 3103
ignorehitpause = 1
ID = 3030

[State 805, hitspark]
type = Explod
trigger1 = time = 214
trigger2 = time = 229
trigger3 = time = 244 
trigger4 = time = 282
anim = 12505
pos = Const(size.mid.pos.x),Const(size.mid.pos.y)-10
postype = p2
ontop = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999

[State 1201, HitAdd]
type = TargetLifeAdd
trigger1 = time = 60
trigger2 = time = 214
trigger3 = time = 229
trigger4 = time = 244 
ID = 3030
value = -50
kill = 0

[State 1201, HitAdd]
type = HitAdd
trigger1 = time = 60
trigger2 = time = 214
trigger3 = time = 229
trigger4 = time = 244 
value = 1

[State 1000, 5]
type = Projectile
trigger1 = time = 69
ProjAnim = 3016
Projhitanim = -1
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3010
projpriority = 5
offset = 0, 0        
velocity = 16
hitflag = MAF    
attr = S, HA
damage = 0
animtype  = Up
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(var(32)*2),20
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -2,-8.77564102564102564102564102563869
air.type = High
air.velocity = -2,-8.77564102564102564102564102563869
air.hittime = 13
air.juggle = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
id = 3030

[State 1020, Ice]
type=explod
trigger1 = time = 125
anim=3037
sprpriority = 3
postype=p2
pos= -20, 0
ownpal = 1
ignorehitpause = 0
vel = 0,0
[State 1020, Ice]
type=explod
trigger1 = time = 125
anim=3038
sprpriority = -3
postype=p2
pos= -20, 0
ownpal = 1
ignorehitpause = 0
vel = 0,0

[State 1000, 5]
type = Projectile
trigger1 = time = 123
ProjAnim = 3016
Projhitanim = -1
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3010
projpriority = 5
offset = 0, 0        
velocity = 16
hitflag = MAF    
attr = S, HA
damage = 0
animtype  = Up
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s3+(var(32)*2),3
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = 0
air.type = High
air.velocity = 0
air.hittime = 13
air.juggle = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = 3103
kill = 0
id = 3030

[State 1000, 5]
type = Projectile
trigger1 = time = 281
ProjAnim = 3016
Projhitanim = -1
ProjStageBound = 40
ProjEdgeBound = 40
ProjHeightBound = -240, 1
ProjID = 3000
projpriority = 5
offset = 0, 0        
velocity = 0,0
hitflag = MAF    
attr = S, HP
damage = ifelse(enemynear,gethitvar(hitcount)<3||enemynear,movetype!=H ||(enemynear,stateno=[120,155]),250,ifelse(enemynear,gethitvar(hitcount)<4,120,70)),5 
animtype  = diagUp
guardflag = M
pausetime = 0,13
guard.pausetime = 0,2
guardsound = -1
sparkno = -1
sparkxy = -10, -49    
guard.sparkno = -1
guard.sparkxy = 0, -49
hitsound = s4,3
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4,-7.77564102564102564102564102563869
air.type = High
air.velocity = -4,-7.77564102564102564102564102563869
air.hittime = 13
air.juggle = 0
fall = 1
fall.recover = 1
fall.recovertime = 120
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 3030

[State 2000, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, fat]
type = Width
trigger1 = 1
edge = 60

[State 3020, bind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(8) < 0
ID = 3030
pos = 60, 0
ignorehitpause = 1

[State 1001, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1001, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Diana
[Statedef 13031]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 3032
sprpriority = 4

[State 220, Explod]
type = Explod
trigger1 = animelem = 6
anim = 3332
pos = 0,0
postype = p1
bindtime = 1
removetime = -2
sprpriority = 4
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 1

[State 200, snd]
type=playsnd
trigger1= !time
value=200,26

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;Foxy
[Statedef 13033]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 3033
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= !time
value=200,27

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 16

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

;Candy
[Statedef 13034]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 3034
sprpriority = 4

[State 200, snd]
type=playsnd
trigger1= animelem = 60
value=200,28

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(8) = 1
trigger2 = AnimElemTime(22) = 1
trigger3 = AnimElemTime(36) = 1
id = 3030
name = "bombs"
pos = 0,0
postype = P1
stateno = 13035
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000,Super]
type = helper
trigger1 = AnimElemTime(60) = 1
id = 3030
name = "missile"
pos = 0,0
postype = P1
stateno = 13036
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;Missile
[Statedef 13035]
type = S
movetype = I
physics = N
ctrl = 0
velset = 7,0
anim = 3036
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;Bombs
[Statedef 13036]
type = S
movetype = I
physics = N
ctrl = 0
velset = 7,0
anim = 3035
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; WE SUNK (HAX by Jesuszilla)
;---------------------------------------------------------------------------
[Statedef 247]
anim = 1

[State -2, VarSet]
type = VarAdd
trigger1 = root,movehit = 1
var(1) = 1

[State -2, VarSet]
type = VarSet
trigger1 = root,movehit = 2
trigger2 = root,hitpausetime = 0
var(1) = 0

[State -2, VarSet]
type = VarSet
trigger1 = 1;root,movecontact = 1 && var(2) = 0
var(2) = root,movecontact

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = NumHelper(247)
text = "MoveHit = %d MoveContact = %d"
params = Var(1), var(2)
;---------------------------------------------------------------------------
; CUSTOM HIT ANIMS
;---------------------------------------------------------------------------
[Statedef 3100]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = !gethitvar(isbound)
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5002
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5002 && !animtime
value = 5007

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0

[Statedef 3101]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = !gethitvar(isbound)
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5012
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5012 && !animtime
value = 5017

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0

[Statedef 3103]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 3100, 2]
type = Velset
trigger1 = !gethitvar(isbound)
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3017


;COUNTERED O_O 
[Statedef 700]
type = A
movetype = H
physics = N
velset = 0, 0
ctrl = 0

[State 1580]
type = selfstate
trigger1 = IsHelper
value = prevstateno
ignorehitpause = 0

[State 700,0]
type = ChangeAnim
trigger1 = 1
value = anim
elem = AnimElemNo(0)
[State 700,2]
type = PosAdd
trigger1 = Time%2=0
x = -1
[State 700,2]
type = PosAdd
trigger1 = Time%2=1
x = 1
[State 970,3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn
[State 820,Screenbound]
type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,0
[State 1420,2]
type = PosSet
trigger1 = Time > 100
y = 0
[State 920,1]
type = SelfState
trigger1 = Time > 100
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3700]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = !gethitvar(isbound)
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5002
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5002 && !animtime
value = 5007

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0

[Statedef 3701]
type = S
physics = N
movetype = H
ctrl = 0
velset = 0,0
facep2 = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, PosSet]
type = posset
trigger1 = time = 0
y = 0

[State 3100, 2]
type = Velset
trigger1 = !gethitvar(isbound)
x = 0

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = 5012
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5012 && !animtime
value = 5017

[State 0, ChangeAnim2]
type = SelfState
trigger1 = time = 100
value = 0

[Statedef 5021]
type = A
movetype = H
velset = 0, 0

[State 5021, this is it]
type = HitFallSet
trigger1 = !time
value = ifelse(alive, 0, -1)

[State 5020, 1]; Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = !Time && (GetHitVar(animtype) != [3, 5])
value = ifelse((GetHitVar(airtype) = 1), 5000, 5010) + GetHitVar(animtype)

[State 5020, 2]; Anim for HIT_BACK
type = ChangeAnim
trigger1 = !Time && (GetHitVar(animtype) = [3, 5])
value = 5030

[State 5020, 3]; Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = !Time && (GetHitVar(animtype) = [4, 5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype); 5051 - 4 + type

[State 5020, 4]; Freeze anim
type = ChangeAnim
trigger1 = Time
value = anim

[State 5020, 5]
type = SelfState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000 || anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001 || anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110, -1, -.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012 || anim = 5002 || anim = 5030 || (anim = [5051, 5059])
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[Statedef 5205]
type= A
physics= N
movetype= H
 
[State 5205, End]
type= selfstate
trigger1= 1
value= ifelse(pos y<-20, 5210, 5200)
;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1350]
type    = U;A
movetype= H
physics = N
ctrl = 0

[State 5030, 4]
type = ChangeState
trigger1 = !time
trigger1 = statetype != A
value = stateno + 4 ;HITA_FALL

[State 1250, StateTypeSet]
type = StateTypeSet
trigger1 = !time
statetype = A       ;S,A,C,L

[State 1250, ChangeAnim]
type = ChangeAnim
trigger1 = !hitshakeover;!time
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1107, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 5030, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = stateno + 1 ;HITA_FALL
;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 1351]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069]) && (Anim != [105051, 105059]) && (Anim != [105061, 105069])
trigger2 = Anim != 5090+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) ;Not if hit off ground anim
value = 5050+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [105050,105059]
trigger1 = Vel Y >= ifelse(anim = 105050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = stateno + 1 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 1352]
type    = L
movetype= H
physics = N

[State 1352, NotHitBy]
type = NotHitBy
trigger1 = time < 6
value = SCA
time = 1

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim2
trigger1 = !time
value = stateno+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*30000)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "cvsfelicia" && authorname = "Jesuszilla"
trigger1 = !time
value = 5100

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = time = 5
value = stateno + 1

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1353]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = animtime = 0
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 1207, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),-gethitvar(fall.xvel),gethitvar(fall.xvel))
y = gethitvar(fall.yvel)

[State 5101, 4]
type = PosSet
trigger1 = animelem = 3
y = 10

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 1354]
type    = S
movetype= H
physics = N
velset = 0,0
p2facing = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000),5010+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = stateno + 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 1355]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 0, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, 1 ;Hit ground

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = SelfState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = stateno + 1;5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1356]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger1 = anim != [105101,105109]
trigger2 = !SelfAnimExist(5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [105101,105109]
trigger1 = SelfAnimExist(5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10)

[State 1256, VelSet]
type = VelSet
trigger1 = time = 0
y = -4.5

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110

;Hit By One Inch Punch (For Pausetime)
[Statedef 1406]
type    = S
movetype= H
physics = N
velset = 0,0

[State 803, ChangeAnim2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000),5010+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + GetHitVar(animtype)))
value = 5047+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 1403

;Hit By One Inch Punch (Air Fall)
[Statedef 1403]
type    = A
movetype= H
physics = N
velset = 0,0

[State 803, ChangeAnim2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3340, Vel]
type = VelSet
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),7,-7)
y = -4

[State 3340, Gravity]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 3340, Anim 5050]
type = ChangeAnim
trigger1 = !time
persistent = 0
value = 5050+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 1404 ;HIT_BOUNCE

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [105051,105059]) || (anim = [105061,105069]), 0, 25)
value = 1404 ;HIT_BOUNCE

;Hit By One Inch Punch (Slide)
[Statedef 1404]
type    = S
movetype= H
physics = N
velset = 0,0

[State 803, ChangeAnim2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 1403+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*30000)

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State InitVel]
type = VelSet
trigger1 = !time
X = ifelse((facing=enemynear,facing),3.56535983085632,-3.56535983085632)

[State Accel]
type = VelAdd
trigger1 = Vel X != 0
X = ifelse((facing=enemynear,facing),-0.176470592617989,0.176470592617989)

[State 802, VelSet]
type = VelSet
trigger1 = Time = 20
x = 0

[State 802, SelfState]
type = ChangeState
trigger1 = Vel X = 0
value = 1405

;Hit By One Inch Punch (Liedown)
[Statedef 1405]
type    = S
movetype= H
physics = N

[State 803, ChangeAnim2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 1404+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*30000)

[State 803, SelfState]
type = SelfState
trigger1 = animtime = 0
value = Ifelse(alive,5120,5150)

; HITG_SHAKE
[Statedef 1354]
type    = S
movetype= H
physics = N
velset = 0,0
p2facing = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000),5010+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = stateno + 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 1355]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5100+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = SelfState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = stateno + 1;5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1356]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger1 = anim != [105101,105109]
trigger2 = !SelfAnimExist(5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [105101,105109]
trigger1 = SelfAnimExist(5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10))
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000) + (anim % 10)

[State 1256, VelSet]
type = VelSet
trigger1 = time = 0
y = -4.5

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110
;---------------------------------------------------------------------------
[Statedef 950]
type = S
movetype = A
physics = N
anim = 5945
ctrl = 0
velset = -16, 0

[State 960, Flash]
type = BGPalFX
trigger1 = Anim = 5945 && AnimElem = 2,=0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 950, PlaySnd]
type = PlaySnd
triggerall = var(32) 
trigger1 = !time
value = 3+(var(32)*2),9

[State 950, PlaySnd]
type = PlaySnd
triggerall = !var(32) 
trigger1 = !time
value = 3+(var(32)*2),3

[State 810,TargetBind]
type = TargetState
trigger1 = Time = 0
value = 955

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .75

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;------------------------ 
[Statedef 955]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
facing = enemy,facing
facep2 = 1

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5940)
trigger1 = authorname = "Hh" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "NyanKiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSSCAT" || AuthorName = "CrossCat"
trigger8 = AuthorName = "Jesuszilla" || AuthorName = "Vans"
trigger9 = AuthorName = "N64Mario" && Name = "Zero" && FVar(17) = 1
trigger10 = AuthorName = "KoopaKoot" || AuthorName = "Scal"
trigger11 = AuthorName = "K.O.D & Vans" || AuthorName = "OrochiKOF97 & Scal"
value = 5940

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5910) && !SelfAnimExist(5940)
trigger1 = authorname = "Hh" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "NyanKiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSSCAT" || AuthorName = "CrossCat"
trigger8 = AuthorName = "Jesuszilla" || AuthorName = "Vans"
trigger9 = AuthorName = "N64Mario" && Name = "Zero" && FVar(17) = 1
value = 5910

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && anim != 5940 && anim != 5910
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 4100, Escape in corner (Scal Code)]
type = VelSet
trigger1 = !(EnemyNear, BackEdgedist)
trigger1 = EnemyNear, Vel X
x = (EnemyNear, Vel X)
persistent = 0
ignorehitpause = 1
[State 4100, Friction]
type = VelMul
trigger1 = 1
x = .75

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1
;------------------

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 10900]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 1025, Anim] ;Custom animation
type = ChangeAnim
trigger1 = selfanimexist(5900)
trigger1 = !time
value = 5900

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = !selfanimexist(5900)
trigger1 = !time
value = 10900

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 10901

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 10901]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = VelSet
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),15.75,-15.75)

[State 1026, Gravity]
type = VelSet
trigger1 = time = 0
y = -4.5

[State 0, VelMul]
type = VelMul
trigger1 = time > 0
x = 0.984375

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.5

[State 1026, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1026, Hit wall]
type = ChangeState
triggerall = time > 2;Pos y < -15
trigger1 = BackEdgeBodyDist <= 32
trigger2 = FrontEdgeBodyDist <= 32
value = 10902

[State 1026, Hit wall]
type = Turn
triggerall = time > 2;Pos y < -15
trigger1 = BackEdgeBodyDist <= 32
trigger2 = FrontEdgeBodyDist <= 32

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 10902]
type    = A
movetype= H
physics = N

[State 1027, Pos]
type = turn
triggerall = facing=enemynear,facing
trigger1 = !Time 
x = -15 

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = -15 

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
;trigger1 = (gametime%2)
trigger1 = 1
value = 1
movecamera = 0,0

[State 1027, Anim]
type = ChangeAnim
trigger1 = selfanimexist(5901)
trigger1 = !time
value = 5901

[State 1027, Anim]
type = ChangeAnim2
trigger1 = !selfanimexist(5901)
trigger1 = !time
value = 5901

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 10903

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 10903]
type    = A
movetype= H
physics = N
velset = 0,0
p2facing = 1

[State 0, Turn]
type = Turn
trigger1 = !time

[State 1026, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 5000, 3]
type = ChangeAnim2
trigger1 = Time = 0
value = 5902

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A

[State 811, 2]
type = SelfState
Triggerall = time > 1
Trigger1 = vel y > 0 && pos y >= 0
value = 5100

[State 1008, VelSet]
type = VelSet
trigger1 = time = 0
x = -2
y = -14.908935546875

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 1

[State 1008, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.7

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 10904]
type    = L
movetype= H
physics = N

[State 1026, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5100) + (anim % 10)
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5100) + (anim % 10)
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelSet
trigger1 = Time = 0
x = 0

[State 5100, 7]
type = SelfState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20


;Spinning Fall
[Statedef 6200]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 803, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 6200

[State 0, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 6201
ctrl = 0

[Statedef 6201]
type = A
movetype = H
physics = N
velset = 0, 0
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, ChangeAnim]
type = ChangeAnim2
trigger1 = time = 0
value = 6201

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = ifelse((facing=enemynear,facing),2,-2)
y = -14

[State 0, VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .6

[State 5110, 6]
type = PlaySnd
trigger1 = Pos Y >= -15 && Vel Y > 0
value = F7, 0

[State 0, SelfState]
type = ChangeState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 6202

[Statedef 6202]
type = A
movetype = H
physics = N
velset = 0, 0

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 20
ampl = -8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5100+ifelse(SelfAnimexist(5101),1,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 6203

[Statedef 6203]
type = A
movetype = H
physics = N
velset = 0, 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = ifelse((facing=enemynear,facing),1.5,-1.5)
y = -3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5160+ifelse(SelfAnimexist(5161),1,0)

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .525

[State 0, SelfState]
type = SelfState
trigger1 = Pos Y >= -2 && Vel Y > 0
value = 5110
;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y + Vel y >= 0
type = ChangeState
value = 5100 

; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, HitByFix]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20
;---------------------------------------------------------------------------
;Dizzy Punch (Warusaki Code)
;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 3600]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 3601 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 3630

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 3601]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 3610]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 3611 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 3630

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 3611]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5011, 6]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 3620]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 3630

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 3630]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5030, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 3650 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3635 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 3635]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5035, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 3650 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 3650]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5050, 4] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = SelfState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 3660 ;HIT_BOUNCE



;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 3660]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 3670 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 3671

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3671]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3680

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3680]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5120, 7]
type = ChangeState
trigger1 = Time = 50
value = 3690

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 3690]
type    = L
movetype= H
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 3700

;---------------------------------------------------------------------------
;C
[Statedef 3700]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
anim = 5300

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 1205, ChangeState]
type = selfstate
triggerall = random < 50
trigger1 = Time = 75
value = 0
ctrl = 1

[State 1205, ChangeState]
type = selfstate
triggerall = random < 150
trigger1 = Time = 90
value = 0
ctrl = 1

[State 1205, ChangeState]
type = selfstate
triggerall = random < 500
trigger1 = Time = 135
value = 0
ctrl = 1

[State 1205, ChangeState]
type = selfstate
triggerall = random < 750
trigger1 = Time = 180
value = 0
ctrl = 1

[State 1205, ChangeState]
type = selfstate
trigger1 = Time = 225
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, HitByFix]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20
;---------------------------------------------------------------------------
; COMMONSTATES
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
velset = 0,0

[State 1000: Helper]
type = Helper
triggerall = numhelper(1) = 0
trigger1 = anim = 0
helpertype = Normal
id = 1
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 3
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;ICE :3
[Statedef 3]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 3
sprpriority = 4

[State 10005]
type = BindToParent
trigger1 = 1

[State 1050, Trans]
type = Trans
trigger1 = 1;root, var(27)
trans = add1
[State 65000: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10002, DestroySelf]
type = DestroySelf
trigger1 = root,anim != 0
;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10
velset = 0,0

[State -10, AI]
Type = ChangeState
triggerall = Var(59) >= 3
trigger1 = Time = 0
Value = 0
Ctrl = 1

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0
velset = 0,0

[State 11, 0]
type = Turn
trigger1 = Anim = 5

[State 11, 0]
type = ChangeAnim
trigger1 = PrevStateNo = [10,12]
trigger1 = Anim != [10,11]
trigger1 = Anim != 6
value = 10

[State 0, 1]
type = AssertSpecial
trigger1 = Anim = 10
flag = NoAutoTurn

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
trigger2 = Anim != 11 && Anim != 6 && Anim != 10
trigger3 = Anim = 10 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12
velset = 0,0

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Run to Crouch (STOLEN FROM SCAL) D:
;---------------------------------------------------------------------------
[Statedef 15]
type = C
physics = C
anim = 15
velset = 0,0
ctrl = 0

[State 15, GoToCrouch]
type = ChangeState
trigger1 = !AnimTime
value = ifelse(Command = "holddown",11,0)
ctrl = 1
;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State -20, AI]
Type = ChangeState
triggerall = Var(59) >= 4
trigger1 = Time = 0
Value = 0
Ctrl = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21
value = 21

;---------------------------------------------------------------------------

;===============================================================================
; AIp
;===============================================================================
;AIp Oi
[Statedef 19]
type    = S
physics = S
sprpriority = 1
anim = 20
ctrl = 0

[State 19, 1]
type = Turn
trigger1 = P2dist X < 0

[State 19, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 19, 5]
type = changestate
;NUp
trigger1 = var(43) = 1 && p2bodydist X <= 60 && Life >= Floor(LifeMax/3)
trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H
trigger2 = var(43) = 1 &&  p2bodydist X <= 90 && Life < Floor(LifeMax/3)
trigger2 = TeamMode = Single || TeamMode = Turns
trigger2 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

;NUpy^bOpz
trigger3 = var(43) = 1 && p2bodydist X <= 60 && Life >= Floor(LifeMax/3)
trigger3 = TeamMode = Simul
trigger3 = NumPartner >= 1 && Partner,Life = 0
trigger3 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H
trigger4 = var(43) = 1 && p2bodydist X <= 90 && Life < Floor(LifeMax/3)
trigger4 = TeamMode = Simul
trigger4 = NumPartner >= 1 && Partner,Life = 0
trigger4 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

;py^bOpp[gi[z
trigger5 = var(43) = 1 && p2bodydist X <= 60
trigger5 = TeamMode = Simul
trigger5 = NumPartner >= 1 && Partner,Life > 0
trigger5 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

;p
trigger6 = var(43) = 1 && p2bodydist X <= 30
trigger6 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
trigger6 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)

;
trigger7 = p2bodydist X <= 15
trigger7 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
trigger7 = (EnemyNear(var(45)),Facing = -1 && Facing = -1) || (EnemyNear(var(45)),Facing = 1 && Facing = 1)

;CXs R{
trigger8 = var(54) = 1 && p2bodydist X <= 10
trigger9 = Roundstate != 2
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;AIp  
[Statedef 18]
type    = S
physics = S
sprpriority = 1
anim = 21
ctrl = 0

[State 18, 1]
type = Turn
trigger1 = P2dist X < 0

[State 18, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 18, 5]
type = changestate
;NUp
trigger1 = var(43) = 1 && p2bodydist X >= 60 && Life >= Floor(LifeMax/3)
trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H
trigger2 = var(43) = 1 && p2bodydist X >= 90 && Life < Floor(LifeMax/3)
trigger2 = TeamMode = Single || TeamMode = Turns
trigger2 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

;NUpy^bOpz
trigger3 = var(43) = 1 && p2bodydist X >= 60 && Life >= Floor(LifeMax/3)
trigger3 = TeamMode = Simul
trigger3 = NumPartner >= 1 && Partner,Life = 0
trigger3 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H
trigger4 = var(43) = 1 && p2bodydist X >= 90 && Life < Floor(LifeMax/3)
trigger4 = TeamMode = Simul
trigger4 = NumPartner >= 1 && Partner,Life = 0
trigger4 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

;NUpy^bOpp[gi[z
trigger5 = var(43) = 1 && p2bodydist X >= 60
trigger5 = TeamMode = Simul
trigger5 = NumPartner >= 1 && Partner,Life > 0
trigger5 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

;p
trigger6 = var(43) = 1 && p2bodydist X >= 100
trigger6 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H

trigger7 = var(43) = 0 && p2bodydist X >= 120 && EnemyNear(var(45)),statetype = A
trigger7 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H

trigger8 = NumHelper(55000+id) && NumHelper(60000+id)
trigger8 = Helper(55000+id),RootDist X < 100 && facing = -1 || Helper(60000+id),RootDist X < 100 && facing = 1

;CXs R{
trigger9 = var(54) = 1 && (var(43) = [1,2]) && p2bodydist X >= 5
trigger10 = var(54) = 1 && var(43) = 3 && p2bodydist X >= 20
trigger11 = Roundstate != 2
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type = S
physics = S
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State -40, AI]
Type = ChangeState
triggerall = Var(59) >= 3
trigger1 = Time = 0
Value = 0
Ctrl = 1

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0
[State 100, Karin]
type = VarSet
trigger1 = command = "x"
var(4) = 1
[State 100, Karin]
type = VarSet
trigger1 = command = "a"
var(4) = 2
[State 100, Karin]
type = VarSet
trigger1 = command = "y"
var(4) = 3
[State 100, Karin]
type = VarSet
trigger1 = command = "b"
var(4) = 4
[State 100, Karin]
type = VarSet
trigger1 = command = "z"
var(4) = 5

[State 40, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 40

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 1]
type = VarSet
triggerall = sysvar(1)
trigger1 = command = "hijump" && command != "ChargedDU"
trigger2 = PrevStateNo = 101 && sysvar(1) = 1
var(2) = 1
[State 40, 1]
type = VarSet
trigger1 = PrevStateNo = 101 && sysvar(1) = -1
var(2) = 0

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 5]
type = VarSet
trigger1 = command != "holdup"
var(3) = 2

[State 40, 6]
type = VelSet
triggerall = !var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 40, 7]
type = VelSet
triggerall = var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 40, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
y = ifelse (var(3), -6.0654296875, const(velocity.jump.y))

[State 40, PlaySnd]
type = PlaySnd
trigger1 = !animtime
trigger2 = var(4) && time > 0
value = 2+(var(32)*10),3+var(2)

;--------------------------[APPROPIATE ATTACK STATE]----------------------------
;Jumping Light Punch
[State -1, Jumping Light Punch]
type = ChangeState
value = 600
trigger1 = var(4) = 1 && time > 0
;Jumping Light Kick
[State -1, Jumping Light Kick]
type = ChangeState
value = 620
trigger1 = var(4) = 2 && time > 0
;Jumping Hard Punch
[State -1, Jumping Hard Punch]
type = ChangeState
value = 610
trigger1 = var(4) = 3 && time > 0
;Jumping Hard Kick
[State -1, Jumping Light Kick]
type = ChangeState
value = 630
trigger1 = var(4) = 4 && time > 0
;Jumping CD Attack
[State -1, Jumping CD Attack]
type = ChangeState
value = 640
trigger1 = var(4) = 5 && time > 0
;-------------------------------------------------------------------------------

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0 && command = "holdup"
value = 50
ctrl = 1

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0 && Var(3) = 2
value = 41
ctrl = 1


;===============================================================================
;AIWvp
;===============================================================================
;_bV Wv
[Statedef 39]
type = S
physics = S
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State 39, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 40

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0

[State 39, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 39, 2]
type = VarSet
trigger1 = var(59) >= 1
;trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 39, 3]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 39, 1]
type = VarSet
triggerall = sysvar(1)
trigger1 = var(59) >= 1
;trigger1 = command = "hijump" && command != "ChargedDU"
;trigger2 = PrevStateNo = 101 && sysvar(1) = 1
var(2) = 1

[State 39, 1]
type = VarSet
trigger1 = PrevStateNo = 101 && sysvar(1) = -1
var(2) = 0

[State 39, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 39, 5]
type = VarSet
trigger1 = var(59) >= 1
;trigger1 = command != "holdup"
var(3) = 2

[State 39, 6]
type = VelSet
triggerall = !var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 39, 7]
type = VelSet
triggerall = var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 39, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
y = ifelse (var(3), -6.0654296875, const(velocity.jump.y))

[State 39, PlaySnd]
type = PlaySnd
trigger1 = !animtime
trigger2 = var(4) && time > 0
value = 2+(var(32)*10),3+var(2)

[State 39, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = AnimTime = 0 && command = "holdup"
value = 50
ctrl = 1

[State 39, 6]
type = ChangeState
trigger1 = AnimTime = 0 && Var(3) = 2
value = 41
ctrl = 1

;-------------------------------------------------------------------------------
;_bV Wv
[Statedef 38]
type = S
physics = S
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State 38, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 40

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0

[State 38, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 38, 2]
type = VarSet
trigger1 = var(59) >= 1
;trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 38, 3]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 38, 1]
type = VarSet
triggerall = sysvar(1)
trigger1 = var(59) >= 1
;trigger1 = command = "hijump" && command != "ChargedDU"
;trigger2 = PrevStateNo = 101 && sysvar(1) = 1
var(2) = 1
[State 38, 1]
type = VarSet
trigger1 = PrevStateNo = 101 && sysvar(1) = -1
var(2) = 0

[State 38, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 38, 5]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command != "holdup"
var(3) = 2

[State 38, 6]
type = VelSet
triggerall = !var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 38, 7]
type = VelSet
triggerall = var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 38, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
y = ifelse (var(3), -6.0654296875, const(velocity.jump.y))

[State 38, PlaySnd]
type = PlaySnd
trigger1 = !animtime
trigger2 = var(4) && time > 0
value = 2+(var(32)*10),3+var(2)

[State 38, 6]
type = ChangeState
trigger1 = AnimTime = 0; && command = "holdup"
value = 50
ctrl = 1

[State 38, 6]
type = ChangeState
trigger1 = AnimTime = 0 && Var(3) = 2
value = 41
ctrl = 1

;-------------------------------------------------------------------------------
; Wv
[Statedef 37]
type = S
physics = S
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State 37, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 40

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0

[State 37, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 37, 2]
type = VarSet
trigger1 = var(59) >= 1
;trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 37, 3]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 37, 1]
type = VarSet
triggerall = sysvar(1)
triggerall = var(59) = 0
trigger1 = command = "hijump" && command != "ChargedDU"
trigger2 = PrevStateNo = 101 && sysvar(1) = 1
var(2) = 1

[State 37, 1]
type = VarSet
trigger1 = PrevStateNo = 101 && sysvar(1) = -1
var(2) = 0

[State 37, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 37, 5]
type = VarSet
trigger1 = var(59) >= 1
;trigger1 = command != "holdup"
var(3) = 2

[State 37, 6]
type = VelSet
triggerall = !var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 37, 7]
type = VelSet
triggerall = var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 37, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
y = ifelse (var(3), -6.0654296875, const(velocity.jump.y))

[State 37, PlaySnd]
type = PlaySnd
trigger1 = !animtime
trigger2 = var(4) && time > 0
value = 2+(var(32)*10),3+var(2)

[State 37, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = AnimTime = 0 && command = "holdup"
value = 50
ctrl = 1

[State 37, 6]
type = ChangeState
trigger1 = AnimTime = 0 && Var(3) = 2
value = 41
ctrl = 1

;-------------------------------------------------------------------------------
;obNWv
[Statedef 36]
type = S
physics = S
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 1

[State 36, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 40

[State 100, Kino]
type = VarSet
trigger1 = !time
var(4) = 0

[State 36, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 36, 2]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 36, 3]
type = VarSet
trigger1 = var(59) >= 1
;trigger1 = command = "holdback"
sysvar(1) = -1

[State 36, 1]
type = VarSet
triggerall = sysvar(1)
trigger1 = var(59) >= 1
;trigger1 = command = "hijump" && command != "ChargedDU"
;trigger2 = PrevStateNo = 101 && sysvar(1) = 1
var(2) = 1

[State 36, 1]
type = VarSet
trigger1 = PrevStateNo = 101 && sysvar(1) = -1
var(2) = 0

[State 36, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 36, 5]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command != "holdup"
var(3) = 2

[State 36, 6]
type = VelSet
triggerall = !var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 36, 7]
type = VelSet
triggerall = var(2)
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 36, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger2 = var(4) && time > 0
y = ifelse (var(3), -6.0654296875, const(velocity.jump.y))

[State 36, PlaySnd]
type = PlaySnd
trigger1 = !animtime
trigger2 = var(4) && time > 0
value = 2+(var(32)*10),3+var(2)

[State 36, 6]
type = ChangeState
trigger1 = AnimTime = 0; && command = "holdup"
value = 50
ctrl = 1

[State 36, 6]
type = ChangeState
trigger1 = AnimTime = 0 && Var(3) = 2
value = 41
ctrl = 1

;===============================================================================
; Jump Up
[Statedef 50]
type = A
physics = N

[State 810, 1]
type = AfterImage
trigger1 = !time && var(2) && sysvar(1) 
time = 20
length = 4
framegap = 1
timegap = 6
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 50, 1]
type = VarSet
trigger1 = Time = 1
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, VelAdd]
type = VelAdd
trigger1 = time > 0
y = const(movement.yaccel)

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, Transition]
type = PosAdd
trigger1 = Vel Y > 0
x = Vel X
persistent = 0


[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;---------------------------------------------------------------------------
; Short Jump
[Statedef 41]
type = A
physics = N

[State 810, 1]
type = AfterImage
trigger1 = !time && var(2) && sysvar(1) 
time = 20
length = 4
framegap = 1
timegap = 6
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 1101, pos]
type = Veladd
trigger1 = time > 0
y = const(movement.yaccel)

[State 50, 1]
type = VarSet
trigger1 = Time = 1
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 51, ifelse((vel x)>0, 52, 53))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 1
anim = 47
velset = 0,0

[State -3, hop]
type = PlaySnd
trigger1 = !time 
value = 2+(var(32)*10),2

[State 1000, remove fx]
type = RemoveExplod
trigger1 = !time 
ID = 1000

[State 40, 1]
type = VarSet
trigger1 = !time
var(2) = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Wall Jump
[Statedef 42]
type = A
physics = N
velset = 0,0
anim = 60
ctrl = 0

[State 60, 0]
type = Turn
trigger1 = FrontEdgeBodyDist < 8 && time = 0

[State 60, 1]
type = PosAdd
trigger1 = AnimTime = 0
x = 20

[State 60, 1]
type = VelSet
trigger1 = AnimTime = 0
x = const(velocity.jump.fwd.x)
y = const(velocity.jump.y)

[State 40, PlaySnd]
type = PlaySnd
trigger1 = !animtime
value = 2+(var(32)*10),3+var(2)

[State 60, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------------------------------------------------------------
; DASH_FWD
[Statedef 100]
type    = S
physics = S
anim = 99
ctrl = 0
velset = 0
sprpriority = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 101

;===============================================================================
;AIp_bVWv
;===============================================================================
;_bVWv
[Statedef 111]
type    = S
physics = S
anim = 99
ctrl = 0
velset = 0
sprpriority = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 101

;-------------------------------------------------------------------------------
;_bVWv
[Statedef 112]
type    = S
physics = S
anim = 99
ctrl = 0
velset = 0
sprpriority = 1

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 101

;-------------------------------------------------------------------------------
[Statedef 101]
type    = S
physics = N
anim = 100
ctrl = 0
velset = 0
sprpriority = 1

[State -3, dash]
type = PlaySnd
trigger1 = time = 1
value = 2+(var(32)*10),8
;;volume = 200
loop = 1
channel = 27

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, VarSet]
type = VarSet
trigger1 = !time && prevstateno != 102
var(26) = 0

[State 100, VarSet]
type = VarSet
trigger1 = time > 10
var(26) = 1

[State 220,2]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdup"
value = 40

[State 220,2]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = var(46) = 1
value = 39

[State 220,2]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = var(46) = 2
value = 38

[State 100, GoToCrouch]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time > 9
trigger1 = Command = "holddown" && Command != "holdfwd"
value = 15

[State 101, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time > 9
trigger1 = command != "holdfwd"
value = 102

[State 101, 6]
type = ChangeState
triggerall = var(59) >= 1
triggerall = Time > 9
trigger1 = var(43) = 1 && p2bodydist X <= 80
trigger1 = EnemyNear(var(45)),statetype = L || EnemyNear(var(45)),movetype = H

trigger2 = var(43) = 1 && p2bodydist X <= 110
trigger2 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
trigger2 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)

trigger3 = var(43) = 1 && (EnemyNear(var(45)),movetype = A || EnemyNear(var(45)),numproj >= 1 || EnemyNear(var(45)),numHelper > var(58))
trigger3 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
trigger3 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)

trigger4 = (p2bodydist X <= 10 || (EnemyNear(var(45)),Anim = [5,6]))
trigger4 = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
trigger4 = (EnemyNear(var(45)),Facing = -1 && Facing = -1) || (EnemyNear(var(45)),Facing = 1 && Facing = 1)

trigger5 = var(43) = 0 && var(54) != 6 && p2bodydist X <= 10
trigger6 = var(54) = 6 && p2bodydist X <= 70
trigger7 = Roundstate != 2 && p2bodydist X <= 40
value = 102

;-------------------------------------------------------------------------------
[Statedef 102]
type    = S
physics = S
anim = 101
ctrl = 0
velset = 0
sprpriority = 1

[State 102, 3]
type = StopSnd
trigger1 = time = 0
channel = 27

[State 100, 4]
type = ChangeState
triggerall = var(26)
trigger1 = command = "holdfwd"
value = 101

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------------
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = 105
sprpriority = 1

[State -3, hop]
type = PlaySnd
triggerall = time = 4
trigger1 = StateNo = 105
value = 2+(var(32)*10),12

[State 105, 1]
type = StateTypeSet
trigger1 = Time = 3
statetype = A

[State 105, 1]
type = VelSet
trigger1 = Time = 3
x = -9.385986328125;8.955718994140625
y = -4.125 ;3.51953125

[State 105, 1]
type = VelAdd
trigger1 = Time > 3
Y = 0.60546875

[State 105, 1]
type = VelMul
trigger1 = Time > 3
X = 0.9101557419690467

[State 105, 3]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
trigger1 = Time > 3
value = 106

[StateDef 106]
type = s
MoveType = I
VelSet = 0, 0
Anim = 106
SprPriority = 2 
ctrl=0
facep2 = 1

[State -3, hop]
type = PlaySnd
trigger1 = !time 
value = 2+(var(32)*10),2

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;===============================================================================
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120]
type = StateTypeSet
triggerall = Statetype = S
trigger1 = var(59) = 0
trigger1 = command = "holddown"

trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = C
physics = C

[State 120]
type = StateTypeSet
triggerall = Statetype = C
trigger1 = var(59) = 0
trigger1 = command != "holddown"

trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59) = [1,3]
Trigger3 = P2BodyDist X < 0
Trigger3 = Random <= (10-var(59))*40
trigger4 = var(59) >= 1 && var(52) > 0 && EnemyNear(var(45)),NumHelper = var(58) && EnemyNear(var(45)),Numproj = 0 && EnemyNear(var(45)),movetype != A
value = 140

;-------------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holddown"

trigger2 = var(59) = [1,3]
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
value = 131

[State 130, Stop]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59) = [1,3]
Trigger3 = P2BodyDist X < 0
Trigger3 = Random <= (10-var(59))*40
trigger4 = var(59) >= 1 && var(52) > 0 && EnemyNear(var(45)),NumHelper = var(58) && EnemyNear(var(45)),Numproj = 0
value = 140

;-------------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holddown"

trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
value = 130


[State 131, Stop]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59) = [1,3]
Trigger3 = P2BodyDist X < 0
Trigger3 = Random <= (10-var(59))*40
trigger4 = var(59) >= 1 && var(52) > 0 && EnemyNear(var(45)),NumHelper = var(58) && EnemyNear(var(45)),Numproj = 0
value = 140

;-------------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59) = [1,3]
Trigger3 = P2BodyDist X < 0
Trigger3 = Random <= (10-var(59))*40
trigger4 = var(59) >= 1 && var(52) > 0 && EnemyNear(var(45)),NumHelper = var(58) && EnemyNear(var(45)),Numproj = 0
value = 140

;-------------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"

trigger2 = statetype = S
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = statetype = S
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = S
trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"

trigger2 = statetype = C
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

;iU
trigger3 = statetype = C
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = C
trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;-------------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, 2 AI]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = HitShakeOver
value = 151 + 2*(EnemyNear(var(45)),StateType = C)

;-------------------------------------------------------------------------------
[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"

trigger2 = statetype = S
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = statetype = S
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = S
trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"

trigger2 = statetype = C
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

;iU
trigger3 = statetype = C
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = C
trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;-------------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"

trigger2 = statetype = S
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = statetype = S
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = S
trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"

trigger2 = statetype = C
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

;iU
trigger3 = statetype = C
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = C
trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = S
physics = S


[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;-------------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 2]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, 2 AI]
type = ChangeState
trigger1 = var(59) >= 1
trigger1 = HitShakeOver
value = 151 + 2*(EnemyNear(var(45)),StateType = C)

;-------------------------------------------------------------------------------
[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"

trigger2 = statetype = S
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = statetype = S
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = S
trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"

trigger2 = statetype = C
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

;iU
trigger3 = statetype = C
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = C
trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;-------------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"

trigger2 = statetype = S
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType = C
trigger2 = random <= var(59)*200

trigger3 = statetype = S
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType = C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = S
trigger4 = var(59) >= 4
trigger4 = var(39) = 1 || var(53) = 2
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"

trigger2 = statetype = C
trigger2 = (var(59) = [1,3])
trigger2 = EnemyNear(var(45)),StateType != C
trigger2 = random <= var(59)*200

;iU
trigger3 = statetype = C
trigger3 = var(59) >= 4
trigger3 = var(39) = 0 && var(53) = 0
trigger3 = EnemyNear(var(45)),StateType != C
trigger3 = random <= var(59)*200 || var(59) >= 5

trigger4 = statetype = C
trigger4 = var(59) >= 4
trigger4 = var(39) = 2 || var(53) = 1
trigger4 = random <= var(59)*200 || var(59) >= 5
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1 

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = N
anim = 5200

[State 200, snd]
type=playsnd
trigger1= animelem=1 
value=200,22
channel=0  

[State 5201, 1]
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = !time
x =-11.5
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 1
x = -7.921875

[State 5201, VelMul]
type = VelMul
trigger1 = 1
x = 0.8125

[State 750, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 705, 1]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 5950]
type=S
movetype=H
physics=S
anim=5950
velset=0,0

[State 5950, NHB]
type=nothitby
trigger1= 1
value=SCA

[State 5950, KO Snd]
type=assertspecial
trigger1= 1
flag=nokosnd

[State 5950, KO Snd]
type=stopsnd
trigger1= !time && !alive
channel=0

[State 5950, KO Snd]
type=playsnd
trigger1= animelem=2 && !alive
value=5950,0
;;volume = 200

[State 1510, 2]
type = ChangeAnim
triggerall = anim != 9219 
trigger1 = AnimTime = 0
trigger2 = AnimElemTime(AnimElemNo(0)+1)=0
value = IfElse((anim =5950&&SelfAnimExist(5112)),5112,5110)
persistent = 0

[State 5950, End]
type=changestate
trigger1= AnimElemTime(AnimElemNo(0)+1)=0
value=ifelse(alive,5110,5150)

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = var(59) = [0,3]
trigger1 = Command = "recovery"
trigger2 = var(59) >= 4
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = var(59) = [0,3]
trigger1 = Command = "recovery"
trigger2 = var(59) >= 4
trigger2 = var(52) = 0
trigger2 = p2bodydist Y >= 100
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 5100
;---------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 5100

; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine
;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

[State -2, Ice Shield]
type = Explod
trigger1 = NumExplod(120) = 0
trigger1 = anim = 120
anim = 4000
id = 120
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, Leave]
type = RemoveExplod
trigger1 = anim != 120
id = 120

[State -2, prout]
type = Explod
triggerall = NumExplod(130) = 0
trigger1 = anim = 130
trigger2 = anim = 150
anim = 4001
id = 130
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 130 && anim != 150
id = 130

[State -2, prout]
type = Explod
trigger1 = NumExplod(140) = 0
trigger1 = anim = 140
anim = 4002
id = 140
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 140
id = 140

[State -2, prout]
type = Explod
trigger1 = NumExplod(121) = 0
trigger1 = anim = 121
anim = 4003
id = 121
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 121
id = 121

[State -2, prout]
type = Explod
triggerall = NumExplod(131) = 0
trigger1 = anim = 131
trigger2 = anim = 151
anim = 4004
id = 131
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 131 && anim != 151
id = 131

[State -2, prout]
type = Explod
trigger1 = NumExplod(141) = 0
trigger1 = anim = 141
anim = 4005
id = 141
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 141
id = 141

[State -2, prout]
type = Explod
trigger1 = NumExplod(122) = 0
trigger1 = anim = 122
anim = 4006
id = 122
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 122
id = 122

[State -2, prout]
type = Explod
triggerall = NumExplod(132) = 0
trigger1 = anim = 132
trigger2 = anim = 152
anim = 4007
id = 132
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 132 && anim != 152
id = 132

[State -2, prout]
type = Explod
trigger1 = NumExplod(142) = 0
trigger1 = anim = 142
anim = 4008
id = 142
postype = p1
pos = 0,0
facing = 1
removetime = -1
bindtime = -1
sprpriority = 1

[State -2, prout]
type = RemoveExplod
trigger1 = anim != 142
id = 142

[State -2, Helper]
type = Helper
triggerall = !numhelper(50000) && WinKO 
trigger1 = movehit
trigger2 = projhittime(0) = 1
trigger3 = var(55) = 1410 || var(55) = 3000 || var(55) = 3100
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

; Var Helper
[State -2, 0]
type = Helper
triggerall = !NumHelper(247)
trigger1 = !Time
helpertype = normal
name = "Var"
ID = 247
pos = 0,0
postype = p1
stateno = 247
keyctrl = 0

[State -2, DEBUG]
trigger1 = 1
type = null;DisplayToClipboard
ignorehitpause = 1
text = "X = %f Y = %f Juggle = %d Counter = %d"  
params = Vel X, Vel Y, var(16), var(56)

[State 191, camera]
type=helper
trigger1= !numhelper(7650)
helpertype=normal
stateno=7650
ID=7650
name="Camera"
postype=p1

; Do not modify anything below.
[State 300, Land]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 1404 && P2MoveType = H
value = 2+(var(32)*10),11
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 2132 && P2MoveType = H
value = 5,14
persistent = 0

[State 1000: Helper]
type = explod
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2Stateno = 2132 && P2MoveType = H
anim = 12505
pos = 10,-54
postype = p2  ;p2,front,back,left,right
sprpriority = 2
ownpal = 1
persistent = 0

[State 11030, remove fx]
type = RemoveExplod
trigger1 = stateno != 2000
ID = 2000

[State 11030, remove fx]
type = RemoveExplod
trigger1 = stateno != 194
ID = 194

[State -2, Stop]
type = StopSnd
trigger1 = stateno != 101
channel = 27

[State -2, Width]
type = Width
Trigger1= Movetype != h 
edge = 8,0
ignorehitpause=1

[State -2, Jump reset]
type = VarSet
trigger1 = stateno != [40,50]
var(2) = 0

[State -2, Afterimage Remover]
type = AfterImageTime
triggerall = 1
trigger1 = MoveType = H
trigger2 = StateNo = [0,40]
trigger3 = StateNo = [52,199]
trigger4 = (StateNo = [200,749]) && PrevstateNo != 50
trigger5 = Stateno = [5000,5999]
trigger6 = Stateno = [1000,1999]
time = 0

[State -2, P2 Safe Fall]
type= targetstate
trigger1= numtarget=1
trigger1= target,command="recovery"
trigger1= target,pos y>=-20 && target,vel y>0
trigger1= target,alive && target,hitfall && target,gethitvar(fall.recover)
trigger1= target,stateno=5030 || target,stateno=5035 || target,stateno=5050 || target,stateno=5071
value= 5205
ignorehitpause= 1

[State 13000, EnvColor]
type = EnvColor
trigger1 = ProjHit2010 = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
;----------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Juggle system (Based of [E]'s method) 
;---------------------------------------------------------------------------
[State -2, Air Limiter]
type = varSet
triggerall = var(56) = 0
triggerall = NumTarget
trigger1 = Target,StateType = A  
trigger2 = Target,StateNo = [120,155]  
var(40) = 1
ignorehitpause = 1

[State -2, Air Limiter]
type = varSet
trigger1 = (p2stateno = [5020,5040]) && var(16) < 1
trigger1 = (p2stateno = [154,155]) && var(16) < 1
trigger1 = (p2stateno = 5070)
var(40) = 1
ignorehitpause = 1

[State -2, Air Limiter]
type = varSet
trigger1 = var(40) > 0
trigger1 = enemynear,StateType != A  
var(40) = 0
ignorehitpause = 1

[State -2, ground combos]
type = AssertSpecial
triggerall = NumTarget
trigger1 = Target,StateType != A  
trigger2 = Target,StateNo = 1505  
flag = NoJuggleCheck

[State -2, juggle decreasing]
type = varSet
trigger1 = var(16)>0
var(16) = var(16)-1
ignorehitpause = 0

[State -2, juggle set basics]
type= varSet
triggerall= movehit = 1
trigger1 = stateno = [200,235] 
trigger2 = stateno = [400,635]
var(16)= ifelse(var(56) = 1,6,0)

[State -2, juggle set CD]
type = varSet
triggerall = movehit = 1
trigger1 = stateno = 240
trigger2 = stateno = 640
var(16) = ifelse(var(56) = 1,100,0)

[State -2, Launchers]
type = varSet
triggerall = movehit = 1 
trigger1 = stateno = 1011
trigger2 = stateno = [1030,1034]
var(16) = 60
ignorehitpause = 1

[State -2, Launchers]
type = varSet
triggerall = movehit = 1 
trigger1 = stateno = 1032
var(16) = 100
ignorehitpause = 1

[State -2, ground combos]
type = varSet
trigger1 = ProjContact1000 = 1
trigger2 = ProjContact3010 = 1
var(16) = 100
ignorehitpause = 1

[State -2, Launchers]
type = varSet
triggerall = movehit = 1 
trigger1 = stateno = 1060 
var(16) = 40
ignorehitpause = 1

[State -2, Launchers]
type = varSet
triggerall = movehit = 1 
trigger1 = stateno = [1300,1305] 
var(16) = 70
ignorehitpause = 1

[State -2, Launchers]
type = varSet
triggerall = movehit = 1 
trigger1 = stateno = 1010
var(16) = 0
ignorehitpause = 1

[State -2, Launchers]
type = varSet
trigger1 = p2stateno = [10900,10904]
var(16) = 500

[State -2, Killers]
type = varSet
trigger1 = (stateno = [200,235]) && movehit = 1  
var(16) = 0
ignorehitpause = 1

[State -2, juggle checking regular stuff]
type = AssertSpecial
triggerall = (p2stateno != [5070,5079])
triggerall = var(16) > 0 
trigger1 = stateno = [200,235] 
trigger2 =  stateno = [400,635]
trigger3 = stateno = [250,260] 
trigger4 = stateno = 240
trigger5 = stateno = [640,699]
trigger6 = stateno = [1000,1099]
trigger7 = stateno = [3000,3029]
flag = NoJuggleCheck

[State -2, juggle checking always juggle]
type = AssertSpecial
trigger1 = stateno = 3010
trigger2 = stateno = 3030
flag = NoJuggleCheck
;================================================================================
; ------- COUNTER HIT (Vans' Code, Based on Sander's Method) --------
;===============================================================================
[State -2, VarSet];Checks if opponent is in attack state
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = a
var(56) = 1
ignorehitpause = 1

[State -2, VarSet];This resets the condition if counter not succesful and succesful
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = i || var(57) >= 1  ;Enemy is Idle | Counter was Succesful
trigger2 = var(57) > 10 && enemy, movetype = h  ;10 ticks passed & enemy is on gethit state
var(56) = 0
ignorehitpause = 1

[State -2, VarSet];Counter Hit Succesful
type = VarSet
trigger1 = var(56) = 1 && movehit ;Counter Check Ok, Move Hit Succesfully.
trigger1 = stateno != [190,199] ;Does not activate during intros.
trigger1 = stateno != [900,979] ;Does not activate during throws.
trigger1 = stateno != [3000,3099] ;Don't activate during throws.
trigger1 = stateno != [3700,3799] ;Don't activate during throws.
trigger1 = stateno != [1030,1049] ;Don't activate during throws.
trigger2 = var(56) = 1 && projhit = 1  ;Counter Check Ok, Projectile Hit Succesfully.
var(57) = 1
ignorehitpause = 1

[State -2, VarAdd];Counter Hit Timer
type = VarAdd
trigger1 = var(57) >= 1 ;Counter was succesful
var(57) = 1
ignorehitpause = 1

[State -2, VarSet];Counter Hit Reset
type = VarSet
trigger1 = var(57) >= 22 && movehit ;Reset if 22 ticks passed and move hit
trigger2 = p2movetype != h ;Reset if P2 is no longer in gethit state
trigger3 = movetype = h ;Reset if P1 is getting hit
trigger4 = var(57) >= 22 && projhit = 1 ;Reset if 22 ticks passed and projectile hit
var(57) = 0
ignorehitpause = 1

[State -2, AssertSpecial];This will award free juggles for Counter Hit.
type = AssertSpecial
triggerall = (p2stateno != [5070,5079])
trigger1 = var(57) > 0
flag = nojugglecheck

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = numenemy
triggerall = stateno != [800,899] ;Does not activate during intros.
triggerall = stateno != [3001,3999] ;Don't activate during Hyper Moves
triggerall = stateno != [1030,1049] ;Don't activate during throws.
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = var(56) = 1 && movehit  ;Move hit, Ok
trigger2 = var(56) = 1 && projhit = 1 ;Projectile hit, Ok
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [800,979] ;Does not activate during throws.
triggerall = stateno != [1030,1049] ;Don't activate during throws.
triggerall = stateno != [3003,3999] ;Don't activate during Hyper Moves
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 13000
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [800,979] ;Does not activate during throws.
triggerall = stateno != [1030,1049] ;Don't activate during throws.
triggerall = stateno != [3003,3999] ;Don't activate during Hyper Moves
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 13001
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [800,979] ;Does not activate during throws.
triggerall = stateno != [1030,1049] ;Don't activate during throws.
triggerall = stateno != [3003,3999] ;Don't activate during Hyper Moves
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 24000
pos = 2,106+4 ;106 is the correct offset, +2 to be aligned with OrochiKOF's
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [800,979] ;Does not activate during throws.
triggerall = stateno != [1030,1049] ;Don't activate during throws.
triggerall = stateno != [3003,3999] ;Don't activate during Hyper Moves
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
anim = 24001
pos = -69,106+4
postype = right  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
;================================================================================
; ------- DAMAGE SCALING (POTS' Code) --------
;===============================================================================
[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall = var(36)
trigger1= numenemy
trigger1 = enemynear, gethitvar(hitcount) >= 3 && enemynear, gethitvar(hitcount) < 5
value= 0.75*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall = var(36)
trigger1= numenemy
trigger1 = enemynear, gethitvar(hitcount) >= 5 && enemynear, gethitvar(hitcount) < 8
value= 0.5*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall = var(36)
trigger1= numenemy
trigger1 = enemynear, gethitvar(hitcount) >= 9
value= 0.25*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
[State -2, Damage Dampener]; Full damage
type= attackmulset
triggerall= numenemy
trigger1= enemynear,movetype!=H || (enemynear,stateno=[120,155])
trigger2 = enemynear, gethitvar(hitcount) < 3
trigger3 = !var(36) && !var(51)
value= 1.0*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
;================================================================================
; ------- KOF Cornerpush System by Vans --------
;===============================================================================
[State -2, Superpause Check]
type = VarAdd
trigger1 = Var(6)
var(6) = -1

[State -2, Reset Time counter]
type = VarSet
trigger1 = movecontact = 1
var(12) = 0

[State -2, Accel]
type = VarSet
triggerall = roundstate = 2
triggerall = Var(6) <= 0
triggerall = numtarget >= 1
trigger1 = target, hitshakeover
fvar(6) = (target, gethitvar(xvel)*exp((-0.1886)*((var(12)))))

[State -2, Push]
type = PosAdd
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = numtarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = ProjContact = 0, < 50 
triggerall = stateno != [800,949]
triggerall = stateno != [956,979]
triggerall = stateno != 1070
triggerall = numhelper(10010) != 1
triggerall = enemynear,statetype != A
trigger1 = Statetype != A
x = ifelse(facing = -1,fvar(6),-fvar(6))

[State -2, Increase]
type = VarSet
triggerall = numtarget >= 1
triggerall = target, hitshakeover
trigger1 = Var(6) <= 0
trigger1 = var(12)
var(12) = var(12)+1

[State -2, Time counter]
type = VarSet
trigger1 = !var(12)
trigger1 = fvar(6)
var(12) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(6)
value = 1

[State -2, Drop]
type = VarSet
triggerall = fvar(6)
trigger1 = !numtarget
trigger2 = projcontact = 1
trigger3 = movecontact = 1
fvar(6) = 0
ignorehitpause = 1

[State -2, Drop]
type = VarSet
triggerall = fvar(8)
trigger1 = !numtarget
trigger2 = projcontact = 1
trigger3 = numtarget >= 1 && target, gethitvar(xvel) = 0
var(17) = 0
;================================================================================
; ------- Explosion System (Vans Code)--------
;===============================================================================
[State 1000: Helper]
type = helper
triggerall = !NumHelper(12504)
trigger1 = numtarget(1100) && movehit
helpertype = Normal
name = "Small Expl"
id = 12504
pos = 0, 0 ;50
postype = p2
facing = 1
stateno = 12504
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0
ignorehitpause = 1

;================================================================================
; ------- Slowmotion System By CCIronMugen --------
;===============================================================================
[State -2]
type = null
trigger1 = projhit1000 = 1
var(18) = 14

[State -2]
type = varset
triggerall = numtarget(2030)
trigger1 = target(2030), stateno = 2132
var(18) = 10

[State -2]
type = VarAdd
trigger1 = var(18) != 0
trigger1 = (gametime%3) = 0
var(18) = -1

[State -2]
type = Pause
triggerall = (gametime%3) = 0
trigger1 = var(18) != 0
time = 1
movetime = 0
;================================================================================
; ------- Throw Limitation by OrochiKOF97 --------
;===============================================================================
[State -2, Guard Var]
type = VarSet
trigger1 = stateno = [200,505] ; Non-Air basic moves states.
trigger1 = moveguarded > 0 ; This is the key : checks if opponent has guarded a basic attack
trigger2 = stateno = [600,710] ; Air Basic Moves
trigger2 = movecontact > 0 ; This includes both moveguarded & movehit as well
v = 19
value = 30
persistent = 0
ignorehitpause = 1

[State -2, Guard Var 2]
type = VarAdd
triggerall =!var(6)
trigger1 = var(19) > 0
var(19) = -1
ignorehitpause = 1

[State -2, Guard Var 3]
type = VarSet
triggerall = !var(6)
trigger1 = var(19) < 0
var(19) = 0
persistent = 0
ignorehitpause = 1
;--------------------------------------------------------------------------------------
;--------------------------------------------------------------------------------------
[Statedef 5900]
type = S

[State 1000: Helper]
type = Helper
triggerall = anim = 0 && numhelper(1) = 0
trigger1 = !time
helpertype = Normal
id = 1
pos = 0, 0 ;50
postype = p1
facing = 1
stateno = 3
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for first round
type = ChangeState
trigger1 = roundsexisted = 0
trigger2 = roundno = 1
value = 190

[State 192]
type=changestate
triggerall = roundno > 1 
trigger1 = p2name = "K'" && enemy,roundsexisted = 0
trigger2 = p2name = "K9999" && enemy,roundsexisted = 0
trigger3 = p2name = "Nameless" && enemy,roundsexisted = 0
value = 192
;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------
[Statedef -3]


;===============================================================================
;AINwp[
;===============================================================================
[State -3]
Type = null;Helper             ;AI\h~OFF
;                                 AIXCb`OAIN
;                                 uType = HelpervXB
Trigger1 = NumHelper(90000) = 0
Trigger1 = RoundState = 2
Trigger1 = Alive
Trigger1 = Var(59) = 0
Trigger1 = PrevStateNo = 5900 || PrevStateNo = [190,193]
HelperType = Normal
Name = "AI"
StateNo = 90000
ID = 90000
Pos = 0,0
KeyCtrl = 1
PauseMoveTime= 99999999
SuperMoveTime= 99999999

;===============================================================================
;EhJnmFwp[
;===============================================================================
[State -3, Round Start]
Type = Helper
triggerall = NumHelper(85000) = 0
trigger1 = Roundstate <= 2
trigger1 = EnemyNear(var(45)),numHelper > 0
trigger1 = ctrl && var(58) = 0
HelperType = Normal
Name = "Round"
StateNo = 85000
ID = 85000
Pos = 0,-120
Keyctrl = 0
PauseMoveTime= 99999999
SuperMoveTime= 99999999

;===============================================================================
;AIx
;===============================================================================
[State -3, AI]
type = varset
triggerall = var(59) = 0
Triggerall = RoundState = [1,2]
trigger1 = Command = "AI0"
trigger2 = Command = "AI1"
trigger3 = Command = "AI2"
trigger4 = Command = "AI3"
trigger5 = Command = "AI4"
trigger6 = Command = "AI5"
trigger7 = Command = "AI6"
trigger8 = Command = "AI7"
trigger9 = Command = "AI8"
trigger10 = Command = "AI9"
trigger11 = Command = "AI10"
trigger12 = Command = "AI11"
trigger13 = Command = "AI12"
trigger14 = Command = "AI13"
trigger15 = Command = "AI14"
trigger16 = Command = "AI15"
trigger17 = NumHelPer(90000) > 0 && RoundState = 2
trigger17 = HelPer(90000),Var(59) > 0
;trigger18 = 1         ; AINXCb`
;                          AI
;                          utrigger33vu;vB

;                           AI start switch
;                           Please delete ";" in the "trigger33" back 
                            when you want to start AI at once.
;

V = 59
Value = 5              ; AIx
;                         u1`5v\

;                          Please adjust it here. I can change it to 1-5
;                          weak  1 2 3 4 5  Strong

;===============================================================================
;I GB
;(Set End.Please do not touch the under from this.) 
;===============================================================================
;VAR

;fvar(20) = dxv
;var(0)  = ~
;var(1)  = ~
;var(2)  = ~
;var(3)  = 
;var(4)  = 
;var(5)  = 
;var(6)  = 
;var(7)  = 
;var(8)  = 
;var(9)  = 
;var(11) = 
;var(12) = 
;var(13) = 
;var(15) = 
;var(16) = ~
;var(21) = 
;var(22) = 
;var(24) = iU Lip
;var(25) = iU Lip
;var(27) = ~
;var(28) = JE^[VFs
;var(29) = ~
;var(30) = ~
;var(31) = ~
;var(32) = ~
;var(33) = wp[
;var(34) = ^bOwp[mF
;var(35) = wp[
;var(36) = ~
;var(37) = ^bOp[gi[
;var(38) = ^bOGl
;var(39) = Uh
;var(40) = ~
;var(41) = _ChuX R{
;var(42) = CXs R{
;var(43) = XCb`
;var(44) = 
;var(45) = ^bOmF
;var(46) = WvU
;var(47) = XL\h~ 2
;var(48) = XL\h~ 1
;var(49) = ~
;var(50) = ~
;var(51) = ~
;var(52) = NU
;var(53) = K[hX^CX
;var(54) = HitmF
;var(55) = ~
;var(56) = ~
;var(57) = ~
;var(58) = wp[
;var(59) = AIN

;=============================================================================
[State -2, fobN(mF)]
Type = DisplayToClipBoard
Trigger1 = 1
Text = "AI=%d,var(43)=%d,var(42)=%d,var(54)=%d,var(41)=%d \n"
Params = var(59),var(43),var(42),var(54),var(41)
IgnoreHitPause = 1

[State -2, mFfobN]
type = AppendToClipboard
trigger1 = 1
text =  "P2X:%f,P2Y:%f,Vx%f,Vy%f,Py%d \n"
params = P2BodyDist x,P2BodyDist y,vel x,vel y,facing;Pos y
IgnoreHitPause = 1

[State -3, [mFfobO]
type = null;DisplayToClipBoard
;Trigger1 = (NumHelper(55000) && NumHelper(60000))
trigger1 = 1
text = "helper(55000),rootdist x = %f\nhelper(60000),rootdist x = %f"
params = (helper(55000+id),RootDist X), (helper(60000+id),RootDist X)
ignorehitpause = 1

;===============================================================================
[state -3,E];[wp[
type = Helper
trigger1 = !NumHelper(55000+id)
Helpertype = Normal
Name = "Right"
Postype = right
Facing = -1
Stateno = 55000
ID = 55000+id
Pausemovetime = 0
Persistent = 0
Ignorehitpause = 1
Keyctrl = 0
Ownpal = 1


[State -3];]v
type = changestate
trigger1= ishelper
trigger1= ishelper(55000+root,id)
trigger1= stateno!=55000
value = 55000


[state -3,];[wp[
Type = Helper
Trigger1 = !NumHelper(60000+id)
Helpertype = Normal
Name = "Left"
Postype = left
Facing = 1
Stateno = 60000
ID = 60000+id
Pausemovetime = 0
Persistent = 0
Ignorehitpause = 1
Keyctrl = 0
Ownpal = 1


[State -3];]v
type = changestate
trigger1= ishelper
trigger1= ishelper(60000+root,id)
trigger1= stateno!=60000
value = 60000

;===============================================================================
;AIpdxv

[state -2, yaccel]
type = varset
trigger1 = fvar(20) != Enemynear,const(movement.yaccel)
trigger1 = Enemynear,stateno != [5000,5210]
trigger1 = Enemynear,statetype = A
FV = 20
value = enemynear,const(movement.yaccel)
ignorehitpause = 1

[state -2, yaccel]
type = varset
trigger1 = fvar(20) != EnemyNear,GetHitVar(yaccel)
trigger1 = Enemynear,stateno = [5000,5210]
trigger1 = Enemynear,statetype = A
FV = 20
value = EnemyNear,GetHitVar(yaccel);(yaccell)
ignorehitpause = 1

;G
[state -2, yaccel]
type = varset
trigger1 = fvar(20) != 0
trigger1 = Enemynear,statetype != A
FV = 20
value = 0
ignorehitpause = 1

;===============================================================================
;^bOwp[mF
[State -3, Helper Tag]
Type = VarSet
trigger1 = TeamMode = Simul && var(38) = 0
trigger1 = Roundstate < 2
trigger1 = NumEnemy >= 2
V = 34
Value = EnemyNear(0),Const(size.head.pos.y)

;===============================================================================
;wp[
[State -3, Helper Start]
Type = VarSet
triggerall = var(58) = 0 && var(44) > 800
triggerall = var(35) = 0
trigger1 = ctrl || EnemyNear(var(45)),ctrl || (stateNo = [18,19])
trigger1 = numHelper(85000) = 1
trigger1 = Helper(85000),time >= 2
V = 58
Value = EnemyNear(var(45)),NumHelper


;wp[ mF
[State -3, Helper Reconfirmation]
Type = VarSet
triggerall = Roundstate = 2
trigger1 = var(35) = 1
V = 58
Value = EnemyNear(var(45)),NumHelper


;wp[ Zbg
[State -3, Helper Start R]
Type = VarSet
trigger1 = Roundstate != 2
V = 58
Value = 0

;===============================================================================
;wp[
[State -3, Helper Watch]
Type = VarSet
triggerall = Roundstate = 2
trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = EnemyNear(var(45)),NumHelper < Var(58)
trigger2 = TeamMode = Simul && var(38) = 1
trigger2 = EnemyNear(var(45)),NumHelper < Var(58)
trigger3 = TeamMode = Simul && var(38) = 0
trigger3 = EnemyNear(var(45)),Const(size.head.pos.Y) != var(34)
V = 35
Value = 1


;wp[ Zbg
[State -3, Helper Watch R]
Type = VarSet
triggerall = Roundstate = 2
trigger1 = EnemyNear(var(45)),time = 2
V = 35
Value = 0

;===============================================================================
;wp[ 1
[State -3, Helper Attack 1]
Type = Varset
triggerall = var(59) >= 0
triggerall = var(33) = [-1,0]
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = EnemyNear(var(45)),stateNo >= 1000
trigger1 = !EnemyNear(var(45)),hitdefattr = SCA,NA
trigger1 = EnemyNear(var(45)),numHelper > var(58)
V = 33
Value = EnemyNear(var(45)),stateNo


;wp[ 2
[State -3, Helper Attack 2]
Type = Varset
triggerall = var(59) >= 0
triggerall = var(33) >= -1
trigger1 = stateNo = [35,40]
trigger2 = stateNo = 710
V = 33
Value = -1


;wp[ Zbg
[State -3, Helper Movement R]
Type = Varset
triggerall = var(59) >= 0
triggerall = var(33) > 0 || var(33) = -1
trigger1 = EnemyNear(var(45)),ctrl && EnemyNear(var(45)),time >= 2
trigger2 = EnemyNear(var(45)),stateNo < 1000
V = 33
Value = -1

;===============================================================================
;iK[hX^CX

;iUiK[hs\L
[State -3, Guard type Stand 1]
Type = varSet
triggerall = var(59) >= 0
trigger1 = Roundstate < 2
V = 25
Value = -1


;iUiK[hs\L
[State -3, Guard type Stand 2]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
trigger1 = statetype = S && (PrevStateNo = [120,159])
trigger1 = EnemyNear(var(45)),statetype = S || EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = EnemyNear(var(45)),hitdefattr = SCA,NA,SA,HA
trigger1 = stateNo = [5000,5070]
V = 25
Value = EnemyNear(var(45)),stateNo


;iUiK[hs\L
[State -3, Guard type Crouch 1]
Type = varSet
triggerall = var(59) >= 0
trigger1 = Roundstate < 2
V = 24
Value = -1


;iUiK[hs\L
[State -3, Guard type Crouch 2]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
trigger1 = statetype = C && (PrevStateNo = [120,159])
trigger1 = EnemyNear(var(45)),statetype = C || EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = EnemyNear(var(45)),hitdefattr = SCA,NA,SA,HA
trigger1 = stateNo = [5000,5070]
V = 24
Value = EnemyNear(var(45)),stateNo


;K[hX^CX Zbg
[State -3, Guard type R1]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(25) >= 1
trigger1 = TeamMode = Simul || TeamMode = Turns
trigger1 = Roundstate != 2
V = 25
Value = 0


;K[hX^CX Zbg
[State -3, Guard typr R2]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(24) >= 1
trigger1 = TeamMode = Simul || TeamMode = Turns
trigger1 = Roundstate != 2
V = 24
Value = 0

;===============================================================================
;XCb`
[State -3, No shich]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(43) = 0
trigger1 = var(54) = 0 && var(42) = 0 && (var(46) = [0,5]) && var(39) != 5
V = 43
Value = 1


;XCb` Zbg
[State -3, No shich R]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(43) = 1
trigger1 = var(54) >= 1 || var(42) >= 1 || (var(46) = [6,7]) || var(39) = 5
V = 43
Value = 0

;-------------------------------------------------------------------------------
;K[hX^CX

;iU i
[State -3, Guard Change 1]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(53) = 0
trigger1 = EnemyNear(var(45)),stateNo = var(24)
V = 53
Value = 1


;iU i
[State -3, Guard Change 2]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(53) = 0
trigger1 = EnemyNear(var(45)),stateNo = var(25)
V = 53
Value = 2


;K[hX^CX Zbg
[State -3, Guard Change R]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(53) >= 1
trigger1 = EnemyNear(var(45)),ctrl
trigger2 = (stateNo = [5000,5050]) || movetype = A
trigger3 = Roundstate != 2
V = 53
Value = 0

;-------------------------------------------------------------------------------
;HitmF

;CXs 
[State -3, Hit Setting 1]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(54) >= 0 && (var(54) != [7,8])
trigger1 = stateNo = 1032
trigger1 = movehit
V = 54
Value = 1


;WvU
[State -3, Hit Setting 2]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(54) >= 0 && Power >= 2000
trigger1 = (stateNo = 240 || stateNo = 640) && movehit
trigger1 = EnemyNear(var(45)),statetype = A
V = 54
Value = 2


;_ChV[g 
[State -3, Hit Setting 3]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(54) = 0
trigger1 = stateNo = 1040 && time = [1,5]
trigger1 = p2bodydist Y >= 60
V = 54
Value = 3


;_ChV[g 
[State -3, Hit Setting 4]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(54) = 0
trigger1 = stateNo = 1040 && time = [1,5]
trigger1 = p2bodydist Y < 60
V = 54
Value = 4


;_ChV[g Hit 2Q[W
[State -3, Hit Setting 5]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(54) >= 0 && (var(54) != [5,6])
trigger1 = Power >= 2000
trigger1 = Projhittime(1040) = 1
trigger1 = random <= var(59)*90 || var(59) >= 5
trigger1 = EnemyNear(var(45)),statetype = A
V = 54
Value = 5


;_ChuX
[State -3, Hit Setting 6]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(54) >= 0
trigger1 = stateNo = 1000
trigger1 = Projhittime(1000) = 1
trigger1 = EnemyNear(var(45)),statetype = A
V = 54
Value = 6


;CXs
[State -3, Hit Setting 7]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(54) >= 0
trigger1 = stateNo = 1033
trigger1 = movehit && EnemyNear(var(45)),stateNo = [5000,5100]
trigger1 = EnemyNear(var(45)),statetype = A
V = 54
Value = 7



;CXs U(X^h) & 
[State -3, Hit Setting 8]
Type = varSet
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(54) >= 0 && Power >= 2000
trigger1 = stateNo = 1031
trigger1 = Projhittime(1030) = 1
trigger1 = EnemyNear(var(45)),statetype = A
;trigger2 = stateNo = [800,801]
V = 54
Value = 8


;O]U
[State -3, Hit Setting 7]
Type = VarSet
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(54) = 0
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
trigger1 = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
trigger1 = StateNo = 710 && time >= 32
trigger1 = p2bodydist X <= 40
trigger2 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger2 = EnemyNear(var(45)),movetype = A
trigger2 = EnemyNear(var(45)),ctrl = 0
V = 54
Value = 9


;HitmF Zbg
[State -3, Hit Setting R]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(54) >= 1
trigger1 = (stateNo = [3000,3050])
trigger2 = var(54) = 1 && (stateNo = 1011 || stateNo = 640)
trigger3 = (var(54) = 2 || var(54) = 7) && ((stateNo = 240 && AnimTime = 0) || (stateNo = 1031 && AnimTime = 0))
trigger4 = (var(54) = [3,4]) && statetype != A
trigger5 = (var(54) = [5,6]) && EnemyNear(var(45)),statetype != A
trigger6 = var(54) = 6 && (stateNo = [1010,1011])
trigger7 = ((var(54) != [3,4]) && var(54) != 9) && (EnemyNear(var(45)),movetype != H)
trigger8 = var(54) = 9 && (stateNo = 18 || EnemyNear(var(45)),movetype = H || statetype = A)
trigger9 = TeamMode = Simul && stateNo = 0 && time >= 30
trigger10 = (var(54) != [3,4]) && EnemyNear(var(45)),ctrl
trigger11 = movetype = H || statetype = L
trigger12 = Roundstate != 2
V = 54
Value = 0

;-------------------------------------------------------------------------------
;Wv

;_bV Wvz
[State -3, Jump 1]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(46) >= 0
trigger1 = stateNo = 111
V = 46
Value = 1


;_bV Wvz
[State -3, Jump 2]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(46) >= 0
trigger1 = stateNo = 112
V = 46
Value = 2

;_bV Wv
[State -3, Jump 3]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(46) >= 0
trigger1 = stateNo = 39 || stateNo = 37
V = 46
Value = 3


;_bV Wv
[State -3, Jump 4]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(46) >= 0
trigger1 = stateNo = 38 || stateNo = 5210 || ((var(59) = [1,2]) && stateNo = 40)
V = 46
Value = 4


;obNWv
[State -3, Jump 5]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(46) = 0
trigger1 = stateNo = 36
V = 46
Value = 5


;WvU HitmF
[State -3, Jump 6]
Type = VarSet
triggerall = var(59) >= 0
triggerall = (var(46) = [0,5])
trigger1 = (stateNo = [600,630]) && movehit
trigger1 = EnemyNear(var(45)),statetype != A
V = 46
Value = 6


;WvU HitmF
[State -3, Jump 7]
Type = VarSet
triggerall = var(59) >= 0
triggerall = (var(46) = [0,5])
trigger1 = (stateNo = [600,640]) && moveGuarded
trigger1 = EnemyNear(var(45)),statetype != A
V = 46
Value = 7


;Wv Zbg
[State -3, Jump R]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(46) >= 1
trigger1 = (stateNo = [200,499]) || (stateNo = [1000,1005]) || (stateNo = [3000,3050])
trigger2 = (var(46) = [3,5]) && statetype != A && stateNo != [35,40]
trigger3 = (var(46) = [6,7]) && (EnemyNear(var(45)),ctrl || EnemyNear(var(45)),statetype = A || stateNo = 1031)
trigger4 = TeamMode = Simul && stateNo = 0 && time >= 30
trigger5 = EnemyNear(var(45)),statetype = L && EnemyNear(var(45)),stateNo != 5120
trigger6 = statetype = L || movetype = H
trigger7 = Roundstate != 2
V = 46
Value = 0

;-------------------------------------------------------------------------------
;CXs R{ t[YRv[V
[State -3, Ray Spin Combo 1]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 4
triggerall = var(42) = 0 && var(54) = 1
triggerall = Power >= 3000
trigger1 = Life >= Floor(LifeMax/2) && random <= var(59)*90
V = 42
Value = 1


;CXs R{ U
[State -3, Ray Spin Combo 2]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 2
triggerall = var(42) = 0 && var(54) = 1
trigger1 = random <= var(59)*70
trigger2 = var(59) >= 4 && Power >= 2000
trigger2 = random <= var(59)*100 || var(59) >= 5
V = 42
Value = 2


;CXs R{ NEoCc
[State -3, Ray Spin Combo 3]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 2
trigger1 = var(42) = 0 && var(54) = 1
V = 42
Value = 3


;CXs R{ U
[State -3, Ray Spin Combo 4]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 2
trigger1 = var(42) = 0 && var(54) = 7
trigger1 = NumHelper(55000+id) && NumHelper(60000+id)
trigger1 = Helper(55000+id),RootDist X <= 180 && facing = 1 || Helper(60000+id),RootDist X <= 180 && facing = -1
trigger1 = stateNo = [1033,1035]
V = 42
Value = 4


;CXs R{ Zbg
[State -3, Ray Spin Combot R]
Type = Varset
triggerall = var(59) >= 0
triggerall = var(42) >= 1
trigger1 = stateNo = 3030 || stateNo = 1010 || stateNo = 240
trigger2 = var(54) != 1 && var(54) != 7
V = 42
Value = 0

;-------------------------------------------------------------------------------
;_ChuX R{ t[YGNXL[V [
[State -3, Diamond Breath Combo 1]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 4
trigger1 = EnemyNear(var(45)),BackEdgeBodyDist <= 20
trigger1 = var(41) = 0 && var(54) = 6
trigger1 = Power >= 2000
V = 41
Value = 1


;_ChuX R{ t[YGNXL[V
[State -3, Diamond Breath Combo 1]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 4
trigger1 = Power >= 2000
trigger1 = var(41) = 0 && var(54) = 6
V = 41
Value = 2


;_ChuX R{ NEoCc
[State -3, Diamond Breath Combo 1]
Type = Varset
triggerall = var(59) = 0 || var(59) >= 2
trigger1 = EnemyNear(var(45)),BackEdgeBodyDist <= 20
trigger1 = var(41) = 0 && var(54) = 6
V = 41
Value = 3


;_ChuX R{ Zbg
[State -3, Diamond Breath Combo R]
Type = Varset
triggerall = var(59) >= 0
triggerall = var(41) >= 1
trigger1 = EnemyNear(var(45)),statetype != A
trigger2 = var(54) != 6
trigger3 = Roundstate != 2
V = 41
Value = 0


;-------------------------------------------------------------------------------
;JE^[VFs
[State -3, Counter Shell Miss]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(28) = 0
trigger1 = PrevStateNo = 1020
trigger1 = movetype = H && time = 2
V = 28
Value = 1


;JE^[VFs
[State -3, Counter Shell Miss R]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(28) = 1
trigger1 = TeamMode = Simul || TeamMode = Turns
trigger1 = Roundstate != 2
V = 28
Value = 0

;-------------------------------------------------------------------------------
;NU
[State -3, Evasion 1]
Type = VarSet
triggerall = var(59) >= 0
trigger1 = stateNo = 5120
trigger2 = stateNo = 5201
v = 52
value = 80


;NU
[State -3, Evasion 2]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(52) = 0
trigger1 = stateNo = 5210
v = 52
value = 980


;NU Zbg
[State -3, Evasion R 1]
type = varadd
trigger1 = var(52) > 0
var(52) = -1


;NU Zbg
[State -3, Evasion R 2]
type = varset
triggerall = var(52) > 0
trigger1 = stateNo = 5110
trigger2 = (var(52) = [1,80]) && (stateNo = [150,159])
trigger3 = statetype != A && movetype = A
trigger4 = Roundstate != 2
v = 52
value = 0

;-------------------------------------------------------------------------------
;XL\h~
[State -3, Guard Attack]
Type = Varset
triggerall = var(59) >= 0
trigger1 = StateNo = [150,159]
V = 48
Value = 30


;XL\h~
[State -3, Guard Attack R1]
Type = Varadd
triggerall = var(59) >= 0
trigger1 = var(48) >= 1
V = 48
Value = -1


;XL\h~ R
[State -3, Guard Attack R2]
Type = VarSet
triggerall = var(59) >= 0
triggerall = Var(48) >= 1
trigger1 = (stateNo = [200,499]) && (movecontact || AnimTime = -1)
trigger2 = EnemyNear(var(45)),ctrl
trigger3 = (stateNo = [5000,5270]) || statetype = L
trigger4 = Roundstate != 2
V = 48
Value = 0

;-------------------------------------------------------------------------------
;XL\h~ 2
[State -3, Guard Attack2]
Type = varSet
triggerall = var(59) >= 0
trigger1 = var(48) > 0
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = EnemyNear(var(45)),moveGuarded
v = 47
Value = EnemyNear(var(45)),stateNo


;XL\h~ 2 Zbg
[State -3, Guard Attack2 R1]
Type = varSet
triggerall = var(59) >= 0
triggerall = var(47) >= 1
trigger1 = Movetype = A || statetype = A
trigger2 = EnemyNear(var(45)),ctrl
trigger3 = (stateNo = [5000,5270]) || statetype = L
trigger4 = Roundstate != 2
V = 47
Value = -1

;-------------------------------------------------------------------------------


;
[State -3, Limitation 1]
Type = Varset
triggerall = var(59) >= 0
triggerall = (var(44) = [0,100])
trigger1 = stateNo = 195
V = 44
Value = 200


;Wv
[State -3, Limitation 2]
Type = Varset
triggerall = var(59) >= 0
triggerall = (var(44) = [0,100])
trigger1 = statetype = A && ctrl
trigger2 = statetype = A && (stateNo = [120,159])
V = 44
Value = 100


;K[hLZ
[State -3, Limitation 3]
Type = Varset
triggerall = var(59) >= 0
trigger1 = PrevStateNo = 150 || PrevStateNo = 152
trigger1 = stateNo = 245
trigger2 = stateNo = 1400 || stateNo = 3052
V = 44
Value = 800


;wp[
[State -3, Limitation 4]
Type = Varset
triggerall = var(59) >= 0
trigger1 = Roundstate = 1
trigger2 = Roundstate = 2 && var(35) = 1
trigger2 = EnemyNear(var(45)),numHelper > 0
V = 44
Value = 4000


; Zbg 1
[State -3, Limitation R1]
Type = Varadd
triggerall = var(59) >= 0
trigger1 = var(44) >= 1
V = 44
Value = -1


; Zbg 2
[State -3, Limitation R2]
Type = Varset
triggerall = var(59) >= 0
triggerall = var(44) >= 1
trigger1 = var(44) > 800 && (var(58) > 0 || (var(58) = 0 && Roundstate = 2 && EnemyNear(var(45)),ctrl && EnemyNear(var(45)),time = 2))
trigger2 = var(44) > 800 && numHelper(85000) = 1
trigger2 = Helper(85000),time >= 3
trigger3 = var(44) < 800 && Roundstate != 2
V = 44
Value = 0

;===============================================================================
;^bOA
;===============================================================================
;^bOXCb`
[State -3, Tag]
Type = VarSet
Trigger1 = NumEnemy = 1
Trigger2 = NumEnemy = 2
Trigger2 = EnemyNear,Life > 0
V = 45
Value = 0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -3, Tag]
Type = VarSet
Trigger1 = NumEnemy > 1
Trigger1 = EnemyNear,Life = 0
V = 45
Value = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

;-------------------------------------------------------------------------------
;^bOGl
[State -3, Tag only]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(38) = 0
Trigger1 = NumEnemy = 1
Trigger2 = NumEnemy = 2
Trigger2 = EnemyNear(0),Life = 0 || EnemyNear(1),Life = 0
V = 38
Value = 1

;VOA^bOGl
[State -3, Tag only]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(38) = 1
triggerall = TeamMode = simul
Trigger1 = Roundstate != 2
V = 38
Value = 0

;-------------------------------------------------------------------------------
;^bOp[gi[ 1
; = TCh    = GTCh
[State -3, Tag Partner 1]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(37) >= 0
triggerall = TeamMode = Simul
triggerall = NumEnemy >= 2 && NumPartner >= 1 && Partner,Life > 0

;p[gi[GB 
trigger1 = Partner,Pos X - Pos X = [-90,90]
trigger1 = (Partner,Facing = 1 && Facing = 1)
trigger1 = (Enemynear(0),Pos X > Pos X && Enemynear(1),Pos X > Pos X)
trigger1 = (Enemynear(0),Pos X > Partner,Pos X && Enemynear(1),Pos X > Partner,Pos X)

trigger2 = Partner,Pos X - Pos X = [-90,90]
trigger2 = (Partner,Facing = -1 && Facing = -1)
trigger2 = (Enemynear(0),Pos X < Pos X && Enemynear(1),Pos X < Pos X)
trigger2 = (Enemynear(0),Pos X < Partner,Pos X && Enemynear(1),Pos X < Partner,Pos X)

;p[gi[GB 
trigger3 = Partner,Pos X - Pos X = [-140,140]
trigger3 = (Partner,Facing = -1 && Facing = 1)
trigger3 = (Enemynear(0),Pos X > Pos X && Enemynear(1),Pos X > Pos X)
trigger3 = (Enemynear(0),Pos X < Partner,Pos X && Enemynear(1),Pos X < Partner,Pos X)

trigger4 = Partner,Pos X - Pos X = [-140,140]
trigger4 = (Partner,Facing = 1 && Facing = -1)
trigger4 = (Enemynear(0),Pos X < Pos X && Enemynear(1),Pos X < Pos X)
trigger4 = (Enemynear(0),Pos X > Partner,Pos X && Enemynear(1),Pos X > Partner,Pos X)
V = 37
Value = 1



;^bOp[gi[ 2
; = TCh    = GTCh
[State -3, Tag Partner 2]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(37) >= 0
triggerall = TeamMode = Simul
triggerall = NumEnemy >= 2 && NumPartner >= 1 && Partner,Life > 0

;p[gi[GB     
trigger1 = Partner,Pos X - Pos X = [-90,90]
trigger1 = (Partner,Facing = 1 && Facing = 1)
trigger1 = (Enemynear(0),Pos X > Pos X && Enemynear(1),Pos X < Pos X)
trigger1 = (Enemynear(0),Pos X > Partner,Pos X && Enemynear(1),Pos X < Partner,Pos X)

trigger2 = Partner,Pos X - Pos X = [-90,90]
trigger2 = (Partner,Facing = -1 && Facing = -1)
trigger2 = (Enemynear(0),Pos X < Pos X && Enemynear(1),Pos X > Pos X)
trigger2 = (Enemynear(0),Pos X < Partner,Pos X && Enemynear(1),Pos X > Partner,Pos X)

;p[gi[GB     
trigger3 = Partner,Pos X - Pos X = [-140,140]
trigger3 = (Partner,Facing = -1 && Facing = 1)
trigger3 = (Enemynear(0),Pos X > Pos X && Enemynear(1),Pos X > Pos X)
trigger3 = (Enemynear(0),Pos X < Partner,Pos X && Enemynear(1),Pos X > Partner,Pos X)

trigger4 = Partner,Pos X - Pos X = [-140,140]
trigger4 = (Partner,Facing = 1 && Facing = -1)
trigger4 = (Enemynear(0),Pos X < Pos X && Enemynear(1),Pos X > Pos X)
trigger4 = (Enemynear(0),Pos X > Partner,Pos X && Enemynear(1),Pos X > Partner,Pos X)
V = 37
Value = 2


;^bOp[gi[ Zbg
[State -3, Tag Partner R]
Type = VarSet
triggerall = var(59) >= 0
triggerall = var(37) >= 1
triggerall = TeamMode = simul
triggerall = NumEnemy >= 2

trigger1 = NumPartner >= 1 && Partner,Life > 0
trigger1 = Partner,Pos X - Pos X < -90 || Partner,Pos X - Pos X > 90
trigger1 = (Partner,Facing = 1 && Facing = 1)

trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = Partner,Pos X - Pos X < -90 || Partner,Pos X - Pos X > 90
trigger2 = (Partner,Facing = -1 && Facing = -1)

trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = Partner,Pos X - Pos X < -140 || Partner,Pos X - Pos X > 140
trigger3 = (Partner,Facing = -1 && Facing = 1)

trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = Partner,Pos X - Pos X < -140 || Partner,Pos X - Pos X > 140
trigger4 = (Partner,Facing = 1 && Facing = -1)

trigger5 = NumPartner >= 1 && Partner,Life > 0
trigger5 = Partner,Pos X - Pos X < -50
trigger5 = (Partner,Facing = -1 && Facing = 1)

trigger6 = NumPartner >= 1 && Partner,Life > 0
trigger6 = Partner,Pos X - Pos X > 50
trigger6 = (Partner,Facing = 1 && Facing = -1)

trigger7 = NumPartner >= 1 && Partner,Life = 0
V = 37
Value = 0

;===============================================================================
;ZK[hXCb`
;===============================================================================
[State -3,iK[hp]
Type = VarSet
;~A ACAZCo[
Trigger1 = EnemyNear,Name = "millia"
Trigger1 = EnemyNear,StateNo = 1500
;C@Cgw
Trigger2 = EnemyNear,Name = "eddie"
Trigger2 = EnemyNear,StateNo = 1000 || EnemyNear,StateNo = 1050 || EnemyNear,NumHelper(1002); || EnemyNear,NumHelper(1001)
;C@Cgw
Trigger3 = EnemyNear,Name = "eddie"
Trigger3 = EnemyNear,StateNo = 1800 || EnemyNear,StateNo=1850
;GfB W K
Trigger4 = EnemyNear,Name = "eddie" || EnemyNear,Name = "jam"
Trigger4 = EnemyNear,StateNo = 210
;V XCfBO
trigger5 = EnemyNear,Name = "shin"
trigger5 = EnemyNear,StateNo = 1000
;IWi[ ubNz[
trigger6 = EnemyNear,Name = "original zero"
trigger6 = EnemyNear,StateNo = 3050
;[ ubNz[
trigger7 = EnemyNear,Name = "zero"
trigger7 = EnemyNear,StateNo = 3020 || EnemyNear,StateNo = 3050
;I` 
trigger8 = EnemyNear,Name = "orochi"
trigger8 = EnemyNear,StateNo = 2000
;~Y` 
trigger9 = EnemyNear,Name = "mizuchi"
trigger9 = EnemyNear,StateNo = 2200
; o
trigger10 = EnemyNear,Name = "mukai"
trigger10 = EnemyNear,StateNo = 1200
;}KL LK
trigger11 = EnemyNear,Name = "magaki"
trigger11 = EnemyNear,StateNo = 3000
var(39) = 1

;===============================================================================
;iK[hw
[State -3, Guard Name Stand]
Type = VarSet
;GGD
trigger1 = AutHorName = "muteki" || AutHorName = "Akutagawa"
trigger1 = EnemyNear,StateNo = 240
;eX^g P
trigger2 = EnemyNear,Name = "testa"
trigger2 = EnemyNear,StateNo = 205
;~AanduWbgandGfB K
trigger3 = EnemyNear,Name="millia" || EnemyNear,Name="BRIDGET" || EnemyNear,Name="eddie"
trigger3 = EnemyNear,StateNo = 215
;t@EXg HS
trigger4 = EnemyNear,Name = "faust"
trigger4 = EnemyNear,StateNo = 235
;Wj[WbNnEh
trigger5 = EnemyNear,Name = "johnny"
trigger5 = EnemyNear,StateNo = 1500 || EnemyNear,StateNo = [3500,3501]
;\ HS
trigger6 = EnemyNear,Name = "order-Sol=Badguy"
trigger6 = EnemyNear,StateNo = 432
;GfB K T
trigger7 = EnemyNear,Name = "eddie"
trigger7 = 0;(NumHelper(1600)&&(Helper(1600),StateNo = [1650,1659]))
;W {K
trigger8 = EnemyNear,Name = "jam"
trigger8 = EnemyNear,StateNo = 215
;VI {B
trigger9 = EnemyNear,Name = "Sion_Eltnam_Atlasia"
trigger9 = EnemyNear,StateNo = [240,241]
;s i
trigger10 = EnemyNear,Name = "natsumi"
trigger10 = EnemyNear,StateNo = 230
;bN iR
trigger11 = EnemyNear,Name = "rock"
trigger11 = EnemyNear,StateNo = 300
;{bN iR
trigger12 = EnemyNear,Name = "robo rock"
trigger12 = EnemyNear,StateNo = 240
;_ iU
trigger13 = EnemyNear,Name = "juda"
trigger13 = EnemyNear,StateNo = 900
;NEh iU
trigger14 = EnemyNear,Name = "Cloud Strife" 
trigger14 = EnemyNear,StateNo = 650
;T iU
trigger15 = EnemyNear,Name = "Rouga" 
trigger15 = EnemyNear,StateNo = 1000
;AX VFh[T(|)
trigger16 = EnemyNear,Name = "Asura" 
trigger16 = EnemyNear,StateNo = 1000
;W[ gh
trigger17 = EnemyNear,Name = "Joe" 
trigger17 = EnemyNear,StateNo = 1014
var(39) = 2

;===============================================================================
;K[hs\p()
[State -3, Guard Name Throw]
Type = VarSet
;S
trigger1 = EnemyNear,StateType != A
trigger1 = EnemyNear,HitDefAttr = SCA,AT
;
trigger2 = EnemyNear,AutHorName = "muteki" || EnemyNear,AutHorName = "Akutagawa" || EnemyNear,AutHorName = "Warusaki3"
trigger2 = EnemyNear,StateNo = 800
;GfB _h
trigger3 = EnemyNear,Name = "eddie"
trigger3 = EnemyNear,StateNo = 1300
;XC[ z or A_[gD
trigger4 = EnemyNear,Name = "SLAYER"
trigger4 = EnemyNear,StateNo = 1200 || EnemyNear,StateNo = 1300
;#R\ 
trigger5 = EnemyNear,Name = "order-Sol=Badguy"
trigger5 = EnemyNear,StateNo = 1500
;lIfBI KE
trigger6 = EnemyNear,Name = "neo-dio"
trigger6 = EnemyNear,StateNo = 3000
;W EXEM
trigger7 = EnemyNear,Name = "jam"
trigger7 = EnemyNear,StateNo = 2500
;t@EXg 
trigger8 = EnemyNear,Name = "faust"
trigger8 = EnemyNear,StateNo = 1500
;Wj[ ~Xgt@ti[
trigger9 = EnemyNear,Name = "johnny"
trigger9 = EnemyNear,var(49)
trigger9 = EnemyNear,StateNo = [1000,1099]
;EBh uE
trigger10 = EnemyNear,stateno = 7600 || EnemyNear,stateno = 7601
trigger10 = EnemyNear,Name = "wind"
;PotsL uE
trigger11 = EnemyNear,StateNo = 4000
trigger11 = EnemyNear,Name="Shin Gouki" || EnemyNear,Name="Ryu" || EnemyNear,Name="Morrigan Aensland" || EnemyNear,Name ="Sakura Kasugano"
;PotsL uEQ
trigger12 = EnemyNear,StateNo = 3300
trigger12 = EnemyNear,Name="Yuri Sakazaki" || EnemyNear,Name="cvsgouki" || EnemyNear,Name="cvsryu" || EnemyNear,Name="cvssakura"
;cvsK[ XgWbWg
trigger13 = EnemyNear,stateno=3200
trigger13 = EnemyNear,Name="cvsg_rugal" || EnemyNear,Name="cvsrugal" || EnemyNear,Name="god rugal"
;cvsK[ K[GNXL[W
trigger14 = EnemyNear,stateno=1700
trigger14 = EnemyNear,Name="cvsg_rugal" || EnemyNear,Name="cvsrugal" || EnemyNear,Name="god rugal"
;S uE
trigger15 = EnemyNear,StateNo = 3600
trigger15 = EnemyNear,Name = "Gouki"
; uE
trigger16 = EnemyNear,StateNo = 20080 || EnemyNear,StateNo = 20060
trigger16 = EnemyNear,Name = "Kaori Misaka"
;EvilP uE
trigger17 = EnemyNear,StateNo = 3890
trigger17 = EnemyNear,Name = "Evil Ken"
; AAD`Ci
trigger18 = EnemyNear,Name = "Kohaku"
trigger18 = EnemyNear,StateNo = [2050,2051]
;Ll A}QhoX^[
trigger19 = EnemyNear,Name = "Kira"
trigger19 = EnemyNear,StateNo = 3000
;s 
trigger20 = EnemyNear,Name = "natsumi"
trigger20 = EnemyNear,StateNo = 350
;AbNX nCp[{bI
trigger21 = EnemyNear,Name = "Alex"
trigger21 = P2StateNo=1000 || P2StateNo=1010 || P2StateNo=1020 || P2StateNo=1500 || P2StateNo=1510 || P2StateNo=1520 || P2StateNo=3000
;_ ojVOXgCN
trigger22 = EnemyNear,Name = "juda"
trigger22 = EnemyNear,StateNo = 930 || stateNo = 940
;ECbv `
trigger23 = EnemyNear,Name = "whip"
trigger23 = EnemyNear,StateNo = 1300
;ECbv `
trigger24 = EnemyNear,Name = "whip"
trigger24 = EnemyNear,StateNo = 1320
;CVSUMGt 
trigger25 = EnemyNear,Name ="cvszangief"
trigger25 = EnemyNear,StateNo = 820 || EnemyNear,StateNo = 1300 || EnemyNear,StateNo = 1450 || EnemyNear,StateNo = 1520 || EnemyNear,StateNo = 1620 || EnemyNear,StateNo = 1750 || EnemyNear,StateNo = 1850
trigger26 = EnemyNear,Name ="cvszangief"
trigger26 = EnemyNear,StateNo = 3150 || EnemyNear,StateNo = 3050 || EnemyNear,StateNo = 3250
;WMl I
trigger27 = EnemyNear,Name="JAGI"
trigger27 = EnemyNear,StateNo=1000 || EnemyNear,StateNo=2000
;LVMAX II
trigger28 = EnemyNear,Name="Kishima_kouma"
trigger28 = EnemyNear,StateNo = 1000 || EnemyNear,StateNo = 1050 || EnemyNear,StateNo = 2000 || EnemyNear,StateNo = 3000 || EnemyNear,StateNo = 3100
var(39) = 3

;===============================================================================
[State -3,K[hs\p(iU)]
Type = VarSet
;uM \
trigger1 = EnemyNear,Name = "Tohno_Shiki"
trigger1 = EnemyNear,StateNo = 3000 || EnemyNear,StateNo = 3050
;t MNeBJt@g
trigger2 = EnemyNear,Name = "Ralf99_WLS"
trigger2 = EnemyNear,StateNo = 3400
;E(KXy) 
trigger3 = EnemyNear,Name = "TSPE"
trigger3 = EnemyNear,StateNo = 2000
;_\Y _
trigger4 = EnemyNear,Name = "Kibagami Genjuro"
trigger4 = EnemyNear,StateNo = 1800
;tBIi AJip`
trigger5 = EnemyNear,Name = "fiona"
trigger5 = EnemyNear,StateNo = 9425
var(39) = 4

;===============================================================================
[State -3,U]
Type = VarSet
;pZ 
trigger1 = EnemyNear,Name="[" && EnemyNear,StateNo = 1800
;M UNV
trigger2 = EnemyNear,Name="Gill" && EnemyNear,StateNo = 3000
;|^NZ
trigger3 = EnemyNear,Name="Politank Z" && EnemyNear,StateNo = 3200
;A[i
trigger4 = EnemyNear,Name="arina" && EnemyNear,StateNo = 4000
;c
trigger5 = EnemyNear,Name="rai" && EnemyNear,StateNo =4000
;XbV
trigger6 = EnemyNear,Name="Slash v2.0 by Inverse" && EnemyNear,StateNo = 6000
;
trigger7 = EnemyNear,Name="MAURU by Inverse" && EnemyNear,StateNo = 4500
;eBZ NHK
trigger8 = EnemyNear,Name="tesse" && EnemyNear,StateNo = 4000
;eBZ Roque
trigger9 = EnemyNear,Name="Tesse" && EnemyNear,StateNo = 2100
;_fBJ
trigger10 = EnemyNear,Name="DANDY J" && EnemyNear,StateNo = 7000
var(39) = 5

;===============================================================================
;UK[h
[State -3, Reset]
Type = VarSet
triggerall = var(59) >= 1
triggerall = var(39)
trigger1 = EnemyNear(var(45)),ctrl
trigger2 = (var(39) != 5 && StateNo = [150,159])
trigger3 = (stateNo = [111,112]) || (stateNo = [35,40])
trigger4 = movetype = H || (movecontact && var(39) != 5)
trigger5 = var(39) = 5 && (EnemyNear(var(45)),stateNo = [5000,5100])
V = 39
Value = 0

;===============================================================================
;Us
;===============================================================================
;_bV
[state -3, Dash]
Type = ChangeState
Value = 100
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(39) = 5 && stateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = p2bodydist X >= 10
trigger1 = random <= var(59)*70

;-------------------------------------------------------------------------------
; p`
[State -3, Short Stand C]
type = ChangeState
value = 210
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(39) = 5 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [-10,34]
trigger1 = random <= var(59)*90

;-------------------------------------------------------------------------------
;LZ C`
[State -3, Cancel One Inch]
type = ChangeState
value = 251
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(39) = 5 && StateType != A
triggerall = EnemyNear(var(45)),alive
trigger1 = stateno = 210 && movecontact
trigger1 = animelemtime(3) > 0 && animelemtime(5) < 0
trigger2 = stateno = 210 && movecontact
trigger2 = animelemtime(8) > 0 && animelemtime(10) < 0 && movecontact

;-------------------------------------------------------------------------------
;_ChuX 
[State -3, Diamond Breath A]
type = ChangeState
value = 1000
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(39) = 5 && statetype != A
triggerall = EnemyNear(var(45)),alive
trigger1 = stateNo = 251 && movecontact
trigger1 = animelemtime(5) > 0 && animelemtime(7) < 0

;===============================================================================
;
;===============================================================================
;JE^[VF
[State -3, Counter Shell]
type = ChangeState
value = 1020
triggerall = var(59) >= 2 && Roundstate = 2
triggerall = var(43) = 1 && var(28) = 0 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = random <= var(59)*90
triggerall = p2bodydist X = [90,160]
trigger1 = EnemyNear(var(45)),numproj >= 1
trigger1 = EnemyNear(var(45)),moveType = A
trigger1 = EnemyNear(var(45)),time = [25,40]
trigger1 = EnemyNear(var(45)),stateNo = [1000,1999]
trigger1 = Life >= Floor(LifeMax/3)

;-------------------------------------------------------------------------------
;
[State -3, Throw 1]
type = ChangeState
value = 800
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),stateNo != 40 && EnemyNear(var(45)),stateNo != 52
triggerall = EnemyNear(var(45)),stateNo != 5120
triggerall = EnemyNear(var(45)),statetype != A
triggerall = p2bodydist X = [-10,7]
trigger1 = random <= var(59)*20
trigger2 = EnemyNear(var(45)),Time >= 25-var(59)*3
trigger2 = EnemyNear(var(45)),MoveType = A
trigger2 = PrevStateNo = [120,159]
trigger2 = random <= var(59)*50
trigger3 = EnemyNear(var(45)),Time >= 25-var(59)*3
trigger3 = EnemyNear(var(45)),MoveType = A
trigger3 = PrevStateNo = [5000,5270]
trigger3 = random <= var(59)*50

;-------------------------------------------------------------------------------
;
[State -3, Throw 2]
type = ChangeState
value = 810
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),stateNo != 40 && EnemyNear(var(45)),stateNo != 52
triggerall = EnemyNear(var(45)),stateNo != 5120
triggerall = EnemyNear(var(45)),statetype != A
triggerall = p2bodydist X = [-10,7]
trigger1 = random <= var(59)*20
trigger2 = EnemyNear(var(45)),Time >= 25-var(59)*3
trigger2 = EnemyNear(var(45)),MoveType = A
trigger2 = PrevStateNo = [120,159]
trigger2 = random <= var(59)*50
trigger3 = EnemyNear(var(45)),Time >= 25-var(59)*3
trigger3 = EnemyNear(var(45)),MoveType = A
trigger3 = PrevStateNo = [5000,5270]
trigger3 = random <= var(59)*50

;-------------------------------------------------------------------------------
;K[h
[State -3,Guard]
Type = ChangeState
Value = 120
triggerall = var(59) >= 4 && RoundState = 2
triggerall = ctrl || (stateNo = [16,21])
trigger1 = var(52) > 0
trigger1 = (EnemyNear(var(45)),Numproj >= 1 && !InGuardDist) || (EnemyNear(var(45)),movetype = A && (p2bodydist X = [-10,50]))

;===============================================================================
;XL
;===============================================================================
;_CAhGbW
[State -3, Diamond Edge]
type = ChangeState
value = 3000
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && var(48) > 0 && statetype != A && Power >= 1200
triggerall = ctrl || (Stateno=[100,102]) || (stateNo = [16,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),stateNo != var(33)
triggerall = (p2bodydist X = [-20,70]) && p2bodydist Y >= -70
triggerall = random <= var(59)*100
trigger1 = !EnemyNear(var(45)),hitdefattr = SC,HA,NT,ST,HT
trigger1 = EnemyNear(var(45)),MoveType = A
trigger1 = EnemyNear(var(45)),stateNo = var(47)
trigger1 = EnemyNear(var(45)),AnimTime <= -2
trigger1 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && var(48) > 0 && statetype != A
triggerall = ctrl || (Stateno=[100,102]) || (stateNo = [16,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),stateNo != var(33)
triggerall = (p2bodydist X = [10,35]) && p2bodydist Y >= -30
triggerall = random <= var(59)*100
trigger1 = !EnemyNear(var(45)),hitdefattr = SC,HA,NT,ST,HT
trigger1 = EnemyNear(var(45)),MoveType = A
trigger1 = EnemyNear(var(45)),stateNo = var(47)
trigger1 = EnemyNear(var(45)),AnimTime <= -4
trigger1 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
; p`
[State -3, S Stand C]
type = ChangeState
value = 210
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(48) > 0 && statetype != A
triggerall = ctrl || (Stateno=[100,102]) || (stateNo = [16,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = Enemy,const(size.head.pos.y) <= -50
triggerall = EnemyNear(var(45)),stateNo != var(33)
triggerall = p2bodydist X = [-20,34]
triggerall = random <= var(59)*100
trigger1 = !EnemyNear(var(45)),hitdefattr = SC,HA,NT,ST,HT
trigger1 = EnemyNear(var(45)),MoveType = A
trigger1 = EnemyNear(var(45)),stateNo = var(47)
trigger1 = EnemyNear(var(45)),AnimTime <= -4
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger2 = EnemyNear(var(45)),MoveType = I
trigger2 = EnemyNear(var(45)),AnimTime <= -4
trigger2 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;LbN
[State -3, Crouch B]
type = ChangeState
value = 420
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(48) > 0 && statetype != A
triggerall = ctrl || (Stateno=[100,102]) || (stateNo = [16,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = EnemyNear(var(45)),stateNo != var(33)
triggerall = p2bodydist X = [-20,40]
triggerall = random <= var(59)*100
trigger1 = !EnemyNear(var(45)),hitdefattr = SC,HA,NT,ST,HT
trigger1 = EnemyNear(var(45)),MoveType = A
trigger1 = EnemyNear(var(45)),stateNo = var(47)
trigger1 = EnemyNear(var(45)),AnimTime <= -5
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger2 = EnemyNear(var(45)),MoveType = I
trigger2 = EnemyNear(var(45)),AnimTime <= -5
trigger2 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;LbN
[State -3, Crouch C]
type = ChangeState
value = 430
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(48) > 0 && statetype != A
triggerall = ctrl || (Stateno=[100,102]) || (stateNo = [16,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = EnemyNear(var(45)),stateNo != var(33)
triggerall = p2bodydist X = [-20,60]
triggerall = random <= var(59)*100
trigger1 = !EnemyNear(var(45)),hitdefattr = SC,HA,NT,ST,HT
trigger1 = EnemyNear(var(45)),MoveType = A
trigger1 = EnemyNear(var(45)),stateNo = var(47)
trigger1 = EnemyNear(var(45)),AnimTime <= -8
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger2 = EnemyNear(var(45)),MoveType = I
trigger2 = EnemyNear(var(45)),AnimTime <= -8
trigger2 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;_ChuX 
[State -3, Diamond Breath A]
type = ChangeState
value = 1000
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(48) > 0 && statetype != A
triggerall = ctrl || (Stateno=[100,102]) || (stateNo = [16,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = EnemyNear(var(45)),stateNo != var(33)
triggerall = p2bodydist X = [40,90]
triggerall = random <= var(59)*100
trigger1 = !EnemyNear(var(45)),hitdefattr = SC,HA,NT,ST,HT
trigger1 = EnemyNear(var(45)),MoveType = A
trigger1 = EnemyNear(var(45)),stateNo = var(47)
trigger1 = EnemyNear(var(45)),AnimTime <= -17
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger2 = EnemyNear(var(45)),MoveType = I
trigger2 = EnemyNear(var(45)),AnimTime <= -17
trigger2 = EnemyNear(var(45)),ctrl = 0

;===============================================================================
;X[p[LZ
;===============================================================================
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 4 && RoundState = 2
triggerall = StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),stateNo = [5000,5100]
trigger1 = stateno = 1011 && movehit && time >= 7
trigger2 = stateno = 3000 && projhit(3000) = 1, <30
trigger2 = p2bodydist Y >= -60 
trigger3 = stateno = 3005 && projhit(3010) = 1, <30
trigger3 = p2bodydist Y >= -60 

;===============================================================================
;
;===============================================================================
;_CAhGbW
[State -3, Diamond Edge]
type = ChangeState
value = 3000
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && statetype != A && Power >= 1500
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
trigger1 =  (p2bodydist X = [-10,60]) && p2bodydist Y >= -80
trigger1 = ((var(59) = [3,4]) && EnemyNear(var(45)),time >= 25-var(59)*3) || (var(59) >= 5 && Life >= Floor(LifeMax/3) && EnemyNear(var(45)),time >= 25-var(59)*3) || (var(59) >= 5 && Life <= Floor(LifeMax/3))
trigger1 = ((var(59) = [2,4]) && (EnemyNear(var(45)),time = [1,15])) || (var(59) >= 5 && (EnemyNear(var(45)),time = [1,5]))
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = random <= var(59)*20

;-------------------------------------------------------------------------------
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && statetype != A && Power >= 2000
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
trigger1 =  (p2bodydist X = [-10,60]) && p2bodydist Y >= -60
trigger1 = ((var(59) = [3,4]) && EnemyNear(var(45)),time >= 25-var(59)*3) || (var(59) >= 5 && Life >= Floor(LifeMax/3) && EnemyNear(var(45)),time >= 25-var(59)*3) || (var(59) >= 5 && Life <= Floor(LifeMax/3))
trigger1 = ((var(59) = [3,4]) && (EnemyNear(var(45)),time = [1,15])) || (var(59) >= 5 && (EnemyNear(var(45)),time = [1,3]))
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = random <= var(59)*40

;-------------------------------------------------------------------------------
;K[hLZU
[State -3, Guard Cancel]
Type = ChangeState
Value = 245
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(49) = 0
triggerall = statetype != A && Power = [1600,2300]
triggerall = EnemyNear(var(45)),StateType != L
triggerall = p2bodydist X = [-10,40]
triggerall = random <= var(59)*10
trigger1 = stateno = 150 || stateno = 152

;-------------------------------------------------------------------------------
;K[hLZ O]
[State -3, GC Roll]
type = changestate
value = 710
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && statetype != A && Power = [1200,2000]
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),statetype != A
triggerall = random <= var(59)*60

trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = p2bodydist X = [10,70]
trigger1 = EnemyNear(var(45)),hitdefattr = SC,SA
trigger1 = stateno = 150 || stateno = 151

trigger2 = TeamMode = simul && var(38) = 1
trigger2 = p2bodydist X = [10,70]
trigger2 = EnemyNear(var(45)),hitdefattr = SC,SA
trigger2 = stateno = 150 || stateno = 151

trigger3 = p2bodydist X <= 50
trigger3 = NumHelper(55000+id) && NumHelper(60000+id)
trigger3 = Helper(55000+id),RootDist X <= 100 && facing = -1 || Helper(60000+id),RootDist X <= 100 && facing = 1
trigger3 = stateno = 150 || stateno = 151

;===============================================================================
;
;===============================================================================
;p`
[State -3, Crouch C]
type = ChangeState
value = 410
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType = A
trigger1 = ((var(59) = [2,4]) && EnemyNear(var(45)),vel Y >= 0) || var(59) >= 5
trigger1 = p2Bodydist X = [-10 + floor(2*(EnemyNear(var(45)),vel X)),20 + floor(2*(EnemyNear(var(45)),vel X))]
trigger1 = P2BodyDist Y = [-50 - floor(2*(EnemyNear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20)),-30 - floor(2*(EnemyNear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20))]
trigger1 = EnemyNear(var(45)),movetype != H
trigger1 = random <= var(59)*50

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),movetype = H
trigger2 = (p2bodydist X = [0,20]) && (p2bodydist Y = [-60,-20])
trigger2 = random <= var(59)*50

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType = A
trigger1 = ((var(59) = [2,4]) && EnemyNear(var(45)),vel Y >= 0) || var(59) >= 5
trigger1 = p2Bodydist X = [20 + floor(2*(EnemyNear(var(45)),vel X)),50 + floor(2*(EnemyNear(var(45)),vel X))]
trigger1 = P2BodyDist Y = [-50 - floor(2*(EnemyNear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20)),-20 - floor(2*(EnemyNear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20))]
trigger1 = EnemyNear(var(45)),movetype != H
trigger1 = random <= var(59)*50

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),movetype = H
trigger2 = (p2bodydist X = [0,20]) && (p2bodydist Y = [-60,-20])
trigger2 = random <= var(59)*50

;-------------------------------------------------------------------------------
;U
[State -3, Stand E]
type = ChangeState
value = 240
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType = A
trigger1 = ((var(59) = [2,4]) && EnemyNear(var(45)),vel Y >= 0) || var(59) >= 5
trigger1 = p2Bodydist X = [15 + floor(6*(EnemyNear(var(45)),vel X)),40 + floor(6*(EnemyNear(var(45)),vel X))]
trigger1 = P2BodyDist Y = [-60 - floor(6*(EnemyNear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20)),-40 - floor(6*(EnemyNear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20))]
trigger1 = EnemyNear(var(45)),movetype != H
trigger1 = random <= var(59)*50

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),movetype = H
trigger2 = (p2bodydist X = [0,20]) && (p2bodydist Y = [-60,-20])
trigger2 = random <= var(59)*50

;-------------------------------------------------------------------------------
;_CAhGbW
[State -3, Diamond Edge]
type = ChangeState
value = 3000
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A && Power >= 1000
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType = A
trigger1 = ((var(59) = [2,4]) && EnemyNear(var(45)),vel Y >= 0) || var(59) >= 5
trigger1 = p2Bodydist X = [20 + floor(2*(EnemyNear(var(45)),vel X)),70 + floor(2*(EnemyNear(var(45)),vel X))]
trigger1 = P2BodyDist Y = [-80 - floor(2*(EnemyNear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20)),-10 - floor(2*(EnemyNear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20))]
trigger1 = EnemyNear(var(45)),movetype != H
trigger1 = random <= var(59)*50

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),movetype = H
trigger2 = (p2bodydist X = [0,20]) && (p2bodydist Y = [-60,-20])
trigger2 = random <= var(59)*50

;===============================================================================
;
;===============================================================================
;_bV Wv
[State -3, D Short Jump]
type = ChangeState
value = ifelse((stateNo = [100,102]),39,111)
triggerall = var(59) >= 3 && Roundstate = 2
triggerall = var(43) = 1 && var(52) = 0 && statetype != A
triggerall = (var(44) = 0 || var(44) > 100)
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = p2bodydist X = [60,130]
triggerall = random <= var(59)*40
trigger1 = EnemyNear(var(45)),MoveType != H
trigger1 = EnemyNear(var(45)),Numproj >= 1
trigger1 = EnemyNear(var(45)),time <= 20
trigger1 = EnemyNear(var(45)),movetype = A

trigger2 = EnemyNear(var(45)),stateNo = var(33)
trigger2 = EnemyNear(var(45)),time <= 20

trigger3 = EnemyNear(var(45)),NumHelper > var(58)
trigger3 = EnemyNear(var(45)),statetype != A
trigger3 = EnemyNear(var(45)),ctrl = 0

trigger4 = Life >= Floor(LifeMax/6)
trigger4 = EnemyNear(var(45)),NumHelper = var(58) && EnemyNear(var(45)),Numproj = 0
trigger4 = EnemyNear(var(45)),stateType != A
trigger4 = EnemyNear(var(45)),moveType = I
trigger4 = EnemyNear(var(45)),ctrl = 0
trigger4 = EnemyNear(var(45)),movetype != H

trigger5 = EnemyNear(var(45)),stateType = A
trigger5 = EnemyNear(var(45)),movetype != A
trigger5 = EnemyNear(var(45)),vel Y <= -1
trigger5 = EnemyNear(var(45)),movetype != H

trigger6 = TeamMode = simul
trigger6 = NumPartner >= 1 && Partner,Life > 0
trigger6 = Partner,movecontact
trigger6 = EnemyNear(var(45)),statetype = C
trigger6 = (Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X<Pos X) || (Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X>Pos X)

trigger7 = Life >= Floor(LifeMax/2.5)
trigger7 = EnemyNear(var(45)),movetype != A
trigger7 = EnemyNear(var(45)),statetype != A
trigger7 = EnemyNear(var(45)),ctrl = 0
trigger7 = EnemyNear(var(45)),vel X = 0

;-------------------------------------------------------------------------------
;_bV Wv
[State -3, D Long Jump]
type = ChangeState
value = ifelse((stateNo = [100,102]),38,112)
triggerall = var(59) >= 3 && Roundstate = 2
triggerall = var(43) = 1 && var(52) = 0 && statetype != A
triggerall = (var(44) = 0 || var(44) > 100)
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = random <= var(59)*40
trigger1 = p2bodydist X >= 170
trigger1 = EnemyNear(var(45)),MoveType != H
trigger1 = EnemyNear(var(45)),Numproj >= 1
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = EnemyNear(var(45)),time <= 20

trigger2 = p2bodydist X = [100,170]
trigger2 = EnemyNear(var(45)),stateNo = var(33)
trigger2 = EnemyNear(var(45)),time <= 20

trigger3 = p2bodydist X = [100,170]
trigger3 = EnemyNear(var(45)),NumHelper > var(58)
trigger3 = EnemyNear(var(45)),statetype != A
trigger3 = EnemyNear(var(45)),ctrl = 0

trigger4 = p2bodydist X = [100,170]
trigger4 = Life >= Floor(LifeMax/6)
trigger4 = EnemyNear(var(45)),Numproj = 0
trigger4 = EnemyNear(var(45)),moveType != A
trigger4 = EnemyNear(var(45)),MoveType != H

;-------------------------------------------------------------------------------
; Wv
[State -3, Nomal Short Jump]
type = ChangeState
value = 37
triggerall = var(59) >= 3 && Roundstate = 2
triggerall = var(43) = 1 && var(52) = 0 && statetype != A
triggerall = (var(44) = 0 || var(44) > 100)
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = p2bodydist X = [40,80]
triggerall = random <= var(59)*40
trigger1 = EnemyNear(var(45)),MoveType != H
trigger1 = EnemyNear(var(45)),Numproj >= 1
trigger1 = EnemyNear(var(45)),time <= 20
trigger1 = EnemyNear(var(45)),movetype = A

trigger2 = EnemyNear(var(45)),stateNo = var(33)
trigger2 = EnemyNear(var(45)),time <= 20

trigger3 = EnemyNear(var(45)),NumHelper > var(58)
trigger3 = EnemyNear(var(45)),statetype != A
trigger3 = EnemyNear(var(45)),ctrl = 0

trigger4 = Life >= Floor(LifeMax/6)
trigger4 = EnemyNear(var(45)),NumHelper = var(58) && EnemyNear(var(45)),Numproj = 0
trigger4 = EnemyNear(var(45)),stateType != A
trigger4 = EnemyNear(var(45)),moveType = I
trigger4 = EnemyNear(var(45)),ctrl = 0
trigger4 = EnemyNear(var(45)),movetype != H

trigger5 = TeamMode = simul
trigger5 = NumPartner >= 1 && Partner,Life > 0
trigger5 = Partner,movecontact
trigger5 = EnemyNear(var(45)),statetype = C
trigger5 = (Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X<Pos X) || (Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X>Pos X)

;-------------------------------------------------------------------------------
;obNWv
[State -3, Back Jump]
type = ChangeState
value = 36
triggerall = var(59) >= 2 && Roundstate = 2
triggerall = var(43) = 1 && var(52) = 0 && statetype != A
triggerall = (var(44) = 0 || var(44) > 100)
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = Enemynear(var(45)),statetype != L && Enemynear(var(45)),movetype != H
triggerall = Enemynear(var(45)),statetype != A && Enemynear(var(45)),movetype != A
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X >= 200 && facing = -1 || Helper(60000+id),RootDist X >= 200 && facing = 1
triggerall = Enemynear(var(45)),Numproj = 0
trigger1 = p2bodydist X >= 120
trigger1 = random <= var(59)*60

;-------------------------------------------------------------------------------
; p`
[State -3, Jump C]
type = ChangeState
value = 610
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = (ctrl || (stateNo = [120,140])) && statetype = A
triggerall = EnemyNear(var(45)),statetype != L

;_bV Wv
trigger1 = p2bodydist X <= 100
trigger1 = var(46) = 3 && vel Y >= -2 && p2bodydist Y = [20,55]
trigger1 = EnemyNear(var(45)),statetype = S
trigger1 = Enemy,const(size.head.pos.y) <= -40
trigger2 = p2bodydist X <= 100
trigger2 = var(46) = 3 && vel Y >= -1 && p2bodydist Y = [20,55]
trigger2 = EnemyNear(var(45)),statetype = C || Enemy,const(size.head.pos.y) > -40
trigger3 = p2bodydist X <= 100
trigger3 = var(46) = 3 && vel Y >= -2 && p2bodydist Y = [20,55]
trigger3 = EnemyNear(var(45)),statetype = A
trigger3 = EnemyNear(var(45)),stateNo = [100,107]
trigger3 = Enemy,const(size.head.pos.y) <= -40
trigger4 = p2bodydist X <= 100
trigger4 = var(46) = 3 && vel Y >= -1 && p2bodydist Y = [20,55]
trigger4 = EnemyNear(var(45)),statetype = A
trigger4 = EnemyNear(var(45)),stateNo = [100,107]
trigger4 = Enemy,const(size.head.pos.y) > -40

;_bV Wv
trigger5 = p2bodydist X <= 100
trigger5 = var(46) = 4 && vel Y >= 0
trigger5 = (stateNo != 5210 && (p2bodydist Y = [70,110])) || (stateNo = 5210 && (p2bodydist Y = [70,120]))
trigger5 = EnemyNear(var(45)),statetype = S
trigger5 = Enemy,const(size.head.pos.y) <= -40
trigger6 = p2bodydist X <= 100
trigger6 = var(46) = 4 && vel Y >= 0
trigger6 = (stateNo != 5210 && (p2bodydist Y = [60,110])) || (stateNo = 5210 && (p2bodydist Y = [70,120]))
trigger6 = EnemyNear(var(45)),statetype = C || Enemy,const(size.head.pos.y) > -40
trigger7 = p2bodydist X <= 100
trigger7 = var(46) = 4 && vel Y >= 0
trigger7 = (stateNo != 5210 && (p2bodydist Y = [70,110])) || (stateNo = 5210 && (p2bodydist Y = [70,120]))
trigger7 = EnemyNear(var(45)),statetype = A
trigger7 = EnemyNear(var(45)),stateNo = [100,107]
trigger7 = Enemy,const(size.head.pos.y) <= -40
trigger8 = p2bodydist X <= 100
trigger8 = var(46) = 4 && vel Y >= 0
trigger8 = (stateNo != 5210 && (p2bodydist Y = [60,110])) || (stateNo = 5210 && (p2bodydist Y = [70,120]))
trigger8 = EnemyNear(var(45)),statetype = A
trigger8 = EnemyNear(var(45)),stateNo = [100,107]
trigger8 = Enemy,const(size.head.pos.y) > -40

;obNWv
trigger9 = p2bodydist X = [-20,30]
trigger9 = var(46) = 5 && vel Y >= 0
trigger9 = p2bodydist Y = [50,80]
trigger9 = EnemyNear(var(45)),statetype != A
trigger9 = EnemyNear(var(45)),movetype != A

;
trigger10 = p2bodydist X <= 50 && p2bodydist Y = [-20,50]
trigger10 = EnemyNear(var(45)),statetype = A
trigger10 = EnemyNear(var(45)),stateNo != [100,107]

trigger11 = var(59) >= 5
trigger11 = (var(46) = [3,4]) && vel Y <= 0 && p2bodydist Y > 0
trigger11 = EnemyNear(var(45)),movetype = A && EnemyNear(var(45)),time <= 5

trigger12 = var(59) >= 5
trigger12 = (var(46) = [3,4]) && vel Y >= 0
trigger12 = EnemyNear(var(45)),movetype = A && EnemyNear(var(45)),time <= 5

;-------------------------------------------------------------------------------
;_ChV[g 
[State -3, Diamond Shoot]
type = ChangeState
value = 1040
triggerall = var(59) >= 2 && RoundState = 2
triggerall = (var(46) = [3,5]) && StateType = A
triggerall = ctrl || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
trigger1 = (P2bodydist X = [30,250]) && p2bodydist Y >= 60
trigger1 = vel Y = [-1,0]
trigger1 = random <= var(59)*90

;-------------------------------------------------------------------------------
;_ChV[g 
[State -3, Diamond Shoot]
type = ChangeState
value = 1040
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(46) = 5 && StateType = A
triggerall = ctrl || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),statetype != A || (EnemyNear(var(45)),statetype = A && (EnemyNear(var(45)),stateNo != [40,55]))
trigger1 = (P2bodydist X = [30,250]) && p2bodydist Y < 60
trigger1 = vel Y = [6,7]
trigger1 = random <= var(59)*50

;-------------------------------------------------------------------------------
; p`
[State -3, Short Stand C]
type = ChangeState
value = 210
triggerall = var(59) >= 1 && RoundState = 2
triggerall = (var(46) = [6,7]) && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -40
trigger1 = P2bodydist X = [-10,20]

;-------------------------------------------------------------------------------
;LbN
[State -3, Crouch B]
type = ChangeState
value = 420
triggerall = var(59) >= 1 && RoundState = 2
triggerall = (var(46) = [6,7]) && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType != A
trigger1 = P2bodydist X = [-10,40]

;===============================================================================
;
;===============================================================================
;_bV
[State -3, Fwd]
type = changestate
value = 100
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 9 && var(38) = 1 && statetype != A
triggerall = ctrl || stateNo = [18,19]
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != L && Enemynear(var(45)),movetype != H
triggerall = p2bodydist X >= 25
triggerall = random <= var(59)*90
trigger1 = Enemynear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;
[State -3, Throw]
type = ChangeState
value = 800
triggerall = var(59) >= 2 && RoundState = 2
triggerall = (var(54) = 9 || (var(43) = 1 && var(38) = 0)) && var(19) = 0 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = Enemynear(var(45)),stateNo != 40 && Enemynear(var(45)),stateNo != 52 && Enemynear(var(45)),stateNo != 5120 
triggerall = Enemynear(var(45)),statetype != L && Enemynear(var(45)),movetype != H
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != A
triggerall = p2bodydist X < 7
trigger1 = Enemynear(var(45)),AnimTime > -4
trigger1 = Enemynear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;_CAhGbW
[State -3, Diamond Edge]
type = ChangeState
value = 3000
triggerall = var(59) >= 2 && RoundState = 2
triggerall = (var(54) = 9 || (var(43) = 1 && var(38) = 0)) && statetype != A && Power >= 1000
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != L
triggerall = (p2bodydist X = [-20,70]) && p2bodydist Y >= -90
triggerall = random <= var(59)*90
trigger1 = Enemynear(var(45)),ctrl = 0
trigger1 = Enemynear(var(45)),movetype != H

trigger2 = TeamMode = simul
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = Enemynear(var(45)),ctrl

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = Enemynear(var(45)),movetype = H

;-------------------------------------------------------------------------------
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 4 && RoundState = 2
triggerall = (var(54) = 9 || (var(43) = 1 && var(38) = 0)) && statetype != A && Power >= 2000
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != L
triggerall = Enemynear(var(45)),statetype != A
triggerall = (p2bodydist X = [-20,160])
triggerall = random <= var(59)*90
trigger1 = Enemynear(var(45)),ctrl = 0
trigger1 = Enemynear(var(45)),movetype != H

trigger2 = TeamMode = simul
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = Enemynear(var(45)),ctrl

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = Enemynear(var(45)),movetype = H

;-------------------------------------------------------------------------------
; p`
[State -3, Close Stand C]
type = ChangeState
value = 210
triggerall = var(59) >= 2 && RoundState = 2
triggerall = (var(54) = 9 || (var(43) = 1 && var(38) = 0)) && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != L
triggerall = Enemynear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -50
triggerall = p2bodydist X = [-10,34]
triggerall = random <= var(59)*90
trigger1 = Enemynear(var(45)),ctrl = 0
trigger1 = Enemynear(var(45)),movetype != H

trigger2 = TeamMode = simul
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = Enemynear(var(45)),ctrl

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = Enemynear(var(45)),movetype = H

;-------------------------------------------------------------------------------
;LbN
[State -3, Crouch B]
type = ChangeState
value = 420
triggerall = var(59) >= 2 && RoundState = 2
triggerall = (var(54) = 9 || (var(43) = 1 && var(38) = 0)) && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != L
triggerall = Enemynear(var(45)),statetype != A
triggerall = p2bodydist X = [-10,40]
triggerall = random <= var(59)*90
trigger1 = Enemynear(var(45)),ctrl = 0
trigger1 = Enemynear(var(45)),movetype != H

trigger2 = TeamMode = simul
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = Enemynear(var(45)),ctrl

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = Enemynear(var(45)),movetype = H

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 2 && RoundState = 2
triggerall = (var(54) = 9 || (var(43) = 1 && var(38) = 0)) && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (Enemynear(var(45)),Facing = 1 && Facing = 1) || (Enemynear(var(45)),Facing = -1 && Facing = -1)
triggerall = Enemynear(var(45)),statetype != L
triggerall = Enemynear(var(45)),statetype = A
triggerall = (p2bodydist X = [20,50]) && p2bodydist Y >= -70
triggerall = random <= var(59)*90
trigger1 = Enemynear(var(45)),ctrl = 0
trigger1 = Enemynear(var(45)),movetype != H

trigger2 = TeamMode = simul
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = Enemynear(var(45)),ctrl

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = Enemynear(var(45)),movetype = H

;===============================================================================
;O]U
;===============================================================================
;_bV
[State -3, Dash]
type = changestate
value = 100
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 9 && StateType != A
triggerall = ctrl || (stateNo = [18,19])
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),alive
trigger1 = p2bodydist X >= 25

;-------------------------------------------------------------------------------
;
[State -3, Back]
type = ChangeState
value = 18
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 9 && statetype != A
triggerall = ctrl && statetype != A
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X >= 120 && facing = -1 || Helper(60000+id),RootDist X >= 120 && facing = 1
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = EnemyNear(var(45)),statetype != A
trigger1 = p2bodydist X >= 7
trigger1 = EnemyNear(var(45)),AnimTime > -3 || EnemyNear(var(45)),ctrl

;-------------------------------------------------------------------------------
;_CAhGbW
[State -3, Diamond Edge]
type = ChangeState
value = 3000
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 9 && StateType != A && Power >= 1000
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = EnemyNear(var(45)),statetype != A
triggerall = p2bodydist X = [-25,70]
trigger1 = EnemyNear(var(45)),AnimTime <= -2

;-------------------------------------------------------------------------------
;
[State -3, Throw]
type = ChangeState
value = 800
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 9 && var(19) = 0 && Statetype != A 
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),stateNo != 40 && EnemyNear(var(45)),stateNo != 52 && EnemyNear(var(45)),stateNo != 5120 
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != A
triggerall = p2bodydist X < 7
trigger1 = EnemyNear(var(45)),AnimTime > -3 || EnemyNear(var(45)),ctrl

;-------------------------------------------------------------------------------
; p`
[State -3, Close Stand C]
type = ChangeState
value = 210
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 9 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = EnemyNear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -50
triggerall = p2bodydist X = [-25,34]
trigger1 = EnemyNear(var(45)),AnimTime <= -5
trigger1 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;LbN
[State -3, Crouch B]
type = ChangeState
value = 420
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 9 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = EnemyNear(var(45)),statetype != A
triggerall = p2bodydist X = [-20,40]
trigger1 = EnemyNear(var(45)),AnimTime <= -6
trigger1 = EnemyNear(var(45)),ctrl = 0

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 9 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L
triggerall = EnemyNear(var(45)),statetype = A
triggerall = (p2bodydist X = [-20,50]) && p2bodydist Y >= -70
trigger1 = EnemyNear(var(45)),AnimTime <= -4
trigger1 = EnemyNear(var(45)),ctrl = 0

;===============================================================================
;
;===============================================================================
;_bV
[State -3, Dash]
type = ChangeState
value = 100
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && var(38) = 1
triggerall = (ctrl || (stateNo = [18,19])) && (stateNo != [120,140]) && statetype != A
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = EnemyNear(var(45)),moveType != A
triggerall = EnemyNear(var(45)),Numproj = 0 && EnemyNear(var(45)),NumHelper = var(58)
trigger1 = p2bodydist X >= 170

;-------------------------------------------------------------------------------
;LbNy_bVXgbvpz
[State -3, Crouch A]
type = changestate
value = 420
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && var(46) = 0 && statetype != A
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = EnemyNear(var(45)),ctrl = 0
triggerall = p2bodydist X = [50,110]
trigger1 = (stateNo = [100,102]) && time < 9
trigger1 = EnemyNear(var(45)),moveType != A

;-------------------------------------------------------------------------------
;O]yVOpz
[State -3, Fwd Roll]
type = ChangeState
value = 710
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && var(46) = 0 && statetype != A
triggerall = (EnemyNear(var(45)),Facing = -1 && Facing = 1) || (EnemyNear(var(45)),Facing = 1 && Facing = -1)
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = EnemyNear(var(45)),ctrl = 0
triggerall = p2bodydist X = [50,110]
trigger1 = (stateNo = [100,102]) && time < 9
trigger1 = EnemyNear(var(45)),moveType = A

;-------------------------------------------------------------------------------
;Oi yVOpz
[State -3, Fwd]
type = ChangeState
value = 19
triggerall = var(59) >= 4 && Roundstate = 2
triggerall = var(43) = 1 && var(48) = 0 && (stateNo != [120,140]) && ctrl && statetype != A
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),moveType != H
triggerall = random <= var(59)*80
trigger1 = p2bodydist X >= 35

;-------------------------------------------------------------------------------
;Oi y^bOpz
[State -3, Fwd]
type = ChangeState
value = 19
triggerall = var(59) >= 4 && Roundstate = 2
triggerall = var(43) = 1 && ctrl && (stateNo != [120,140]) && statetype != A
triggerall = TeamMode = Simul
triggerall = NumPartner >= 1 && Partner,Life > 0
triggerall = random <= var(59)*80
trigger1 = p2bodydist X >= 35

;===============================================================================
;K[h
;===============================================================================
;_bV Wv
[State -3, Long Dash Jump]
type = changestate
value = 112
triggerall = var(59) >= 4 && RoundState = 2
triggerall = (var(39) = [3,4]) && var(43) = 1 && statetype != A
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),MoveType != H
triggerall = ctrl || stateNo = 101 || stateNo = [18,19]
trigger1 = random <= var(59)*120

;-------------------------------------------------------------------------------
;O]yVOpz
[State -3, Fwd Roll]
type = ChangeState
value = 710
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(52) = 0 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (var(59) = [2,3]) || (var(59) >= 4 && EnemyNear(var(45)),AnimTime <= -33)
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = TeamMode = Single || TeamMode = Turns

;Z
trigger1 = p2bodydist X = [100,160]
trigger1 = EnemyNear(var(45)),stateNo = [200,499]
trigger1 = EnemyNear(var(45)),stateNo != 200 && EnemyNear(var(45)),stateNo != 400
trigger1 = random <= var(59)*90

;KEZn
trigger2 = EnemyNear(var(45)),hitdefattr = SCA,SA
trigger2 = EnemyNear(var(45)),Animtime <= -20
trigger2 = p2bodydist X = [-10,90]
trigger2 = random <= var(59)*60

;K
trigger3 = p2bodydist X >= 100
trigger3 = EnemyNear(var(45)),ctrl
trigger3 = EnemyNear(var(45)),Numproj >= 1
trigger3 = random <= var(59)*60
trigger4 = p2bodydist X = [10,120]
trigger4 = EnemyNear(var(45)),Numproj >= 1
trigger4 = EnemyNear(var(45)),ctrl = 0
trigger4 = EnemyNear(var(45)),movetype = A
trigger4 = EnemyNear(var(45)),time <= 20
trigger4 = random <= var(59)*60
trigger5 = p2bodydist X = [-10,100]
trigger5 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
trigger5 = EnemyNear(var(45)),stateNo = var(33)
trigger5 = EnemyNear(var(45)),stateNo < 3000
trigger5 = EnemyNear(var(45)),time <= 20
trigger5 = EnemyNear(var(45)),movetype = A
trigger5 = random <= var(59)*120

;
trigger6 = var(59) >= 4
trigger6 = p2bodydist X = [-10,70]
trigger6 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
trigger6 = EnemyNear(var(45)),AnimTime <= -35
trigger6 = EnemyNear(var(45)),movetype = A
trigger6 = EnemyNear(var(45)),statetype != A
trigger6 = random <= var(59)*120

;-------------------------------------------------------------------------------
;O]y^bOpz
[State -3, Fwd Roll]
type = ChangeState
value = 710
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && var(52) = 0 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (var(59) = [2,3]) || (var(59) >= 4 && EnemyNear(var(45)),AnimTime <= -33)
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = TeamMode = Simul
;Z
trigger1 = var(38) = 1 && p2bodydist X = [100,160]
trigger1 = EnemyNear(var(45)),stateNo = [200,499]
trigger1 = EnemyNear(var(45)),stateNo != 200 && EnemyNear(var(45)),stateNo != 400
trigger1 = random <= var(59)*90

;KEZn
trigger2 = var(38) = 1
trigger2 = EnemyNear(var(45)),hitdefattr = SCA,SA
trigger2 = EnemyNear(var(45)),Animtime <= -20
trigger2 = p2bodydist X = [-10,90]
trigger2 = random <= var(59)*60

;K
trigger3 = var(38) = 1
trigger3 = p2bodydist X >= 100
trigger3 = EnemyNear(var(45)),ctrl
trigger3 = EnemyNear(var(45)),Numproj >= 1
trigger3 = random <= var(59)*60
trigger4 = var(38) = 1
trigger4 = p2bodydist X = [10,120]
trigger4 = EnemyNear(var(45)),Numproj >= 1
trigger4 = EnemyNear(var(45)),ctrl = 0
trigger4 = EnemyNear(var(45)),movetype = A
trigger4 = EnemyNear(var(45)),time <= 20
trigger4 = random <= var(59)*60
trigger5 = var(38) = 1
trigger5 = p2bodydist X = [-10,100]
trigger5 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
trigger5 = EnemyNear(var(45)),stateNo = var(33)
trigger5 = EnemyNear(var(45)),stateNo < 3000
trigger5 = EnemyNear(var(45)),time <= 20
trigger5 = EnemyNear(var(45)),movetype = A
trigger5 = random <= var(59)*120

;
trigger6 = var(59) >= 4 && var(38) = 1
trigger6 = p2bodydist X = [-10,70]
trigger6 = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
trigger6 = EnemyNear(var(45)),AnimTime <= -35
trigger6 = EnemyNear(var(45)),movetype = A
trigger6 = EnemyNear(var(45)),statetype != A
trigger6 = random <= var(59)*120

;G2l()
trigger7 = var(38) = 0
trigger7 = p2bodydist X = [-10,60]
trigger7 = EnemyNear(var(45)),movetype = A
trigger7 = EnemyNear(var(45)),time <= 10
trigger7 = Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X>Pos X

trigger8 = var(38) = 0
trigger8 = p2bodydist X = [-10,60]
trigger8 = EnemyNear(var(45)),movetype = A
trigger8 = EnemyNear(var(45)),time <= 10
trigger8 = Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X<Pos X

;-------------------------------------------------------------------------------
;]
[State -3, Back Roll]
type = ChangeState
value = 711
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(43) = 1 && statetype != A
triggerall = EnemyNear(var(45)),statetype != L
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19])

trigger1 = (EnemyNear(var(45)),Facing = -1 && Facing = -1) || (EnemyNear(var(45)),Facing = 1 && Facing = 1)
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),movetype = A
trigger1 = EnemyNear(var(45)),movetype != H
trigger1 = (p2bodydist X = [-70,-10]) && p2bodydist Y <= -60

;-------------------------------------------------------------------------------
;K[h
[State -3,Guard]
Type = ChangeState
Value = 120
triggerall = var(59) >= 1 && RoundState = 2
triggerall = ctrl || (stateNo = [16,21]) || (stateNo = 195 && time >= 40)
triggerall = random <=var(59)*200 || var(59) >= 5
trigger1 = InGuardDist
trigger2 = Abs(P2Dist X) < 60
trigger2 = EnemyNear(var(45)),HitDefAttr = ,AA,AP
trigger3 = InGuardDist
trigger3 = EnemyNear(var(45)),Numproj > 0
trigger4 = !InGuardDist
trigger4 = EnemyNear(var(45)),Vel X > 0
trigger4 = EnemyNear(var(45)),HitDefAttr = SC,AA
trigger5 = InGuardDist
trigger5 = EnemyNear(var(45)),NumHelper > var(58)
trigger6 = var(59) >= 3 && var(39) = [1,2]

;===============================================================================
;NU
;===============================================================================
;
[State -3, Taunt]
type = ChangeState
value = 195
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && var(38) = 1 && var(44) = 0 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19])
triggerall = (EnemyNear(var(45)),MoveType = H && EnemyNear(var(45)),stateType = A) || EnemyNear(var(45)),stateType = L
triggerall = EnemyNear(var(45)),stateNo != 5120
trigger1 = Life >= Floor(LifeMax/1.5) && EnemyNear(var(45)),Life <= Floor(LifeMax/4)
trigger1 = p2bodydist X >= 170
trigger1 = random <= var(59)*80

;-------------------------------------------------------------------------------
;O]
[State -3, Fwd Roll]
type = ChangeState
value = 710
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19])
triggerall = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
triggerall = p2bodydist X = [-20,30]
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X <= 100 && facing = -1 || Helper(60000+id),RootDist X <= 100 && facing = 1
trigger1 = random <= var(59)*90

;-------------------------------------------------------------------------------
;obNXebv
[State -3, Dash]
type = ChangeState
value = 105
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [18,19])
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X >= 100 && facing = -1 || Helper(60000+id),RootDist X >= 100 && facing = 1
triggerall = random <= var(59)*100

trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = EnemyNear(var(45)),statetype = L
trigger1 = p2bodydist X <= 30

trigger2 = TeamMode = Simul && var(38) = 1
trigger2 = (NumPartner >= 1 && Partner,Life = 0)
trigger2 = EnemyNear(var(45)),statetype = L
trigger2 = Life < Floor(LifeMax/3)
trigger2 = p2bodydist X <= 30

trigger3 = EnemyNear(var(45)),stateNo = 5201
trigger3 = EnemyNear(var(45)),movetype = H
trigger3 = p2bodydist X <= 40

;-------------------------------------------------------------------------------
;_bV
[State -3, Dash]
type = ChangeState
value = 100
triggerall = var(59) >= 4 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [18,19])
triggerall = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
triggerall = random <= var(59)*100
trigger1 = p2bodydist X >= 160

;-------------------------------------------------------------------------------
;Oi
[State -3, Fwd]
type = ChangeState
value = 19
triggerall = var(59) >= 4 && Roundstate = 2
triggerall = var(43) = 1 && ctrl && statetype != A
triggerall = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
triggerall = random <= var(59)*100

trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = Life >= Floor(LifeMax/3)
trigger1 = p2bodydist X >= 70

trigger2 = TeamMode = Single || TeamMode = Turns
trigger2 = Life < Floor(LifeMax/3)
trigger2 = p2bodydist X >= 100

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life = 0
trigger3 = Life >= Floor(LifeMax/3)
trigger3 = p2bodydist X >= 70

trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life = 0
trigger4 = Life < Floor(LifeMax/3)
trigger4 = p2bodydist X >= 100

;-------------------------------------------------------------------------------
;
[State -3, Back]
type = ChangeState
value = 18
triggerall = var(59) >= 4 && Roundstate = 2
triggerall = var(43) = 1 && ctrl && statetype != A
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X >= 80 && facing = -1 || Helper(60000+id),RootDist X >= 80 && facing = 1
triggerall = random <= var(59)*100

trigger1 = TeamMode = Single || TeamMode = Turns
trigger1 = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
trigger1 = Life >= Floor(LifeMax/3)
trigger1 = p2bodydist X <= 50

trigger2 = TeamMode = Single || TeamMode = Turns
trigger2 = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
trigger2 = Life < Floor(LifeMax/3)
trigger2 = p2bodydist X <= 80

trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life = 0
trigger3 = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
trigger3 = Life >= Floor(LifeMax/3)
trigger3 = p2bodydist X <= 50

trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life = 0
trigger4 = EnemyNear(var(45)),statetype = L || (EnemyNear(var(45)),movetype = H && EnemyNear(var(45)),statetype = A)
trigger4 = Life < Floor(LifeMax/3)
trigger4 = p2bodydist X <= 80

trigger5 = TeamMode = simul
trigger5 = (stateNo != [120,140])
trigger5 = NumPartner >= 1 && Partner,Life > 0
trigger5 = EnemyNear(var(45)),stateType = L
trigger5 = p2bodydist X <= 50

;-------------------------------------------------------------------------------
;obNWv
[State -3, Back Jump]
type = ChangeState
value = 36
triggerall = var(59) >= 2 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19])
triggerall = EnemyNear(var(45)),statetype = L
trigger1 = EnemyNear(var(45)),stateNo = 5120
trigger1 = EnemyNear(var(45)),AnimTime >= -15
trigger1 = p2bodydist X = [40,120]
trigger1 = random <= var(59)*80

;-------------------------------------------------------------------------------
;_ChuX 
[State -3, Diamond Breath A]
type = ChangeState
value = 1000
triggerall = var(59) >= 2 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A && NumProjID(1000) = 0
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype = L
triggerall = EnemyNear(var(45)),stateNo = 5120
trigger1 = EnemyNear(var(45)),AnimTime >= -15
trigger1 = p2bodydist X = [40,100]
trigger1 = random <= var(59)*90

;-------------------------------------------------------------------------------
;LbN
[State -3, Crouch C]
type = ChangeState
value = 420
triggerall = var(59) >= 2 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype = L
triggerall = EnemyNear(var(45)),stateNo = 5120
trigger1 = EnemyNear(var(45)),AnimTime >= -2
trigger1 = p2bodydist X = [-10,40]

;===============================================================================
;R{ 1
;===============================================================================
; p`
[State -3, Short Stand C]
type = ChangeState
value = 210
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = Enemy,const(size.head.pos.y) <= -60
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [-10,34]
triggerall = random <= var(59)*90
trigger1 = !InGuardDist
trigger1 = EnemyNear(var(45)),moveType != H
trigger2 = EnemyNear(var(45)),MoveType != A
trigger2 = EnemyNear(var(45)),MoveType != H
trigger2 = EnemyNear(var(45)),ctrl = 0

trigger3 = TeamMode = simul
trigger3 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = EnemyNear(var(45)),MoveType = H
trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger4 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
; LbN
[State -3, Short Stand D]
type = ChangeState
value = 230
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = Enemy,const(size.head.pos.y) <= -60
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [-10,15]
triggerall = random <= var(59)*90
trigger1 = !InGuardDist
trigger1 = EnemyNear(var(45)),moveType != H
trigger2 = EnemyNear(var(45)),MoveType != A
trigger2 = EnemyNear(var(45)),MoveType != H
trigger2 = EnemyNear(var(45)),ctrl = 0

trigger3 = TeamMode = simul
trigger3 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = EnemyNear(var(45)),MoveType = H
trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger4 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && StateType != A && Power >= 2000
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),movetype = H
triggerall = EnemyNear(var(45)),statetype = A
triggerall = random <= var(59)*90 || var(59) >= 5
trigger1 = stateNo = 251 && movehit = 1
trigger1 = EnemyNear(var(45)),stateNo = [5000,5100]
trigger1 = animelemtime(5) > 0 && animelemtime(7) < 0
trigger2 = stateNo = 210 && movehit = 1
trigger2 = EnemyNear(var(45)),stateNo = [5000,5100]
trigger2 = animelemtime(8) > 0 && animelemtime(10) < 0
trigger3 = stateNo = 230 && movehit = 1
trigger3 = EnemyNear(var(45)),stateNo = [5000,5100]
trigger3 = animelemtime(6) > 0 && animelemtime(8) < 0 

;-------------------------------------------------------------------------------
;LZ C`
[State -3, Cancel One Inch]
type = ChangeState
value = 251
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),movetype = H
triggerall = EnemyNear(var(45)),statetype != A
trigger1 = stateno = 210 && movecontact = 1
trigger1 = animelemtime(3) > 0 && animelemtime(5) < 0

;-------------------------------------------------------------------------------
;_ChuX 
[State -3, Diamond Breath A]
type = ChangeState
value = 1000
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),movetype = H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = random <= 600-var(59)*100
trigger1 = stateNo = 251 && movecontact = 1
trigger1 = animelemtime(5) > 0 && animelemtime(7) < 0
trigger2 = stateNo = 210 && movecontact = 1
trigger2 = animelemtime(8) > 0 && animelemtime(10) < 0
trigger3 = stateNo = 230 && movecontact = 1
trigger3 = animelemtime(6) > 0 && animelemtime(8) < 0 

;-------------------------------------------------------------------------------
;CXs 
[State -3, Ray Spin D]
type = ChangeState
value = 1033
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),movetype = H
triggerall = EnemyNear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -70
triggerall = random <= var(59)*90
trigger1 = stateNo = 251 && movecontact = 1
trigger1 = animelemtime(5) > 0 && animelemtime(7) < 0
trigger2 = stateNo = 210 && movecontact = 1
trigger2 = animelemtime(8) > 0 && animelemtime(10) < 0
trigger3 = stateNo = 230 && movecontact = 1
trigger3 = animelemtime(6) > 0 && animelemtime(8) < 0 

;-------------------------------------------------------------------------------
;CXs 
[State -3, Ray Spin B]
type = ChangeState
value = 1030
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),alive
trigger1 = EnemyNear(var(45)),movetype = H
trigger1 = EnemyNear(var(45)),statetype != A
trigger1 = stateNo = 251 && movecontact = 1
trigger1 = animelemtime(5) > 0 && animelemtime(7) < 0
trigger2 = EnemyNear(var(45)),movetype = H
trigger2 = EnemyNear(var(45)),statetype != A
trigger2 = stateNo = 210 && movecontact = 1
trigger2 = animelemtime(8) > 0 && animelemtime(10) < 0
trigger3 = EnemyNear(var(45)),movetype = H
trigger3 = EnemyNear(var(45)),statetype != A
trigger3 = stateNo = 230 && movecontact = 1
trigger3 = animelemtime(6) > 0 && animelemtime(8) < 0 

;U
trigger4 = stateNo = 210 && animelemtime(8) > 0 && animelemtime(10) < 0 
trigger4 = !movecontact

;===============================================================================
;R{ 2
;===============================================================================
;LbN
[State -3, Crouch B]
type = ChangeState
value = 420
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype != A
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [-10,40]
triggerall = random <= var(59)*90
trigger1 = !InGuardDist
trigger1 = EnemyNear(var(45)),moveType != H
trigger2 = EnemyNear(var(45)),MoveType != A
trigger2 = EnemyNear(var(45)),MoveType != H
trigger2 = EnemyNear(var(45)),ctrl = 0

trigger3 = TeamMode = simul
trigger3 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = EnemyNear(var(45)),MoveType = H
trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger4 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
; p`
[State -3, S Stand A]
type = ChangeState
value = 200
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -60
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [-10,14]
triggerall = random <= var(59)*30
trigger1 = !InGuardDist
trigger1 = EnemyNear(var(45)),moveType != H
trigger2 = EnemyNear(var(45)),MoveType != A
trigger2 = EnemyNear(var(45)),MoveType != H
trigger2 = EnemyNear(var(45)),ctrl = 0

trigger3 = TeamMode = simul
trigger3 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = EnemyNear(var(45)),MoveType = H
trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger4 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
; p`
[State -3, L Stand A]
type = ChangeState
value = 205
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -60
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [15,30]
triggerall = random <= var(59)*30
trigger1 = !InGuardDist
trigger1 = EnemyNear(var(45)),moveType != H
trigger2 = EnemyNear(var(45)),MoveType != A
trigger2 = EnemyNear(var(45)),MoveType != H
trigger2 = EnemyNear(var(45)),ctrl = 0

trigger3 = TeamMode = simul
trigger3 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = EnemyNear(var(45)),MoveType = H
trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger4 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
; LbN
[State -3, L Stand B]
type = ChangeState
value = 225
triggerall = var(59) >= 1 && Roundstate = 2
triggerall = var(43) = 1 && statetype != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),statetype = S
triggerall = Enemy,const(size.head.pos.y) <= -60
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = p2bodydist X = [15,50]
triggerall = random <= var(59)*30
trigger1 = !InGuardDist
trigger1 = EnemyNear(var(45)),moveType != H
trigger2 = EnemyNear(var(45)),MoveType != A
trigger2 = EnemyNear(var(45)),MoveType != H
trigger2 = EnemyNear(var(45)),ctrl = 0

trigger3 = TeamMode = simul
trigger3 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = EnemyNear(var(45)),MoveType = H
trigger4 = TeamMode = simul
trigger4 = NumPartner >= 1 && Partner,Life > 0
trigger4 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger4 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
;LbN R{p
[State -3, Crouch B]
type = ChangeState
value = 420
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType != A
triggerall = P2bodydist X = [-10,25]
trigger1 = stateNo = 420 && movecontact
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger2 = stateNo = 200 && movecontact
trigger2 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger3 = stateNo = 205 && movecontact
trigger3 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateNo = 225 && movecontact
trigger4 = animelemtime(4) > 1 && animelemtime(6) < 0

;-------------------------------------------------------------------------------
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),StateType != L
triggerall = P2bodydist X >= 25 || EnemyNear(var(45)),StateType = A
triggerall = EnemyNear(var(45)),StateNo = [5000,5100]
triggerall = random <= var(59)*90 || var(59) >= 5
trigger1 = stateNo = 420 && movehit
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger1 = stateNo = 420 && movehit
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger2 = stateNo = 200 && movehit
trigger2 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger3 = stateNo = 205 && movehit
trigger3 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateNo = 225 && movehit
trigger4 = animelemtime(4) > 1 && animelemtime(6) < 0

;-------------------------------------------------------------------------------
;_CAhGbW MAX
[State -3, Diamond Edge MAX]
type = ChangeState
value = 3005
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(43) = 1 && StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType != A
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X > 100 && facing = 1 || Helper(60000+id),RootDist X > 100 && facing = -1
triggerall = P2bodydist X >= 25
triggerall = EnemyNear(var(45)),StateNo = [5000,5100]
triggerall = random <= var(59)*60 || var(59) >= 5
trigger1 = stateNo = 420 && movehit
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger1 = stateNo = 420 && movehit
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger2 = stateNo = 200 && movehit
trigger2 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger3 = stateNo = 205 && movehit
trigger3 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateNo = 225 && movehit
trigger4 = animelemtime(4) > 1 && animelemtime(6) < 0

;-------------------------------------------------------------------------------
;_CAhGbW
[State -3, Diamond Edge]
type = ChangeState
value = 3000
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(43) = 1 && StateType != A && power >= 1000
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType != A
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X > 100 && facing = 1 || Helper(60000+id),RootDist X > 100 && facing = -1
triggerall = P2bodydist X >= 25
triggerall = random <= var(59)*50
trigger1 = stateNo = 420 && movehit
trigger1 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger2 = stateNo = 200 && movehit
trigger2 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger2 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger3 = stateNo = 205 && movehit
trigger3 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger3 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateNo = 225 && movehit
trigger4 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger4 = animelemtime(4) > 1 && animelemtime(6) < 0

;AIxAK[h
trigger5 = (var(59) = [2,3])
trigger5 = stateNo = 420 && moveGuarded
trigger5 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger5 = random <= 500-var(59)*100
trigger6 = (var(59) = [2,3])
trigger6 = stateNo = 200 && moveGuarded
trigger6 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger6 = random <= 500-var(59)*100
trigger7 = (var(59) = [2,3])
trigger7 = stateNo = 205 && moveGuarded
trigger7 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger7 = random <= 500-var(59)*100
trigger8 = (var(59) = [2,3])
trigger8 = stateNo = 225 && moveGuarded
trigger8 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger8 = random <= 500-var(59)*100

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType = S
triggerall = Enemy,const(size.head.pos.y) <= -60
triggerall = P2bodydist X >= 25
trigger1 = stateNo = 420 && movehit
trigger1 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger2 = stateNo = 200 && movehit
trigger2 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger2 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger3 = stateNo = 205 && movehit
trigger3 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger3 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateNo = 225 && movehit
trigger4 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger4 = animelemtime(4) > 1 && animelemtime(6) < 0

;AIxAK[h
trigger5 = (var(59) = [2,3])
trigger5 = stateNo = 420 && moveGuarded
trigger5 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger5 = random <= 500-var(59)*100
trigger6 = (var(59) = [2,3])
trigger6 = stateNo = 200 && moveGuarded
trigger6 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger6 = random <= 500-var(59)*100
trigger7 = (var(59) = [2,3])
trigger7 = stateNo = 205 && moveGuarded
trigger7 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger7 = random <= 500-var(59)*100
trigger8 = (var(59) = [2,3])
trigger8 = stateNo = 225 && moveGuarded
trigger8 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger8 = random <= 500-var(59)*100

;-------------------------------------------------------------------------------
;XC_[V[g
[State -3, Slider shot]
type = ChangeState
value = 260
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType != A
triggerall = P2bodydist X >= 25
trigger1 = stateNo = 420 && movehit
trigger1 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger1 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger2 = stateNo = 200 && movehit
trigger2 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger2 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger3 = stateNo = 205 && movehit
trigger3 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger3 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger4 = stateNo = 225 && movehit
trigger4 = EnemyNear(var(45)),StateNo = [5000,5100]
trigger4 = animelemtime(4) > 1 && animelemtime(6) < 0

;AIxAK[h
trigger5 = (var(59) = [2,3])
trigger5 = stateNo = 420 && moveGuarded
trigger5 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger5 = random <= 500-var(59)*100
trigger6 = (var(59) = [2,3])
trigger6 = stateNo = 200 && moveGuarded
trigger6 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger6 = random <= 500-var(59)*100
trigger7 = (var(59) = [2,3])
trigger7 = stateNo = 205 && moveGuarded
trigger7 = animelemtime(3) > 1 && animelemtime(5) < 0
trigger7 = random <= 500-var(59)*100
trigger8 = (var(59) = [2,3])
trigger8 = stateNo = 225 && moveGuarded
trigger8 = animelemtime(4) > 1 && animelemtime(6) < 0
trigger8 = random <= 500-var(59)*100

;===============================================================================
;CXs R{
;===============================================================================
;_bV
[State -3, Dash]
type = ChangeState
value = 100
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(54) = 1 && var(42) != 3 && StateType != A
triggerall = ctrl || (stateNo = [18,19])  ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = p2bodydist X >= 20

;-------------------------------------------------------------------------------
;Oi
[State -3, Fwd]
type = ChangeState
value = 19
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(54) = 1 && var(42) = 3 && StateType != A
triggerall = ctrl ||(stateNo = [120,140]) || stateNo = 18
triggerall = EnemyNear(var(45)),alive
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = p2bodydist X >= 20

;-------------------------------------------------------------------------------
;
[State -3, Back]
type = ChangeState
value = 18
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(54) = 1 && StateType != A
triggerall = ctrl ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
triggerall = EnemyNear(var(45)),BackEdgeBodyDist <= 20
trigger1 = var(42) = 3 && p2bodydist X <= -10
trigger2 = (var(42) = [1,2]) && p2bodydist X <= 0

;-------------------------------------------------------------------------------
;t[YRv[V
[State -3, Freeze CompRation]
type = ChangeState
value = 3030
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 1 && var(42) = 1 && StateType != A && Power >= 3000
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = P2BodyDist Y = [-90 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20)),-10 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20))]
trigger1 = p2Bodydist X = [-40 + floor(6*(Enemynear(var(45)),vel X)),60 + floor(6*(Enemynear(var(45)),vel X))]
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),vel Y > 0

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 1 && var(42) = 3 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = P2BodyDist Y = [-20 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20)),-1 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20))]
trigger1 = p2Bodydist X = [-40 + floor(6*(Enemynear(var(45)),vel X)),60 + floor(6*(Enemynear(var(45)),vel X))]
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),vel Y > 0

;-------------------------------------------------------------------------------
;n U
[State -3, Stand E]
type = ChangeState
value = 240
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 1 && var(42) = 2 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = P2BodyDist Y = [-35 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20)),-10 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20))]
trigger1 = p2Bodydist X = [-40 + floor(6*(Enemynear(var(45)),vel X)),60 + floor(6*(Enemynear(var(45)),vel X))]
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),vel Y > 0

;===============================================================================
;CXs R{
;===============================================================================
;_bV
[State -3, Dash]
type = ChangeState
value = 100
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(54) = 7 && var(42) = 4 && StateType != A
triggerall = ctrl ||(stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = p2bodydist X >= 40

;-------------------------------------------------------------------------------
;
[State -3, Back]
type = ChangeState
value = 18
triggerall = var(59) >= 3 && RoundState = 2
triggerall = var(54) = 7 && var(42) = 4 && StateType != A
triggerall = ctrl ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = p2bodydist X <= -10

;-------------------------------------------------------------------------------
;n U
[State -3, Stand E]
type = ChangeState
value = 240
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 7 && var(42) = 4 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = P2BodyDist Y = [-35 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20)),-1 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20))]
trigger1 = p2Bodydist X = [-40 + floor(6*(Enemynear(var(45)),vel X)),60 + floor(6*(Enemynear(var(45)),vel X))]
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),vel Y > 0
trigger1 = random <= var(59)*90 || (var(59) >= 4 && Power >= 2000)

;-------------------------------------------------------------------------------
;JE^[VF
[State -3, Counter Shell]
type = ChangeState
value = 1020
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 7 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = P2BodyDist Y = [-35 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20)),-10 - floor(6*(Enemynear(var(45)),vel Y) + (6*(6+1)/2)*fvar(20))]
trigger1 = p2Bodydist X = [-40 + floor(6*(Enemynear(var(45)),vel X)),60 + floor(6*(Enemynear(var(45)),vel X))]
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = EnemyNear(var(45)),vel Y > 0

;===============================================================================
;_ChuX R{
;===============================================================================
;Oi
[State -3, Fwd]
type = ChangeState
value = 19
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 6 && var(41) >= 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = p2Bodydist X >= 40

;-------------------------------------------------------------------------------
;NEoCc 
[State -3, Crow Baiz C]
type = ChangeState
value = 1011
triggerall = var(59) >= 2 && RoundState = 2
triggerall = var(54) = 6 && var(41) = 3 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = p2Bodydist X = [-10,50]

;-------------------------------------------------------------------------------
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 6 && StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = var(41) = 2
trigger1 = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
trigger1 = P2BodyDist Y = [-90 - floor(2*(Enemynear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20)),-10 - floor(2*(Enemynear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20))]
trigger1 = p2Bodydist X >= -40
trigger2 = var(41) = 1
trigger2 = stateNo = 240 && movehit
trigger2 = animelemtime(4) > 0 && animelemtime(6) < 0 

;-------------------------------------------------------------------------------
;n U
[State -3, Stand E]
type = ChangeState
value = 240
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 6 && var(41) = 1 && StateType != A
triggerall = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
triggerall = EnemyNear(var(45)),alive
trigger1 = EnemyNear(var(45)),statetype = A
trigger1 = p2Bodydist X = [-10,50]

;===============================================================================
;  t[YGNXL[W
;===============================================================================
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 2 && StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = stateNo = 240 && movehit = 1
trigger1 = animelemtime(4) > 0 && animelemtime(6) < 0

;===============================================================================
;_ChV[g  t[YGNXL[W
;===============================================================================
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 5 && StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
trigger1 = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
trigger1 = P2BodyDist Y = [-110 - floor(2*(Enemynear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20)),-10 - floor(2*(Enemynear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20))]
trigger1 = p2Bodydist X >= -20

;===============================================================================
;CXs U(X^h)  t[YGNXL[W
;===============================================================================
;t[YGNXL[W
[State -3, Freeze Essence CueJohn]
type = ChangeState
value = 3010
triggerall = var(59) >= 4 && RoundState = 2
triggerall = var(54) = 8 && StateType != A && power >= 2000
triggerall = EnemyNear(var(45)),alive
triggerall = EnemyNear(var(45)),statetype = A
triggerall = EnemyNear(var(45)),vel Y >= 2
trigger1 = ctrl || (stateNo = [18,19]) || (stateNo = [100,102]) ||(stateNo = [120,140])
trigger1 = P2BodyDist Y = [-110 - floor(2*(Enemynear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20)),-10 - floor(2*(Enemynear(var(45)),vel Y) + (2*(2+1)/2)*fvar(20))]
trigger1 = p2Bodydist X >= -20

;===============================================================================
;
;===============================================================================
;XC_[V[g
[State -3, Slider shot]
type = ChangeState
value = 260
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L
triggerall = EnemyNear(var(45)),StateType != A
triggerall = (p2Bodydist X = [60,110])
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = random <= var(59)*40
trigger1 = EnemyNear(var(45)),stateType != A
trigger1 = EnemyNear(var(45)),MoveType != A
trigger1 = EnemyNear(var(45)),moveType != H
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger1 = EnemyNear(var(45)),vel X = 0

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),MoveType = H
trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger3 = EnemyNear(var(45)),MoveType = A

;-------------------------------------------------------------------------------
;_ChuX 
[State -3, Diamond Breath A]
type = ChangeState
value = 1000
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),MoveType != H
triggerall = EnemyNear(var(45)),stateType != A
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = (p2Bodydist X = [80,100])
triggerall = random <= var(59)*40
triggerall = ((var(59) = [1,3]) && Life >= Floor(LifeMax/3)) && (var(59) >= 4 && Life >= Floor(LifeMax/2))
trigger1 = EnemyNear(var(45)),MoveType != A
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger1 = EnemyNear(var(45)),vel X = 0

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),MoveType = H
trigger2 = p2bodydist Y >= -45
trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger3 = EnemyNear(var(45)),MoveType = A
trigger3 = p2bodydist Y >= -45

;-------------------------------------------------------------------------------
;NeBJACX
[State -3, Critical Ice]
type = ChangeState
value = 270
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && StateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = EnemyNear(var(45)),StateType != L && EnemyNear(var(45)),MoveType != H
triggerall = EnemyNear(var(45)),stateType != A
triggerall = EnemyNear(var(45)),StateNo != [32,49]
triggerall = (p2Bodydist X = [110,140])
triggerall = random <= var(59)*40
triggerall = ((var(59) = [1,3]) && Life >= Floor(LifeMax/3)) && (var(59) >= 4 && Life >= Floor(LifeMax/2))
trigger1 = EnemyNear(var(45)),MoveType != A
trigger1 = EnemyNear(var(45)),ctrl = 0
trigger1 = EnemyNear(var(45)),vel X = 0

trigger2 = TeamMode = simul
trigger2 = ((NumEnemy >= 2 && (var(37) = [1,2])) || NumEnemy = 1)
trigger2 = NumPartner >= 1 && Partner,Life > 0
trigger2 = EnemyNear(var(45)),MoveType = H
trigger2 = p2bodydist Y >= -45
trigger3 = TeamMode = simul
trigger3 = NumPartner >= 1 && Partner,Life > 0
trigger3 = (EnemyNear(var(45)),Facing = 1 && Facing = 1) || (EnemyNear(var(45)),Facing = -1 && Facing = -1)
trigger3 = EnemyNear(var(45)),MoveType = A
trigger3 = p2bodydist Y >= -45

;===============================================================================
;
;===============================================================================
;obNXebv
[state -3, Back Step]
Type = ChangeState
Value = 105
triggerall = var(59) >= 1 && RoundState = 2
triggerall = var(43) = 1 && var(38) = 1 && stateType != A
triggerall = ctrl || (stateNo = [100,102]) || (stateNo = [18,19]) || (stateNo = [120,140])
triggerall = (EnemyNear(var(45)),Facing = 1 && Facing = -1) || (EnemyNear(var(45)),Facing = -1 && Facing = 1)
triggerall = EnemyNear(var(45)),statetype != L && EnemyNear(var(45)),movetype != H
triggerall = EnemyNear(var(45)),Numproj = 0
triggerall = NumHelper(55000+id) && NumHelper(60000+id)
triggerall = Helper(55000+id),RootDist X >= 150 && facing = -1 || Helper(60000+id),RootDist X >= 150 && facing = 1
triggerall = p2bodydist X = [80,140]
triggerall = random <= var(59)*70
trigger1 = EnemyNear(var(45)),hitdefattr = SCA,NA
trigger1 = EnemyNear(var(45)),movetype = A






;-------------------------------------------------------------------------------
[State -3, Prevent Undergound Juggles]
type= null
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID); this is just to prevent Simul issues as usual
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y); keeps P2 at the same horizontal distance, but resets his Y position
ignorehitpause= 1

[State -3, Cheap KO]
type=changestate
trigger1= !alive && (stateno=[5000,5010])
trigger1= (prevstateno=[130,131]) || (prevstateno=[140,141]) || (prevstateno=[150,153])
value=5950
ignorehitpause=0

[State -3, Cheap KO]
type=assertspecial
trigger1= (stateno=[5000,5010])
trigger1= (prevstateno=[130,131]) || (prevstateno=[140,141]) || (prevstateno=[150,153])
flag=nokosnd
ignorehitpause=1

[State -3, GetHit Snd]
type=playsnd
triggerall= alive && time=1
triggerall= stateno=5000 || stateno=5010
trigger1= gethitvar(animtype)>=2 && random<500
trigger2= gethitvar(animtype)=1 && random<375
trigger3= gethitvar(animtype)=0 && random<250
value=5000,(random%4)
channel=0
ignorehitpause=1
[State -3, GetHit Snd]
type=playsnd
triggerall= alive && time=1
trigger1= (stateno=5000 || stateno=5010) && numenemy
trigger2= (stateno=5020 || stateno=5070 || stateno=5080)
trigger3= (stateno=5050 || stateno=5100) && (prevstateno!=[5000,5199])
value=5000,(random%4)
channel=0
ignorehitpause=1

[State -3, land]
type = PlaySnd
triggerall = time = 1
trigger1 = StateNo = 1015 || StateNo = 1003
trigger2 = StateNo = 1031 || StateNo = 1032
trigger3 = StateNo = 1035
value =  2+(var(32)*10),2

[State -3, land]
type = PlaySnd
triggerall = time = 1
trigger1 = StateNo = 150 || StateNo = 152
trigger2 = StateNo = 154
value =  1000,0
ignorehitpause=1

[State -3, opponent falling behavior]
type = TargetState
triggerall = numtarget(200)
trigger1 = target(200), alive && target(200), hitfall
value = 5021
ignorehitpause = 1

[State -3, Stop]
type = StopSnd
trigger1 = stateno != 191
trigger1 = stateno != 192
channel = 6

[State -3, Stop]
type = StopSnd
trigger1 = stateno != 1041
trigger1 = stateno != 1040
channel = 5

[State -3,STOP]
type = StopSnd
trigger1 = stateno != 195
trigger1 = stateno != 0
channel = 19

[State -3, Stop]
type = StopSnd
trigger1 = stateno != 191
trigger2 = movetype = H
channel = 18
;------------------------------------------------------------------------------
;---------------------------[EXPLOSION SYSTEM FOR FIRE USERS]-------------------
;--------------------------------------[CRIMSON]--------------------------------
;Double Expl
[Statedef 12500]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5

[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 2
anim = 12505
pos = (-4-var(0)),-35
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 3
anim = 12505
pos = (-40-var(0)),-120
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 4
anim = 12505
pos = (-17-var(0)),-98
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 5
anim = 12505
pos = (-25-var(0)),-48
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 6
anim = 12505
pos = (-45-var(0)),-114
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 8
anim = 12505
pos = (-15-var(0)),-110
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 6

;Normal Expl
[Statedef 12501]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5

[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 2
anim = 12506
pos = (-4-var(0)),-35
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 3
anim = 12506
pos = (-40-var(0)),-120
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 4
anim = 12506
pos = (-17-var(0)),-98
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 5
anim = 12506
pos = (-25-var(0)),-48
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 6
anim = 12506
pos = (-45-var(0)),-114
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 250
trigger1 = time = 8
anim = 12506
pos = (-15-var(0)),-110
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 20

;Pyro Expl
[Statedef 12502]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5

[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 2
anim = 12507
pos = (-41-var(0)),-53
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 3
anim = 12507
pos = (-30-var(0)),-46
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 4
anim = 12507
pos = (26-var(0)),-15
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 5
anim = 12507
pos = (10-var(0)),-94
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 6
anim = 12507
pos = (-19-var(0)),-63
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 8
anim = 12507
pos = (1-var(0)),-59
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 20

;Multi Small Expl
[Statedef 12503]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5
[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 1
range = 20

[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 2
anim = 12508
pos = (-41-var(0)),(-53+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 3
anim = 12508
pos = (-30-var(0)),(-46+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 4
anim = 12508
pos = (26-var(0)),(-15-var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 5
anim = 12508
pos = (10-var(0)),(-94+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 6
anim = 12508
pos = (-19-var(0)),(-63+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 150
trigger1 = time = 8
anim = 12508
pos = (1-var(0)),(-59+var(1))
postype = p1  ;p2,front,back,left,right
bindtime = 4
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 20

;Small Expl
[Statedef 12504]
type    = A
movetype= A
physics = N
sprpriority = 1
velset = 0
facep2 = 1
anim = 1
ctrl = 0

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 65000: STAY PUT >(]
type = Bindtotarget
trigger1 = (!Time)
facing = 0
pos = -10,0
time = -1

[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 0
range = 5
[State 12501, VarRandom]
type = VarRandom
trigger1 = 1
v = 1
range = 20

[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 2
trigger2 = time = 16
trigger3 = time = 40
anim = 12509
pos = (-41-var(0)),(-53+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 4
trigger2 = time = 20
trigger3 = time = 44
anim = 12509
pos = (-30-var(0)),(-46+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 6
trigger2 = time = 24
trigger3 = time = 48
anim = 12509
pos = (26-var(0)),(-15-var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 8
trigger2 = time = 28
trigger3 = time = 52
anim = 12509
pos = (10-var(0)),(-94+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 10
trigger2 = time = 32
trigger3 = time = 56
anim = 12509
pos = (-19-var(0)),(-63+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1
[State 12501, Explod]
type = Explod
triggerall = random <= 500
trigger1 = time = 12
trigger2 = time = 36
trigger3 = time = 60
anim = 12509
pos = (1-var(0)),(-59+var(1))
postype = p2  ;p2,front,back,left,right
bindtime = 1
random = 50,50
sprpriority = 3
ownpal = 1

[State 1302, Destroy]
type = DestroySelf
trigger1 = time = 62
;------------------------------------------------------------------------------
;DREAMCANCEL Helper States
[Statedef 40000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 16003
sprpriority = -1

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Explod] ;DREAMCANCEL
type = Explod
trigger1 = !time
anim = 16000
ID = 16000
pos = 0,75;160     ;118 in KOFXI ...
facing = 1
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 776
ignorehitpause = 1
persistent = 0
bindtime = 68
ownpal = 1
removeongethit = 0

[State 1000, Explod] ;Marquee
type = Explod
trigger1 = !time
anim = 16001
ID = 16001
pos = 0,75
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 777
bindtime = 68
ignorehitpause = 1
persistent = 0

[State 1000, Explod] ;Black
type = Explod
trigger1 = !time
anim = 16002
ID = 16002
pos = 0,75
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 775
bindtime = 68
ignorehitpause = 1
persistent = 0
trans = addalpha
alpha = 128,128

[State 65000: DestroySelf]
type = DestroySelf
trigger1 = time = 68

;DREAMCANCEL Helper States
[Statedef 11111]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 16003
sprpriority = -1

[State 111111, DestroySelf]
type = DestroySelf
trigger1 = time = 80

;DREAMCANCEL Helper States
[Statedef 40005]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0
ownpal = 1
anim = 16003
sprpriority = -1

[State 7001, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Explod] ;DREAMCANCEL
type = Explod
trigger1 = !time
anim = 16004
ID = 16004
pos = 0,75;160     ;118 in KOFXI ...
facing = 1
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 776
ignorehitpause = 1
persistent = 0
bindtime = 68
ownpal = 1
removeongethit = 0

[State 1000, Explod] ;Marquee
type = Explod
trigger1 = !time
anim = 16005
ID = 16005
pos = 0,75
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 777
bindtime = 68
ignorehitpause = 1
persistent = 0

[State 1000, Explod] ;Black
type = Explod
trigger1 = !time
anim = 16006
ID = 16006
pos = 0,75
postype = right
supermove = 1
supermovetime = 68
pausemovetime = 68
scale = .5,.5
sprpriority = 775
bindtime = 68
ignorehitpause = 1
persistent = 0
trans = addalpha
alpha = 128,128

[State 65000: DestroySelf]
type = DestroySelf
trigger1 = time = 68

;----------------------------[2002 UM MAX2 BG]----------------------------------
[Statedef 40001]
anim = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15600)
trigger1 = !time
anim = 15600
ID = 15600
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 10
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1
persistent = 0
ownpal = 1

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15601) < 2
trigger1 = !time
trigger2 = (time%10) = 0
anim = 15600
ID = 15601
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1
ownpal = 1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15610)
trigger1 = !time
anim = 15601
ID = 15610
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
persistent = 0
bindtime = -1
ownpal = 1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15611) < 2
trigger1 = !time
trigger2 = (time%20) = 0
anim = 15601
ID = 15611
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1
ownpal = 1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15620)
trigger1 = !time
anim = 15602
ID = 15620
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
persistent = 0
bindtime = -1
ownpal = 1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15621) < 2
trigger1 = !time
trigger2 = (time%40) = 0
anim = 15602
ID = 15621
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1
ownpal = 1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15630)
trigger1 = !time
anim = 15603
ID = 15630
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
persistent = 0
bindtime = -1
ownpal = 1

[State 21321, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
ID = 15600
scale = 0,0

[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15601
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15610
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15611
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15620
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15621
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15630
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(49)
id = 15631
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15601
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15610
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15611
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15620
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15621
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15630
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(49)
id = 15631
scale = 1,1

[State 40001, Glass Break]
type = ChangeState
trigger1 = root, stateno != [3030,3031]
trigger2 = WinKO
value = stateno+1

[Statedef 40002]
anim = 9999

[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15600
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15601
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15610
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15611
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15620
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15621
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15630
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15631

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S14001,0
;;volume = 200

[State 40001, Glass Break]
type = Explod
triggerall = !numexplod(15640)
trigger1 = !time
anim = 15604
ID = 15640
pos = 0,0
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
scale = 1,1
sprpriority = -20
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;--------------------------[2002 UM MAX2 PORTRAIT]------------------------------
[Statedef 40003]
anim = 9999

[State 40003, VarSet]
type = VarSet
triggerall = enemy, numhelper(40003)
triggerall = !enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "David Demianoff"
trigger6 = enemy, authorname = "Scal"
trigger7 = enemy, authorname = "Kung Fu Man"
trigger8 = enemy, authorname = "KoopaKoot"
trigger9 = enemy, authorname = "Anjel"
trigger10 = enemy, authorname = "David Demianoff & Kung Fu Man"
trigger11 = enemy, authorname = "LegendaryXM90"
trigger12 = enemy, authorname = "Raposo"
trigger13 = enemy, authorname = ".\/."
var(0) = 1

[State 40003, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "David Demianoff"
trigger6 = enemy, authorname = "Scal"
trigger7 = enemy, authorname = "Kung Fu Man"
trigger8 = enemy, authorname = "KoopaKoot"
trigger9 = enemy, authorname = "Anjel"
trigger10 = enemy, authorname = "David Demianoff & Kung Fu Man"
trigger11 = enemy, authorname = "LegendaryXM90"
trigger12 = enemy, authorname = "Raposo"
trigger13 = enemy, authorname = ".\/."
var(0) = 1

[State 40001, P1 BG]
type = Explod
triggerall = !numexplod(15650)
triggerall = teamside = 1
trigger1 = !time
anim = 15605
ID = 15650
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1

[State 40001, P2 BG]
type = Explod
triggerall = !numexplod(15651)
triggerall = teamside = 2
trigger1 = !time
anim = 15606
ID = 15651
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -20
ownpal = 1
ignorehitpause = 1

[State 40001, P1 PORTRAIT]
type = Explod
triggerall = !numexplod(15660)
triggerall = teamside = 1
trigger1 = !time
anim = 15607
ID = 15660
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40001, P2 PORTRAIT]
type = Explod
triggerall = !numexplod(15661)
triggerall = teamside = 2
trigger1 = !time
anim = 15607
ID = 15661
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15650
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15650
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15651
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15651
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15660
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15660
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15661
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15661
scale = 1,1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 60

[Statedef 40004]
anim = 9999

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1


;---------------------------[KOF K.O. SYSTEM]-----------------------------------
;This is as accurate as it'll get with MUGEN's K.O. slow system.
[Statedef 50000]
ctrl = 0
anim = 9999
ownpal = 1

[State 50000, VarSet]
type = VarSet
trigger1 = root, stateno = [200,991]
var(0) = 1

[State 50000, PlaySnd]
type = PlaySnd
trigger1 = IsHelper(50000) && !time
value = 3,18
volume = 255
channel = 1
ignorehitpause = 1

[State 50000, PlaySnd]
type = PlaySnd
trigger1 = IsHelper(50001) && !time
value = 3,19
volume = 255
channel = 1
ignorehitpause = 1

[State 3000, AssertSpecial]
type = AssertSpecial
triggerall = !var(0)
trigger1 = time = [0,17]
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = !time
value = 0,0,0
time = 0;6
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 1
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 2
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 3
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 4
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 5
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 7
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 9
value = 255,0,0
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 11
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor]
type = EnvColor
triggerall = !var(0)
trigger1 = time = 13
value = 255,0,0
time = 2
under = 1
ignorehitpause = 1

[State 3501, EnvColor];Must last two ticks!
type = EnvColor
trigger1 = time = 15
value = 0,0,0
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor];One tick.
type = EnvColor
trigger1 = time = 16
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[State 3501, EnvColor];One tick.
type = EnvColor
triggerall = !var(0)
trigger1 = time = 17
value = 255,0,0
time = 1
under = 1
ignorehitpause = 1

;===============================================================================
;AINwp[
;===============================================================================
[StateDef 90000]
Anim = 0
Ctrl = 0

[state 10000]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 10000]
Type = SelfState
Trigger1 = !IsHelper
Value = 0

[state 10000]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

[State 10000]
Type = VarSet
Trigger1 = Command = "up" && Root,Command = "up"
Trigger2 = Command = "down" && Root,Command = "down"
Trigger3 = Command = "back" && Root,Command = "back"
Trigger4 = Command = "fwd" && Root,Command = "fwd"
Trigger5 = Command = "a" && Root,Command = "a"
Trigger6 = Command = "b" && Root,Command = "b"
Trigger7 = Command = "c" && Root,Command = "c"
Trigger8 = Command = "x" && Root,Command = "x"
Trigger9 = Command = "y" && Root,Command = "y"
Trigger10 = Command = "z" && Root,Command = "z"
Trigger11 = Command = "start" && Root,Command = "start"
V = 59
Value = -1

[State 10000]
Type = DestroySelf
TriggerAll = IsHelper
Trigger1 = Root,Var(59) > 0 || Var(59) = -1
Trigger2 = Command = "up" && Root,Command = "up"
Trigger3 = Command = "down" && Root,Command = "down"
Trigger4 = Command = "back" && Root,Command = "back"
Trigger5 = Command = "fwd" && Root,Command = "fwd"
Trigger6 = Command = "a" && Root,Command = "a"
Trigger7 = Command = "b" && Root,Command = "b"
Trigger8 = Command = "c" && Root,Command = "c"
Trigger9 = Command = "x" && Root,Command = "x"
Trigger10 = Command = "y" && Root,Command = "y"
Trigger11 = Command = "z" && Root,Command = "z"
Trigger12 = Command = "start" && Root,Command = "start"

[State 10000]
Type = VarSet
TriggerAll = Var(59) !=-1
Trigger1 = Root,Command = "up"
Trigger2 = Root,Command = "down"
Trigger3 = Root,Command = "back"
Trigger4 = Root,Command = "fwd"
Trigger5 = Root,Command = "a"
Trigger6 = Root,Command = "b"
Trigger7 = Root,Command = "c"
Trigger8 = Root,Command = "x"
Trigger9 = Root,Command = "y"
Trigger10 = Root,Command = "z"
Trigger11 = Root,Command = "start"
V = 59
Value = 1

;===============================================================================
;EhJnwp[
;===============================================================================
[StateDef 85000]
Anim = 0
Ctrl = 0

[state 85000]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 85000]
Type = SelfState
Trigger1 = !IsHelper
Value = 0

[state 85000]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

[State 85000]
Type = DestroySelf
triggerall = IsHelper
trigger1 = var(58) || Root,var(58)
trigger2 = Roundstate = 2
trigger2 = Root,var(44) <= 800

;===============================================================================
;[wp[
;===============================================================================
;Xe[WE[op
[Statedef 55000]
Type = A
Ctrl = 0
Anim = 9999
Velset = -5,0
Movetype = I
Physics = N
Sprpriority = 1

[state 55000]
type = AssertSpecial
trigger1 = 1
flag = invisible

[state 55000]
Type=Projectile
Trigger1 = time=0
Velocity = -5,0
ProjID = 55000+root,id
Projanim = 9999
Offset = 0,0
projstagebound = 0
Projedgebound = 100000
Projremovetime = -1

[state 55000]
type = velset
Trigger1 = !Root,NumProjID(55000+root,id)
Trigger1 = time>0
x=0
y=0

[state 55000]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT


;Xe[W[op
[Statedef 60000]
Type = A
Ctrl = 0
Anim = 9999
Velset = -5,0
Movetype = I
Physics = N
Sprpriority = 1

[state 60000]
type = AssertSpecial
trigger1 = 1
flag = invisible

[state 60000]
Type = Projectile
Trigger1 = time=0
Velocity = -5,0
ProjID = 60000+root,id
Projanim = 9999
Offset = 0,0
projstagebound = 0
Projedgebound = 100000
Projremovetime = -1

[state 60000]
type = velset
Trigger1 = !Root,NumProjID(60000+root,id)
Trigger1 = time>0
x=0
y=0

[state 60000]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

