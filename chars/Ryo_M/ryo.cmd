;===========================================================================
; CMD file for Ryo Sakazaki
;===========================================================================
;AI起動コマンド 

[Command]
name = "AI0"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI1"
command = b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI2"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI3"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI4"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI5"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI6"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI7"
command = F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI8"
command = D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI9"
command = B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI10"
command = U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI11"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI12"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI13"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI14"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI15"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI16"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI17"
command = a,B,c,x,y,z,s,B,D,F,U,a,b,c,x,y,z,s,s
time = 0
[Command]
name = "AI18"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI19"
command = b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI20"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI21"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI22"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI23"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI24"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI25"
command = F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI26"
command = D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI27"
command = B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI28"
command = U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI29"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI30"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI31"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI32"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI33"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI34"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI35"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI36"
command = z,z,z,z,z,z,a,a,a,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI37"
command = z,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,z,z,z
time = 0
[Command]
name = "AI38"
command = z,z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z
time = 0
[Command]
name = "AI39"
command = z,z,z,z,z,a,a,a,z,z,z,z,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI40"
command = z,z,z,z,a,a,a,z,z,z,z,a,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI41"
command = z,z,z,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z
time = 0
[Command]
name = "AI42"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI43"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,a,a,z
time = 0
[Command]
name = "AI44"
command = z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,a,a,a,z
time = 0
[Command]
name = "AI45"
command = z,z,z,z,z,z,a,a,z,z,z,z,z,a,a,a,a,z,z
time = 0
[Command]
name = "AI46"
command = z,z,z,z,z,z,z,z,a,a,a,a,a,a,z,z,z,z,z
time = 0
[Command]
name = "AI47"
command = z,z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI48"
command = z,z,z,z,z,a,a,a,z,z,z,a,a,a,z,z,a,z,a
time = 0
[Command]
name = "AI49"
command = z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z,z
time = 0
[Command]
name = "AI50"
command = z,z,z,a,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI51"
command = z,z,z,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI52"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI53"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z
time = 0
[Command]
name = "AI54"
command = z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,a,a,a,z,z,z,z
time = 0
[Command]
name = "AI55"
command = z,z,z,z,z,z,a,a,z,z,z,z,z,a,a,a,a,z,z,z,z,z
time = 0
[Command]
name = "AI56"
command = z,z,z,z,z,z,z,z,a,a,a,a,a,a,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI57"
command = z,z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI58"
command = z,z,z,z,z,a,a,a,z,z,z,a,a,a,z,z,a,z,a,z,z,z
time = 0
[Command]
name = "AI59"
command = z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI60"
command = z,z,z,a,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z,z,z
time = 0

;-| Super Motions |---------------------------------------------------------

[Command]
name = "haou_x"
command = ~F, B, DB, D, DF, F, x
time = 20

[Command]
name = "haou_y"
command = ~F, B, DB, D, DF, F, y
time = 20

[Command]
name = "haou_xy"
command = ~F, B, DB, D, DF, F, x+y
time = 20

[Command]
name = "tenti"
command = ~D, F, D, F, x
time = 20

[Command]
name = "tenti"
command = ~D, F, D, F, y
time = 20

[Command]
name = "tenti_xy"
command = ~D, F, D, F, x+y
time = 20

[Command]
name = "ryuuko_x"
command = ~D, F, D, B, x
time = 20

[Command]
name = "ryuuko_y"
command = ~D, F, D, B, y
time = 20

[Command]
name = "ryuuko_xy"
command = ~D, F, D, B, x+y
time = 20

;-| Special Motions |-------------------------------------------------------

[Command]
name = "koou_x"
command = ~D, DF, F, x

[Command]
name = "koou_y"
command = ~D, DF, F, y

[Command]
name = "kohou_x"
command = ~F, D, DF, x

[Command]
name = "kohou_y"
command = ~F, D, DF, y

[Command]
name = "hien_a"
command = ~F, D, B, a
Time = 20
[Command]
name = "hien_a"
command = ~F, DF, B, a
Time = 20
[Command]
name = "hien_a"
command = ~F, DB, B, a
Time = 20

[Command]
name = "hien_b"
command = ~F, D, B, b
Time = 20
[Command]
name = "hien_b"
command = ~F, DF, B, b
Time = 20
[Command]
name = "hien_b"
command = ~F, DB, B, b
Time = 20

[Command]
name = "raijin_a"
command = ~D, DF, F, a

[Command]
name = "raijin_b"
command = ~D, DF, F, b

[Command]
name = "shippuu_x"
command = ~D, DB, B, x

[Command]
name = "shippuu_y"
command = ~D, DB, B, y

[Command]
name = "zannretu_x"
command = ~F, B, F, x

[Command]
name = "zannretu_y"
command = ~F, B, F, y

[Command]
name = "renbu"
command = ~F, D, B, x
Time = 20
[Command]
name = "renbu"
command = ~F, DF, B, x
Time = 20
[Command]
name = "renbu"
command = ~F, DB, B, x
Time = 20
[Command]
name = "renbu"
command = ~F, D, B, y
Time = 20
[Command]
name = "renbu"
command = ~F, DF, B, y
Time = 20
[Command]
name = "renbu"
command = ~F, DB, B, y
Time = 20

;-| Button Combination |----------------------------------------------------

[Command]
name = "ax"
command = a+x
time = 1

[Command]
name = "by"
command = b+y
time = 1

;-| Dir + Button |----------------------------------------------------------

[Command]
name = "fwd_a"
command = /F,a
time = 1

[Command]
name = "fwd_b"
command = /F,b
time = 1

[Command]
name = "fwd_x"
command = /F,x
time = 1

[Command]
name = "fwd_y"
command = /F,y
time = 1

[Command]
name = "back_b"
command = /B,b
time = 1

[Command]
name = "back_y"
command = /B,y
time = 1

[Command]
name = "downfwd_a"
command = /DF,a
time = 1

[Command]
name = "downfwd_y"
command = /DF,y
time = 1

;-| Single Button |---------------------------------------------------------

[Command]
name = "a"
command = a
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "start"
command = s
time = 1

;-| Do not remove! |--------------------------------------------------------

[Command]
name = "recovery"
command = x+y
time = 1

[Command]
name = "recovery"
command = y+z
time = 1

[Command]
name = "recovery"
command = x+z
time = 1

[Command]
name = "recovery"
command = a+b
time = 1

[Command]
name = "recovery"
command = b+c
time = 1

[Command]
name = "recovery"
command = a+c
time = 1

[Command]
name = "recovery"
command = a+x
time = 1

[Command]
name = "recovery"
command = z
time = 1

[Command]
name = "FF"
command = F, F
time = 10

[Command]
name = "BB"
command = B, B
time = 10

[Command]
name = "holdfwd"
command = /$F
time = 1

[Command]
name = "holdback"
command = /$B
time = 1

[Command]
name = "holdup"
command = /$U
time = 1

[Command]
name = "holddown"
command = /$D
time = 1

;-----------------------------------------------------------------------

[command]
name="fwd"
command=F
time=1
[command]
name="back"
command=B
time=1
[command]
name="up"
command=U
time=1
[command]
name="down"
command=D
time=1

[State -3, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(20000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(30)=0
Trigger1=(PrevStateNo=[191,195])||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=20000
ID=20000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

;念のため↓も付けておく
[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(20000)
trigger1= stateno!=20000
value=20000

;------------------------------------------------------------------------------------------
; 下の記述↓は絶対に消さないでください。
;------------------------------------------------------------------------------------------
[Statedef -1]
;------------------------------------------------------------------------------------------
;ここより↓AI記述
;------------------------------------------------------------------------------------------

;AI起動スイッチ

[State -1, AI]
type = VarSet
triggerall = !var(30)
Triggerall = RoundState = [1,2]
trigger1 = Command = "AI0"
trigger2 = Command = "AI1"
trigger3 = Command = "AI2"
trigger4 = Command = "AI3"
trigger5 = Command = "AI4"
trigger6 = Command = "AI5"
trigger7 = Command = "AI6"
trigger8 = Command = "AI7"
trigger9 = Command = "AI8"
trigger10 = Command = "AI9"
trigger11 = Command = "AI10"
trigger12 = Command = "AI11"
trigger13 = Command = "AI12"
trigger14 = Command = "AI13"
trigger15 = Command = "AI14"
trigger16 = Command = "AI15"
trigger17 = Command = "AI16"
trigger18 = Command = "AI17"
trigger19 = Command = "AI18"
trigger20 = Command = "AI19"
trigger21 = Command = "AI20"
trigger22 = Command = "AI21"
trigger23 = Command = "AI22"
trigger24 = Command = "AI23"
trigger25 = Command = "AI24"
trigger26 = Command = "AI25"
trigger27 = Command = "AI26"
trigger28 = Command = "AI27"
trigger29 = Command = "AI28"
trigger30 = Command = "AI29"
trigger31 = Command = "AI30"
trigger32 = Command = "AI31"
trigger33 = Command = "AI32"
trigger34 = Command = "AI33"
trigger35 = Command = "AI34"
trigger36 = Command = "AI35"
trigger37 = Command = "AI36"
trigger38 = Command = "AI37"
trigger39 = Command = "AI38"
trigger40 = Command = "AI39"
trigger41 = Command = "AI40"
trigger42 = Command = "AI41"
trigger43 = Command = "AI42"
trigger44 = Command = "AI43"
trigger45 = Command = "AI44"
trigger46 = Command = "AI45"
trigger47 = Command = "AI46"
trigger48 = Command = "AI47"
trigger49 = Command = "AI48"
trigger50 = Command = "AI49"
trigger51 = Command = "AI50"
trigger52 = Command = "AI51"
trigger53 = Command = "AI52"
trigger54 = Command = "AI53"
trigger55 = Command = "AI54"
trigger56 = Command = "AI55"
trigger57 = Command = "AI56"
trigger58 = Command = "AI57"
trigger59 = Command = "AI58"
trigger60 = Command = "AI59"
trigger61 = Command = "AI60"
trigger62 = numhelper(10000)
trigger62 = helper(10000),var(30)
;trigger63 = 1 ;←観戦用スイッチ左端の「;」を消すとAI常時起動。

var(30) = 5 ;←ここの数値を変更でAIレベル変化1〜5まで ////AIレベル変更スイッチ////

;//////////////////////////////////////////////////////////////////////////
;//////////////////////////////////////////////////////////////////////////
;
;KOF98ver.限定 KOF2001var.では機能しません。
;虎煌砲MODE：
;
;虎煌拳を弱→強の順に打つと、画面に弱虎煌拳が残っていても強虎煌拳が打てる。
;これを利用して距離を取ってひたすら虎煌拳、これはヒドイってレベルしかもそんなに強くはない、あくまでも遊びモードですｗ
;普通の対戦では使わないほうがいいでしょう。まともな勝負にならなくなっちゃいますYO。
;
;スイッチはすぐ↓ 基本はOFF
;//////////////////////////////////////////////////////////////////////////
;//////////////////////////////////////////////////////////////////////////

;※KOF98ver.のみ対応
[State -3, 虎煌砲MODEスイッチ ON/OFF]
Type = varset
triggerall = var(30) >= 1
triggerall = Roundstate = 2
trigger1   = Alive
var(35) = 0 ;←0でOFF,1でON

;//////////////////////////////////////////////////////////////////////////

;------------------------------------------------------------------------------------------
;デバッグ表示

[State -1,]; デバッグ表示1
type = DisplayToClipboard
trigger1 = 1
text = "AI = %d,V31 = %d,V32 = %d,V35 = %d"
params = Var(30),Var(31),Var(32),Var(35)
ignorehitpause = 1

[State -1,]; デバッグ表示2
type = AppendToClipboard
trigger1 = 1
text = "\nBodyDist X=%d,Y=%d, vel X=%d,Y=%d, pos Y=%d"
params = floor(P2BodyDist X),ceil(P2BodyDist Y),floor(vel X),ceil(vel Y),floor(pos y)
ignorehitpause = 1

;------------------------------------------------------------------------------------------
;ﾀｯｸﾞ時生死確認var

[State -1,tag]
type = Varset
trigger1 = var(30)
fvar(30) = IfElse((!EnemyNear,Alive && NumEnemy = 2),1,0)

;------------------------------------------------------------------------------------------
;コンボ追撃var

[State -1, 極限流連舞拳:ヒット確認]
type = varset
triggerall = var(30)
trigger1 = stateno = 1100 || prevstateno = 1100
trigger1 = enemynear(floor(fvar(30))),movetype = H
var(31) = 1

[State -1, var(31):リセット]
type = varset
triggerall = var(30)
triggerall = var(31)=1
trigger1 = enemynear(floor(fvar(30))),statetype = L
trigger2 = enemynear(floor(fvar(30))),statetype != A
trigger3 = enemynear(floor(fvar(30))),movetype = A
trigger4 = enemynear(floor(fvar(30))),ctrl=1
trigger5 = stateno = 1010
trigger6 = p2stateno = 52000 && p2movetype = I && enemynear,authorname = "jin"
var(31) = 0

[State -1, 虎煌拳:ヒット確認]
type = varset
triggerall = var(30)
trigger1 = (stateno = [1000,1005])&&(ProjHitTime(6010) = 1)
trigger1 = enemynear(floor(fvar(30))),movetype = H
var(32) = 1

[State -1, var(32):リセット]
type = varset
triggerall = var(30)
triggerall = var(32)=1
trigger1 = enemynear(floor(fvar(30))),statetype = L
trigger2 = enemynear(floor(fvar(30))),statetype != A
trigger3 = enemynear(floor(fvar(30))),movetype = A
trigger4 = enemynear(floor(fvar(30))),ctrl=1
trigger5 = stateno = 1010
trigger6 = p2stateno = 52000 && p2movetype = I && enemynear,authorname = "jin"
var(32) = 0

;-------------------------------------------------------------------------------
;追撃:極限流連舞拳後

[State -1, 暫烈拳-2]
type = ChangeState
value = 1055
triggerall = var(30)>2
triggerall = var(31) = 1
triggerall = roundstate = 2
triggerall = random <= 999
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = H
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
trigger1 = p2bodydist x = [-20,50]

;-------------------------------------------------------------------------------
;追撃:2001.ver虎煌拳-2後

[State -1, kof2001ver.虎咆-1]
type = ChangeState
value = 1010
triggerall = var(30)>2
triggerall = var(32) = 1
triggerall = roundstate = 2
triggerall = random <= 999
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = H
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
trigger1 = p2bodydist x = [-10,31]

;-------------------------------------------------------------------------------
;切り替えし(リバーサル)

[State -1, kof2001ver.虎咆-1]
type = ChangeState
value = 1015
triggerall = var(30) >3
TriggerAll = !var(1)
triggerall = power >= 2000 
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = enemynear(floor(fvar(30))),StateType != L
triggerall = enemynear(floor(fvar(30))),StateType != A
triggerall = enemynear(floor(fvar(30))),MoveType != H
triggerall = ctrl && prevstateno = 5120 && time <= 1
TriggerAll = Random<= var(30)*200
TriggerAll = enemynear(floor(fvar(30))),AnimTime <= -6 
trigger1 = enemynear(floor(fvar(30))),StateType != A
trigger1 = enemynear(floor(fvar(30))),MoveType = A
trigger1 = P2BodyDist X = [-15+floor(6*(enemynear(floor(fvar(30))),vel X)),30+floor(6*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= 0

[State -1, kof2001ver.虎咆-1]
type = ChangeState
value = 1010
triggerall = var(30) >3
TriggerAll = !var(1)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = enemynear(floor(fvar(30))),StateType != L
triggerall = enemynear(floor(fvar(30))),MoveType != H
triggerall = ctrl && prevstateno = 5120 && time <= 1
TriggerAll = Random<= var(30)*200
TriggerAll = enemynear(floor(fvar(30))),AnimTime <= -6 
trigger1 = enemynear(floor(fvar(30))),StateType = A
trigger1 = P2BodyDist X = [-15+floor(6*(enemynear(floor(fvar(30))),vel X)),30+floor(6*(enemynear(floor(fvar(30))),vel X))]
trigger1 = P2BodyDist Y = [-40-floor(6*(enemynear(floor(fvar(30))),vel Y)+(6*(6+1)/2)*fvar(20)),0-floor(6*(enemynear(floor(fvar(30))),vel Y)+(6*(6+1)/2)*fvar(20))]
trigger1 = enemynear(floor(fvar(30))),vel X >= 0
trigger1 = enemynear(floor(fvar(30))),vel Y >= 0
trigger2 = enemynear(floor(fvar(30))),StateType != A
trigger2 = enemynear(floor(fvar(30))),MoveType = A
trigger2 = P2BodyDist X = [-15+floor(6*(enemynear(floor(fvar(30))),vel X)),30+floor(6*(enemynear(floor(fvar(30))),vel X))]
trigger2 = p2bodydist y >= -40

[State -1, kof98ver.虎咆-1]
type = ChangeState
value = 1080
triggerall = var(30) >3
triggerall = Var(1)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = enemynear(floor(fvar(30))),StateType != L
triggerall = enemynear(floor(fvar(30))),MoveType != H
triggerall = ctrl && prevstateno = 5120 && time <= 1
TriggerAll = Random<= var(30)*200
TriggerAll = enemynear(floor(fvar(30))),AnimTime <= -4 
trigger1 = enemynear(floor(fvar(30))),StateType = A
trigger1 = P2BodyDist X = [-15+floor(4*(enemynear(floor(fvar(30))),vel X)),38+floor(4*(enemynear(floor(fvar(30))),vel X))]
trigger1 = P2BodyDist Y = [-40-floor(4*(enemynear(floor(fvar(30))),vel Y)+(4*(4+1)/2)*fvar(20)),0-floor(4*(enemynear(floor(fvar(30))),vel Y)+(4*(4+1)/2)*fvar(20))]
trigger1 = enemynear(floor(fvar(30))),vel X >= 0
trigger1 = enemynear(floor(fvar(30))),vel Y >= 0
trigger2 = enemynear(floor(fvar(30))),StateType != A
trigger2 = enemynear(floor(fvar(30))),MoveType = A
trigger2 = P2BodyDist X = [-15+floor(4*(enemynear(floor(fvar(30))),vel X)),38+floor(4*(enemynear(floor(fvar(30))),vel X))]
trigger2 = p2bodydist y >= -40

;-------------------------------------------------------------------------------
;切り替えし

[State -1, 龍虎乱舞(MAX)]
Type = ChangeState
Value = 3040
TriggerAll = var(30)
triggerall = power >= 2000 
TriggerAll = StateType!=A
TriggerAll = RoundState=2
triggerall = enemynear(floor(fvar(30))),statetype != L
TriggerAll = enemyNear(floor(fvar(30))),MoveType=A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
TriggerAll = EnemyNear(floor(fvar(30))),AnimTime<=-13 
TriggerAll = Enemynear(floor(fvar(30))),Time>=30||(!Time&&var(30)>3)||var(30)>4
Triggerall = P2BodyDist X = [-5,50]
triggerall = P2BodyDist Y >= -35
Triggerall = Random<=(var(30))*200 
Trigger1 = Enemynear(floor(fvar(30))),Time>=50||var(30)>4
Trigger2 = (PrevStateNo=[5000,5270])
Trigger3 = (PrevStateNo=[120,159])

[State -1, 覇王翔吼拳MAX]
type  = ChangeState
value = 3010
triggerall = var(30)>3
triggerall = Roundstate = 2
triggerall = statetype != A
triggerall = power >= 2000
triggerall = EnemyNear(floor(fvar(30))),AnimTime <= -15
TriggerAll = Enemynear(floor(fvar(30))),Time>=30||(!Time&&var(30)>3)||var(30)>3
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = EnemyNear(floor(fvar(30))),stateno != [40,44]
triggerall = EnemyNear(floor(fvar(30))),stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
triggerall = !enemynear(floor(fvar(30))),numproj
trigger1 = P2BodyDist X >= 100
trigger1 = P2BodyDist Y >= -35
trigger1 = p2statetype = A && P2Movetype != H
trigger1 = Random<=(var(30))*200 
Trigger2 = enemyNear(floor(fvar(30))),MoveType=A
trigger2 = P2BodyDist X >= 150
trigger2 = P2BodyDist Y >= -35
trigger2 = Random<=(var(30))*200 

[State -1, kof2001虎咆-2]
Type = ChangeState
Value = 1015
TriggerAll = var(30)>2
TriggerAll = !var(1)
TriggerAll = RoundState=2
TriggerAll = StateType!=A
triggerall = power >= 2000
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
TriggerAll = enemyNear(floor(fvar(30))),MoveType=A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
TriggerAll = EnemyNear(floor(fvar(30))),AnimTime<=-6 || var(30)<3
TriggerAll = Enemynear(floor(fvar(30))),Time>=30||(!Time&&var(30)>3)||var(30)>3
triggerall = P2BodyDist X = [-10,30]
triggerall = P2BodyDist Y >=0
Triggerall = Random<=(var(30))*200
Trigger1 = Enemynear(floor(fvar(30))),Time>=50||var(30)>4
Trigger2 = (PrevStateNo=[5000,5270])
Trigger3 = (PrevStateNo=[120,159])
Trigger4 = (PrevStateNo=[200,640])

[State -1, kof2001虎咆-1]
Type = ChangeState
Value = 1010
TriggerAll = var(30)>2
TriggerAll = !var(1)
TriggerAll = StateType!=A
TriggerAll = RoundState=2
triggerall = enemynear(floor(fvar(30))),statetype != L
TriggerAll = enemyNear(floor(fvar(30))),MoveType=A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
TriggerAll = EnemyNear(floor(fvar(30))),AnimTime<=-6 || var(30)<3
TriggerAll = Enemynear(floor(fvar(30))),Time>=30||(!Time&&var(30)>3)||var(30)>3
triggerall = P2BodyDist X = [-10,35]
triggerall = P2BodyDist Y >=-40
Triggerall = Random<=(var(30))*200
Trigger1 = Enemynear(floor(fvar(30))),Time>=50||var(30)>4
Trigger2 = (PrevStateNo=[5000,5270])
Trigger3 = (PrevStateNo=[120,159])
Trigger4 = (PrevStateNo=[200,640])

[State -1, kof98虎咆-1]
Type = ChangeState
Value = 1080
TriggerAll = var(30)>2
TriggerAll = var(1)
TriggerAll = StateType!=A
TriggerAll = RoundState=2
triggerall = enemynear(floor(fvar(30))),statetype != L
TriggerAll = enemyNear(floor(fvar(30))),MoveType=A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
TriggerAll = EnemyNear(floor(fvar(30))),AnimTime<=-4 
TriggerAll = Enemynear(floor(fvar(30))),Time>=30||(!Time&&var(30)>3)||var(30)>3
triggerall = P2BodyDist X = [-10,40]
triggerall = P2BodyDist Y >=-40
Triggerall = Random<=(var(30))*200
Trigger1 = Enemynear(floor(fvar(30))),Time>=50||var(30)>4
Trigger2 = (PrevStateNo=[5000,5270])
Trigger3 = (PrevStateNo=[120,159])
Trigger4 = (PrevStateNo=[200,640])

[State -1, CHP]
type = ChangeState
value = 410
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = P2BodyDist X = [-25+floor(4*(enemynear(floor(fvar(30))),vel X)),25+floor(4*(enemynear(floor(fvar(30))),vel X))]
triggerall = P2BodyDist Y = [-110-floor(4*(enemynear(floor(fvar(30))),vel Y)+(4*(4+1)/2)*fvar(20)),-30-floor(4*(enemynear(floor(fvar(30))),vel Y)+(4*(4+1)/2)*fvar(20))]
Trigger1 = Random<=(var(30))*200

[State -1, Ts-Fwd]
type = ChangeState
value = 810
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 || stateno = [120,149]
triggerall = prevstateno != 810
trigger1 = enemynear(floor(fvar(30))),statetype != A || prevstateno = [130,155]
trigger1 = enemynear(floor(fvar(30))),animtime <= -33
trigger1 = inguarddist
trigger1 = !EnemyNear(floor(fvar(30))),HitDefAttr = SCA,NT,ST,HT
trigger1 = P2bodydist X = [0,90]
trigger1 = random <= (var(30))*100 
trigger2 = enemynear(floor(fvar(30))),numproj
trigger2 = enemynear(floor(fvar(30))),animtime <= -33
trigger2 = p2bodydist x = [35,100]
trigger2 = random <= (var(30))*80 
trigger3 = enemy(floor(fvar(30))),numproj
trigger3 = inguarddist
trigger3 = p2bodydist x >= 120
trigger3 = random <= (var(30))*8

[State -1, 避け攻撃]
type = changestate
value= 320
triggerall = Var(30)
triggerall = roundstate = 2
triggerall = stateno = 800 && time >= 15
triggerall=  statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = P2BodyDist X = [-10,25]
trigger1 = enemynear(floor(fvar(30))),animtime <= -12
trigger1 = (var(30))*200
trigger2 = enemynear(floor(fvar(30))),movetype = I
trigger2 = (var(30))*10

[State -1, 避け]
type = ChangeState
value = 800
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !enemynear(floor(fvar(30))),hitdefattr = SCA,NT,ST,HT
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 || stateno = [120,149]
trigger1 = inguarddist
trigger1 = !enemy(floor(fvar(30))),numproj
trigger1 = enemynear(floor(fvar(30))),animtime <= -26
trigger1 = p2bodydist x = [-10,31]
trigger1 = random <= (var(30))*80
trigger2 = EnemyNear,NumProj > 0 || EnemyNear,Numhelper > 0
trigger2 = EnemyNear,HitDefAttr = SCA,AP
trigger2 = random <= (var(30))*20
trigger2 = inguarddist

[State -1, 谷落とし]
type = ChangeState
value = 900
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = EnemyNear(floor(fvar(30))),StateType != L
triggerall = EnemyNear(floor(fvar(30))),StateType != A
triggerall = (EnemyNear(floor(fvar(30))),movetype = I) 
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(floor(fvar(30))),stateno != [4000,4200]
triggerall = enemynear(floor(fvar(30))),stateno != [5000,5270]
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
Triggerall = P2BodyDist X = [-15,15]
triggerall = enemynear(floor(fvar(30))),time >=-1
TriggerAll = Random<=(var(30))*100
trigger1 = prevstateno = [5000,5270]
trigger2 = (PrevStateNo = [130,155]) || (Prevstateno = [5000,5210]) || (PrevStateNo = [52000,52001]) 

[State -1, H-jump]
Type = ChangeState
value = 43
triggerall = Var(30)>3
triggerall = roundstate = 2
triggerall = StateType != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = EnemyNear(floor(fvar(30))),movetype = A
triggerall = EnemyNear(floor(fvar(30))),HitDefAttr = SCA,NT,ST,HT
triggerall = P2BodyDist X <= 90
trigger1 = random <= (var(30))*200

;---------------------------------------------------------------------------
;相手が硬直中にイロイロ反撃

[State -1, CHP]
type = ChangeState
value = 410
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -4
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = P2BodyDist X = [-25+floor(4*(enemynear(floor(fvar(30))),vel X)),25+floor(4*(enemynear(floor(fvar(30))),vel X))]
triggerall = P2BodyDist Y = [-110-floor(4*(enemynear(floor(fvar(30))),vel Y)+(4*(4+1)/2)*fvar(20)),-30-floor(4*(enemynear(floor(fvar(30))),vel Y)+(4*(4+1)/2)*fvar(20))]
trigger1 = enemynear(floor(fvar(30))),statetype = A
trigger1 = random <= (var(30))*200

[State -1, 極限流連舞拳]
type = ChangeState
value = 1100
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -8
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [-5,5]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, CHP]
type = ChangeState
value = 410
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -2
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [-10,20]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, SSHP]
type = ChangeState
value = 215
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -3
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [-10,20]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, SSLP]
type = ChangeState
value = 205
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -4
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [0,20]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, CLK]
type = ChangeState
value = 420
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -4
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [0,38]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, SLP]
type = ChangeState
value = 200
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -4
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [20,50]
triggerall = p2bodydist y >= 0
trigger1 = enemynear(floor(fvar(30))),statetype = S
trigger1 = random <= (var(30))*200

[State -1, CHK]
type = ChangeState
value = 430
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -9
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [38,45]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, kof98ver.SLK]
type = ChangeState
value = 250
triggerall = var(30)>3
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = enemynear(floor(fvar(30))),animtime <= -6
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [50,85]
triggerall = p2bodydist y >= 0
trigger1 = random <= (var(30))*200

[State -1, 谷落とし]
type = ChangeState
value = 900
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(floor(fvar(30))),animtime <= -1
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = (prevstateno = [130,155]) || (prevstateno = [800,830]) || (prevstateno = [5000,5210]) || (prevstateno = 52000)
triggerall = ctrl
triggerall = p2bodydist x = [-15,15]
trigger1 = random <= (var(30))*200

[State -1, AHP]
type = ChangeState
value = 610
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = (enemynear(floor(fvar(30))),statetype != A && vel y >= 0) || enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),animtime <= -9
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = [120,149]
triggerall = P2BodyDist x = [-20+floor(9*(enemynear(floor(fvar(30))),vel X)+9*(vel X)),45+floor(9*(enemynear(floor(fvar(30))),vel X)+9*(vel X))]
triggerall = P2BodyDist y = [-15-floor(9*(enemynear(floor(fvar(30))),vel Y)+(9*(9+1)/2)*fvar(20)-9*(vel Y)-(9*(9+1)/2)*0.55),40-floor(9*(enemynear(floor(fvar(30))),vel Y)+(9*(9+1)/2)*fvar(20)-9*(vel Y)-(9*(9+1)/2)*0.55)]
trigger1 = random <= (var(30))*200

[State -1, AHK]
type = ChangeState
value = 630
triggerall = var(30)
triggerall = (!var(1)&&!var(3))
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = (enemynear(floor(fvar(30))),statetype != A && vel y >= 0) || enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),animtime <= -5
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = [120,149]
triggerall = P2BodyDist x = [-20+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X)),50+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X))]
triggerall = P2BodyDist y = [-15-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55),35-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55)]
trigger1 = random <= (var(30))*200

[State -1, AHK]
type = ChangeState
value = 630
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = (enemynear(floor(fvar(30))),statetype != A && vel y >= 0) || enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),animtime <= -5
triggerall = enemynear(floor(fvar(30))),ctrl = 0
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = [120,149]
triggerall = P2BodyDist x = [-20+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X)),50+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X))]
triggerall = P2BodyDist y = [-15-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55),35-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55)]
trigger1 = random <= (var(30))*200

;------------------------------------------------------------------------------
;ガード 

[State -1, Guard]
type = ChangeState
value = 120
triggerall = var(30)
triggerall = roundstate = 2
triggerall = stateno != [120,155]
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = inguarddist
trigger1 = random <= (var(30))*250 || var(30)>3
trigger2 = p2bodydist x > 90 || enemynear(floor(fvar(30))),time > 50
trigger2 = random <= (var(30))*300

[State -1, HIT_AIRFALLRECOVER]
type = ChangeState
value = 5210
triggerall = var(30)
triggerall = roundstate = 2
triggerall = random <= (var(30))*100
triggerall = GetHitVar(fall.recover)
triggerall = CanRecover = 1
triggerall = Alive
triggerall = Vel Y > 0
triggerall = Pos Y >= -90
trigger1 = StateNo = 5050

[State -1, GC-ND]
type = ChangeState
value = 820
triggerall = var(30)
triggerall = roundstate = 2
triggerall = power >= 1000
triggerall = stateno = [150,153]
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(var(58)),vel y >= 0
triggerall = enemynear(var(58)),animtime <= -14
triggerall = p2bodydist x = [-10,45]
triggerall = p2bodydist y >= -40
trigger1 = BackEdgeBodyDist <= 5
trigger1 = random<=var(59)*10
trigger2 = (100*life/const(data.life)) <= 50
trigger2 = BackEdgeBodyDist <= 5
trigger2 = random<=var(59)*50

[State -1, GC-TS]
type = ChangeState
value = 830
triggerall = var(30)
triggerall = roundstate = 2
triggerall = power >= 1000
triggerall = statetype != A
triggerall = enemynear(var(53)),statetype != A
triggerall = enemynear(var(53)),statetype != L
triggerall = (stateno = [150,153])
triggerall = p2bodydist x = [15,80]
trigger1 = enemynear(var(53)),animtime <= -39
trigger1 = random<= var(59)*60
trigger2 = enemynear(var(53)),animtime <= -33
trigger2 = BackEdgeBodyDist <= 10
trigger2 = random<= (var(59))*50

;------------------------------------------------------------------------------
;起き攻め 

[State -1, H-jump]
Type = ChangeState
Value = 43
triggerall = var(30)
triggerall = StateType != A
triggerall = roundstate=2
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = BackEdgeBodyDist <= 20
triggerall = p2bodydist X = [-5,10]
trigger1 = EnemyNear(floor(fvar(30))),statetype = L

[State -1, CLK]
type = ChangeState
value = 420
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = random <= (var(30))*80
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -2
trigger1 = p2bodydist x = [-5,38]
trigger1 = p2bodydist y >= 0

[State -1, CHK]
type = ChangeState
value = 430
triggerall = var(30)
triggerall = roundstate = 2
triggerall = random <= (var(30))*30
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -7
trigger1 = p2bodydist x = [38,45]
trigger1 = p2bodydist y >= 0

[State -1, KD]
type = ChangeState
value = 300
triggerall = var(30)
triggerall = roundstate = 2
triggerall = random <= (var(30))*30
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -8
trigger1 = p2bodydist x = [35,45]
trigger1 = p2bodydist y >= 0

[State -1, kof98ver.SLK]
type = ChangeState
value = 250
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = random <= (var(30))*60
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -3
trigger1 = p2bodydist x = [45,85]
trigger1 = p2bodydist y >= 0

[State -1,  kof2001ver.虎咆疾風拳-2]
type = ChangeState
value = 1045
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = random <= (var(30))*60
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -30
trigger1 = p2bodydist x = [35,90]
trigger1 = p2bodydist y >= 0

[State -1, kof2001ver.虎煌拳-1]
type = ChangeState
value = 1000
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = random <= (var(30))*170
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -14
trigger1 = p2bodydist x = [85,100]
trigger1 = p2bodydist y >= 0

[State -1, kof2001ver.虎煌拳-2]
type = ChangeState
value = 1005
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = random <= (var(30))*170
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = enemynear(floor(fvar(30))),stateno = 5120
trigger1 = enemynear(floor(fvar(30))),animtime = -17
trigger1 = p2bodydist x = [130,140]
trigger1 = p2bodydist y >= 0

[State -1, kof98ver.虎煌拳-1]
type = ChangeState
value = 1060
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = random<= (var(30))*170
trigger1 = enemynear(floor(fvar(30))),stateno = 5120 
trigger1 = enemynear(floor(fvar(30))),animtime = -17
trigger1 = p2bodydist x = [85,160]
trigger1 = p2bodydist y >= 0
trigger2 = enemynear(floor(fvar(30))),statetype = L
trigger2 = p2bodydist x = [161,300]
trigger2 = p2bodydist y >= 0
trigger3 = enemynear(floor(fvar(30))),statetype = A
trigger3 = enemynear(floor(fvar(30))),movetype = H
trigger3 = p2bodydist x = [160,320]

[State -1, kof98ver.虎煌拳-2]
type = ChangeState
value = 1065
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = random<= (var(30))*200
trigger1 = (numprojID(6030) = 1)
trigger1 = enemynear(floor(fvar(30))),statetype = L
trigger1 = p2bodydist x = [161,300]
trigger1 = p2bodydist y >= 0
trigger2 = (numprojID(6030) = 1)
trigger2 = enemynear(floor(fvar(30))),statetype = A
trigger2 = enemynear(floor(fvar(30))),movetype = H
trigger2 = p2bodydist x = [160,320]

[State -1, S-jump]
Type = ChangeState
value = 42
triggerall = var(30)
triggerall = StateType != A
triggerall = RoundState = 2
triggerall = EnemyNear(floor(fvar(30))),StateType = L
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = EnemyNear(floor(fvar(30))),StateNo = 5120
triggerall = EnemyNear,AnimTime = -16
triggerall = P2BodyDist X <= 90
trigger1 = Random <= (var(30))*50

[State -1, kof98ver.Back-H-jump]
Type = ChangeState
value = 44
triggerall = var(30)
triggerall = var(1)
triggerall = StateType != A
triggerall = RoundState = 2
triggerall = EnemyNear(floor(fvar(30))),StateType = L
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = EnemyNear(floor(fvar(30))),StateNo = 5120
triggerall = EnemyNear,AnimTime = -30
triggerall = P2BodyDist X <= 30
trigger1 = Random <= (var(30))*40

[State -1, AHP]
type = ChangeState
value = 610
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = ctrl || stateno = [120,149]
triggerall = !inguarddist
triggerall = p2bodydist x <= 50
triggerall = vel y >= 0
trigger1 = enemynear(floor(fvar(30))),statetype = L
trigger1 = random <= (var(30))*300

[State -1, kof98ver.Air虎煌拳-1]
type = ChangeState
value = 1070
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = ctrl || stateno = [120,149]
triggerall = !inguarddist
triggerall = p2bodydist x = [100,120]
trigger1 = enemynear(floor(fvar(30))),statetype = L
trigger1 = random <= (var(30))*300

[State -1, Back Step]
type = ChangeState
value = 105
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype = L
triggerall = enemynear(floor(fvar(30))),stateno = 5120
triggerall = backedgebodydist > 40
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = random<= (var(30))*50
trigger1 = enemynear(floor(fvar(30))),animtime = -6
trigger1 = p2bodydist x <= 50

;------------------------------------------------------------------------------
;通常攻撃の隙を突く

[State -1, 極限流連舞拳]
type = ChangeState
value = 1100
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -8
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [-5,5]
trigger1 = random<= (var(30))*200

[State -1, CHP]
type = ChangeState
value = 410
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -2
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [-10,20]
trigger1 = random<= (var(30))*200

[State -1, SSHP]
type = ChangeState
value = 215
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -3
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [-10,20]
trigger1 = random<= (var(30))*200

[State -1, SSLP]
type = ChangeState
value = 205
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),statetype = S
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -4
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [0,20]
trigger1 = random<= (var(30))*200

[State -1, CLK]
type = ChangeState
value = 420
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -4
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [20,38]
trigger1 = random<= (var(30))*200

[State -1, SLP]
type = ChangeState
value = 200
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),statetype = S
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -4
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [20,50]
trigger1 = random<= (var(30))*200

[State -1, CHK]
type = ChangeState
value = 430
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -9
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [38,45]
trigger1 = random<= (var(30))*200

[State -1, kof98ver.SHP]
Type = ChangeState
value = 240
triggerall = var(30)>2
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),statetype = S
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -8
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [50,60]
trigger1 = random<= (var(30))*200

[State -1, kof98ver.SLK]
type = ChangeState
value = 250
triggerall = var(30)>2
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -6
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [50,85]
trigger1 = random<= (var(30))*200

[State -1, kof2001ver.虎煌拳-1]
type = ChangeState
value = 1000
triggerall = var(30)>2
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -15
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [50,100]
trigger1 = random<= (var(30))*200

[State -1, 飛燕疾風脚]
type = ChangeState
value = 1020
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),movetype = I
trigger1 = enemynear(floor(fvar(30))),animtime <= -13
trigger1 = enemynear(floor(fvar(30))),stateno = [200,649]
trigger1 = p2bodydist x = [80,100]
trigger1 = random<= (var(30))*200

;------------------------------------------------------------------------------
;地上連携 起点 (Hit&Guard

[State -1, SSHP]
type = ChangeState
value = 215
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),stateno = [120,159]
trigger1 = p2bodydist x = [-10,20]
trigger1 = p2bodydist y >=0
trigger1 = random<= (var(30))*10
trigger2 = enemynear(floor(fvar(30))),movetype = H
trigger2 = (enemynear(floor(fvar(30))),stateno!=[120,159])
trigger2 = p2bodydist x = [-10,20]
trigger2 = p2bodydist y >=0
trigger2 = random<= (var(30))*200

[State -1, SSLP]
type = ChangeState
value = 205
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),stateno = [120,159]
trigger1 = p2bodydist x = [-10,20]
trigger1 = p2bodydist y >=0
trigger1 = random<= (var(30))*20

[State -1, CLK]
type = ChangeState
value = 420
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),stateno = [120,159]
trigger1 = p2bodydist x = [-10,38]
trigger1 = p2bodydist y >=0
trigger1 = random<= (var(30))*60
trigger2 = enemynear(floor(fvar(30))),movetype = H
trigger2 = (enemynear(floor(fvar(30))),stateno!=[120,159])
trigger2 = p2bodydist x = [20,38]
trigger2 = p2bodydist y >=0
trigger2 = random<= (var(30))*200

[State -1, SLP]
type = ChangeState
value = 200
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),statetype = S
trigger1 = enemynear(floor(fvar(30))),stateno = [120,159]
trigger1 = p2bodydist x = [38,50]
trigger1 = p2bodydist y >=0
trigger1 = random<= (var(30))*40
trigger2 = enemynear(floor(fvar(30))),statetype = S
trigger2 = enemynear(floor(fvar(30))),movetype = H
trigger2 = (enemynear(floor(fvar(30))),stateno!=[120,159])
trigger2 = p2bodydist x = [38,50]
trigger2 = p2bodydist y >=0
trigger2 = random<= (var(30))*200

[State -1, kof98ver.SLK]
type = ChangeState
value = 250
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),statetype = S
trigger1 = enemynear(floor(fvar(30))),stateno = [120,159]
trigger1 = p2bodydist x = [50,85]
trigger1 = p2bodydist y >=0
trigger1 = random<= (var(30))*10
trigger2 = enemynear(floor(fvar(30))),statetype = S
trigger2 = enemynear(floor(fvar(30))),movetype = H
trigger2 = (enemynear(floor(fvar(30))),stateno!=[120,159])
trigger2 = p2bodydist x = [50,80]
trigger2 = p2bodydist y >=0
trigger2 = random<= (var(30))*200

;------------------------------------------------------------------------------
;地上繋ぎ-1

[State -1, 虎煌拳HITから：覇王翔吼拳-2]
type = ChangeState
value = 3005
triggerall = var(30)>3
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
trigger1 = power >= 2000 && ProjHitTime(6030) = [1,13]
trigger1 = enemynear(floor(fvar(30))),movetype = H
trigger1 = stateno = [1060,1065]
trigger1 = p2bodydist x >= 130

[State -1, 〆用：覇王翔吼拳MAX]
type = ChangeState
value = 3010
triggerall = var(30)
triggerall = power >= 2000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = (P2life<=300 && P2life>=201)
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1
trigger4 = power >= 3000 && movehit && AnimElem = 14,< 0
trigger4 = (stateno = [1040,1045]) 
trigger5 = power >= 3000 && movehit && AnimElem = 8,< 0
trigger5 = stateno = [1090,1095]
trigger6 = power >= 3000
trigger6 = stateno = 1015 && movehit && AnimElem = 3,< 0

[State -1, 空中HITから：覇王翔吼拳MAX]
type = ChangeState
value = 3010
triggerall = var(30)>3
triggerall = power >= 2000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype  = A
triggerall = random<= (var(30))*300
Triggerall = (P2BodyDist Y + (EnemyNear,Vel Y * 13 + GetHitVar(YAccel) * 91) * (P2StateType = A && EnemyNear,Vel Y != 0)) = [-45,0]
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1
trigger4 = power >= 3000 && movehit && AnimElem = 14,< 0
trigger4 = (stateno = [1040,1045]) 
trigger5 = power >= 3000 && movehit && AnimElem = 8,< 0
trigger5 = stateno = [1090,1095]

[State -1, 〆用：覇王翔吼拳-2]
type = ChangeState
value = 3005
triggerall = var(30)
triggerall = power >= 1000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = P2life<=200
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1
trigger4 = power >= 2000 && movehit && AnimElem = 14,< 0
trigger4 = (stateno = [1040,1045]) 
trigger5 = power >= 2000 && movehit && AnimElem = 8,< 0
trigger5 = stateno = [1090,1095]

[State -1, 空中HITから：覇王翔吼拳-2]
type = ChangeState
value = 3005
triggerall = var(30)>3
triggerall = power >= 1000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype  = A
triggerall = random<= (var(30))*300
Triggerall = (P2BodyDist Y + (EnemyNear,Vel Y * 10 + GetHitVar(YAccel) * 55) * (P2StateType = A && EnemyNear,Vel Y != 0)) = [-45,0]
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1
trigger4 = power >= 2000 && movehit && AnimElem = 14,< 0
trigger4 = (stateno = [1040,1045]) 
trigger5 = power >= 2000 && movehit && AnimElem = 8,< 0
trigger5 = stateno = [1090,1095]

[State -1, 竜虎乱舞MAX]
type = ChangeState
value = 3040
triggerall = var(30)
triggerall = power >= 2000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*200
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1
trigger4 = power >= 3000 && movehit && AnimElem = 14,< 0
trigger4 = (stateno = [1040,1045]) 
trigger5 = power >= 3000 && movehit && AnimElem = 8,< 0
trigger5 = stateno = [1090,1095]
trigger6 = (stateno = [1060,1065]) && (power >= 3000) && (ProjHitTime(6030) = [1,13])
trigger6 = p2bodydist x = [0,100]
trigger7 = power >= 3000
trigger7 = stateno = 1015 && movehit 

[State -1, 竜虎乱舞-2]
type = ChangeState
value = 3035
triggerall = var(30)
triggerall = power >= 1000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*200
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1
trigger4 = power >= 2000 && movehit && AnimElem = 14,< 0
trigger4 = (stateno = [1040,1045]) 
trigger5 = power >= 2000 && movehit && AnimElem = 8,< 0
trigger5 = stateno = [1090,1095]
trigger6 = (stateno = [1060,1065]) && (power >= 3000) && (ProjHitTime(6030) = [1,13])
trigger6 = p2bodydist x = [0,100]
trigger7 = power >= 2000
trigger7 = stateno = 1015 && movehit 

[State -1, 空中HITから：飛燕疾風脚-2]
type = ChangeState
value = 1025
triggerall = var(30)>2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype  = A
triggerall = random<= (var(30))*300
Triggerall = (P2BodyDist Y + (EnemyNear,Vel Y * 10 + GetHitVar(YAccel) * 55) * (P2StateType = A && EnemyNear,Vel Y != 0)) = [-50,0]
trigger1 = stateno = 200 && movehit=1
trigger2 = stateno = 205 && movehit=1
trigger3 = stateno = 215 && movehit=1
trigger4 = stateno = 320 && movehit=1
trigger5 = stateno = 410 && movehit=1

[State -1, 空中HITから：kof2001ver.虎咆-1]
type = ChangeState
value = 1010
triggerall = var(30)>2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype  = A
triggerall = random<= (var(30))*300
triggerall = p2bodydist x <= 30
Triggerall = (P2BodyDist Y + (EnemyNear,Vel Y * 5 + GetHitVar(YAccel) * 15) * (P2StateType = A && EnemyNear,Vel Y != 0)) = [-60,0]
trigger1 = stateno = 200 && movehit=1
trigger2 = stateno = 205 && movehit=1
trigger3 = stateno = 215 && movehit=1
trigger4 = stateno = 320 && movehit=1
trigger5 = stateno = 410 && movehit=1

[State -1, 空中HITから：kof98ver.虎咆-1]
type = ChangeState
value = 1080
triggerall = var(30)>2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype  = A
triggerall = random<= (var(30))*300
triggerall = p2bodydist x <= 35
Triggerall = (P2BodyDist Y + (EnemyNear,Vel Y * 3 + GetHitVar(YAccel) * 6) * (P2StateType = A && EnemyNear,Vel Y != 0)) = [-60,0]
trigger1 = stateno = 200 && movehit=1
trigger2 = stateno = 205 && movehit=1
trigger3 = stateno = 215 && movehit=1
trigger4 = stateno = 320 && movehit=1
trigger5 = stateno = 410 && movehit=1

[State -1, 極限流連舞拳]
type = ChangeState
value = 1100
triggerall = var(30)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = p2bodydist x <= 5
trigger1 = stateno = 200 && movehit=1
trigger2 = stateno = 205 && movehit=1
trigger3 = stateno = 215 && movehit=1
trigger4 = stateno = 320 && movehit=1
trigger5 = stateno = 410 && movehit=1

[State -1, kof2001ver.虎煌拳-2]
type = ChangeState
value = 1005
triggerall = var(30)
triggerall = !var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1

[State -1, kof98ver.虎煌拳-1]
type = ChangeState
value = 1060
triggerall = var(30)
triggerall = var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
trigger1 = stateno = 300 && movehit=1

[State -1, 飛燕疾風脚-2]
type = ChangeState
value = 1025
triggerall = var(30)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = enemynear(floor(fvar(30))),statetype = S
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1

[State -1, kof98ver.雷神剛-2]
type = ChangeState
value = 1095
triggerall = var(30)
triggerall = var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = enemynear(floor(fvar(30))),statetype = C
trigger1 = stateno = 215 && movehit=1
trigger2 = stateno = 320 && movehit=1
trigger3 = stateno = 410 && movehit=1

[State -1, 飛燕疾風脚-1]
type = ChangeState
value = 1020
triggerall = var(30)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = enemynear(floor(fvar(30))),statetype = S
trigger1 = stateno = 200 && movehit=1
trigger1 = p2bodydist x >= 20
trigger2 = stateno = 420 && movehit=1
trigger2 = p2bodydist x >= 35

[State -1, kof98ver.虎咆-1]
type = ChangeState
value = 1010
triggerall = var(30)
triggerall = !var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = p2bodydist x <= 30
triggerall = enemynear(floor(fvar(30))),statetype = C
trigger1 = stateno = 205 && movehit=1
trigger2 = stateno = 200 && movehit=1
trigger2 = p2bodydist x >= 20
trigger3 = stateno = 420 && movehit=1

[State -1, kof98ver.虎咆-1]
type = ChangeState
value = 1080
triggerall = var(30)
triggerall = var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = random<= (var(30))*300
triggerall = p2bodydist x <= 38
triggerall = enemynear(floor(fvar(30))),statetype = C
trigger1 = stateno = 205 && movehit=1
trigger2 = stateno = 200 && movehit=1
trigger2 = p2bodydist x >= 20
trigger3 = stateno = 420 && movehit=1

[State -1, CHP]
type = ChangeState
value = 410
triggerall = var(30)
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 420 && movehit && AnimElem = 3,> 0
trigger1 = p2bodydist x <= 15

[State -1, SSLP]
type = ChangeState
value = 205
triggerall = var(30)
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = p2bodydist x <= 20
trigger1 = stateno = 205 && movehit && AnimElem = 3,> 0
trigger2 = stateno = 205 && moveguarded && AnimElem = 3,> 0
trigger2 = random<= (var(30))*20
trigger3 = stateno = 420 && movehit && AnimElem = 3,> 0
trigger4 = stateno = 420 && moveguarded && AnimElem = 3,> 0
trigger4 = random<= (var(30))*60

[State -1, SLP]
type = ChangeState
value = 200
triggerall = var(30)
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = p2bodydist x >= 20
triggerall = enemynear(floor(fvar(30))),statetype = S
trigger1 = stateno = 205 && movehit && AnimElem = 3,> 0
trigger2 = stateno = 200 && movehit && AnimElem = 3,> 0
trigger2 = p2bodydist x <= 48
trigger3 = stateno = 205 && moveguarded && AnimElem = 3,> 0
trigger3 = random<= (var(30))*30
trigger4 = stateno = 200 && moveguarded && AnimElem = 3,> 0
trigger4 = p2bodydist x <= 48
trigger4 = random<= (var(30))*10
trigger5 = stateno = 420 && movehit && AnimElem = 3,> 0
trigger5 = p2bodydist x = [20,48]
trigger6 = stateno = 420 && moveguarded && AnimElem = 3,> 0
trigger6 = p2bodydist x = [20,48]
trigger6 = random<= (var(30))*60

[State -1, CLK]
type = ChangeState
value = 420
triggerall = var(30)
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 420 && movehit && AnimElem = 3,> 0
trigger1 = p2bodydist x = [20,38]
trigger2 = stateno = 420 && moveguarded && AnimElem = 3,> 0
trigger2 = p2bodydist x = [20,38]
trigger2 = random<= (var(30))*60

;------------------------------------------------------------------------------
;地上繋ぎ-3

[State -1, kof2001ver.虎煌拳-1]
type = ChangeState
value = 1000
triggerall = var(30)
triggerall = !var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 300 && moveguarded
trigger1 = random <= 250

[State -1, kof2001ver.虎咆疾風拳-1]
type = ChangeState
value = 1040
triggerall = var(30)
triggerall = !var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 215 || stateno = 320 || stateno = 410 || stateno = 430
trigger1 = moveguarded
trigger1 = random <= 50
trigger2 = stateno = 200 && moveguarded
trigger2 = random <= 50
trigger3 = stateno = 300 && moveguarded
trigger3 = random<= 100

[State -1, kof2001ver.氷柱割り]
type = ChangeState
value = 330
triggerall = var(30)
triggerall = !var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 215 && moveguarded 
trigger1 = random <= 200
trigger2 = stateno = 410 && moveguarded 
trigger2 = p2bodydist x <= 40
trigger2 = random <= 200
trigger3 = stateno = 200 && moveguarded
trigger3 = p2bodydist x <= 40
trigger3 = random <= 200

[State -1, kof98ver.氷柱割り]
type = ChangeState
value = 330
triggerall = var(30)
triggerall = var(1)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 215 && moveguarded 
trigger1 = random <= 150
trigger2 = stateno = 410 && moveguarded 
trigger2 = p2bodydist x <= 40
trigger2 = random <= 150
trigger3 = stateno = 200 && moveguarded
trigger3 = p2bodydist x <= 40
trigger3 = random <= 100

[State -1, 猛虎雷神刹-1]
type = ChangeState
value = 1030
triggerall = var(30)
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
trigger1 = stateno = 300 && moveguarded
trigger1 = random = [300,350]

;------------------------------------------------------------------------------------------
;立ち回り 技振り・投げ・歩き・ダッシュ・各種ジャンプ・バックステッポ

[State -1, 極限流連舞拳]
type = ChangeState
value = 1100
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [-8,8]
trigger1 = (enemynear(floor(fvar(30))),stateno=[120,159])
trigger1 = (enemynear(floor(fvar(30))),stateno != [130,155])
trigger1 = random<= (var(30))*200

[State -1, 谷落とし]
type = ChangeState
value = 900
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2bodydist x = [-15,15]
trigger1 = random<= (var(30))*200
trigger2 = (enemynear(floor(fvar(30))),stateno=[120,159])
trigger2 = random<= (var(30))*200

[State -1, S-jump]
type = ChangeState
value = 42
triggerall = var(30)>2
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear,stateno != [5050,5210]
trigger1 = enemynear(floor(fvar(30))),statetype = C
trigger1 = enemynear(floor(fvar(30))),movetype = A
trigger1 = enemynear(floor(fvar(30))),hitdefattr = SCA, NA
trigger1 = p2bodydist x = [-10,90]
trigger1 = random<= (var(30))*100
trigger2 = !inguarddist
trigger2 = p2bodydist x = [30,90]
trigger2 = random<= (var(30))*6
trigger3 = enemynear(floor(fvar(30))),statetype = C
trigger3 = inguarddist
trigger3 = p2bodydist x = [-10,90]
trigger3 = random<= (var(30))*50

[State -1,H-jump]
type = ChangeState
value = 43
triggerall = var(30)>2
triggerall = !var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = p2bodydist x = [140,190]
trigger1 = random <= (var(30))*6
trigger2 = p2bodydist x >= 140
trigger2 = enemynear(floor(fvar(30))),numproj
trigger2 = random <= (var(30))*50

[State -1, Back-H-jump]
type = ChangeState
value = 44
triggerall = var(30)>2
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(floor(fvar(30))),movetype != A
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = p2bodydist x <= 90
trigger1 = enemynear(floor(fvar(30))),numproj
trigger1 = random <= (var(30))*10

[State -1, kof2001ver.dash]
type = ChangeState
value = 100
triggerall = var(30) 
triggerall = !var(1)
triggerall = Roundstate = 2
triggerall = statetype != A
triggerall = stateno != [100,101]
triggerall = prevstateno != [100,101]
triggerall = !inguarddist
triggerall = ctrl || stateno = 22
trigger1 = p2bodydist x = [200,300]
trigger1 = random <= (var(30))*60
trigger2 = p2bodydist x = [100,200]
trigger2 = random <= (var(30))*30
trigger3 = p2bodydist x = [50,100]
trigger3 = random <= (var(30))*8
trigger4 = !enemy,numproj
trigger4 = enemynear,stateno != [5050,5210]
trigger4 = p2bodydist x = [20,70]
trigger4 = random <= (var(30))*4
trigger5 = (enemynear(floor(fvar(30))),statetype = S)||(enemynear(floor(fvar(30))),statetype = C)
trigger5 = (enemynear(floor(fvar(30))),Movetype = H)&&(enemynear(floor(fvar(30))),StateNo!=[120,159])
trigger5 = enemynear,stateno != [5050,5210]
trigger5 = enemynear(floor(fvar(30))),Statetype != A
trigger5 = p2bodydist X = [20,100]
trigger5 = Random <= (var(30))*80
trigger6 = (enemynear(floor(fvar(30))),statetype = S)||(enemynear(floor(fvar(30))),statetype = C)
trigger6 = (enemynear(floor(fvar(30))),Movetype = H)&&(enemynear(floor(fvar(30))),StateNo =[120,159])
trigger6 = enemynear,stateno != [5050,5210]
trigger6 = enemynear(floor(fvar(30))),Statetype != A
trigger6 = p2bodydist X >= 100
trigger6 = Random <= (var(30))*20

[State -1, kof98ver.dash]
type = ChangeState
value = 100
triggerall = var(30) 
triggerall = var(1)&&!var(35)
triggerall = Roundstate = 2
triggerall = statetype != A
triggerall = stateno != [100,101]
triggerall = prevstateno != [100,101]
triggerall = !inguarddist
triggerall = ctrl || stateno = 22
trigger1 = p2bodydist x = [200,300]
trigger1 = random <= (var(30))*50
trigger2 = p2bodydist x = [100,200]
trigger2 = random <= (var(30))*20
trigger3 = p2bodydist x = [50,100]
trigger3 = random <= (var(30))*8
trigger4 = !enemy,numproj
trigger4 = enemynear,stateno != [5050,5210]
trigger4 = p2bodydist x = [20,70]
trigger4 = random <= (var(30))*4
trigger5 = (enemynear(floor(fvar(30))),statetype = S)||(enemynear(floor(fvar(30))),statetype = C)
trigger5 = (enemynear(floor(fvar(30))),Movetype = H)&&(enemynear(floor(fvar(30))),StateNo!=[120,159])
trigger5 = enemynear,stateno != [5050,5210]
trigger5 = enemynear(floor(fvar(30))),Statetype != A
trigger5 = p2bodydist X = [20,100]
trigger5 = Random <= (var(30))*60

[State -1, 虎煌砲MODEver.dash]
type = ChangeState
value = 100
triggerall = var(30) 
triggerall = var(1)&&var(35)
triggerall = Roundstate = 2
triggerall = statetype != A
triggerall = stateno != [100,101]
triggerall = prevstateno != [100,101]
triggerall = !inguarddist
triggerall = ctrl || stateno = 22
trigger1 = p2bodydist x = [200,300]
trigger1 = random <= (var(30))*2
trigger2 = p2bodydist x = [100,200]
trigger2 = random <= (var(30))*1
trigger3 = p2bodydist x = [50,100]
trigger3 = random <= (var(30))*6
trigger4 = !enemy,numproj
trigger4 = enemynear,stateno != [5050,5210]
trigger4 = p2bodydist x = [20,70]
trigger4 = random <= (var(30))*2
trigger5 = (enemynear(floor(fvar(30))),statetype = S)||(enemynear(floor(fvar(30))),statetype = C)
trigger5 = (enemynear(floor(fvar(30))),Movetype = H)&&(enemynear(floor(fvar(30))),StateNo!=[120,159])
trigger5 = enemynear,stateno != [5050,5210]
trigger5 = enemynear(floor(fvar(30))),Statetype != A
trigger5 = p2bodydist X = [20,100]
trigger5 = Random <= (var(30))*60

[State -1, Walk-Fwd]
type = ChangeState
value = 21
triggerall = var(30)
triggerall = !var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = !inguarddist
triggerall = stateno != [100,101]
triggerall = ctrl || stateno = 22
triggerall = frontedgebodydist > 0
triggerall = enemynear,stateno != [5050,5210]
triggerall = enemynear,stateno != 52000
trigger1 = p2bodydist x = [200,300]
trigger1 = random <= (var(30))*60
trigger2 = p2bodydist x = [100,200]
trigger2 = random <= (var(30))*20
trigger3 = enemynear(floor(fvar(30))),statetype != L
trigger3 = enemynear(floor(fvar(30))),stateno != [5110,5120]
trigger3 = p2bodydist x = [0,100]
trigger3 = random <= (var(30))*40
trigger4 = enemynear(floor(fvar(30))),stateno = [120,155]
trigger4 = p2bodydist x <= 80
trigger4 = random <= (var(30))*100
trigger5 = enemynear(floor(fvar(30))),statetype = L
trigger5 = p2bodydist x = [50,140]
trigger5 = random <= (var(30))*60

[State -1, kof2001ver.Walk-Back]
type = ChangeState
value = 22
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = !inguarddist
triggerall = ctrl || stateno = 21
triggerall = backedgebodydist > 0
trigger1 = p2bodydist x = [100,160]
trigger1 = random <= (var(30))*2
trigger2 = p2bodydist x = [-5,100]
trigger2 = random <= (var(30))*2
trigger3 = enemynear(floor(fvar(30))),statetype = L
trigger3 = p2bodydist x <= 30
trigger3 = random <= (var(30))*200
trigger4 = enemynear,stateno != [5050,5210]
trigger4 = p2bodydist x <= 30
trigger4 = random <= (var(30))*200
trigger5 = enemynear,stateno != 52000
trigger5 = p2bodydist x <= 30
trigger5 = random <= (var(30))*200

[State -1, kof98ver.Walk-Back]
type = ChangeState
value = 22
triggerall = var(30)
triggerall = var(1)&&!var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = !inguarddist
triggerall = ctrl || stateno = 21
triggerall = backedgebodydist > 0
trigger1 = p2bodydist x = [140,160]
trigger1 = random <= (var(30))*8
trigger2 = p2bodydist x = [-5,100]
trigger2 = random <= (var(30))*2
trigger3 = enemynear(floor(fvar(30))),statetype = L
trigger3 = p2bodydist x <= 30
trigger3 = random <= (var(30))*200
trigger4 = enemynear,stateno != [5050,5210]
trigger4 = p2bodydist x <= 30
trigger4 = random <= (var(30))*200
trigger5 = enemynear,stateno != 52000
trigger5 = p2bodydist x <= 30
trigger5 = random <= (var(30))*200

[State -1, 虎煌砲MODEver.Walk-Back]
type = ChangeState
value = 22
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = !inguarddist
triggerall = ctrl || stateno = 21
triggerall = backedgebodydist > 0
trigger1 = p2bodydist x = [100,160]
trigger1 = random <= (var(30))*100
trigger2 = p2bodydist x = [-5,100]
trigger2 = random <= (var(30))*60
trigger3 = enemynear(floor(fvar(30))),statetype = L
trigger3 = p2bodydist x <= 30
trigger3 = random <= (var(30))*200

[State -1, kof2001ver.カカッとバックステッポ]
Type     = ChangeState
Value    = 105
triggerall = var(30)
triggerall = !var(1)
triggerall = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = EnemyNear(floor(fvar(30))),StateType != L
triggerall = EnemyNear(floor(fvar(30))),MoveType != H
triggerall = EnemyNear(floor(fvar(30))),MoveType != A
triggerall = EnemyNear(floor(fvar(30))),stateno != [120,159]
triggerall = Ctrl
triggerall = backedgebodydist > 60
triggerall = !enemy,numproj
trigger1 = p2bodydist x = [0,90]
trigger1 = random <= 10

[State -1, kof98ver.カカッとバックステッポ]
Type     = ChangeState
Value    = 105
triggerall = var(30)
triggerall = var(1)&&!var(35)
triggerall = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = EnemyNear(floor(fvar(30))),StateType != L
triggerall = EnemyNear(floor(fvar(30))),MoveType != H
triggerall = EnemyNear(floor(fvar(30))),MoveType != A
triggerall = EnemyNear(floor(fvar(30))),stateno != [120,159]
triggerall = Ctrl
triggerall = backedgebodydist > 60
triggerall = !enemy,numproj
trigger1 = p2bodydist x = [0,90]
trigger1 = random <= (var(30))*20
trigger2 = p2bodydist x = [120,140]
trigger2 = random <= (var(30))*6

[State -1, 虎煌砲MODEver.カカッとバックステッポ]
Type     = ChangeState
Value    = 105
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = EnemyNear(floor(fvar(30))),MoveType != H
triggerall = EnemyNear(floor(fvar(30))),MoveType != A
triggerall = EnemyNear(floor(fvar(30))),stateno != [120,159]
triggerall = Ctrl
triggerall = backedgebodydist > 60
triggerall = !enemy,numproj
trigger1 = p2bodydist x = [0,90]
trigger1 = random <= (var(30))*20
trigger2 = p2bodydist x = [120,140]
trigger2 = random <= (var(30))*20

[State -1, kof98ver.虎煌拳-1]
type = ChangeState
value = 1060
triggerall = var(30)
triggerall = var(1)&&!var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = p2bodydist x = [150,170]
trigger1 = random <= (var(30))*8
trigger2 = p2bodydist x = [171,210]
trigger2 = random <= (var(30))*15
trigger3 = p2bodydist x >= 211
trigger3 = random <= (var(30))*20

[State -1, kof98ver.虎煌拳-2]
type = ChangeState
value = 1065
triggerall = var(30)>3
triggerall = var(1)&&!var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = (numprojID(6030) = 1)
trigger1 = p2bodydist x = [160,210]
trigger1 = random <= (var(30))*100
trigger2 = (numprojID(6030) = 1)
trigger2 = p2bodydist x >= 211
trigger2 = random <= (var(30))*150

[State -1, 虎煌砲MODEver.覇王翔吼拳MAX-2]
type = ChangeState
value = 3010
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = power >= 2000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = p2bodydist x = [100,210]
trigger1 = random <= (var(30))*10
trigger2 = p2bodydist x >= 211
trigger2 = random <= (var(30))*10

[State -1, 虎煌砲MODEver.覇王翔吼拳-1]
type = ChangeState
value = 3000
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = power >= 3000
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = p2bodydist x = [100,210]
trigger1 = random <= (var(30))*200
trigger2 = p2bodydist x >= 211
trigger2 = random <= (var(30))*200

[State -1, 虎煌砲MODEver.虎煌拳-1]
type = ChangeState
value = 1060
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = p2bodydist x = [150,170]
trigger1 = random <= (var(30))*300
trigger2 = p2bodydist x = [171,210]
trigger2 = random <= (var(30))*300
trigger3 = p2bodydist x >= 211
trigger3 = random <= (var(30))*300

[State -1, 虎煌砲MODEver.虎煌拳-2]
type = ChangeState
value = 1065
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = !inguarddist
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
trigger1 = (numprojID(6030) = 1)
trigger1 = p2bodydist x = [100,210]
trigger1 = random <= (var(30))*300
trigger2 = (numprojID(6030) = 1)
trigger2 = p2bodydist x >= 211
trigger2 = random <= (var(30))*300

;------------------------------------------------------------------------------------------
;地上立ち回り技振り 対空

[State -1, CHP]
type = ChangeState
value = 410
triggerall = var(30)>3
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(floor(fvar(30))),Statetype = A
triggerall = enemynear(floor(fvar(30))),movetype != A
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = P2BodyDist X = [-15,25]
triggerall = Enemynear(floor(fvar(30))),pos y = [-100,-30]
Trigger1 = Random <= (var(59))*200 

[State -1, 対空：kof2001虎咆-1]
type = ChangeState
value = 1010
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(floor(fvar(30))),Statetype = A
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = P2BodyDist X = [-5,30]
triggerall = Enemynear(floor(fvar(30))),pos y = [-40,-5]
Trigger1 = Random <= (var(59))*200

[State -1, 対空：kof98虎咆-1]
type = ChangeState
value = 1080
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = enemynear(floor(fvar(30))),Statetype = A
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = P2BodyDist X = [-5,40]
triggerall = Enemynear(floor(fvar(30))),pos y = [-40,-5]
Trigger1 = Random <= (var(59))*200

;------------------------------------------------------------------------------------------
;地上立ち回り技振り 中段

[State -1, 氷柱割り]
Type = ChangeState
value = 330
TriggerAll = var(30)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
TriggerAll = enemynear(floor(fvar(30))),StateType=C
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
Trigger1 = P2BodyDist X =[0,45]
Trigger1 = Random <= (var(30))*10

[State -1, 猛虎雷神刹-1]
Type = ChangeState
value = 1030
TriggerAll = var(30)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
TriggerAll = enemynear(floor(fvar(30))),StateType=C
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
Trigger1 = P2BodyDist X =[120,130]
Trigger1 = Random <= (var(30))*30

[State -1, 猛虎雷神刹-1]
Type = ChangeState
value = 1035
TriggerAll = var(30)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
TriggerAll = enemynear(floor(fvar(30))),StateType=C
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
Trigger1 = P2BodyDist X =[170,180]
Trigger1 = Random <= (var(30))*30

;------------------------------------------------------------------------------------------
;地上立ち回り技振り 下段

[State -1, CLK]
Type = ChangeState
value = 420
TriggerAll = var(30)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
TriggerAll = enemynear(floor(fvar(30))),StateType = S
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
Trigger1 = P2BodyDist X =[-5,38]
Trigger1 = Random <= (var(30))*60

[State -1, CHK]
Type = ChangeState
value = 430
TriggerAll = var(30)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),statetype != A
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
TriggerAll = enemynear(floor(fvar(30))),StateType = S
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101 
Trigger1 = P2BodyDist X =[-5,45]
Trigger1 = Random <= (var(30))*4

;------------------------------------------------------------------------------
;地上立ち回り技振り 牽制

[State -1, CHP]
Type = ChangeState
value = 410
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = p2bodydist x = [-10,20]
trigger1 = p2bodydist y >= 0
trigger1 = random <= 30

[State -1, SSLP]
Type = ChangeState
value = 205
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
triggerall = p2bodydist x <= 21
trigger1 = P2BodyDist X = [-5,20]
trigger1 = p2bodydist y >= -30
trigger1 = random <= 150

[State -1, SLP]
Type = ChangeState
value = 200
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
triggerall = p2bodydist x >= 20
trigger1 = P2BodyDist X = [20+floor(4*(enemynear(floor(fvar(30))),vel X)),50+floor(4*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= -40
trigger1 = random <= 200

[State -1, CLK]
Type = ChangeState
value = 420
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = P2BodyDist X = [-10+floor(4*(enemynear(floor(fvar(30))),vel X)),38+floor(4*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= 0
trigger1 = random <= 300

[State -1, KD]
Type = ChangeState
value = 300
triggerall = var(30)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = P2BodyDist X = [20+floor(10*(enemynear(floor(fvar(30))),vel X)),40+floor(10*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= 0
trigger1 = random <= 50

[State -1, kof98ver.SHP]
Type = ChangeState
value = 240
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = enemynear(floor(fvar(30))),statetype != C
trigger1 = P2BodyDist X = [30+floor(8*(enemynear(floor(fvar(30))),vel X)),55+floor(8*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= -40
trigger1 = random <= 30

[State -1, 虎煌砲MODEver.SLK]
Type = ChangeState
value = 250
triggerall = var(30)
triggerall = var(1)&&var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = P2BodyDist X = [30+floor(6*(enemynear(floor(fvar(30))),vel X)),85+floor(6*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= -25
trigger1 = random <= 300

[State -1, kof98ver.SLK]
Type = ChangeState
value = 250
triggerall = var(30)
triggerall = var(1)&&!var(35)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = P2BodyDist X = [45+floor(6*(enemynear(floor(fvar(30))),vel X)),85+floor(6*(enemynear(floor(fvar(30))),vel X))]
trigger1 = p2bodydist y >= -25
trigger1 = random <= 70

[State -1, kof2001ver.虎咆疾風拳-1]
Type = ChangeState
value = 1040
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = P2BodyDist X = [50,90]
trigger1 = p2bodydist y >= 0
trigger1 = random <= 30

[State -1, kof2001ver.虎煌拳-1]
Type = ChangeState
value = 1000
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = enemynear(floor(fvar(30))),movetype = I
triggerall = enemynear(floor(fvar(30))),movetype != H
triggerall = !inguarddist
triggerall = !enemynear(floor(fvar(30))),numproj
triggerall = ctrl || stateno = 21 || stateno = 22 || stateno = 100 || stateno = 101
triggerall = p2stateno != 52000 
triggerall = (EnemyNear(floor(fvar(30))),StateNo != [5100,5270])
trigger1 = P2BodyDist X = [85,100]
trigger1 = p2bodydist y >= 0
trigger1 = random <= 80

;------------------------------------------------------------------------------
;空中立ち回り技振り

[State -1, AKD]
type = ChangeState
value = 310
triggerall = var(30)
triggerall = !var(1)
triggerall = roundstate = 2
triggerall = random <= (var(30))*300
triggerall = statetype = A
triggerall = enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = stateno != [105,106]
triggerall = !inguarddist
triggerall = ctrl || stateno = [120,149]
trigger1 = P2BodyDist x = [-20+floor(13*(enemynear(floor(fvar(30))),vel X)+13*(vel X)),55+floor(13*(enemynear(floor(fvar(30))),vel X)+13*(vel X))]
trigger1 = P2BodyDist y = [-40-floor(13*(enemynear(floor(fvar(30))),vel Y)+(13*(13+1)/2)*fvar(20)-13*(vel Y)-(13*(13+1)/2)*0.55),20-floor(13*(enemynear(floor(fvar(30))),vel Y)+(13*(13+1)/2)*fvar(20)-13*(vel Y)-(13*(13+1)/2)*0.55)]

[State -1, AHP]
type = ChangeState
value = 610
triggerall = var(30)
triggerall = roundstate = 2
triggerall = random <= (var(30))*300
triggerall = statetype = A
triggerall = (enemynear(floor(fvar(30))),statetype != A && vel y >= -2) || enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = stateno != [105,106]
triggerall = !inguarddist
triggerall = ctrl || stateno = [120,149]
trigger1 = P2BodyDist x = [-20+floor(9*(enemynear(floor(fvar(30))),vel X)+9*(vel X)),45+floor(9*(enemynear(floor(fvar(30))),vel X)+9*(vel X))]
trigger1 = P2BodyDist y = [-20-floor(9*(enemynear(floor(fvar(30))),vel Y)+(9*(9+1)/2)*fvar(20)-9*(vel Y)-(9*(9+1)/2)*0.55),40-floor(9*(enemynear(floor(fvar(30))),vel Y)+(9*(9+1)/2)*fvar(20)-9*(vel Y)-(9*(9+1)/2)*0.55)]

[State -1, AHK]
type = ChangeState
value = 630
triggerall = var(30)
triggerall = (!var(1)&&!var(3))
triggerall = roundstate = 2
triggerall = random <= (var(30))*300
triggerall = statetype = A
triggerall = (enemynear(floor(fvar(30))),statetype != A && vel y >= -2) || enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = stateno != [105,106]
triggerall = !inguarddist
triggerall = ctrl || stateno = [120,149]
trigger1 = P2BodyDist x = [-20+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X)),50+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X))]
trigger1 = P2BodyDist y = [-15-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55),40-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55)]

[State -1, AHK]
type = ChangeState
value = 630
triggerall = var(30)
triggerall = var(1)
triggerall = roundstate = 2
triggerall = random <= (var(30))*300
triggerall = statetype = A
triggerall = (enemynear(floor(fvar(30))),statetype != A && vel y >= -2) || enemynear(floor(fvar(30))),statetype = A
triggerall = enemynear(floor(fvar(30))),statetype != L
triggerall = stateno != [105,106]
triggerall = !inguarddist
triggerall = ctrl || stateno = [120,149]
trigger1 = P2BodyDist x = [-20+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X)),50+floor(5*(enemynear(floor(fvar(30))),vel X)+5*(vel X))]
trigger1 = P2BodyDist y = [-15-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55),40-floor(5*(enemynear(floor(fvar(30))),vel Y)+(5*(5+1)/2)*fvar(20)-5*(vel Y)-(5*(5+1)/2)*0.55)]


;---------------------------------------------------------------------------
; 竜虎乱舞MAX
[State -1]
type = ChangeState
value = 3040
triggerall = !var(30)
triggerall = command = "ryuuko_xy"
triggerall = power >= 2000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 3000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 3000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 3000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 3000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 3000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 竜虎乱舞弱
[State -1]
type = ChangeState
value = 3030
triggerall = !var(30)
triggerall = command = "ryuuko_x"
triggerall = power >= 1000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 2000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 2000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 2000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 2000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 2000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 竜虎乱舞強
[State -1]
type = ChangeState
value = 3035
triggerall = !var(30)
triggerall = command = "ryuuko_y"
triggerall = power >= 1000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 2000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 2000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 2000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 2000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 2000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 天地覇煌拳MAX
[State -1]
type = ChangeState
value = 3025
triggerall = !var(30)
triggerall = command = "tenti_xy"
triggerall = power >= 2000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 3000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 3000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 3000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 3000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 3000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 天地覇煌拳
[State -1]
type = ChangeState
value = 3020
triggerall = !var(30)
triggerall = command = "tenti"
triggerall = power >= 1000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 2000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 2000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 2000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 2000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 2000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 覇王翔吼拳MAX
[State -1]
type = ChangeState
value = 3010
triggerall = !var(30)
triggerall = command = "haou_xy"
triggerall = power >= 2000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 3000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 3000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 3000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 3000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 3000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 覇王翔吼拳弱
[State -1]
type = ChangeState
value = 3000
triggerall = !var(30)
triggerall = command = "haou_x"
triggerall = power >= 1000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 2000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 2000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 2000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 2000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 2000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 覇王翔吼拳強
[State -1]
type = ChangeState
value = 3005
triggerall = !var(30)
triggerall = command = "haou_y"
triggerall = power >= 1000
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
trigger5 = power >= 2000 && movecontact && StateType = S
trigger5 = stateno = 1010 || stateno = 1015
trigger6 = power >= 2000 && ProjContactTime(6010) = [1,15]
trigger6 = stateno = [1000,1005]
trigger7 = power >= 2000 && movecontact && AnimElem = 14,< 0
trigger7 = stateno = [1040,1045]
trigger8 = power >= 2000 && ProjContactTime(6030) = [1,15]
trigger8 = stateno = [1060,1065]
trigger9 = power >= 2000 && movecontact && AnimElem = 8,< 0
trigger9 = stateno = [1090,1095]
;---------------------------------------------------------------------------
; 虎咆弱
[State -1]
type = ChangeState
value = ifelse(Var(1),1080,1010)
triggerall = !var(30)
triggerall = command = "kohou_x"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 虎咆強
[State -1]
type = ChangeState
value = ifelse(Var(1),1085,1015)
triggerall = !var(30)
triggerall = command = "kohou_y"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 暫烈拳弱
[State -1]
type = ChangeState
value = 1050
triggerall = !var(30)
triggerall = command = "zannretu_x"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 暫烈拳強
[State -1]
type = ChangeState
value = 1055
triggerall = !var(30)
triggerall = command = "zannretu_y"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 極限流連舞拳
[State -1]
type = ChangeState
value = 1100
triggerall = !var(30)
triggerall = command = "renbu"
triggerall = P2BodyDist X < 10
trigger1 = ctrl && statetype != A
trigger1 = p2statetype != A && p2statetype != L && p2stateno != [130,155]
trigger2 = movehit
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movehit
trigger3 = stateno = [400,420]
trigger4 = movehit
trigger4 = stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 虎煌拳弱
[State -1]
type = ChangeState
value = ifelse(var(1),1060,1000)
triggerall = !var(30)
triggerall = command = "koou_x"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 虎煌拳強
[State -1]
type = ChangeState
value = ifelse(var(1),1065,1005)
triggerall = !var(30)
triggerall = command = "koou_y"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 空中虎煌拳弱
[State -1]
type = ChangeState
value = 1070
triggerall = !var(30)
triggerall = command = "koou_x"
triggerall = Var(1)
trigger1 = (ctrl || stateno  = 105) && statetype = A
;---------------------------------------------------------------------------
; 空中虎煌拳強
[State -1]
type = ChangeState
value = 1075
triggerall = !var(30)
triggerall = command = "koou_y"
triggerall = Var(1)
trigger1 = (ctrl || stateno  = 105) && statetype = A
;---------------------------------------------------------------------------
; 虎咆疾風拳(雷神剛)弱
[State -1]
type = ChangeState
value = ifelse(Var(1),1090,1040)
triggerall = !var(30)
triggerall = command = "shippuu_x"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 虎咆疾風拳(雷神剛)強
[State -1]
type = ChangeState
value = ifelse(Var(1),1095,1045)
triggerall = !var(30)
triggerall = command = "shippuu_y"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 雷神刹弱
[State -1]
type = ChangeState
value = 1030
triggerall = !var(30)
triggerall = command = "raijin_a"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 雷神刹強
[State -1]
type = ChangeState
value = 1035
triggerall = !var(30)
triggerall = command = "raijin_b"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 飛燕疾風脚弱
[State -1]
type = ChangeState
value = 1020
triggerall = !var(30)
triggerall = command = "hien_a"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 飛燕疾風脚強
[State -1]
type = ChangeState
value = 1025
triggerall = !var(30)
triggerall = command = "hien_b"
trigger1 = ctrl && statetype != A
trigger2 = movecontact
trigger2 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger3 = movecontact
trigger3 = stateno = [400,430]
trigger4 = movecontact
trigger4 = stateno = 300 || stateno = 320 || stateno = [340,350]
;---------------------------------------------------------------------------
; 緊急回避
[State -1]
type = ChangeState
value = ifelse(command = "holdback",815,ifelse(command = "holdfwd",810,800))
triggerall = !var(30)
triggerall = command = "ax" || command = "z"
trigger1 = ctrl && statetype != A
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; ふっとばし攻撃
[State -1]
type = ChangeState
value = ifelse(statetype != A,300,310)
triggerall = !var(30)
triggerall = command = "by" || command = "c"
trigger1 = ctrl
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; カウンター
[State -1]
type = ChangeState
value = 320
triggerall = !var(30)
trigger1 = stateno = 800
trigger1 = AnimElem = 2,> 0
trigger1 = command = "x" || command = "y" || command = "a" || command = "b"
;---------------------------------------------------------------------------
; ガードキャンセル緊急回避
[State -1]
type = ChangeState
value = ifelse(command != "holdback",830,835)
triggerall = !var(30)
triggerall = command = "ax" || command = "z"
triggerall = power >= 1000
trigger1 = stateno = [150,153]
;---------------------------------------------------------------------------
; ガードキャンセルふっとばし攻撃
[State -1]
type = ChangeState
value = 820
triggerall = !var(30)
triggerall = command = "by" || command = "c"
triggerall = power >= 1000
trigger1 = stateno = [150,153]
;---------------------------------------------------------------------------
; 谷落とし
[State -1]
type = ChangeState
value = 900
triggerall = !var(30)
trigger1 = command = "fwd_y" || command = "back_y"
trigger1 = enemynear,movetype != H
trigger1 = P2BodyDist X < 15
trigger1 = statetype != A && ctrl
;---------------------------------------------------------------------------
; 巴投げ
[State -1]
type = ChangeState
value = 910
triggerall = !var(30)
trigger1 = command = "fwd_b" || command = "back_b"
trigger1 = enemynear,movetype != H
trigger1 = P2BodyDist X < 15
trigger1 = statetype != A && ctrl
;---------------------------------------------------------------------------
; 氷柱割り
[State -1]
type = ChangeState
value = 330
triggerall = !var(30)
triggerall = command = "fwd_x"
trigger1 = ctrl && statetype != A
trigger2 = stateno = 100
trigger3 = movecontact
trigger3 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger4 = movecontact
trigger4 = stateno = [400,420]
;---------------------------------------------------------------------------
; 上段受け
[State -1]
type = ChangeState
value = 340
triggerall = !var(30)
triggerall = command = "fwd_a"
triggerall = !var(1)
trigger1 = ctrl && statetype != A
trigger2 = stateno = 100
trigger3 = movecontact
trigger3 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger4 = movecontact
trigger4 = stateno = [400,420]
;---------------------------------------------------------------------------
; 下段受け
[State -1]
type = ChangeState
value = 350
triggerall = !var(30)
triggerall = command = "downfwd_a"
triggerall = !var(1)
trigger1 = ctrl && statetype != A
trigger2 = stateno = 100
trigger3 = movecontact
trigger3 = (stateno = [200,205]) || stateno = 215 || stateno = 225 || stateno = 235
trigger4 = movecontact
trigger4 = stateno = [400,420]
;---------------------------------------------------------------------------
; 立ち弱P
[State -1]
type = ChangeState
value = ifelse(P2BodyDist X > 20,200,205)
triggerall = !var(30)
triggerall = command = "x" && command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 100
trigger3 = (stateno = [200,205]) && AnimElem = 4,> 0
trigger4 = stateno = 400 && AnimElem = 3,> 0
trigger5 = stateno = 420 && AnimElem = 3,> 0
;---------------------------------------------------------------------------
; 立ち強P
[State -1]
type = ChangeState
value = ifelse(P2BodyDist X > 20,ifelse(var(1),240,210),215)
triggerall = !var(30)
triggerall = command = "y" && command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; 立ち弱K
[State -1]
type = ChangeState
value = ifelse(P2BodyDist X > 20,ifelse(var(1),250,220),225)
triggerall = !var(30)
triggerall = command = "a" && command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; 立ち強K
[State -1]
type = ChangeState
value = ifelse(P2BodyDist X > 20,230,235)
triggerall = !var(30)
triggerall = command = "b" && command != "holddown"
trigger1 = statetype = S && ctrl
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; 屈み弱P
[State -1]
type = ChangeState
value = 400
triggerall = !var(30)
triggerall = command = "x" && command = "holddown"
trigger1 = statetype = C && ctrl
trigger2 = stateno = 100
trigger3 = (stateno = [200,205]) && AnimElem = 4,> 0
trigger4 = stateno = 400 && AnimElem = 3,> 0
trigger5 = stateno = 420 && AnimElem = 3,> 0
;---------------------------------------------------------------------------
; 屈み強P
[State -1]
type = ChangeState
value = 410
triggerall = !var(30)
triggerall = command = "y" && command = "holddown"
trigger1 = statetype = C && ctrl
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; 屈み弱K
[State -1]
type = ChangeState
value = 420
triggerall = !var(30)
triggerall = command = "a" && command = "holddown"
trigger1 = statetype = C && ctrl
trigger2 = stateno = 100
trigger3 = (stateno = [200,205]) && AnimElem = 4,> 0
trigger4 = stateno = 400 && AnimElem = 3,> 0
trigger5 = stateno = 420 && AnimElem = 3,> 0
;---------------------------------------------------------------------------
; 屈み強K
[State -1]
type = ChangeState
value = 430
triggerall = !var(30)
triggerall = command = "b" && command = "holddown"
trigger1 = statetype = C && ctrl
trigger2 = stateno = 100
;---------------------------------------------------------------------------
; ジャンプ弱P
[State -1]
type = ChangeState
value = ifelse(vel x || Var(1) || Var(3),600,605)
triggerall = !var(30)
triggerall = command = "x"
trigger1 = statetype = A && ctrl
;---------------------------------------------------------------------------
; ジャンプ強P
[State -1]
type = ChangeState
value = ifelse(vel x || Var(1) || Var(3),610,615)
triggerall = !var(30)
triggerall = command = "y"
trigger1 = statetype = A && ctrl
;---------------------------------------------------------------------------
; ジャンプ弱K
[State -1]
type = ChangeState
value = ifelse(vel x || Var(1) || Var(3),620,625)
triggerall = !var(30)
triggerall = command = "a"
trigger1 = statetype = A && ctrl
;---------------------------------------------------------------------------
; ジャンプ強K
[State -1]
type = ChangeState
value = ifelse((vel x && !Var(3)) || Var(1),630,635)
triggerall = !var(30)
triggerall = command = "b"
trigger1 = statetype = A && ctrl
;---------------------------------------------------------------------------
; ダッシュ
[State -1]
type = ChangeState
value = 100
triggerall = !var(30)
trigger1 = command = "FF"
trigger1 = statetype = S && ctrl
;---------------------------------------------------------------------------
; バックステップ
[State -1]
type = ChangeState
value = 105
triggerall = !var(30)
trigger1 = command = "BB"
trigger1 = statetype = S && ctrl
;---------------------------------------------------------------------------
; 挑発
[State -1]
type = ChangeState
value = 840
triggerall = !var(30)
triggerall = command = "start"
trigger1 = statetype != A && ctrl
trigger2 = stateno = 100