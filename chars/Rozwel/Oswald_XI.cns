;変数使用表
;　1 = 
;　2 = 勝利ポーズ変更
;　3 = 
;　4 = スロー処理
;　5 = 強弱ボタン判定
;　6 = 通常攻撃ボイス、乱数指定
;　7 = ダイア、追加入力
;　8 = カウンダーヒット
;　9 = 特殊イントロ用変数（0.ノーマル・1.）
; 10 = プレイヤーの向き設定
; 11 = 暗転用変数
; 12 = KOサウンド
; 13 = 勝利判定
; 14 = ダイア、クラブ、スペード、ハート　派生制限
; 15 = ハイジャンプ
; 16 = 小ジャンプ
; 17 = ダメージ補正に使用
; 18 = 攻撃値の保存
; 19 = ダイア、クラブ、スペード、ハートコマンド判定
; 20 = 派生関係その２
; 21 = Q、投げるカードの種類
; 22 = 透過
; 23 = 
; 24 = 
; 25 = 
; 26 = ねばり補正
;
; 30 = AI判定(にしたいな…)

; f(1) = 攻撃補正
; f(2) = 



[Data]
  ;体力ゲージの初期値
life = 3000
  ;攻撃力（これ以上に設定すると強くなる）
power = 5000
attack = 90
  ;防御力（これ以上に設定すると強くなる）
defence = 100
  ;コンボをくらっている時にあがる防御力
fall.defence_up = 50
  ;倒れてから起上がるまでのフレーム数
liedown.time = 11
  ;空中でどれだけコンボが繋がるか（高くすると無限コンボになるので注意）
airjuggle = 30
  ;hitdefで設定していない時の基本ヒットスパークナンバー
sparkno = 2
  ;設定してない時のガードナンバー
guard.sparkno = 40
  ;KOした時に声にエコーをかけるか（１でＯＮ）
KO.echo = 0
 volume = 5
  IntPersistIndex = 0
FloatPersistIndex = 40

[Size]
xscale = 1           ;水平方向の縮尺（通常１）
yscale = 1           ;垂直方向の縮尺（通常１）
ground.back = 15     ;キャラの幅(後方,地上)
ground.front = 16    ;キャラの幅(前方,地上)
air.back = 12        ;キャラの幅(後方,空中)
air.front = 12       ;キャラの幅(前方,空中)
height = 102          ;キャラの高さ
attack.dist = 320    ;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 320;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0     ;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = 0, -100   ;頭の大体の座標
mid.pos = -11, -60    ;体の中心の大体の座標
shadowoffset = 0     ;影の垂直方向のオフセット
draw.offset = 0,0    ;使用しない

[Velocity]
walk.fwd  = 2.4      ;前進の速度
walk.back = -2.4     ;後退の速度
run.fwd  = 6.8, 0    ;前ダッシュの速度（ホップする時はyを-にする）
run.back = -6,-2.1 ;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-11.6    ;垂直ジャンプの速度
jump.back = -4.05,1    ;後ジャンプの速度
jump.fwd = 4.0,1       ;前ジャンプの速度
runjump.back = -2.55,-8.1 ;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4,-8.1      ;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-8.1      ;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.55      ;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.5         ;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 0      ;空中でジャンプする回数
airjump.height = 35  ;空中でジャンプする最低限の高さ
yaccel = .60         ;重力
stand.friction = .85  ;立ち状態の摩擦係数
crouch.friction = .82 ;屈み状態の摩擦係数

[Statedef 5900]
type = S

[State -2]
Type = varset
Trigger1 = var(59)>0
var(57)=ifelse((!enemynear,alive&&numenemy=2),1,0)

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State changestate]
Type = ChangeState
TriggerAll = Var(59) != 0
Trigger1 = time = 0
Value = 0
Ctrl = 1
IgnoreHitPause = 1


[State 40, 2]
type = VarSet
Trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
Trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)


[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[Statedef 41]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1];小ジャンプ
type = VarSet
Trigger1 = var(59)>0
var(4) = 1

[State 40, 2]
type = VarSet
Trigger1 = var(59)>0
Trigger1 = EnemyNear,StateType != L || P2BodyDist X >= 30
Trigger1 = EnemyNear,MoveType = H || Random <= 333 || EnemyNear,StateType = L
sysvar(1) = 1

[State 40, 3]
type = VarSet
Trigger1 = var(59)>0
Trigger1 = EnemyNear,StateType != L
Trigger1 = EnemyNear,MoveType != H
Trigger1 = BackEdgeBodyDist>60
Trigger1 = Random <= 500
sysvar(1) = -1

[State 40, 4];小ジャンプ
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -3

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[Statedef 21]
type = S
physics = S
sprpriority = 1
anim = 20
ctrl = 0

[State 20,]
type = Turn
trigger1 = P2dist X < 0

[State 20,]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 20,]
type = changestate
trigger1 = roundstate != 2
trigger2 = p2bodydist X <= 15
trigger3 = inguarddist
trigger3 = random <= var(59)*100
value = 0
ctrl = 1

[Statedef 22]
type = S
physics = S
sprpriority = 1
anim = 21
ctrl = 0

[State 22, 1]
type = Turn
trigger1 = P2dist X < 0

[State 22, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 22, 5]
type = changestate
trigger1 = roundstate != 2
trigger2 = p2bodydist x >= 240
trigger3 = inguarddist
trigger3 = random <= var(59)*100
value = 0
ctrl = 1

[StateDef 20]
Type = S
Physics = S
SprPriority = 0

[State changestate]
Type = ChangeState
TriggerAll = Var(59) != 0
Trigger1 = time = 0
Value = 0
Ctrl = 1
IgnoreHitPause = 1

[State 20, VelSet]
Type = VelSet
Trigger1 = 1
X = IfElse((Command="holdback"), Const(Velocity.Walk.Back.X), Const(Velocity.Walk.Fwd.X))

[State 20, ChangeAnim]
Type = ChangeAnim
TriggerAll = Vel X > 0
Trigger1 = Anim != 20
Value = 20

[State 20, ChangeAnim]
Type = ChangeAnim
TriggerAll = Vel X < 0
Trigger1 = Anim != 21
Value = 21

[State 20, ChangeAnim]
Type = ChangeAnim
Trigger1 = Vel X = 0
Trigger1 = Anim != 0
Value = 0


; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
;triggerall = !var(25)
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
;STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
;triggerall = var(25)
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
;CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
;triggerall = var(25)
trigger1 = !var(59)
trigger1 = command  = "holdback"
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
value = 130

[State 131, Stop Guarding]
type = ChangeState
;triggerall = !var(25)
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140
;---------------------------------------------------------------------------
;AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger1 = inguarddist
trigger2 = var(59)
trigger2 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
;triggerall = !var(25)
trigger1 = var(59) <= 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140


;---------------------------------------------------------------------------
;GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
;SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemyNear(var(57)),statetype=A))

[State 150, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
;SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
;CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemyNear(var(57)),statetype=A))

[State 152, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
;CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
triggerall = statetype = S
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype != A
trigger2 = Random <= var(59)*180
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
triggerall = statetype = C
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = enemyNear(var(57)),statetype = A
trigger2 = Random <= var(59)*180
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
;AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
;AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger1 = inguarddist
;trigger2 = var(25)
;trigger2 = var(28) = 0
trigger2 = var(59)
trigger2 = inguarddist
value = 130


[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; commonより ダッシュ
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 1

[State 00]
type = PlaySnd
trigger1 = Time= 0
value = 100, 0
loop = 1
channel = 1

[State 01]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
triggerall = Var(59) = 0
trigger1 = command != "holdfwd"
value = 0

[state 100,AI]
type = ctrlset
trigger1 = var(59) != 0
value = 0

[State 100,ﾀﾞｯｼｭｽﾃｯﾌﾟ DashStop]
type = ChangeState
TriggerAll = var(59) != 0
Trigger1 = inguarddist
Trigger2 = EnemyNear,MoveType!=H
Trigger2 = P2BodyDist X<=10
Trigger2 = P2BodyDist Y>=-500
Trigger3 = P2BodyDist X<=10
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; commonより バックステップ
[Statedef 105]
type    = S
physics = S
ctrl = 0
anim = 104
velset = 0,0


[State 00]
type = ChangeState
trigger1 = animtime = 0
value = 106

; 空中
[Statedef 106]
type    = A
physics = A
ctrl = 1
anim = 105
sprpriority = 1

[State 00]
type = VelSet
trigger1 = Time = 0
x = -5.5
y = -3.8

[State 01]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107



; 着地
[Statedef 107]
type    = S
physics = N
ctrl = 0
anim = 106
velset = 0,0

[State 00]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 01]
type = PosSet
trigger1 = Time = 0
y = 0

[State 02]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 03]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 00]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝った動作
[Statedef 180]
type = S

[State 00]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,2

[State 01]
type = ChangeState
trigger1 = matchover = 1
trigger1 = var(2) = 0
value = 181

[State 01]
type = ChangeState
trigger1 = matchover = 1
trigger1 = var(2) = 1
value = 182

[State 01]
type = ChangeState
trigger1 = matchover = 1
trigger1 = var(2) = 2
value = 183

[State 01]
type = ChangeState
trigger1 = matchover = 0
value = 185

;---------------------------------------------------------------------------
; 勝った動作[では、ごきげんよう]
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 00];では
type = PlaySnd
trigger1 = animelem = 1
value = 181,0

[State 00];ごきげんよう
type = PlaySnd
trigger1 = animelem = 8
value = 181,1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,190]
flag = roundnotover

;---------------------------------------------------------------------------
; 勝った動作[ご堪能いただけたかな？]
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 00];ご堪能いただけたかな？
type = PlaySnd
trigger1 = animelem = 6
value = 182,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,190]
flag = roundnotover

;---------------------------------------------------------------------------
; 勝った動作[仕方の無い人ですね]
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 00];仕方の無い人ですね
type = PlaySnd
trigger1 = animelem = 4
value = 183,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,-294
postype = p1
stateno = 184
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,190]
flag = roundnotover

;---------------------------------------------------------------------------
;(HELPER)帽子
[Statedef 184]
type = A
ctrl = 0
anim = 184
velset = 0,7
movetype = A
physics = S
sprpriority = 2


[State 2]
type = destroyself
trigger1 = time = 42



[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 00];仕方の無い人ですね
type = PlaySnd
trigger1 = animelem = 2
value = 185,0


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,130]
flag = roundnotover

;---------------------------------------------------------------------------
; 通常登場
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0


[State 00]
type = VarRandom
trigger1 = Time = 1
v = 2
range = 0,2

[State 01]
type = ChangeState
trigger1 = var(2) = 1
value = 191

[State 01]
type = ChangeState
trigger1 = var(2) = 2
value = 192


[State a];そう怯える事もあるまい
type = PlaySnd
trigger1 = animelem = 2
value = 190,0



[State a] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State a] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; 通常登場その２
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 00];オープンザゲーム
type = PlaySnd
trigger1 = animelem = 4
value = 191,0

[State 00];切る
type = PlaySnd
trigger1 = animelem = 5
value = 191,1


[State a] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State a] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; 通常登場その３
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State a];では、カーネフェルをお見せしよう
type = PlaySnd
trigger1 = animelem = 7
value = 192,0

[State a];斬る
type = PlaySnd
trigger1 = animelem = 30
value = 500,1

[State a];斬る
type = PlaySnd
trigger1 = animelem = 30
value = 801,1



[State a] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State a] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0



;---------------------------------------------------------------------------
; 挑発の動作
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 1

[State 00]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,2

[State 01]
type = Changeanim
trigger1 = time = 0
trigger1 = var(2) = 0
value = 195

[State 01]
type = Changeanim
trigger1 = time = 0
trigger1 = var(2) = 1
value = 196

[State 01]
type = Changeanim
trigger1 = time = 0
trigger1 = var(2) = 2
value = 197


[State 191, 3];早くしたまえ
type = PlaySnd
trigger1 = animelem = 2
value = 195,0


[State 191, 3];カード
type = PlaySnd
trigger1 = animelem = 4
trigger1 = var(2) = 0
value = 191,1

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
;---------------------------------------------------------------------------
; 遠距離立ち・弱・パンチ・の動作
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 200                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 0                    ;このステートを使った時のパワー増加量(0で変化無し)

[State 200, 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 22  , 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 41,20
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 9                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s7020                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -5, -89               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s510, 0                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = s7010
guardsound = s120, 0                ;ガードした時の音（同上）
ground.type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 9             ;相手が後にすべる時間
ground.hittime  = 9             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -6             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-2     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = high                 ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
ID = 200
nochainID = 1100

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 500, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1


[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 201]
type = S
ctrl = 0
anim = 201
velset = 0,0
movetype = I
physics = S
sprpriority = 2
;---------------------[アニメーション]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 210
value = 211

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 215
value = 216

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 240
value = 241

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 245
value = 246

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 801
value = 802

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = 1
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
; 近距離立ち・弱・パンチ・の動作
[Statedef 205]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 200                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 0                    ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 1                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 22 , 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 81,81
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s7020                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -20, -88               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s510, 0                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = s7010
guardsound = s120, 0                ;ガードした時の音（同上）
ground.type = high              ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 9             ;相手が後にすべる時間
ground.hittime  = 9             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -6             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.7,-2     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = high                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
ID = 200
nochainID = 1100

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 500, 0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 210


[State 210, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 210, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 500, 1

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1



[State 210, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = hard
damage    = 78
priority = 4, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s121,0
guard.sparkno = s7011
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10.5
air.velocity = -2.5,-4
ID = 200
nochainID = 1100

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち・強・パンチ・の動作
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 500, 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 210, 0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1


[State 210, 2]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = hard
damage    = 60 
priority = 4, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -30,-90
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -4,-3
ID = 200
nochainID = 1100

[State 215, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;遠距離 立ち・弱・キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200,0

[State 230, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 330, 0

[State 230, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = light
damage    = 45 
priority = 3, Hit
getpower = 41,20
guardflag = MA
pausetime = 7,8
sparkno = s7000
sparkxy = -15,-80
hitsound   = s430,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -5
air.velocity = -2.5,-3.5
ID = 200
nochainID = 1100


[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離 立ち・弱・キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200,0

[State 230, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 330, 0

[State 230, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = light
damage    = 45 
priority = 3, Hit
getpower = 91,53
guardflag = MA
pausetime = 9,10
sparkno = s7000
sparkxy = -30,-95
hitsound   = s430,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -4
air.velocity = -2.5,-3.5
ID = 200
nochainID = 1100

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;遠距離 立ち・強・キック
[Statedef 240]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 1


[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 500, 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 210, 0


;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1


[State 240, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = hard
damage    = 78
priority = 4, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -15,-63
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
air.velocity = -3,-5.2
ID = 200
nochainID = 1100

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち・強・キック
[Statedef 245]
type    = S
movetype= A
physics = N
juggle  = 7
poweradd= 50
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 1

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 500, 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 210, 0


;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1


[State 240, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = hard
damage    = 60
priority = 5, Hit
getpower = 91,53
guardflag = MA
pausetime = 11,12
sparkno = s7021
sparkxy = -25,-60
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -2,-5
fall = 0
fall.recover = 0
ID = 200
nochainID = 1100

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;J
[Statedef 250]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 1

;---------------------[効果音]
[State 240, 1];ベッド
type = PlaySnd
trigger1 = animelem = 2
value = 250, 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 8
value = 500, 0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 8
id = 3000
name = "ka-do"
sprpriority = 2
pos = 17,-73
postype = p1
stateno = 252
helpertype = normal
keyctrl = 0 
ownpal = 1


[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;J(キャンセル版)
[Statedef 251]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 251
sprpriority = 1

;---------------------[効果音]
[State 240, 1];ベッド
type = PlaySnd
trigger1 = animelem = 2
value = 250, 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 8
value = 500, 0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 8
id = 252
name = "ka-do"
sprpriority = 2
pos = 17,-73
postype = p1
stateno = 252
helpertype = normal
keyctrl = 0 
ownpal = 1


[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード1
[Statedef 252]
type = A
ctrl = 0
anim = 252
velset = 8,12
movetype = A
physics = N
sprpriority = 2

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA


;---------------------[攻撃判定]
[State 410, 2]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 54
priority = 4, Hit
animtype  = hard
hitflag = FLD
guardflag = L
pausetime = 0,11
getpower = 121,121
sparkno = s7021
sparkxy = -10,0
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-5
air.velocity = -2,-5
fall = 1
fall.recover = 0
ID = 410
nochainID = 1100,410

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y >0 && pos y >= -10
value = 253

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 253]
type = S
ctrl = 0
anim = 253
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = time = 0
value = 250,1


;---------------------[ポジションの固定]
[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = 1
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = time >= 20
trigger2 = root,movetype = H



;---------------------------------------------------------------------------
; ふっ飛ばし攻撃
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 50
poweradd= 50
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 2

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 390, 0

[State 200, 1];
type = PlaySnd
trigger1 = Time = 1
value = 290, 0


[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = high
damage    = 83 
priority = 6, Hit
getpower = 162,162
guardflag = MA
pausetime = 11,12
sparkno = s7001
sparkxy = -15,-95
hitsound   = s490,0
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5
air.velocity = -5,-6.8
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 1300
nochainID = 1100

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ガードキャンセルふっ飛ばし攻撃
[Statedef 291]
type    = S
movetype= A
physics = S
juggle  = 50
poweradd= -500
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 1


[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = 1
value = SCA

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = movehit = 1
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 390, 0

[State 200, 1];
type = PlaySnd
trigger1 = Time = 1
value = 290, 0


[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = diagup
damage    = 45
priority = 6, Hit
getpower = 0,0
guardflag = MA
pausetime = 11,12
sparkno = s7001
sparkxy = -15,-95
hitsound   = s490,0
guard.sparkno = s7011
guardsound = s120,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6,-6.5
air.velocity = -6,-6.8
fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
kill = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;屈み・弱・パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 1

[State 400, 2]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage    = 36 
priority = 3, Hit
animtype  = Light
hitflag = MAF
guardflag = M
getpower = 41,20
pausetime = 7,8
sparkno = s7020
sparkxy = -10,-53
hitsound   = s510,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -3
air.velocity = -2.5,-3
ID = 200
nochainID = 1100

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 500, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 401
helpertype = normal
keyctrl = 0 
ownpal = 1




[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 401]
type = S
ctrl = 0
anim = 401
velset = 0,0
movetype = I
physics = S
sprpriority = 2
;---------------------[アニメーション]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 410
value = 411

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 440
trigger1 = root,animelem = 3
value = 442

[state a]
type = changeanim
triggerall = time = 0
trigger1 = root,stateno = 450
trigger2 = root,stateno = 451
value = 452




;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = 1
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;屈み・強・パンチ
[Statedef 410]
type    = C
movetype= A
physics = N
juggle  = 8
poweradd= 50
ctrl = 0
velset = 0,0
anim = 410
sprpriority = 1


[State 410, 2]
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage    = 98
priority = 4, Hit
animtype  = hard
hitflag = MA
guardflag = MA
pausetime = 11,12
getpower = 91,53
sparkno = s7021
sparkxy = -10,-22
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8
air.velocity = -3,-6
fall = 0
fall.recover = 0
ID = 410
nochainID = 1100,410

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 401
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・弱・キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0

[State 430, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 330, 0


[State 430, 2]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 36 
priority = 3, Hit
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 7,8
sparkno = s7000
sparkxy = -10,-12
hitsound   = s430,0
getpower = 41,20
guard.sparkno = s7010
guardsound = s120,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -3
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20
ID = 200
nochainID = 1100


[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・強・キック
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 0
ctrl = 0
anim = 440
sprpriority = 1


[State 440, 3]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 45 
priority = 4, Hit
hitflag = MAF
guardflag = L
pausetime = 11,22
sparkno = s7021
getpower = 91,53
sparkxy = -15,-34
hitsound   = s510,1
guardsound = s121,0
guard.sparkno = s7011
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2,-2.5
air.velocity = -2,-2.5
guard.velocity = -5
fall = 1
fall.recover = 0
ID = 200
nochainID = 1100

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 500, 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 401
helpertype = normal
keyctrl = 0 
ownpal = 1



[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;10
[Statedef 450]
type    = C
movetype= A
physics = N
juggle  = 7
poweradd= 0
ctrl = 0
velset = 0,0
anim = 450
sprpriority = 1


[State 410, 2]
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage    = 107
priority = 4, Hit
animtype  = hard
hitflag = MA
guardflag = MA
pausetime = 11,12
getpower = 141,141
sparkno = s7021
sparkxy = -10,-72
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3.5,-6
air.velocity = -3.5,-6
yaccel = 0.42
fall = 1
fall.recover = 0
ID = 410
nochainID = 1100,410

[State 200, 1];レイズ
type = PlaySnd
trigger1 = animelem = 4
value = 450, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 4
value = 500,0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 4
value = 450,1

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = -15,0
postype = p1
stateno = 401
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;10(キャンセル版)
[Statedef 451]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 0
ctrl = 0
velset = 0,0
anim = 451
sprpriority = 1

[State 1100, Velocity]
type = Veladd
trigger1 = animelemtime(3) <= 1
x = 3.5

[State 1100, Velocity]
type = Veladd
trigger1 = animelemtime(5) >= 1
trigger1 = animelemtime(6) <= 1

x = -2.5

[State 410, 2]
type = HitDef
trigger1 = animelem = 10
attr = C, NA
damage    = 71 
priority = 4, Hit
animtype  = hard
guardflag = MA
pausetime = 12,18
getpower = 71,71
sparkno = s7021
sparkxy = -10,-72
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -0.5,-7
air.velocity = -0.5,-7
fall = 1
fall.recover = 0
;fall.recovertime = 50
ID = 450
nochainID = 1100,450

[State 200, 1];レイズ
type = PlaySnd
trigger1 = animelem = 1
value = 703, 0

[State 200, 1];レイズ
type = PlaySnd
trigger1 = animelem = 10
value = 450, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 10
value = 500,0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 10
value = 450,1

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 10
id = 3000
name = "ka-do"
sprpriority = 2
pos = -20,0
postype = p1
stateno = 401
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;空中・弱・パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2


[State 600, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 45 
priority = 3, Hit
getpower = 81,61
guardflag = HA
pausetime = 7,8
sparkno = s7020
sparkxy = -10,-54
hitsound   = s510,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3
ID = 600
nochainID = 1100

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 500, 0

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 601
helpertype = normal
keyctrl = 0 
ownpal = 1


;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 601]
type = S
ctrl = 0
anim = 601
velset = 0,0
movetype = I
physics = S
sprpriority = 2
;---------------------[アニメーション]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 610
value = 611

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 640
value = 641


;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = 1
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,statetype != A

;---------------------------------------------------------------------------
;空中・強・パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 50
ctrl = 0
anim = 610
sprpriority = 1

[State 610, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 89
priority = 5, Hit
guardflag = HA
getpower = 111,81
pausetime = 10,14
sparkno = s7021
sparkxy = -10,-44
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
animtype = hard
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4
air.velocity = -3,-4
ID = 600
nochainID = 1100

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 601
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------------------------------------------------------------
;垂直空中・弱・キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,0

[State 630, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 330, 0


[State 630, 2]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 54 
priority = 3, Hit
getpower = 81,61
guardflag = HA
pausetime = 8,8
sparkno = s7000
sparkxy = -5,-56
hitsound   = s430,0
guard.sparkno = s7010
guardsound = s120,0
ground.type = low
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3
ID = 600
nochainID = 1100

;---------------------------------------------------------------------------
;空中・強・キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 50
ctrl = 0
anim = 640
sprpriority = 1

[State 640, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage    = 89
priority = 4, Hit
guardflag = HA
getpower = 111,81
pausetime = 12,12
sparkno = s7021
sparkxy = -10,-72
hitsound   = s510,1
guard.sparkno = s7011
guardsound = s121,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4
ID = 600
nochainID = 1100

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 500, 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 601
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------------------------------------------------------------
;空中ふっ飛ばし攻撃
[Statedef 690]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 690
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 290,0

[State 640, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 390, 0

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = hard
damage    = 85
getpower = 162,162
guardflag = MA
pausetime = 11,12
sparkno = s7001
sparkxy = -15,-72
hitsound   = s490,0
guard.sparkno = s7011
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6,-6.5
air.velocity = -6,-6.8
yaccel = 0.45
fall = 1
fall.recover = 0
ID = 1300
nochainID = 1200








;---------------------------------------------------------------------------
;緊急回避前
[Statedef 700]
; type = S      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = I    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = N   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 700
velset = 0,0
sprpriority = 2


[State 290, 1]
type = poweradd
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = SCA

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = animelem = 10,<=0
value = SCA

[state a]
type = playerpush
trigger1 = animelem = 10,<=0
value = 0

[State 600, 1];
type = PlaySnd
trigger1 = Time = 1
value = 701, 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 2
x = 7

[State 600, 1]
type = velset
trigger1 = animelem = 10
x = 0

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 0
time = 33
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 12,12,12
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1






[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;緊急回避後ろ
[Statedef 701]
; type = S      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = I    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = S   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 701
sprpriority = 2
velset = 0,0

[State 290, 1]
type = poweradd
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = SCA

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = animelem = 11,<=0
value = SCA

[state a]
type = playerpush
trigger1 = animelem = 11,<= 0
value = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 701, 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 3
x = -7

[State 600, 1]
type = velset
trigger1 = animelem = 11
x = 0


[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 0
time = 33
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 0,0,0
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1




[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ダウン回避
[Statedef 702]
; type = S      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = I    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = S   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 702
sprpriority = 2
velset = 0,0


;---------------------[]

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type = playerpush
trigger1 = animelem = 10,<=0
value = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 701, 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = -6

[State 600, 1]
type = veladd
trigger1 = vel x <= 0
trigger1 = gametime % 2
x = 0.4

[state a]
type = velset
trigger1 = vel x >= 0
x = 0


[State 50, 4];←成功したときの残像
type = null;AfterImage
trigger1 = time = 0
time = 33
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 0,0,0
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1


[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
;2
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 1

;---------------------[ブーメランのエフェクト]
[State removeexplod];前のステートのブーメラン消去
type = removeexplod
trigger1 = time = 0
ID = 3000


[State 800, 1]
type = HitDef
Trigger1 = Time = 0
Trigger1 = p2stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1facing = ifelse (command = "holdback", -1, 1) ;前を押したらターンする設定
p2facing = 1          ;？
p1stateno = 801       ;投げが成功した場合の移動する１Ｐのステート
p2stateno = 805       ;投げが成功した場合の移動する２Ｐのステート
;hitsound = S800,0
fall = 1              ;落ちる力を２Ｐにかけるか

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;自分
[Statedef 801]
type    = S
movetype= A
physics = N
anim = 801
juggle  = 8
sprpriority = 1

;---------------------[]
[State explod];掴み
type = Explod
trigger1 = animelem = 3
anim = 7080
id = 3000
sprpriority = 2
postype = p1
pos = 32,-86
bindtime = -1
supermove = 0
ignorehitpause = 0
under = 0

[State explod];斬り
type = Explod
trigger1 = animelem = 5
anim = 7021
id = 3000
sprpriority = 4
postype = p1
pos = 41,-80
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0


;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 5
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 201
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[サウンド]
[State 810, Grab Sound];掴み
type = PlaySnd
trigger1 = animelem = 3
value = 800, 0

[State 810, Grab Sound];スペキュレーション
type = PlaySnd
trigger1 = AnimElem = 5
value = 801, 0

[State 810, Grab Sound];斬る
type = PlaySnd
trigger1 = AnimElem = 5
value = 510, 1

[State 810, Grab Sound];斬る
type = PlaySnd
trigger1 = AnimElem = 5
value = 1000, 2

;:::相手

[State 801, 2]
type = TargetBind
trigger1 = animelem = 1
pos = 36,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 5
pos = 46,0

[State 801, 2]
type = Targetlifeadd
trigger1 = animelem = 5
value = -100;-173
kill = 1


;:::

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1;animelem = 1
edge = 75,0

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げられている相手
[Statedef 805]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 805

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1


[State 821, 3] 
type = SelfState
;triggerall = Vel Y > 0
;trigger1 = Pos Y >= 0
trigger1 = animtime = 0
value = 5110 



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; ダイア
[Statedef 1000]
type    = S
movetype= A
physics = N
juggle  = 7
poweradd= 101
velset = 0,0
anim = 1000
sprpriority = 1
ctrl = 0
facep2 = 1

;---------------------[コマンド判定]


[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "x"
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "y"
v = 5
value = 1


;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1001

;---------------------[効果音]
[State 210, 1];ハハハハハ
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1005
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 1100, Velocity]
type = Veladd
trigger1 = animelemtime(3) = 8
trigger1 = anim = 1001
x = 25


[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 2
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
trigger1 = anim = 1001
time = 30
trans = add
timegap = 1
framegap = 1
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

;---------------------[攻撃判定]
[State 210, 2]
type = HitDef
trigger1 = animelemtime(4) = 0
trigger1 = anim = 1000
attr = S, SA
animtype  = hard
damage    = 71,10
priority = 4, Hit
getpower = 61,61
guardflag = MA
pausetime = 2,2
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10.5
air.velocity = -4.5,-4
air.fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
envshake.time = 15
envshake.ampl = 4
envshake.freq = 80
envshake.phase = 80

[State 210, 2]
type = HitDef
trigger1 = animelemtime(4) = 2
trigger1 = anim = 1001
attr = S, SA
animtype  = hard
damage    = 91,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 3,3
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-5.5
air.velocity = -3,-5.5
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animelem = 5,>=0
trigger1 = anim = 1000
value = 1050

[state a]
type = changestate
trigger1 = animelem = 5,>=0
trigger1 = anim = 1001
value = 1051

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

; ダイア
[Statedef 1001]
type    = S
movetype= A
physics = N
juggle  = 7
poweradd= 101
velset = 0,0
anim = 1001
sprpriority = 1
ctrl = 0
facep2 = 1

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
value = 1001

;---------------------[効果音]
[State 210, 1];ハハハハハ
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 4
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1005
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 1100, Velocity]
type = Veladd
trigger1 = animelemtime(3) = 8
trigger1 = anim = 1001
x = 25


[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
trigger1 = anim = 1001
time = 30
trans = add
timegap = 1
framegap = 1
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[State 210, 2]
type = HitDef
trigger1 = animelemtime(4) = 2
trigger1 = anim = 1001
attr = S, SA
animtype  = hard
damage    = 91,10
priority = 4, Hit
getpower = 81,81
guardflag = MA
pausetime = 3,3
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-5.5
air.velocity = -3,-5.5
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animelem = 5,>=0
value = 1051


[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ダイア・追加
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1050
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1005
helpertype = normal
keyctrl = 0 
ownpal = 1


;---------------------[攻撃判定]
[State 210, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 44,10
priority = 5, Hit
getpower = 51,51
guardflag = MA
pausetime = 14,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = low
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -8,-4
guard.velocity = -16
air.velocity = -8,-4
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
envshake.time = 15
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

; ダイア・追加
[Statedef 1051]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1051
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 3
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1305
helpertype = normal
keyctrl = 0 
ownpal = 1


;---------------------[攻撃判定]
[State 210, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 44,10
priority = 5, Hit
getpower = 71,71
guardflag = MA
pausetime = 14,24
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = low
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -8,-4
air.velocity = -8,-4
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1005]
type = S
ctrl = 0
anim = 1005
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 1050
value = 1055

;---------------------[効果音]
[State 210, 1];パラパラ
type = PlaySnd
trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; クラブ
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 101
velset = 0,0
anim = 1100
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "a"
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "b"
v = 5
value = 1

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1101



;---------------------[効果音]
[state a];くははは
type = playsnd
trigger1 = animelem = 1
value = 1100,0

[state a];ジャンプ
type = playsnd
trigger1 = animelem = 3
value = 40,1


[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1100,1

[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1105
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動、ステートの状態変更]
[state a]
type = statetypeset
trigger1 = animelem = 4
value = A

[state a]
type = velset
trigger1 = animelem = 4
trigger1 = var(5) = 0
x = 3
y = -4

[state a]
type = velset
trigger1 = animelem = 4
trigger1 = var(5) = 1
x = 6
y = -10.8

[state a]
type = veladd
trigger1 = animelem = 4,>=0
trigger1 = var(5) = 0
y = 0.5

[state a]
type = veladd
trigger1 = animelem = 4,>=0
trigger1 = var(5) = 1
y = 0.85


[State 2];弱(派生版)
type = HitDef
triggerall = var(5) = 0
trigger1 = animelem = 7
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 80,10
getpower = 81,81
guardflag = HA
pausetime = 10,10
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.slidetime = 22
ground.hittime  = 17
ground.velocity = -4,14
groundguard.velocity = -19
airguard.velocity = -6,6
air.velocity = -4,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 10
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0




[State 2];強(派生版)
type = HitDef
triggerall = var(5) = 1
trigger1 = animelem = 7
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 89,10
getpower = 111,111
guardflag = HA
pausetime = 18,18
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 18
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
value = 1102

[Statedef 1101]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 101
velset = 0,0
anim = 11000
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "a"
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "b"
v = 5
value = 1

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 11001



;---------------------[効果音]
[state a];くははは
type = playsnd
trigger1 = animelem = 1
value = 1100,0

[state a];ジャンプ
type = playsnd
trigger1 = animelem = 1
value = 40,1


[state a];斬る
type = playsnd
trigger1 = animelem = 5
value = 1100,1

[state a];斬る
type = playsnd
trigger1 = animelem = 5
value = 1000,2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 5
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1105
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動、ステートの状態変更]
[state a]
type = gravity
trigger1 = 1

[state a]
type = veladd
trigger1 = animelem = 1
trigger1 = var(5) = 0
x = 2
y = -3

[state a]
type = veladd
trigger1 = animelem = 1
trigger1 = var(5) = 1
x = 4
y = -6


[State 2];弱(派生版)
type = HitDef
triggerall = var(5) = 0
trigger1 = animelem = 5
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 80,10
getpower = 81,81
guardflag = HA
pausetime = 10,10
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.slidetime = 22
ground.hittime  = 17
ground.velocity = -4,14
groundguard.velocity = -19
airguard.velocity = -6,6
air.velocity = -4,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 10
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0




[State 2];強(派生版)
type = HitDef
triggerall = var(5) = 1
trigger1 = animelem = 5
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 89,10
getpower = 111,111
guardflag = HA
pausetime = 18,18
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 18
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
value = 1102

;---------------------------------------------------------------------------
; クラブ・着地
[Statedef 1102]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1102
ctrl = 0

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 0
time = 0

;---------------------[]
[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[効果音]
[state a];
type = playsnd
trigger1 = time = 0
value = 40,0


[state 00]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


[Statedef 1103]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 101
velset = 0,0
anim = 1101
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
value = 1101



;---------------------[効果音]
[state a];くははは
type = playsnd
trigger1 = animelem = 1
value = 1100,0

[state a];ジャンプ
type = playsnd
trigger1 = animelem = 3
value = 40,1


[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1100,1

[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1105
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動、ステートの状態変更]
[state a]
type = statetypeset
trigger1 = animelem = 4
value = A


[state a]
type = velset
trigger1 = animelem = 4
x = 6
y = -10.8

[state a]
type = veladd
trigger1 = animelem = 4,>=0
y = 0.85




[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0




[State 2];強(派生版)
type = HitDef
trigger1 = animelem = 7
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 89,10
getpower = 111,111
guardflag = HA
pausetime = 18,18
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0
fall.envshake.time = 13
fall.envshake.ampl = -5
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 18
envshake.ampl = 10
envshake.freq = 80
envshake.phase = 80


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
value = 1102

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1105]
type = S
ctrl = 0
anim = 1105
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;---------------------[効果音]
[State 210, 1];パラパラ
type = PlaySnd
trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = time = 0
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; ハート
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1200
sprpriority = 1
ctrl = 0

;---------------------[コマンド判定]


[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "a"
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
trigger1 = time = 0
trigger1 = command = "b"
v = 5
value = 1

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1201
;---------------------[速度]
[state a]
type = veladd
trigger1 = animelem = 7
x = -6


;---------------------[効果音]
[state a];ふっふ
type = playsnd
trigger1 = animelem = 5
value = 1200,0


[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1200,1

[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1205
helpertype = normal
keyctrl = 0 
ownpal = 1

[state a];
type = Helper
trigger1 = animelem = 7
id = 1200
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1206
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 1];無敵の状態を作る
type = NotHitBy 
trigger1 = animelem = 8,<=0
trigger1 = anim = 1200
value = SCA

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

;---------------------[攻撃]

[State 2];強
type = HitDef
trigger1 = animelem = 5
trigger1 = anim = 1200
attr = S, SA
animtype  = hard
priority = 5, Hit
damage    = 74,10
getpower = 51,51
guardflag = MA
pausetime = 15,16
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4,-8
air.velocity = -4,-8
yaccel = 0.42
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80

[State 210, 2]
type = HitDef
trigger1 = animelem = 1
trigger1 = anim = 1201
attr = S, SA
animtype  = diagup
damage    = 95,10
priority = 5, Hit
getpower = 81,81
guardflag = MA
pausetime = 20,20
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.5,-8
air.velocity = -1.5,-8
yaccel = 0.49
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80


[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = animtime = 0
value = 1202

[Statedef 1201]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 101
velset = 0,0
anim = 1201
sprpriority = 1
ctrl = 0

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
value = 1201
;---------------------[速度]
[state a]
type = veladd
trigger1 = animelem = 7
x = -6


;---------------------[効果音]
[state a];ふっふ
type = playsnd
trigger1 = animelem = 5
value = 1200,0


[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1200,1

[state a];斬る
type = playsnd
trigger1 = animelem = 7
value = 1000,2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 7
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1205
helpertype = normal
keyctrl = 0 
ownpal = 1

[state a];
type = null;Helper
trigger1 = animelem = 7
id = 1200
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1206
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 45
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9
ignorehitpause = 1

;---------------------[攻撃]


[State 210, 2]
type = HitDef
trigger1 = animelem = 1
trigger1 = anim = 1201
attr = S, SA
animtype  = diagup
damage    = 95,10
priority = 5, Hit
getpower = 81,81
guardflag = MA
pausetime = 20,20
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.5,-8
air.velocity = -1.5,-8
yaccel = 0.49
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80


[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = animtime = 0
value = 1202

;---------------------------------------------------------------------------
; ハート・終了
[Statedef 1202]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1202
ctrl = 0


[state 00]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)吹き飛び
[Statedef 1250]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = velset
trigger1 = animelem = 2
x = -16

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1250

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[state a]
type = changestate
triggerall = animelem = 2,>=0
trigger1 = backEdgebodydist <=10
trigger2 = time >=100
value = 1251

;---------------------------------------------------------------------------
;壁ぶつかり
[Statedef 1251]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 5
ampl = -8
freq = 95
phase = 95

[State 1027, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1251

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[state a]
type = changestate
trigger1 = animtime = 0
value = 1252

;---------------------------------------------------------------------------
;跳ね返り
[Statedef 1252]
type    = A
movetype= H
physics = N
velset = 5,-8
sprpriority = 3

[state a]
type = null;turn
trigger1 = time = 0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1252

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = 1
y = .28

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 




;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1205]
type = S
ctrl = 0
anim = 1205
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;---------------------[効果音]
[State 210, 1];パラパラ
type = PlaySnd
trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
; (HELPER)飛び道具消去
[Statedef 1206]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
anim = 1206
ctrl = 0

[state a]
type = bindtoroot
trigger1 = time = 0
time = -1
pos = 0,0

[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP
stateno = 1207

[state a]
type = destroyself
trigger1 = root,stateno != 1200

;---------------------------------------------------------------------------
; (HELPER)飛び道具消去2
[Statedef 1207]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
anim = 1206
ctrl = 0

[state a]
type = destroyself
trigger1 = time = 0


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; スペード
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 7
poweradd= 101
velset = 0,0
anim = 1300
sprpriority = 1
ctrl = 0


[State 4000, BGPalFX]
type = PalFX
trigger1 = time%2 = 1
time = 1
add = -255,-255,-255
ignorehitpause = 1


[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9


;---------------------[効果音]
[State 210, 1];ふっふっふ
type = PlaySnd
trigger1 = animelem = 2
value = 1300, 0

[State 200, 1];ダッシュ
type = PlaySnd
trigger1 = animelem = 3
value = 703, 0

;---------------------[速度]
[state a]
type = null;posadd
trigger1 = animelem = 3
trigger1 = var(5) = 0
x = 8

[state a]
type = veladd
trigger1 = 1
x = 0.9


;---------------------[立ちステートに戻る]
[state a]
type = changestate
triggerall = time >= 5
trigger1 = p2bodydist x <= 20 && animelem = 4,>=0
trigger2 = p2bodydist x <= 30 && animelem = 4,>=0
trigger3 = time >= 32
value = 1302


;---------------------------------------------------------------------------
; スペード・攻撃
[Statedef 1302]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 26,0
anim = 1302
sprpriority = 1
ctrl = 0

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 15
trans = add
timegap = 1
framegap = 1
length = 10
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[state a]
type = playerpush
trigger1 = animelemtime(4) <= 0
value = 0


;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1303

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 1000, 1

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 1000, 2


;---------------------[速度]
[state a]
type = veladd
trigger1 = vel x >= 0.2
trigger1 = var(5) = 0
x = -0.1

[state a]
type = veladd
trigger1 = vel x >= 0.2
trigger1 = var(5) = 1
x = -0.07

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 2
id = 3000
name = "ka-do"
sprpriority = 2
pos = 30,0
postype = p1
stateno = 1305
helpertype = normal
keyctrl = 0 
ownpal = 1



[State 210, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
animtype  = hard
damage    = 71,10
priority = 5, Hit
getpower = 81,81
guardflag = MA
pausetime = 0,35
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 8,-6
air.velocity = 8,-6
yaccel = 0.42
fall = 1
fall.recover = 0
ID = 200
nochainID = 1100
p2facing = -1
envshake.time = 15
envshake.ampl = 5
envshake.freq = 80
envshake.phase = 80

[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S510,2
ignorehitpause = 1
persistent = 0
freqmul = 1.2

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 2
under = 1
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; スペード・追加
[Statedef 1350]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1350
sprpriority = 1
ctrl = 0
facep2 = 0

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 801, 0

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 1000, 2

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 703, 0

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelemtime(5) = 1
id = 3000
name = "ka-do"
sprpriority = 2
pos = 0,-30
postype = p1
stateno = 1355
helpertype = normal
keyctrl = 0 
ownpal = 1

[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 35
trans = add
timegap = 1
framegap = 1
length = 15
palbright = 2,2,2
palcontrast = 60,60,60
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

[state a]
type = playerpush
trigger1 = animelemtime(7) <= 0
value = 0

;---------------------[速度]
[state a]
type = veladd
trigger1 = animelem = 5
x = -120

[state a]
type = velset
trigger1 = animelem = 6
x = -2

[State 210, 2]
type = HitDef
trigger1 = animelem = 1
attr = S, SA
animtype  = diagup
damage    = 71,10
priority = 5, Hit
getpower = 111,111
guardflag = MA
pausetime = 0,25
sparkno = s7022
sparkxy = -10,-70
hitsound   = s510,1
guardsound = s122,0
guard.sparkno = s7012
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8,-6
air.velocity = -8,-6
yaccel = 0.42
fall = 1
fall.recover = 0
envshake.time = 25
envshake.ampl = 15
envshake.freq = 80
envshake.phase = 80
p2facing = 1


[State 220, 音を鳴らす]
type = PlaySnd
trigger1 = movehit
value = S2100,2
ignorehitpause = 1
persistent = 0
freqmul = 1.1

[State -2, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1305]
type = S
ctrl = 0
anim = 1305
velset = 0,0
movetype = A
physics = S
sprpriority = 2

[state a]
type = changeanim
triggerall = time = 0
trigger1 = root,stateno = 1350
trigger2 = root,stateno = 1051
value = 1355

;---------------------[効果音]
[State 210, 1];パラパラ
type = PlaySnd
trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = time = 0
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;(HELPER)カード
[Statedef 1355]
type = S
ctrl = 0
anim = 1005
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = root,stateno = 1050
value = 1055

;---------------------[効果音]
[State 210, 1];パラパラ
type = PlaySnd
trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[state a]
type = null;bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

;---------------------------------------------------------------------------

[Statedef 1400]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 8
poweradd= 70
anim = 1400
ctrl = 0

;---------------------[効果音]
[State 2000, 6]
type = PlaySnd
trigger1 = animelem = 4
value = 2100,1

;---------------------[速度]
[state a]
type = velset
trigger1 = animelem = 5
x = 21

;---------------------[エフェクト]
[State 50, 4];←成功したときの残像
type = AfterImage
trigger1 = time = 1
time = 30
trans = add
timegap = 1
framegap = 2
length = 20
palbright = 12,12,12
palcontrast = 70,70,70
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.9,0.9,0.9

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 5
attr = S, HA
animtype  = hard
damage    = 0,0
getpower = 80,40
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = s7022
sparkxy = -10,-81
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = -1,-3
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
p2facing = 1
p1stateno = 1402

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = time = 27
trigger2 = moveguarded
value = 1401

;---------------------------------------------------------------------------
; JOKER・ダッシュ終了
[Statedef 1401]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 6,0
anim = 1401
ctrl = 0

[State 50, 4];残像消去
type = AfterImage
trigger1 = animtime = 0
time = 0

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; JOKER・ヒット
[Statedef 1402]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0

[State 1000, Width]
type = Width
trigger1 = time >= 0
edge = 15,15

[State 1000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, 0]
type = ScreenBound
trigger1 = time >= 0
value = 0
movecamera = 0,0

;---------------------[相手制御]
[State 801, 2]
type = TargetBind
trigger1 = 1
pos = 79,-85

[state a]
type = targetstate
trigger1 = time = 0
value = 1405

[State a]
type = helper
trigger1 = time = 0
stateno = 1415
id = 1400
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = FrontEdgeDist <= 70
value = 1403

;---------------------------------------------------------------------------
; JOKER・壁ヒット
[Statedef 1403]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1402
ctrl = 0

[State 50, 4];残像消去
type = AfterImage
trigger1 = animelem = 2
time = 0

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 15
ampl = -25
freq = 125
phase = 125

[State explod];ヒット1
type = Explod
trigger1 = time = 0
anim = 7002
id = 3000
sprpriority = 2
postype = p1
pos = 62,-68
bindtime = 1
supermove = 0
under = 0

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = time = 0
value  = 2200,3

[state a]
type = playsnd
trigger1 = time = 0
value  = 490,0

;---------------------[速度]
[state a]
type = velset
trigger1 = animelem = 2
x = -4

[state a]
type = veladd
trigger1 = animelem = 2,>= 0
x = 0.12

;---------------------[相手制御]
[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 75,0


[State 801, 2]
type = TargetBind
trigger1 = time = 0
pos = 72,0

[State 801, 2]
type = Targetlifeadd
trigger1 = animelem = 1
value = -105

[state a]
type = targetstate
trigger1 = time = 0
value = 1406

[state a]
type = targetstate
trigger1 = animelem = 2
value = 1408


;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = time = 28
value = 52

[Statedef 1405]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2210

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

;---------------------------------------------------------------------------
;(ENEMY)叩きつけ
[Statedef 1406]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2211

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0


[Statedef 1415]
type    = S
movetype= I
physics = N
anim = 9999
sprpriority = -5
ctrl = 0

[State 2150, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 2150, DestroySelf]
type = DestroySelf
;trigger1 = P2MoveType != H
trigger1 = Parent, StateNo != [1400,1405]


[Statedef 1408]
type    = A
movetype= H
physics = N
velset = 0,0

[State 222]
type = null;nothitby
trigger1 = 1
value = SCA,AA,AT,AP
time = 2

[State 222]
type = changeanim
Trigger1 = SelfAnimExist(5061)
trigger1 = time = 0
value = 5061

[State 222]
type = changeanim
Trigger1 = !SelfAnimExist(5061)
trigger1 = time = 0
value = 5050

[State 222]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 222]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 222, スクロール]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 222]
type = null;Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor(screenpos y) - 50 ;（※５）
postype = back
sprpriority = 3

[State 222, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 222, 速度]
type = velset
trigger1 = Time = 0
x = 0.7
y = -4

[State 222, 速度]
type = veladd
trigger1 = Time > 0
y = .6

[State 222, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; K
[Statedef 1500]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1500
sprpriority = 1
ctrl = 0

;---------------------[追加攻撃]
[state a];初期化
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
triggerall = time = 0
trigger1 = command = "a"
v = 5
value = 0

[state a]
type = varset
TriggerAll=var(59)=0
triggerall = time = 0
trigger1 = command = "b"
v = 5
value = 1

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 7
id = 1500
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1505
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[当身判定]
[State 1700, 0];
type = ReversalDef
trigger1 = animelem = 6
attr = S, ST
reversal.attr = SCA, NA, SA
hitflag = M-
priority = 6, Miss
pausetime = 5,16
sparkno = s7002
hitsound = S410,0
p2facing = 1
p1stateno = 1510

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; K・当身成功
[Statedef 1510]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1510
sprpriority = 1
ctrl = 0

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 1511

;---------------------[効果音]
[State 210, 1];
type = PlaySnd
trigger1 = time = 0
value = 1500, 0

;---------------------[エフェクト]
[State 00];背景の暗転
type = BGPalfx
trigger1 = time = 0
time = 23
mul = 0,0,0
under = 2

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
id = 1500
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1505
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[移動]
[state a]
type = turn
trigger1 = animelem = 2

[state a]
type = posset
trigger1 = animelem = 2
x = enemy,pos x

[state a]
type = posadd
trigger1 = animelem = 2
x = -30

[state a]
type = posadd
trigger1 = animelem = 2
trigger1 = anim  =1511
y = -90

[state a]
type = statetypeset
trigger1 = animelem = 2
trigger1 = anim = 1511
value = A

[state a]
type = veladd
trigger1 = animelem = 2,>=0
trigger1 = anim = 1511
y = 0.36

[state a]
type = ctrlset
trigger1 = animelem = 2,>=0
trigger1 = anim = 1511
value = 1


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
trigger1 = var(5) = 0
value = 0
ctrl = 1

[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
trigger1 = var(5) = 1
value = 52

;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1505]
type = S
ctrl = 0
anim = 1505
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = time = 0
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 10


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; A
[Statedef 1600]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 71
velset = 0,0
anim = 1600
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[state a];んっふっふ
type = playsnd
trigger1 = animelem = 2
value = 1300,0

[state a];ジャンプ
type = playsnd
trigger1 = animelem = 2
value = 1000,1

;---------------------[エフェクト]
[State 50, 4];残像
type = AfterImage
trigger1 = animelem = 2
time = -1
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 6,6,6
palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1
ignorehitpause = 0

;---------------------[移動、ステートの状態変更]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[state a]
type = velset
trigger1 = animelem = 2
y = -11

[state a]
type = veladd
trigger1 = animelem = 2,>=0
trigger1 = animelem = 10,<=0
y = 0.3

[state a]
type = velset
trigger1 = animelem = 10
y = 0

[state a]
type = veladd
trigger1 = animelem = 10,>=0
trigger1 = vel y <= 3
y = 0.2

;---------------------[エフェクト]
[state a]
type = playerpush
trigger1 = animelem = 10,<=0
value = 0

;---------------------[攻撃]
[State 2];
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 9,2
getpower = 10,10
guardflag = M
pausetime = 4,ifelse(p2dist x <= 20 , 5,4)
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-12
air.velocity = ifelse(p2dist x <= 20 , 0,-2),-10.5
yaccel = 0.45
fall =1
air.fall = 1
fall.recover = 0

[State 2];
type = HitDef
trigger1 = animelem = 8
trigger1 = hitcount = 6
attr = A, SA
animtype  = hard
priority = 5, Hit
damage    = 9,2
getpower = 10,10
guardflag = M
pausetime = 4,5
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3,-12
air.velocity = ifelse(p2dist x <= 5 , 0,-1.5),-6.5
fall =1
air.fall = 1
fall.recover = 0



;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animelem = 8,>=0
trigger1 = movehit
trigger1 = p2dist x <= 2 && p2dist x >= -2
value = 1602

[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
value = 1601

;---------------------------------------------------------------------------
; A・着地
[Statedef 1601]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1601
ctrl = 0

;---------------------[]
[state a]
type = posset
trigger1 = time = 0
y = 0

[State 50, 4];残像消去
type = AfterImage
trigger1 = animtime = 0
time = 0


;---------------------[効果音]
[state a];
type = playsnd
trigger1 = time = 0
value = 40,0


[state 00]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; A・成功
[Statedef 1602]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,-2
anim = 1602
ctrl = 0
sprpriority = -1


[State 50, 4];残像消去
type = AfterImage
trigger1 = time = 0
time = 0

;---------------------[効果音]
[state a];スペキュレーション
type = playsnd
trigger1 = animelem = 11
value = 1600,0

[state a];攻撃
type = playsnd
trigger1 = animelem = 12
value = 2100,2

;---------------------[エフェクト]
[State 00];背景の暗転
type = BGPalfx
trigger1 = animelem = 16,<=0
time = 3
mul = 0,0,0
under = 2
ignorehitpause = 1

;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = animelem = 12
id = 1600
name = "ka-do"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 1603
helpertype = normal
keyctrl = 0 
ownpal = 1

;---------------------[速度]
[state a]
type = velset
trigger1 = animelem = 9
y = 0

[state a]
type = veladd
trigger1 = animelem = 16,>=0
y = 0.4

;---------------------[攻撃]
[State 2];
type = HitDef
trigger1 = animelem = 12
attr = A, SA
animtype  = hard
priority = 7, Hit
damage    = 294,20
getpower = 61,61
guardflag = HA
pausetime = 21,32
sparkno = s7022
sparkxy = -10,-60
hitsound   = s510,1
guard.sparkno = s7012
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = 0,14
air.velocity = 0,14
fall =1
air.fall = 1
fall.recover = 0

;---------------------[相手制御]
[state a]
type = targetstate
trigger1 = time = 0
value = 1610


;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = vel y >0 && pos y >=0
value = 1601


;---------------------------------------------------------------------------
;(HELPER)カード
[Statedef 1603]
type = S
ctrl = 0
anim = 1603
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;---------------------[効果音]
[State 210, 1];パラパラ
type = PlaySnd
trigger1 = animelem = 2
value = 195, 2

;---------------------[ポジションの固定]
[state a]
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0,0

;---------------------[透過(winmugen専用記述)]
[state a]
type = Trans
trigger1 = animelem = 3,>=0
trans = addalpha
alpha = 306-(var(22)), (var(22))

;---------------------[変数]
[state a]
type = varadd
trigger1 = animelem = 3,>=0
v = 22
value = 20


[State 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H


;---------------------------------------------------------------------------
;(ENEMY)浮遊
[Statedef 1610]
type    = A
movetype= H
physics = N
velset = 0,-0.2
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1610

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0



;---------------------------------------------------------------------------
; Varのラウンド持ち越し
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
farst = 2
last = 59
value = 0

[State 5900, 2] ;Clear all float variables
type = null;VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;---------------------------------------------------------------------------
; ここから下に新しいステートを書くと分かりやすくていいと思います
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; ここは-2のステートを書いてください、ヘルパー関係です
;---------------------------------------------------------------------------
[Statedef -2]

[State -2, 1];ダッシュの音止め
type = stopSnd
trigger1 = stateno != 100
channel = 1


[State -2, 3]
type = stopSnd
trigger1 = MoveType = H
channel = 2


[State -2, 4];ハイジャンプ判定
type = varadd
trigger1 = 1
v = 15
value = -1



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::変数設定(多分ダメージ関係が殆ど)
[state a]
type = varset
trigger1 = movetype = H
v = 13
value = 0

;::::::::ボイス変更の乱数
[State 180, 1]
type = VarRandom
trigger1 = 1
v = 6
range = 0,2


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダッシュ終了時のエフェクトの消去
[State 1];ブレスレットのエフェクト消去、主に通常動作
type = removeexplod
trigger1 = MoveType = H && stateno != [120,159]
ID = 3000


[State 1]
type = removeexplod
trigger1 = stateno != 101
ID = 102

[state a]
type = removeexplod
trigger1 = MoveType = H
id = 1655

[state a]
type = removeexplod
trigger1 = MoveType = H
id = 1860

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 1

;ダメージ時の残像の消去
[state a];
type = afterimagetime
trigger1 = MoveType = H
time = 0


;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[State -2]
Type = varset
Trigger1 = 1
var(57)=ifelse((!enemynear,alive&&numenemy=2),1,0)

[state ]
type=varset
trigger1=!numtarget
trigger2=enemyNear(var(57)),movetype!=h
var(25)=0

;------ヒット数加算
[state ]
type=varadd
triggerall=numtarget
triggerall=enemyNear(var(57)),movetype=h
triggerall=enemyNear(var(57)),gethitvar(hitcount)>var(25)
trigger1=movehit
trigger2=projhittime(0)=0
;ヘルパー用
trigger3=numhelper(252)
trigger3=helper(252),movehit=1+(movetype!=a)
var(25)=1

;-----補正
[state ]
type=attackmulset
trigger1=1
value=1.00-0.048*var(25)
[state ]
type=attackmulset
trigger1=var(25)>=9
value=0.3


