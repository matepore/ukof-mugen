;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;超必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ちづる・裏面八拾伍活・零技の礎
[Statedef 2000]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2000
ctrl = 0

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1011,1999]
time = 5
add = 230,230,230

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[state 2]
type = varset
trigger1 = var(59) = 1
trigger1 = prevstateno = 250
v = 5
value = 0

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
triggerall = var(59) = 0
trigger1 = time = 0
trigger1 = command = "y"
v = 5
value = 1

[state a]
type = varset
triggerall = var(59) = 1
trigger1 = p2statetype = A
v = 5
value = 1

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 2001

;---------------------[超必殺技演出]
[State 2000, ｳｬｱﾘ圓ｼｼｰkﾓ､ﾎ瓶馮ﾍ｣ﾖｹ]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 35
time = 35
darken = 0
p2defmul = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 0
trigger1 = animelem = 6
anim = 10500
sprpriority = -99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 0
trigger1 = animelem = 6
anim = 10501
sprpriority = 99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 1
trigger1 = animelem = 6
anim = 10500
sprpriority = -99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 1
trigger1 = animelem = 6
anim = 10501
sprpriority = 99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 3040, 7]
type = null;EnvColor
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

[State 3040, 7]
type = EnvColor
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 38;29
value = 0,0,0
under = 2

[State 2000, 6]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,0

;---------------------[SC]
[state a]
type = null;poweradd
trigger1 = time = 0
trigger1 = prevstateno = [1011,1999]
value = -500

[State -2, a];
type = palfx
triggerall = gametime %2
triggerall = time <= 10
trigger1 = prevstateno = [1011,1999]
time = 1
add = 248,248,248
;mul = 248,248,248
color = 1
ignorehitpause = 1

;---------------------[効果音]
[State 2000, 6];その力、封じます！
type = PlaySnd
trigger1 = animelem = 1
value = 1500,1

[State 2000, 6];その力、封じます！
type = PlaySnd
trigger1 = animelem = 11
value = 1500,2

[State 2000, 6];
type = null;PlaySnd
trigger1 = animelem = 4
value = 2000,1

;---------------------[エフェクト]
[State 50, 4];残像
type = null;AfterImage
trigger1 = animelem = 4
time = -1
trans = none
timegap = 2
framegap = 2
length = 5
ignorehitpause = 1
palbright = 3,3,64
;palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State a]
type = Explod
trigger1 = Animelem = 16
anim = 1525
id = 1525
sprpriority = 10
postype = p1
pos = 80,-56
bindtime = 1
supermove = 1
under = 0

[State a]
type = EnvColor
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

;---------------------[無敵]

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = time = [0,63]
value = SCA

;---------------------[移動]
[state a]
type = posadd
triggerall = var(5) = 0
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
x = -8

;---------------------[移動]
[state a]
type = posadd
triggerall = var(5) = 1
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
x = -8

[state a]
type = posadd
trigger1 = animelem = 19
trigger2 = animelem = 20
trigger3 = animelem = 21
trigger4 = animelem = 22
trigger5 = animelem = 23
trigger6 = animtime = 0
x = 8


[state a]
type = velset
trigger1 = animelem = 14
x = 17

[state a]
type = velset
trigger1 = animelem = 18
x = 0

[state a]
type = velmul
trigger1 = animelem = 14,>0
trigger1 = animelem = 18,<0
x = 0.88

;---------------------[攻撃]
[State a]
type = HitDef
trigger1 = Animelem = 16
attr = S, HA
animtype  = up
damage    = 0,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 25,27
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s490,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4.5
guard.velocity = -8
air.velocity = -7,-4.5
envshake.ampl = -8
envshake.freq = 100
envshake.time = 20
fall = 1
fall.recover = 0
p2stateno = 2098
palfx.time = 5
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
id = 12000

[State 1100, ]
type = Varset
triggerall = palno = [1,5]
triggerall = !WinKO
trigger1 = movehit = 1
var(34) = 300

[State 1100, ]
type = Varset
triggerall = palno = [6,12]
triggerall = !WinKO
trigger1 = movehit = 1
var(34) = 400

[state 2]
type = playsnd
trigger1 = movehit = 1
value = s2000,0

[state 2]
type = envcolor
trigger1 = movehit = 1
value = 255,255,255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = palno = [7,12]
trigger1 = !numHelper(3200)
trigger1 = !ishelper && animtime = 0
trigger1 = P2movetype = H
name = "hu-in"
stateno = 3200
ID = 3200
helpertype = normal
pos = 0,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999999999
pausemovetime = 9999999999
ignorehitpause = 1

;---------------------[立ちステートに戻る]
[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1

; ちづる・裏面八拾伍活・零技の礎
[Statedef 2050]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2050
ctrl = 0

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[state 2]
type = varset
trigger1 = var(59) = 1
trigger1 = prevstateno = 250
v = 5
value = 0

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = prevstateno = [200,499]
v = 5
value = 1

[state a]
type = varset
triggerall = var(59) = 1
trigger1 = p2statetype = A
v = 5
value = 1

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(5) = 1
value = 2051

;---------------------[超必殺技演出]
[State 2000, ｳｬｱﾘ圓ｼｼｰkﾓ､ﾎ瓶馮ﾍ｣ﾖｹ]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 27
time = 27
darken = 0
p2defmul = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 1
trigger1 = animelem = 6
anim = 10510
sprpriority = -99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 1
trigger1 = animelem = 6
anim = 10511
sprpriority = 99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 0
trigger1 = animelem = 6
anim = 10510
sprpriority = -99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = var(5) = 0
trigger1 = animelem = 6
anim = 10511
sprpriority = 99
postype = p1
pos = -48,-51
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 3040, 7]
type = null;EnvColor
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

[State 3040, 7]
type = EnvColor
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 38;29
value = 0,0,0
under = 2

[State 2000, 6]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,1

;---------------------[SC]
[state a]
type = null;poweradd
trigger1 = time = 0
trigger1 = prevstateno = [1011,1999]
value = -500

[State -2, a];
type = palfx
triggerall = gametime %2
triggerall = time <= 10
trigger1 = prevstateno = [1011,1999]
time = 1
add = 248,248,248
;mul = 248,248,248
color = 1
ignorehitpause = 1

;---------------------[効果音]
[State 2000, 6];その力、封じます！
type = PlaySnd
trigger1 = animelem = 1
value = 1500,1

[State 2000, 6];その力、封じます！
type = PlaySnd
trigger1 = animelem = 11
value = 1500,2

[State 2000, 6];
type = null;PlaySnd
trigger1 = animelem = 4
value = 2000,1

;---------------------[エフェクト]
[State 50, 4];残像
type = null;AfterImage
trigger1 = animelem = 4
time = -1
trans = none
timegap = 2
framegap = 2
length = 5
ignorehitpause = 1
palbright = 3,3,64
;palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State a]
type = Explod
trigger1 = Animelem = 16
trigger2 = Animelem = 17
trigger3 = Animelem = 18
anim = 1525
id = 1525
sprpriority = 10
postype = p1
pos = 80,-56
bindtime = 1
supermove = 1
under = 0

[State a]
type = EnvColor
trigger1 = animelem = 16
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State a]
type = EnvColor
trigger1 = animelem = 17
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State a]
type = EnvColor
trigger1 = animelem = 18
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[state 2]
type = pause
triggerall = movehit
triggerall = anim = 2050
trigger1 = time = [69,79]
time = 1

[state 2]
type = pause
triggerall = movehit
triggerall = anim = 2051
trigger1 = time = [60,70]
time = 1
;---------------------[無敵]

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = time = [0,93]
value = SCA

;---------------------[移動]
[state a]
type = posadd
triggerall = var(5) = 0
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
x = -8

;---------------------[移動]
[state a]
type = posadd
triggerall = var(5) = 1
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
x = -8

[state a]
type = posadd
trigger1 = animelem = 21
trigger2 = animelem = 22
trigger3 = animelem = 23
trigger4 = animelem = 24
trigger5 = animelem = 25
trigger6 = animtime = 0
x = 8


[state a]
type = velset
trigger1 = animelem = 14
x = 17

[state a]
type = velset
trigger1 = animelem = 18
x = 0

[state a]
type = velmul
trigger1 = animelem = 14,>0
trigger1 = animelem = 18,<0
x = 0.88

;---------------------[攻撃]
[State a]
type = HitDef
trigger1 = Animelem = 16
attr = S, HA
animtype  = up
damage    = 0,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 5,10
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s490,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4.5
guard.velocity = -8
air.velocity = -7,-4.5
envshake.ampl = -12
envshake.freq = 100
envshake.time = 20
fall = 1
fall.recover = 0
p2stateno = 2099
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
id = 12000

;---------------------[攻撃]
[State a]
type = HitDef
trigger1 = Animelem = 17
attr = S, HA
animtype  = up
damage    = 0,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 5,10
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s490,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4.5
guard.velocity = -8
air.velocity = -7,-4.5
envshake.ampl = -12
envshake.freq = 100
envshake.time = 20
fall = 1
fall.recover = 0
p2stateno = 2099
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
id = 12000

;---------------------[攻撃]
[State a]
type = HitDef
trigger1 = Animelem = 18
attr = S, HA
animtype  = up
damage    = 0,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 35,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s490,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10,-7.5
guard.velocity = -8
air.velocity = -10,-7.5
envshake.ampl = -12
envshake.freq = 100
envshake.time = 20
fall = 1
fall.recover = 0
p2stateno = 2099
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
id = 12000

[State 1100, ]
type = Varset
triggerall = palno = [1,5]
triggerall = !WinKO
trigger1 = movehit = 1
var(34) = 400

[State 1100, ]
type = Varset
triggerall = palno = [6,12]
triggerall = !WinKO
trigger1 = movehit = 1
var(34) = 500

[state 2]
type = playsnd
trigger1 = movehit = 1
value = s2000,0

[state 2]
type = envcolor
trigger1 = movehit = 1
value = 255,255,255
time = 3
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = palno = [7,12]
trigger1 = !numHelper(3200)
trigger1 = !ishelper && animtime = 0
trigger1 = P2movetype = H
name = "hu-in"
stateno = 3200
ID = 3200
helpertype = normal
pos = 0,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999999999
pausemovetime = 9999999999
ignorehitpause = 1

;---------------------[立ちステートに戻る]
[State 821, 3]
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 共通・裏面壱活・三籟の布陣
[Statedef 2100]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2100
ctrl = 0

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1011,1999]
time = 5
add = 230,230,230

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = command = "b"
v = 5
value = 1

;---------------------[超必殺技演出]
[State 2000, 2]
type = SuperPause
trigger1 = time = 1
time = 33
movetime = 33
anim = -1

[State 1000, 5]
type = Explod
trigger1 = time = 1
anim = 10500
sprpriority = -99
postype = p1
pos = -32,-102
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = Time = 1
anim = 10501
sprpriority = 99
postype = p1
pos = -32,-102
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 3040, 7]
type = null;EnvColor
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

[State 3040, 7]
type = EnvColor
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 31;29
value = 0,0,0
under = 2

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 1
value = 3000,0

[State -2, a];
type = palfx
triggerall = gametime %2
triggerall = time <= 10
trigger1 = prevstateno = [1011,1999]
time = 1
add = 248,248,248
;mul = 248,248,248
color = 1
ignorehitpause = 1

;---------------------[効果音]
[State 2000, 6];これが見切れて！
type = PlaySnd
trigger1 = animelem = 1
value = 2100,0

;---------------------[無敵]
[State a]
type = NotHitBy
trigger1 = animelem = 7,<0
value = SCA

;---------------------[ヘルパー]
[State a];ちづる
type = helper
trigger1 = animelemtime(8) = 2
id = 2110
persistent = 0
name = "helper2"
pos = 0,0
postype = P1
stateno = 2110
helpertype = normal
keyctrl = 0
;---------------------[立ちステートに戻る]

[State 821, 3] 
type = changeState
triggerall = var(59) = 1
trigger1 = animtime = 0
value = 36

[State 821, 3] 
type = changeState
triggerall = var(59) = 0
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------
;(HELPER)分身・ちづる
[Statedef 2110]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 2110
sprpriority = 5


;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
trigger1 = root,var(5) = 0
v = 1
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = root,var(5) = 1
v = 1
value = 1

;---------------------[効果音]
[State a]
type = PlaySnd
trigger1 = time = 0
value = 1150,2

;---------------------[移動]
[State a]
type = velset
trigger1 = time = 0
x = 1.5

[State a]
type = velset
trigger1 = Animelem = 39
x = 0

;---------------------[エフェクト]
[State 1000, Afterimage]
type = Afterimage
trigger1 = time = 0
time = 2
trans = add1
length = 12
PalBright = 0,0,0
PalContrast = 255,255,255
PalAdd = 0,0,0
PalMul = 1,1,1
FrameGap = 3

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && animelem = 39,<0
time = 2

[State a]
type = Explod
trigger1 = Animelem = 39
anim = 2115
id = 2115
sprpriority = 10
postype = p1
pos = 40,-92
bindtime = 1
supermove = 1
under = 0

;---------------------[無敵]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1109

[State 180,]
type = VarRandom
trigger1 = 1
v = 31
range = 0,1

;---------------------[攻撃]
[State a]
type = HitDef
triggerall = var(31) = 0
trigger1 = time = 0
trigger2 = time % 6 = 0
trigger2 = animelem = 39,<0
attr = S, SP
animtype  = hard
damage    = 12,5
getpower = 0,0
guardflag = M
pausetime = 2,2
sparkno = s10003
guard.sparkno = S10012
sparkxy = -32,-25-random%75
hitsound   = s410,0
guardsound = s122,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5,0
air.velocity = -2,-3
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.ampl = -3
;envshake.freq = 100
;envshake.time = 5
id = 12000
kill = 0

[State a]
type = HitDef
triggerall = var(31) = 1
trigger1 = time = 0
trigger2 = time % 6 = 0
trigger2 = animelem = 39,<0
attr = S, SP
animtype  = hard
damage    = 12,5
getpower = 0,0
guardflag = M
pausetime = 2,2
sparkno = s10003
guard.sparkno = S10012
sparkxy = -32,-25-random%75
hitsound   = s410,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5,0
air.velocity = -2,-3
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.ampl = -3
;envshake.freq = 100
;envshake.time = 5
id = 12000
kill = 0

[State a]
type = HitDef
trigger1 = palno = [1,6]
trigger1 = animelem = 39
attr = S, HP
animtype  = up
damage    = 31,9
getpower = 0,0
guardflag = M
pausetime = 35,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-75
hitsound   = s410,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-5
air.velocity = -7,-5
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = 80000
id = 12000
kill = 1

[State a]
type = HitDef
trigger1 = palno = [7,12]
trigger1 = animelem = 39
attr = S, HP
animtype  = up
damage    = 31,9
getpower = 0,0
guardflag = M
pausetime = 35,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-75
hitsound   = s410,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-5
air.velocity = -7,-5
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = 80000
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
id = 12000
kill = 1

[State 1100, ]
type = Varset
triggerall = palno = [7,12]
triggerall = !WinKO
trigger1 = Animelem = 39
trigger1 = movehit
var(34) = 300

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = palno = [7,12]
trigger1 = !numHelper(3200)
trigger1 = !ishelper && animtime = 0
trigger1 = P2movetype = H
name = "hu-in"
stateno = 3200
ID = 3200
helpertype = normal
pos = 0,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999999999
pausemovetime = 9999999999
ignorehitpause = 1

[state 33]
type = null;envcolor
trigger1 = movehit = 1
value = 255,255,255
under = 1
time = 1
ignorehitpause = 1
persistent = 1

[state 33]
type = envcolor
trigger1 = movehit = 1
trigger1 = animelem = 39,<0
value = 255,255,255
under = 1
time = 1
ignorehitpause = 0
;persistent = 1

[state 33]
type = null;envcolor
triggerall = p2stateno != [120,160]
triggerall = p2stateno = [5000,5035]
trigger1 = movehit
trigger1 = time % 6 = 0
trigger1 = animelem = 39,<0
value = 255,255,255
under = 1
time = 1
ignorehitpause = 1
persistent = 1

[state 33]
type = null;envcolor
triggerall = p2stateno != [120,160]
triggerall = p2stateno = [5000,5035]
trigger1 = movehit
trigger1 = animelem = 39
value = 255,255,255
under = 1
time = 1
ignorehitpause = 1
persistent = 0

[state 2]
type = pause
triggerall = roundstate = 2
triggerall = p2stateno != [120,160]
triggerall = movehit
trigger1 = time = [114,124]
time = 1

;---------------------[透過]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = animelem = 46,>=0
v = 2
value = 16

[state a]
type = Trans
trigger1 = animelem = 46,>=0
trans = addalpha
alpha = 256-var(2),var(2)

;---------------------[消滅]
;[ヘルパー消滅]
[State 1109]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------
;(HELPER)分身・マキ
[Statedef 2120]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 2110
sprpriority = 5


;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
trigger1 = root,var(5) = 0
v = 1
value = 0

[state a]
type = varset
trigger1 = time = 0
trigger1 = root,var(5) = 1
v = 1
value = 1

;---------------------[効果音]
[State a]
type = PlaySnd
trigger1 = time = 0
value = 1150,2

;---------------------[移動]
[State a]
type = velset
trigger1 = time = 0
x = 1.5

[State a]
type = velset
trigger1 = Animelem = 39
x = 0

;---------------------[エフェクト]
[State 1000, Afterimage]
type = Afterimage
trigger1 = time = 0
time = 2
trans = add1
length = 12
PalBright = 0,0,0
PalContrast = 255,255,255
PalAdd = 0,0,0
PalMul = 1,1,1
FrameGap = 3

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && Time < 126
time = 2

[State a]
type = Explod
trigger1 = Animelem = 39
anim = 2115
id = 2115
sprpriority = 10
postype = p1
pos = 40,-92
bindtime = 1
supermove = 1
under = 0

;---------------------[ヘルパー]
[State a]
type = helper
trigger1 = time = 0
id = 2125
persistent = 0
name = "sousai"
pos = 0,0
postype = P1
stateno = 2125
helpertype = normal
keyctrl = 0

;---------------------[無敵]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 180,]
type = VarRandom
trigger1 = 1
v = 31
range = 0,1

;---------------------[攻撃]
[State a]
type = HitDef
triggerall = var(31) = 0
trigger1 = time = 0
trigger2 = time % 3 = 0
trigger2 = animelem = 39,<0
attr = S, HP
animtype  = Hard
damage    = 7,2
getpower = 0,0
guardflag = M
pausetime = 0,0
sparkno = s10003+(hitcount%3)*50
guard.sparkno = S10012
sparkxy = -32,-25-random%75
hitsound   = s410,(hitcount%3)
guardsound = s122,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.5,0
guard.velocity = -6
air.velocity = -1,-3
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[State a]
type = HitDef
triggerall = var(31) = 1
trigger1 = time = 0
trigger2 = time % 3 = 0
trigger2 = animelem = 39,<0
attr = S, HP
animtype  = Hard
damage    = 10,2
getpower = 0,0
guardflag = M
pausetime = 0,0
sparkno = s10003+(hitcount%3)*50
guard.sparkno = S10012
sparkxy = -32,-25-random%75
hitsound   = s410,(hitcount%3)
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.5,0
guard.velocity = -6
air.velocity = -1,-3
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[State a]
type = HitDef
trigger1 = animelem = 39
attr = S, SP
animtype  = up
damage    = 31,9
getpower = 0,0
guardflag = M
pausetime = 35,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-55
hitsound   = s410,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7.5,-5
air.velocity = -7,-5
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = 80000
id = 12000

[state 33]
type = envcolor
triggerall = p2stateno != [120,160]
triggerall = p2stateno = [5000,5035]
trigger1 = movehit
trigger1 = time % 6 = 0
trigger1 = animelem = 39,<0
value = 255,255,255
under = 1
time = 1
ignorehitpause = 1
persistent = 1

[state 2]
type = pause
triggerall = roundstate = 2
trigger1 = p2movetype = H
trigger1 = p2stateno != [120,155]
trigger1 = time = [114,124]
time = 1
;---------------------[透過]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = animelem = 46,>=0
v = 2
value = 16

[state a]
type = Trans
trigger1 = animelem = 46,>=0
trans = addalpha
alpha = 256-var(2),var(2)

;---------------------[消滅]
;[ヘルパー消滅]
[State 1109]
type = destroyself
trigger1 = animtime = 0


;----------------------------------------------------------------------------
;(HELPER)相殺判定
[Statedef 2125]
type = A
ctrl = 0
anim = 2125
velset = 0,0
movetype = A
physics = N
sprpriority = 5

;---------------------[速度]
[state a]
type = bindtoparent
trigger1 = 1
x = 0
y = 0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1
ignorehitpause = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 2125
ignorehitpause = 1

;---------------------[]
[State 200, 7]
type = destroyself
trigger1 = animtime = 0
trigger2 = parent,stateno != 2120
trigger3 = parent,animelem = 49

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ちづる・三神技之参
[Statedef 2200]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2200
ctrl = 0

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

;---------------------[超必殺技演出]
[State 2000, 2]
type = SuperPause
trigger1 = time = 3
time = 33
movetime = 33
anim = -1

[State 1000, 5]
type = Explod
trigger1 = time = 3
anim = 10510
sprpriority = -99
postype = p1
pos = -32,-102
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = Time = 3
anim = 10511
sprpriority = 99
postype = p1
pos = -32,-102
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 3040, 7]
type = null;EnvColor
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

[State 3040, 7]
type = EnvColor
trigger1 = time = 3
persistent = 0
ignorehitpause = 1
time = 31;29
value = 0,0,0
under = 2

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 3
value = 3000,1

[State -2, a];
type = palfx
triggerall = gametime %2
triggerall = time <= 10
trigger1 = prevstateno = [1011,1999]
time = 1
add = 248,248,248
;mul = 248,248,248
color = 1
ignorehitpause = 1

;---------------------[効果音]
[State 2000, 6];その力、封じます！
type = PlaySnd
trigger1 = animelem = 1
value = 1500,1

[State 2000, 6];その力、封じます！
type = PlaySnd
trigger1 = time = 35
value = 1500,2

[State 2000, 6];永遠に！！
type = PlaySnd
trigger1 = animelem = 20
value = 2200,5
volumescale = 150
;---------------------[エフェクト]
[State 50, 4];残像
type = null;AfterImage
trigger1 = animelem = 4
time = -1
trans = none
timegap = 2
framegap = 2
length = 5
ignorehitpause = 1
palbright = 3,3,64
;palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State a]
type = Explod
trigger1 = Animelem = 24
anim = 1525
id = 1525
sprpriority = 10
postype = p1
pos = 40,-64
bindtime = 1
supermove = 1
under = 0

[State a]
type = EnvColor
trigger1 = movehit
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State a]
type = EnvColor
trigger1 = animelem = 25
trigger2 = animelem = 26
time = 2
value = 255,255,255
under = 2

;---------------------[ヘルパー]
[State a];ちづる
type = helper
trigger1 = time = 33
id = 2210
persistent = 0
name = "helper2"
pos = 0,0
postype = P1
stateno = 2210
helpertype = normal
keyctrl = 0
;---------------------[無敵]
[State a]
type = NotHitBy
trigger1 = var(5) = 0
trigger1 = animelem = 11,<0
value = SCA

[State a]
type = NotHitBy
trigger1 = var(5) = 1
trigger1 = animelem = 16,<0
value = SCA

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 9
x = -5

[state a]
type = posadd
trigger1 = animelem = 10
trigger2 = animelem = 12
trigger3 = animelem = 14
x = -6

[state a]
type = posadd
trigger1 = animelem = 11
x = -10

[state a]
type = posadd
trigger1 = animelem = 27
trigger2 = animelem = 28
trigger3 = animelem = 29
trigger4 = animelem = 30
trigger5 = animelem = 31
trigger6 = animelem = 32
x = 8

[state a]
type = velset
trigger1 = animelem = 21
x = 15.5

[state a]
type = velset
trigger1 = animelem = 24
x = 0

[state a]
type = null;velmul
trigger1 = animelem = 14,>0
trigger1 = animelem = 18,<0
x = 0.88

;---------------------[攻撃]
[State a]
type = HitDef
trigger1 = Animelem = 24
trigger2 = Animelem = 25
attr = S, HA
animtype  = up
damage    = 40,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 6,15
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s410,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -9,-4.5
guard.velocity = -8
air.velocity = -9,-4.5
fall = 1
fall.recover = 0
id = 12000
kill = 0

[State a]
type = HitDef
trigger1 = palno = [1,6]
trigger1 = Animelem = 26
attr = S, HA
animtype  = diagup
damage    = 60,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 25,27
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s490,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8,-6.5
guard.velocity = -8
air.velocity = -8,-6.5
envshake.ampl = -10
envshake.freq = 110
envshake.time = 20
fall = 1
fall.recover = 0
id = 12000
kill = 1

[State a]
type = HitDef
trigger1 = palno = [7,12]
trigger1 = Animelem = 26
attr = S, HA
animtype  = diagup
damage    = 60,19
getpower = 0,0
givepower = 0,0
guardflag = M
pausetime = 25,27
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-73
hitsound   = s490,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8,-6.5
guard.velocity = -8
air.velocity = -8,-6.5
envshake.ampl = -10
envshake.freq = 110
envshake.time = 20
fall = 1
fall.recover = 0
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
id = 12000
kill = 1

[State 1100, ]
type = Varset
triggerall = palno = [7,12]
triggerall = !WinKO
trigger1 = Animelem = 26
trigger1 = movehit
var(34) = 500

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = palno = [7,12]
trigger1 = !numHelper(3200)
trigger1 = !ishelper && animtime = 0
trigger1 = P2movetype = H
name = "hu-in"
stateno = 3200
ID = 3200
helpertype = normal
pos = 0,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999999999
pausemovetime = 9999999999
ignorehitpause = 1

[state 2]
type = pause
trigger1 = p2movetype = H
trigger1 = p2stateno != [120,155]
trigger1 = time = [185,200]
time = 1

[state a]
type = varset
trigger1 = movehit
v = 24
value = 1

;---------------------[立ちステートに戻る]
[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;----------------------------------------------------------------------------
;(HELPER)分身・ちづる
[Statedef 2210]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 2210
sprpriority = 5

[state 2]
type = Nothitby
trigger1 = 1
value = SCA

;---------------------[効果音]
[State a]
type = PlaySnd
trigger1 = time = 0
value = 1150,2

;---------------------[移動]
[State a]
type = velset
trigger1 = time = 0
x = 3.5

[State a]
type = velset
trigger1 = Animelem = 39
x = 0

[state a]
type = playerpush
trigger1 = 1
value = 1

;---------------------[エフェクト]
[State 1000, Afterimage]
type = Afterimage
trigger1 = time = 0
time = 2
trans = add1
length = 12
PalBright = 0,0,0
PalContrast = 255,255,255
PalAdd = 0,0,0
PalMul = 1,1,1
FrameGap = 3

[State 2041, 2]
type = Afterimagetime
trigger1 = time%2 = 0 && Time < 126
time = 2

;---------------------[無敵]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 180,]
type = VarRandom
trigger1 = 1
v = 31
range = 0,1

;---------------------[攻撃]
[State a]
type = HitDef
triggerall = var(31) = 0
trigger1 = time = 0
trigger2 = time % 6 = 0
trigger2 = animelem = 39,<0
attr = S, SP
animtype  = Hard
damage    = 13,9
getpower = 0,0
guardflag = M
pausetime = 0,0
sparkno = s10003
guard.sparkno = S10012
sparkxy = -32,-25-random%75
hitsound   = s410,0
guardsound = s122,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5,0
air.velocity = -2,-3
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
kill = 0

;---------------------[攻撃]
[State a]
type = HitDef
triggerall = var(31) = 1
trigger1 = time = 0
trigger2 = time % 6 = 0
trigger2 = animelem = 39,<0
attr = S, SP
animtype  = Hard
damage    = 13,9
getpower = 0,0
guardflag = M
pausetime = 0,0
sparkno = s10003
guard.sparkno = S10012
sparkxy = -32,-25-random%75
hitsound   = s410,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5,0
air.velocity = -2,-3
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
kill = 0

[State a]
type = HitDef
trigger1 = animelem = 39
attr = S, HP
animtype  = diagup
damage    = 25,9
getpower = 0,0
guardflag = M
pausetime = 35,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-55
hitsound   = s410,0
guardsound = s122,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8.5,-6
air.velocity = -8,-6
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
p2stateno = 2220
kill = 0

[state 33]
type = envcolor
trigger1 = movehit = 1
trigger1 = animelem = 39,<0
value = 255,255,255
under = 1
time = 1
ignorehitpause = 0
;persistent = 1

[state 2]
type = pause
triggerall = roundstate = 2
trigger1 = p2movetype = H
trigger1 = p2stateno != [120,155]
trigger1 = time = [114,124]
time = 1

;---------------------[透過]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = animelem = 46,>=0
v = 2
value = 16

[state a]
type = Trans
trigger1 = animelem = 46,>=0
trans = addalpha
alpha = 256-var(2),var(2)

;---------------------[消滅]
;[ヘルパー消滅]
[State 1109]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 2220]
movetype= H
physics = N
velset = 0,0
facep2 = 1

[state 2]
type = posset
trigger1 = time = 0
y = 0

[state 2]
type = statetypeset
trigger1 = 1
statetype = S

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
value = 5300

[State 1830]
type = SelfState
trigger1 = time = 240
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 共通・裏面壱活・三籟の布陣
[Statedef 2500]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2500
ctrl = 0

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -3000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -2000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

;---------------------[超必殺技演出]
[State 2000, 2]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1

[State 1000, 5]
type = Explod
trigger1 = time = 1
anim = 10520
sprpriority = -99
postype = p1
pos = 32,-97
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = Time = 1
anim = 10521
sprpriority = 99
postype = p1
pos = 37,-97
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State explod];鏡
type = Explod
trigger1 = animelem = 5
anim = 195
id = 3000
sprpriority = 5
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
ignorehitpause = 0
under = 0

[State 3040, 7]
type = null;EnvColor
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
time = 3
value = 255,255,255
under = 2

[State 3040, 7]
type = EnvColor
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 31;29
value = 0,0,0
under = 2

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 1
value = 3000,2

[State -2, a];
type = palfx
triggerall = gametime %2
triggerall = time <= 10
trigger1 = prevstateno = [1011,1999]
time = 1
add = 248,248,248
;mul = 248,248,248
color = 1
ignorehitpause = 1

;---------------------[無敵]
[State a]
type = NotHitBy
trigger1 = animelem = 19,<0
value = SCA

;---------------------[ヘルパー]
[State a];ちづる
type = helper
trigger1 = animelem = 18
id = 2510
persistent = 0
name = "helper2"
pos = 50,-122
postype = P1
stateno = 2510
helpertype = normal
keyctrl = 0

[State a];ちづる
type = helper
trigger1 = animelem = 18
id = 2510
persistent = 0
name = "helper2"
pos = 50,-122
postype = P1
stateno = 2515
helpertype = normal
keyctrl = 0

[State a];ちづる
type = helper
trigger1 = animelem = 18
id = 2510
persistent = 0
name = "helper2"
pos = 50,-122
postype = P1
stateno = 2520
helpertype = normal
keyctrl = 0

[State a];ちづる
type = helper
trigger1 = animelem = 18
id = 2510
persistent = 0
name = "helper2"
pos = 50,-122
postype = P1
stateno = 2525
helpertype = normal
keyctrl = 0

[State a];ちづる
type = helper
trigger1 = animelem = 18
id = 2510
persistent = 0
name = "helper2"
pos = 50,-122
postype = P1
stateno = 2530
helpertype = normal
keyctrl = 0

;---------------------[立ちステートに戻る]
[State 821, 3]
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;;---------------
[Statedef 2510]
type = S
movetype = A
physics = N
anim = 2510
ctrl = 0
juggle = 0
sprpriority = 5

[state 3]
type = nothitby
trigger1 = 1
value = SCA

[State a]
type = HitDef
trigger1 = time = 0
attr = S, HP
animtype  = hard
damage    = 70,15
getpower = 0,0
guardflag = M
pausetime = 0,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-10
hitsound   = s490,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -7
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[state a]
type = targetstate
trigger1 = var(8) = 0
trigger1 = movehit = 1
trigger1 = enemy,stateno != 295
persistent = 0
ignorehitpause = 0
value = 2550

[State 7110, 1]
type = VelSet
trigger1 = Time > 17
x = 0.008*p2bodydist X + 0.8
y = 0.008*p2bodydist Y

[State 10050, 1]
type = null;HitOverRide
trigger1 = 1
time = 999999
attr = SCA,AA,AT,AP,NA,SP,HT
slot = 1
stateno = 21000

[State 7110, 2]
type = destroyself
trigger1 = movecontact

;;---------------
[Statedef 2515]
type = S
movetype = A
physics = N
anim = 2510
ctrl = 0
juggle = 0
sprpriority = 5

[state 3]
type = nothitby
trigger1 = 1
value = SCA

[State a]
type = HitDef
trigger1 = time = 0
attr = S, HP
animtype  = hard
damage    = 70,15
getpower = 0,0
guardflag = M
pausetime = 0,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-10
hitsound   = s490,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -7
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[state a]
type = targetstate
trigger1 = var(8) = 0
trigger1 = movehit = 1
trigger1 = enemy,stateno != 295
persistent = 0
ignorehitpause = 0
value = 2550

[State 7110, 1]
type = VelSet
trigger1 = Time > 27
x = 0.008*p2bodydist X + 0.6
y = 0.008*p2bodydist Y - 0.3

[State 10050, 1]
type = null;HitOverRide
trigger1 = 1
time = 999999
attr = SCA,AA,AT,AP,NA,SP,HT
slot = 1
stateno = 21000

[State 7110, 2]
type = destroyself
trigger1 = movecontact

;;---------------
[Statedef 2520]
type = S
movetype = A
physics = N
anim = 2510
ctrl = 0
juggle = 0
sprpriority = 5

[state 3]
type = nothitby
trigger1 = 1
value = SCA

[State a]
type = HitDef
trigger1 = time = 0
attr = S, HP
animtype  = hard
damage    = 70,15
getpower = 0,0
guardflag = M
pausetime = 0,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-10
hitsound   = s490,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -7
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[state a]
type = targetstate
trigger1 = var(8) = 0
trigger1 = movehit = 1
trigger1 = enemy,stateno != 295
persistent = 0
ignorehitpause = 0
value = 2550

[State 7110, 1]
type = VelSet
trigger1 = Time > 37
x = 0.008*p2bodydist X + 0.4
y = 0.008*p2bodydist Y - 0.15

[State 10050, 1]
type = null;HitOverRide
trigger1 = 1
time = 999999
attr = SCA,AA,AT,AP,NA,SP,HT
slot = 1
stateno = 21000

[State 7110, 2]
type = destroyself
trigger1 = movecontact

;;---------------
[Statedef 2525]
type = S
movetype = A
physics = N
anim = 2510
ctrl = 0
juggle = 0
sprpriority = 5

[state 3]
type = nothitby
trigger1 = 1
value = SCA

[State a]
type = HitDef
trigger1 = time = 0
attr = S, HP
animtype  = hard
damage    = 70,15
getpower = 0,0
guardflag = M
pausetime = 0,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-10
hitsound   = s490,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -7
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[state a]
type = targetstate
trigger1 = var(8) = 0
trigger1 = movehit = 1
trigger1 = enemy,stateno != 295
persistent = 0
ignorehitpause = 0
value = 2550

[State 7110, 1]
type = VelSet
trigger1 = Time > 47
x = 0.008*p2bodydist X + 0.2
y = 0.008*p2bodydist Y - 0.6

[State 10050, 1]
type = null;HitOverRide
trigger1 = 1
time = 999999
attr = SCA,AA,AT,AP,NA,SP,HT
slot = 1
stateno = 21000

[State 7110, 2]
type = destroyself
trigger1 = movecontact

;;---------------
[Statedef 2530]
type = S
movetype = A
physics = N
anim = 2510
ctrl = 0
juggle = 0
sprpriority = 5

[state 3]
type = nothitby
trigger1 = 1
value = SCA

[State a]
type = HitDef
trigger1 = time = 0
attr = S, HP
animtype  = hard
damage    = 70,15
getpower = 0,0
guardflag = M
pausetime = 0,37
sparkno = s10003
guard.sparkno = S10012
sparkxy = -15,-10
hitsound   = s490,0
guardsound = s122,0
ground.type = hard
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -7
envshake.ampl = -10
envshake.freq = 110
envshake.time = 30
fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
id = 12000

[state a]
type = targetstate
trigger1 = var(8) = 0
trigger1 = movehit = 1
trigger1 = enemy,stateno != 295
persistent = 0
ignorehitpause = 0
value = 2550

[State 7110, 1]
type = VelSet
trigger1 = Time > 57
x = 0.008*p2bodydist X
y = 0.008*p2bodydist Y - 0.45

[State 10050, 1]
type = null;HitOverRide
trigger1 = 1
time = 999999
attr = SCA,AA,AT,AP,NA,SP,HT
slot = 1
stateno = 21000

[State 7110, 2]
type = destroyself
trigger1 = movecontact

;---------------------------------------------------------------------------
;(ENEMY)吹き飛び
[Statedef 2550]
type    = S
movetype= H
physics = N
sprpriority = 1
velset = 0,0

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = 1
value = 5050

[State 821, 3]
type = changeState
trigger1 = time >= GetHitVar(hitshaketime)
value = 2560

;---------------------------------------------------------------------------
;(ENEMY)吹き飛び
[Statedef 2560]
type    = S
movetype= H
physics = N
sprpriority = 1
velset = -6,-4

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 821, 1]
type = VelAdd
Trigger1 = time != 0
y = .52

[State 821, 3]
type = changeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2570

;---------------------------------------------------------------------------
;(ENEMY)滑り
[Statedef 2570]
type    = S
movetype= H
physics = N
velset = -12,0
sprpriority = 1

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = velmul
trigger1 = 1
x = 0.85

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 998

[State 821, 3]
type = changestate
trigger1 = time = 20
value = 2580


;---------------------------------------------------------------------------
;(ENEMY)ダウン
[Statedef 2580]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5110

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 821, 3]
type = changeState
triggerall = alive
trigger1 = time = 10
value = 2590

[State 821, 3]
type = SelfState
triggerall = !alive
trigger1 = time = 10
value = 5110

;---------------------------------------------------------------------------
; Downed get-hit (getting up)
[Statedef 2590]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 0

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 1

[State 5120,7]
type = PalFX
trigger1 = time = 0
time = 1

[State 5120, 8]
type = changeState
trigger1 = AnimTime = 0
value = 2220

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ちづる・三神技之参
[Statedef 2600]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2600
ctrl = 0

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -3000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -2000

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

;---------------------[超必殺技演出]
[State 2000, 2]
type = SuperPause
trigger1 = animelem = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1
anim = 10520
sprpriority = -99
postype = p1
pos = 0,-75
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = animelem = 1
anim = 10521
sprpriority = 99
postype = p1
pos = 0,-75
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State a]
type = Explod
trigger1 = animelem = 2
anim = 2605
id = 2605
sprpriority = 10
postype = p1
pos = 5,20
bindtime = -1
facing = -1
;removetime = -1
supermovetime = 99999
pausemovetime = 99999
under = 0

[State 00];背景の暗転
type = BGPalfx
trigger1 = time >= 0
ignorehitpause = 1
time = 31
mul = 0,0,0;var(7),var(7),var(7)
under = 2

[state 2]
type = envcolor
trigger1 = time > 40
trigger1 = time%4 = 0
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[state 0]
type = nothitby
trigger1 = 1
value = SCA

[State 2000, 6]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,2

[State 2000, 6]
type = PlaySnd
trigger1 = time = 32
value = 2600,4

[State 2000, 6]
type = PlaySnd
trigger1 = time = 32
value = 2600,5

[State 2000, 6]
type = PlaySnd
trigger1 = time = 32
value = 2600,5

[State 3000]
type = Projectile
trigger1 = time > 40
trigger1 = time%7 = 0
projID = 2610
projanim = 2610
projpriority = 55
projsprpriority = 5
projshadow = 0,0,0
projremovetime = 5
getpower = 0
ownpal = 0
offset = 0,0
velocity = 0,0
attr = S, HP
animtype = hard
damage = 0 ,5
hitflag = MAF
guardflag = M
hitsound   = s490,0
guardsound = s122,0
pausetime = 0,4
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
ground.type = Low
ground.hittime = 23
ground.slidetime = 23
ground.velocity = 0,-4;15
guard.velocity = -13
air.velocity = 0,-4;15
air.guard.velocity = -7,-10
fall = 1
fall.recover = 0
yaccel = .552
envshake.time = 20
envshake.ampl = -7
envshake.freq = 70
envshake.phase = 70
p2stateno = 2699
kill = 0

[state 2]
type = changestate
trigger1 = time = 120
value = 2601

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ちづる・三神技之参
[Statedef 2601]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
poweradd= 0
anim = 2601
ctrl = 0

[State 3000]
type = Projectile
trigger1 = palno = [1,6]
trigger1 = time = 0
projID = 2615
projanim = 2610
projpriority = 55
projsprpriority = 5
projshadow = 0,0,0
projremovetime = 5
getpower = 0
ownpal = 0
offset = 0,0
velocity = 0,0
attr = S, HP
animtype = hard
damage = 0 ,5
hitflag = MAF
guardflag = M
hitsound   = s490,0
guardsound = s122,0
pausetime = 0,4
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
ground.type = Low
ground.hittime = 23
ground.slidetime = 23
ground.velocity = 0,-4;15
guard.velocity = -13
air.velocity = 0,-4;15
air.guard.velocity = -7,-10
p2stateno = 2651
fall = 1
fall.recover = 0
yaccel = .552
envshake.time = 20
envshake.ampl = -12
envshake.freq = 70
envshake.phase = 70

[State 3000]
type = Projectile
trigger1 = palno = [7,12]
trigger1 = time = 0
projID = 2615
projanim = 2610
projpriority = 55
projsprpriority = 5
projshadow = 0,0,0
projremovetime = 5
getpower = 0
ownpal = 0
offset = 0,0
velocity = 0,0
attr = S, HP
animtype = hard
damage = 0 ,5
hitflag = MAF
guardflag = M
hitsound   = s490,0
guardsound = s122,0
pausetime = 0,4
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
ground.type = Low
ground.hittime = 23
ground.slidetime = 23
ground.velocity = 0,-4;15
guard.velocity = -13
air.velocity = 0,-4;15
air.guard.velocity = -7,-10
p2stateno = 2651
fall = 1
fall.recover = 0
yaccel = .552
envshake.time = 20
envshake.ampl = -12
envshake.freq = 70
envshake.phase = 70
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1

[State 1100, ]
type = Varset
triggerall = palno = [7,12]
triggerall = !WinKO
trigger1 = movehit
var(34) = 900

[State 1000, ヘルパーを出す]
type = Helper
trigger1 = palno = [7,12]
trigger1 = !numHelper(3200)
trigger1 = !ishelper && animtime = 0
trigger1 = P2movetype = H
name = "hu-in"
stateno = 3200
ID = 3200
helpertype = normal
pos = 0,0
postype = p2
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999999999
pausemovetime = 9999999999
ignorehitpause = 1

[state 2]
type = envcolor
trigger1 = projhit2615 = 1
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1

[state 2]
type = pause
trigger1 = projhittime(2615) >= 0 && projhittime(2615) <= 20
time = 1

[state 2]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作(上方回転吹き飛び)
[Statedef 2651]
type    = A
movetype= H
physics = N
velset = 0,0
;facep2 = 1

[State a]
Type = palfx
trigger1 = palno = [7,12]
time = 999
add = 0,0,100
mul = 256,256,256
color = 1
ignorehitpause = 1

[state 33]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [5,20]
time = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -120
kill = 1
absolute = 1
ignorehitpause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -2.4
y = -39

[State 52, 2]
type = Veladd
trigger1 = time >= 2
y = .5

[state 33]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [5,20]
time = 1

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 20

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2651

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;ctrl = 0

;---------------------------------------------------------------------------

;HITG_SHAKE
[Statedef 2098]
type    = S
movetype= H
physics = N
velset = 0,0

[State a]
Type = palfx
trigger1 = 1
time = 999
add = 0,0,100
mul = 256,256,256
color = 1
ignorehitpause = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -200
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 80001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 80300

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------

;HITG_SHAKE
[Statedef 2099]
type    = S
movetype= H
physics = N
velset = 0,0

[State a]
Type = palfx
trigger1 = 1
time = 999
add = 0,0,100
mul = 256,256,256
color = 1
ignorehitpause = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -100
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 80001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 80300

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------

;HITG_SHAKE
[Statedef 2699]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -35
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 80001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 80300

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;----------------------------------------------------------------------------
;(HELPER)相殺判定
[Statedef 3200]
type = A
ctrl = 0
velset = 0,0
movetype = A
physics = N
sprpriority = 5

[State ]
Type = ChangeAnim
Trigger1 = numtarget = 0
Value = 3200
IgnoreHitPause = 1

;---------------------[当身関係]
[State ]
type = HitBy
trigger1 = 1
value = 
time = -1
ignorehitpause = 1

[State ]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AT,AP
stateno = 3200
time = -1
ignorehitpause = 1

[state ]
type = hitdef
trigger1 = !numtarget
attr = ,HA
hitflag = MAF
guardflag =
animtype = hard
air.animtype = hard
fall.animtype = hard
ground.type = low
air.type = low
damage = 0,0
getpower = 0,0
givepower = 0,0
pausetime = 0,10
guard.pausetime = 0,10
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 14
air.hittime = 16
guard.ctrltime = 14
airguard.ctrltime = 14
ground.velocity = 0
guard.velocity = 0
air.velocity = 0
airguard.velocity = 0
fall.recover = 0
fall.recovertime = 1000
forcestand = 0
fall = 0
air.fall = 1
kill = 1
guard.kill = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 999
palfx.add = 0,0,100
palfx.mul = 256,256,256
palfx.color = 1
p2stateno = 3210

;---------------------[当身関係]

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = numtarget
trigger1 = !target,ishelper
value = 9999

[State 0, ReversalDef]
type = ReversalDef
trigger1 = NumTarget > 0
trigger1 = !Target,IsHelper
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
numhits = 0
sparkno = -1
hitsound = -1
numhits = 0
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
trigger1 = palno = [7,11]
trigger1 = life <= 300
trigger1 = enemynear(var(58)),stateno >= 200
trigger1 = enemynear(var(58)),StateType != L
trigger1 = enemynear(var(58)),movetype != H
trigger1 = p2stateno != 3210
trigger2 = palno = [7,11]
trigger2 = life > 300
trigger2 = enemynear(var(58)),stateno >= 1000
trigger2 = enemynear(var(58)),StateType != L
trigger2 = enemynear(var(58)),movetype != H
trigger2 = p2stateno != 3210
trigger3 = palno = 12
trigger3 = enemynear(var(58)),StateType != L
trigger3 = enemynear(var(58)),movetype != H
trigger3 = p2stateno != 3210
trigger4 = Root,movetype = H
trigger4 = p2stateno != 3210
value = 3210
ignorehitpause = 1

;---------------------[]
[State 200, 7]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 3205]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 3205
sprpriority = 5

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
stateno = 3205

[State 210, 2]
type = Projectile 
trigger1 = palno = [1,6]
trigger1 = enemynear(var(58)),movetype = A
trigger1 = enemynear(var(58)),stateno >= 1000
trigger2 = palno = [7,12]
trigger2 = enemynear(var(58)),movetype = A
trigger2 = enemynear(var(58)),stateno >= 200
projanim = 3205
attr = A, SP
animtype  = hard
damage    = 0,0
getpower = 0,0
pausetime = 0,0
sparkno = -1
sparkxy = -30,-76
hitsound   = -1
guard.sparkno = -1
guardsound = -1
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
p2stateno = 3207

[State 1000, このヘルパーを消す]
type = DestroySelf
trigger1 = var(34) = 0

;---------------------------------------------------------------------------
[Statedef 3206]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 3205
sprpriority = 5

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
time = -1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
stateno = 3206

[State 800, ??????????]
type = ReversalDef
trigger1 = palno = [1,6]
trigger1 = enemynear(var(58)),movetype = A
trigger1 = enemynear(var(58)),stateno >= 1000
trigger2 = palno = [7,12]
trigger2 = enemynear(var(58)),movetype = A
trigger2 = enemynear(var(58)),stateno >= 200
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
numhits = 0
pausetime = 0,0
sparkno = -1
hitsound = -1
p1stateno = 3206
p2stateno = 3207
ignorehitpause = 1

[State 1000, このヘルパーを消す]
type = DestroySelf
trigger1 = var(34) = 0

;---------------------[???テー?に??]

[Statedef 3207]
type    = S
movetype= H
physics = N
velset = 0,0

[State a]
Type = palfx
trigger1 = 1
time = 999
add = 0,0,100
mul = 256,256,256
color = 1
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
time = -1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3207

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------[???テー?に??]

[Statedef 3210]
type    = S
movetype= H
physics = N
velset = 0,0

[State a]
Type = palfx
trigger1 = 1
time = 999
add = 0,0,100
mul = 256,256,256
color = 1
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT,NP,SP,HP
time = -1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3210

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

