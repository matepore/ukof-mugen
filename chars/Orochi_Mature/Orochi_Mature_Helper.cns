;KOサウンド
[Statedef 10000]
type    = S
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
anim = 9999
sprpriority = -1

[State 10005, 1]
type = playsnd
trigger1 = Time = 0
value = S8,6
volume = 255
persistent = 0
ignorehitpause = 1


;===============================================================
;ゲージ選択ヘルパー
[Statedef 20000]
physics = N
anim = 4650
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State 20000]
type = DestroySelf
trigger1 = NumPartner = 1
trigger1 = Parent,var(56)
trigger1 = Parent,ID > Partner,ID

[State 20000]
type = VarSet
trigger1= Time = 0
var(50) = 0

[State 20000]
type = VarSet
triggerall = !var(50)
trigger1 = Parent,var(59)
trigger1 = Time > 0
trigger1 = Time%(30-(Parent,StateNo = 0)*20) = 0
var(50) = 3

[State 20000]
type = ChangeAnim
triggerall = Parent,var(59)
trigger1 = Time > 0
trigger1 = Time%(30-(Parent,StateNo = 0)*20) = 0
value = 4649+var(50)

[State 20000, snd]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time > 0
trigger1 = Time%(30-(Parent,StateNo = 0)*20) = 0
value = S8,4

[State 20000, snd]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Anim = 4649+var(50)
trigger1 = Time > 0
trigger1 = Time%(50-(Parent,StateNo = 0)*35) = 0
value = S8,5

[State 20000, end]
type = ChangeState
triggerall = Parent,var(59)
trigger1 = Anim = 4649+var(50)
trigger1 = Time > 0
trigger1 = Time%(50-(Parent,StateNo = 0)*35) = 0
value = 20001 + Anim - 4650

[State 20000]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Parent,Command = "up"
value = IfElse(Anim-1 < 4650,4652,Anim-1)

[State 20000]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Parent,Command = "down"
value = IfElse(Anim+1 > 4652,4650,Anim+1)

[State 20000, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Parent,Command = "up" || Parent,Command = "down"
value = S8,4

[State 20000, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
value = S8,5

[State 20000, end]
type = ChangeState
triggerall = !Parent,var(59)
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
value = 20001 + Anim - 4650

[State 20000]
type = PlaySnd
trigger1 = RoundState = 2
trigger1 = Parent,var(7)
value = S8,5

[State 20000]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = Parent,var(7)
value = 20003


[Statedef 20001]
physics = N
anim = 4670
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(32) = 1

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(33) = 1

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(34) = 1

[State 20001]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Parent,var(7)


[Statedef 20002]
physics = N
anim = 4671
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(32) = 2

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(33) = 2

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(34) = 2

[State 20002]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Parent,var(7)

[Statedef 20003]
physics = N
anim = 4655
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State 20003, explod]
type = Explod
trigger1 = Time = 0
anim = 4664
ID = 4664
pos = 0,0
bindtime = -1
ownpal = 1
sprpriority = 7

[State 20003, explod]
type = Explod
trigger1 = Time = 0
anim = 4669
ID = 4669
pos = 0,0
bindtime = -1
ownpal = 1
sprpriority = 7

[State 20003]
type = VarSet
trigger1= Time = 0
var(50) = 0

[State 20003]
type = VarRandom
triggerall = !var(50)
trigger1 = Parent,var(59)
trigger1 = Time > 0
trigger1 = Time%20 = 0
v = 50
range = 1,2

[State 20003]
type = ChangeAnim
triggerall = Parent,var(59)
trigger1 = Time%20 = 0
trigger1 = Time > 0
value = 4654+var(50)

[State 20003]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time%20 = 0
trigger1 = Time > 0
trigger1 = var(50) = 2
value = S8,4

[State 20003]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time%30 = 0
trigger1 = Time > 0
value = S8,5

[State 20003, end]
type = ChangeState
triggerall = Parent,var(59)
trigger1 = Time%30 = 0
trigger1 = Time > 0
value = 20004

[State 20003]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up"
value = IfElse(Anim-1 < 4655,4656,Anim-1)

[State 20003]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "down"
value = IfElse(Anim+1 > 4656,4655,Anim+1)

[State 20003, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up" || Parent,Command = "down"
value = S8,4

[State 20003, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
value = S8,5

[State 20003]
type = ChangeAnim
trigger1 = RoundState = 2
trigger1 = Parent,var(7)
value = 4655 + Random%2

[State 20003, anim]
type = VarSet
trigger1 = 1
var(1) = Anim - 4655

[State 20003]
type = PlaySnd
trigger1 = RoundState = 2
trigger1 = Parent,var(7)
value = S8,5

[State 20003, end]
type = ChangeState
trigger1 = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
trigger2 = RoundState = 2
trigger2 = Parent,var(7)
value = 20004


[Statedef 20004]
physics = N
anim = 4660
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(32) = var(1) + 1

[State 20004]
type = RemoveExplod
trigger1 = Time = 0
ID = 4664

[State 20004, explod]
type = Explod
trigger1 = Time = 0
anim = 4657+var(1)
ID = 4657+var(1)
pos = 0,0
bindtime = -1
ownpal = 1
sprpriority = 7

[State 20004]
type = VarSet
trigger1= Time = 0
var(50) = 0

[State 20004]
type = VarRandom
triggerall = !var(50)
trigger1 = Parent,var(59)
trigger1 = Time > 0
trigger1 = Time%(20-(Parent,StateNo = 0)*15) = 0
v = 50
range = 1,2

[State 20004]
type = ChangeAnim
triggerall = Parent,var(59)
trigger1 = Time%(20-(Parent,StateNo = 0)*15) = 0
trigger1 = Time > 0
value = 4659+var(50)

[State 20004]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time%(20-(Parent,StateNo = 0)*15) = 0
trigger1 = Time > 0
trigger1 = var(50) = 2
value = S8,4

[State 20004]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time%(30-(Parent,StateNo = 0)*22) = 0
trigger1 = Time > 0
value = S8,5

[State 20004, end]
type = ChangeState
triggerall = Parent,var(59)
trigger1 = Time%(30-(Parent,StateNo = 0)*22) = 0
trigger1 = Time > 0
value = 20005

[State 20004, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up" || Parent,Command = "down"
value = S8,4

[State 20004]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up"
value = IfElse(Anim-1 < 4660,4661,Anim-1)

[State 20004]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "down"
value = IfElse(Anim+1 > 4661,4660,Anim+1)

[State 20004, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up" || Parent,Command = "down"
value = S8,4

[State 20004, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
value = S8,5

[State 20004]
type = ChangeAnim
trigger1 = RoundState = 2
trigger1 = Parent,var(7)
value = 4660 + Random%2

[State 20004, anim]
type = VarSet
trigger1 = 1
var(2) = Anim - 4660

[State 20004]
type = PlaySnd
trigger1 = RoundState = 2
trigger1 = Parent,var(7)
value = S8,5

[State 20004, end]
type = ChangeState
trigger1 = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
trigger2 = RoundState = 2
trigger2 = Parent,var(7)
value = 20005


[Statedef 20005]
physics = N
anim = 4665
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(32) = var(2) + 1

[State 20004]
type = RemoveExplod
trigger1 = Time = 0
ID = 4669

[State 20005, explod]
type = Explod
trigger1 = Time = 0
anim = 4662+var(2)
ID = 4662+var(2)
pos = 0,0
bindtime = -1
ownpal = 1
sprpriority = 7

[State 20005]
type = VarSet
trigger1= Time = 0
var(50) = 0

[State 20005]
type = VarRandom
triggerall = !var(50)
trigger1 = Parent,var(59)
trigger1 = Time > 0
trigger1 = Time%(20-(Parent,StateNo = 0)*15) = 0
v = 50
range = 1,2

[State 20005]
type = ChangeAnim
triggerall = Parent,var(59)
trigger1 = Time%(20-(Parent,StateNo = 0)*15) = 0
trigger1 = Time > 0
value = 4664+var(50)

[State 20005]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time%(20-(Parent,StateNo = 0)*15) = 0
trigger1 = Time > 0
trigger1 = var(50) = 2
value = S8,4

[State 20005]
type = PlaySnd
triggerall = Parent,var(59)
trigger1 = Time%(30-(Parent,StateNo = 0)*22) = 0
trigger1 = Time > 0
value = S8,5

[State 20005, end]
type = ChangeState
triggerall = Parent,var(59)
trigger1 = Time%(30-(Parent,StateNo = 0)*22) = 0
trigger1 = Time > 0
value = 20006

[State 20005]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up"
value = IfElse(Anim-1 < 4665,4666,Anim-1)

[State 20005]
type = ChangeAnim
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "down"
value = IfElse(Anim+1 > 4666,4665,Anim+1)

[State 20005, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "up" || Parent,Command = "down"
value = S8,4

[State 20005, snd]
type = PlaySnd
triggerall = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
value = S8,5

[State 20005]
type = ChangeAnim
trigger1 = Parent,var(7)
value = 4665 + Random%2

[State 20005, anim]
type = VarSet
trigger1 = 1
var(3) = Anim - 4665

[State 20005]
type = PlaySnd
trigger1 = Parent,var(7)
value = S8,5

[State 20005, end]
type = ChangeState
trigger1 = !Parent,var(59)
trigger1 = Time > 5
trigger1 = Parent,Command = "start" || Parent,Command = "fwd" || Parent,Command = "back"
trigger2 = Parent,var(7)
value = 20006


[Statedef 20006]
physics = N
sprpriority = 7

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = noFG

[State 20006]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !var(1) && !var(2) && !var(3)
value = 4670

[State 20006]
type = ChangeAnim
triggerall = Time = 0
trigger1 = var(1) && var(2) && var(3)
value = 4671

[State 20006]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !(!var(1) && !var(2) && !var(3))
trigger1 = !(var(1) && var(2) && var(3))
value = 4672

[State 20006]
type = RemoveExplod
trigger1 = Time = 0
ID = 4657+var(1)

[State 20006]
type = RemoveExplod
trigger1 = Time = 0
ID = 4662+var(2)

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(32) = var(1) + 1

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(33) = var(2) + 1

[State -2]
type = ParentVarSet
trigger1 = Time = 0
fvar(34) = var(3) + 1

[State 20006]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Parent,var(7)



;===============================================================
;パワーゲージシステム管理ヘルパー
[Statedef 25000]
physics = N
movetype = I
anim = 9999
ctrl = 0

[State 25000, destroy]
type = DestroySelf
trigger1 = !Parent,fvar(30)


[State 25000, varset];モード判別(ADV)
type = VarSet
trigger1 = Parent,fvar(32) = 1 && Parent,fvar(33) = 1 && Parent,fvar(34) = 1
var(1) = 1

[State 25000, varset];モード判別(EX)
type = VarSet
trigger1 = Parent,fvar(32) = 2 && Parent,fvar(33) = 2 && Parent,fvar(34) = 2
var(1) = 2

[State 25000, varset];モード判別(ULT ダッシュ＆避け＆アドバンスドゲージ）
type = VarSet
trigger1 = Parent,fvar(32) = 1 && Parent,fvar(33) = 2 && Parent,fvar(34) = 1
var(1) = 3

[State 25000, varset];モード判別(ULT ステップ＆緊急回避＆アドバンスドゲージ）
type = VarSet
trigger1 = Parent,fvar(32) = 2 && Parent,fvar(33) = 1 && Parent,fvar(34) = 1
var(1) = 4

[State 25000, varset];モード判別(ULT ステップ＆緊急回避＆アドバンスドゲージ）
type = VarSet
trigger1 = Parent,fvar(32) = 2 && Parent,fvar(33) = 2 && Parent,fvar(34) = 1
var(1) = 5

[State 25000, varset];モード判別(ULT ダッシュ＆緊急回避＆エキストラゲージ）
type = VarSet
trigger1 = Parent,fvar(32) = 1 && Parent,fvar(33) = 1 && Parent,fvar(34) = 2
var(1) = 6

[State 25000, varset];モード判別(ULT ダッシュ＆避け＆エキストラゲージ）
type = VarSet
trigger1 = Parent,fvar(32) = 1 && Parent,fvar(33) = 2 && Parent,fvar(34) = 2
var(1) = 7

[State 25000, varset];モード判別(ULT ステップ＆緊急回避＆エキストラゲージ）
type = VarSet
trigger1 = Parent,fvar(32) = 2 && Parent,fvar(33) = 1 && Parent,fvar(34) = 2
var(1) = 8


[State 25000, Gauge];ゲージ本体1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4000+(var(1)-1)*5) = 0
trigger1 = Parent,NumHelper(Parent,var(8)+20000) = 0
ID = 4000+(var(1)-1)*5
anim = 4000+(var(1)-1)*5
pos = 5,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 5
pausemovetime = 2147483647
supermovetime = 2147483647


[State 25000, stock];ADVストック1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4200) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power < 1000
ID = 4200
anim = 4200
pos = 5,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 7
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power < 1000)
ID = 4200

[State 25000, stock];ADVストック1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4201) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power = [1000,2000)
ID = 4201
anim = 4201
pos = 5,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 7
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power = [1000,2000))
ID = 4201

[State 25000, stock];ADVストック1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4202) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power = [2000,3000)
ID = 4202
anim = 4202
pos = 5,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 7
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power = [2000,3000))
ID = 4202

[State 25000, stock];ADVストック1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4203) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power >= 3000
ID = 4203
anim = 4203
pos = 5,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 7
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power >= 3000)
ID = 4203

[State 25000, stock];EXストック1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4204) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 2
trigger1 = Parent,Power < 1000
ID = 4204
anim = 4204
pos = 5,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = Parent,Power >= 1000
ID = 4204

[State 25000];ADVパワーバー1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4050) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
ID = 4050
anim = 4050
pos = 18,225
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = ModifyExplod
trigger1 = 1
ID = 4050
scale = IfElse(Power%1000 = 0,0,(Power%1000)/1000.0),1

[State 25000];EXパワーバー1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4050) = 0
trigger1 = NumExplod(4000+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 2
ID = 4050
anim = 4051
pos = 18,225
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647


[State 25000];MAX発動ゲージ1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4250) = 0
trigger1 = Parent,var(52)
ID = 4250
anim = 4250
pos = 5-(Parent,fvar(34)=2)*13,228
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !Parent,var(52)
ID = 4250

[State 25000];MAX発動バー1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4250) = 1
trigger1 = NumExplod(4251) = 0
trigger1 = Parent,var(52)
ID = 4251
anim = 4251
pos = 44-(Parent,fvar(34)=2)*13,215
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 6
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = ModifyExplod
trigger1 = 1
ID = 4251
scale = IfElse((Parent,var(52) > 1080),1,((Parent,var(52))/1080.0)),1

[State 25000]
type = RemoveExplod
trigger1 = !Parent,var(52)
ID = 4251

[State 25000];MAX発動バー1P
type = Explod
triggerall = TeamSide = 1
trigger1 = var(1)
trigger1 = NumExplod(4250) = 1
trigger1 = NumExplod(4252) = 0
trigger1 = Parent,var(52) > 1080
ID = 4252
anim = 4252
pos = 44-(Parent,fvar(34)=2)*13,215
postype = left
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 7
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = ModifyExplod
trigger1 = 1
ID = 4252
scale = (Parent,var(52)-1080)/2160.0,1

[State 25000]
type = RemoveExplod
trigger1 = Parent,var(52) <= 1080
ID = 4252

;============================================================
;2P側ゲージ

[State 25000, Gauge];ゲージ本体2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4100+(var(1)-1)*5) = 0
trigger1 = Parent,NumHelper(Parent,var(8)+20000) = 0
ID = 4100+(var(1)-1)*5
anim = 4100+(var(1)-1)*5
pos = -5,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 5
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000, stock];ADVストック2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4210) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power < 1000
ID = 4210
anim = 4210
pos = -5,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power < 1000)
ID = 4210

[State 25000, stock];ADVストック2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4211) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power = [1000,2000)
ID = 4211
anim = 4211
pos = -5,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power = [1000,2000))
ID = 4211

[State 25000, stock];ADVストック2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4212) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power = [2000,3000)
ID = 4212
anim = 4212
pos = -5,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power = [2000,3000))
ID = 4212

[State 25000, stock];ADVストック2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4213) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
trigger1 = Parent,Power >= 3000
ID = 4213
anim = 4213
pos = -5,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !(Parent,Power >= 3000)
ID = 4213

[State 25000, stock];EXストック2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4214) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 2
trigger1 = Parent,Power < 1000
ID = 4214
anim = 4214
pos = -5,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = Parent,Power >= 1000
ID = 4214

[State 25000];ADVパワーバー2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4150) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 1
ID = 4150
anim = 4150
pos = -17,225
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = ModifyExplod
trigger1 = 1
ID = 4150
scale = IfElse(Power%1000 = 0,0,(Power%1000)/1000.0),1

[State 25000];EXパワーバー2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4150) = 0
trigger1 = NumExplod(4100+(var(1)-1)*5)
trigger1 = Parent,fvar(34) = 2
ID = 4150
anim = 4151
pos = -17,225
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647


[State 25000];MAX発動ゲージ2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4260) = 0
trigger1 = Parent,var(52)
ID = 4260
anim = 4260
pos = -5+(Parent,fvar(34)=2)*13,228
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = RemoveExplod
trigger1 = !Parent,var(52)
ID = 4260

[State 25000];MAX発動バー2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4260) = 1
trigger1 = NumExplod(4261) = 0
trigger1 = Parent,var(52)
ID = 4261
anim = 4261
pos = -43+(Parent,fvar(34)=2)*13,215
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 6
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = ModifyExplod
trigger1 = 1
ID = 4261
scale = IfElse((Parent,var(52) > 1080),1,((Parent,var(52))/1080.0)),1

[State 25000]
type = RemoveExplod
trigger1 = !Parent,var(52)
ID = 4261

[State 25000];MAX発動バー2P
type = Explod
triggerall = TeamSide = 2
trigger1 = var(1)
trigger1 = NumExplod(4260) = 1
trigger1 = NumExplod(4262) = 0
trigger1 = Parent,var(52) > 1080
ID = 4262
anim = 4262
pos = -43+(Parent,fvar(34)=2)*13,215
postype = right
facing = 1
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 7
pausemovetime = 2147483647
supermovetime = 2147483647

[State 25000]
type = ModifyExplod
trigger1 = 1
ID = 4262
scale = (Parent,var(52)-1080)/2160.0,1

[State 25000]
type = RemoveExplod
trigger1 = Parent,var(52) <= 1080
ID = 4262



[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4000
ID = 4000

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4005
ID = 4005

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4010
ID = 4010

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4015
ID = 4015

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4020
ID = 4020

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4025
ID = 4025

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4030
ID = 4030

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4035
ID = 4035

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4100
ID = 4100

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4105
ID = 4105

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4110
ID = 4110

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4115
ID = 4115

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4120
ID = 4120

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4125
ID = 4125

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4130
ID = 4130

[State 25000, remove]
type = RemoveExplod
trigger1 = (4000+(var(1)-1)*5)+(Parent,TeamSide = 2)*100 != 4135
ID = 4135


;================================================================
;パワー管理ヘルパー
[Statedef 26000]
physics = N
anim = 9999
ctrl = 0

[State 26000]
type = PlaySnd
triggerall = Parent,fvar(34) = 2
trigger1 = Parent,var(7)
trigger1 = Parent,Power >= 1000
trigger1 = var(1) = [1,2]
value = S8,3
volume = 255

[State 26000]
type = VarSet
triggerall = Parent,fvar(34) = 2
trigger1 = !var(1)
trigger1 = Parent,var(7)
trigger1 = Parent,Power >= 1000
var(1) = 1

[State 26000]
type = VarAdd
triggerall = Parent,fvar(34) = 2
trigger1 = var(1)
var(1) = 1

[State 26000]
type = VarSet
triggerall = Parent,fvar(34) = 2
trigger1 = Parent,var(7)
trigger1 = Parent,Power < 1000
trigger2 = RoundState != 2
var(1) = 0

[State 26000];パワー監視
type = VarSet
trigger1 = Time%2 = 0
var(10) = Parent,Power
ignorehitpause = 1

[State 26000];パワー監視
type = VarSet
trigger1 = Time%2 = 1
var(11) = Parent,Power
ignorehitpause = 1

[State 26000]
type = ParentVarSet
trigger1 = 1
var(54) = abs(var(10) - var(11))
ignorehitpause = 1

[State 26000];ライフ監視
type = VarSet
trigger1 = Time%2 = 0
var(12) = Parent,Life
ignorehitpause = 1

[State 26000];ライフ監視
type = VarSet
trigger1 = Time%2 = 1
var(13) = Parent,Life
ignorehitpause = 1

[State 26000]
type = ParentVarSet
trigger1 = 1
var(55) = abs(var(12) - var(13))
ignorehitpause = 1

[State 26000, end]
type = DestroySelf
trigger1 = !IsHelper

;================================================================
;MAX発動監視ヘルパー
[Statedef 27000]
physics = N
anim = 9999
ctrl = 0

[State 27000]
type = ChangeState
trigger1 = !Parent,var(52)
value = 27001

[Statedef 27001]
physics = N
anim = 9999
ctrl = 0

[State 27001]
type = DestroySelf
trigger1 = Time > 1


;===============================================================
;先行入力受付ヘルパー
[Statedef 12000]
type = S
anim = 9999
ctrl = 0

[State 12000, destroy]
type = DestroySelf
trigger1 = Root,var(59)


[State 12000]
type = VarSet
trigger1 = Root,fvar(34) = 1 && Root,Power >= 3000
var(10) = 1
ignorehitpause = 1

[State 12000]
type = VarSet
trigger1 = !(Root,fvar(34) = 1 && Root,Power >= 3000)
var(10) = 0
ignorehitpause = 1

;【コマンド設定】
;============================================================
;CMDのコマンド順を推奨


;MAX超必殺技（1〜10）

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "ヘブンズゲイトA" || Root,Command = "ヘブンズゲイトB"
trigger1 = Root,var(58) = 2
trigger2 = Root,Command = "MAXヘブンズゲイト"
Trigger2 = Root,var(58) = 1 && var(10)
var(12) = 1

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "ノクタールライツX" || Root,Command = "ノクタールライツY"
trigger1 = Root,var(58) = 2
trigger2 = Root,Command = "MAXノクタールライツ"
Trigger2 = Root,var(58) = 1 && var(10)
var(12) = 2


;超必殺技(11〜20）

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
triggerall = Root,Command = "ヘブンズゲイトA"
Trigger1 = Root,var(58) = 1
var(12) = 11

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
triggerall = Root,Command = "ヘブンズゲイトB"
Trigger1 = Root,var(58) = 1
var(12) = 12

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
triggerall = Root,Command = "ノクタールライツX"
Trigger1 = Root,var(58) = 1
var(12) = 13

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
triggerall = Root,Command = "ノクタールライツY"
Trigger1 = Root,var(58) = 1
var(12) = 14

;必殺技(21〜）


[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "エボニーティアーズX"
var(12) = 21

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "エボニーティアーズY"
var(12) = 22

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "ディーサイドA"
var(12) = 23

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "ディーサイドB"
var(12) = 24

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "サクラリッジX"
var(12) = 25

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "サクラリッジY"
var(12) = 26

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "デスベアーX"
var(12) = 27

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "デスベアーY"
var(12) = 28

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "デスロウX"
var(12) = 29

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "デスロウY"
var(12) = 30

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "メタルマサカーA"
var(12) = 31

[State 12000,command]
type = ParentVarSet
triggerall = !Root,Ctrl && !Root,var(12)
trigger1 = Root,Command = "メタルマサカーB"
var(12) = 32

;============================================================


[State 12000]
type = varset
trigger1 = !var(1)
trigger1 = var(1) != Root,var(12)
var(1) = Root,var(12)

[State 12000,timer]
type = VarAdd
triggerall = !(Parent,MoveContact = 1)
trigger1 = var(1)
var(2) = 1

[State 12000,timerreset]
type = varset
trigger1 = var(2) > 10
var(1) = 0

[State 12000]
type = ParentVarSet
trigger1 = var(2) > 10
var(12) = 0

[State 12000,timerreset]
type = varset
trigger1 = var(2) > 10
var(2) = 0

;=================================================================