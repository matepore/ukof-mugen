;-----------------------------------------------------------------------------
[Statedef -2];常時監視ステート(相手に行動を制御されても関係無く常に実行される)
;-----------------------------------------------------------------------------
[State -2, VarSet]
type = VarSet
trigger1 = 1
var(36) = 0

[State -2, VarSet]
type = VarSet
trigger1 = RoundState = [0,1]
trigger2 = RoundState >= 3 
trigger3 = numexplod(9910) = 1 
trigger4 = RoundState >= 3 && winko && alive = 1
var(36) = 1
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = var(36) = 1
flag = nobardisplay

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = matchover
trigger1 = winko
flag = nomusic
ignorehitpause = 1

[State -2, KO演出ヘルパー]
type = Helper
trigger1 = roundstate = 2
trigger1 = numhelper(9900) = 0
id = 9900
name = "win"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 9900
helpertype = normal
pausemovetime = 999999
keyctrl = 1 
ownpal = 1

;---------------------------------------------------------------------------
;パワーMAX
[state -2, MAX発動ゲージ]
type = Helper
trigger1 = numhelper(10150) = 0
id = 10150
name = "MAX"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 10150
helpertype = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0 
ownpal = 1

;パワーMAXの変数管理等

[State -2 ,1];MAX発動時のパワーセット
type = VarSet
trigger1 = var(40) = 900
v = 39
value = power

[State -2, ]
type = varadd
trigger1 = var(40) > 0
v = 40
value = -1

[State -2, ]
type = VarSet
trigger1 = var(40) < 0
trigger2 = RoundState = [0,1]
v = 40
value = 0

[State -2, ]
type = powerset
triggerall = var(40) > 0
trigger1 = stateno != [3000,4999]
trigger1 = stateno != [11000,12999]
value = var(39)
ignorehitpause = 1

;点滅
[State -2, PalFX]
type = PalFX
triggerall = var(40) > 0 
triggerall = life > 500
trigger1 = GameTime%2 = 0
time = 1
add = 126,126,0
color = 1
ignorehitpause = 1

[State -2, ]
type = AfterImage
triggerall = var(40) > 0
triggerall = life > 500
trigger1 = GameTime%20 = 0
time = 4
length = 11
timegap = 1
frameGap = 3
PalBright = 128,3,3
PalContrast = 126,126,0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , .6
ignorehitpause = 1

[State -2, PalFX]
type = PalFX
triggerall = var(40) > 0 
triggerall = life <= 500
trigger1 = GameTime%2 = 0
time = 1
add = 190,63,35
color = 1
ignorehitpause = 1

[State -2, ]
type = AfterImage
triggerall = var(40) > 0
triggerall = life <= 500
trigger1 = GameTime%20 = 0
time = 4
length = 11
timegap = 1
frameGap = 3
PalBright = 128,3,3
PalContrast = 190,63,35
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , .6
ignorehitpause = 1

[State -2]
type = Afterimagetime
triggerall = var(40) > 0
trigger1 = GameTime%7 = 0
time = 2
ignorehitpause = 1

;-----------------------------------------------------------------------------
; 攻撃値及びパワー蓄積値の調整用
;-----------------------------------------------------------------------------
[State -2, 攻撃値]
type = VarSet
trigger1 = 1
fvar(9) = (1000/112)*0.75

[State -2, パワー蓄積値]
type = VarSet
trigger1 = 1
fvar(10) = (1000/112);*0.75

;-----------------------------------------------------------------------------
;パワーゲージ表示
;-----------------------------------------------------------------------------
[state -2, ゲージ]
type = Helper
trigger1 = numhelper(10100) = 0
id = 10100
name = "g"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 10100
helpertype = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0 
ownpal = 1

;-----------------------------------------------------------------------------
;カウンターヒット判定
;-----------------------------------------------------------------------------
[State -2, Counter]
type = VarSet
trigger1 = P2MoveType = A
fvar(32) = 1

[State -2, Counter Time Add]
type = VarAdd
trigger1 = P2MoveType != A
trigger1 = fvar(32) >= 1
fvar(32) = 1

[State -2, Counter Time Reset]
type = VarSet
trigger1 = fvar(32) > 3
fvar(32) = 0
ignorehitpause = 1

[State -2, カウンターヒット呼出]
type = Helper
triggerall = Numhelper(10200) = 0
triggerall = fvar(32) >= 1
trigger1 = movehit = 1 && numtarget
name = "counter"
id = 10200
pos = 0,0
postype = left
stateno = 10200
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

;-----------------------------------------------------------------------------
; 攻撃力補正
;-----------------------------------------------------------------------------
[state -2, 通常時]
type = VarSet
trigger1 = var(40) <= 0
fvar(33) = 1

[state -2, CPU補正]
type = VarSet
trigger1 = var(57) < 8
fvar(34) = 1

[state -2, CPU補正]
type = VarSet
trigger1 = var(57) >= 8
fvar(34) = ifelse(var(59),1.1,0.9)

[state -2, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = fvar(33)*fvar(34)

;-----------------------------------------------------------------------------
; ガードクラッシュ
;-----------------------------------------------------------------------------
[State -2, ]
type = VarSet
triggerall = fvar(38) < 0
trigger1 = 1
fvar(38) = 0

[State -2, ]
type = VarSet
triggerall = fvar(36) < 0
trigger1 = 1
fvar(36) = 0

[State -2, ガードクラッシュ値回復不能時間]
type = varadd
triggerall = fvar(38) >= 1
trigger1 = 1
fvar(38) = -1

[State -2, ガードクラッシュ値回復不能時間]
type = VarSet
triggerall = fvar(38) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(38) = 180

[State -2, ガードクラッシュ値回復]
type = varadd
triggerall = fvar(36) >= 1
trigger1 = fvar(38) <= 0
trigger1 = gametime % 20 = 0
fvar(36) = -3

[State -2, ガードクラッシュ値・リセット]
type = VarSet
triggerall = fvar(36) != 0
trigger1 = roundstate != 2
fvar(36) = 0

[State -2, ガードクラッシュ値回復不能時間・リセット]
type = VarSet
triggerall = fvar(38) != 0
trigger1 = roundstate != 2
fvar(38) = -1

;ガードクラッシュ
[State -2, TargetState]
type = TargetState
triggerall = numtarget
triggerall = target,alive
triggerall = fvar(36) >= 112
triggerall = target,statetype = S || target,statetype = C
triggerall = target,movetype = H && target,stateno = [120,159]
trigger1 = moveguarded = 1
value = 5700

[State -2, CRUSH!]
type = helper
triggerall = numhelper(10210) = 0
trigger1 = numtarget
trigger1 = target,statetype = S || target,statetype = C
trigger1 = target,movetype = H && target,stateno = 5700
trigger1 = target,anim = 5700 && target,time = 1
name = "crush"
id = 10210
pos = 0,0
postype = back
stateno = 10210
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

;ガードクラッシュ値・リセット
[State -2, 0]
type = VarSet
triggerall = fvar(36) != 0
trigger1 = numtarget
trigger1 = target,statetype = S || target,statetype = C
trigger1 = target,movetype = H && target,stateno = 5700
trigger1 = target,anim = 5700
fvar(36) = 0

;-----------------------------------------------------------------------------
;75式改
[State 1301, var]
type = VarSet
trigger1 = var(59)
trigger1 = time = [0,6]
trigger1 = stateno = 1211
fvar(18) = 1

[State -2, VarSet]
type = VarSet
triggerall = RoundState = 2
triggerall = MoveType = A
trigger1 = MoveHit
trigger1 = NumTarget = 0
trigger2 = EnemyNear(fvar(37)),Stateno = [120,159]
trigger2 = MoveReversed
FV = 19
value = 1
ignorehitpause = 1

[State -2, HitBy]
type = HitBy
trigger1 = fvar(19)
value2 =
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
triggerall = fvar(19)
trigger1 = MoveType != A
trigger2 = MoveContact
trigger2 = NumTarget
FV = 19
value = 0
ignorehitpause = 1

;-----------------------------------------------------------------------------

[State -2, 二人目のイントロ]
type = ChangeState             ;二人目でもイントロを作る
value = 190                    ;イントロへ
triggerall = RoundsExisted = 0 ;自分が初参戦時
triggerall = TeamMode = Turns  ;ターンモード
trigger1 = stateno = 5900      ;5900番


;ここでtrigger用に自分の初期ライフを確認します
[State -2, ライフ確認]
type = VarSet
triggerall = RoundState = [0,1] ;開始前の間
trigger1 = RoundNo = 1          ;一試合目
trigger2 = TeamMode = Turns     ;5900でイントロを作らないと ↓
trigger2 = RoundsExisted = 0    ;これは使えません
v = 22
value = Life   ;Var(22)に自分のライフを保存

[State -2, ライフ取得ミス対策]
type = VarSet
triggerall = Var(22) = [0,100] ;ライフが100以下と認識されたら
triggerall = Time = 1
trigger1 = RoundNo = 1
trigger2 = RoundsExisted = 0
v = 22
value = const(data.life) ;自分のデータに書かれたLifeにする


;----------------------------------------------------------------------------
;デバッグ支援記述集

; ※ この一連の記述は、キャラが完成したら消すか";"を付けて無効化しましょう。
;　　僅かにでも処理が重くなることが理由です。（ちなみにNullではダメです）


;デバッグモードに白い文字の表示を加える
;[State -2, デバッグ表示]
;type = DisplayToClipboard
;trigger1 = 1
;text = "V1-C=%d,V3-J=%d,V4-D=%d,V5-B=%d,V20-A=%d"
;params = var(1),var(3),var(4),var(5),var(20)
;ignorehitpause = 1

;表示を横に加える
;[State -2, デバッグ表示その2]
;type = AppendToClipboard
;trigger1 = 1
;text = " V22-L=%d,V21-R=%d,Pos X=%d,Y=%d"
;params = var(22),var(21),ceil(Pos X),floor(Pos Y)
;ignorehitpause = 1

;表示を下に加える
;[State -2, デバッグ表示その3]
;type = AppendToClipboard
;trigger1 = 1
;text = "\nDist X=%d,Y=%d, Vel X=%d/10,Y=%d/10 : Power=%d"
;params = floor(P2BodyDist X),ceil(P2BodyDist Y),ceil(Vel X*10),floor(Vel Y*10),Power
;ignorehitpause = 1


; ※ 関数説明：floor(1.5) = 1、ceil(1.5) = 2になります。 小数を含む場合によく使います。
;　　小数を詳しく見たい場合は%dの代わりに%fを使います。 MUGENに限らず結構常識です。
;　　Vel X*10に対し、表記はVel X=%d/10になっています。 10で割った数値が目安のVel Xです。
;　　PosとDistはfloorとceilが逆になっています。




;無人デバッグ用（かなり長時間CPUに任せるデバッグ法）
;ウォッチ、サバイバル(ctrl+2使用)のチーム戦が良いと思う
;[State -2, バグ発生警報]
;type = VarSet
;triggerall = RoundState = 2
;triggerall = Var(20) >= 0
;trigger1 = floor(Pos Y) < -5 ;よくあるバグとして、宙に浮かぶことが挙げられる
;trigger1 = stateno = [0,22]  ;宙で立つ、しゃがむ、歩く
;trigger1 = Time = 1
;trigger2 = Anim != [5110,5120]
;trigger2 = Ctrl = 0     ;行動不能のまま
;trigger2 = Life > 0     ;まだ息があり
;trigger2 = !Lose        ;負けていないのに
;trigger2 = Time = 2047  ;長時間固まる
;var(20)  = -4           ;上記バグが出るとセットされます。

;[State -2, 永久戦闘デバッグ]
;type = LifeAdd
;trigger1 = TeamMode = Simul ;必要に応じて条件を変える
;value = 20  ;HPが減らない
;ignorehitpause = 1


[State -2, VarSet]
type = VarSet
trigger1 = var(17) < 0
trigger2 = statetype != A && movehit = 1
trigger3 = p2statetype = A || p2statetype = L
var(17) = 0
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = moveguarded = 1
trigger2 = statetype = A && movecontact = 1
var(17) = 3
ignorehitpause = 1 

[State -2, VarAdd]
type = VarAdd
trigger1 = var(17) >= 1
trigger1 = p2movetype != H
var(17) = -1
ignorehitpause = 1 

[State -2, 残像]
type = AfterImage
trigger1 = Movetype = H
time = 1

[State -2,]
type = StopSnd
trigger1 = command != "holdfwd"
trigger2 = Anim != 100
channel = 6

;---------------------------------------------------------------------------------

[state -2]
type = attackMulSet
triggerall = alive
triggerall = PalNo = [6,12]
trigger1 = life < lifemax*0.5
value = 1.5 - (life/(lifemax+0.0))
ignorehitpause = 1

[State 2,底力]
type = DefenceMulSet
triggerall = PalNo = [6,12]
trigger1 = life > 500
value = 0.8
ignorehitpause = 1

[State 2,底力]
type = DefenceMulSet
triggerall = PalNo = [6,12]
trigger1 = life <= 500 && life > 300
value = 0.5
ignorehitpause = 1

[State 2,底力]
type = DefenceMulSet
triggerall = PalNo = [6,12]
trigger1 = life <= 300 && life > 100
value = 0.3
ignorehitpause = 1

[State 2,底力]
type = DefenceMulSet
triggerall = PalNo = [6,12]
trigger1 = life <= 100
value = 0.1
ignorehitpause = 1

[State -1,Poweradd]
type = poweradd
triggerall = PalNo = [6,11]
triggerall = power < 5000
trigger1 = 1
value = 0;1
presistent = 110

[State -1,Poweradd]
type = poweradd
triggerall = PalNo = [7,11]
trigger1 = life <= 300
value = 0;PowerMax

[State -3,]
type = poweradd;Powerset
trigger1 = PalNo = 12
value = 0;PowerMax

[State -2]
type = VarSet
trigger1 = RoundState = 2 && fvar(15) != -1
trigger1 = EnemyNear(fvar(37)),StateNo = 195
trigger1 = EnemyNear(fvar(37)),Time = 1
trigger2 = RoundState = 2 && fvar(15) != -1
trigger2 = EnemyNear(fvar(37)),StateNo = 196
trigger2 = EnemyNear(fvar(37)),Time = 1
FV = 15
value = fvar(15) + 1
persistent = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = RoundState = 1
trigger1 = RoundNo = 1
trigger1 = power != powermax
FV = 15
value = -1
ignorehitpause = 1

[State -2]
type = PowerAdd
trigger1 = Time = 0 && StateNo = [150,154]
trigger2 = MoveType = H && Time = 0
trigger3 = MoveType = A && Time = 0 && !hitpausetime
value = 30 + Random%2
ignorehitpause = 1
persistent = 0

[State -2]
type = PowerAdd
triggerall = fvar(15) = -1 && (PalNo = [6,12])
trigger1 = Time = 0 && StateNo = [150,154]
trigger2 = MoveType = H && Time = 0
trigger3 = MoveType = A && Time = 0 && !hitpausetime
value = 20 + Random%2
ignorehitpause = 1
persistent = 0

[State -2, AirGuard]
type = AssertSpecial
triggerall = palno = 6
triggerall = RoundState = 2 && life <= 300
triggerall = Random <= 222
trigger1 = movetype = A
flag = unguardable

[State -2, AirGuard]
type = AssertSpecial
triggerall = palno = [7,11]
triggerall = RoundState = 2 && life <= 500
triggerall = Random <= 333
trigger1 = movetype = A
flag = unguardable

[State -2, AirGuard]
type = AssertSpecial
triggerall = palno = 12
triggerall = RoundState = 2
trigger1 = movetype = A
flag = unguardable

[State 1300]
type = NotHitBy
triggerall = palno = 6
triggerall = RoundState = 2 && life <= 300
triggerall = P2movetype = A
trigger1 = (StateNo = [200,245]) || (StateNo = [400,440])
value = SCA
ignorehitpause = 1

[State 1300]
type = NotHitBy
triggerall = palno = [7,11]
triggerall = RoundState = 2 && life <= 500
triggerall = P2movetype = A
trigger1 = (StateNo = [200,245]) || (StateNo = [400,440])
value = SCA
ignorehitpause = 1

[State 1300]
type = NotHitBy
triggerall = movetype = A
trigger1 = palno = 12
value = SCA
ignorehitpause = 1

;---------------------------------------------------------------------------
;p2state用
;---------------------------------------------------------------------------
[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 5621
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 0
trigger1 = enemy, Vel Y > 0
value = s6,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 5621
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 0
trigger1 = enemy, Vel Y > 0
value = s6,1

[State -2, 13]
type = PlaySnd
triggerall = P2stateno = 5631
trigger1 = Enemy, Pos Y >= 0 && Enemy, Time = 1
value = s6,0

[State -2, エフェクト表示]
type = Explod
triggerall = P2Movetype = H
trigger1 = p2stateno = 5690 && enemy,time = 1
trigger2 = p2stateno = 5711 && enemy,time = 1
anim = 10050
postype = P2
pos = 0, 0
sprpriority = -1
ownpal = 1
Persistent = 0

[State -2, エフェクト表示]
type = Explod
triggerall = P2Movetype = H
trigger1 = p2stateno = 5611
trigger1 = ((Enemy,Anim = [5610,5611]) || (Enemy,Anim = [5615,5616])) && Enemy,AnimElem = 2
trigger2 = p2stateno = 5614 && enemy,time = 1
trigger3 = p2stateno = 5616 && enemy,time = 1
anim = 10051
postype = P2
pos = 0, 0
sprpriority = -1
ownpal = 1
Persistent = 0

[State -2, エフェクト表示]
type = Explod
triggerall = P2Movetype = H
trigger1 = p2stateno = 5611
trigger1 = ((Enemy,Anim = [5610,5611]) || (Enemy,Anim = [5615,5616])) && Enemy,AnimElem = 2
trigger2 = p2stateno = 5614 && enemy,time = 1
trigger3 = p2stateno = 5616 && enemy,time = 1
anim = 10052
postype = P2
pos = 0, 0
sprpriority = 1
ownpal = 1
Persistent = 0

[State -2, エフェクト表示]
type = Explod
trigger1 = p2stateno = 5692 && enemy,time = 1
trigger2 = p2stateno = 5713 && enemy,time = 1
anim = 10062
postype = P2
pos = -32, 0 ;32, 0
facing = -1
sprpriority = 2
ownpal = 1
Persistent = 0

;---------------------------------------------------------------------------

[State -2, No sound in Guanding KO]
type = AssertSpecial
triggerall = prevstateno = [120,152]
trigger1 = stateno = 5000 || stateno = 5010
trigger1 = statetype != A
flag = Nokosnd
ignorehitpause = 1

[State -2, Guarding KO]
type = ChangeState
trigger1 = prevstateno = [120,152]
trigger1 = !alive
value = 5811
ignorehitpause = 1

;---------------------------------------------------------------------------
;ダメージボイス
;---------------------------------------------------------------------------
[State -2,]
type = StopSnd
trigger1 = Movetype = H
channel = 10
ignorehitpause = 1

[State -2,]
type = PlaySnd
triggerall = alive = 1
triggerall = random <= 500
triggerall = time = 1
trigger1 = stateno = 5000
trigger1 = anim = 5000 || anim = 5010
trigger2 = stateno = 5010
trigger2 = anim = 5020
value = s11,501

[State -2,]
type = PlaySnd
triggerall = alive = 1
triggerall = random <= 500
triggerall = time = 1
trigger1 = stateno = 5000
trigger1 = anim = 5002 || anim = 5012
trigger2 = stateno = 5010
trigger2 = anim = 5022
value = s11,502

[State -2,]
type = PlaySnd
triggerall = alive = 1
triggerall = random <= 500
triggerall = time = 1
trigger1 = stateno = 5101
value = s11,503

;-----------------------------------------------------------------------------
;空中ガードシステム
;-----------------------------------------------------------------------------
[State -2, AirGuard]
type = AssertSpecial
triggerall = roundstate = 2
trigger1 = 1
flag = noairguard

[State -2, AirGuard]
type = AssertSpecial
triggerall = roundstate = 2
trigger1 = p2statetype = A
flag = unguardable

;-----------------------------------------------------------------------------
;ヒットストップ中無敵
;-----------------------------------------------------------------------------
[State -2, 無敵]
type = NotHitBy
trigger1 = HitPauseTime
trigger1 = !(MoveReversed)
value = SCA
ignorehitpause = 1

;-----------------------------------------------------------------------------
;AI用重力加速度計測
;-----------------------------------------------------------------------------
[State -2, yaccel]
type = VarSet
trigger1 = fvar(20) != enemynear(var(58)),const(movement.yaccel)
trigger1 = enemynear(var(58)),stateno != [5000,5210]
trigger1 = enemynear(var(58)),Vel Y != 0
FV = 20
value = enemynear(var(58)),const(movement.yaccel)
ignorehitpause = 1

[State -2, yaccel]
type = VarSet
trigger1 = fvar(20) != enemynear(var(58)),GetHitVar(yaccel)
trigger1 = enemynear(var(58)),stateno = [5000,5210]
trigger1 = enemynear(var(58)),Vel Y != 0
FV = 20
value = enemynear(var(58)),GetHitVar(yaccel);(打撃当てた時のyaccel値)
ignorehitpause = 1

;敵が空中じゃない時
[State -2, yaccel]
type = VarSet
trigger1 = fvar(20) != 0
trigger1 = enemynear(var(58)),Vel Y = 0
FV = 20
value = 0;(打撃当てた時のyaccel値)
ignorehitpause = 1

;---------------------------------------------------------------------------------
[Statedef -3];常時監視ステート(p2statenoなどで相手に行動を制御された時は実行しない)
;---------------------------------------------------------------------------------

;※※※※※※※※※※※※※※※※※※※※ハイジャンプ・東方萃夢想風味
;理論は簡単
;ハイジャンプコマンドを入れた「瞬間」、varスイッチを１にする。
;でハイジャンプのコマンドは最後がU、つまりジャンプする。
;そしてジャンプステート５０の時にvarスイッチが１以上ならveladdで加速します。
;varスイッチを０にするトリガーは「ステート５０の２フレーム目」です。

[State -3, コマンドを入れたらVarをON] 
type = VarSet
triggerall = !var(59)
trigger1 = command = "jump"
trigger1 = ctrl
trigger2 = prevstateno = 100 || prevstateno = 115
trigger2 = command = "holdfwd"
v = 3
value = 1

[State -3, sysvarを引継ぐ]
type = VarSet
trigger1 = Var(3) = 1
trigger1 = stateno = 40 ;ジャンプする前のステート
trigger1 = AnimTime = 0 ;ジャンプ方向を決めるsysvarがリセットされる寸前
var(3) = ifelse(sysvar(1) = 0, 2, ifelse(sysvar(1)=1, 3, 4))

[State -3, AI]
type = VarSet
trigger1 = var(59)
trigger1 = stateno = [34,37]
trigger1 = AnimTime = 0
var(3) = ifelse(sysvar(1) = 0, 2, ifelse(sysvar(1)=1, 3, 4))

[State -3, varをOFFにするステート]
type = VarSet
triggerall = Time = 2
trigger1 = stateno = 50
trigger2 = stateno != [40,59]
v = 3
value = 0

[State -3, 前にボタンを押してたら前にも加速]
type = VelAdd
trigger1 = var(3) = 3
trigger1 = stateno = 50 || stateno = 10050
x = 1.8

[State -3, 後ろなら後ろに加速]
type = VelAdd
trigger1 = var(3) = 4
trigger1 = stateno = 50 || stateno = 10050
x = -1.8

[State -3, 垂直ジャンプにveladdを使って上に加速]
type = null;VelAdd
trigger1 = var(3) = 2
trigger1 = stateno = 50 || stateno = 10050
y = -1.8

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = var(3) >= 1
trigger1 = stateno = 50
time = 25
trans = add1
length = 4
timeGap = 3
frameGap = 1
palBright = 0, 0, 0
palContrast = 128, 128, 128
palAdd = 0, 0, 0
palMul = 1, 1, 1

;※常時監視ステートは常に有効にしたいステートコントローラをどんどん追加していきます。

;------------------------------------------------------------------------------
;状況による行動制限編（必殺技・ガード）

;p2movetype、p2statetype、power、Lifeなど
;互いの状況をおもに利用した行動を取らせる様にしています。

;---------------------------------------------------------------------------
; 敵空中喰らい行動不能再現用奪取ステート

[State -3, TargetState]
type = TargetState
triggerall = numtarget(200)
triggerall = target(200),alive
trigger1 = target(200),stateno = 5020
trigger1 = target(200),statetype = A
trigger1 = target(200),movetype = H
value = 290

;---------------------------------------------------------------------------
; 叩き落とし

[State -3, TargetState]
type = TargetState
triggerall = numtarget(5635)
trigger1 = target(5635),stateno = 5020
trigger1 = target(5635),statetype = A
trigger1 = target(5635),movetype = H
value = 5635

;---------------------------------------------------------------------------

[State -3, CornerPush]
Type = Width
Trigger1 = Enemy, BackEdgeDist < 10
Trigger2 = Enemy, FrontEdgeDist < 10
Edge = 10

;---------------------------------------------------------------------------

[State -3]
type = AttackDist
TriggerAll = var(59)
TriggerAll = var(57) > 6
Trigger1 = EnemyNear(var(58)),StateType = A
value = 0

;---------------------------------------------------------------------------
; 各種ヘルパー
;---------------------------------------------------------------------------

[State -3, AI起動ヘルパー]
type = Helper
triggerall = var(59) = 0
trigger1 =!NumHelper(30000)
trigger1 =!IsHelper
trigger1 = roundstate <= 2 && alive
Trigger1 =!ctrl && stateno=0
helpertype = normal
name = "AI"
stateno = 30000
ID = 30000
pos = 0,0
keyctrl = 1
pausemovetime = 9999999
supermovetime = 9999999
persistent = 0

[State -3, ガードチェックヘルパー]
Type = Helper
triggerall = var(59) = 1
triggerall = RoundState = 2
trigger1 =!NumHelper(31000+id)
trigger1 =!IsHelper
HelperType = Normal
Name = "Guard"
PosType = left
StateNo = 31000
ID = 31000+id
PauseMoveTime = 0
pos=0,9999
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0
IgnoreHitPause = 1
KeyCtrl = 0
Ownpal = 1

[State -3, 飛び道具確認ヘルパー]
Type = Helper
triggerall = var(59) = 1
trigger1 =!NumHelper(32000)
trigger1 =!ishelper
HelperType = Normal
Name = "TOBIDOUGU"
StateNo = 32000
ID = 32000
Pos = 9999,9999
KeyCtrl = 0
persistent = 0
pausemovetime=2147483647
supermovetime=2147483647

[State -3, 飛び道具確認ヘルパー]
Type = Helper
triggerall = var(59) = 1
trigger1 =!NumHelper(32500)
trigger1 =!ishelper
HelperType = Normal
Name = "TOBIDOUGU ITI A"
StateNo = 32500
ID = 32500
Pos = 9999,9999
KeyCtrl = 0
persistent = 0
pausemovetime=2147483647
supermovetime=2147483647

[State -3, 飛び道具確認ヘルパー]
Type = Helper
triggerall = var(59) = 1
trigger1 =!NumHelper(32501)
trigger1 =!ishelper
HelperType = Normal
Name = "TOBIDOUGU ITI B"
StateNo = 32500
ID = 32501
Pos = 9999,9999
KeyCtrl = 0
persistent = 0
pausemovetime=2147483647
supermovetime=2147483647

[State -3]
Type = Helper
Trigger1 = !numhelper(33000)
HelperType = normal
name = "AI left"
ID = 33000
StateNo = 33000
Postype = p1
Facing = -1
PauseMoveTime = 0
Persistent = 0
IgnorehitPause = 1
KeyCtrl = 0
Ownpal = 1

[State -3]
type = Helper
trigger1 = !numhelper(999)
helpertype = normal
name = "AIhelper"
ID = 999
stateno = 999
pos = 9999,9999
pausemovetime = 2147483647
supermovetime = 2147483647
persistent = 0

[State -3]
Type = Helper
Trigger1 =!NumHelper(20000+ID)
Trigger1 =!IsHelper
HelperType = normal
Name = "Edge of Stage Right"
PosType = P1
StateNo = 20000
ID = 20000+ID
PauseMoveTime = 0
Persistent= 0
IgnorehitPause= 1
KeyCtrl= 0
Ownpal= 1

[State -3]
Type= Helper
Trigger1 =!NumHelper(20001+ID)
Trigger1 =!IsHelper
HelperType = normal
Name = "Edge of Stage Left"
PosType = P1
StateNo = 20001
ID = 20001+ID
PauseMoveTime = 0
Persistent = 0
IgnorehitPause = 1
KeyCtrl = 0
Ownpal = 1

;---------------------------------------------------------------------------
; 設定用ヘルパー
;---------------------------------------------------------------------------
[State -3, Helper]
Type = Helper
Trigger1 = NumHelper(40000) = 0
Name = "Config"
ID = 40000
Pos =  0,-9999
PosType = left
StateNo = 40000
HelperType = Normal
Sprpriority = 1
KeyCtrl = 0
;-------------------------------------------------------------------------------

[State -3]
type = ChangeState
trigger1 = ishelper(999)
trigger1 = stateno!=999
value = 999

[State -3]
Type = ChangeState
Trigger1 = IsHelper
Trigger1 = IsHelper(20000+root,ID)
Trigger1 = StateNo != 20000
Value = 20000

[State -3]
Type = ChangeState
Trigger1 = IsHelper
Trigger1 = IsHelper(20001+root,ID)
Trigger1 = StateNo != 20001
Value = 20001

[State -3, 関係無いステートに行かないように]
Type = ChangeState
Trigger1 = ishelper(30000)
Trigger1 = StateNo != 30000
Value = 30000

[State -3, 関係無いステートに行かないように]
Type = ChangeState
Trigger1 = ishelper
Trigger1 = ishelper(31000+root,id)
Trigger1 = StateNo != 31000
Value = 31000

[State -3, 関係無いステートに行かないように]
Type = SelfState
Trigger1 = ishelper(32000)
Trigger1 = StateNo != 32000
Value = 32000

[State -3, 関係無いステートに行かないように]
Type = SelfState
Trigger1 = ishelper(32500) || ishelper(32501)
Trigger1 = StateNo != 32500
Value = 32500

[State -3]
Type = ChangeState
Trigger1 = ishelper(33000)
Trigger1 = StateNo != 33000
Value = 33000

;---------------------------------------------------------------------------

;;;;;;;AI
[State -3, AI判定]
Type = VarSet
triggerall = !ishelper || isHelper(30000)
triggerall = var(59) != 1
Triggerall = RoundState = [1,2]
Trigger1 = Command = "AI0"
Trigger2 = Command = "AI1"
Trigger3 = Command = "AI2"
Trigger4 = Command = "AI3"
Trigger5 = Command = "AI4"
Trigger6 = Command = "AI5"
Trigger7 = Command = "AI6"
Trigger8 = Command = "AI7"
Trigger9 = Command = "AI8"
Trigger10 = Command = "AI9"
Trigger11 = Command = "AI10"
Trigger12 = Command = "AI11"
Trigger13 = Command = "AI12"
Trigger14 = Command = "AI13"
Trigger15 = Command = "AI14"
Trigger16 = Command = "AI15"
Trigger17 = Command = "AI16"
Trigger18 = Command = "AI17"
Trigger19 = Command = "AI18"
Trigger20 = Command = "AI19"
Trigger21 = Command = "AI20"
Trigger22 = Command = "AI21"
Trigger23 = Command = "AI22"
Trigger24 = Command = "AI23"
Trigger25 = Command = "AI24"
Trigger26 = Command = "AI25"
Trigger27 = Command = "AI26"
Trigger28 = Command = "AI27"
Trigger29 = Command = "AI28"
Trigger30 = Command = "AI29"
Trigger31 = Command = "AI30"
Trigger32 = Command = "AI31"
Trigger33 = Command = "AI32"
Trigger34 = Command = "AI33"
Trigger35 = Command = "AI34"
Trigger36 = Command = "AI35"
Trigger37 = Command = "AI36"
Trigger38 = Command = "AI37"
Trigger39 = Command = "AI38"
Trigger40 = Command = "AI39"
Trigger41 = Command = "AI40"
Trigger42 = Command = "AI41"
Trigger43 = Command = "AI42"
Trigger44 = Command = "AI43"
Trigger45 = Command = "AI44"
Trigger46 = Command = "AI45"
Trigger47 = Command = "AI46"
Trigger48 = Command = "AI47"
Trigger49 = Command = "AI48"
Trigger50 = Command = "AI49"
Trigger51 = Command = "AI50"
trigger52 = NumHelper(30000)
trigger52 = Helper(30000),var(59)
trigger52 = Helper(30000),time > 5
Trigger53 = 1
var(59) = 1

;---------------------------------------------------------------------------
[State -3, AI]
Type = VarSet
TriggerAll = var(59) = 1
Trigger1 = RoundState = 4
Trigger2 = Win = 1
Trigger3 = Lose = 1
Trigger4 = DrawGame = 1
V = 59
Value = -1

[State -3, AI]
Type = VarSet
TriggerAll = var(59) = -1
Trigger1 = RoundState = 2
V = 59
Value = 1

;-----------------------------------------------------------------------------
;タッグ用生死判別
;-----------------------------------------------------------------------------
[State -3, VarSet]
Type = VarSet
Trigger1 = NumEnemy = 1
Trigger2 = NumEnemy = 2
Trigger2 = EnemyNear,Life > 0
var(58) = 0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -3, VarSet]
Type = VarSet
Trigger1 = NumEnemy > 1
Trigger1 = Enemynear,Life = 0
var(58) = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

;-----------------------------------------------------------------------------
; AIレベル管理
;-----------------------------------------------------------------------------
[State -3, リミッター]
Type = VarSet
Trigger1 = var(57) > 8
Trigger2 = Var(56) > 10
var(57) = 0

[State -3, 反応速度制限]
Type = VarSet
Trigger1 = var(56) > var(57) + 2
var(56) = var(57) + 2

[State -3, リミッター]
Type = VarSet
Trigger1 = var(57) != 8
var(57) = 8

[State -3, リミッター]
Type = VarSet
Trigger1 = var(56) != 10
var(56) = 10

;-----------------------------------------------------------------------------
;相手の起き上がりの投げ無敵を調べる
;-----------------------------------------------------------------------------
[State -3, VarSet]
Type = VarSet
Trigger1 = EnemyNear(var(58)),StateType = L
V = 54
Value = -1
IgnoreHitPause = 1

[State -3, VarSet]
Type = VarAdd
TriggerAll = var(54) > 0
Trigger1 = EnemyNear(var(58)),StateType != L
V = 54
Value = -1
IgnoreHitPause = 1

[State -3, VarSet]
Type = VarSet
TriggerAll = var(54) = -1
Trigger1 = EnemyNear(var(58)),StateType != L
V = 54
Value = 12
IgnoreHitPause = 1

;────────────────────────────────────────
; 反応時間制限
;────────────────────────────────────────
[State -3,制限解除条件]
Type = VarSet
Trigger1 = PrevStateNo = [140,160)
Trigger2 = PrevStateNo = [700,720]
Trigger3 = PrevStateNo = 52000
Trigger4 = PrevStateNo = [5000,5270]
var(38) = 2

[State -3,↑解除]
Type = VarAdd
Trigger1 = var(38) > 0
var(38) = -1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
; タッグ用
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[State -3, 敵が１人]
Type = VarSet
Trigger1 = NumEnemy != 2
Trigger2 = !(EnemyNear(0),Alive && EnemyNear(1),Alive)
v = 51
Value = 0

[State -3, 敵が２人かつ前方のみ]
Type = VarSet
TriggerAll = NumEnemy = 2
TriggerAll = EnemyNear(0),Alive
TriggerAll = EnemyNear(1),Alive
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
v = 51
Value = 1

[State -3, 自分、パートナー、敵、敵]
Type = VarSet
TriggerAll = NumEnemy = 2
TriggerAll = NumPartner
TriggerAll = EnemyNear(0),Alive
TriggerAll = EnemyNear(1),Alive
TriggerAll = Partner,Alive
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Partner,Pos X > 0,EnemyNear(0),Pos X - Partner,Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Partner,Pos X > 0,EnemyNear(1),Pos X - Partner,Pos X < 0)
v = 51
Value = 2

[State -3, 自分、敵、パートナー、敵]
Type = VarSet
TriggerAll = NumEnemy = 2
TriggerAll = NumPartner
TriggerAll = EnemyNear(0),Alive
TriggerAll = EnemyNear(1),Alive
TriggerAll = Partner,Alive
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Partner,Pos X < 0,EnemyNear(0),Pos X - Partner,Pos X > 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Partner,Pos X > 0,EnemyNear(1),Pos X - Partner,Pos X < 0)
v = 51
Value = 3

[State -3, 自分、敵、敵、パートナー]
Type = VarSet
TriggerAll = NumEnemy = 2
TriggerAll = NumPartner
TriggerAll = EnemyNear(0),Alive
TriggerAll = EnemyNear(1),Alive
TriggerAll = Partner,Alive
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Partner,Pos X < 0,EnemyNear(0),Pos X - Partner,Pos X > 0)
Trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Partner,Pos X < 0,EnemyNear(1),Pos X - Partner,Pos X > 0)
v = 51
Value = 4

[State -3, 背後に敵有り]
Type = VarSet
TriggerAll = NumEnemy = 2
TriggerAll = EnemyNear(0),Alive
TriggerAll = EnemyNear(1),Alive
Trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X < 0,EnemyNear(0),Pos X - Pos X > 0)
Trigger2 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X < 0,EnemyNear(1),Pos X - Pos X > 0)
v = 51
Value = 5

;---------------------------------------------------------------------------
[State -3, パートナー不在]
Type = VarSet
TriggerAll = TeamMode = Simul
Trigger1 = !NumPartner
Trigger2 = !Partner,Alive
v = 52
Value = 0

[State -3, パートナー後衛]
Type = VarSet
TriggerAll = TeamMode = Simul
TriggerAll = NumPartner
TriggerAll = Partner,Alive
Trigger1 = ifelse(facing = 1,Partner,Pos X - Pos X < 0,Partner,Pos X - Pos X > 0)
v = 52
Value = 1

[State -3, パートナー前衛]
Type = VarSet
TriggerAll = TeamMode = Simul
TriggerAll = NumPartner
TriggerAll = Partner,Alive
Trigger1 = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
v = 52
Value = 2

[State -3, パートナー被ダメージ]
Type = VarSet
TriggerAll = TeamMode = Simul
TriggerAll = NumPartner
TriggerAll = Partner,Alive
TriggerAll = Partner,MoveType = H
TriggerAll = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
Trigger1 = Partner,StateNo = [5000,5100)
Trigger2 = Partner,StateNo = [120,159]
v = 52
Value = 3

[State -3, パートナー攻撃中]
Type = VarSet
TriggerAll = TeamMode = Simul
TriggerAll = NumPartner
TriggerAll = Partner,Alive
TriggerAll = Partner,MoveType = A
TriggerAll = Partner,MoveType != H
TriggerAll = EnemyNear(var(58)),MoveType = H
TriggerAll = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
Trigger1 = EnemyNear(var(58)),StateNo = [5000,5100)
v = 52
Value = 4

[State -3, パートナー被ステート奪取]
Type = VarSet
TriggerAll = TeamMode = Simul
TriggerAll = NumPartner
TriggerAll = Partner,Alive
TriggerAll = Partner,MoveType = H
TriggerAll = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
Trigger1 = Partner,StateNo != [5000,5500]
Trigger1 = Partner,StateNo != [120,159]
v = 52
Value = 5

[State -3, パートナーステート奪取]
Type = VarSet
TriggerAll = TeamMode = Simul
TriggerAll = NumPartner
TriggerAll = Partner,Alive
TriggerAll =(Partner,StateNo = [2000,4999]) || Partner,StateNo > 5500
Trigger1 = EnemyNear(var(58)),MoveType = H
Trigger1 = EnemyNear(var(58)),StateNo != [5000,5500]
Trigger1 = EnemyNear(var(58)),StateNo != [120,159]
v = 52
Value = 6

;==============================================================================
;AIガード切り替え
;==============================================================================
[State -3, 防御する必要がない状況]
Type = VarSet
TriggerAll = !IsHelper
Trigger1 = NumEnemy = 0
Trigger2 = !InGuardDist
var(24) = 0
IgnoreHitPause = 1

[State -3, 立ち]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != 0
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(10)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(11)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(12)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(13)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(14)
var(24) = 2
IgnoreHitPause = 1

[State -3, しゃがみ]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != 0
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(20)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(21)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(22)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(23)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(24)
var(24) = 1
IgnoreHitPause = 1

[State -3, 立ち]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(20)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(21)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(22)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(23)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(24)
Trigger1 = var(57) = [1,4]
Trigger1 = EnemyNear(var(58)),StateType = A
Trigger1 = Random <= ((var(57) * 12.5) * var(56))
Trigger1 = Random <= 250
Trigger2 = var(57) > 4
Trigger2 = EnemyNear(var(58)),StateType = A
Trigger3 = var(57) > 4
Trigger3 = EnemyNear(var(58)),StateType = S
Trigger3 = EnemyNear(var(58)),Time >= 20
Trigger3 =!Enemy,NumProj
Trigger4 = var(57) > 4
Trigger4 = EnemyNear(var(58)),StateType = S
Trigger4 = EnemyNear(var(58)),AnimTime > 0
Trigger4 =!EnemyNear(var(58)),NumProj
var(24) = 2
IgnoreHitPause = 1

[State -3, しゃがみ]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),AnimTime <= 0
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(10)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(11)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(12)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(13)
TriggerAll = EnemyNear(var(58)),StateNo != Helper(31000+ID),var(14)
Trigger1 = var(57) = [1,4]
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = Random <= ((var(57) * 12.5) * var(56))
Trigger1 = Random <= 250
Trigger2 = var(57) > 4
Trigger2 = EnemyNear(var(58)),StateType = C
Trigger3 = var(57) > 4
Trigger3 = EnemyNear(var(58)),StateType = S
Trigger3 = EnemyNear(var(58)),Time < 20
Trigger3 =!EnemyNear(var(58)),NumProj
Trigger4 = var(57) > 4
Trigger4 = EnemyNear(var(58)),StateType = S
Trigger4 = Enemy,NumProj
var(24) = 1
IgnoreHitPause = 1

[State -3, 立ち]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = MoveType != H
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(10)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(11)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(12)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(13)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(14)
var(24) = 2
IgnoreHitPause = 1

[State -3, しゃがみ]
Type = VarSet
TriggerAll = var(59) = 1
TriggerAll =!IsHelper
TriggerAll = NumEnemy
TriggerAll = NumHelper(31000+ID)
TriggerAll = StateType != A
TriggerAll = MoveType != H
Trigger1 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(20)
Trigger2 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(21)
Trigger3 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(22)
Trigger4 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(23)
Trigger5 = EnemyNear(var(58)),StateNo = Helper(31000+ID),var(24)
var(24) = 1
IgnoreHitPause = 1

;------------------------------------------------------------------------------------
[State -3,ステージ前方端までの距離]
Type = VarSet
TriggerAll =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 1
var(41) = floor(Abs(ifelse(facing = 1,Helper(20000+ID),RootDist X,Helper(20001+ID),RootDist X)))

[State -3]
Type = VarSet
TriggerAll =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 2
var(41) = floor(Abs(ifelse(facing = 1,Helper(20001+ID),RootDist X,Helper(20000+ID),RootDist X)))

[State -3,ステージ後方端までの距離]
Type = VarSet
TriggerAll =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 1
var(42) = floor(Abs(ifelse(facing = 1,Helper(20001+ID),RootDist X,Helper(20000+ID),RootDist X)))

[State -3]
Type = VarSet
TriggerAll =(NumHelper(20000+ID) && NumHelper(20001+ID))
Trigger1 = TeamSide = 2
var(42) = floor(Abs(ifelse(facing = 1,Helper(20000+ID),RootDist X,Helper(20001+ID),RootDist X)))

;------------------------------------------------------------------------------------

[State -3 ,movereversed]
type = varset
trigger1 = movereversed
v = 27
value = enemy,prevstateno
ignorehitpause = 1

[State -3 ,movereversed]
type = varset
trigger1 = movereversed
v = 28
value = enemy,stateno
ignorehitpause = 1

[State -3,varset]
Type = varset
trigger1 = NumEnemy = 1
fvar(37) = 0

[State -3,varset]
Type = varset
trigger1 = NumEnemy = 2
trigger1 = EnemyNear(0),Alive
trigger1 = EnemyNear(1),Alive
fvar(37) = IfElse(((Abs(Pos X - EnemyNear(0),Pos X)) < (Abs(Pos X - EnemyNear(1),Pos X))),0,1)
ignorehitpause = 1

[State -3,varset]
Type = varset
trigger1 = NumEnemy = 2
trigger1 = !EnemyNear(0),Alive || !EnemyNear(1),Alive
fvar(37) = IfElse(EnemyNear(0),Alive,0,1)
ignorehitpause = 1

[State -3]
type = Turn
triggerall = p2dist x < 0 && !time && var(59)
trigger1 = stateno = [150,154]

[state -1,]                                  
type = changestate
value = 195
triggerall = Var(59)= 1
triggerall = roundstate = 2
triggerall = enemynear,stateno = 2620
triggerall = enemynear,life > 0
triggerall = enemynear,movetype = H
trigger1 = stateno = 15001 && animtime = 0

[State -1]
Type = ChangeState
value = 58
triggerall = var(59)
TriggerAll = P2BodyDist X <= 70
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = enemynear(var(58)),stateno = 2620
trigger1 = stateno = 195 && animtime = 0
trigger2 = stateno = 99

[State -1]
Type = ChangeState
value = 99
triggerall = var(59)
TriggerAll = P2BodyDist X > 70
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = enemynear(var(58)),stateno = 2620
trigger1 = stateno = 195 && animtime = 0

;-----------------------------------------------------------------------------
;発動〜繋ぎ
;-----------------------------------------------------------------------------
;クイックMAX
[State -3, QM]
type = ChangeState
value = 901
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 300 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-10,40]
triggerall = movehit
trigger1 = stateno = 400
trigger2 = stateno = 430
trigger3 = stateno = 210
trigger4 = stateno = 215 
trigger5 = stateno = 245  
trigger6 = stateno = 320 
Trigger7 = StateNo = 310
Trigger8 = StateNo = 315
trigger9 = stateno = 235
trigger10 = stateno = 410

;-----------------------------------------------------------------------

[State -1, Combo]
type = VarSet
triggerall = !ishelper
trigger1 = 1
var(1) = 0

[State -1, Combo]
type = VarSet
triggerall = !ishelper
trigger1 = stateno = 205 && animelemtime(2) > 0 
trigger2 = stateno = 210 && animelemtime(4) > 0 
trigger3 = stateno = 215 && animelemtime(2) > 0
trigger4 = stateno = 230 && animelemtime(5) > 0 
trigger5 = stateno = 235 && animelemtime(4) > 0
trigger6 = stateno = 245 && animelemtime(3) > 0 
trigger7 = stateno = 400 && animelemtime(2) > 0 
trigger8 = stateno = 410 && animelemtime(3) > 0 
trigger9 = stateno = 430 && animelemtime(2) > 0 
trigger10 = stateno = 440 && animelemtime(5) > 0 
trigger11 = stateno = 320 && AnimElemtime(2) > 0 
var(1) = 1

[State -1, Combo]
type = VarSet
triggerall = !ishelper
trigger1 = stateno = 300 && animelemtime(5) > 0 
trigger2 = stateno = 310 && AnimElemtime(8) > 0 
trigger3 = stateno = 315 && animelemtime(4) > 0 
var(1) = 2

[State -1, Combo]
type = VarSet
triggerall = !ishelper
trigger1 = 1
var(2) = 0

[State -1, MC]
type = VarSet
triggerall = !ishelper
triggerall = var(40) > 0
triggerall = movecontact = [1,8]
trigger1 = (stateno = [200,499])
trigger2 = (stateno = [1000,2999])
trigger2 = stateno != 1630 && stateno != 1631
var(2) = 1

;-----------------------------------------------------------------------

[State -3]
type = ChangeState
value = 195
triggerall = Var(59)
triggerall = statetype != A
triggerall = enemynear(var(58)),stateno = [5100,5150]
triggerall = stateno != 195 && prevstateno != 195
triggerall = RoundState = 3
trigger1 = ctrl

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;飛び道具対策
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;前転(飛び道具対策)
[State -3, FRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),MoveType != H
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = P2bodydist X >= 200 || (enemynear(var(58)),AnimTime <= -35 && !enemynear(var(58)),Ctrl)
trigger1 = (Enemy,NumHelper > 0 && Enemy,NumHelper > Helper(32000),var(1)) || Enemy,Numproj != 0
trigger1 = var(45) = 1

[State -3,ブラックアウト 空キャン]
Type = ChangeState
Value = 700
TriggerAll = var(59)
TriggerAll = var(57) >= 1
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= ((var(57) * 12.5) * var(56))
TriggerAll = StateType != A
TriggerAll = life <= 400
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = ((stateno = [200,300]) || (stateno = [400,499])) && Movetype != H
trigger1 = Enemy,stateno = var(27)
trigger1 = stateno != [700,710]
trigger2 = Enemy,stateno = var(28)
trigger2 = stateno != [700,710]
Ignorehitpause = 1

[State -3,ブラックアウト 空キャン]
Type = ChangeState
Value = 700
TriggerAll = var(59)
TriggerAll = var(57) >= 1
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= ((var(57) * 12.5) * var(56))
TriggerAll = life > 400
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType != H
triggerall = EnemyNear(var(58)),Time <= 1
TriggerAll = ((stateno = [200,300]) || (stateno = [400,499])) && Movetype != H
trigger1 = Enemy,stateno = var(27)
trigger1 = stateno != [700,710]
trigger2 = Enemy,stateno = var(28)
trigger2 = stateno != [700,710]
Ignorehitpause = 1

;---------------------------------------------------------------------------------

[State -3,ブラックアウト 空キャン]
Type = ChangeState
Value = 700
TriggerAll = var(59)
TriggerAll = var(57) >= 1
TriggerAll =!var(51) || var(51) = 5 || EnemyNear(var(58)),MoveType = A
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = StateType != A
TriggerAll = FrontEdgeBodyDist >= 80 || var(51) = 5 || P2Dist X < 0
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(56) > 9
TriggerAll = EnemyNear(var(58)),facing != facing || P2Dist X < 0
TriggerAll = Random < EnemyNear(var(58)),Time*50 || var(56) > 9
Trigger1 = Var(1) = 1
ignorehitpause = 1

[State -3,ブラックアウト 空キャン]
Type = ChangeState
Value = 700
TriggerAll = var(59)
TriggerAll = var(57) >= 7
TriggerAll =!var(51) || var(51) = 5 || EnemyNear(var(58)),MoveType = A
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = StateType != A
TriggerAll = FrontEdgeBodyDist >= 80 || P2Dist X < 0
TriggerAll = Abs(EnemyNear(var(58)),Pos X - Pos X) < 50
TriggerAll = EnemyNear(var(58)),Vel X >= 0
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),StateNo != 5120
TriggerAll = EnemyNear(var(58)),facing != facing || P2Dist X < 0
Trigger1 = Var(1) = 1
ignorehitpause = 1

[State -3,ブラックアウト 空キャン]
Type = ChangeState
Value = 1110
TriggerAll = var(59)
TriggerAll = var(57) >= 1
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),Ctrl = 0
TriggerAll = EnemyNear(var(58)),Vel X >= 0
TriggerAll = EnemyNear(var(58)),AnimTime <= -6
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateType != L
triggerall = P2BodyDist X = [-10+floor(6*(EnemyNear(var(58)),vel X)),40+floor(6*(EnemyNear(var(58)),vel X))]
triggerall = P2BodyDist Y = [-50-floor(6*(EnemyNear(var(58)),vel Y)+(6*(6+1)/2)*fvar(20)),0-floor(6*(EnemyNear(var(58)),vel Y)+(6*(6+1)/2)*fvar(20))]
Trigger1 = (Var(1) = [1,2]) && !MoveContact && MoveType != H
ignorehitpause = 1

[State -1]
type = ChangeState
value = 15000
trigger1 = var(59) = 1
TriggerAll = palno = [7,12]
triggerall = statetype != A
triggerall = P2statetype != L
TriggerAll = Random <= var(57) * 125
triggerall = EnemyNear(var(58)),movetype = A 
triggerall = EnemyNear(var(58)),StateNo != 5201
triggerall = EnemyNear(var(58)),StateNo != 52000
triggerall = ctrl || (stateno = [20,22]) || (stateno = [99,101]) || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H 
trigger1 = stateno = [0,999]
trigger2 = stateno = 52000 
trigger3 = stateno = 5201

[State -3]
type = ChangeState
value = 15000
triggerall = var(59)
triggerall = Roundstate = 2
triggerall = P2Movetype = A
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149]) || (var(1) = [1,2]) && !MoveContact && MoveType != H 
triggerall = statetype != A
triggerall = p2statetype != A
triggerall = P2statetype != L
triggerall = p2bodydist x = [-10,25]
triggerall = p2stateno != [31,50]
trigger1 = EnemyNear(floor(fvar(37))),facing != facing
trigger1 = EnemyNear(floor(fvar(37))),time
trigger1 = EnemyNear(floor(fvar(37))),Ctrl = 0
trigger1 = EnemyNear(floor(fvar(37))),HitDefAttr = SCA,AA,AP,AT

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;隙突き
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 215
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 720
triggerall = statetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno >= 200
triggerall = enemynear(var(58)),animtime <= -3
triggerall = enemy,numproj = 0
triggerall =!InGuardDist || enemynear(var(58)),facing = facing || (prevstateno = [130,155]) || (prevstateno = [700,720]) || var(38)
triggerall = p2bodydist X < 24
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = p2bodydist x = [-5,24]

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 215
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 700
triggerall = statetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = A
triggerall = enemynear(var(58)),stateno >= 200
triggerall = enemynear(var(58)),animtime <= -3
triggerall = enemy,numproj = 0
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist || (prevstateno = [130,155]) || (prevstateno = [700,720]) || var(38)
triggerall = p2bodydist X < 24
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = P2BodyDist X = [0+floor(5*(EnemyNear(var(58)),vel X)),24+floor(5*(EnemyNear(var(58)),vel X))]

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 660
triggerall = statetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno >= 200
triggerall = enemynear(var(58)),animtime <= -3
triggerall = enemy,numproj = 0
triggerall =!InGuardDist || (prevstateno = [130,155]) || (prevstateno = [700,720]) || var(38)
triggerall = p2bodydist X < 30
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = p2bodydist x = [-20,30]

[State -3,AttackDist]
Type = ChangeState
Value = 710
TriggerAll = var(59)
TriggerAll = BackEdgeBodyDist >= 20
TriggerAll = RoundState = 2
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = P2BodyDist X <= 25 && EnemyNear(var(58)),AnimTime > -5 || P2BodyDist X > 25
TriggerAll = EnemyNear(var(58)),StateNo = [200,699]
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(var(58)),Time <= 5
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!InGuardDist
TriggerAll = Ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (stateno = [120,149])
Trigger1 = P2BodyDist X <= 45 && EnemyNear(var(58)),AnimTime >= -5
Trigger2 = P2BodyDist X <= 55 && EnemyNear(var(58)),AnimTime >= -16 || P2BodyDist X <= 65 && EnemyNear(var(58)),AnimTime >= -17
Trigger3 = P2BodyDist X <= 75 && EnemyNear(var(58)),AnimTime >= -18 || P2BodyDist X <= 85 && EnemyNear(var(58)),AnimTime >= -19
Trigger4 = P2BodyDist X <= 95 && EnemyNear(var(58)),AnimTime >= -20

[State -3, BB]
Type = ChangeState
Value = ifelse(frontedgedist <= 50,710,700)
TriggerAll = var(59)
TriggerAll = var(57) >= 3
TriggerAll = roundstate = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = StateNo = 5120 && AnimTime = [-3,0]
TriggerAll = Abs(EnemyNear(var(58)),Pos X - Pos X) = [0,80]
Trigger1 = Random <= var(56)*100

[State -3]
Type = ChangeState
Value = 410
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime < -7
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(38) || var(56) > 9
TriggerAll =!InGuardDist
TriggerAll = Ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
Trigger1 = P2BodyDist X = [-5,10]

[State -3]
Type = ChangeState
Value = 235
TriggerAll = var(59) = 1
triggerall = var(57) >= 1
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = P2BodyDist X <= 25
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime <= -4
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(38) || var(56) > 9
TriggerAll =!InGuardDist
Trigger1 = Ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])

[State -3, Crouching Light Punch]
type = ChangeState
value = ifelse(Random <= 400,400,430)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
triggerall = P2BodyDist X = [-20+floor(5*(EnemyNear(var(58)),vel X)),30+floor(5*(EnemyNear(var(58)),vel X))]
triggerall = P2BodyDist Y = [-10-floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20)),0-floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20))]
triggerall = P2statetype != L
triggerall = P2movetype != H
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*90

[State -3, Crouching Light Kick]
type = ChangeState
value = ifelse(Random <= 400,215,400)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
triggerall = P2BodyDist X = [-5+floor(5*(EnemyNear(var(58)),vel X)),15+floor(5*(EnemyNear(var(58)),vel X))]
triggerall = P2BodyDist Y >= 0--floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20))
triggerall = P2statetype != L
triggerall = P2movetype != H
triggerall = P2statetype != C
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*90

[State -3, Crouching Light Kick]
type = ChangeState
value = 58
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = fvar(31)
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149]) || stateno = 52
triggerall = P2BodyDist Y >= 0
triggerall = enemynear(var(58)),stateno != [120,159]
triggerall = P2statetype != L
triggerall = P2movetype = H
triggerall = P2statetype != A
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*100

[State -3, Crouching Light Kick]
type = ChangeState
value = ifelse(Random <= 500,235,430)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(40) = 0
triggerall = !fvar(31)
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149]) || stateno = 52 
triggerall = P2BodyDist X = [-15,25]
triggerall = P2BodyDist Y >= 0
triggerall = enemynear(var(58)),stateno != [120,159]
triggerall = P2statetype != L
triggerall = P2movetype = H
triggerall = P2statetype != A
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*100

[State -3, Crouching Light Kick]
type = ChangeState
value = 215
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = !fvar(31)
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [99,101]) || (StateNo = [120,149]) || stateno = 52 
triggerall = P2BodyDist X = [-15,25]
triggerall = P2BodyDist Y >= 0
triggerall = enemynear(var(58)),stateno != [120,159]
triggerall = P2statetype != L
triggerall = P2movetype = H
triggerall = P2statetype != A
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*100

[State -3, Crouching Light Kick]
type = ChangeState
value = ifelse(Random <= 400,430,400)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = !fvar(31)
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [99,101]) || (StateNo = [120,149]) || stateno = 52 
triggerall = P2BodyDist X = [-10,25]
triggerall = P2BodyDist Y >= 0
triggerall = enemynear(var(58)),stateno = [120,159]
triggerall = P2statetype != L
triggerall = P2movetype = H
triggerall = P2statetype != A
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*100

[State -3, Crouching Light Kick]
type = ChangeState
value = ifelse(Random <= 400,215,400)
triggerall = var(59)
triggerall = var(57) >= 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = P2StateType != L
triggerall = P2StateType != A
triggerall = P2BodyDist X = [-10,20]
triggerall = P2BodyDist Y >= 0
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
TriggerAll = EnemyNear(var(58)),AnimTime <= -3
Triggerall = (PrevStateNo=[5000,5270]) || (PrevStateNo=[120,159]) || prevstateno = 700 || prevstateno = 52000
triggerall = EnemyNear(var(58)),ctrl = 0
Trigger1 = Random<= var(56)*100

[State -3, Standing Strong Kick]
type = ChangeState
value = ifelse(Random <= 400,400,430)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
triggerall = P2BodyDist X = [-20+floor(8*(EnemyNear(var(58)),vel X)),40+floor(8*(EnemyNear(var(58)),vel X))]
triggerall = P2BodyDist Y = [-40-floor(8*(EnemyNear(var(58)),vel Y)+(8*(8+1)/2)*fvar(20)),0-floor(8*(EnemyNear(var(58)),vel Y)+(8*(8+1)/2)*fvar(20))]
triggerall = P2statetype != L
triggerall = P2movetype != H
triggerall = !InGuardDist
Trigger1 = Random <= var(56)*70

[State -3, Stand Strong Punch]
type = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = statetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno >= 200
triggerall = enemynear(var(58)),animtime <= -3
triggerall = enemy,numproj = 0
triggerall =!InGuardDist || enemynear(var(58)),facing = facing || (prevstateno = [130,155]) || (prevstateno = [700,720]) || prevstateno = 52000
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-10,25]

[State -3]
Type = ChangeState
Value = 400
TriggerAll = var(59) = 1
triggerall = var(57) >= 1
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime <= -3
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(38) || var(56) > 9
TriggerAll =!InGuardDist
TriggerAll = Ctrl || (stateno = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
Trigger1 = P2BodyDist X = [-10,30]

[State -3, Stand Strong Punch]
type = ChangeState
value = ifelse(Random <= 400,205,215)
triggerall = var(59) = 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = P2StateType != L
triggerall = P2BodyDist X = [-15,20]
triggerall = P2BodyDist Y = [-40,0]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (StateNo = [120,149])
TriggerAll = EnemyNear(var(58)),AnimTime <= -3
Triggerall = (PrevStateNo=[5000,5270]) || (PrevStateNo=[120,159]) || prevstateno = 700 || prevstateno = 52000
triggerall = EnemyNear(var(58)),ctrl = 0
Trigger1 = Random<= var(57)*125

;ダッシュ(隙突き)
[State -3, Dash]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 3
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= ((var(57) * 12.5) * var(56))
TriggerAll = StateType != A
TriggerAll = P2Dist X > 0
TriggerAll =!InGuardDist
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [120,149]) 
Trigger1 = P2bodyDist x > 120 || EnemyNear(var(58)),facing = facing
Trigger1 = EnemyNear(var(58)),StateType = A
Trigger1 = EnemyNear(var(58)),MoveType = A
Trigger1 =!EnemyNear(var(58)),HitDefAttr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
Trigger1 = EnemyNear(var(58)),Time >= 60
Trigger2 = EnemyNear(var(58)),MoveType != H
Trigger2 = EnemyNear(var(58)),StateType = A
Trigger2 = P2bodyDist x >= 40
Trigger2 =!EnemyNear(var(58)),Ctrl
Trigger2 = EnemyNear(var(58)),facing = facing
Trigger3 = EnemyNear(var(58)),MoveType != H
Trigger3 = EnemyNear(var(58)),StateType != A
Trigger3 =!EnemyNear(var(58)),Ctrl
Trigger3 = EnemyNear(var(58)),facing = facing
Trigger3 = EnemyNear(var(58)),HitDefAttr = SC, NA, SA, HA

[State -3, S ONIYAKI]
type = ChangeState
value = 1110
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = !var(50)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = EnemyNear(var(58)),StateNo != [120,159]
triggerall = enemynear(var(58)),stateno != [5040,5049]
triggerall = enemynear(var(58)),stateno != [5100,5299]
triggerall = p2bodydist x = [-30,45]
triggerall = p2bodydist y = [-160-floor(15*(enemynear(var(58)),vel y)+(15*(15+1)/2)*fvar(20)),-25-floor(6*(enemynear(var(58)),vel y)+(6*(6+1)/2)*fvar(20))]
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])

[State -3, FRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),StateNo >= 200
triggerall =!enemynear(var(58)),HitDefAttr = SCA, AT
triggerall = enemynear(var(58)),facing != facing
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-10,150]
trigger1 = enemynear(var(58)),animtime <= -34

[State -3]
Type  = ChangeState
Value  = 700
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SC, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime <= -34
TriggerAll = InGuardDist
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])  
Trigger1 = Enemy,Numproj
Trigger1 = P2BodyDist X = [30,110]
Trigger2 = P2BodyDist X = [30,70]

[State -3]
Type  = ChangeState
Value  = 700
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),Vel X >= 0
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SC, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime <= -34
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(56) > 9
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!EnemyNear(var(58)),Ctrl
TriggerAll = InGuardDist
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])  
Trigger1 = P2BodyDist X = [30,70]
Trigger2 = P2BodyDist X = [30,110]
Trigger2 = Enemy,Numproj

[State -3]
type = ChangeState
value = 6200
triggerall = var(59) = 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2
TriggerAll = power >= 2000 || power >= 1000 && var(40) > 0
triggerall = P2StateType != L
triggerall = P2bodydist X > 0
triggerall = p2statetype != A
triggerall = EnemyNear(floor(fvar(37))),life > 200
TriggerAll = EnemyNear(floor(fvar(37))),Prevstateno != [120,159]
TriggerAll = EnemyNear(floor(fvar(37))),MoveType = A
triggerall = EnemyNear(floor(fvar(37))),ctrl = 0
Trigger1 = Stateno = 200 && Animelem = 2,> 1
Trigger2 = Stateno = 210 && Animelem = 4,> 1
Trigger3 = Stateno = 215 && Animelem = 2,> 1
Trigger4 = Stateno = 245 && Animelem = 3,> 1
Trigger5 = Stateno = 300 && Animelem = 5,> 1
Trigger6 = Stateno = 305 && Animelem = 5,> 1
Trigger7 = Stateno = 400 && Animelem = 2,> 1
Trigger8 = Stateno = 430 && Animelem = 2,> 1
Trigger9 = Stateno = 410 && Animelem = 3,> 1
Trigger10 = Stateno = 440 && Animelem = 5,> 1

[State -3]
type = ChangeState
value = 3200
triggerall = var(59) = 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2
TriggerAll = power >= 1000 && power <= 1999 || var(40) > 0
triggerall = P2StateType != L
triggerall = P2bodydist X = [-40,60]
triggerall = P2bodydist y = [-50,10]
triggerall = p2statetype != A
triggerall = EnemyNear(floor(fvar(37))),life > 200
TriggerAll = EnemyNear(floor(fvar(37))),Prevstateno != [120,159]
TriggerAll = EnemyNear(floor(fvar(37))),MoveType = A
triggerall = EnemyNear(floor(fvar(37))),ctrl = 0
Trigger1 = Stateno = 200 && Animelem = 2,> 1
Trigger2 = Stateno = 210 && Animelem = 4,> 1
Trigger3 = Stateno = 215 && Animelem = 2,> 1
Trigger4 = Stateno = 245 && Animelem = 3,> 1
Trigger5 = Stateno = 300 && Animelem = 5,> 1
Trigger6 = Stateno = 305 && Animelem = 5,> 1
Trigger7 = Stateno = 400 && Animelem = 2,> 1
Trigger8 = Stateno = 430 && Animelem = 2,> 1
Trigger9 = Stateno = 410 && Animelem = 3,> 1
Trigger10 = Stateno = 440 && Animelem = 5,> 1

[State -3]
Type = ChangeState
Value = 3200
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 4
TriggerAll = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= var(56) * 100 || var(56) > 9
TriggerAll = power >= 1000 || var(40) > 0
TriggerAll = StateType != A
TriggerAll = P2BodyDist X = [0,50]
TriggerAll = EnemyNear(var(58)),AnimTime < -1
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(38) || var(56) > 9
TriggerAll = EnemyNear(var(58)),Time >= 50-var(56)*5 || var(38)
TriggerAll = Ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = EnemyNear(var(58)),MoveType = A && EnemyNear(var(58)),StateNo >= 200
Trigger2 = Enemy,HitDefAttr = SC,AT || EnemyNear(var(58)),HitDefAttr = SC,AT
Trigger2 = Enemy,Vel X > 0 || EnemyNear(var(58)),Vel X > 0

[State -3, L ONI]
Type = ChangeState
Value = 3450
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= 600 || var(57) >= 9
TriggerAll = StateType != A
triggerall = power >= 1000 || var(40) > 0
TriggerAll = EnemyNear(var(58)),StateType = A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType != H
;TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo != [5020,5040]
TriggerAll = EnemyNear(var(58)),Facing != Facing
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149]) || (var(1) = [1,2]) && !MoveContact && MoveType != H 
Trigger1 = P2BodyDist X = [15+floor(7*(EnemyNear(var(58)),Vel X)),70+floor(7*(EnemyNear(var(58)),Vel X))]
Trigger1 = P2BodyDist Y = [-70-floor(7*(EnemyNear(var(58)),Vel Y)+(7*(7+1)/2)*fvar(20)),0-floor(7*(EnemyNear(var(58)),Vel Y)+(7*(7+1)/2)*fvar(20))]

[State -3, S ONIYAKI]
type = ChangeState
value = 205
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || var(38) || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing != facing
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = p2bodydist x = [-5,20]
trigger1 = enemynear(var(58)),animtime <= -3

[State -3, S ONIYAKI]
type = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || var(38) || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing = facing
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = p2bodydist x = [-5,25]
trigger1 = enemynear(var(58)),animtime <= -3

[State -3, S ONIYAKI]
type = ChangeState
value = 215
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || var(38) || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing = facing
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = p2bodydist x = [-5,24]
trigger1 = p2bodydist y = [-45-floor(5*(enemynear(var(58)),vel y)+(5*(5+1)/2)*fvar(20)),0-floor(5*(enemynear(var(58)),vel y)+(5*(5+1)/2)*fvar(20))]
trigger1 = enemynear(var(58)),animtime <= -15

[State -3]
Type = ChangeState
Value = 400
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= var(57) * 125
TriggerAll = StateType != A
TriggerAll =!EnemyNear(var(58)),Ctrl
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime >= -3
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(38) || var(56) > 9
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149]) 
Trigger1 = P2BodyDist X = [-10+floor(3*(enemynear(var(58)),vel x)),30+floor(3*(enemynear(var(58)),vel x))]

[State -3, BRoll]
type = ChangeState
value = 710
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),Vel X <= 0
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),MoveType = A
triggerall =!enemynear(var(58)),HitDefAttr = SCA, NT, ST, HT
triggerall = enemynear(var(58)),facing != facing
triggerall = p2bodydist x <= 25 && enemynear(var(58)),AnimTime > -5 || p2bodydist x > 25
triggerall = BackEdgeBodyDist >= 20
triggerall = InGuardDist
triggerall =!enemy,numproj
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = p2bodydist x <= 45 && enemynear(var(58)),AnimTime >= -5
trigger2 = p2bodydist x <= 55 && enemynear(var(58)),AnimTime >= -16
trigger3 = p2bodydist x <= 65 && enemynear(var(58)),AnimTime >= -17
trigger4 = p2bodydist x <= 75 && enemynear(var(58)),AnimTime >= -18
trigger5 = p2bodydist x <= 85 && enemynear(var(58)),AnimTime >= -19
trigger6 = p2bodydist x <= 95 && enemynear(var(58)),AnimTime >= -20

[State -3]
type = ChangeState
value = 34
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 250
triggerall = StateType != A
triggerall =!Enemy,NumProj
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-20,100]
trigger1 = enemynear(var(58)),statetype != A
trigger1 = enemynear(var(58)),HitDefAttr = SC, NT, ST, HT

;受身
[State -3, UKEMI]
Type = ChangeState
Value = 5200
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 3
TriggerAll = RoundState = 2
TriggerAll = Random <= ((var(57) * 12.5) * var(56))
TriggerAll = Random <= 1000
TriggerAll = alive = 1
Trigger1 = StateNo = 5050 || StateNo = 5071
Trigger1 = Anim != 5052 && Anim != 5062
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= -20

[State -3,受身]
Type = ChangeState
Value = 52000
TriggerAll = var(59)
TriggerAll = RoundState = 2
TriggerAll = Alive
TriggerAll = CanRecover || EnemyNear(var(58)),MoveType = A
TriggerAll = StateNo = 5050
TriggerAll = pos y > -30
TriggerAll = vel y > 0 && vel y < 9
Trigger1 = Random < 500
Trigger2 = EnemyNear(var(58)),MoveType = A
Trigger2 = EnemyNear(var(58)),Time < 15

[State -3,ダウン回避]
Type = ChangeState
Value = 52000
TriggerAll = var(59)
TriggerAll = RoundState = 3
TriggerAll = Alive
TriggerAll = Vel Y > 0 && Vel Y < 9
TriggerAll = Pos Y > -30
Trigger1 = StateNo = 5050

[State -3, GCFRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2
triggerall = power >= 1000
triggerall = Random <= var(57) * 125
triggerall = StateType != A
triggerall = (stateno = 150 || stateno = 152) && HitShakeOver
trigger1 = p2bodydist x = [0,50]
trigger1 = enemynear(var(58)),StateNo >= 200
trigger1 = enemynear(var(58)),statetype != A
trigger1 = enemynear(var(58)),MoveType = A
trigger1 = enemynear(var(58)),AnimTime <= -30

[State -3, T S]
type = ChangeState
value = 700
triggerall = var(59)
triggerall = roundstate = 2
triggerall = stateno = [150,152]
triggerall = power >= 1000
triggerall = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType != L
triggerall = EnemyNear(var(58)),Animtime <= -40
triggerall = EnemyNear(var(58)),BackEdgeBodyDist >= 40
triggerall = BackEdgeBodyDist <= 16
triggerall = P2BodyDist X = [0,120]
Trigger1 = Random <= var(57)*125

[State -3]
Type = ChangeState
Value = 300
TriggerAll = RoundState = 2 && p2bodydist x <= 50
TriggerAll = var(59) = 1
TriggerAll = var(57) > 1
TriggerAll = power >= 1000
TriggerAll = Statetype != A
TriggerAll = p2movetype = A
TriggerAll = enemynear(fvar(37)),animtime < -2
TriggerAll = BackEdgeBodyDist < 20
Trigger1 = stateno = [150,152]

;ふっとばし
[State -3, CD]
Type = ChangeState
Value = 300
TriggerAll = var(59) = 1
TriggerAll =(var(57) = [1,6]) && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= 50
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateNo != 5700 && EnemyNear(var(58)),StateNo != [5710,5715]
TriggerAll =!InGuardDist && EnemyNear(var(58)),Facing != Facing
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
Trigger1 = P2BodyDist X = [50,75]

[State AI]
type = ChangeState
value = 305
triggerall = var(59) = 1
triggerall = roundstate = 2
triggerall = p2bodydist x = [0,70]
trigger1 = (stateno = 150 || stateno = 151) && power >= 1000
trigger1 = random <= 100

[State -3,ONIYAKI]
type = ChangeState
value = 1110
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(52) = 4
triggerall = var(42) < 5
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= (200 + (var(57) * 100))
triggerall = statetype != A
triggerall = EnemyNear(var(58)),MoveType = H
triggerall = EnemyNear(var(58)),StateType = A
triggerall = EnemyNear(var(58)),StateNo != [120,159]
triggerall = EnemyNear(var(58)),StateNo != [5100,5299]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-5,50]
trigger1 = p2bodydist y = [-50-floor(5*(enemynear(var(58)),vel y)+(5*(5+1)/2)*fvar(20)),0-floor(5*(enemynear(var(58)),vel y)+(5*(5+1)/2)*fvar(20))]

[State -3, S ONI]
type = ChangeState
value = 1100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(52) = 4
triggerall = var(42) < 5
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= (200 + (var(57) * 100))
triggerall = statetype != A
triggerall = EnemyNear(var(58)),MoveType = H
triggerall = EnemyNear(var(58)),StateType = A
triggerall = EnemyNear(var(58)),StateNo != [120,159]
triggerall = EnemyNear(var(58)),StateNo != [5100,5299]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-5,50]
trigger1 = p2bodydist y = [-50-floor(5*(enemynear(var(58)),vel y)+(5*(5+1)/2)*fvar(20)),0-floor(5*(enemynear(var(58)),vel y)+(5*(5+1)/2)*fvar(20))]

[State -3, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(52) = 4
triggerall = var(42) < 5
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= (200 + (var(57) * 100))
triggerall = statetype != A
triggerall = EnemyNear(var(58)),MoveType = H
triggerall = EnemyNear(var(58)),StateType = A
triggerall = EnemyNear(var(58)),StateNo != [120,159]
triggerall = EnemyNear(var(58)),StateNo != [5100,5299]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-5,50]
trigger1 = p2bodydist y = [-80-floor(8*(enemynear(var(58)),vel y)+(8*(8+1)/2)*fvar(20)),0-floor(8*(enemynear(var(58)),vel y)+(8*(8+1)/2)*fvar(20))]

[State -3]
type = ChangeState
value = 700
TriggerAll = var(59) = 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2
TriggerAll = P2StateType != L
TriggerAll = P2bodydist X = [-5,120]
TriggerAll = P2bodydist y = [-50,10]
TriggerAll = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3) || stateno = 99
TriggerAll = P2MoveType = A
TriggerAll = EnemyNear(floor(fvar(37))),NumProj <= 1
TriggerAll = EnemyNear(floor(fvar(37))),HitDefAttr = SCA,AA,AP
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -35
TriggerAll = EnemyNear(floor(fvar(37))),Ctrl = 0
Trigger1 = EnemyNear(floor(fvar(37))),stateno < 2000

[State -3]
type = ChangeState
value = 700
TriggerAll = var(59) = 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2
TriggerAll = P2StateType != L
TriggerAll = P2bodydist X = [-5,120]
TriggerAll = P2bodydist y = [-30,0]
TriggerAll = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3) || stateno = 99
TriggerAll = P2MoveType = A
TriggerAll = EnemyNear(floor(fvar(37))),NumProj <= 1
TriggerAll = EnemyNear(floor(fvar(37))),HitDefAttr = SCA,AA,AP
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -35
TriggerAll = EnemyNear(floor(fvar(37))),Ctrl = 0
Trigger1 = EnemyNear(floor(fvar(37))),Time >= 0
Trigger2 = (PrevStateNo=[5000,5270]) && EnemyNear(floor(fvar(37))),Time >= 0
Trigger3 = (PrevStateNo=[120,159]) && EnemyNear(floor(fvar(37))),Time >= 0

[State -3]
Type = ChangeState
Value = 700
TriggerAll = var(59) = 1
TriggerAll = EnemyNear(fvar(37)),Vel X >= 0
TriggerAll = StateType != A
TriggerAll = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3) || stateno = 99
TriggerAll = P2BodyDist X > 180 || (EnemyNear(fvar(37)),AnimTime <= -35 && !EnemyNear(fvar(37)),Ctrl)
TriggerAll = EnemyNear(floor(fvar(37))),HitDefAttr = SCA,AA || EnemyNear(fvar(37)),NumProj <= 1
TriggerAll = InGuardDist
TriggerAll = EnemyNear(fvar(37)),Time >= 30 || !EnemyNear(fvar(37)),Ctrl
Trigger1 = EnemyNear(floor(fvar(37))),Time >= 0
Trigger2 = (PrevStateNo=[5000,5270]) && EnemyNear(floor(fvar(37))),Time >= 0
Trigger3 = (PrevStateNo=[120,159]) && EnemyNear(floor(fvar(37))),Time >= 0

[State -3]
Type = ChangeState
Value = 700
TriggerAll = var(59) = 1
TriggerAll = EnemyNear(fvar(37)),Vel X = 0
TriggerAll = StateType != A && power >= 1000
TriggerAll = stateno = [150,151]
TriggerAll = InGuardDist && EnemyNear(floor(fvar(37))),AnimTime <= -30
Trigger1 = P2BodyDist X < 100 && !EnemyNear(fvar(37)),Ctrl && EnemyNear(fvar(37)),Statetype != A

;---------------------------------------------------------------------------
;対空
;---------------------------------------------------------------------------
;強百式・鬼焼き
[State -1, S ONIYAKI]
type = ChangeState
value = 1110
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = StateType != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [ifelse(backedgebodydist<=10,-10,0+floor(6*(enemynear(var(58)),vel x))),50+floor(6*(enemynear(var(58)),vel x))]
trigger1 = p2bodydist y = [-54-floor(6*(enemynear(var(58)),vel y)+(6*(6+1)/2)*fvar(20)),0-floor(6*(enemynear(var(58)),vel y)+(6*(6+1)/2)*fvar(20))]

;近距離立ち強パンチ
[State -1, Stand Strong Punch]
type = ChangeState
value = 245
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = StateType != A
triggerall = enemynear(var(58)),StateType = A
Triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist
triggerall = p2bodydist X < 30
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [0+floor(6*(enemynear(var(58)),vel x)),39+floor(6*(enemynear(var(58)),vel x))]
trigger1 = p2bodydist y = [-80-floor(6*(enemynear(var(58)),vel y)+(6*(6+1)/2)*fvar(20)),0-floor(6*(enemynear(var(58)),vel y)+(6*(6+1)/2)*fvar(20))]

;しゃがみ強パンチ
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),StateType = A
Triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-10+floor(8*(enemynear(var(58)),vel x)),23+floor(8*(enemynear(var(58)),vel x))]
trigger1 = p2bodydist y = [-100-floor(8*(enemynear(var(58)),vel y)+(8*(8+1)/2)*fvar(20)),0-floor(8*(enemynear(var(58)),vel y)+(8*(8+1)/2)*fvar(20))]

;遠距離立ち弱パンチ
[State -1, Stand Light Punch]
type = ChangeState
value = 200
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),StateType = A
Triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist
triggerall = p2bodydist x <= 18
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-18,12]
trigger1 = abs(enemynear(var(58)),Pos Y - Pos Y) = [0,40]

[State -1, 後小ジャンプ 空対空]
Type = ChangeState
Value = 33
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = StateType != A
triggerall =!Enemy,NumProj
triggerall = enemynear(var(58)),Vel X > 0
triggerall = enemynear(var(58)),Vel Y < 0
triggerall = enemynear(var(58)),MoveType != H
triggerall = enemynear(var(58)),StateType = A
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist
triggerall = BackEdgeBodyDist > 40
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [100,160]
trigger1 = enemynear(var(58)),Vel X <= 4
trigger2 = p2bodydist x = [140,180]
trigger2 = enemynear(var(58)),Vel X <= 6

[State -1, 後中ジャンプ 空対空]
Type = ChangeState
Value = 35
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = StateType != A
triggerall =!Enemy,NumProj
triggerall = enemynear(var(58)),Vel X > 0
triggerall = enemynear(var(58)),Vel Y < 0
triggerall = enemynear(var(58)),MoveType != H
triggerall = enemynear(var(58)),StateType = A
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist
triggerall = BackEdgeBodyDist > 40
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [60,120]
trigger1 = enemynear(var(58)),Vel X <= 4
trigger2 = p2bodydist x = [100,160]
trigger2 = enemynear(var(58)),Vel X <= 6

;---------------------------------------------------------------------------
;下段
;---------------------------------------------------------------------------
;近距離立ち弱キック
[State -3, Stand Light Kick]
type = ChangeState
value = 235
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = I || ((enemynear(var(58)),stateno = [120,159]) && random <= 250)
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = p2bodydist X < 20
triggerall = p2bodydist x = [-5,30]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = random <= 200 && ifelse(enemynear(var(58)),statetype = S,1,random <= 250)

;しゃがみ弱キック
[State -3, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = I || ((enemynear(var(58)),stateno = [120,159]) && random <= 250)
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = p2bodydist x = [-5,40]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = random <= 200 && ifelse(enemynear(var(58)),statetype = S,1,random <= 250)

;しゃがみ強キック
[State -3, Crouching Strong Kick]
type = ChangeState
value = 440
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = I || ((enemynear(var(58)),stateno = [120,159]) && random <= 250)
triggerall =!InGuardDist
triggerall = p2bodydist x = [-15,20]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = random <= 50 && ifelse(enemynear(var(58)),statetype = S,1,random <= 250)

;---------------------------------------------------------------------------
;中段
;---------------------------------------------------------------------------
;外式・轟斧　陽
[State -3, GOUHU]
type = ChangeState
value = 310
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = ifelse(power >= 2000,1,Random <= 400)
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = I || ((enemynear(var(58)),stateno = [120,159]) && random <= 250)
triggerall =!InGuardDist
triggerall = p2bodydist x = [-5,17]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = random <= 150 && ifelse(enemynear(var(58)),statetype = C,1,random <= 250)
trigger2 = TeamMode = simul
trigger2 = numpartner
trigger2 = partner,alive
trigger2 = partner,movetype = A
trigger2 = random <= 200 && ifelse(enemynear(var(58)),statetype = C,1,random <= 250)

[State -1, 前小ジャンプ(中段)]
type = ChangeState
value = 32
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = StateType != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = I || ((enemynear(var(58)),stateno = [120,159]) && random <= 250)
triggerall =!InGuardDist
triggerall = p2bodydist x = [-10,60]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = random <= 150 && ifelse(enemynear(var(58)),statetype = C,1,random <= 250)
trigger2 = TeamMode = simul
trigger2 = numpartner
trigger2 = partner,alive
trigger2 = partner,movetype = A
trigger2 = random <= 200 && ifelse(enemynear(var(58)),statetype = C,1,random <= 250)

[State -1, 前中ジャンプ(中段)]
type = ChangeState
value = 34
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = StateType != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = I || ((enemynear(var(58)),stateno = [120,159]) && random <= 250)
triggerall =!InGuardDist
triggerall = p2bodydist x = [40,100]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = random <= 150 && ifelse(enemynear(var(58)),statetype = C,1,random <= 250)
trigger2 = TeamMode = simul
trigger2 = numpartner
trigger2 = partner,alive
trigger2 = partner,movetype = A
trigger2 = random <= 200 && ifelse(enemynear(var(58)),statetype = C,1,random <= 250)

;---------------------------------------------------------------------------
;上段
;---------------------------------------------------------------------------
;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 205
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(40) = 0
triggerall = !fvar(31)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = p2bodydist x = [-10,20]
triggerall = p2bodydist X < 25
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149])  || stateno = 1105 || stateno = 1115
trigger1 = enemynear(var(58)),movetype = H
trigger1 = enemynear(var(58)),stateno != [120,159]

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = ifelse(Random <= 500,235,430)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(40) = 0
triggerall = !fvar(31)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = p2bodydist x = [-10,25]
triggerall = p2bodydist X < 25
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149])  || stateno = 1105 || stateno = 1115
trigger1 = enemynear(var(58)),movetype = H
trigger1 = enemynear(var(58)),stateno != [120,159]

[State -3, Stand Strong Punch]
type = ChangeState
value = ifelse(Random <= 500,245,215)
triggerall = var(59) = 1
triggerall = var(57) >= 1 
triggerall = !fvar(31)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = p2bodydist x = [-5,30]
triggerall = p2bodydist X < 30
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149]) 
trigger1 = Random <= 200
trigger2 = enemynear(var(58)),movetype = H
trigger2 = enemynear(var(58)),stateno != [120,159]

;しゃがみ弱パンチ
[State -3, Crouching Light Punch]
type = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 650
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-5,15]

;遠距離立ち弱キック
[State -3, Stand Light Kick]
type = ChangeState
value = 235
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall =!InGuardDist && enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149]) 
trigger1 = p2bodydist X = [-25,15]

;遠距離立ち弱パンチ
[State -3, Stand Light Punch]
type = ChangeState
value = 205
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = S
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall =!InGuardDist && enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-25,15]

;遠距離立ち強キック
[State -3, Stand Strong Kick]
type = ChangeState
value = 245
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 50
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall =!InGuardDist && enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-5,24]

;遠距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 215
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall =!InGuardDist && enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149]) 
trigger1 = P2BodyDist X = [-15,24]
trigger1 = Random <= 200

;---------------------------------------------------------------------------
;起き攻め
;---------------------------------------------------------------------------

[State -3, 起き攻め選択]
type = VarSet
triggerall = var(59) = 1
triggerall = var(57) >= 6
triggerall = var(44) = 0
triggerall = roundstate = 2
triggerall = enemynear(var(58)),statetype = L && enemynear(var(58)),movetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),stateno != 5120 || enemynear(var(58)),animtime < -4
trigger1 = statetype != L && movetype != H
trigger1 = p2bodydist X <= 150
var(44) = 1 + (random % 4)

[State -3, リセット]
type = varset
triggerall = var(44) != 0
trigger1 = roundstate != 2 || movetype = H || movetype = A || statetype = L
var(44) = 0

[State -3];??儕???
type = varset
triggerall = var(44) != 0
trigger1 = var(44) = 1 && enemynear(var(58)),stateno = 5120
trigger1 = enemynear(var(58)),animtime = 0
trigger2 = var(44) = 2 && enemynear(var(58)),stateno = 5120
trigger2 = enemynear(var(58)),animtime > -6
trigger2 = !((stateno = [30,39]) || statetype = A)
trigger3 = var(44) = 3 && enemynear(var(58)),stateno = 5120
trigger3 = enemynear(var(58)),animtime > -5
trigger4 = var(44) = 4 && enemynear(var(58)),stateno = 5120
var(44) = 10

[State -3, しゃがみ弱キック 下段起き攻め]
type = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(44) = 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = P2BodyDist X = [-20,40]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),stateno = 5120
trigger1 = enemynear(var(58)),animtime = -1

;?幃?????
[State -3, GOUHU]
type = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(44) = 2
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = Random <= 400
triggerall = StateType != A
triggerall = P2BodyDist X = [-20,20]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),stateno = 5120
trigger1 = enemynear(var(58)),animtime = [-18,-12]

[State -3, 小ジャンプ 中段起き攻め]
Type = ChangeState
Value = 32
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(44) = 2
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = P2BodyDist X = [-20,60]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),stateno = 5120
trigger1 = enemynear(var(58)),animtime = [-18,-12]

[State -3, 中ジャンプ 中段起き攻め]
type = ChangeState
value = 34
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(44) = 2
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = P2BodyDist X = [-20,100]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),stateno = 5120
trigger1 = enemynear(var(58)),animtime = [-18,-12]

[State -3, ジャンプ強パンチ 起き攻め]
type = ChangeState
value = 610
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(44) = 2
triggerall = RoundState = 2
triggerall = StateType = A
triggerall = ctrl
trigger1 = Vel Y > 0

[State -3, バックステップ／ハイジャンプ 起き攻め放棄]
Type = ChangeState
Value = ifelse(BackEdgeBodyDist <= 20,36,105)
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1
TriggerAll = var(44) = 3
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
Trigger1 = EnemyNear(var(58)),StateType = L && P2bodyDist X <= 80 && !Inguarddist
Trigger1 = EnemyNear(var(58)),StateNo != 5120
Trigger2 = EnemyNear(var(58)),StateNo = 5120
Trigger2 = EnemyNear(var(58)),AnimTime >= -10

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;防御(ガード等)
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;ガード
[State -3, Guard]
Type = ChangeState
Value = ifelse(StateNo = 100,101,120)
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 4
TriggerAll = RoundState = 2
TriggerAll = StateNo != [120,159]
TriggerAll = Ctrl || StateNo = 0 || (StateNo = [10,12]) || (StateNo = [20,22]) || StateNo = 100 && Time >= 8 || var(2) = 1
Trigger1 = InGuardDist
Trigger1 = Random <= (200 + (var(57) * 100)) && Random <= 600 || var(57) > 4
Trigger2 = InGuardDist
Trigger2 = P2BodyDist X > 90 || EnemyNear(var(58)),Time > 50
Trigger2 = Random <= var(57) * 150
Trigger3 = InGuardDist
Trigger3 = EnemyNear(var(58)),NumHelper > 0 || Enemy,NumProj > 0
Trigger4 = var(57) > 4
Trigger4 = EnemyNear(var(58)),MoveType = A
Trigger4 =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
Trigger4 = StateNo != 100 || StateNo = 100 && P2Dist Y > -45 || NumEnemy >= 2
Trigger4 = P2BodyDist X < 0
Trigger4 = P2Dist X > 0 || P2Dist X < 0
Trigger5 = var(57) > 4
Trigger5 = InGuardDist
Trigger5 = NumEnemy > 1
Trigger5 = Enemy(0),NumHelper+Enemy(1),NumHelper > 0 || Enemy(0),NumProj+Enemy(1),NumProj > 0
Trigger6 = var(57) > 4
Trigger6 = NumHelper(31000+ID)
Trigger6 = Helper(31000+ID),InGuardDist
Trigger6 =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;移動(内部の歩行の認識をしない)
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[State -3, 内部の歩行の認識をしない]
Type = AssertSpecial
Trigger1 = var(59) = 1
Trigger1 = var(57) >= 1
flag = NoWalk
;---------------------------------------------------------------------------
;位置取り
;---------------------------------------------------------------------------
;ダッシュ 起き攻め位置取り
[State -3, Dash]
Type = ChangeState
Value = 100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = Random <= var(57) * 125
triggerall = RoundState = 2
triggerall = StateType != A
triggerall =!inguarddist
triggerall =!enemy,numproj
triggerall = p2bodydist x >= 90
triggerall = ctrl || (stateno = [20,22]) || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),StateType = A
trigger1 = enemynear(var(58)),StateNo = [5000,5100]
trigger2 = enemynear(var(58)),StateType = L

;ダッシュ
[State -3, RUN]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType != A || EnemyNear(var(58)),facing = facing
TriggerAll =!InGuardDist
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [120,149]) 
Trigger1 = P2bodyDist X > 140
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = EnemyNear(var(58)),MoveType = I
Trigger2 = P2bodyDist X > 100
Trigger2 = EnemyNear(var(58)),StateType = L
Trigger3 = P2bodyDist X > 140 || EnemyNear(var(58)),facing = facing && P2bodyDist X >= 40
Trigger3 = EnemyNear(var(58)),StateType = A
Trigger3 = EnemyNear(var(58)),MoveType = A && EnemyNear(var(58)),StateNo >= 200
Trigger3 =!EnemyNear(var(58)),HitDefAttr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
Trigger4 = EnemyNear(var(58)),MoveType != H
Trigger4 = EnemyNear(var(58)),StateType = A
Trigger4 =!EnemyNear(var(58)),Ctrl
Trigger4 = EnemyNear(var(58)),facing = facing
Trigger4 = P2bodyDist X >= 40

;ダッシュ
[State -3, Dash]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = Random <= (200 + (var(57) * 100))
TriggerAll = P2Dist X > 0
TriggerAll = StateNo != 100
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [120,149]) || var(0) = 1
Trigger1 =!EnemyNear(var(58)),Ctrl
Trigger1 = EnemyNear(var(58)),MoveType = A
Trigger1 = EnemyNear(var(58)),Facing = Facing && P2BodyDist X >= 60
Trigger1 = EnemyNear(var(58)),AnimTime <= -4 && EnemyNear(var(58)),StateType != A || EnemyNear(var(58)),StateType = A
Trigger2 =!EnemyNear(var(58)),Ctrl
Trigger2 = EnemyNear(var(58)),MoveType = I
Trigger2 = EnemyNear(var(58)),StateNo >= 200
Trigger2 =!InGuardDist && EnemyNear(var(58)),Facing!= Facing && P2BodyDist X >= 60
Trigger2 = EnemyNear(var(58)),AnimTime <= -4 && EnemyNear(var(58)),StateType != A
Trigger3 =!EnemyNear(var(58)),Ctrl
Trigger3 = EnemyNear(var(58)),MoveType = I
Trigger3 = EnemyNear(var(58)),StateNo >= 200
Trigger3 =!InGuardDist && EnemyNear(var(58)),Facing = Facing && P2BodyDist X >= 60
Trigger3 = EnemyNear(var(58)),AnimTime <= -4 && EnemyNear(var(58)),StateType != A || EnemyNear(var(58)),StateType = A

;ダッシュ
[State -3, RUN]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= ((20 + (var(57) * 10)) * var(56))
TriggerAll = StateNo != 100
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),StateNo != [5710,5715]
TriggerAll = Abs(EnemyNear(var(58)),Pos X - Pos X) > ifelse(var(57) < 8,60,50)
TriggerAll =!InGuardDist 
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [120,149])
Trigger1 = EnemyNear(var(58)),MoveType = H
Trigger1 = EnemyNear(var(58)),StateNo != [120,159]

;ダッシュ
[State -3, RUN]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = StateNo != 100
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = Abs(EnemyNear(var(58)),Pos X - Pos X) > 50
TriggerAll =!InGuardDist
triggerall = enemynear(var(58)),stateno != [5710,5715]
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [120,149]) 
Trigger1 = EnemyNear(var(58)),MoveType = H
Trigger1 = EnemyNear(var(58)),StateNo != [120,159]

[State -3, ダッシュ タッグ]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= (200 + (var(57) * 100))
TriggerAll = Random <= 600 || var(57) > 9
TriggerAll = StateNo != 100
TriggerAll = StateType != A
TriggerAll =!Enemy,NumProj
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [120,149]) 
TriggerAll = P2BodyDist X > 140
Trigger1 = var(52) = [2,4]
Trigger1 = EnemyNear(var(58)),Facing = Facing

;歩き(起き攻め位置取り)
[State -3, Walk]
type = ChangeState
value = 22
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = stateno != 22
triggerall = ctrl || (stateno = [20,22])
trigger1 = enemynear(var(58)),StateType = L

;────────────────────────────────────────
; 投げ
;────────────────────────────────────────
;投げ
[State -3, Throw]
type = ChangeState
value = ifelse(backedgedist <= 120,805,800)
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = var(17) = 0 && var(54) = 0
triggerall = Roundstate = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = P2Movetype != H
triggerall = P2stateno != [5000,5050]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (StateNo = [120,149])
triggerall = statetype != A
triggerall = p2statetype != A
triggerall = P2statetype != L
triggerall = p2stateno != 5120
triggerall = p2bodydist X < 15
triggerall = p2bodydist x = [-10,15]
trigger1 = EnemyNear(var(58)),facing != facing
trigger2 = EnemyNear(var(58)),Animtime < -5
trigger2 = EnemyNear(var(58)),facing  = facing

;K投げ
[State -3, Throw]
type = ChangeState
value = 805
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = var(17) = 0 && var(54) = 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 550
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),stateno != [30,49]
triggerall = enemynear(var(58)),stateno != 105
triggerall = enemynear(var(58)),stateno != [150,155]
triggerall = enemynear(var(58)),stateno != [5100,5299]
triggerall = enemynear(var(58)),animtime > -3
triggerall = backedgedist <= 120
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
triggerall = p2bodydist X < 15
trigger1 = p2bodydist x = [-10,15]

;P投げ
[State -3, Throw]
type = ChangeState
value = 800
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = var(17) = 0 && var(54) = 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 550
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),stateno != [30,49]
triggerall = enemynear(var(58)),stateno != 105
triggerall = enemynear(var(58)),stateno != [150,155]
triggerall = enemynear(var(58)),stateno != [5100,5299]
triggerall = enemynear(var(58)),animtime > -3
triggerall = backedgedist > 120
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])
triggerall = p2bodydist X < 15
trigger1 = p2bodydist x = [-10,15]

[State -3,投げ]
Type = ChangeState
Value = ifelse((!var(51) && var(41) < var(42) || (var(51) = [1,4])),800,805)
TriggerAll = var(59)
TriggerAll = var(57) >= 1
TriggerAll = var(17) = 0 && var(54) = 0
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= var(56) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = p2bodydist X < 15
TriggerAll = p2bodydist x = [-5,15]
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateType = S || EnemyNear(var(58)),StateType = C
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5299]
TriggerAll = EnemyNear(var(58)),StateNo <= 2000
TriggerAll = EnemyNear(var(58)),facing != facing || EnemyNear(var(58)),StateNo = [700,999]
Trigger1 = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149])
Trigger1 = ifelse(EnemyNear(var(58)),MoveType = I && (EnemyNear(var(58)),StateNo = [700,999]),Random < var(56) * 30,Random < var(56) * 10)

;---------------------------------------------------------------------------
;投げ
;---------------------------------------------------------------------------
;K投げ
[State -3, Throw]
type = ChangeState
value = 805
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(17) = 0 && var(54) = 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [30,49]
triggerall = enemynear(var(58)),stateno != 105
triggerall = enemynear(var(58)),stateno != [150,155]
triggerall = enemynear(var(58)),stateno != [5100,5299]
triggerall = backedgedist <= 120
triggerall = p2bodydist X < 15
triggerall = p2bodydist x = [-10,15]
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 

;P投げ
[State -3, Throw]
type = ChangeState
value = 800
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(17) = 0 && var(54) = 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [30,49]
triggerall = enemynear(var(58)),stateno != 105
triggerall = enemynear(var(58)),stateno != [150,155]
triggerall = enemynear(var(58)),stateno != [5100,5299]
triggerall = backedgedist > 120
triggerall = p2bodydist X < 15
triggerall = p2bodydist x = [-10,15]
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 

;MAX伍百弐拾四式・神塵
[State -3, KAMUKURA]
type = ChangeState
value = 7000
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = var(17) = 0 && var(54) = 0
triggerall = power >= 2000
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(57) >= 6 && p2life <= 365 || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 500 || var(57) >= 6 && p2life <= 365
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing != facing
triggerall = enemynear(var(58)),AnimTime <= -4
triggerall = enemynear(var(58)),Time <= 1
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
trigger1 = p2bodydist x = [-5,30]

;伍百弐拾四式・神塵
[State -3, KAMUKURA]
type = ChangeState
value = 4000
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = var(17) = 0 && var(54) = 0
triggerall = power >= 1000
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(57) >= 6 && p2life <= 365 || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 500 || var(57) >= 6 && p2life <= 365
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing != facing
triggerall = enemynear(var(58)),AnimTime <= -4
triggerall = enemynear(var(58)),Time <= 1
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
trigger1 = p2bodydist x = [-5,30]

;---------------------------------------------------------------------------
;その他牽制
;---------------------------------------------------------------------------
;弱 百八式・闇払い
[State -3, L YAMIBARAI]
type = ChangeState
value = 1000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0; && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = numhelper(1000) = 0
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist X >= 200
trigger1 = random <= 100
trigger2 = var(57) >= 6
trigger2 = var(1) = 1 || var(1) = 2
trigger2 = p2bodydist X >= 125
trigger2 = random <= 600

;強 百八式・闇払い(タッグ用)
[State -3, S YAMIBARAI]
Type = ChangeState
Value = 1050
TriggerAll = var(59)
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = var(52) = [2,3]
TriggerAll = var(51) < 5
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= ((20 + (var(57) * 10)) * var(56))
TriggerAll = Random <= 400
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L && EnemyNear(var(58)),StateType != A
TriggerAll = !numhelper(1000) = 0 && !Enemy,NumProj
TriggerAll = Partner,MoveType = H
TriggerAll = Partner,StateType != L
TriggerAll = Partner,StateNo != 5120
TriggerAll = Partner,StateNo != 5201
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
TriggerAll = (Partner,StateNo = [150,155]) || Partner,StateNo = [5000,5099]
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])
Trigger1 = EnemyNear(var(58)),MoveType = A
Trigger1 = P2BodyDist X >= 140

;弱 百八式・闇払い
[State -3, L YAMIBARAI]
Type = ChangeState
Value = 1000
TriggerAll = var(59)
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= var(57) * 125
TriggerAll = Random <= 600
TriggerAll = StateType != A
TriggerAll = numhelper(1000) = 0
TriggerAll = P2BodyDist X >= 160
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
TriggerAll = EnemyNear(var(58)),MoveType = H
TriggerAll = EnemyNear(var(58)),StateType = A || EnemyNear(var(58)),StateType = L
Trigger1 = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])

;強百八式・闇払い(クローン)
[State -3, S YAMIBARAI]
Type = ChangeState
Value = 1050
TriggerAll = var(59)
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= (200 + (var(57) * 100))
TriggerAll = Random <= 600
TriggerAll = StateType != A
TriggerAll = numhelper(1000) = 0
TriggerAll = P2BodyDist X >= 200
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
TriggerAll = EnemyNear(var(58)),MoveType = H
TriggerAll = EnemyNear(var(58)),StateType = A || EnemyNear(var(58)),StateType = L
Trigger1 = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])

;弱ブリッツボール・上段／下段
[State -1, 弱ブリッツボール・上段／下段]
type = ChangeState
value = ifelse(Random <= 500,1000,1050)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 600
triggerall = StateType != A
triggerall = p2bodydist x >= 160
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
triggerall = enemynear(var(58)),movetype = H
triggerall = enemynear(var(58)),stateno != [5710,5715]
triggerall = enemynear(var(58)),StateType = A || enemynear(var(58)),StateType = L
triggerall =!NumProj
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149])

[State -3, S1 ]
type = ChangeState
value = 1050
triggerall = var(59) = 1
triggerall = RoundState = 2
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = partner,movetype = H
triggerall = partner,statetype != L 
triggerall = (partner,stateno = [150,155]) || (partner,stateno = [5000,5099])
triggerall = partner,stateno != 5120
triggerall = partner,stateno != 5201
triggerall = numhelper(1000) = 0
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
triggerall = !Numproj && !enemy,numproj
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,102]) || (stateno = [120,149])
trigger1 = enemynear(var(58)),movetype = A
Trigger1 = P2BodyDist X >= 140

[State -3, S YAMIBARAI]
type = ChangeState
value = 1050
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(52) = [2,3]
triggerall = var(51) < 5
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= ((20 + (var(57) * 10)) * var(56))
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L && enemynear(var(58)),statetype != A
triggerall = !enemy,numproj
triggerall = partner,movetype = H
triggerall = partner,statetype != L 
triggerall = partner,stateno != 5120
triggerall = partner,stateno != 5201
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
triggerall = (partner,stateno = [150,155]) || partner,stateno = [5000,5099]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),movetype = A
trigger1 = p2bodydist x >= 140

[State -3, S YAMIBARAI]
type = ChangeState
value = 1050
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(52) = [2,3]
triggerall = var(51) < 5
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= (200 + (var(57) * 100))
triggerall = Random <= 100
triggerall = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo != [2620,2630]
triggerall = enemynear(var(58)),statetype != A
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x >= 200

[State -3]
type = ChangeState
value = ifelse(Random <= 500,1050,36)
Triggerall = var(59) = 1
Triggerall = StateType != A
Triggerall = RoundState = 2
triggerall = P2StateType != L
triggerall = P2StateType != A
triggerall = P2MoveType != H
Triggerall = P2BodyDist X = [150,200]
triggerall = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || stateno = 22 || (stateno = 52 && Time >= 3) || stateno = 100 
trigger1 = EnemyNear(floor(fvar(37))),NumProj = 1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;立ち回り、技振り(空中)
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;外式・奈落落とし
[State -3, NARURU]
type = ChangeState
value = 330       
triggerall = var(59)
triggerall = statetype = A && vel x != 0
triggerall = p2statetype != A
triggerall = p2bodydist x < 50
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = TeamMode = simul
triggerall = numpartner
triggerall = partner,alive
triggerall = partner,movetype =  A
triggerall = abs(pos X - partner,pos X)  = [-180,180]
trigger1 = vel y >= 0
trigger1 = BackEdgeBodyDist <= 10
trigger1 = stateno = 105
trigger2 = ctrl

[State -3, AssertSpecial]
type = AssertSpecial
triggerall = FrontEdgeBodyDist <= 50
trigger1 = var(59) && stateno = 330
trigger1 = random < 600
trigger2 = var(59) && stateno = 635
trigger2 = random < 600
trigger3 = var(59) && stateno = 610
trigger3 = random < 650
flag = unguardable

[State -3, Jump Strong Punch]
type = ChangeState
value = ifelse(FrontEdgeBodyDist > 20,610,330)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (StateNo = [120,149])
triggerall = vel X != 0
triggerall = P2BodyDist X = [-31+floor(5*(EnemyNear(var(58)),vel X)+floor(5*vel X)),31+floor(5*(EnemyNear(var(58)),vel X)+floor(5*vel X))]
triggerall = P2BodyDist Y = [-36-floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20)-floor(5*vel Y)-(5*(5+1)/2)*0.54),76-floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20)-floor(5*vel Y)-(5*(5+1)/2)*0.54)]
triggerall = (EnemyNear(var(58)),statetype != A && Vel Y >= 0) || EnemyNear(var(58)),statetype = A
triggerall = P2statetype != L
trigger1 = random <= 1000

[State -3, Jump Strong Punch]
type = ChangeState
value = ifelse(FrontEdgeBodyDist > 20,610,330)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (StateNo = [120,149])
triggerall = vel X != 0
triggerall = P2BodyDist X = [-31+floor(5*(EnemyNear(var(58)),vel X)+floor(5*vel X)),31+floor(5*(EnemyNear(var(58)),vel X)+floor(5*vel X))]
triggerall = P2BodyDist Y = [-36-floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20)-floor(5*vel Y)-(5*(5+1)/2)*0.54),76-floor(5*(EnemyNear(var(58)),vel Y)+(5*(5+1)/2)*fvar(20)-floor(5*vel Y)-(5*(5+1)/2)*0.54)]
triggerall = (EnemyNear(var(58)),statetype != A && Vel Y >= 0) || EnemyNear(var(58)),statetype = A
triggerall = P2statetype != L
trigger1 = random <= 1000

[State -3, Jump Strong Kick]
type = ChangeState
value = ifelse(Random <= 400,610,645)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl && FrontEdgeBodyDist > 20 || (StateNo = [120,149])
triggerall = P2BodyDist X = [-00+floor(7*(EnemyNear(var(58)),vel X)+floor(7*vel X)),54+floor(7*(EnemyNear(var(58)),vel X)+floor(7*vel X))]
triggerall = P2BodyDist Y = [-30-floor(7*(EnemyNear(var(58)),vel Y)+(7*(7+1)/2)*fvar(20)-floor(7*vel Y)-(7*(7+1)/2)*0.54),60-floor(7*(EnemyNear(var(58)),vel Y)+(7*(7+1)/2)*fvar(20)-floor(7*vel Y)-(7*(7+1)/2)*0.54)]
triggerall = (EnemyNear(var(58)),statetype != A && Vel Y >= 0) || EnemyNear(var(58)),statetype = A
triggerall = P2statetype != L
trigger1 = random <= 1000

[State -3, FWalk]
type = ChangeState
value = ifelse(FrontEdgeBodyDist > 20 && (p2stateno = [120,159]),610,330)
triggerall = var(59)
triggerall = statetype = A && vel x != 0
triggerall = p2statetype != A
triggerall = p2bodydist x < 30
triggerall = p2bodydist y = [-30,70]
triggerall = EnemyNear(var(58)),BackEdgeBodyDist >= 20
trigger1 = vel y > .1
trigger1 = ctrl || (StateNo = [120,149])

[State -3, Jump Strong Kick]
type = ChangeState
value = ifelse(FrontEdgeBodyDist > 20 && (p2stateno = [120,159]),645,330)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = ctrl || (StateNo = [120,149])
triggerall = stateno != 105
triggerall = P2BodyDist X = [-35,54]
triggerall = P2BodyDist Y = [-30,70]
triggerall = P2StateType != A
triggerall = P2movetype = H
triggerall = P2StateType != L
trigger1 = vel y >.1
Trigger1 = Random <= 1000

[State -3, Jump Strong Kick]
type = ChangeState
value = ifelse(FrontEdgeBodyDist > 20 && (p2stateno = [120,159]),610,330)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype = A
triggerall = ctrl || (StateNo = [120,149])
triggerall = stateno != 105
triggerall = P2BodyDist X = [-35,54]
triggerall = P2BodyDist Y = [-30,70]
triggerall = P2StateType != A
triggerall = P2movetype != H
triggerall = P2StateType != C
triggerall = P2StateType != L
trigger1 = vel y >.1
Trigger1 = Random <= 1000

[State -3]
Type = ChangeState
Value = 610
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= 250 + var(56) * 50 || var(56) > 7
TriggerAll = StateType = A
TriggerAll = Vel X >= 0 || BackEdgeBodyDist < 40 && Vel Y > 0
TriggerAll = p2bodydist X = [-35,28+floor(7*vel X)]
TriggerAll = P2BodyDist Y < 65 || Vel Y > 10
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5299]
TriggerAll = Ctrl || (StateNo = [120,149])
Trigger1 = Vel Y > 0
Trigger1 = P2BodyDist X = [-10,45]
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = FrontEdgeBodyDist >= 80
Trigger1 = Random < 750

[State -3]
Type = ChangeState
Value = 330
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= 250 + var(56) * 50 || var(56) > 7
TriggerAll = StateType = A
TriggerAll = Vel X 
TriggerAll = P2BodyDist X = [-20,30]
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5299]
TriggerAll = Ctrl || (StateNo = [120,149])
Trigger1 = Vel Y < 0
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = Random < 500
Trigger2 = P2BodyDist Y < 0 || EnemyNear(var(58)),Pos Y < -50
Trigger2 = Vel X > 0 || BackEdgeBodyDist < 10
Trigger2 = EnemyNear(var(58)),Vel X >= 0
Trigger2 = EnemyNear(var(58)),StateType = A
Trigger2 = EnemyNear(var(58)),MoveType != H
Trigger2 = Pos Y < -70 || Vel Y > 0

[State -3]
Type = ChangeState
Value = 330
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= 250 + var(56) * 50 || var(56) > 7
TriggerAll = StateType = A
Trigger1 = Ctrl || (StateNo = [120,149])
Trigger1 = Vel Y < 0
Trigger1 = P2BodyDist X = [-20,30]
Trigger1 = P2BodyDist Y = [-25,40]
Trigger1 = EnemyNear(var(58)),StateType = A
Trigger1 = Random = [301,600]
Trigger2 = Ctrl || (StateNo = [120,149])
Trigger2 = Vel Y > 0
Trigger2 = P2BodyDist X = [-30,0]
Trigger2 = EnemyNear(var(58)),StateType != A

[State -3]
Type = ChangeState
Value = 645
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= 250 + var(56) * 50 || var(56) > 7
TriggerAll = StateType = A
TriggerAll = ifelse(Vel X >= 4,(P2BodyDist X = [0,120]),(P2BodyDist X = [0,100]))
TriggerAll =(P2BodyDist Y = [-40,40]) || Vel Y > 0
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5299]
TriggerAll = Ctrl || (StateNo = [120,149])
Trigger1 = Vel X > 0 || P2BodyDist X < 30
Trigger1 = Vel Y > 0 || P2BodyDist Y = [50,51]
Trigger1 = ifelse(Vel X >= 4,(P2BodyDist X = [46,120]),(P2BodyDist X = [0,80]))
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = Random <= 600
Trigger2 = P2BodyDist Y < 0 || EnemyNear(var(58)),Pos Y < -50
Trigger2 = Vel X > 0 || BackEdgeBodyDist < 10
Trigger2 = EnemyNear(var(58)),Vel X >= 0
Trigger2 = EnemyNear(var(58)),StateType = A
Trigger2 = EnemyNear(var(58)),MoveType != H

[State -3, NARAKU]
type = ChangeState
value = 330
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),MoveType != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl || (StateNo = [120,149])
trigger1 = enemynear(var(58)),StateType != A
trigger1 = var(4) = 0 && time >= 14 || var(4) = 1 && time >= 4
trigger1 = Vel Y < 0
trigger1 = p2dist x = [-40+floor(8*vel X),-5+floor(8*vel X)]
trigger2 = enemynear(var(58)),StateType = A
trigger2 = p2bodydist x = [-10,35+floor(8*(EnemyNear(var(58)),vel X)+floor(8*vel X))]
trigger2 = enemynear(var(58)),Pos Y - Pos Y = [-40,40]

[State -3, Jump Light Punch]
type = ChangeState
value = 330
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = random >= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl || (StateNo = [120,149])
trigger1 = p2bodydist x = [-10,30]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-60,20]
trigger1 = enemynear(var(58)),StateType = A
trigger1 = enemynear(var(58)),MoveType != H

[State -3, Jump Strong Punch]
type = ChangeState
value = 330
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = Random >= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl || (StateNo = [120,149])
trigger1 = enemynear(var(58)),statetype != A
trigger1 = Vel Y >= 0 && Pos Y >= -50-floor(7*vel Y)
trigger1 = p2bodydist x = [-35,28+floor(7*vel X)]
trigger2 = enemynear(var(58)),statetype = A
trigger2 = p2bodydist x = [-10,28+floor(7*vel X)]
trigger2 = enemynear(var(58)),Pos Y - Pos Y = [-40,40]
trigger2 = enemynear(var(58)),movetype != H

[State -3, Jump Strong Punch]
type = ChangeState
value = 610
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl || (StateNo = [120,149])
trigger1 = enemynear(var(58)),statetype != A
trigger1 = Vel Y >= 0 && Pos Y >= -50-floor(7*vel Y)
trigger1 = p2bodydist x = [-35,28+floor(7*vel X)]
trigger2 = enemynear(var(58)),statetype = A
trigger2 = p2bodydist x = [-10,28+floor(7*vel X)]
trigger2 = enemynear(var(58)),Pos Y - Pos Y = [-40,40]
trigger2 = enemynear(var(58)),movetype != H

[State -3, Jump Light Kick]
type = ChangeState
value = 330
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = vel X != 0
triggerall = ctrl || (StateNo = [120,149])
trigger1 = Vel Y >= 0
trigger1 = p2dist x = [-40+floor(7*vel X),-5+floor(7*vel X)]

[State -3, Jump Light Punch]
type = ChangeState
value = 600
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl || (StateNo = [120,149])
trigger1 = p2bodydist x = [-10,30]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-60,20]
trigger1 = enemynear(var(58)),StateType = A
trigger1 = enemynear(var(58)),MoveType != H

[State -3, Jump Light Kick]
type = ChangeState
value = 330
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = Random >= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = vel X != 0
triggerall = ctrl || (StateNo = [120,149])
trigger1 = Vel Y >= 0
trigger1 = p2dist x = [-40+floor(7*vel X),-5+floor(7*vel X)]

[State -3, Jump Light Kick]
type = ChangeState
value = 635
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype = S
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = vel X != 0
triggerall = ctrl || (StateNo = [120,149])
trigger1 = Vel Y >= 0
trigger1 = p2bodydist Y = [-40,40]
trigger1 = p2bodydist X = [-40,40]

[State -3, Jump Light Kick]
type = ChangeState
value = 330
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = vel X != 0
triggerall = ctrl || (StateNo = [120,149])
trigger1 = Vel Y >= 0
trigger1 = p2bodydist Y = [-50,50]

[State -3, Jump Strong Kick]
type = ChangeState
value = 640
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = vel X = 0
triggerall = ctrl || (StateNo = [120,149])
trigger1 = p2bodydist x = [-10,56+floor(12*(EnemyNear(var(58)),vel X)+floor(12*vel X))]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-80,20]
trigger1 = enemynear(var(58)),StateType = A
trigger2 = vel X = 0
trigger2 = Vel Y >= 0
trigger2 = p2bodydist x = [-10,56+floor(12*(EnemyNear(var(58)),vel X)+floor(12*vel X))]
trigger2 = enemynear(var(58)),statetype != A

[State -3, Jump Strong Kick]
type = ChangeState
value = 645
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0
triggerall = Random <= var(57) * 125
triggerall = random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = vel X != 0
triggerall = ctrl || (StateNo = [120,149])
trigger1 = p2bodydist x = [-10,61+floor(10*(EnemyNear(var(58)),vel X)+floor(10*vel X))]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-80,20]
trigger1 = enemynear(var(58)),StateType = A
trigger2 = vel X != 0
trigger2 = Vel Y >= 0
trigger2 = p2bodydist x = [-10,61+floor(10*(EnemyNear(var(58)),vel X)+floor(10*vel X))]
trigger2 = enemynear(var(58)),statetype != A

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;移動
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;ダッシュ
[State -3, RUN]
type = ChangeState
value = 100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = Random <= var(57) * 125
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = !inguarddist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [120,149]) 
trigger1 = p2bodydist x >= 240
trigger1 = Random <= 400
trigger2 = p2bodydist x = [120,240]
trigger2 = Random <= 200
trigger3 = p2bodydist x = [40,120]
trigger3 = Random <= 100

;歩き
[State -3, Walk]
type = ChangeState
value = 21
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = StateType != A
triggerall = enemynear(var(58)),StateType != A
triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),StateNo != [5120,5299]
triggerall = stateno != 21
triggerall = ctrl || (stateno = [20,22])
trigger1 = p2bodydist x <= 140
trigger1 =!InGuardDist || enemynear(var(58)),facing = facing
trigger2 = p2bodydist x > 180

[State -3]
type = ChangeState
value = 100
triggerall = var(59) = 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 19 || stateno = 20|| stateno = 21|| stateno = 22
triggerall = P2BodyDist X >= 161 
triggerall = P2BodyDist Y >= 0
triggerall = !inguarddist
triggerall = P2StateType != A
triggerall = P2MoveType = H
triggerall = P2StateType != L
Trigger1 = Random <= 999
trigger1 = ProjHitTime(1000) != -1 && ProjHitTime(1000) < 13

[State -3]
Type = ChangeState
Value = 105
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = BackEdgeBodyDist >= 40
TriggerAll = Ctrl || (StateNo = [120,149]) 
Trigger1 = P2BodyDist X < 80 || FrontEdgeBodyDist < 80
Trigger1 = EnemyNear(var(58)),StateNo = [5200,5299]
trigger1 =!Enemy,NumProj

[State -3]
Type = ChangeState
Value = 105
TriggerAll = var(59) = 1
TriggerAll = Random <= var(57) * 75 || var(56) > 9
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = I
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!Enemy,NumProj
TriggerAll = Ctrl || (stateno = [120,149]) 
Trigger1 = P2BodyDist X = [100,140]
Trigger1 = Random < 30

[State -3]
Type = ChangeState
Value = 105
TriggerAll = var(59)
TriggerAll = Random <= var(57) * 80 || var(56) > 9
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = BackEdgeBodyDist >= 30
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(56) > 9
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll = Ctrl || (stateno = [120,149]) 
Trigger1 = P2BodyDist X = [-5,60]
Trigger1 = EnemyNear(var(58)),Vel Y >= 0
Trigger1 = EnemyNear(var(58)),HitDefAttr = SCA,NT,ST,HT

[State -3, FWalk]
type = ChangeState
value = 330       
triggerall = var(59)
triggerall = statetype = A 
triggerall = stateno = 105
trigger1 = vel y >= 0

[State 0, VarSet]
type = VarSet
triggerall = var(40) <= 0
trigger1 = fvar(31) = 2 
trigger2 = p2statetype = C
trigger3 = P2stateno = [120,159]
FV = 31
Value = 0
persistent = 0

[State 0, Varadd]
type = Varadd
triggerall = MoveContact = 1
triggerall = p2statetype != C
triggerall = p2statetype != A
triggerall = p2statetype != L
triggerall = P2stateno != [120,159]
trigger1 = stateno = 330
FV = 31
Value = 1
persistent = 0

;---------------------------------------------------------------------------
;MoveHit
[State AI]
type = ChangeState
value = 235
triggerall = var(59) = 1
triggerall = p2bodydist x = [-10,20]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 205 && MoveHit

[State AI]
type = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = p2bodydist x = [-10,25]
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype = C
Trigger1 = StateNo = 235 && MoveHit

[State AI]
type = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = p2bodydist x = [-10,25]
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != C
Trigger1 = StateNo = 235 && MoveHit

[State AI]
type = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = p2bodydist x = [-10,40]
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype = C
Trigger1 = prevstateno = 235
Trigger1 = StateNo = 400 && MoveHit

[State AI]
type = ChangeState
value = 200
triggerall = var(59) = 1
triggerall = p2bodydist x = [-10,40]
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != C
Trigger1 = prevstateno = 235
Trigger1 = StateNo = 430 && MoveHit

[State AI]
type = ChangeState
value = 320
triggerall = var(59) = 1
;triggerall = p2bodydist x = [-15,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno != 235
Trigger1 = StateNo = 400 && MoveHit

[State AI]
type = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = p2bodydist x = [-15,25]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno != 400
Trigger1 = prevstateno != 235
Trigger1 = StateNo = 430 && MoveHit

[State AI]
type = ChangeState
value = 310
triggerall = var(59) = 1
triggerall = p2bodydist x = [-15,25]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 215 && MoveHit

[State AI]
type = ChangeState
value = 320
triggerall = var(59) = 1
triggerall = p2bodydist x > 25
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno != 400
Trigger1 = prevstateno != 235
Trigger1 = StateNo = 430 && MoveHit
Trigger2 = StateNo = 215 && MoveHit

[State AI]
type = ChangeState
value = 320
triggerall = var(59) = 1
triggerall = p2bodydist x = [-15,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 410 && MoveHit

[State AI]
type = ChangeState
value = 3200
triggerall = var(59) = 1
triggerall = power >= 3000
;triggerall = p2bodydist x <= 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno = 400
Trigger1 = StateNo = 430 && MoveHit
Trigger2 = prevstateno = 430
Trigger2 = StateNo = 200 && MoveHit
Trigger3 = StateNo = 245 && MoveHit

[State AI]
type = ChangeState
value = 6200
triggerall = var(59) = 1
triggerall = power >= 2000
;triggerall = p2bodydist x <= 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno = 400
Trigger1 = StateNo = 430 && MoveHit
Trigger2 = prevstateno = 430
Trigger2 = StateNo = 200 && MoveHit
Trigger3 = StateNo = 245 && MoveHit

[State AI]
type = ChangeState
value = 3200
triggerall = var(59) = 1
triggerall = power >= 1000
;triggerall = p2bodydist x <= 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno = 400
Trigger1 = StateNo = 430 && MoveHit
Trigger2 = prevstateno = 430
Trigger2 = StateNo = 200 && MoveHit
Trigger3 = StateNo = 245 && MoveHit

[State AI]
type = ChangeState
value = 1510
triggerall = var(59) = 1
;triggerall = p2bodydist x <= 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = prevstateno = 400
Trigger1 = StateNo = 430 && MoveHit
Trigger2 = prevstateno = 430
Trigger2 = StateNo = 200 && MoveHit
Trigger3 = StateNo = 245 && MoveHit

[State AI]
type = ChangeState
value = 1700
triggerall = var(59) = 1
triggerall = p2bodydist x = [-15,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 245 && MoveHit

[State AI]
type = ChangeState
value = 1210
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power < 1000
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && MoveHit
Trigger2 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger3 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,1700,ifelse(Random <= 500,1400,1510))
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power < 1000
triggerall = p2bodydist x = [-25,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && AnimElem = 6, > 0 && MoveHit
Trigger2 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger3 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = 1210
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 1000
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && MoveHit

[State AI]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 4000
triggerall = p2bodydist x > 40
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && MoveHit

[State AI]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 3000
triggerall = p2bodydist x > 40
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && MoveHit

[State AI]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000
triggerall = p2bodydist x > 40
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && MoveHit

[State AI]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 1000
triggerall = p2bodydist x > 40
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 320 && MoveHit

[State AI]
type = ChangeState
value = 1210
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 1000 && power <= 1999
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,3200,ifelse(Random <= 500,4000,3100))
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 1000 && power <= 1999
triggerall = p2bodydist x = [-25,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = 1210
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000 && power <= 2999
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,7000,6200)
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000 && power <= 2999
triggerall = p2bodydist x = [-25,60]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = 1210
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 3000 && power <= 3999
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,4000,ifelse(Random <= 500,3100,3200))
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 3000 && power <= 3999
triggerall = p2bodydist x = [-25,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = 1210
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 4000
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,6000,7000)
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 4000
triggerall = p2bodydist x = [-25,50]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = 1410
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power < 1000
triggerall = p2bodydist x > 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit
Trigger3 = StateNo = 320 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,ifelse(Random <= 500,3000,3200),3400)
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 1000 && power <= 1999
triggerall = p2bodydist x > 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,6200,6000)
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000 && power <= 2999
triggerall = p2bodydist x > 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,3200,3000)
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 3000 && power <= 3999
triggerall = p2bodydist x > 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

[State AI]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 4000 
triggerall = p2bodydist x > 50
triggerall = enemynear(var(58)),statetype != A
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && MoveHit
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && MoveHit

;---------------------------------------------------------------------------

[State AI]
type = ChangeState
value = 8900
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000
triggerall = enemynear(var(58)),movetype = H
triggerall = enemynear(var(58)),statetype != L
Trigger1 = StateNo = 3010 && AnimElem = 9
Trigger2 = StateNo = 3400 && AnimElem = 14
Trigger3 = StateNo = 3450 && AnimElem = 14
Trigger4 = StateNo = 4010 && AnimElem = 12
Trigger5 = StateNo = 6010 && AnimElem = 11
Trigger6 = StateNo = 7015 && AnimElem = 11

[State AI]
type = ChangeState
value = 8800
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Trigger1 = stateno = 3110 && movecontact
Trigger2 = stateno = 3200 && AnimElemtime(21) >= 0 && AnimElemtime(23) < 0 && movecontact

[State AI]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = power >= 1000 && power <= 1999
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = statetype != A
triggerall = random <= 999
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
Trigger1 = prevstateno = 3050
Trigger1 = StateNo = 1105 && AnimTime = 0

[State AI]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = power >= 2000 && power <= 2999
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = statetype != A
triggerall = random <= 999
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
Trigger1 = prevstateno = 3050
Trigger1 = StateNo = 1105 && AnimTime = 0

[State AI]
type = ChangeState
value = 8900
triggerall = var(59) = 1
triggerall = power >= 3000
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = statetype != A
triggerall = random <= 999
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
Trigger1 = prevstateno = 3050
Trigger1 = StateNo = 1105 && AnimTime = 0

;---------------------------------------------------------------------------
;moveguarded
[State AI]
type = ChangeState
value = 7000
triggerall = var(59) = 1
triggerall = power >= 4000
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,20]
Trigger1 = StateNo = 400 && moveguarded
Trigger2 = StateNo = 430 && moveguarded
Trigger3 = StateNo = 200 && moveguarded
Trigger4 = StateNo = 205 && moveguarded
Trigger5 = StateNo = 230 && moveguarded
Trigger6 = StateNo = 235 && moveguarded

[State AI]
type = ChangeState
value = 4000
triggerall = var(59) = 1
triggerall = power >= 3000
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,20]
Trigger1 = StateNo = 400 && moveguarded
Trigger2 = StateNo = 430 && moveguarded
Trigger3 = StateNo = 200 && moveguarded
Trigger4 = StateNo = 205 && moveguarded
Trigger5 = StateNo = 230 && moveguarded
Trigger6 = StateNo = 235 && moveguarded

[State AI]
type = ChangeState
value = 7000
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,20]
Trigger1 = StateNo = 400 && moveguarded
Trigger2 = StateNo = 430 && moveguarded
Trigger3 = StateNo = 200 && moveguarded
Trigger4 = StateNo = 205 && moveguarded
Trigger5 = StateNo = 230 && moveguarded
Trigger6 = StateNo = 235 && moveguarded

[State AI]
type = ChangeState
value = 4000
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,20]
Trigger1 = StateNo = 400 && moveguarded
Trigger2 = StateNo = 430 && moveguarded
Trigger3 = StateNo = 200 && moveguarded
Trigger4 = StateNo = 205 && moveguarded
Trigger5 = StateNo = 230 && moveguarded
Trigger6 = StateNo = 235 && moveguarded

[State AI]
type = ChangeState
value = 310
triggerall = var(59) = 1
triggerall = power < 1000
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,25]
Trigger1 = StateNo = 235 && moveguarded

[State AI]
type = ChangeState
value = 235
triggerall = var(59) = 1
triggerall = power < 1000
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,20]
Trigger1 = StateNo = 400 && moveguarded
Trigger2 = StateNo = 430 && moveguarded
Trigger3 = StateNo = 200 && moveguarded
Trigger4 = StateNo = 205 && moveguarded
Trigger5 = StateNo = 230 && moveguarded

[State AI]
type = ChangeState
value = 320
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x > 20
Trigger1 = StateNo = 400 && moveguarded
Trigger2 = StateNo = 430 && moveguarded
Trigger3 = StateNo = 200 && moveguarded
Trigger4 = StateNo = 205 && moveguarded
Trigger5 = StateNo = 230 && moveguarded

[State AI]
type = ChangeState
value = 310
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,50]
Trigger1 = StateNo = 210 && moveguarded
Trigger2 = StateNo = 215 && moveguarded
Trigger3 = StateNo = 240 && moveguarded
Trigger4 = StateNo = 245 && moveguarded
Trigger5 = StateNo = 410 && moveguarded

[State AI]
type = ChangeState
value = 1000
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x > 50
Trigger1 = StateNo = 210 && moveguarded
Trigger2 = StateNo = 215 && moveguarded
Trigger3 = StateNo = 240 && moveguarded
Trigger4 = StateNo = 245 && moveguarded
Trigger5 = StateNo = 410 && moveguarded

[State AI]
type = ChangeState
value = 58
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-15,45]
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && moveguarded
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && moveguarded

[State AI]
type = ChangeState
value = 1000
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x > 45
Trigger1 = StateNo = 310 && AnimElem = 9, > 0 && moveguarded
Trigger2 = StateNo = 315 && AnimElem = 6, > 0 && moveguarded

[State AI]
type = ChangeState
value = 58
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x = [-30,70]
Trigger1 = StateNo = 320 && AnimElem = 6, > 0 && moveguarded

[State AI]
type = ChangeState
value = 1050
triggerall = var(59) = 1
triggerall = enemynear(var(58)),statetype != A
triggerall = movecontact
triggerall = p2bodydist x > 70
Trigger1 = StateNo = 320 && AnimElem = 6, > 0 && moveguarded

;------------------------------------------------------------------------------
;荒咬み・毒咬み派生
;------------------------------------------------------------------------------

;外式・砌穿ち
[State -3, MIGIRI]
type = ChangeState
value = 1620
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),movetype = H
trigger1 = prevstateno = 1600
trigger1 = StateNo = 1610 && AnimElemtime(5) >= 10 && AnimElemtime(6) < 0 && Movehit

;弐百拾弐式・琴月　陽
[State -3, MIGIRI]
type = ChangeState
value = 1630
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power < 1000 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),movetype = H
trigger1 = prevstateno = 1600
trigger1 = StateNo = 1610 && AnimElemtime(5) >= 10 && AnimElemtime(6) < 0 && Movehit

;百弐拾七式・八錆
[State -3,ys]
type = ChangeState
value = 1610
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= (200 + (var(57) * 100))
triggerall = Random <= 100
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = enemynear(var(58)),stateno != 5700
triggerall = p2bodydist x = [-15,60]
trigger1 = stateno = 1600 && AnimElemtime(15) >= 1 && AnimElemtime(17) < 0 && moveguarded
trigger1 = enemynear(var(58)),StateType = C

;百弐拾五式・七瀬
[State -3,ns]
type = ChangeState
value = 1615
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = enemynear(var(58)),stateno != 5700
triggerall = p2bodydist x = [-20,70]
trigger1 = stateno = 1605 && AnimElemtime(7) >= 4 && AnimElemtime(7) < 13 && movehit

;百弐拾八式・九傷/百弐拾七式・八錆
[State -3,kk]
type = ChangeState
value = ifelse(Random <= 500,1605,1610)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= (200 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = enemynear(var(58)),stateno != 5700
triggerall = p2bodydist x = [-15,60]
trigger1 = stateno = 1600 && AnimElemtime(13) >= 3 && AnimElemtime(16) < 0 && movehit
trigger2 = stateno = 1600 && AnimElemtime(13) >= 3 && AnimElemtime(16) < 0 && moveguarded
trigger2 = Random <= 100

;------------------------------------------------------------------------------

[State AI]
type = ChangeState
value = ifelse(Random <= 500,ifelse(Random <= 500,3400,3200),ifelse(Random <= 500,4000,3100))
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 1000 && power <= 1999
triggerall = p2bodydist x = [-30,60]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = stateno = 1620 && AnimElemtime(5) > 0 && AnimElemtime(7) < 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,7000,6200)
triggerall = var(59) = 1
triggerall = var(40) <= 0
triggerall = power >= 2000
triggerall = p2bodydist x = [-30,60]
triggerall = enemynear(var(58)),statetype != A
Trigger1 = stateno = 1620 && AnimElemtime(5) > 0 && AnimElemtime(7) < 0 && MoveHit

;------------------------------------------------------------------------------

;四百弐拾七式・轢鉄(XI)
[State -3,hk]
type = ChangeState
value = ifelse(Random <= 500,1640,1645)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-20,40]
;triggerall = p2bodydist y = [-40-floor(11*(enemynear(var(58)),vel y)+(11*(11+1)/2)*fvar(20)),20-floor(11*(enemynear(var(58)),vel y)+(11*(11+1)/2)*fvar(20))]
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
trigger1 = stateno = 1600 && AnimElemtime(13) >= 3 && AnimElemtime(16) < 0 && movehit

;------------------------------------------------------------------------------
;四百壱式・罪詠み
[State -3, tumi]
type = ChangeState
value  = 1710
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = movehit
trigger1 = stateno = 1700 && AnimElemtime(13) >= 5 && AnimElemtime(15) < 0

;------------------------------------------------------------------------------

[State -3,前進用]
type = ChangeState
value = 99
ctrl = 0
triggerall = var(59)
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = animtime = 0
triggerall = time > 0
trigger1 = var(50)
trigger1 = stateno = 1105 && prevstateno = 3050
trigger2 = var(49) = 1
trigger2 = stateno = 1212 || stateno = 1115
trigger2 = p2bodydist x > 40
trigger3 = var(49) = 2
trigger3 = stateno = 1212 || stateno = 1115

[State -3,停止用]
type = ChangeState
value = 0
ctrl = 0
triggerall = var(59)
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = animtime = 0
triggerall = time > 0
trigger1 = var(49) = 1
trigger1 = stateno = 1212 || stateno = 1115 

[State -3,停止用]
type = ChangeState
value = 0
ctrl = 0
triggerall = var(59)
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = animtime = 0
triggerall = time > 0
trigger1 = (var(50) = [1,2])
trigger1 = !var(49)
trigger1 = stateno = 1115 || stateno = 1600 || stateno = 1646 || stateno = 1212
trigger2 = var(50) = 3
trigger2 = stateno = 1105

;停止解除
[State -3]
type = ChangeState
value = 0
ctrl = 1
triggerall = var(59)
triggerall = var(50)
triggerall = statetype != A
triggerall = stateno = 0 || (stateno = [19,22])
triggerall = ctrl = 0
trigger1 = p2bodydist y >= 0
trigger2 = roundstate != 2

;-------------------------------------------------------------------------------
;七拾五式・改　追撃(優先項目)
;-------------------------------------------------------------------------------
[State -3, Hit];強七拾五式・改ヒット確認
type = varset
triggerall = var(59)
triggerall = var(40) > 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = stateno = 1211 && Movehit
trigger1 = Numtarget(1205)
Trigger2 = Stateno = 1211 && NumTarget(1201)
Trigger2 = Anim = 1205 && !Numtarget(1205)
var(49) = 1

[State -3, Hitr];リセット
type = varset
triggerall = var(59)
triggerall = var(49) = 1
trigger1 = stateno = [5000,5270]
trigger2 = enemynear(var(58)),statetype = L
trigger3 = enemynear(var(58)),movetype = A
trigger4 = enemynear(var(58)),movetype != H
trigger5 = enemynear(var(58)),stateno = [0,159]
trigger6 = enemynear(var(58)),ctrl=1
trigger7 = roundstate != 2
trigger8 = stateno = [3000,4999]
var(49) = 0

;-------------------------------------------------------------------------------
;七拾五式・改　追撃(優先項目)
;-------------------------------------------------------------------------------
[State -3, Hit];強七拾五式・改ヒット確認
type = varset
triggerall = var(59)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = stateno = 1211 && Movehit
trigger1 = Numtarget(1205)
Trigger2 = Stateno = 1211 && NumTarget(1201)
Trigger2 = Anim = 1205 && !Numtarget(1205)
var(49) = 2

[State -3, Hitr];リセット
type = varset
triggerall = var(59)
triggerall = var(49) = 2
trigger1 = stateno = [5000,5270]
trigger2 = enemynear(var(58)),statetype = L
trigger3 = enemynear(var(58)),movetype = A
trigger4 = enemynear(var(58)),movetype != H
trigger5 = enemynear(var(58)),stateno = [0,159]
trigger6 = enemynear(var(58)),ctrl=1
trigger7 = roundstate != 2
var(49) = 0

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;浮かせからの連続技
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[State -3, Hitr];リセット
type = varset
triggerall = var(59)
triggerall = var(50)
trigger1 = stateno = [5000,5270]
trigger2 = enemynear(var(58)),statetype = L
trigger3 = enemynear(var(58)),movetype = A
trigger4 = enemynear(var(58)),movetype != H
trigger5 = enemynear(var(58)),stateno = [0,159]
trigger6 = enemynear(var(58)),ctrl=1
trigger7 = roundstate != 2
trigger8 = stateno = 1100 || stateno = 1110 || stateno = 1405 || stateno = 1610 || stateno = 1700 
trigger9 = (stateno = [3000,4999])
trigger9 = stateno != 4010
var(50) = 0

;---------------------------------------------------------------------------

[State -3, Hit];強七拾五式・改ヒット確認
type = varset
triggerall = var(59)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = stateno = 1211 && Movehit
trigger1 = Numtarget(1205)
Trigger2 = Stateno = 1211 && NumTarget(1201)
Trigger2 = Anim = 1205 && !Numtarget(1205)
var(50) = 1

;---------------------------------------------------------------------------

[State -3,hth];四百弐拾七式・轢鉄(XI)ヒット確認
type = varset
triggerall = var(59)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = stateno = 1641 && movehit
trigger2 = stateno = 1646 && movehit
var(50) = 2

;---------------------------------------------------------------------------

[State -3, Hit];強七拾五式・改ヒット確認
type = varset
triggerall = var(59)
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = stateno = 1500 && movehit
var(50) = 3

;---------------------------------------------------------------------------

;裏百八式・大蛇薙
[State -3, OROCHI]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(50) = 1
triggerall = power >= 4000 && var(40) <= 0 
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = frontedgebodydist > 60
triggerall = p2bodydist y >= -45-floor(19*(enemynear(var(58)),vel y)+(19*(19+1)/2)*fvar(20))
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;裏百八式・大蛇薙
[State -3, OROCHI]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(50) = 1
triggerall = power >= 3000 && var(40) <= 0 
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = frontedgebodydist > 60
triggerall = p2bodydist y >= -45-floor(19*(enemynear(var(58)),vel y)+(19*(19+1)/2)*fvar(20))
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;裏百八式・大蛇薙
[State -3, OROCHI]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(50) = 1
triggerall = power >= 2000 && var(40) <= 0 
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = frontedgebodydist > 60
triggerall = p2bodydist y >= -45-floor(19*(enemynear(var(58)),vel y)+(19*(19+1)/2)*fvar(20))
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;裏百八式・大蛇薙
[State -3, OROCHI]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(50) = 1
triggerall = power >= 1000 && var(40) <= 0 
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = frontedgebodydist > 60
triggerall = p2bodydist y >= -45-floor(19*(enemynear(var(58)),vel y)+(19*(19+1)/2)*fvar(20))
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;MAX発動
[State -3,MAX]
type = ChangeState
value = 900
triggerall = var(59)
triggerall = var(57) >= 1 && var(40) <= 0
triggerall = var(50) = 1 && var(49) != 0
triggerall = power >= 1000 && (palno = [6,12])
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist < 10 || enemynear(var(58)),frontedgebodydist < 10
triggerall = p2bodydist x = [-25,50]
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;百拾四式・荒咬み
[State -3,ag]
type = ChangeState
value = 1600
triggerall = var(59)
triggerall = var(57) >= 1 && var(40) <= 0
triggerall = var(50) = 1 && var(49) != 0
triggerall = power < 1000 && (palno = [6,12])
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist < 10 || enemynear(var(58)),frontedgebodydist < 10
triggerall = p2bodydist x = [-25,50]
triggerall = p2bodydist y = [-25-floor(20*(enemynear(var(58)),vel y)+(20*(20+1)/2)*fvar(20)),20-floor(14*(enemynear(var(58)),vel y)+(14*(14+1)/2)*fvar(20))]
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;百拾四式・荒咬み
[State -3,ag]
type = ChangeState
value = 1600
triggerall = var(59)
triggerall = var(57) >= 1 && var(40) <= 0
triggerall = var(50) = 1 && var(49) != 0
triggerall = palno = [1,5]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist < 10 || enemynear(var(58)),frontedgebodydist < 10
triggerall = p2bodydist x = [-25,50]
triggerall = p2bodydist y = [-25-floor(20*(enemynear(var(58)),vel y)+(20*(20+1)/2)*fvar(20)),20-floor(14*(enemynear(var(58)),vel y)+(14*(14+1)/2)*fvar(20))]
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

[State -1, Charge]
type = ChangeState
value = 1500
triggerall = var(59)
triggerall = var(50) = 1
triggerall = power < 1000 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist > 20
triggerall = enemynear(var(58)),stateno != [120,155]
Triggerall = P2BodyDist X = [0+floor(18*(EnemyNear(var(58)),vel X)),150+floor(18*(EnemyNear(var(58)),vel X))]
Triggerall = P2bodydist y = [-70-floor(18*(EnemyNear(var(58)),vel Y)+(18*(18+1)/2)*fvar(20)),0-floor(8*(EnemyNear(var(58)),vel Y)+(8*(8+1)/2)*fvar(20))]
Triggerall = P2StateType = A && p2movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[State -3,hoy]
type = ChangeState
value = 1510
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 2 && var(40) <= 0
triggerall = power < 1000
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist < 10 || enemynear(var(58)),frontedgebodydist < 10
triggerall = p2bodydist x = [-20,40]
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

[State -3,hoy]
type = ChangeState
value = 1110
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 2 && var(40) <= 0
triggerall = power >= 1000
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist < 10 || enemynear(var(58)),frontedgebodydist < 10
triggerall = p2bodydist x = [-20,40]
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

;百拾四式・荒咬み
[State -3,ag]
type = ChangeState
value = 1600
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 3 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-25,40]
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;強百壱式・朧車
[State -3, S oboro]
type = ChangeState
value = ifelse(Random <= 500,1510,1700)
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 3
triggerall = var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;-----------------------------------------------------------------------------
;壁コン　フィニッシュ
;-----------------------------------------------------------------------------
;空中裏百八式・大蛇薙
[State -3, OROCHI A]
type = ChangeState
value = 3050
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = frontedgebodydist <= 60
triggerall = movehit
trigger1 = stateno = 1111 
trigger1 = time = 17
trigger1 = movecontact
trigger2 = stateno = 1510
trigger2 = time = 31
trigger2 = movecontact
trigger3 = stateno = 1730 && movecontact
trigger3 = time = 8
trigger3 = movecontact

[State -3]
type = ChangeState
value = ifelse(Random <= 500,3100,3400)
triggerall = var(59) = 1
triggerall = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
triggerall = Random <= 200
triggerall = var(40) <= 0
triggerall = power >= 1000 && power <= 1999
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = movehit
trigger1 = stateno = 1111 && AnimElem = 1, > 0 && movecontact

[State -3]
type = ChangeState
value = 6200
triggerall = var(59) = 1
triggerall = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
triggerall = Random <= 300
triggerall = var(40) <= 0
triggerall = power >= 2000 && power <= 2999
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = movehit
trigger1 = stateno = 1111 && AnimElem = 1, > 0 && movecontact

[State -3]
type = ChangeState
value = ifelse(Random <= 500,3100,3400)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(40) <= 0
triggerall = power >= 3000 && power <= 3999
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = movehit
trigger1 = stateno = 1111 && AnimElem = 1, > 0 && movecontact

[State -3]
type = ChangeState
value = 6000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 4000 && var(40) <= 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = movehit
trigger1 = stateno = 1111 && AnimElem = 1, > 0 && movecontact

;強空中独楽屠り
[State -3, S ARED]
type = ChangeState
value = 1815
triggerall = var(59)
triggerall = var(57) >= 3
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Pos Y < -20
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [120,159]
triggerall = enemynear(var(58)),stateno != [5040,5049]
triggerall = enemynear(var(58)),movetype = H
triggerall = enemynear(var(58)),Pos Y < -20
triggerall = p2bodydist X <= 50
trigger1 = stateno = 610 && movehit
trigger2 = stateno = 640 && movehit
trigger3 = stateno = 645 && movehit

[State -3]
Type = ChangeState
Value = 1110
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [30+floor(12*(EnemyNear(floor(fvar(37))),vel X)),50+floor(12*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = P2bodydist y <= 0-floor(12*(EnemyNear(floor(fvar(37))),vel Y)+(12*12/2)*fvar(20))
TriggerAll = P2bodydist y >= -120-floor(12*(EnemyNear(floor(fvar(37))),vel Y)+(12*12/2)*fvar(20))
TriggerAll = EnemyNear(fvar(37)),facing != facing
TriggerAll = EnemyNear(fvar(37)),animtime = [-25,-12]
TriggerAll = EnemyNear(fvar(37)),vel x >= 0 || EnemyNear(fvar(37)),BackEdgeBodyDist < 15
TriggerAll = Statetype != A && p2movetype = A
TriggerAll = P2Statetype != L && P2statetype != A
Trigger1 = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || stateno = 22 || (stateno = 52 && Time >= 3) || stateno = 100
Trigger2 = stateno = 215 || stateno = 210 || stateno = 410 || stateno = 400

;弱百式・鬼焼き
[State -3, L ONI]
Type = ChangeState
Value = 1100
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = var(52)!= 6
TriggerAll = var(51) = 0 && var(17) > 0
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= ((var(57) * 12.5) * var(56))
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),Vel Y < 0
TriggerAll = EnemyNear(var(58)),StateType = A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType = H
TriggerAll = EnemyNear(var(58)),StateNo != [5040,5049]
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5270]
TriggerAll = EnemyNear(var(58)),StateNo != [5710,5715]
TriggerAll = P2BodyDist X = [-25,50]
TriggerAll = P2BodyDist Y = [-50-floor(6*(EnemyNear(var(58)),Vel Y)+(6*(6+1)/2)*fvar(20)),-20-floor(6*(EnemyNear(var(58)),Vel Y)+(6*(6+1)/2)*fvar(20))]
Trigger1 = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])

;弱百式・鬼焼き
[State -3, L ONI]
Type = ChangeState
Value = 1100
TriggerAll = var(59) = 1
TriggerAll = var(57) = [1,4]
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = (var(57) = [1,2]) && Random <= 100 || (var(57) = [3,4]) && Random <= 50
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateNo != [5710,5715]
TriggerAll = EnemyNear(var(58)),Facing != Facing
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])
Trigger1 = P2BodyDist X = [-5,50]

;強百式・鬼焼き
[State -3, S ONI]
Type = ChangeState
Value = 1110
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= ((var(57) * 12.5) * var(56))
TriggerAll = Random <= 600 || var(57) >= 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType = A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateNo != [5020,5040]
TriggerAll = EnemyNear(var(58)),Facing != Facing
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
Trigger1 = P2BodyDist X = [-10+floor(8*(EnemyNear(var(58)),Vel X)),50+floor(8*(EnemyNear(var(58)),Vel X))]
Trigger1 = P2BodyDist Y = [-50-floor(8*(EnemyNear(var(58)),Vel Y)+(8*(8+1)/2)*fvar(20)),0-floor(8*(EnemyNear(var(58)),Vel Y)+(8*(8+1)/2)*fvar(20))]

;強百式・鬼焼き
[State -3, S ONI]
Type = ChangeState
Value = 1110
TriggerAll = var(59) = 1
TriggerAll = var(57) = [1,4]
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = (var(57) = [1,2]) && Random <= 50 || (var(57) = [3,4]) && Random <= 25
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType != H
TriggerAll = EnemyNear(var(58)),StateNo != [5710,5715]
TriggerAll = EnemyNear(var(58)),Facing != Facing
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])
Trigger1 = P2BodyDist X = [-5,50]

;強百式・鬼焼き
[State -3, S ONI]
Type = ChangeState
Value = 1110
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = var(52) = 4
TriggerAll = var(51) < 5
TriggerAll = RoundState = 2 && EnemyNear(var(58)),life > 0 && fvar(22) = 0
TriggerAll = Random <= (200 + (var(57) * 100))
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = H
TriggerAll = EnemyNear(var(58)),StateType = A
TriggerAll = EnemyNear(var(58)),StateNo != [120,159]
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5299]
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,102]) || (StateNo = [120,149])
Trigger1 = P2BodyDist X = [-5,50]
Trigger1 = P2BodyDist Y = [-50-floor(5*(EnemyNear(var(58)),Vel Y)+(5*(5+1)/2)*fvar(20)),0-floor(5*(EnemyNear(var(58)),Vel Y)+(5*(5+1)/2)*fvar(20))]

[State -3]
Type = ChangeState
Value = 1100
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [45+floor(12*(EnemyNear(floor(fvar(37))),vel X)),70+floor(12*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = P2bodydist y <= 0-floor(12*(EnemyNear(floor(fvar(37))),vel Y)+(12*12/2)*fvar(20))
TriggerAll = P2bodydist y >= -120-floor(12*(EnemyNear(floor(fvar(37))),vel Y)+(12*12/2)*fvar(20))
TriggerAll = EnemyNear(fvar(37)),facing != facing
TriggerAll = EnemyNear(fvar(37)),animtime = [-25,-12]
TriggerAll = EnemyNear(fvar(37)),vel x <= 0 && EnemyNear(fvar(37)),BackEdgeBodyDist >= 15
TriggerAll = Statetype != A && p2movetype = A
TriggerAll = P2Statetype != L && P2statetype != A
Trigger1 = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || stateno = 22 || (stateno = 52 && Time >= 3) || stateno = 100
Trigger2 = stateno = 215 || stateno = 210 || stateno = 410 || stateno = 400

[State -3]
Type = ChangeState
Value = 1110
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [-10+floor(18*(EnemyNear(floor(fvar(37))),vel X)),70+floor(18*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = P2bodydist y <= -50-floor(18*(EnemyNear(floor(fvar(37))),vel Y)+(18*18/2)*fvar(20))
TriggerAll = P2bodydist y >= -120-floor(18*(EnemyNear(floor(fvar(37))),vel Y)+(18*18/2)*fvar(20))
TriggerAll = EnemyNear(fvar(37)),Vel x >= 0
TriggerAll = EnemyNear(fvar(37)),Vel y > 0
TriggerAll = Statetype != A && p2movetype != H
TriggerAll = P2Statetype != L && P2statetype = A
Trigger1 = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || stateno = 22 || (stateno = 52 && Time >= 3) || stateno = 100
Trigger2 = stateno = 215 || stateno = 210 || stateno = 410 || stateno = 400

[State -3]
Type = ChangeState
Value = 1110
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [-10+floor(18*(EnemyNear(floor(fvar(37))),vel X)),70+floor(18*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = Statetype != A && numtarget && movehit && p2movetype = H
TriggerAll = P2Statetype != L && p2statetype = A
Trigger1 = stateno = 215 && animelemtime(2) > 0

[State -3, Crouching Light Punch]
type = ChangeState
value = 1100
triggerall = var(59)= 1
triggerall = roundstate = 2 
triggerall = statetype != A
Triggerall = P2StateType != L
Triggerall = p2statetype = A
Trigger1 = stateno = 200 && MoveHit && P2MoveType = H
Trigger2 = stateno = 430 && MoveHit && P2MoveType = H
Trigger3 = stateno = 400 && MoveHit && P2MoveType = H
Trigger4 = stateno = 240 && MoveHit && P2MoveType = H
Trigger5 = stateno = 215 && MoveHit && P2MoveType = H
Trigger6 = stateno = 245 && MoveHit && P2MoveType = H
Trigger7 = stateno = 410 && MoveHit && P2MoveType = H
Trigger8 = stateno = 205 && MoveHit && P2MoveType = H
Trigger9 = stateno = 235 && MoveHit && P2MoveType = H

[State AI]
type = ChangeState
value = ifelse(Random <= 500,1100,700)
triggerall = palno = [1,5]
triggerall = roundstate = 2
triggerall = var(59) = 1
triggerall = p2movetype = A
triggerall = p2bodydist y = [-60,0]
triggerall = p2bodydist x = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = enemynear(fvar(37)),animtime <= -10
trigger1 = stateno = 430
trigger2 = stateno = 200
Trigger3 = stateno = 400 
Trigger4 = stateno = 240 
Trigger5 = stateno = 215
Trigger6 = stateno = 410
Trigger7 = stateno = 205
Trigger8 = stateno = 235

[State AI]
type = ChangeState
value = 1100
triggerall = palno = [1,5]
triggerall = roundstate = 2
triggerall = var(59) = 1
triggerall = P2StateType = A
triggerall = p2bodydist y = [-60,0]
triggerall = p2bodydist x = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = enemynear(fvar(37)),animtime <= -10
trigger1 = stateno = 240
trigger2 = stateno = 430
trigger3 = stateno = 200
Trigger4 = stateno = 400 
Trigger5 = stateno = 215
Trigger6 = stateno = 410
Trigger7 = stateno = 205

[State AI]
type = ChangeState
value = 15000
triggerall = palno = [6,12]
triggerall = roundstate = 2
triggerall = var(59) = 1
triggerall = p2movetype = A
triggerall = p2bodydist y = [-60,0]
triggerall = p2bodydist x = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = enemynear(fvar(37)),animtime <= -10
trigger1 = stateno = 430
trigger2 = stateno = 200
Trigger3 = stateno = 400 
Trigger4 = stateno = 240 
Trigger5 = stateno = 215
Trigger6 = stateno = 410
Trigger7 = stateno = 205
Trigger8 = stateno = 235

[State AI]
type = ChangeState
value = 15000
triggerall = palno = [6,12]
triggerall = roundstate = 2
triggerall = var(59) = 1
triggerall = P2StateType = A
triggerall = p2bodydist y = [-60,0]
triggerall = p2bodydist x = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),50+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = enemynear(fvar(37)),animtime <= -10
trigger1 = stateno = 240
trigger2 = stateno = 430
trigger3 = stateno = 200
Trigger4 = stateno = 400 
Trigger5 = stateno = 215
Trigger6 = stateno = 410
Trigger7 = stateno = 205

[State -3]
Type = ChangeState
Value = 1110
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [-10+floor(18*(EnemyNear(floor(fvar(37))),vel X)),60+floor(18*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = P2bodydist y <= -50-floor(18*(EnemyNear(floor(fvar(37))),vel Y)+(18*18/2)*fvar(20))
TriggerAll = P2bodydist y >= -120-floor(18*(EnemyNear(floor(fvar(37))),vel Y)+(18*18/2)*fvar(20))
TriggerAll = Statetype != A && numtarget && movehit && p2movetype = H
TriggerAll = P2Statetype != L && p2statetype = A
trigger1 = var(1) = [1,2]

[State -3]
Type = ChangeState
Value = 1110
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [-10+floor(18*(EnemyNear(floor(fvar(37))),vel X)),60+floor(18*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = P2bodydist y <= -50-floor(18*(EnemyNear(floor(fvar(37))),vel Y)+(18*18/2)*fvar(20))
TriggerAll = P2bodydist y >= -120-floor(18*(EnemyNear(floor(fvar(37))),vel Y)+(18*18/2)*fvar(20))
TriggerAll = Statetype != A && !numtarget
TriggerAll = P2Statetype != L && p2statetype = A
trigger1 = var(1) = [1,2]

[State -3]
Type = ChangeState
Value = 1100
TriggerAll = RoundState = 2
TriggerAll = var(59) = 1
TriggerAll = P2bodydist X = [-10+floor(8*(EnemyNear(floor(fvar(37))),vel X)),60+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
TriggerAll = P2bodydist y <= 0-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*8/2)*fvar(20))
TriggerAll = P2bodydist y >= -60-floor(8*(EnemyNear(floor(fvar(37))),vel Y)+(8*8/2)*fvar(20))
TriggerAll = Statetype != A && numtarget && movehit && p2movetype = H
TriggerAll = P2Statetype != L && p2statetype = A
trigger1 = var(1) = [1,2]

[State -3,ｵｱ?angshen ]
type = ChangeState
value = 1350
TriggerAll = (palno = [1,5]) && life > 300 										  
triggerall = var(59) = 1 && statetype != A
triggerall = enemynear(var(58)),name != "Iori Yagami"
triggerall = enemynear(var(58)),name != "K9999"
triggerall = EnemyNear(floor(fvar(37))),movetype = A
triggerall = EnemyNear(floor(fvar(37))),statetype != A
triggerall = ctrl || stateno = [120,159] 
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
trigger1 =  p2bodydist x >= 0 && p2bodydist x <= 70

[State -3,ｵｱ?angshen ]
type = ChangeState
value = 100
TriggerAll = (palno = [1,5]) && life > 300 									  
triggerall = var(59) = 1 && statetype != A 
triggerall = enemynear(var(58)),name != "Iori Yagami"
triggerall = enemynear(var(58)),name = "K9999"
triggerall = EnemyNear(floor(fvar(37))),movetype = A
triggerall = EnemyNear(floor(fvar(37))),statetype != A
triggerall = ctrl || stateno = [120,159] 
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
trigger1 = p2bodydist x >= 0 && p2bodydist x <= 70

[State -3,ｵｱ?angshen ]
type = ChangeState
value = 105
TriggerAll = (palno = [1,5]) && life > 300 	 								  
triggerall = var(59) = 1 && statetype != A 
triggerall = enemynear(var(58)),name = "Iori Yagami"
triggerall = enemynear(var(58)),name != "K9999"
triggerall = EnemyNear(floor(fvar(37))),movetype = A
triggerall = EnemyNear(floor(fvar(37))),statetype != A
triggerall = ctrl || stateno = [120,159] 
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
trigger1 = p2bodydist x >= 0 && p2bodydist x <= 70

[State -3,ｵｱ?angshen ]
type = ChangeState
value = 15000
TriggerAll = (palno = [1,5]) && life <= 300 	 								  
triggerall = var(59) = 1 && statetype != A 
triggerall = EnemyNear(floor(fvar(37))),movetype = A
triggerall = EnemyNear(floor(fvar(37))),statetype != A
triggerall = ctrl || stateno = [120,159] 
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
trigger1 = p2bodydist x >= 0 && p2bodydist x <= 70

[State -3,ｵｱ?angshen ]
type = ChangeState
value = 15000
TriggerAll = palno = [6,12] 	 								  
triggerall = var(59) = 1 && statetype != A 
triggerall = EnemyNear(floor(fvar(37))),movetype = A
triggerall = EnemyNear(floor(fvar(37))),statetype != A
triggerall = ctrl || stateno = [120,159] 
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
trigger1 = p2bodydist x >= 0 && p2bodydist x <= 70

[State -3, Back Step]
type = ChangeState
value = 1350
triggerall = var(59) = 1
Triggerall = RoundState = 2
TriggerAll = StateType != A
triggerall = P2MoveType = A
triggerall = P2StateType != L
TriggerAll = P2BodyDist X = [-10,70]
TriggerAll = P2StateType != A
TriggerAll = P2StateType != A
TriggerAll = EnemyNear(floor(fvar(37))),facing != facing
TriggerAll = EnemyNear(floor(fvar(37))),Prevstateno = [150,151]
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
TriggerAll = EnemyNear(floor(fvar(37))),HitDefAttr = SCA, AA, AP
TriggerAll = Random<= 999 && MoveGuarded
Trigger1 = Stateno = 200 || Stateno = 205
Trigger2 = Stateno = 215 || Stateno = 210
Trigger3 = Stateno = 230 || Stateno = 235
Trigger4 = Stateno = 240 || Stateno = 400
Trigger5 = Stateno = 410 || Stateno = 430

[State -3, Back Step]
type = ChangeState
value = 1350
triggerall = var(59) = 1
Triggerall = RoundState = 2
TriggerAll = StateType != A
triggerall = P2MoveType = A
TriggerAll = P2StateType != A
triggerall = P2StateType != L
TriggerAll = P2BodyDist X = [-10,70]
TriggerAll = P2BodyDist Y >= -60 
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) 
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -18
TriggerAll = EnemyNear(floor(fvar(37))),facing != facing
TriggerAll = BackEdgeBodyDist >= 20
TriggerAll = Random<= 999
triggerall = EnemyNear(floor(fvar(37))),Time >=30 || Time <= 2 || var(57) >= 1
trigger1 = EnemyNear(floor(fvar(37))),Time >=50 || var(57) >= 1
Trigger2 = (PrevStateNo=[5000,5270]) || prevstateno = 5201
Trigger3 = (PrevStateNo=[120,159])

[State -3]
type = ChangeState
value = 36
triggerall = var(59)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2BodyDist X = [-10,150+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22 || stateno = 52|| prevstateno = [5000,5010]
triggerall = P2MoveType = H && ProjHitTime(1000) = [1,40]
trigger1 = P2StateType != A
trigger1 = !InGuardDist

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1410
triggerall = var(59) = 1
triggerall = var(40) = [101,1000] 
triggerall = statetype!= A
triggerall = P2statetype!= A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
triggerall = movehit
trigger1 = stateno = 400
trigger2 = stateno = 430
trigger3 = stateno = 210
trigger4 = stateno = 215 
trigger5 = stateno = 245  
trigger6 = stateno = 320 
Trigger7 = StateNo = 310
Trigger8 = StateNo = 315
Trigger9 = StateNo = 235
trigger10 = stateno = 410

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1110
triggerall = var(59) = 1
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype!= A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1405
trigger1 = movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1210
triggerall = var(59) = 1
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype!= A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111
trigger1 = movehit

;---------------------------------------------------------------------------

[State -1, Charge]
type = ChangeState
value = 1500
triggerall = var(59)
triggerall = var(50) = 1
triggerall = var(40) = [101,1000]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),stateno != [120,155]
Triggerall = P2BodyDist X = [0+floor(18*(EnemyNear(var(58)),vel X)),150+floor(18*(EnemyNear(var(58)),vel X))]
Triggerall = P2bodydist y = [-70-floor(18*(EnemyNear(var(58)),vel Y)+(18*(18+1)/2)*fvar(20)),0-floor(8*(EnemyNear(var(58)),vel Y)+(8*(8+1)/2)*fvar(20))]
Triggerall = P2StateType = A && p2movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[State -3, S oboro]
type = ChangeState
value = 1600
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 3
TriggerAll = palno = [1,5]
triggerall = var(40) = [101,1000]
triggerall = frontedgebodydist > 60
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[State -3, S oboro]
type = ChangeState
value = 1400
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 3
TriggerAll = palno = [1,5]
triggerall = var(40) = [101,1000]
triggerall = frontedgebodydist <= 60
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[State -3, S oboro]
type = ChangeState
value = 1600
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = var(50) = 3
TriggerAll = palno = [6,12]
triggerall = var(40) = [101,1000]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1610
triggerall = var(59) = 1
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1600 && AnimElem = 16

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1620
triggerall = var(59) = 1
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1610 
trigger1 = movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1700
triggerall = var(59) = 1
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1620
trigger1 = movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1110
triggerall = var(59) = 1
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1710 
trigger1 = movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 3100
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [1,100]
triggerall = power < 1000 
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = 6200
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [1,100]
triggerall = power >= 1000 && power <= 1999
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = ifelse(Random <= 500,3200,3100)
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [1,100]
triggerall = power >= 2000 && power <= 2999
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = 7000
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [1,100]
triggerall = power >= 3000 
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1110
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1405 
trigger1 = movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1210
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

;---------------------------------------------------------------------------

[State -1, Charge]
type = ChangeState
value = 1501
triggerall = var(59)
TriggerAll = palno = [1,5]
triggerall = var(50) = 1
triggerall = var(40) = [1,100]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),stateno != [120,155]
Triggerall = P2BodyDist X = [0+floor(18*(EnemyNear(var(58)),vel X)),150+floor(18*(EnemyNear(var(58)),vel X))]
Triggerall = P2bodydist y = [-70-floor(18*(EnemyNear(var(58)),vel Y)+(18*(18+1)/2)*fvar(20)),0-floor(8*(EnemyNear(var(58)),vel Y)+(8*(8+1)/2)*fvar(20))]
Triggerall = P2StateType = A && p2movetype = H
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 3050
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) = [1,100]
triggerall = statetype = A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1501 && AnimElem = 7

[state -1,BC]
type = changestate
value = 3050
triggerall = var(59) = 1
TriggerAll = palno = [1,5]
triggerall = var(40) > 0
triggerall = statetype = A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
triggerall = frontedgebodydist <= 60
trigger1 = stateno = 1111 
trigger1 = time = 17

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = ifelse(Random <= 500,3200,3100)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [1,100]
triggerall = power < 1000 
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = ifelse(Random <= 500,7000,6200)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [1,100]
triggerall = power >= 1000 && power <= 1999
triggerall = frontedgebodydist > 60
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = ifelse(Random <= 500,3200,3100)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [1,100]
triggerall = power >= 2000 && power <= 2999
triggerall = frontedgebodydist > 60
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = ifelse(Random <= 500,7000,3200)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [1,100]
triggerall = power >= 3000 
triggerall = frontedgebodydist > 60
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

[state -1,BC]
type = changestate
value = 1210
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [1,100]
triggerall = power >= 1000
triggerall = frontedgebodydist <= 60
triggerall = statetype!= A
triggerall = p2statetype != A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

;---------------------------------------------------------------------------
;百拾四式・荒咬み
[State -3,ag]
type = ChangeState
value = 1601
triggerall = var(59)
triggerall = var(57) >= 1 && (palno = [6,12])
triggerall = var(50) = 1 && var(49) != 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
Triggerall = EnemyNear(var(58)),BackEdgeBodyDist < 10 || enemynear(var(58)),frontedgebodydist < 10
triggerall = p2bodydist x = [-25,50]
trigger1 = stateno = 900 && AnimElem = 5

;---------------------------------------------------------------------------

;四百弐拾七式・轢鉄(XI)
[State -3,hk]
type = ChangeState
value = 1645
triggerall = var(59)
triggerall = var(57) >= 1 && (palno = [6,12])
triggerall = var(40) = [101,1000]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-20,40]
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
trigger1 = stateno = 1601 && AnimElemtime(13) >= 3 && AnimElemtime(16) < 0 && movehit

;---------------------------------------------------------------------------

;強百式・鬼焼き
[State -3,hoy]
type = ChangeState
value = 1110
triggerall = var(59)
triggerall = var(57) >= 1 && (palno = [6,12])
triggerall = var(50) = 2 && var(40) > 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-20,40]
trigger1 = ctrl || stateno = 0 || (stateno = [19,22]) || (stateno = [99,101]) || stateno = 115 || (stateno = [120,149])

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1602
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1111 
trigger1 = movehit

;---------------------------------------------------------------------------

;四百弐拾七式・轢鉄(XI)
[State -3,hk]
type = ChangeState
value = 1640
triggerall = var(59)
triggerall = life > 500
triggerall = var(57) >= 1 && (palno = [6,12])
triggerall = var(40) = [101,1000]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-20,40]
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
trigger1 = stateno = 1602 && AnimElemtime(13) >= 3 && AnimElemtime(16) < 0 && movehit

;百弐拾七式?八錆
[State -3,hk]
type = ChangeState
value = 1650
triggerall = var(59)
triggerall = life <= 500
triggerall = var(57) >= 1 && (palno = [6,12])
triggerall = var(40) = [101,1000]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = p2bodydist x = [-20,40]
triggerall = enemynear(var(58)),backedgebodydist < 10 || enemynear(var(58)),frontedgebodydist < 10
trigger1 = stateno = 1602 && AnimElemtime(13) >= 3 && AnimElemtime(16) < 0 && movehit

;---------------------------------------------------------------------------

[state -1,BC]
type = changestate
value = 1502
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) = [101,1000]
triggerall = statetype!= A
triggerall = p2statetype = A
triggerall = p2movetype = H
triggerall = enemy,alive = 1
trigger1 = stateno = 1641
trigger1 = time = 33

;外式・砌穿ち
[State -3, MIGIRI]
type = ChangeState
value = 1655
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(40) > 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype != A
triggerall = enemynear(var(58)),movetype = H
trigger1 = prevstateno = 1602
trigger1 = StateNo = 1650 && AnimElemtime(5) >= 10 && AnimElemtime(6) < 0 && Movehit

;---------------------------------------------------------------------------

;空中裏百八式・大蛇薙
[State -3, OROCHI A]
type = ChangeState
value = 3050
triggerall = var(59) = 1
triggerall = var(57) >= 1
TriggerAll = palno = [6,12]
triggerall = var(40) > 0
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = H
triggerall = movehit
trigger1 = stateno = 1502 

[State AI]
type = ChangeState
value = ifelse(Random <= 500,7000,3200)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) > 0
triggerall = power >= 2000
triggerall = enemynear(var(58)),statetype != A
Trigger1 = stateno = 1655 && AnimElemtime(5) > 0 && AnimElemtime(7) < 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,7000,6200)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) > 0
triggerall = power >= 1000
triggerall = enemynear(var(58)),statetype != A
Trigger1 = stateno = 1655 && AnimElemtime(5) > 0 && AnimElemtime(7) < 0 && MoveHit

[State AI]
type = ChangeState
value = ifelse(Random <= 500,3000,3200)
triggerall = var(59) = 1
TriggerAll = palno = [6,12]
triggerall = var(40) > 0
triggerall = power < 1000
triggerall = enemynear(var(58)),statetype != A
Trigger1 = stateno = 1655 && AnimElemtime(5) > 0 && AnimElemtime(7) < 0 && MoveHit

;---------------------------------------------------------------------------

[State -3, KuzuKaze]
Type = ChangeState
Value = 15000
TriggerAll = var(59)
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = var(54) = 0 
triggerall = (palno = [1,5]) && life <= 300
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= var(57) * 125 || var(57) > 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateNo < 1000 && EnemyNear(var(58)),AnimTime <= -1 || EnemyNear(var(58)),StateNo < 2000 && EnemyNear(var(58)),AnimTime >= -25 || EnemyNear(var(58)),StateNo >= 2000 && EnemyNear(var(58)),AnimTime >= -4
TriggerAll = EnemyNear(var(58)),Time >= 50-var(56)*5 || var(38)
TriggerAll = InGuardDist || !InGuardDist && !Helper(20000+ID),InGuardDist || var(38)
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [99,101]) || (StateNo = [120,149]) || (var(1) = [1,2]) && !MoveContact && MoveType != H
Trigger1 = P2BodyDist X = [-40+floor(4*(EnemyNear(var(58)),vel X)),45+floor(4*(EnemyNear(var(58)),vel X))]

[State -3, KuzuKaze]
Type = ChangeState
Value = 15000
TriggerAll = var(59)
TriggerAll = var(57) >= 1 && (var(57) < 4 && Random <= (200 + (var(57) * 200)) || var(57) >= 4)
TriggerAll = var(54) = 0 
triggerall = palno = [6,12]
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = Random <= var(57) * 125 || var(57) > 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateNo < 1000 && EnemyNear(var(58)),AnimTime <= -1 || EnemyNear(var(58)),StateNo < 2000 && EnemyNear(var(58)),AnimTime >= -25 || EnemyNear(var(58)),StateNo >= 2000 && EnemyNear(var(58)),AnimTime >= -4
TriggerAll = EnemyNear(var(58)),Time >= 50-var(56)*5 || var(38)
TriggerAll = InGuardDist || !InGuardDist && !Helper(20000+ID),InGuardDist || var(38)
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [99,101]) || (StateNo = [120,149]) || (var(1) = [1,2]) && !MoveContact && MoveType != H
Trigger1 = P2BodyDist X = [-40+floor(4*(EnemyNear(var(58)),vel X)),45+floor(4*(EnemyNear(var(58)),vel X))]

[State -3, KUZUKAZE]
Type = ChangeState
Value = 15000
TriggerAll = var(59) = 1
TriggerAll = var(57) >= 1 
triggerall = palno = [6,12]
TriggerAll =(var(52)!= [5,6]) && var(54) = 0
TriggerAll = RoundState = 2 && EnemyNear(var(58)),Life > 0 && fvar(22) = 0
TriggerAll = EnemyNear(var(58)),Time >= 50-var(56)*5 || (!Time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= 500 
TriggerAll = StateType != A
TriggerAll =!EnemyNear(var(58)),Ctrl
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll = EnemyNear(var(58)),StateType != L
TriggerAll = EnemyNear(var(58)),MoveType = A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),Facing != Facing
TriggerAll = EnemyNear(var(58)),Time >= 50-var(56)*5 || var(38) || var(56) > 9
TriggerAll = Random < 50 || EnemyNear(var(58)),StateNo < 2000
TriggerAll =!Enemy,NumProj
TriggerAll = InGuardDist 
TriggerAll = Ctrl || (StateNo = [20,22]) || (StateNo = [100,101]) || (StateNo = [120,149]) || (var(1) = [1,2]) && !MoveContact && MoveType != H
Trigger1 = P2BodyDist X = [-10+floor(9*(EnemyNear(var(58)),Vel X)),40+floor(9*(EnemyNear(var(58)),Vel X))]
Trigger1 = EnemyNear(var(58)),AnimTime <= -9

[State -1]
type = ChangeState
value = 15000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(54) = 0
triggerall = palno = [6,12]
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = Random <= var(57) * 125
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [30,49]
triggerall = enemynear(var(58)),stateno != 105
triggerall = enemynear(var(58)),stateno != [150,155]
triggerall = enemynear(var(58)),stateno != [5100,5299]
triggerall = enemynear(var(58)),stateno != [5710,5715]
triggerall = p2bodydist X = [-10,40]
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149])

;---------------------------------------------------------------------------
;AI用p2name
;---------------------------------------------------------------------------
;特殊地上受け身なし
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = 1
fvar(21) = 0

;特殊地上受け身持ち1(高め)
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = enemynear(var(58)),authorname = "ahuron"
trigger1 = enemynear(var(58)),name != "SHIN" || enemynear(var(58)),name != "REI" || enemynear(var(58)),name != "JAGI" || enemynear(var(58)),name != "THOUTHER"
trigger1 = enemynear(var(58)),name != "Shinnosuke Kagami" || enemynear(var(58)),name != "Mukuro"
trigger1 = enemynear(var(58)),name != "Misuzu"
trigger2 = enemynear(var(58)),authorname = "jin"
trigger3 = enemynear(var(58)),authorname = "Chin-ya"
trigger4 = enemynear(var(58)),authorname = "kayui uma"
trigger4 = enemynear(var(58)),name ="anna" || enemynear(var(58)),name ="henri" || enemynear(var(58)),name ="mora" || enemynear(var(58)),name ="saya" || enemynear(var(58)),name ="dragon"
trigger5 = enemynear(var(58)),authorname = "aoba"
trigger6 = enemynear(var(58)),authorname = "Mikita"
fvar(21) = 1

;特殊地上受け身持ち2
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = enemynear(var(58)),authorname = "ikaruga"
trigger2 = enemynear(var(58)),authorname = "warusaki3"
trigger3 = enemynear(var(58)),authorname = "Gonzo-"
fvar(21) = 2

;---------------------------------------------------------------------------
;行動制限
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = 1
fvar(22) = 0

;行動するな
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = enemynear(var(58)),stateno = [5200,5210]
trigger2 = enemynear(var(58)),stateno = 702
trigger2 = enemynear(var(58)),authorname = "ahuron"
trigger3 = enemynear(var(58)),stateno = [52000,52100]
fvar(22) = 1

;この下、一行以上空ける事！