;必殺技・超必殺技のステート


;===========================================================================
;---------------------------------------------------------------------------
;▼竜巻疾風斬（弱） 地上▼

[Statedef 1000]
type    = S
movetype= A
physics = N
juggle = 0
poweradd= Ceil(91*FVar(3))
velset = 0, 0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 0]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1000, 1] ;斬るでヤンス！
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S10, 5
channel = 0

[State 1000, 2] ;回る音
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S1000, 0

[State 1000, 3] ;竜巻のエフェクト
type = Helper
trigger1 = AnimElemTime(1) = 0
id = 4100
helpertype = Normal
name = "Hurricane"
stateno = 4100
pos = 0, 0
postype = P1
supermovetime = 999999*(Var(16) > 0)
pausemovetime = 999999*(Var(16) > 0)

[State 1000, 4]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(8) < 0
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 3, Hit
damage = Ceil(IfElse(Var(18) = 0, 66, 83)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 1, 2
guard.pausetime = 1, 0
sparkno = S4006
guard.sparkno = 40
sparkxy = -10, -38
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 40, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -8*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
forcestand = 0
fall = 1
fall.recovertime = 41
id = 1000
nochainid = 9998, 9999
getpower = Ceil(30*FVar(3)), Ceil(30*FVar(3))
givepower = 15, 15

[State 1000, 5] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1000, 6] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(4*FVar(2) > 2, 4*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1000, 7] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1000)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1000
value = 5910
ignorehitpause = 1
persistent = 0

[State 1000, 8] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1000, 9]
type = StateTypeSet
trigger1 = AnimElemTime(7) >= 0
statetype = A
physics = N

[State 1000, 10]
type = VelSet
trigger1 = AnimElemTime(9) = 0
y = -1

[State 1000, 11]
type = ChangeState
trigger1 = AnimElemTime(9) >= 0
value = 1001
ctrl = 0


;---------------------------------------------------------------------------
;▼竜巻疾風斬（弱） 上昇▼
[Statedef 1001]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
sprpriority = 2

[State 1001, 0]
type = ChangeAnim
trigger1 = !(Anim = 1000 && AnimElemTime(9) >= 0)
value = 1000
elem = 9

[State 1001, 1]
type = VelAdd
trigger1 = Time > 0
trigger1 = AnimElemTime(21) >= 0
y = 0.5;-0.154321

[State 1001, 2] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1001, 3] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(4*FVar(2) > 2, 4*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1001, 4] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1000)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1000
value = 5910
ignorehitpause = 1
persistent = 0

[State 1001, 5] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1001, 6]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(10) = 0 || AnimElemTime(11) = 0
trigger2 = AnimElemTime(13) = 0 || AnimElemTime(14) = 0 || AnimElemTime(15) = 0
trigger3 = AnimElemTime(17) = 0 || AnimElemTime(18) = 0 || AnimElemTime(19) = 0
trigger4 = AnimElemTime(21) = 0 || AnimElemTime(22) = 0 || AnimElemTime(23) = 0
trigger5 = AnimElemTime(25) = 0 || AnimElemTime(26) = 0 || AnimElemTime(27) = 0
trigger6 = AnimElemTime(29) = 0 || AnimElemTime(30) = 0 || AnimElemTime(31) = 0
trigger7 = AnimElemTime(33) = 0 || AnimElemTime(34) = 0 || AnimElemTime(35) = 0
trigger8 = AnimElemTime(37) = 0 || AnimElemTime(38) = 0 || AnimElemTime(39) = 0
trigger9 = AnimElemTime(41) = 0 || AnimElemTime(42) = 0 || AnimElemTime(43) = 0
value = 1001
ctrl = 0

[State 1001, 7]
type = VelSet
trigger1 = AnimElemTime(21) = 0
y = -7.76

[State 1001, 8]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
trigger2 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
trigger3 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger4 = AnimElemTime(14) >= 0 && AnimElemTime(15) < 0
trigger5 = AnimElemTime(15) >= 0 && AnimElemTime(16) < 0
trigger6 = AnimElemTime(17) >= 0 && AnimElemTime(18) < 0
trigger7 = AnimElemTime(18) >= 0 && AnimElemTime(19) < 0
trigger8 = AnimElemTime(19) >= 0 && AnimElemTime(20) < 0
trigger9 = AnimElemTime(21) >= 0 && AnimElemTime(22) < 0
trigger10 = AnimElemTime(22) >= 0 && AnimElemTime(23) < 0
trigger11 = AnimElemTime(23) >= 0 && AnimElemTime(24) < 0
trigger12 = AnimElemTime(25) >= 0 && AnimElemTime(26) < 0
trigger13 = AnimElemTime(26) >= 0 && AnimElemTime(27) < 0
trigger14 = AnimElemTime(27) >= 0 && AnimElemTime(28) < 0
trigger15 = AnimElemTime(29) >= 0 && AnimElemTime(30) < 0
trigger16 = AnimElemTime(30) >= 0 && AnimElemTime(31) < 0
trigger17 = AnimElemTime(31) >= 0 && AnimElemTime(32) < 0
trigger18 = AnimElemTime(33) >= 0 && AnimElemTime(34) < 0
trigger19 = AnimElemTime(34) >= 0 && AnimElemTime(35) < 0
trigger20 = AnimElemTime(35) >= 0 && AnimElemTime(36) < 0
trigger21 = AnimElemTime(37) >= 0 && AnimElemTime(38) < 0
trigger22 = AnimElemTime(38) >= 0 && AnimElemTime(39) < 0
trigger23 = AnimElemTime(39) >= 0 && AnimElemTime(40) < 0
trigger24 = AnimElemTime(41) >= 0 && AnimElemTime(42) < 0
trigger25 = AnimElemTime(42) >= 0 && AnimElemTime(43) < 0
trigger26 = AnimElemTime(43) >= 0 && AnimElemTime(44) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 3, Hit
damage = Ceil(IfElse(Var(18) = 0, 66, 83)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 1, 2
guard.pausetime = 1, 0
sparkno = S4006
guard.sparkno = 40
sparkxy = -10, -38
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 40, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
forcestand = 0
fall = 1
fall.recovertime = 41
id = 1000
nochainid = 9998, 9999
getpower = Ceil(30*FVar(3)), Ceil(30*FVar(3))
givepower = 15, 15

[State 1001, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 1002
ctrl = 0

;---------------------------------------------------------------------------
;▼竜巻疾風斬（弱） 下降▼

[Statedef 1002]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 2
anim = 1002

[State 1002, 0]
type = VelAdd
trigger1 = Time > 0
y = 0.5

[State 1002, 1]
type = AttackDist
trigger1 = 1
value = 0

[State 1002, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1002, 3]
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 1002, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1003
ctrl = 0


;---------------------------------------------------------------------------
;▼竜巻疾風斬（弱） 着地▼

[Statedef 1003]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 2
anim = 1003

[State 1003, 0]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1013, 1]
type = PosSet
trigger1 = 1
y = 0

[State 1003, 2]
type = AttackDist
trigger1 = 1
value = 0

[State 1003, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼竜巻疾風斬（弱） どこキャン▼

[Statedef 1009]
type    = U
movetype= U
physics = U

[State 1009, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1009, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1009, 2]
type = ChangeState
trigger1 = Time = 0
value = 1000
ctrl = 0

;---------------------------------------------------------------------------
;▼竜巻疾風斬（強） 地上▼

[Statedef 1010]
type    = S
movetype= A
physics = N
juggle = 0
poweradd= Ceil(91*FVar(3))
velset = 0, 0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1010, 0] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1010, 1] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(4*FVar(2) > 2, 4*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1010, 2] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1010)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1010
value = 5910
ignorehitpause = 1
persistent = 0

[State 1010, 3] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1010, 4]
type = VelSet
trigger1 = StateType = A
x = 4*(Var(57) = 1)

[State 1010, 5]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1010, 6]
type = VelAdd
trigger1 = AnimElemTime(1) = 0
x = 5

[State 1010, 7] ;斬るでヤンス！
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S10, 5
channel = 0

[State 1010, 8] ;回る音
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S1000, 0

[State 1010, 9] ;竜巻のエフェクト
type = Helper
trigger1 = AnimElemTime(1) = 0
id = 4100
helpertype = Normal
name = "Hurricane"
stateno = 4100
pos = 0, 0
postype = P1
supermovetime = 999999*(Var(16) > 0)
pausemovetime = 999999*(Var(16) > 0)

[State 1010, 10]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(4) = 0 && AnimElemTime(8) < 0
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 3, Hit
damage = Ceil(IfElse(Var(18) = 0, 66, 83)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 1, 2
guard.pausetime = 1, 0
sparkno = S4006
guard.sparkno = 40
sparkxy = -10, -38
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 40, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -8*1.3
airguard.cornerpush.veloff = -4*1.3
forcestand = 0
fall = 1
fall.recovertime = 41
id = 1010
nochainid = 9998, 9999
getpower = Ceil(30*FVar(3)), Ceil(30*FVar(3))
givepower = 15, 15

[State 1010, 11]
type = StateTypeSet
trigger1 = AnimElemTime(7) >= 0
statetype = A
physics = N

[State 1010, 12]
type = VelSet
trigger1 = StateType = A
trigger1 = AnimElemTime(9) >= 0
y = -1

[State 1010, 13]
type = ChangeState
trigger1 = AnimElemTime(9) >= 0
value = 1011
ctrl = 0


;---------------------------------------------------------------------------
;▼竜巻疾風斬（強） 上昇▼
[Statedef 1011]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
sprpriority = 2

[State 1011, 0]
type = VelSet
trigger1 = 1
x = 4*(Var(57) = 1)

[State 1011, 1]
type = ChangeAnim
trigger1 = !(Anim = 1010 && AnimElemTime(9) >= 0)
value = 1010
elem = 9

[State 1011, 2]
type = VelAdd
trigger1 = Time > 0
trigger1 = AnimElemTime(29) >= 0
y = 0.5;-0.228269

[State 1011, 3] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1011, 4] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(4*FVar(2) > 2, 4*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1011, 5] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1010)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1010
value = 5910
ignorehitpause = 1
persistent = 0

[State 1011, 6] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1011, 7]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(10) = 0 || AnimElemTime(11) = 0
trigger2 = AnimElemTime(13) = 0 || AnimElemTime(14) = 0 || AnimElemTime(15) = 0
trigger3 = AnimElemTime(17) = 0 || AnimElemTime(18) = 0 || AnimElemTime(19) = 0
trigger4 = AnimElemTime(21) = 0 || AnimElemTime(22) = 0 || AnimElemTime(23) = 0
trigger5 = AnimElemTime(25) = 0 || AnimElemTime(26) = 0 || AnimElemTime(27) = 0
trigger6 = AnimElemTime(29) = 0 || AnimElemTime(30) = 0 || AnimElemTime(31) = 0
trigger7 = AnimElemTime(33) = 0 || AnimElemTime(34) = 0 || AnimElemTime(35) = 0
trigger8 = AnimElemTime(37) = 0 || AnimElemTime(38) = 0 || AnimElemTime(39) = 0
trigger9 = AnimElemTime(41) = 0 || AnimElemTime(42) = 0 || AnimElemTime(43) = 0
trigger10 = AnimElemTime(45) = 0 || AnimElemTime(46) = 0 || AnimElemTime(47) = 0
trigger11 = AnimElemTime(49) = 0 || AnimElemTime(50) = 0 || AnimElemTime(51) = 0
value = 1011
ctrl = 0

[State 1011, 8]
type = VelSet
trigger1 = AnimElemTime(29) = 0
y = -12.19

[State 1011, 9]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
trigger2 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
trigger3 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger4 = AnimElemTime(14) >= 0 && AnimElemTime(15) < 0
trigger5 = AnimElemTime(15) >= 0 && AnimElemTime(16) < 0
trigger6 = AnimElemTime(17) >= 0 && AnimElemTime(18) < 0
trigger7 = AnimElemTime(18) >= 0 && AnimElemTime(19) < 0
trigger8 = AnimElemTime(19) >= 0 && AnimElemTime(20) < 0
trigger9 = AnimElemTime(21) >= 0 && AnimElemTime(22) < 0
trigger10 = AnimElemTime(22) >= 0 && AnimElemTime(23) < 0
trigger11 = AnimElemTime(23) >= 0 && AnimElemTime(24) < 0
trigger12 = AnimElemTime(25) >= 0 && AnimElemTime(26) < 0
trigger13 = AnimElemTime(26) >= 0 && AnimElemTime(27) < 0
trigger14 = AnimElemTime(27) >= 0 && AnimElemTime(28) < 0
trigger15 = AnimElemTime(29) >= 0 && AnimElemTime(30) < 0
trigger16 = AnimElemTime(30) >= 0 && AnimElemTime(31) < 0
trigger17 = AnimElemTime(31) >= 0 && AnimElemTime(32) < 0
trigger18 = AnimElemTime(33) >= 0 && AnimElemTime(34) < 0
trigger19 = AnimElemTime(34) >= 0 && AnimElemTime(35) < 0
trigger20 = AnimElemTime(35) >= 0 && AnimElemTime(36) < 0
trigger21 = AnimElemTime(37) >= 0 && AnimElemTime(38) < 0
trigger22 = AnimElemTime(38) >= 0 && AnimElemTime(39) < 0
trigger23 = AnimElemTime(39) >= 0 && AnimElemTime(40) < 0
trigger24 = AnimElemTime(41) >= 0 && AnimElemTime(42) < 0
trigger25 = AnimElemTime(42) >= 0 && AnimElemTime(43) < 0
trigger26 = AnimElemTime(43) >= 0 && AnimElemTime(44) < 0
trigger27 = AnimElemTime(45) >= 0 && AnimElemTime(46) < 0
trigger28 = AnimElemTime(46) >= 0 && AnimElemTime(47) < 0
trigger29 = AnimElemTime(47) >= 0 && AnimElemTime(48) < 0
trigger30 = AnimElemTime(49) >= 0 && AnimElemTime(50) < 0
trigger31 = AnimElemTime(50) >= 0 && AnimElemTime(51) < 0
trigger32 = AnimElemTime(51) >= 0 && AnimElemTime(52) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 3, Hit
damage = Ceil(IfElse(Var(18) = 0, 66, 83)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 1, 2
guard.pausetime = 1, 0
sparkno = S4006
guard.sparkno = 40
sparkxy = -10, -38
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 40, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
forcestand = 0
fall = 1
fall.recovertime = 41
id = 1010
nochainid = 9998, 9999
getpower = Ceil(30*FVar(3)), Ceil(30*FVar(3))
givepower = 15, 15

[State 1011, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 1012
ctrl = 0


;---------------------------------------------------------------------------
;▼竜巻疾風斬（強） 下降▼

[Statedef 1012]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 2
anim = 1012

[State 1012, 0]
type = VelAdd
trigger1 = Time > 0
y = 0.5

[State 1012, 1]
type = AttackDist
trigger1 = 1
value = 0

[State 1012, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1012, 3]
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 1012, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1013
ctrl = 0


;---------------------------------------------------------------------------
;▼竜巻疾風斬（強） 着地▼

[Statedef 1013]
type = S
movetype = A
physics = S
ctrl = 0
sprpriority = 2
anim = 1013

[State 1013, 0]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1013, 1]
type = PosSet
trigger1 = 1
y = 0

[State 1013, 2]
type = AttackDist
trigger1 = 1
value = 0

[State 1013, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼竜巻疾風斬（強） どこキャン▼

[Statedef 1019]
type    = U
movetype= U
physics = U

[State 1019, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1019, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1019, 2]
type = ChangeState
trigger1 = Time = 0
value = 1010
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱） 進行方向分岐▼
[Statedef 1050]
type = A
movetype = A
physics = N
anim = 1050
juggle = 0
poweradd = Ceil(8*FVar(3))
sprpriority = 1
ctrl = 0

[State 1050, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1050, 1] ;飛翔音
type = PlaySnd
trigger1 = Time = 0
value = S1200, 0

[State 1050, 2] ;ウッキィー！
type = PlaySnd
trigger1 = Time = 0
value = S10, 6
channel = 0

[State 1050, 3]
type = VarRangeSet
trigger1 = Time = 0
first = 5
last = 6
value = 0

[State 1050, 4]
type = VelSet
trigger1 = 1
y = -8.75

[State 1050, 5]
type = ChangeState
trigger1 = Var(59) = 0 && Command = "holdfwd"
value = 1052
ctrl = 0

[State 1050, 6]
type = ChangeState
triggerall = Var(59) > 0
trigger1 = FrontEdgeBodyDist < 20 && P2MoveType = A
trigger2 = FrontEdgeBodyDist < 30 && P2MoveType = H
trigger3 = FrontEdgeBodyDist > 40 && P2StateType = A
trigger3 = P2StateType != L && P2MoveType != H
value = 1052
ctrl = 0

[State 1050, 7]
type = ChangeState
trigger1 = 1
value = 1051
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱） 後ろへ飛ぶ▼
[Statedef 1051]
type = A
movetype = A
physics = N
anim = 1050
sprpriority = 1
ctrl = 0

[State 1051, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1051, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1051, 2]
type = VelSet
trigger1 = 1
x = -7.5
ignorehitpause = 1

[State 1051, 3]
type = ChangeState
trigger1 = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1051, 4]
type = AttackDist
trigger1 = 1
value = 0

[State 1051, 5]
type = VelAdd
trigger1 = Time > 0
y = 0.35

[State 1051, 6]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1051, 7] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Time > 2
triggerall = Var(59) = 0 || Var(54) = 1
trigger1 = Command != "holda"
value = 1053
ctrl = 0

[State 1051, 8] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Time > 2
triggerall = Var(59) > 0 && Var(54) > 1
trigger1 = P2MoveType != H && P2StateType != A
trigger1 = Random < IfElse(Var(54) < 3, 50, 200)*Var(54)
value = 1053
ctrl = 0

[State 1051, 9] ;壁貼りつきへ
type = ChangeState
triggerall = Time > 2
trigger1 = BackEdgeBodyDist <= 10
value = 1055
ctrl = 0

[State 1051, 10]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱） 前へ飛ぶ▼
[Statedef 1052]
type = A
movetype = A
physics = N
anim = 1050
sprpriority = 1
ctrl = 0

[State 1052, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1052, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1052, 2]
type = Turn
trigger1 = 1
persistent = 0

[State 1052, 3]
type = VelSet
trigger1 = 1
x = -7.5
ignorehitpause = 1

[State 1052, 4]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1052, 5]
type = AttackDist
trigger1 = 1
value = 0

[State 1052, 6]
type = VelAdd
trigger1 = Time > 0
y = 0.35

[State 1052, 7]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1052, 8] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Var(59) = 0 || Var(54) = 1
trigger1 = Command != "holda"
value = 1053
ctrl = 0

[State 1052, 9] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Var(59) > 0 && Var(54) > 1
trigger1 = P2MoveType != H && P2StateType != A
trigger1 = Random < IfElse(Var(54) < 3, 50, 200)*Var(54)
value = 1053
ctrl = 0

[State 1052, 9] ;壁貼りつきへ
type = ChangeState
triggerall = Time > 2
trigger1 = BackEdgeBodyDist <= 10
value = 1055
ctrl = 0

[State 1052, 10]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱） 三角跳びに派生▼
[Statedef 1053]
type = A
movetype = A
physics = N
anim = 1050
sprpriority = 1
ctrl = 0

[State 1053, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1053, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1053, 2]
type = VelSet
trigger1 = 1
x = -7.5
ignorehitpause = 1

[State 1053, 3]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1053, 4]
type = AttackDist
trigger1 = 1
value = 0

[State 1053, 5]
type = VelAdd
trigger1 = Time > 0
y = 0.35

[State 1053, 6]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1053, 7] ;壁貼りつきへ
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
value = 1056
ctrl = 0

[State 1053, 8]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱） 壁はりつき→旋風飛猿刺突▼

[Statedef 1055]
type = A
movetype = A
physics = N
anim = 50
velset = 0, 0
poweradd = Ceil(45*FVar(3))
sprpriority = 1
ctrl = 0

[State 1055, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1055, 1]
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1055, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1055, 3]
type = AttackDist
trigger1 = 1
value = 0

[State 1055, 4]
type = ChangeAnim
trigger1 = Anim = 50 && AnimTime = 0
value = 1134

[State 1055, 5]
type = VelSet
trigger1 = Anim = 1134
x = 7.5/1.41
y = 7.5/1.41

[State 1055, 6]
type = ChangeState
trigger1 = Anim = 1134
value = 1070
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱強共通） 壁はりつき→三角降り▼

[Statedef 1056]
type = A
movetype = A
physics = N
anim = 50
velset = 0, 0
sprpriority = 1
ctrl = 0

[State 1056, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1056, 1]
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1056, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1056, 3]
type = AttackDist
trigger1 = 1
value = 0

[State 1056, 4]
type = ChangeAnim
trigger1 = Anim = 50 && AnimTime = 0
value = 1055

[State 1056, 5]
type = VelSet
trigger1 = Anim = 1055
x = Const(Velocity.Jump.Back.X)

[State 1056, 6]
type = CtrlSet
trigger1 = Anim = 1055
value = 1

[State 1056, 7]
type = StateTypeSet
trigger1 = Anim = 1055
movetype = I
physics = A


;---------------------------------------------------------------------------
;▼飛翔空裂斬（弱） どこキャン▼

[Statedef 1059]
type    = U
movetype= U
physics = U

[State 1059, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1059, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1059, 2]
type = ChangeState
trigger1 = Time = 0
value = 1050
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（強） 進行方向分岐▼
[Statedef 1060]
type = A
movetype = A
physics = N
anim = 1050
juggle = 0
poweradd = Ceil(8*FVar(3))
sprpriority = 1
ctrl = 0

[State 1060, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1060, 1] ;飛翔音
type = PlaySnd
trigger1 = Time = 0
value = S1200, 0

[State 1060, 2] ;ウッキィー！
type = PlaySnd
trigger1 = Time = 0
value = S10, 6
channel = 0

[State 1060, 3]
type = VarRangeSet
trigger1 = Time = 0
first = 5
last = 6
value = 0

[State 1060, 4]
type = VelSet
trigger1 = Time = 0
y = -8.35

[State 1060, 5]
type = ChangeState
trigger1 = Var(59) = 0 && Command = "holdfwd"
value = 1062
ctrl = 0

[State 1060, 6]
type = ChangeState
triggerall = Var(59) > 0
trigger1 = FrontEdgeBodyDist < 20 && P2MoveType = A
trigger2 = FrontEdgeBodyDist < 30 && P2MoveType = H
trigger3 = FrontEdgeBodyDist > 40 && P2StateType = A
trigger3 = P2StateType != L && P2MoveType != H
value = 1062
ctrl = 0

[State 1060, 7]
type = ChangeState
trigger1 = Time = 0
value = 1061
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（強） 後ろへ飛ぶ▼
[Statedef 1061]
type = A
movetype = A
physics = N
anim = 1050
sprpriority = 1
ctrl = 0

[State 1061, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1061, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1061, 2]
type = VelSet
trigger1 = 1
x = -7.5
ignorehitpause = 1

[State 1061, 3]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1061, 4]
type = AttackDist
trigger1 = 1
value = 0

[State 1061, 5]
type = VelAdd
trigger1 = Time > 0
y = 0.35

[State 1061, 6]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1061, 7] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Time > 2
triggerall = Var(59) = 0 || Var(54) = 1
trigger1 = Command != "holdb"
value = 1053
ctrl = 0

[State 1061, 8] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Time > 2
triggerall = Var(59) > 0 && Var(54) > 1
trigger1 = Var(59) > 0
trigger1 = P2MoveType != H
trigger1 = Random < IfElse(Var(54) < 3, 50, 200)*Var(54)
value = 1053
ctrl = 0

[State 1061, 8] ;壁貼りつきへ
type = ChangeState
triggerall = Time > 2
trigger1 = BackEdgeBodyDist <= 10
value = 1065
ctrl = 0

[State 1061, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（強） 前へ飛ぶ▼
[Statedef 1062]
type = A
movetype = A
physics = N
anim = 1050
sprpriority = 1
ctrl = 0

[State 1062, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1062, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1062, 2]
type = Turn
trigger1 = 1
persistent = 0

[State 1062, 3]
type = VelSet
trigger1 = 1
x = -7.5
ignorehitpause = 1

[State 1062, 4]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1062, 5]
type = AttackDist
trigger1 = 1
value = 0

[State 1062, 6]
type = VelAdd
trigger1 = Time > 0
y = 0.35

[State 1062, 7]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1062, 8] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Var(59) = 0 || Var(54) = 1
trigger1 = Command != "holdb"
value = 1053
ctrl = 0

[State 1062, 9] ;三角跳びに派生するルートへ
type = ChangeState
triggerall = BackEdgeBodyDist > 10
triggerall = Var(59) > 0 && Var(54) > 1
trigger1 = P2MoveType != H
trigger1 = Random < IfElse(Var(54) < 3, 50, 200)*Var(54)
value = 1053
ctrl = 0

[State 1062, 9] ;壁貼りつきへ
type = ChangeState
triggerall = Time > 2
trigger1 = BackEdgeBodyDist <= 10
value = 1065
ctrl = 0

[State 1062, 10]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬（強） 壁はりつき→旋風飛猿刺突▼

[Statedef 1065]
type = A
movetype = A
physics = N
anim = 50
velset = 0, 0
poweradd = Ceil(45*FVar(3))
sprpriority = 1
ctrl = 0

[State 1065, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1065, 1]
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1065, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1065, 3]
type = AttackDist
trigger1 = 1
value = 0

[State 1065, 4]
type = ChangeAnim
trigger1 = Anim = 50 && AnimTime = 0
value = 1130

[State 1065, 5]
type = VelSet
trigger1 = Anim = 1130
x = 7.5

[State 1055, 6]
type = ChangeState
trigger1 = Anim = 1130
value = 1080
ctrl = 0


;---------------------------------------------------------------------------
;▼竜巻疾風斬（強） どこキャン▼

[Statedef 1069]
type    = U
movetype= U
physics = U

[State 1069, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1069, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1069, 2]
type = ChangeState
trigger1 = Time = 0
value = 1060
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬→旋風飛猿刺突（弱） 攻撃▼

[Statedef 1070]
type = A
movetype = A
physics = N
sprpriority = 2
ctrl = 0

[State 1070, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1070, 1]
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1070, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1080, 3]
type = VelAdd
trigger1 = MoveContact = 1
y = 0.29

[State 1070, 4]
type = VarSet
trigger1 = Time = 0
var(5) = 32
ignorehitpause = 1

[State 1070, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = Time >= 0
attr = A, SA
hitflag = MAF
animtype = Hard
air.animtype = Hard
guardflag = MA
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 117, 133)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
guard.sparkno = 40
sparkxy = 10, -33
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1070
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 42

[State 1070, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1070, 7] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 7
ignorehitpause = 1
persistent = 0

[State 1070, 8] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1070)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1070
value = 5910
ignorehitpause = 1
persistent = 0

[State 1070, 9]
type = VarAdd
trigger1 = Var(5) > 0
var(5) = -1

[State 1070, 10]
type = VarSet
trigger1 = Var(5) <= 0
var(5) = 0

[State 1070, 11]
type = ChangeState
trigger1 = Time > 0
trigger1 = Var(5) <= 0
value = 1071
ctrl = 0

[State 1070, 12]
type = ChangeState
triggerall = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1072
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬→旋風飛猿刺突（弱強共通） 攻撃判定消滅▼

[Statedef 1071]
type = A
movetype = A
physics = N
anim = 1138
sprpriority = 2
ctrl = 0

[State 1071, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1071, 1]
type = VelAdd
trigger1 = Time > 0
y = 0.3

[State 1071, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 1138

[State 1071, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1072
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔空裂斬→旋風飛猿刺突（弱強共通） 着地▼
[Statedef 1072]
type = S
movetype = A
physics = S
anim = 1072
sprpriority = 2
ctrl = 0

[State 1072, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1072, 1]
type = VelSet
trigger1 = 1
y = 0

[State 1072, 2]
type = PosSet
trigger1 = 1
y = 0

[State 1072, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼飛翔空裂斬→旋風飛猿刺突（強） 攻撃▼

[Statedef 1080]
type = A
movetype = A
physics = N
sprpriority = 2
ctrl = 0

[State 1080, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1080, 1]
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1080, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1080, 3]
type = VelAdd
trigger1 = MoveContact
y = 0.29

[State 1080, 4]
type = VarSet
trigger1 = Time = 0
var(5) = 32
ignorehitpause = 1

[State 1080, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = Time >= 0
attr = A, SA
hitflag = MAF
animtype = Hard
air.animtype = Hard
guardflag = MA
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 83, 100)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 13
sparkno = S4006
guard.sparkno = 40
sparkxy = 10, -33
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1080
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 42

[State 1080, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1080, 7] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 10
ignorehitpause = 1
persistent = 0

[State 1080, 8] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1080)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1080
value = 5910
ignorehitpause = 1
persistent = 0

[State 1080, 9]
type = VarAdd
trigger1 = Var(5) > 0
var(5) = -1

[State 1080, 10]
type = VarSet
trigger1 = Var(5) <= 0
var(5) = 0

[State 1080, 11]
type = ChangeState
trigger1 = Time > 0
trigger1 = Var(5) <= 0
value = 1071
ctrl = 0

[State 1080, 12]
type = ChangeState
triggerall = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1072
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（弱） 地上での動作▼

[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1100
poweradd = Ceil(106*FVar(3))
sprpriority = 2
ctrl = 0

[State 1100, 0]
type = VarRangeSet
trigger1 = Time = 0
value = 0
first = 5
last = 6

[State 1100, 1]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1100, 2] ;刺すでヤンス！
type = PlaySnd
trigger1 = Time = 0
value = S10, 7
channel = 0

[State 1100, 3]
type = ChangeAnim
trigger1 = Anim = 1100 && AnimTime = 0
value = 1130

[State 1100, 4]
type = VelSet
trigger1 = Anim = 1130
x = 7.5
y = -5.125

[State 1100, 5] ;方向を変える音
type = PlaySnd
trigger1 = Anim = 1130
value = S1100, 0

[State 1100, 6]
type = ChangeState
trigger1 = Anim = 1130
value = 1101
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（弱） 攻撃▼
[Statedef 1101]
type = A
movetype = A
physics = N
sprpriority = 2
ctrl = 0

[State 1101, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1101, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1101, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1101, 3]
type = VelAdd
trigger1 = Time > 0
y = 0.25

[State 1101, 4]
type = VarSet
trigger1 = Time = 0
var(5) = 32 +7
ignorehitpause = 1

[State 1101, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = Var(5) <= 32
attr = A, SA
hitflag = MAF
animtype = Hard
air.animtype = Hard
guardflag = MA
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 92, 117)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
guard.sparkno = 40
sparkxy = 10, -33
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1100
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 42

[State 1101, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1101, 7] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
trigger1 = 1
fvar(18) = 10
ignorehitpause = 1
persistent = 0

[State 1101, 8] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1100)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1100
value = 5910
ignorehitpause = 1
persistent = 0

[State 1101, 9]
type = VarAdd
trigger1 = Var(5) > 0
var(5) = -1

[State 1101, 10]
type = VarSet
trigger1 = Var(5) <= 0
var(5) = 0

[State 1101, 11]
type = ChangeState
triggerall = Time > 0
trigger1 = Var(5) <= 0
value = 1102
ctrl = 0

[State 1101, 12]
type = ChangeState
triggerall = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1103
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（弱） 攻撃判定消滅▼

[Statedef 1102]
type = A
movetype = A
physics = N
anim = 1138
sprpriority = 2
ctrl = 0

[State 1102, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1102, 1]
type = VelAdd
trigger1 = Time > 0
y = 0.25

[State 1102, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 1138

[State 1102, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1103
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（弱） 着地▼
[Statedef 1103]
type = S
movetype = A
physics = S
anim = 1103
sprpriority = 2
ctrl = 0

[State 1103, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1103, 1]
type = VelSet
trigger1 = 1
y = 0

[State 1103, 2]
type = PosSet
trigger1 = 1
y = 0

[State 1103, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（弱） どこキャン▼

[Statedef 1109]
type    = U
movetype= U
physics = U

[State 1109, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1109, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1109, 2]
type = ChangeState
trigger1 = Time = 0
value = 1100
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（強） 地上での動作▼

[Statedef 1110]
type = S
movetype = A
physics = S
anim = 1110
poweradd = Ceil(106*FVar(3))
sprpriority = 2
ctrl = 0

[State 1110, 0]
type = VarRangeSet
trigger1 = Time = 0
value = 0
first = 5
last = 6

[State 1110, 1]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1110, 2] ;刺すでヤンス！
type = PlaySnd
trigger1 = Time = 0
value = S10, 7
channel = 0

[State 1110, 3]
type = ChangeAnim
trigger1 = Anim = 1110 && AnimTime = 0
value = 1130

[State 1110, 4]
type = VelSet
trigger1 = Anim = 1130
x = 7.5
y = -5.125

[State 1110, 5] ;方向を変える音
type = PlaySnd
trigger1 = Anim = 1130
value = S1100, 0

[State 1110, 6]
type = ChangeState
trigger1 = Anim = 1130
value = 1111
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（強） 攻撃▼
[Statedef 1111]
type = A
movetype = A
physics = N
sprpriority = 2
ctrl = 0

[State 1111, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1111, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1111, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1111, 3]
type = VelAdd
trigger1 = Time > 0
y = 0.25

[State 1111, 4]
type = VarSet
trigger1 = Time = 0
var(5) = 32 +7
ignorehitpause = 1

[State 1111, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = Var(5) <= 32
attr = A, SA
hitflag = MAF
animtype = Hard
air.animtype = Hard
guardflag = MA
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 100, 117)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
guard.sparkno = 40
sparkxy = 10, -33
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1110
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 42

[State 1111, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1111, 7] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 10
ignorehitpause = 1
persistent = 0

[State 1111, 8] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1110)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1110
value = 5910
ignorehitpause = 1
persistent = 0

[State 1111, 9]
type = VarAdd
trigger1 = Var(5) > 0
var(5) = -1

[State 1111, 10]
type = VarSet
trigger1 = Var(5) <= 0
var(5) = 0

[State 1111, 11]
type = ChangeState
triggerall = Time > 0
trigger1 = Var(5) <= 0
value = 1112
ctrl = 0

[State 1111, 12]
type = ChangeState
triggerall = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1113
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（強） 攻撃判定消滅▼

[Statedef 1112]
type = A
movetype = A
physics = N
anim = 1138
sprpriority = 2
ctrl = 0

[State 1112, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1112, 1]
type = VelAdd
trigger1 = Time > 0
y = 0.25

[State 1102, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1113
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（強） 着地▼
[Statedef 1113]
type = S
movetype = A
physics = S
anim = 1113
sprpriority = 2
ctrl = 0

[State 1113, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1113, 1]
type = VelSet
trigger1 = 1
y = 0

[State 1113, 2]
type = PosSet
trigger1 = 1
y = 0

[State 1113, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（弱） どこキャン▼

[Statedef 1119]
type    = U
movetype= U
physics = U

[State 1119, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1119, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1119, 2]
type = ChangeState
trigger1 = Time = 0
value = 1110
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（前）▼

[Statedef 1120]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1020, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1020, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1020, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1120, 3]
type = VarAdd
trigger1 = Time = 0
var(6) = 1

[State 1120, 4] ;方向を変える音
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[State 1120, 5]
type = ChangeAnim
trigger1 = Anim = 1120 && AnimTime = 0
value = 1130

[State 1121, 6] ;前方へ加速
type = VelSet
trigger1 = Anim = 1130
x = 7.5

[State 1121, 7]
type = ChangeState
trigger1 = Anim = 1130
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（後ろ）▼

[Statedef 1121]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1121, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1121, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1121, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1121, 3]
type = VarAdd
trigger1 = Time = 0
var(6) = 1

[State 1121, 4] ;方向を変える音
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[State 1121, 5]
type = ChangeAnim
trigger1 = Anim = 1120 && AnimTime = 0
value = 1131

[State 1121, 6] ;後方へ加速
type = VelSet
trigger1 = Anim = 1131
x = -7.5

[State 1121, 7]
type = ChangeState
trigger1 = Anim = 1131
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（真下）▼

[Statedef 1122]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1122, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1122, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1122, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1122, 3]
type = VarAdd
trigger1 = Time = 0
var(6) = 1

[State 1122, 4] ;方向を変える音
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[State 1122, 5]
type = ChangeAnim
trigger1 = Anim = 1120 && AnimTime = 0
value = 1132

[State 1122, 6] ;下方へ加速
type = VelSet
triggerall = Var(53) = 0
trigger1 = Anim = 1132
y = 7.5

[State 1122, 7]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Anim = 1132
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（真上）▼

[Statedef 1123]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1023, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1023, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1023, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1123, 3]
type = VarAdd
trigger1 = Time = 0
var(6) = 1

[State 1123, 4] ;この音で合ってるかどうかわからん…
type = PlaySnd
trigger1 = Time = 0
value = S1100, 0

[State 1123, 5]
type = ChangeAnim
trigger1 = Anim = 1120 && AnimTime = 0
value = 1133

[State 1123, 6] ;上方へ加速
type = VelSet
triggerall = Var(53) = 0
trigger1 = Anim = 1133
y = -7.5

[State 1123, 7]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Anim = 1133
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（前斜め下）▼

[Statedef 1124]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1024, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1024, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1024, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1124, 3]
type = VarAdd
triggerall = Var(53) = 0
trigger1 = Time = 0
var(6) = 1

[State 1124, 4] ;この音で合ってるかどうかわからん…
type = PlaySnd
triggerall = Var(53) = 0
trigger1 = Time = 0
value = S1100, 0

[State 1124, 5]
type = ChangeAnim
triggerall = Var(53) = 0
trigger1 = Anim = 1120 && AnimTime = 0
value = 1134

[State 1124, 6] ;斜めに飛ぶとき
type = VelSet
triggerall = Var(53) = 0
trigger1 = Anim = 1134
x = 7.5/1.41
y = 7.5/1.41

[State 1121, 7]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Anim = 1134
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（前斜め上）▼

[Statedef 1125]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1025, 0]
type = NotHitBy
trigger1 = Var(53) = 0
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1025, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1025, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1125, 3]
type = VarAdd
triggerall = Var(53) = 0
trigger1 = Time = 0
var(6) = 1

[State 1125, 4] ;この音で合ってるかどうかわからん…
type = PlaySnd
triggerall = Var(53) = 0
trigger1 = Time = 0
value = S1100, 0

[State 1125, 5]
type = ChangeAnim
triggerall = Var(53) = 0
trigger1 = Anim = 1120 && AnimTime = 0
value = 1135

[State 1125, 6] ;斜めに飛ぶとき
type = VelSet
triggerall = Var(53) = 0
trigger1 = Anim = 1135
x = 7.5/1.41
y = -7.5/1.41

[State 1125, 7]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Anim = 1135
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（後ろ斜め上）▼

[Statedef 1126]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1026, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1026, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1026, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1126, 3]
type = VarAdd
triggerall = Var(53) = 0
trigger1 = Time = 0
var(6) = 1

[State 1126, 4] ;この音で合ってるかどうかわからん…
type = PlaySnd
triggerall = Var(53) = 0
trigger1 = Time = 0
value = S1100, 0

[State 1126, 5]
type = ChangeAnim
triggerall = Var(53) = 0
trigger1 = Anim = 1120 && AnimTime = 0
value = 1136

[State 1126, 6] ;斜めに飛ぶとき
type = VelSet
triggerall = Var(53) = 0
trigger1 = Anim = 1136
x = -7.5/1.41
y = -7.5/1.41

[State 1126, 7]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Anim = 1136
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼方向転換（後ろ斜め下）▼

[Statedef 1127]
type = A
movetype = A
physics = N
anim = 1120
sprpriority = 2
ctrl = 0
velset = 0, 0

[State 1027, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1027, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1027, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1127, 3]
type = VarAdd
triggerall = Var(53) = 0
trigger1 = Time = 0
var(6) = 1

[State 1127, 4] ;この音で合ってるかどうかわからん…
type = PlaySnd
triggerall = Var(53) = 0
trigger1 = Time = 0
value = S1100, 0

[State 1127, 5]
type = ChangeAnim
triggerall = Var(53) = 0
trigger1 = Anim = 1120 && AnimTime = 0
value = 1137

[State 1127, 6] ;斜めに飛ぶとき
type = VelSet
triggerall = Var(53) = 0
trigger1 = Anim = 1137
x = -7.5/1.41
y = 7.5/1.41

[State 1121, 7]
type = ChangeState
triggerall = Var(53) = 0
trigger1 = Anim = 1137
value = 1130
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突 追加攻撃▼
[Statedef 1130]
type = A
movetype = A
physics = N
sprpriority = 2
ctrl = 0

[State 1130, 0]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 1130, 1] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 1130, 2]
type = ChangeState
triggerall = Var(53) = 1
trigger1 = Var(19) = StateNo
value = 119
ctrl = 0

[State 1130, 3]
type = VelAdd
trigger1 = Time > 5
y = 0.25

[State 1130, 4]
type = VarSet
trigger1 = Time = 0
var(5) = 32
ignorehitpause = 1

[State 1130, 5] ;前へ飛んでいるとき
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = Time >= 0
attr = A, SA
hitflag = MAF
animtype = Hard
air.animtype = Hard
guardflag = MA
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 67, 67)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
guard.sparkno = 40
sparkxy = 10, -33
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1130
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 42

[State 1130, 6] ;後ろへ飛んでいるとき
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
triggerall = Vel X < 0
trigger1 = Time >= 0
attr = A, SA
hitflag = MAF
animtype = Hard
air.animtype = Hard
guardflag = MA
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 67, 67)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
guard.sparkno = 40
sparkxy = 10, -33
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = 10
guard.velocity = 10
air.velocity = 3, -6.38
airguard.velocity = 4, 0
ground.cornerpush.veloff = 4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 4*1.3
id = 1130
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 42

[State 1130, 7] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1130, 8] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 4
ignorehitpause = 1
persistent = 0

[State 1130, 9] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1130)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1130
value = 5910
ignorehitpause = 1
persistent = 0

[State 1130, 10]
type = VarAdd
trigger1 = Var(5) > 0
var(5) = -1

[State 1130, 11]
type = VarSet
trigger1 = Var(5) <= 0
var(5) = 0

[State 1130, 12]
type = ChangeState
trigger1 = Time > 0
trigger1 = Var(5) <= 0
value = 1138
ctrl = 0

[State 1130, 13]
type = ChangeState
triggerall = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1138
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（追加攻撃） 攻撃判定消滅▼
[Statedef 1138]
type = A
movetype = A
physics = N
sprpriority = 2
ctrl = 0

[State 1138, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1138, 1]
type = VelAdd
trigger1 = Time > 0
y = Const(Movement.YAccel)

[State 1138, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 1138

[State 1138, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1139
ctrl = 0


;---------------------------------------------------------------------------
;▼旋風飛猿刺突（追加攻撃） 着地▼
[Statedef 1139]
type = S
movetype = A
physics = S
anim = 1139
sprpriority = 2
ctrl = 0

[State 1139, 0]
type = AttackDist
trigger1 = 1
value = 0

[State 1139, 1]
type = VelSet
trigger1 = 1
y = 0

[State 1139, 2]
type = PosSet
trigger1 = 1
y = 0

[State 1139, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼飛翔脚（弱） 空中▼

[Statedef 1150]
type = A
movetype = A
physics = N
anim =1150
juggle = 3
ctrl = 0
velset = 0, 0
sprpriority = 2
poweradd = Ceil(61*FVar(3))

[State 1150, 0]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1150, 1] ;ウーッキキキキキキキィ！
type = PlaySnd
trigger1 = Time = 0
value = S10, 8
channel = 0

[State 1150, 2] ;急降下する音
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S1150, 0
persistent = 0

[State 1150, 3]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 2
y = 10

[State 1150, 4]
type = ChangeState
triggerall = MoveContact || MoveReversed
trigger1 = AnimTime = 0
value = 1151
ctrl = 0

[State 1150, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 67, 83)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 3, 4
guard.pausetime = 3, 2
sparkno = S4001
sparkxy = 6, -16
hitsound = S5, 13
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -2.5, -4
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1150
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 29

[State 1150, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1150, 7] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(11*FVar(2) > 2, 11*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1150, 8] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1150)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1150
value = 5910
ignorehitpause = 1
persistent = 0

[State 1150, 9] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1150, 10]
type = ChangeState
triggerall = 0
trigger1 = MoveContact || MoveReversed
value = 1151
ctrl = 0

[State 1150, 11]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1152
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔脚（弱） 空中（ヒット）▼

[Statedef 1151]
type = A
movetype = A
physics = N
juggle = 3
ctrl = 0
sprpriority = 2
poweradd = 0

[State 1151, 0]
type = ChangeAnim
trigger1 = Anim != 1151
value = 1151

[State 1151, 1] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1151, 2] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(11*FVar(2) > 2, 11*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1151, 3] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1150)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1150
value = 5910
ignorehitpause = 1
persistent = 0

[State 1151, 4] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1151, 5]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(2) = 0 || AnimTime = 0;AnimElemTime(3) = 0 || AnimElemTime(4) = 0
value = 1151
ctrl = 0

[State 1151, 6]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger2 = AnimElemTime(2) >= 0 && AnimTime < 0;AnimElemTime(3) < 0
;trigger3 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
;trigger4 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 67, 83)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 3, 4
guard.pausetime = 3, 2
sparkno = S4001
sparkxy = 6, -16
hitsound = S5, 13
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1150
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 34

[State 1151, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1152
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔脚（弱強共通） 着地▼

[Statedef 1152]
type = S
movetype = I
physics = S
anim = 1152
ctrl = 0
sprpriority = 2
ctrl = 0

[State 1152, 0]
type = VelSet
trigger1 = 1
y = 0

[State 1152, 1]
type = PosSet
trigger1 = 1
y = 0

[State 1152, 2]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 1152, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼飛翔脚（弱） どこキャン▼

[Statedef 1159]
type    = U
movetype= U
physics = U

[State 1159, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1159, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1159, 2]
type = ChangeState
trigger1 = Time = 0
value = 1150
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔脚（強） 空中▼

[Statedef 1160]
type = A
movetype = A
physics = N
anim =1160
juggle = 3
ctrl = 0
velset = 0, 0
sprpriority = 2
poweradd = Ceil(61*FVar(3))

[State 1160, 0]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1160, 1] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1160, 2] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(11*FVar(2) > 2, 11*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1160, 3] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1160)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1160
value = 5910
ignorehitpause = 1
persistent = 0

[State 1160, 4] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1160, 5]
type = ChangeState
trigger1 = MoveContact || MoveReversed
trigger1 = AnimTime = 0
value = 1161
ctrl = 0

[State 1160, 6] ;ウーッキキキキキキキィ！
type = PlaySnd
trigger1 = Time = 0
value = S10, 8
channel = 0

[State 1160, 7] ;
type = PlaySnd
trigger1 = AnimElemTime(2) = 0
value = S1150, 0
persistent = 0

[State 1160, 8]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 4.5
y = 10

[State 1160, 9]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 67, 83)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 3, 4
guard.pausetime = 3, 2
sparkno = S4001
sparkxy = 6, -16
hitsound = S5, 13
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1160
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 29

[State 1160, 10]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1152
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔脚（強） 空中（ヒット）▼

[Statedef 1161]
type = A
movetype = A
physics = N
juggle = 3
ctrl = 0
sprpriority = 2
poweradd = 0

[State 1161, 0]
type = ChangeAnim
trigger1 = Anim != 1151
value = 1151

[State 1161, 1] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1151, 2] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(11*FVar(2) >2, 11*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1151, 3] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1150)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1150
value = 5910
ignorehitpause = 1
persistent = 0

[State 1161, 4] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1161, 5]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(2) = 0 || AnimTime = 0
value = 1161
ctrl = 0

[State 1161, 6]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger2 = AnimElemTime(2) >= 0 && AnimTime < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 67, 83)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 3, 4
guard.pausetime = 3, 2
sparkno = S4001
sparkxy = 6, -16
hitsound = S5, 13
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -10
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -4*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
id = 1150
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15
air.fall = 1
fall.recovertime = 29

[State 1161, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1152
ctrl = 0


;---------------------------------------------------------------------------
;▼飛翔脚（強） どこキャン▼

[Statedef 1169]
type    = U
movetype= U
physics = U

[State 1169, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1169, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1169, 2]
type = ChangeState
trigger1 = Time = 0
value = 1160
ctrl = 0


;---------------------------------------------------------------------------
;▼悲猿懺（弱）攻撃終了まで▼

[Statedef 1200]
type = S
movetype = A
physics = S
juggle = 0
sprpriority = 2
ctrl = 0

[State 1200, 0]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != 1200
value = 1200

[State 1200, 1]
type = PowerAdd
trigger1 = AnimElemTime(1) = 0
value = Ceil(61*FVar(3))

[State 1200, 2]
type = VarSet
trigger1 = AnimElemTime(1) = 0
fvar(2) = 1
ignorehitpause = 1

[State 1200, 3]
type = NotHitBy
trigger1 = AnimElemTime(3) < 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 1200, 4]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
physics = N
ignorehitpause = 1

[State 1200, 5]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = 1.5
y = -7.5

[State 1200, 6] ;飛翔音
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S1200, 0

[State 1200, 7]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
trigger2 = AnimElemTime(5) >= 0 && AnimElemTime(7) < 0
attr = A, SA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(IfElse(Var(18) = 0, 75, 92)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
sparkxy = -10, -95
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recover = 0
id = IfElse(Var(18) = 0 && ((P2StateNo != [120, 159]) || P2StateType = A), 9998, 1200)
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15

[State 1200, 8] ;カウンター（1段目）
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1200, 9] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1200, 10]
type = ChangeState
trigger1 = AnimElemTime(7) >= 0
value = 1201


;---------------------------------------------------------------------------
;▼悲猿懺（弱強共通） 着地まで▼

[Statedef 1201]
type = A
movetype = A
physics = N
juggle = 0
velset = Vel X, Vel Y*0.5
sprpriority = 2
ctrl = 0

[State 1201, 0]
type = VelAdd
trigger1 = 1
y = 0.44

[State 1201, 1]
type = AttackDist
trigger1 = 1
value = 0

[State 1201, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1202


;---------------------------------------------------------------------------
;▼悲猿懺（弱強共通） 挑発▼

[Statedef 1202]
type = S
movetype = A
physics = S
anim = 1202
sprpriority = 2
ctrl =  0

[State 1202, 0]
type = VelSet
trigger1 = 1
y = 0

[State 1202, 1]
type = PosSet
trigger1 = 1
y = 0

[State 1202, 2]
type = AttackDist
trigger1 = 1
value = 0

[State 1202, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼悲猿懺（弱） どこキャン▼

[Statedef 1209]
type    = U
movetype= U
physics = U

[State 1209, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1209, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1209, 2]
type = ChangeState
trigger1 = Time = 0
value = 1200
ctrl = 0


;---------------------------------------------------------------------------
;▼悲猿懺（強）攻撃終了まで▼

[Statedef 1210]
type = S
movetype = A
physics = S
anim = 1210
juggle = 3
poweradd = Ceil(61*FVar(3))
sprpriority = 2
ctrl = 0

[State 1210, 0]
type = VarSet
trigger1 = Time = 0
fvar(2) = 1
ignorehitpause = 1

[State 1210, 1]
type = NotHitBy
trigger1 = AnimElemTime(2) < 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 1210, 2] ;1段目
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(IfElse(Var(18) = 0, 75, 92)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
sparkxy = -10, -95
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = -8*1.3
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recover = 0
id = 1210
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15

[State 1210, 3] ;カウンター
type = BGPalFX
triggerall = Var(18)
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1210, 4] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
trigger1 = MoveGuarded = 1
fvar(18) = IfElse(12*FVar(2) > 2, 12*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1210, 5] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1210)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1210
value = 5910
ignorehitpause = 1
persistent = 0

[State 1210, 6] ;半数補正
type = VarSet
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1210, 7]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
physics = N
ignorehitpause = 1

[State 1210, 8]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = 3
y = -10.6

[State 1210, 9] ;飛翔音
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S1200, 0

[State 1210, 10]
type = MoveHitReset
trigger1 = AnimElemTime(4) = 0

[State 1210, 11]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
attr = A, SA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(IfElse(Var(18) = 0, 75, 92)*FVar(2)*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4006
sparkxy = -10, -95
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recover = 0
id = IfElse(Var(18) = 0 && ((P2StateNo != [120, 159]) || P2StateType = A), 9998, 1210)
nochainid = 9998, 9999
getpower = Ceil(61*FVar(3)), Ceil(61*FVar(3))
givepower = 15, 15

[State 1210, 12] ;カウンター
type = BGPalFX
triggerall = Var(18)
triggerall = MoveHit = 1
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(6) <= 0
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1210, 13] ;ガークラ値（2段目）
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = MoveGuarded = 1
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(6) <= 0
fvar(18) = IfElse(12*FVar(2) > 2, 12*FVar(2), 2)
ignorehitpause = 1
persistent = 0

[State 1210, 14] ;ガードクラッシュ（2段目）
type = TargetState
triggerall = NumTarget(1210) || NumTarget(9998)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
triggerall = MoveGuarded = 1
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(6) <= 0
id = IfElse(NumTarget(9998), 9998, 1210)
value = 5910
ignorehitpause = 1
persistent = 0

[State 1210, 15] ;半数補正
type = VarSet
triggerall = MoveContact = 1
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(6) <= 0
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1210, 16]
type = ChangeState
trigger1 = AnimElemTime(6) >= 0
value = 1201


;---------------------------------------------------------------------------
;▼悲猿懺（強） どこキャン▼

[Statedef 1219]
type    = U
movetype= U
physics = U

[State 1219, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1219, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1219, 2]
type = ChangeState
trigger1 = Time = 0
value = 1210
ctrl = 0


;---------------------------------------------------------------------------
;▼回転飛猿斬（弱）▼

[Statedef 1250]
type = S
movetype = A
physics = S
anim = 1250
sprpriority = 2
ctrl = 0
poweradd = Ceil(30*FVar(3))

[State 1250, 0]
type = Null
triggerall = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1250, 1]
type = NotHitBy
trigger1 = AnimElemTime(3) < 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 1250, 2] ;イヨーッヒョヒョヒョヒョヒョヒョォゥ！
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S10, 9
channel = 0

[State 1250, 3]
type = VelSet
trigger1 = AnimElemTime(3) >= 0 && (AnimElemTime(21) < 0 || StateType = A)
x = 3
y = -2*(StateType = A)

[State 1250, 4]
type = ChangeState
triggerall = MoveContact || MoveReversed
trigger1 = AnimElemTime(5) = 0 || AnimElemTime(7) = 0 || AnimElemTime(9) = 0
trigger2 = AnimElemTime(11) = 0 || AnimElemTime(13) = 0 || AnimElemTime(15) = 0 || AnimElemTime(17) = 0
trigger3 = AnimElemTime(19) = 0 || AnimElemTime(21) = 0
value = 1251
ctrl = 0

[State 1250, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
trigger2 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
trigger3 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
trigger4 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
trigger5 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger6 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
trigger7 = AnimElemTime(15) >= 0 && AnimElemTime(16) < 0
trigger8 = AnimElemTime(17) >= 0 && AnimElemTime(18) < 0
trigger9 = AnimElemTime(19) >= 0 && AnimElemTime(20) < 0
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 33, 42)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 2, 3
guard.pausetime = 2, 1
sparkno = S4006
sparkxy = -10, -33
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 8
guard.slidetime = 6
ground.hittime  = 11
guard.hittime = 9
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 9
yaccel = 0.44
ground.velocity = 0
guard.velocity = 0
air.velocity = -3, -6.38
airguard.velocity = -4, 0
airguard.cornerpush.veloff = -4*1.3
air.fall = 1
fall.recovertime = 32
id = 1260
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15

[State 1250, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1250, 7] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 2
ignorehitpause = 1
persistent = 0

[State 1250, 8] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1250)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1250
value = 5910
ignorehitpause = 1
persistent = 0

[State 1250, 9] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1250, 10]
type = StateTypeSet
triggerall = MoveContact
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(21) < 0
statetype = A
physics = N

[State 1250, 11]
type = StateTypeSet
trigger1 = AnimElemTime(20) >= 0
movetype = I

[State 1250, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼回転飛猿斬（弱） 相手の上で転がる▼

[Statedef 1251]
type = A
movetype = A
physics = N
juggle = 1
sprpriority = 2
ctrl = 0

[State 1251, 0]
type = VelSet
trigger1 = Time > 0
x = 3
y = -2

[State 1251, 1]
type = ChangeAnim
trigger1 = Anim != 1251
value = 1251

[State 1251, 2]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger2 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
trigger3 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
trigger4 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
trigger5 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
trigger6 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger7 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
trigger8 = AnimElemTime(15) >= 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 33, 42)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 2, 3
guard.pausetime = 2, 1
sparkno = S4006
sparkxy = -10, -33
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 8
guard.slidetime = 6
ground.hittime  = 11
guard.hittime = 9
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 9
yaccel = 0.44
ground.velocity = 0
guard.velocity = 0
air.velocity = -3, -6.38
airguard.velocity = -4, 0
airguard.cornerpush.veloff = -4*1.3
air.fall = 1
fall.recovertime = 32
id = 1250
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15

[State 1251, 3] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1251, 4] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 2
ignorehitpause = 1
persistent = 0

[State 1251, 6] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1250)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1250
value = 5910
ignorehitpause = 1
persistent = 0

[State 1251, 7] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1251, 8]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(1) = 0 || AnimElemTime(3) = 0 || AnimElemTime(5) = 0 || AnimElemTime(7) = 0
trigger2 = AnimElemTime(9) = 0 || AnimElemTime(11) = 0 || AnimElemTime(13) = 0 || AnimElemTime(15) = 0
value = 1251
ctrl = 0

[State 1251, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 1252
ctrl = 0


;---------------------------------------------------------------------------
;▼回転飛猿斬（弱） 前方へ跳ねる▼

[Statedef 1252]
type = A
movetype = I
physics = N
anim = 42
sprpriority = 2
ctrl = 0

[State 1252, 0]
type = VelAdd
trigger1 = 1
y = 0.44

[State 1252, 1]
type = VelSet
trigger1 = Time = 0
x = Const(Velocity.AirJump.Fwd.X)
y = Const(Velocity.AirJump.Y)

[State 1252, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼回転飛猿斬（弱強共通） 着地▼

[Statedef 1255]
type = S
movetype = I
physics = S
anim = 1255
sprpriority = 2
ctrl = 0

[State 1255, 0]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼回転飛猿斬（弱） どこキャン▼

[Statedef 1259]
type    = U
movetype= U
physics = U

[State 1259, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1259, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1259, 2]
type = ChangeState
trigger1 = Time = 0
value = 1250
ctrl = 0


;---------------------------------------------------------------------------
;▼回転飛猿斬（強）▼

[Statedef 1260]
type = S
movetype = A
physics = S
anim = 1260
sprpriority = 2
ctrl = 0
poweradd = Ceil(30*FVar(3))

[State 1260, 0]
type = Null
trigger1 = Time = 0
trigger1 = FVar(2) := 1
ignorehitpause = 1

[State 1260, 1]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 1260, 2] ;イヨーッヒョヒョヒョヒョヒョヒョォゥ！
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S10, 9
channel = 0

[State 1260, 3]
type = VelSet
trigger1 = AnimElemTime(4) >= 0 && (AnimElemTime(27) < 0 || StateType = A)
x = 3
y = -2*(StateType = A)

[State 1260, 4]
type = ChangeState
triggerall = MoveContact || MoveReversed
trigger1 = AnimElemTime(6) = 0 || AnimElemTime(8) = 0 || AnimElemTime(10) = 0
trigger2 = AnimElemTime(12) = 0 || AnimElemTime(14) = 0 || AnimElemTime(16) = 0 || AnimElemTime(18) = 0
trigger3 = AnimElemTime(20) = 0 || AnimElemTime(22) = 0 || AnimElemTime(24) = 0 || AnimElemTime(26) = 0
trigger4 = AnimElemTime(28) = 0
value = 1261
ctrl = 0

[State 1260, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
trigger2 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
trigger3 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
trigger4 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
trigger5 = AnimElemTime(12) >= 0 && AnimElemTime(13) < 0
trigger6 = AnimElemTime(14) >= 0 && AnimElemTime(15) < 0
trigger7 = AnimElemTime(16) >= 0 && AnimElemTime(17) < 0
trigger8 = AnimElemTime(18) >= 0 && AnimElemTime(19) < 0
trigger9 = AnimElemTime(20) >= 0 && AnimElemTime(21) < 0
trigger10 = AnimElemTime(22) >= 0 && AnimElemTime(23) < 0
trigger11 = AnimElemTime(24) >= 0 && AnimElemTime(25) < 0
trigger12 = AnimElemTime(26) >= 0 && AnimElemTime(27) < 0
attr = S, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 33, 42)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 2, 3
guard.pausetime = 2, 1
sparkno = S4006
sparkxy = -10, -33
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 8
guard.slidetime = 6
ground.hittime  = 11
guard.hittime = 9
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 9
yaccel = 0.44
ground.velocity = 0
guard.velocity = 0
air.velocity = -3, -6.38
airguard.velocity = -4, 0
airguard.cornerpush.veloff = -4*1.3
air.fall = 1
fall.recovertime = 32
id = 1260
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15

[State 1260, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1260, 8] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 2
ignorehitpause = 1
persistent = 0

[State 1260, 9] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1260)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1260
value = 5910
ignorehitpause = 1
persistent = 0

[State 1260, 10] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1260, 11]
type = StateTypeSet
triggerall = MoveContact
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(29) < 0
statetype = A
physics = N

[State 1260, 12]
type = StateTypeSet
trigger1 = AnimElemTime(27) >= 0
movetype = I

[State 1260, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼回転飛猿斬（弱） 相手の上で転がる▼

[Statedef 1261]
type = A
movetype = A
physics = N
juggle = 1
sprpriority = 2
ctrl = 0

[State 1261, 0]
type = VelSet
trigger1 = Time > 0
x = 3
y = -2

[State 1261, 1]
type = ChangeAnim
trigger1 = Anim != 1251
value = 1251

[State 1261, 2]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
trigger2 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
trigger3 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
trigger4 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
trigger5 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
trigger6 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger7 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
trigger8 = AnimElemTime(15) >= 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(IfElse(Var(18) = 0, 33, 42)*FVar(2)*FVar(1)*FVar(0)), 8
pausetime = 2, 3
guard.pausetime = 2, 1
sparkno = S4006
sparkxy = -10, -33
hitsound = S5, 30 +(Random % 2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 8
guard.slidetime = 6
ground.hittime  = 11
guard.hittime = 9
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 9
yaccel = 0.44
ground.velocity = 0
guard.velocity = 0
air.velocity = -3, -6.38
airguard.velocity = -4, 0
airguard.cornerpush.veloff = -4*1.3
air.fall = 1
fall.recovertime = 32
id = 1260
nochainid = 9998, 9999
getpower = Ceil(15*FVar(3)), Ceil(15*FVar(3))
givepower = 15, 15

[State 1261, 3] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1261, 4] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 2
ignorehitpause = 1
persistent = 0

[State 1261, 5] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1260)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1260
value = 5910
ignorehitpause = 1
persistent = 0

[State 1261, 6] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 1261, 7]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(1) = 0 || AnimElemTime(3) = 0 || AnimElemTime(5) = 0 || AnimElemTime(7) = 0
trigger2 = AnimElemTime(9) = 0 || AnimElemTime(11) = 0 || AnimElemTime(13) = 0 || AnimElemTime(15) = 0
value = 1261
ctrl = 0

[State 1261, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 1262
ctrl = 0


;---------------------------------------------------------------------------
;▼回転飛猿斬（強） 後方へ跳ねる▼

[Statedef 1262]
type = A
movetype = I
physics = N
anim = 43
sprpriority = 2
ctrl = 0

[State 1262, 0]
type = VelAdd
trigger1 = 1
y = 0.44

[State 1262, 1]
type = VelSet
trigger1 = Time = 0
x = Const(Velocity.AirJump.Back.X)
y = Const(Velocity.AirJump.Y)

[State 1262, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0


;---------------------------------------------------------------------------
;▼回転飛猿斬（強） どこキャン▼

[Statedef 1269]
type    = U
movetype= U
physics = U

[State 1269, 0] ;どこキャン処理（体光る）
type = PalFX
trigger1 = Time = 0
time = 7
add = 255, 255, 255

[State 1269, 1] ;どこキャン処理（残り時間減少）
type = VarAdd
trigger1 = Time = 0
var(15) = -150

[State 1269, 2]
type = ChangeState
trigger1 = Time = 0
value = 1260
ctrl = 0


;---------------------------------------------------------------------------
;▼奇襲飛猿突き（弱）▼

[Statedef 1270]
type = A
movetype = A
physics = N
anim = 1270
juggle = 6
sprpriority = 2
ctrl = 0

[State 1270, 0]
type = VelAdd
trigger1 = 1
y = 0.3

[State 1270, 1]
type = VelSet
trigger1 = Time = 0
x = 3.5
y = -3.15

[State 1270, 2] ;飛翔音
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S1200, 0

[State 1270, 3] ;トビィー！
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S10, 10
channel = 0

[State 1270, 4]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(IfElse(Var(18) = 0, 83, 108)*FVar(1)*FVar(0)), 8
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -39
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recovertime = 42
id = 1270
nochainid = 9998, 9999
getpower = Ceil(91*FVar(3)), Ceil(91*FVar(3))
givepower = 15, 15

[State 1270, 5] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1270, 6] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 7
ignorehitpause = 1
persistent = 0

[State 1270, 7] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1270)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1270
value = 5910
ignorehitpause = 1
persistent = 0

[State 1270, 8]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
movetype = I

[State 1270, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1271
ctrl = 0


;---------------------------------------------------------------------------
;▼奇襲飛猿突き（弱） 着地▼

[Statedef 1271]
type = S
movetype = I
physics = S
anim = 1271
sprpriority = 2
ctrl = 0

[State 1271, 0]
type = VelSet
trigger1 = 1
y = 0

[State 1271, 1]
type = PosSet
trigger1 = 1
y = 0

[State 1271, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼奇襲飛猿突き（強）▼

[Statedef 1280]
type = A
movetype = A
physics = N
anim = 1280
juggle = 6
sprpriority = 2
ctrl = 0

[State 1280, 0]
type = VelAdd
trigger1 = 1
y = 0.3

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 5
y = -4.8

[State 1280, 2] ;飛翔音
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S1200, 0

[State 1280, 3] ;トビィー！
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S10, 10
channel = 0

[State 1280, 4]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(IfElse(Var(18) = 0, 91, 117)*FVar(1)*FVar(0)), 8
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -39
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recovertime = 42
id = 1280
getpower = Ceil(91*FVar(3)), Ceil(91*FVar(3))
givepower = 15, 15

[State 1280, 5] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 1280, 6] ;ガークラ値
type = VarAdd
triggerall = Floor((Var(30)%2)/1) = 1
trigger1 = MoveGuarded = 1
fvar(18) = 7
ignorehitpause = 1
persistent = 0

[State 1280, 7] ;ガードクラッシュ
type = TargetState
triggerall = NumTarget(1280)
triggerall = Floor((Var(30)%2)/1) = 1
triggerall = FVar(18) >= 130
trigger1 = MoveGuarded = 1
id = 1280
value = 5910
ignorehitpause = 1
persistent = 0

[State 1280, 8]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
movetype = I

[State 1280, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1281
ctrl = 0


;---------------------------------------------------------------------------
;▼奇襲飛猿突き（強） 着地▼

[Statedef 1281]
type = S
movetype = I
physics = S
anim = 1281
sprpriority = 2
ctrl = 0

[State 1281, 0]
type = VelSet
trigger1 = 1
y = 0

[State 1281, 1]
type = PosSet
trigger1 = 1
y = 0

[State 1281, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;===========================================================================
;---------------------------------------------------------------------------
;▼真！超絶竜巻真空斬▼

[Statedef 3000]
type = S
movetype = A
physics = N
anim = 3000
juggle = 0
sprpriority = 2
ctrl = 0
poweradd = -1000 +1000*(Var(15) > 0)
velset = 0, 0

[State 3000, 0]
type = PowerAdd
triggerall = Time = 0
triggerall = Var(15) = 0
trigger1 = PrevStateNo = [1000, 1999]
value = -1000

[State 3000, 1]
type = NotHitBy
trigger1 = Time < 42
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3000, 2] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3000, 3]
type = VarSet
trigger1 = Time = 0
fvar(2) = 1
ignorehitpause = 1

[State 3000, 4] ;キーリキリマイマーイ！
type = PlaySnd
trigger1 = Time = 1
value = S10, 11
channel = 0

[State 3000, 5]
type = SuperPause
trigger1 = Time = 1
time = 28
anim = 100
movetime = 28
sound = S20, 0
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3000, 6] ;風の音
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = S3000, 0

[State 3000, 7] ;竜巻
type = Helper
trigger1 = AnimElemTime(5) = 0
id = 4110
helpertype = Normal
name = "Tornado"
stateno = 4110
pos = 0, 0
postype = P1
ownpal = 1
size.xscale = Const(Size.XScale)
size.yscale = Const(Size.YScale)

[State 3000, 8] ;攻撃判定
type = Helper
triggerall = Time >= 49
triggerall = NumHelper(3020) = 0
trigger1 = (Time -49) % 40 = 0
id = 3020
helpertype = Normal
name = "Attack Box"
stateno = 3020
pos = 0, 0
postype = P1
size.xscale = Const(Size.XScale)
size.yscale = Const(Size.YScale)

[State 3000, 9]
type = VelSet
trigger1 = Time = [49, 171]
x = 2*((Var(59) = 0) && (Command = "holdfwd")) -2*((Var(59) = 0) && (Command = "holdback"))

[State 3000, 10]
type = VelSet
triggerall = Time = [49, 171]
trigger1 = Var(59) > 0
x = 0

[State 3000, 11]
type = VelSet
triggerall = Time = [49, 171]
triggerall = Var(59) > 0
trigger1 = FVar(25) >= 15
trigger1 = !(P2MoveType != H && (P2StateNo != [150, 159]) && Time > 120)
x = 2

[State 3000, 12]
type = VelSet
triggerall = Time = [49, 171]
triggerall = Var(59) > 0
trigger1 = FVar(25) <= 10
trigger2 = (P2StateNo = [150, 159]) && Time > 150
trigger3 = P2MoveType != H && (P2StateNo != [150, 159]) && Time > 120
x = -2

[State 3000, 13]
type = ChangeState
trigger1 = Time >= 172
value = 3010
ctrl = 0


;---------------------------------------------------------------------------
;▼真！超絶竜巻真空斬 攻撃終了▼

[Statedef 3010]
type = S
movetype = I
physics = S
velset = 0, 0
anim = 3010
sprpriority = 2
ctrl = 0

[State 3010, 0] ;ウヒョッ
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S10, 3
channel = 0

[State 3010, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼真！超絶輪回転突刃（弱） 構え▼

[Statedef 3050]
type = A
movetype = A
physics = N
anim = 3050
juggle = 0
sprpriority = 2
ctrl = 0
poweradd = -1000 +1000*(Var(15) > 0)
velset = 0, 0

[State 3050, 0]
type = PowerAdd
triggerall = Time = 0
triggerall = Var(15) = 0
trigger1 = PrevStateNo = [1000, 1999]
trigger1 = PrevStateNo != 1252 && PrevStateNo != 1262
value = -1000
ignorehitpause = 1

[State 3050, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 1
ignorehitpause = 1

[State 3050, 2]
type = NotHitBy
trigger1 = Time < 29
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3050, 3] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3050, 4] ;真！
type = PlaySnd
trigger1 = Time = 1
value = S10, 12
channel = 0

[State 3050, 5]
type = SuperPause
trigger1 = Time = 1
time = 28
anim = 100
movetime = 28
sound = S20, 0
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3050, 6] ;じゅいいいん
type = PlaySnd
trigger1 = Anim = 3050 && AnimTime = 0
value = S3050, 0

[State 3050, 7] ;ギギギギギィー！
type = PlaySnd
trigger1 = Anim = 3050 && AnimTime = 0
value = S10, 13
channel = 0

[State 3050, 8]
type = ChangeAnim
trigger1 = Anim = 3050 && AnimTime = 0
value = 3051

[State 3050, 9]
type = ChangeState
trigger1 = Anim = 3051
value = 3051

;---------------------------------------------------------------------------
;▼真！超絶輪回転突刃（弱） 攻撃▼

[Statedef 3051]
type = A
movetype = A
physics = N
juggle = 0
sprpriority = 2
velset = 0, 0
ctrl = 0

[State 3051, 0]
type = ChangeAnim
trigger1 = Anim != 3051
value = 3051

[State 3051, 1] ;エフェクト
type = Helper
trigger1 = NumHelper(4120) = 0
id = 4120
helpertype = Normal
name = "Drill"
stateno = 4120
pos = 0, 0
postype = P1
supermovetime = 0
pausemovetime = 0

[State 3051, 2]
type = VelSet
trigger1 = 1
y = 4

[State 3051, 3]
type = VelSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0
ignorehitpause = 1

[State 3051, 4]
type = PosSet
trigger1 = Pos Y >= 0
y = 0
ignorehitpause = 1

[State 3051, 5]
type = HitDef
triggerall = !Var(8) || P2StateType = L
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(1) >= 0
attr = A, HA
hitflag = MAFD
guardflag = MA
animtype = Back
air.animtype = Back
damage = Ceil(IfElse(Var(18) = 0, 183, 217)*FVar(2)*FVar(1)*FVar(0)), 7
priority = 7, Hit
pausetime = 0, IfElse(AnimElemTime(57) >= 0, 13, 24)
guard.pausetime = 0, 11
sparkxy = -10, 5
sparkno = S4007
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 49
guard.hittime = 21
guard.ctrltime = 21
air.hittime = IfElse(Var(18) = 0, 30, 999999)
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = IfElse(AnimElemTime(57) >= 0, -12, 0)
air.velocity = -3, -6.38
airguard.velocity = -2, 4.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = IfElse(AnimElemTime(57) >= 0, -6, 0)*1.3
airguard.cornerpush.veloff = -4*1.3
down.velocity = 0, 0
down.hittime = 10
fall = 1
fall.recover = 0
id = 3050
nochainid = 9999
getpower = 0, 0
givepower = 15, 15

[State 3051, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 3051, 7] ;半数補正
type = VarSet
trigger1 = Movecontact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 3051, 8]
type = ChangeState
triggerall = Time > 0
triggerall = AnimTime != 0
trigger1 = AnimElemTime(9) = 0 || AnimElemTime(17) = 0 || AnimElemTime(25) = 0
trigger2 = AnimElemTime(33) = 0 || AnimElemTime(41) = 0 || AnimElemTime(49) = 0 || AnimElemTime(57) = 0
value = 3051

[State 3051, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 3052
ctrl = 0


;---------------------------------------------------------------------------
;▼真！超絶輪回転突刃（弱強共通） バックステップ▼

[Statedef 3052]
type = A
movetype = I
physics = A
anim = 105
sprpriority = 2
ctrl = 0

[State 3052, 0]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3052, 1]
type = VelSet
trigger1 = Time = 0
x = Const(Velocity.Run.Back.X)*0.75
y = Const(Velocity.Run.Back.Y)

[State 3052, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106


;---------------------------------------------------------------------------
;▼真！超絶輪回転突刃（強） 構え▼

[Statedef 3060]
type = A
movetype = A
physics = N
anim = 3050
juggle = 0
sprpriority = 2
ctrl = 0
poweradd = -1000 +1000*(Var(15) > 0)
velset = 0, 0

[State 3060, 0]
type = PowerAdd
triggerall = Time = 0
triggerall = Var(15) = 0
trigger1 = PrevStateNo = [1000, 1999]
trigger1 = PrevStateNo != 1252 && PrevStateNo != 1262
value = -1000
ignorehitpause = 1

[State 3060, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 1
ignorehitpause = 1

[State 3060, 2]
type = NotHitBy
trigger1 = Time < 29
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3060, 3] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3060, 4] ;真！
type = PlaySnd
trigger1 = Time = 1
value = S10, 12
channel = 0

[State 3060, 5]
type = SuperPause
trigger1 = Time = 1
time = 28
anim = 100
movetime = 28
sound = S20, 0
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3060, 6] ;じゅいいいん
type = PlaySnd
trigger1 = Anim = 3050 && AnimTime = 0
value = S3050, 0

[State 3060, 7] ;ギギギギギィー！
type = PlaySnd
trigger1 = Anim = 3050 && AnimTime = 0
value = S10, 13
channel = 0

[State 3060, 8]
type = ChangeAnim
trigger1 = Anim = 3050 && AnimTime = 0
value = 3061

[State 3060, 9]
type = ChangeState
trigger1 = Anim = 3061
value = 3061

;---------------------------------------------------------------------------
;▼真！超絶輪回転突刃（弱） 攻撃▼

[Statedef 3061]
type = A
movetype = A
physics = N
juggle = 0
sprpriority = 2
velset = 0, 0
ctrl = 0

[State 3061, 0]
type = ChangeAnim
trigger1 = Anim != 3061
value = 3061

[State 3061, 1] ;エフェクト
type = Helper
trigger1 = NumHelper(4125) = 0
id = 4125
helpertype = Normal
name = "Drill"
stateno = 4120
pos = 0, 0
postype = P1
supermovetime = 0
pausemovetime = 0

[State 3061, 2]
type = VelSet
trigger1 = 1
x = 4/1.41
y = 4/1.41

[State 3061, 3]
type = VelSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
x = 0
y = 0
ignorehitpause = 1

[State 3061, 4]
type = PosSet
trigger1 = Pos Y >= 0
y = 0
ignorehitpause = 1

[State 3061, 5]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(1) >= 0
attr = A, HA
hitflag = MAF
guardflag = MA
animtype = Back
air.animtype = Back
damage = Ceil(IfElse(Var(18) = 0, 183, 217)*FVar(2)*FVar(1)*FVar(0)), 7
priority = 7, Hit
pausetime = 0, IfElse(AnimElemTime(57) >= 0, 13, 24)
guard.pausetime = 0, 11
sparkxy = -10, 5
sparkno = S4007
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 49
guard.hittime = 21
guard.ctrltime = 21
air.hittime = IfElse(Var(18) = 0, 30, 999999)
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = IfElse(AnimElemTime(57) >= 0, -12, 0)
air.velocity = -3, -6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -IfElse(AnimElemTime(57) >= 0, -6, 0)*1.3
airguard.cornerpush.veloff = -4*1.3
down.velocity = 0, 0
down.hittime = 10
fall = 1
fall.recover = 0
id = 3060
nochainid = 9999
getpower = 0, 0
givepower = 15, 15

[State 3061, 6] ;カウンター
type = BGPalFX
triggerall = Var(18)
trigger1 = MoveHit = 1
time = 7
add = 255, 255, 255
ignorehitpause = 1
persistent = 0

[State 3061, 7] ;半数補正
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 3061, 8]
type = ChangeState
triggerall = Time > 0
triggerall = AnimTime != 0
trigger1 = AnimElemTime(1) = 0 || AnimElemTime(9) = 0 || AnimElemTime(17) = 0 || AnimElemTime(25) = 0
trigger2 = AnimElemTime(33) = 0 || AnimElemTime(41) = 0 || AnimElemTime(49) = 0 || AnimElemTime(57) = 0
value = 3061

[State 3061, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 3052
ctrl = 0


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版・弱） 突進開始▼

[Statedef 3100]
type = S
movetype = A
physics = S
anim = 3100
juggle = 0
sprpriority = 2
ctrl = 0
poweradd = -1000 +1000*(Var(15) > 0)
velset = 0, 0

[State 3100, 0]
type = PowerAdd
triggerall = Time = 0
triggerall = Var(15) = 0
trigger1 = PrevStateNo = [1000, 1999]
value = -1000

[State 3100, 1]
type = NotHitBy
trigger1 = Time <= 30
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3100, 2] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3100, 3] ;死ぬでヤンスー！
type = PlaySnd
trigger1 = Time = 1
value = S10, 14
channel = 0

[State 3100, 4]
type = SuperPause
trigger1 = Time = 1
time = 28
anim = 100
movetime = 28
sound = S20, 0
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3100, 5]
type = VelSet
trigger1 = AnimElemTime(7) >= 0
x = Const(Velocity.Run.Fwd.X)*1.5
ignorehitpause = 1

[State 3100, 6]
type = HitDef
triggerall = !Var(8)
trigger1 = AnimElemTime(7) >= 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = Hard
priority = 6, Hit
damage = 0, 0
pausetime = 0, 13
guard.pausetime = 0, 11
sparkno = S4007
sparkxy = -10, -64
hitsound = S5, 31
guardsound = S6, 1
ground.type = High
ground.slidetime = 14
guard.slidetime = 17
ground.hittime = 29
guard.hittime = 17
air.hittime = 100
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
ground.cornerpush.veloff = 0
p1stateno = 3110
;p2stateno = 3130
p2facing = 1
fall = 1
fall.recover = 0
id = 3100
kill = 0
getpower = 0, 0
givepower = 15, 15

[State 3100, 7]
type = PlayerPush
trigger1 = NumTarget(3100) > 0
value = 0
ignorehitpause = 1

[State 3100, 8]
type = Width
trigger1 = NumTarget(3100) > 0
edge = 40, 40
ignorehitpause = 1

[State 3000, 9]
type = ChangeState
trigger1 = Time >= 46
trigger2 = MoveGuarded
value = 3101
ctrl = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版・MAX版共通） 転倒▼

[Statedef 3101]
type = S
movetype = I
physics = S
anim = 3101
sprpriority = 2
ctrl = 0

[State 3001, 0]
type = PlaySnd
trigger1 = Time = 0
value = S7, 1

[State 3001, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版） 乱舞▼

[Statedef 3110]
type = S
movetype = A
physics = S
sprpriority = 2
velset = 0, 0
ctrl = 0

[State 3110, 0]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3110, 2]
type = Width
trigger1 = 1
edge = 40, 40
player = 20, 0
ignorehitpause = 1

[State 3110, 3]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
stateno = 3110
ignorehitpause = 1

[State 3110, 4]
type = VelSet
trigger1 = 1
x = 2
ignorehitpause = 1

[State 3110, 5]
type = ChangeAnim
trigger1 = Anim != 3110
value = 3110
ignorehitpause = 1

[State 3110, 10] ;相手をのけぞり動作にする（上段やられ）
type = TargetState
triggerall = Anim = 3110
triggerall = NumTarget(3100) > 0
triggerall = MoveContact = 1
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) <= 0
trigger2 = AnimElemTime(12) >= 0 && AnimElemTime(13) <= 0
trigger3 = AnimElemTime(22) >= 0 && AnimElemTime(24) <= 0
trigger4 = AnimElemTime(28) >= 0 && AnimElemTime(29) <= 0
trigger5 = AnimElemTime(32) >= 0 && AnimElemTime(33) <= 0
trigger6 = AnimElemTime(36) >= 0 && AnimElemTime(37) <= 0
trigger7 = AnimElemTime(40) >= 0 && AnimElemTime(41) <= 0
id = 3100
value = 3130
ignorehitpause = 1
persistent = 0

[State 3110, 11] ;相手をのけぞり動作にする（下段やられ）
type = TargetState
triggerall = Anim = 3110
triggerall = NumTarget(3100) > 0
triggerall = MoveContact = 1
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger2 = AnimElemTime(6) >= 0 && AnimElemTime(7) <= 0
trigger3 = AnimElemTime(17) >= 0 && AnimElemTime(18) <= 0
id = 3100
value = 3131
ignorehitpause = 1
persistent = 0

[State 3110, 6] ;相手の位置固定
type = TargetBind
triggerall = NumTarget(3100) > 0
trigger1 = AnimElemTime(1) = 0
id = 3100
pos = 50, 0
ignorehitpause = 1

[State 3110, 6] ;相手の位置固定
type = TargetState
triggerall = NumTarget(3100) > 0
trigger1 = AnimElemTime(1) = 0
id = 3100
value = 3130
ignorehitpause = 1

[State 3110, ]
type = ChangeState
triggerall = Time > 0
trigger1 = AnimElemTime(6) = 0 || AnimElemTime(9) = 0 || AnimElemTime(12) = 0 || AnimElemTime(17) = 0
trigger2 = AnimElemTime(22) = 0 || AnimElemTime(28) = 0 || AnimElemTime(32) = 0 || AnimElemTime(36) = 0
trigger3 = AnimElemTime(40) = 0
value = 3110
ctrl = 0

[State 3120, 3] ;ダメージ
type = HitDef
triggerall = Anim = 3110
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger2 = AnimElemTime(6) >= 0 && AnimElemTime(7) <= 0
trigger3 = AnimElemTime(9) >= 0 && AnimElemTime(10) <= 0
trigger4 = AnimElemTime(12) >= 0 && AnimElemTime(13) <= 0
trigger5 = AnimElemTime(17) >= 0 && AnimElemTime(18) <= 0
trigger6 = AnimElemTime(22) >= 0 && AnimElemTime(24) <= 0
trigger7 = AnimElemTime(28) >= 0 && AnimElemTime(29) <= 0
trigger8 = AnimElemTime(32) >= 0 && AnimElemTime(33) <= 0
trigger9 = AnimElemTime(36) >= 0 && AnimElemTime(37) <= 0
trigger10 = AnimElemTime(40) >= 0 && AnimElemTime(41) <= 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(19*FVar(1)*FVar(0)), 7
pausetime = 0, 1
guard.pausetime = 0, 0
sparkno = S4007
sparkxy = -10, -55
hitsound = S5, 30 +(Random%2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 120
guard.slidetime = 17
ground.hittime  = 120
guard.hittime = 17
air.hittime = 19
guard.ctrltime = 17
yaccel = 0.44
mindist = 0, -999999
maxdist = 55, 999999
ground.velocity = 0
guard.velocity = 0
air.velocity = -2, -6.38
airguard.velocity = -4, 0
air.fall = 1
fall.recovertime = 999999
kill = 0
id = 3100
getpower = 0, 0
givepower = 15, 15

[State 3110, 12] ;二段斬りのエフェクト1
type = Explod
triggerall = Anim = 3110
trigger1 = AnimElemTime(28) = 0 || AnimElemTime(36) = 0
anim = 4131
id = 4130
pos = 0, 0
postype = P1
bindtime = -1
sprpriority = 7
shadow = -1
supermovetime = 999999*(Var(16) > 0)
pausemovetime = 999999*(Var(16) > 0)
ignorehitpause = 1

[State 3110, 13] ;二段斬りのエフェクト2
type = Explod
triggerall = Anim = 3110
trigger1 = AnimElemTime(32) = 0 || AnimElemTime(40) = 0
anim = 4130
id = 4130
pos = 0, 0
postype = P1
bindtime = -1
sprpriority = 7
shadow = -1
supermovetime = 999999*(Var(16) > 0)
pausemovetime = 999999*(Var(16) > 0)
ignorehitpause = 1

[State 3010, 24]
type = RemoveExplod
triggerall = Anim = 3110
trigger1 = AnimTime = 0
id = 4130

[State 3010, 25] ;あたり判定つける
type = TargetState
triggerall = NumTarget(3100) > 0
triggerall = Anim = 3110
trigger1 = AnimTime = 0
id = 3100
value = 3132

[State 3010, 26]
type = ChangeState
triggerall = Anim = 3110
trigger1 = AnimTime = 0
value = 3120
ctrl = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版） フィニッシュ▼

[Statedef 3120]
type = S
movetype = A
physics = S
juggle = 0
sprpriority = 2
ctrl = 0

[State 3120, 0]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3120, 1]
type = ChangeAnim
trigger1 = Anim != 3120
value = 3120

[State 3120, 2]
type = Null;HitOverride
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT, NA, SA, HA, NP, SP, HP, NT, ST, HT
stateno = 3120
ignorehitpause = 1

[State 3120, 3] ;1段目
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(19*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -95
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -1, -6.38
guard.velocity = -10
air.velocity = -1, -6.38
airguard.velocity = -4, 0
fall = 1
fall.recover = 0
id = 3120
getpower = 0, 0
givepower = 15, 15

[State 3120, 4]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
physics = N
ignorehitpause = 1

[State 3120, 5]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = 3
y = -10.6

[State 3120, 6] ;飛翔音
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S1200, 0

[State 3120, 7]
type = MoveHitReset
trigger1 = AnimElemTime(4) = 0

[State 3120, 8]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(4) >= 0
attr = A, HA
hitflag = MAF
guardflag = H
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(25*FVar(1)*FVar(0)), 7
pausetime = 31, 32
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -95
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 50, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -2, -11
guard.velocity = -10
air.velocity = -2, -11
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recover = 0
id = 3120
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3120, 9] ;追撃不能
type = VarSet
triggerall = MoveHit = 1
triggerall = P2StateType = A
trigger1 = AnimElemTime(4) >= 0
var(8) = IfElse(Var(18) = 0, 1, Var(8))
ignorehitpause = 1
persistent = 0

[State 3120, 10]
type = ChangeState
trigger1 = AnimElemTime(5) >= 0
value = 3121


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版） 攻撃終了▼

[Statedef 3121]
type = A
movetype = A
physics = N
juggle = 0
velset = 0, Vel Y*0.5
sprpriority = 2
ctrl = 0

[State 3121, 0]
type = VelAdd
trigger1 = 1
y = 0.44

[State 3121, 1]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3121, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3122


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版） 挑発▼

[Statedef 3122]
type = S
movetype = A
physics = S
anim = 3121
sprpriority = 2
ctrl =  0

[State 3122, 0]
type = VelSet
trigger1 = 1
y = 0

[State 3122, 1]
type = PosSet
trigger1 = 1
y = 0

[State 3122, 2]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3122, 3] ;ウヒョッ
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S10, 3
channel = 0

[State 1202, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼通常版（通常版・MAX版共通） 攻撃を食らった相手1▼

[Statedef 3130]
type = U
movetype = H
physics = N
sprpriority = 0
velset = 0, 0
ctrl = 0

[State 3130, 0]
type = SelfState
trigger1 = PrevStateNo = [150, 159]
value = PrevStateNo
ignorehitpause = 1

[State 3130, 1]
type = StateTypeSet
trigger1 = 1
statetype = S
physics = S
ignorehitpause = 1

[State 3130, 2]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 3130, 3]
type = HitFallSet
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3130, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 3130
ignorehitpause = 1

[State 3130, 5]
type = SelfState
trigger1 = Time >= 300
value = 0
ctrl = 1
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版・MAX版共通） 攻撃を食らった相手2▼

[Statedef 3131]
type = U
movetype = H
physics = N
sprpriority = 0
velset = 0, 0
ctrl = 0

[State 3131, 0]
type = SelfState
trigger1 = PrevStateNo = [150, 159]
value = PrevStateNo
ignorehitpause = 1

[State 3131, 1]
type = StateTypeSet
trigger1 = 1
statetype = S
physics = S
ignorehitpause = 1

[State 3131, 2]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 3131, 3]
type = HitFallSet
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3131, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 3131
ignorehitpause = 1

[State 3131, 5]
type = SelfState
trigger1 = Time >= 300
value = 0
ctrl = 1
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版・MAX版共通） 攻撃を食らった相手3▼

[Statedef 3132]
type = S
movetype = H
physics = S
sprpriority = 0
velset = 0, 0
ctrl = 0

[State 3132, 0]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 3132, 1]
type = HitFallSet
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3132, 2]
type = SelfState
trigger1 = Time >= 300
value = 0
ctrl = 1
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（通常版・強） 突進開始▼

[Statedef 3140]
type = S
movetype = A
physics = S
anim = 3100
sprpriority = 2
ctrl = 0
poweradd = -1000 +1000*(Var(15) > 0)
velset = 0, 0

[State 3140, 0]
type = PowerAdd
triggerall = Time = 0
triggerall = Var(15) = 0
trigger1 = PrevStateNo = [1000, 1999]
value = -1000

[State 3140, 1]
type = NotHitBy
trigger1 = Time <= 30
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3140, 2] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3140, 3] ;死ぬでヤンスー！
type = PlaySnd
trigger1 = Time = 1
value = S10, 14
channel = 0

[State 3140, 4]
type = SuperPause
trigger1 = Time = 1
time = 28
anim = 100
movetime = 28
sound = S20, 0
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3140, 5]
type = VelSet
trigger1 = AnimElemTime(7) >= 0
x = Const(Velocity.Run.Fwd.X)*1.5
ignorehitpause = 1

[State 3140, 6]
type = HitDef
triggerall = !Var(8)
trigger1 = AnimElemTime(7) >= 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = Hard
priority = 6, Hit
damage = 0, 0
pausetime = 0, 13
guard.pausetime = 0, 11
sparkno = S4007
sparkxy = -10, -64
hitsound = S5, 12
guardsound = S6, 1
ground.type = High
ground.slidetime = 14
guard.slidetime = 17
ground.hittime = 29
guard.hittime = 17
air.hittime = 100
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
ground.cornerpush.veloff = 0
p1stateno = 3110
;p2stateno = 3130
p2facing = 1
fall = 1
fall.recover = 0
id = 3100
nochainid = 9998, 9999
kill = 0
getpower = 0, 0
givepower = 15, 15

[State 3140, 7]
type = PlayerPush
trigger1 = NumTarget(3100) > 0
value = 0
ignorehitpause = 1

[State 3140, 8]
type = Width
trigger1 = NumTarget(3100) > 0
edge = 40, 40
ignorehitpause = 1

[State 3140, 9]
type = ChangeState
trigger1 = Time >= 54
trigger2 = MoveGuarded
value = 3101
ctrl = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（MAX版） 突進開始▼

[Statedef 3150]
type = S
movetype = A
physics = S
anim = 3100
sprpriority = 2
ctrl = 0
poweradd = -3000 +2000*(Var(15) > 0)
velset = 0, 0

[State 3150, 0]
type = PowerAdd
triggerall = Time = 0
triggerall = Var(15) = 0
trigger1 = PrevStateNo = [1000, 1999]
value = -1000

[State 3150, 1]
type = NotHitBy
trigger1 = Var(53) = 1
value2 = , NT, ST, HT
ignorehitpause = 1

[State 3150, 2] ;ステート番号記憶
type = VarSet
trigger1 = Var(53) = 1
var(19) = StateNo
ignorehitpause = 1

[State 3150, 3]
type = NotHitBy
trigger1 = Time <= 30
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3150, 4] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3150, 5] ;死ぬでヤンスー！
type = PlaySnd
trigger1 = Time = 1
value = S10, 14
channel = 0

[State 3150, 6]
type = SuperPause
trigger1 = Time = 1
time = 28
movetime = 28
anim = 101
sound = S20, 1
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3150, 7]
type = ChangeState
trigger1 = Var(53) = 1
trigger1 = Var(19) = StateNo
trigger1 = AnimElemTime(7) >= 0
value = 119
ctrl = 0

[State 3150, 8]
type = VelSet
trigger1 = AnimElemTime(7) >= 0
x = Const(Velocity.Run.Fwd.X)*2
ignorehitpause = 1

[State 3150, 9]
type = HitDef
triggerall = !Var(8)
trigger1 = AnimElemTime(7) >= 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = Hard
priority = 6, Hit
damage = 0, 0
pausetime = 0, 13
guard.pausetime = 0, 11
sparkno = S4007
sparkxy = -10, -64
hitsound = S5, 12
guardsound = S6, 1
ground.type = High
ground.slidetime = 14
guard.slidetime = 17
ground.hittime = 29
guard.hittime = 17
air.hittime = 100
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -3, -6.38
guard.velocity = -10
air.velocity = -3, -6.38
ground.cornerpush.veloff = 0
p1stateno = 3160
;p2stateno = 3130
p2facing = 1
fall = 1
fall.recover = 0
id = 3150
nochainid = 9998, 9999
kill = 0
getpower = 0, 0
givepower = 15, 15

[State 3150, 10]
type = PlayerPush
trigger1 = NumTarget(3150) > 0
value = 0
ignorehitpause = 1

[State 3150, 11]
type = Width
trigger1 = NumTarget(3150) > 0
edge = 40, 40
ignorehitpause = 1

[State 3150, 12]
type = ChangeState
trigger1 = Time >= 54
trigger2 = MoveGuarded
value = 3101
ctrl = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（MAX版） 乱舞▼

[Statedef 3160]
type = S
movetype = A
physics = S
sprpriority = 2
velset = 0, 0
ctrl = 0

[State 3160, 0]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3160, 1]
type = Width
trigger1 = 1
edge = 40, 0
player = 20, 0
ignorehitpause = 1

[State 3160, 2]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
stateno = 3160
ignorehitpause = 1

[State 3160, 3]
type = VelSet
trigger1 = 1
x = 2.5
ignorehitpause = 1

[State 3160, 4]
type = ChangeAnim
trigger1 = Anim != 3160
value = 3160
ignorehitpause = 1

[State 3160, 5] ;相手をのけぞり動作にする（上段やられ）
type = TargetState
triggerall = Anim = 3160
triggerall = NumTarget(3150) > 0
triggerall = MoveContact = 1
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger2 = AnimElemTime(5) >= 0 && AnimElemTime(6) <= 0
trigger3 = AnimElemTime(11) >= 0 && AnimElemTime(12) <= 0
trigger4 = AnimElemTime(13) >= 0 && AnimElemTime(14) <= 0
trigger5 = AnimElemTime(34) >= 0 && AnimElemTime(35) <= 0
trigger6 = AnimElemTime(39) >= 0 && AnimElemTime(40) <= 0
trigger7 = AnimElemTime(52) >= 0 && AnimElemTime(53) <= 0
trigger8 = AnimElemTime(56) >= 0 && AnimElemTime(57) <= 0
trigger9 = AnimElemTime(60) >= 0 && AnimElemTime(61) <= 0
trigger10 = AnimElemTime(64) >= 0 && AnimElemTime(65) <= 0
trigger11 = AnimElemTime(68) >= 0 && AnimElemTime(69) <= 0
trigger12 = AnimElemTime(72) >= 0 && AnimElemTime(73) <= 0
trigger13 = AnimElemTime(76) >= 0 && AnimElemTime(77) <= 0
trigger14 = AnimElemTime(80) >= 0 && AnimElemTime(81) <= 0
trigger15 = AnimElemTime(84) >= 0 && AnimElemTime(85) <= 0
trigger16 = AnimElemTime(88) >= 0 && AnimElemTime(89) <= 0
trigger17 = AnimElemTime(92) >= 0 && AnimElemTime(93) <= 0
trigger18 = AnimElemTime(96) >= 0 && AnimElemTime(97) <= 0
id = 3150
value = 3130
ignorehitpause = 1
persistent = 0

[State 3160, 6] ;相手をのけぞり動作にする（下段やられ）
type = TargetState
triggerall = Anim = 3160
triggerall = NumTarget(3150) > 0
triggerall = MoveContact = 1
trigger1 = AnimElemTime(18) >= 0 && AnimElemTime(19) <= 0
trigger2 = AnimElemTime(22) >= 0 && AnimElemTime(23) <= 0
trigger3 = AnimElemTime(27) >= 0 && AnimElemTime(28) <= 0
trigger4 = AnimElemTime(43) >= 0 && AnimElemTime(44) <= 0
trigger5 = AnimElemTime(48) >= 0 && AnimElemTime(49) <= 0
id = 3150
value = 3131
ignorehitpause = 1
persistent = 0

[State 3160, 7] ;フラッシュ
type = BGPalFX
triggerall = Anim = 3160
trigger1 = MoveContact = 1
add = 255, 255, 255
time = 1
ignorehitpause = 1
persistent = 0

[State 3160, 8] ;相手の位置固定
type = TargetBind
trigger1 = NumTarget(3150) > 0
trigger1 = AnimElemTime(1) = 0
id = 3150
pos = 50, 0
ignorehitpause = 1

[State 3160, 9]
type = TargetState
trigger1 = NumTarget(3150) > 0
trigger1 = AnimElemTime(1) = 0
id = 3150
value = 3130
ignorehitpause = 1

[State 3160, 10]
type = ChangeState
triggerall = Anim = 3160
triggerall = Time > 0
trigger1 = AnimElemTime(5) = 0 || AnimElemTime(11) = 0 || AnimElemTime(13) = 0
trigger2 = AnimElemTime(18) = 0 || AnimElemTime(22) = 0 || AnimElemTime(27) = 0 || AnimElemTime(34) = 0
trigger3 = AnimElemTime(39) = 0 || AnimElemTime(43) = 0 || AnimElemTime(48) = 0 || AnimElemTime(52) = 0
trigger4 = AnimElemTime(56) = 0 || AnimElemTime(60) = 0 || AnimElemTime(64) = 0 || AnimElemTime(68) = 0
trigger5 = AnimElemTime(72) = 0 || AnimElemTime(76) = 0 || AnimElemTime(80) = 0 || AnimElemTime(84) = 0
trigger6 = AnimElemTime(88) = 0 || AnimElemTime(92) = 0 || AnimElemTime(96) = 0
value = 3160

[State 3170, 11] ;ダメージ
type = HitDef
triggerall = Anim = 3160
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
trigger2 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
trigger3 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger4 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
trigger5 = AnimElemTime(18) >= 0 && AnimElemTime(19) < 0
trigger6 = AnimElemTime(22) >= 0 && AnimElemTime(23) < 0
trigger7 = AnimElemTime(27) >= 0 && AnimElemTime(28) < 0
trigger8 = AnimElemTime(34) >= 0 && AnimElemTime(35) < 0
trigger9 = AnimElemTime(39) >= 0 && AnimElemTime(40) < 0
trigger10 = AnimElemTime(43) >= 0 && AnimElemTime(44) < 0
trigger11 = AnimElemTime(48) >= 0 && AnimElemTime(49) < 0
trigger12 = AnimElemTime(52) >= 0 && AnimElemTime(53) < 0
trigger13 = AnimElemTime(56) >= 0 && AnimElemTime(57) < 0
trigger14 = AnimElemTime(60) >= 0 && AnimElemTime(61) < 0
trigger15 = AnimElemTime(64) >= 0 && AnimElemTime(65) < 0
trigger16 = AnimElemTime(68) >= 0 && AnimElemTime(69) < 0
trigger17 = AnimElemTime(72) >= 0 && AnimElemTime(73) < 0
trigger18 = AnimElemTime(76) >= 0 && AnimElemTime(77) < 0
trigger19 = AnimElemTime(80) >= 0 && AnimElemTime(81) < 0
trigger20 = AnimElemTime(84) >= 0 && AnimElemTime(85) < 0
trigger21 = AnimElemTime(88) >= 0 && AnimElemTime(89) < 0
trigger22 = AnimElemTime(92) >= 0 && AnimElemTime(93) < 0
trigger23 = AnimElemTime(96) >= 0 && AnimElemTime(97) < 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(12*FVar(1)*FVar(0)), 7
pausetime = 0, 1
guard.pausetime = 0, 11
sparkno = S4007
sparkxy = -10, -55
hitsound = S5, 30 +(Random%2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 120
guard.slidetime = 17
ground.hittime  = 120
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
mindist = 0, -999999
maxdist = 55, 999999
ground.velocity = 0
guard.velocity = 0
air.velocity = -3, -6.38
airguard.velocity = -4, 0
air.fall = 1
fall.recovertime = 999999
kill = 0
id = 3150
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3160, 12] ;あたり判定つける
type = TargetState
triggerall = NumTarget(3150) > 0
triggerall = Anim = 3160
trigger1 = AnimTime = 0
id = 3150
value = 3132

[State 3160, 13]
type = ChangeState
triggerall = Anim = 3160
trigger1 = AnimTime = 0
value = 3170
ctrl = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（MAX版） 乱舞▼

[Statedef 3161]
type = S
movetype = A
physics = S
sprpriority = 2
velset = 0, 0
ctrl = 0

[State 3160, 0]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3160, 1]
type = Width
trigger1 = 1
edge = 40, 40
player = 20, 0
ignorehitpause = 1

[State 3160, 2]
type = HitOverride
trigger1 = 1
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
stateno = 3160
ignorehitpause = 1

[State 3160, 3]
type = VelSet
trigger1 = 1
x = 2
ignorehitpause = 1

[State 3160, 4]
type = ChangeAnim
trigger1 = Anim != 3160
value = 3160
ignorehitpause = 1

[State 3160, 5] ;相手をのけぞり動作にする（上段やられ）
type = TargetState
triggerall = Anim = 3160
triggerall = NumTarget(3150) > 0
triggerall = MoveContact = 1
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger2 = AnimElemTime(5) >= 0 && AnimElemTime(6) <= 0
trigger3 = AnimElemTime(11) >= 0 && AnimElemTime(12) <= 0
trigger4 = AnimElemTime(13) >= 0 && AnimElemTime(14) <= 0
trigger5 = AnimElemTime(34) >= 0 && AnimElemTime(35) <= 0
trigger6 = AnimElemTime(39) >= 0 && AnimElemTime(40) <= 0
trigger7 = AnimElemTime(52) >= 0 && AnimElemTime(53) <= 0
trigger8 = AnimElemTime(54) >= 0 && AnimElemTime(55) <= 0
trigger9 = AnimElemTime(56) >= 0 && AnimElemTime(57) <= 0
trigger10 = AnimElemTime(58) >= 0 && AnimElemTime(59) <= 0
trigger11 = AnimElemTime(60) >= 0 && AnimElemTime(61) <= 0
trigger12 = AnimElemTime(62) >= 0 && AnimElemTime(63) <= 0
trigger13 = AnimElemTime(64) >= 0 && AnimElemTime(65) <= 0
trigger14 = AnimElemTime(66) >= 0 && AnimElemTime(67) <= 0
trigger15 = AnimElemTime(68) >= 0 && AnimElemTime(69) <= 0
trigger16 = AnimElemTime(70) >= 0 && AnimElemTime(71) <= 0
trigger17 = AnimElemTime(72) >= 0 && AnimElemTime(73) <= 0
trigger18 = AnimElemTime(74) >= 0 && AnimElemTime(75) <= 0
id = 3150
value = 3130
ignorehitpause = 1
persistent = 0

[State 3160, 6] ;相手をのけぞり動作にする（下段やられ）
type = TargetState
triggerall = Anim = 3160
triggerall = NumTarget(3150) > 0
triggerall = MoveContact = 1
trigger1 = AnimElemTime(18) >= 0 && AnimElemTime(19) <= 0
trigger2 = AnimElemTime(22) >= 0 && AnimElemTime(23) <= 0
trigger3 = AnimElemTime(27) >= 0 && AnimElemTime(28) <= 0
trigger4 = AnimElemTime(43) >= 0 && AnimElemTime(44) <= 0
trigger5 = AnimElemTime(48) >= 0 && AnimElemTime(49) <= 0
id = 3150
value = 3131
ignorehitpause = 1
persistent = 0

[State 3160, 7] ;フラッシュ
type = BGPalFX
triggerall = Anim = 3160
trigger1 = MoveContact = 1
add = 255, 255, 255
time = 3
ignorehitpause = 1
persistent = 0

[State 3160, 8] ;相手の位置固定
type = TargetBind
trigger1 = NumTarget(3150) > 0
trigger1 = AnimElemTime(1) = 0
id = 3150
pos = 50, 0
ignorehitpause = 1

[State 3160, 9]
type = TargetState
trigger1 = NumTarget(3150) > 0
trigger1 = AnimElemTime(1) = 0
id = 3150
value = 3130
ignorehitpause = 1

[State 3160, 10]
type = ChangeState
triggerall = Anim = 3160
triggerall = Time > 0
trigger1 = AnimElemTime(5) = 0 || AnimElemTime(11) = 0 || AnimElemTime(13) = 0
trigger2 = AnimElemTime(18) = 0 || AnimElemTime(22) = 0 || AnimElemTime(27) = 0 || AnimElemTime(34) = 0
trigger3 = AnimElemTime(39) = 0 || AnimElemTime(43) = 0 || AnimElemTime(48) = 0 || AnimElemTime(52) = 0
trigger4 = AnimElemTime(54) = 0 || AnimElemTime(56) = 0 || AnimElemTime(58) = 0 || AnimElemTime(60) = 0
trigger5 = AnimElemTime(62) = 0 || AnimElemTime(64) = 0 || AnimElemTime(68) = 0 || AnimElemTime(70) = 0
trigger6 = AnimElemTime(72) = 0 || AnimElemTime(74) = 0
value = 3160

[State 3170, 11] ;ダメージ
type = HitDef
triggerall = Anim = 3160
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
trigger2 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
trigger3 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
trigger4 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
trigger5 = AnimElemTime(18) >= 0 && AnimElemTime(19) < 0
trigger6 = AnimElemTime(22) >= 0 && AnimElemTime(23) < 0
trigger7 = AnimElemTime(27) >= 0 && AnimElemTime(28) < 0
trigger8 = AnimElemTime(34) >= 0 && AnimElemTime(35) < 0
trigger9 = AnimElemTime(39) >= 0 && AnimElemTime(40) < 0
trigger10 = AnimElemTime(43) >= 0 && AnimElemTime(44) < 0
trigger11 = AnimElemTime(48) >= 0 && AnimElemTime(49) < 0
trigger12 = AnimElemTime(52) >= 0 && AnimElemTime(53) < 0
trigger13 = AnimElemTime(54) >= 0 && AnimElemTime(55) < 0
trigger14 = AnimElemTime(56) >= 0 && AnimElemTime(57) < 0
trigger15 = AnimElemTime(58) >= 0 && AnimElemTime(59) < 0
trigger16 = AnimElemTime(60) >= 0 && AnimElemTime(61) < 0
trigger17 = AnimElemTime(62) >= 0 && AnimElemTime(63) < 0
trigger18 = AnimElemTime(64) >= 0 && AnimElemTime(65) < 0
trigger19 = AnimElemTime(66) >= 0 && AnimElemTime(67) < 0
trigger20 = AnimElemTime(68) >= 0 && AnimElemTime(69) < 0
trigger21 = AnimElemTime(70) >= 0 && AnimElemTime(71) < 0
trigger22 = AnimElemTime(72) >= 0 && AnimElemTime(73) < 0
trigger23 = AnimElemTime(74) >= 0 && AnimElemTime(75) < 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Hard
air.animtype = Hard
priority = 5, Hit
damage = Ceil(12*FVar(1)*FVar(0)), 7
pausetime = 0, 1
guard.pausetime = 0, 11
sparkno = S4007
sparkxy = -10, -55
hitsound = S5, 30 +(Random%2)
guardsound = S6, 1
ground.type = High
ground.slidetime = 120
guard.slidetime = 17
ground.hittime  = 120
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 30, 999999)
guard.ctrltime = 17
yaccel = 0.44
mindist = 0, -999999
maxdist = 55, 999999
ground.velocity = 0
guard.velocity = 0
air.velocity = -3, -6.38
airguard.velocity = -4, 0
air.fall = 1
fall.recovertime = 999999
kill = 0
id = 3150
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3160, 12] ;あたり判定つける
type = TargetState
triggerall = NumTarget(3150) > 0
triggerall = Anim = 3160
trigger1 = AnimTime = 0
id = 3150
value = 3132

[State 3160, 13]
type = ChangeState
triggerall = Anim = 3160
trigger1 = AnimTime = 0
value = 3170
ctrl = 0
ignorehitpause = 1


;---------------------------------------------------------------------------
;▼鳳凰脚（MAX版） フィニッシュ▼

[Statedef 3170]
type = S
movetype = A
physics = S
juggle = 0
sprpriority = 2
ctrl = 0

[State 3170, 0]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3170, 1]
type = ChangeAnim
trigger1 = Anim != 3170
value = 3170

[State 3170, 2]
type = HitOverride
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
stateno = 3170
ignorehitpause = 1

[State 3170, 3] ;1段目
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
attr = S, HA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(12*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -95
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 50, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -2, -11;-2, -6.38
guard.velocity = -10
air.velocity = -2, -11;-2, -6.38
airguard.velocity = -4, 0
fall = 1
fall.recover = 0
id = 3170
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3170, 4] ;フラッシュ（1段目）
type = BGPalFX
triggerall = MoveHit = 1
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
add = 255, 255, 255
time = 3
ignorehitpause = 1
persistent = 0

[State 3170, 5]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
physics = N
ignorehitpause = 1

[State 3170, 6]
type = VelSet
trigger1 = AnimElemTime(3) >= 0
x = 3
y = -10.6

[State 3170, 7]
type = VelSet
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(11) < 0
x = 1.5
y = -1

[State 3170, 8] ;飛翔音
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = S1200, 0

[State 3170, 9]
type = MoveHitReset
trigger1 = AnimElemTime(4) = 0 || AnimElemTime(10) = 0 || AnimElemTime(12) = 0

[State 3170, 10] ;2〜3段目
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(7) < 0
trigger2 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
attr = A, HA
hitflag = MAF
guardflag = H
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(12*FVar(1)*FVar(0)), 7
pausetime = 12, 13
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -95
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 50, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -2, -11;6.38
guard.velocity = -10
air.velocity = -2, -11;6.38
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recover = 0
id = 3170
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3170, 11] ;フラッシュ（2段目）
type = BGPalFX
triggerall = MoveHit = 1
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(7) <= 0
add = 255, 255, 255
time = 3
ignorehitpause = 1
persistent = 0

[State 3170, 12] ;フラッシュ（3段目）
type = BGPalFX
triggerall = MoveHit = 1
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) <= 0
add = 255, 255, 255
time = 3
ignorehitpause = 1
persistent = 0

[State 3170, 13] ;4段目
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(14) < 0
attr = A, HA
hitflag = MAF
guardflag = H
animtype = Back
air.animtype = Back
priority = 6, Hit
damage = Ceil(67*FVar(1)*FVar(0)), 7
pausetime = 31, 32
guard.pausetime = 12, 11
sparkno = S4007
sparkxy = -10, -95
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 60, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -2, -13.2
guard.velocity = -10
air.velocity = -2, -13.2
airguard.velocity = -4, 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4*1.3
airguard.cornerpush.veloff = -4*1.3
fall = 1
fall.recover = 0
id = 3170
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3170, 14] ;追撃不能
type = VarSet
triggerall = MoveHit = 1
triggerall = P2StateType = A
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(14) <= 0
var(8) = IfElse(Var(18) = 0, 1, Var(8))
ignorehitpause = 1
persistent = 0

[State 3170, 15] ;フラッシュ（1段目）
type = BGPalFX
triggerall = MoveHit = 1
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(14) <= 0
add = 255, 255, 255
time = 3
ignorehitpause = 1
persistent = 0

[State 3170, 16]
type = ChangeState
trigger1 = AnimElemTime(17) >= 0
value = 3171


;---------------------------------------------------------------------------
;▼鳳凰脚（MAX版） 攻撃終了▼

[Statedef 3171]
type = A
movetype = A
physics = N
juggle = 0
velset = 0, Vel Y*0.25
sprpriority = 2
ctrl = 0

[State 3171, 0]
type = VelAdd
trigger1 = 1
y = 0.44

[State 3171, 1]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3171, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3172


;---------------------------------------------------------------------------
;▼鳳凰脚（MAX版） 挑発▼

[Statedef 3172]
type = S
movetype = A
physics = S
anim = 3171
sprpriority = 2
ctrl =  0

[State 3172, 0]
type = VelSet
trigger1 = 1
y = 0

[State 3172, 1]
type = PosSet
trigger1 = 1
y = 0

[State 3172, 2]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3172, 3] ;ウヒョッ
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = S10, 3
channel = 0

[State 3172, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;▼杓死 発動▼

[Statedef 3200]
type = A
movetype = A
physics = N
anim = 3200
sprpriority = 2
velset = 0, 0
ctrl = 0
poweradd = -3000 +2000*(Var(15) > 0)

[State 3200, 0]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3200, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 1
ignorehitpause = 1

[State 3200, 2]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 3200, 3]
type = NotHitBy
trigger1 = Time <= 46
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
ignorehitpause = 1

[State 3200, 4] ;パワーMAX強制終了
type = VarSet
trigger1 = Time = 1
var(15) = 0
ignorehitpause = 1

[State 3200, 5]
type = BGPalFX
trigger1 = Time >= 1
time = 1
mul = 0, 0, 0
ignorehitpause = 1

[State 3200, 6] ;背景を変える
type = Helper
trigger1 = Time >= 1
trigger1 = NumHelper(9250) = 0
id = 9250
helpertype = Normal
name = "Wall"
stateno = 9250
pos = 0, 9999
postype = P1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3200, 7]
type = SuperPause
trigger1 = Time = 1
time = 28
movetime = 28
anim = 102
sound = S20, 2
pos = Const(Size.Mid.Pos.X), Const(Size.Mid.Pos.Y)
p2defmul = 1

[State 3200, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 3210
ctrl = 0


;---------------------------------------------------------------------------
;▼杓死 攻撃▼

[Statedef 3210]
type = A
movetype = A
physics = N
sprpriority = -7
velset = 0, 0
ctrl = 0

[State 3210, 0]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3210, 1]
type = BGPalFX
trigger1 = 1
time = 1
mul = 0, 0, 0
ignorehitpause = 1

[State 3210, 2] ;背景を変える
type = Helper
trigger1 = NumHelper(9250) = 0
id = 9250
helpertype = Normal
name = "Wall"
stateno = 9250
pos = 0, 9999
postype = P1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3210, 3]
type = PosSet
trigger1 = Time = 0
x = Ceil(-160 +(Random % 320))
y = Ceil(-240 +(Random % 240))

[State 3210, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 3210 +(Random % 2 = 0) +5*(Random % 2 = 0)

[State 3210, 5]
type = Turn
trigger1 = Random % 2 = 0

[State 3210, 6] ;攻撃音
type = PlaySnd
trigger1 = AnimElemTime(1) = 5
value = S3200, 0

[State 3210, 7]
type = Projectile
trigger1 = AnimElemTime(1) = 5
projid = 3200
projanim = 4160 +(Anim -3210)
projremove = 0
projremovetime = 15
velocity = 0, 0
projpriority = 999999
offset = 0, 0
postype = P1
supermovetime = 0
pausemovetime = 0
attr = A, HA
hitflag = MAF
guardflag = M
affectteam = B
animtype = DiagUp
air.animtype = DiagUp
priority = 7, Hit
damage = Ceil(IfElse(Var(18) = 0, 325, 375)*FVar(2)*FVar(1)*FVar(0)), 14
pausetime = 0, 0
guard.pausetime = 0, 11
sparkno = S4007
sparkxy = -10, -60
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 40, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -4, -8.8
guard.velocity = -10
air.velocity = -4, -8.8
airguard.velocity = -4, -6.38
ground.cornerpush.veloff = 0
airguard.ctrltime = 17
air.juggle = IfElse((Var(57) = 1), 0, 8)
fall = 1
fall.recover = 0
id = IfElse((Var(57) = 1), 3200, 9999)
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3200, 8]
type = VarSet
trigger1 = ProjContactTime(3200) = 0
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 3200, 9]
type = VarAdd
trigger1 = (Anim = [3210, 3219]) && AnimTime = 0
var(5) = 1

[State 3200, 10]
type = ChangeState
trigger1 = (Anim = [3210, 3219]) && AnimTime = 0
value = IfElse(Var(5) >= IfElse(Var(57) = 1, 12, 4), 3220, 3210)
ctrl = 0


;---------------------------------------------------------------------------
;▼杓死 本体攻撃▼

[Statedef 3220]
type = A
movetype = A
physics = N
sprpriority = 2
anim = 3220
velset = 0, 0
ctrl = 0

[State 3220, 0]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3220, 1]
type = BGPalFX
trigger1 = 1
time = 1
mul = 0, 0, 0
ignorehitpause = 1

[State 3220, 2] ;背景を変える
type = Helper
trigger1 = NumHelper(9250) = 0
id = 9250
helpertype = Normal
name = "Wall"
stateno = 9250
pos = 0, 9999
postype = P1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3220, 3]
type = PosSet
trigger1 = Time = 0
x = Ceil(-160 +(Random % 320))
y = -45

[State 3220, 4]
type = Turn
trigger1 = Time = 0
trigger1 = Random % 2 = 0

[State 3220, 5]
type = VelSet
trigger1 = Time = 0
x = 8
y = 6

[State 3220, 6]
type = HitDef
triggerall = !Var(8)
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(2) >= 0
attr = A, HA
hitflag = MAF
guardflag = MA
affectteam = B
animtype = DiagUp
air.animtype = DiagUp
priority = 7, Hit
damage = Ceil(IfElse(Var(18) = 0, 325, 375)*FVar(2)*FVar(1)*FVar(0)), 14
pausetime = 0, 0
guard.pausetime = 0, 11
sparkno = 4007
sparkxy = -10, -60
hitsound = S5, 20
guardsound = S6, 1
ground.type = High
ground.slidetime = 19
guard.slidetime = 17
ground.hittime  = 19
guard.hittime = 17
air.hittime = IfElse(Var(18) = 0, 40, 999999)
guard.ctrltime = 17
yaccel = 0.44
ground.velocity = -4, -8.8
guard.velocity = -10
air.velocity = -4, -8.8
airguard.velocity = -4, -6.38
ground.cornerpush.veloff = 0
airguard.ctrltime = 17
air.juggle = IfElse(Var(57) = 1, 0, 8)
fall = 1
fall.recover = 0
id = IfElse((Var(57) = 1), 3200, 9999)
nochainid = 9998, 9999
getpower = 0, 0
givepower = 15, 15

[State 3220, 7]
type = VarSet
trigger1 = MoveContact = 1
fvar(2) = FVar(2)*0.5
ignorehitpause = 1
persistent = 0

[State 3220, 8]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 3221
ctrl = 0



;---------------------------------------------------------------------------
;▼杓死 挑発▼

[Statedef 3221]
type = S
movetype = I
physics = S
sprpriority = 2
anim = 3221
ctrl = 0

[State 3221, 0]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3221, 1]
type = BGPalFX
trigger1 = 1
time = 1
mul = 0, 0, 0
ignorehitpause = 1

[State 3221, 2] ;背景を変える
type = Helper
trigger1 = NumHelper(9250) = 0
id = 9250
helpertype = Normal
name = "Wall"
stateno = 9250
pos = 0, 9999
postype = P1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3221, 3]
type = VelSet
trigger1 = 1
y = 0

[State 3221, 4]
type = PosSet
trigger1 = 1
y = 0

[State 3221, 5] ;キラーンでヤンス
type = PlaySnd
trigger1 = AnimElemTime(9) = 0
value = S10, 30
channel = 0

[State 3221, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

