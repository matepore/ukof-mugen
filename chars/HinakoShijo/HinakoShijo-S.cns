;=====================================================================
;  CNS File For "Refuse Hinako Shijo"                Made By OG子 OGヲ
;                                       Ver. 1.0            2007/10/01
;=====================================================================

;---------------------------------------------------------------------
; 突き出し・弱
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1000]
type		= S
movetype	= A
physics		= N
anim		= 1000
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1000, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1000, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 1000, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 1000, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1001

;------------------- 実行
[Statedef 1001]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1001, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemNo(0) = [2, 22]
x			= 2.75*Const(size.xscale)

[State 1001, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1001, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1001, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1001, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1001, Hit1]	; 全ヒット
type						= HitDef
trigger1					= AnimElemNo(0) = [4, 5]
trigger2					= AnimElemNo(0) = [15, 16]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(50 * FVar(3) / (2.0 ** HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 5
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 16 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 1001, Hit2]	; 全ヒット
type						= HitDef
trigger1					= AnimElemNo(0) = [9, 10]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(50 * FVar(3) / (2.0 ** HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 16 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 1001, Hit3]	; 全ヒット
type						= HitDef
trigger1					= AnimElemNo(0) = [20, 21]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(50 * FVar(3) / (2.0 ** HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 16 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(22)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1001, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4 || AnimElem = 15
value		= 2040, 0

[State 1001, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9 || AnimElem = 20
value		= 2040, 1

[State 1001, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 小手投げ(弱)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1100]
type		= S
movetype	= A
physics		= N
anim		= 1100
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1100, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1100, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1100, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1102

;---------------------------------------------------------------------
; 小手投げ(強)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1101]
type		= S
movetype	= A
physics		= N
anim		= 1101
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1101, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1101, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1101, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1102

;---------------------------------------------------------------------
; 小手投げ(動作中)
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 1102]
type		= S
movetype	= A
physics		= N
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1102, NotHit]
type		= NotHitBy
trigger1	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
value		= SCA
ignorehitpause	= 1

[State 1102, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
value		= 200, Random % 4
channel		= 0
volume		= 200

[State 1102, HitOverride]
type		= HitOverride
triggerall	= (Var(32) & 7) < 4
trigger1	= AnimElemNo(0) = [4, 7]
time		= 1
attr		= SCA, AP
stateno		= StateNo
slot		= 1
IgnoreHitPause	= 1

[State 1102, HitOverride]
type		= HitOverride
triggerall	= AnimTime < 0
trigger1	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
time		= 1
attr		= SCA, AA, AT, AP
stateno		= StateNo
IgnoreHitPause	= 1

[State 1102, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= 7070
IgnoreHitPause	= 1

[State 1102, VarSet]
type		= Null;VarSet
trigger1	= (Var(32) & 7) < 2
trigger2	= 0 && (Var(32) & 7) < 3
trigger2	= NumHelper(30000)
trigger2	= (Helper(30000),Var(0) = 30000)
trigger2	= (Helper(30000),Var(22) & 32)
var(0)		= 7500
IgnoreHitPause	= 1

[State 1102, TargetState]
type		= TargetState
trigger1	= MoveHit = 1
value		= Var(0)
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1102, VarSet]
type		= VarSet
trigger1	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
var(5)		= 1
IgnoreHitPause	= 1

[State 1102, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= Var(5) > 0
value		= 1105

[State 1102, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 8*Const(size.xscale)

[State 1102, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 4*Const(size.xscale)

[State 1102, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
x			= 8*Const(size.xscale)

[State 1102, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1102, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

; 当身で取れるのはその枠にヒットした処理順の一番若いキャラのみで、
; 取った後再度当身判定枠を出しても古いTargetが捨てられるだけ
; よって取った後は当身判定枠を新規に出さないようにしたい
[State 1102, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
triggerall		= !(Var(18) & 528482304)
triggerall		= !MoveContact && !(MoveReversed && (HitPauseTime || (Var(18) & 528482304)))
trigger1		= 1
reversal.attr	= SCA, AA, AT, AP
getpower		= Var(57)
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 11 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(20 * Const(size.xscale)), Floor((5 + 10*(Anim = 1101)) * Const(size.yscale))
hitsound		= S2010, 1
id				= 10 + (Var(16) & 240)/16
p2stateno		= Var(0)
guard.dist		= Floor(Const(size.attack.dist) * Const(size.xscale))
hitflag			= P

[State 1102, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
triggerall		= !(Var(18) & 528482304)
triggerall		= !MoveContact && !(MoveReversed && (HitPauseTime || (Var(18) & 528482304)))
trigger1		= (Var(32) & 7) >= 4
reversal.attr	= SCA, AA, AP
attr			= S, ST
getpower		= Var(57)
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 11 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(20 * Const(size.xscale)), Floor((5 + 10*(Anim = 1101)) * Const(size.yscale))
hitsound		= S2010, 1
id				= 10 + (Var(16) & 240)/16
p2stateno		= Var(0)
guard.dist		= Floor(Const(size.attack.dist) * Const(size.xscale))

[State 1102, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1103

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 小手投げ・攻撃
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1103]
type		= S
movetype	= A
physics		= N
anim		= 1102
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1103, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1104

;------------------- 実行
[Statedef 1104]
type		= S
movetype	= A
physics		= N
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1104, NotHit]
type		= NotHitBy
triggerall	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
trigger1	= AnimElemNo(0) = [1, 7]
value		= SCA
ignorehitpause	= 1

[State 1104, HitOverride]
type		= HitOverride
triggerall	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
trigger1	= AnimElemNo(0) = [1, 7]
time		= 1
attr		= SCA, AA, AT, AP
stateno		= StateNo
IgnoreHitPause	= 1

[State 1104, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= MoveHit || (HitCount && !MoveReversed)
trigger1	= AnimElemTime(4) <= 0
value		= 1110

[State 1104, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= MoveHit || (HitCount && !MoveReversed)
trigger1	= 1
value		= 1115

[State 1104, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1104, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
x			= 8*Const(size.xscale)

[State 1104, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
x			= -8*Const(size.xscale)

[State 1104, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
x			= -8*Const(size.xscale)

[State 1104, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 11
x			= -8*Const(size.xscale)

[State 1104, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(7) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1104, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 80
ignorehitpause	= 1

[State 1104, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1104, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) = [1, 3]
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= 0
getpower					= Var(57), Var(57)
givepower					= 0, 0
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2060
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1104, Hit_2]	; やられヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A && (Var(1) & 2))
trigger1					= AnimElemNo(0) = [1, 3]
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= 0
getpower					= Var(57), Var(57)
givepower					= 0, 0
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2060
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1104, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1104, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1104, Hit_3]	; 無条件ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) >= 4
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= 0
getpower					= Var(57), Var(57)
givepower					= 0, 0
guardflag					= M
hitflag						= AF+
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2060
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(7)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1104, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 小手投げ・当身成功
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1105]
type		= S
movetype	= A
physics		= N
anim		= 1110
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1105, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1105, TargetState]
type		= TargetState
trigger1	= 1
value		= 1170 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1105, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1106

;------------------- 実行
[Statedef 1106]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1106, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1106, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(4) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1106, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1106, PosFreeze]
type		= PosFreeze
trigger1	= Anim = 1110 && !(AnimElem = 6 || AnimElem = 9 || AnimElem = 12 || AnimElem = 14)

[State 1106, PosAdd]
type		= PosAdd
trigger1	= Anim = 1110 && AnimElem = 6
x			= -25*Const(size.xscale)

[State 1106, PlaySnd]
type		= PlaySnd
trigger1	= Anim = 1110 && AnimElem = 3
value		= 1100, 1
channel		= 0
volume		= 200

[State 1106, PosAdd]
type		= PosAdd
trigger1	= Anim = 1110 && AnimElem = 9
x			= -20*Const(size.xscale)

[State 1106, PosAdd]
type		= PosAdd
trigger1	= Anim = 1110 && AnimElem = 12
x			= -10*Const(size.xscale)

[State 1106, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElemNo(0) < 7
edge		= Floor(35*Const(size.xscale)), Floor(35*Const(size.xscale))

[State 1106, TargetBind]
type		= TargetBind
trigger1	= Anim = 1110 && AnimElem = 1
pos			= 24 * Const(size.xscale), 0
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, TargetBind]
type		= TargetBind
trigger1	= Anim = 1110 && AnimElem = 3
pos			= 22 * Const(size.xscale), 0
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, TargetBind]
type		= TargetBind
trigger1	= Anim = 1110 && AnimElem = 5
pos			= -4 * Const(size.xscale), -48 * Const(size.yscale)
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, TargetBind]
type		= TargetBind
trigger1	= Anim = 1110 && AnimElem = 6
pos			= -16 * Const(size.xscale), -28 * Const(size.yscale)
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElem = 7
edge		= Floor(20*Const(size.xscale)), Floor(65*Const(size.xscale))

[State 1106, PlaySnd]
type		= PlaySnd
trigger1	= Anim = 1110 && AnimElem = 7
value		= 2040, 3

[State 1106, TargetBind]
type		= TargetBind
trigger1	= Anim = 1110 && AnimElem = 7
pos			= -63 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= Anim = 1110 && AnimElem = 7
value		= -Ceil(80 * FVar(3) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1106, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= Anim = 1110 && AnimElem = 7
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1106, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1106, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 3200
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(7)		= 3200

[State 1106, Hit]	; 爆発
type						= Projectile
triggerall					= Anim = 1110 && AnimElemTime(7) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1111 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(210 * FVar(3)), Ceil(20 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1106, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= Anim = 1110 && AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(210 * FVar(3)), Ceil(20 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1106, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= Anim = 1110 && AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(210 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1106, Turn]
type		= Turn
trigger1	= Anim = 1110 && AnimTime >= 0

[State 1106, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(1)		= (Var(1) | 524288)

[State 1106, End]
type		= ChangeState
trigger1	= Anim = 1110 && AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 小手投げ・成功(通常)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1110]
type		= S
movetype	= A
physics		= N
anim		= 1110
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1100, TargetState]
type		= TargetState
trigger1	= 1
value		= 1120 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1110, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1110, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1111

;------------------- 実行
[Statedef 1111]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1111, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1111, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(4) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1111, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1111, PosFreeze]
type		= PosFreeze
trigger1	= !(AnimElem = 6 || AnimElem = 9 || AnimElem = 12 || AnimElem = 14)

[State 1111, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 6
x			= -25*Const(size.xscale)

[State 1111, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 3
value		= 1100, 0
channel		= 0
volume		= 200

[State 1111, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 9
x			= -20*Const(size.xscale)

[State 1111, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 12
x			= -10*Const(size.xscale)

[State 1111, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElemNo(0) < 7
edge		= Floor(35*Const(size.xscale)), Floor(35*Const(size.xscale))

[State 1111, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= 18 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 3
pos			= 14 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 5
pos			= -8 * Const(size.xscale), -48 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
pos			= -36 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 6
value		= 2201, 3

[State 1111, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 7
value		= -Ceil(145 * FVar(3) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1111, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 7
var(58)		= Floor( 156 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1111, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1111, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 4750
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(7)		= 4750

[State 1111, Hit]	; 爆発
type						= Projectile
triggerall					= AnimElemTime(7) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1111 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(145 * FVar(3)), Ceil(15 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1111, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(145 * FVar(3)), Ceil(15 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1111, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(145 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1111, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(1)		= (Var(1) | 524288)

[State 1111, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 7
value		= 2050, 2

[State 1111, Explod]
type		= Explod
trigger1	= AnimElem = 7
anim		= 2320
pos			= Floor(-85 * Const(size.xscale)), 0
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
facing		= -1

[State 1111, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElem = 7
edge		= Floor(20*Const(size.xscale)), Floor(65*Const(size.xscale))

[State 1111, Turn]
type		= Turn
trigger1	= AnimTime >= 0

[State 1111, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 小手投げ・成功(無条件ヒット)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1115]
type		= S
movetype	= A
physics		= N
anim		= 1110
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1115, TargetState]
type		= TargetState
trigger1	= 1
value		= 1120 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1115, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1115, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1116

;------------------- 実行
[Statedef 1116]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1116, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1116, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(4) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1116, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1116, PosFreeze]
type		= PosFreeze
trigger1	= !(AnimElem = 6 || AnimElem = 9 || AnimElem = 12 || AnimElem = 14)

[State 1116, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 6
x			= -25*Const(size.xscale)

[State 1116, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 3
value		= 1100, 0
channel		= 0
volume		= 200

[State 1116, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 9
x			= -20*Const(size.xscale)

[State 1116, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 12
x			= -10*Const(size.xscale)

[State 1116, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElemNo(0) < 7
edge		= Floor(35*Const(size.xscale)), Floor(35*Const(size.xscale))

[State 1116, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= 18 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 3
pos			= 14 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 5
pos			= -8 * Const(size.xscale), -48 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
pos			= -36 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 6
value		= 2201, 3

[State 1116, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 7
value		= -Ceil(60 * FVar(3) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1116, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 7
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1116, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1116, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 2450
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(7)		= 2450

[State 1116, Hit]	; 爆発
type						= Projectile
triggerall					= AnimElemTime(7) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1111 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(60 * FVar(3)), Ceil(10 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1116, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(60 * FVar(3)), Ceil(10 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1116, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(60 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1116, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(1)		= (Var(1) | 524288)

[State 1116, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 7
value		= 2050, 2

[State 1116, Explod]
type		= Explod
trigger1	= AnimElem = 7
anim		= 2320
pos			= Floor(-85 * Const(size.xscale)), 0
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
facing		= -1

[State 1116, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElem = 7
edge		= Floor(20*Const(size.xscale)), Floor(65*Const(size.xscale))

[State 1116, Turn]
type		= Turn
trigger1	= AnimTime >= 0

[State 1116, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 小手投げ・喰らい側
;---------------------------------------------------------------------
;------------------- 初期化1(通常)
[Statedef 1120]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1120, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1120, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 1120, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1120, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1120, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1120

[State 1120, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1120, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1121

;------------------- 実行1(通常)
[Statedef 1121]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= 1

[State 1121, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1121, PlayerPush]
type		= PlayerPush
trigger1	= AnimElemTime(5) < 0
value		= 0

[State 1121, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1121, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1121, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1121, AngleSet]
type		= AngleSet
trigger1	= AnimElemNo(0) = [4, 5]
value		= -90

[State 1121, AngleDraw]
type		= AngleDraw
trigger1	= AnimElemNo(0) = [4, 5]

[State 1121, VelMul]
type		= VelMul
trigger1	= AnimElemNo(0) = [4, 5]
x			= 0.85

[State 1121, VelSet]
type		= VelSet
trigger1	= AnimElem = 4
x			= 14.0

[State 1121, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(5) < 0
value		= SCA
ignorehitpause	= 1

[State 1121, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 6
x			= 4.0

[State 1121, VelSet]
type		= VelSet
trigger1	= AnimElem = 6
x			= 2.0
y			= -3.5

[State 1121, StateTypeSet]
type		= StateTypeSet
trigger1	= AnimElemTime(6) >= 5
statetype	= L

[State 1121, VelAdd]
type		= VelAdd
trigger1	= AnimElemTime(6) >= 1
y			= .44

[State 1121, NoyHit]
type		= NotHitBy
trigger1	= AnimElemTime(8) >= 0
value		= SCA
ignorehitpause	= 1

[State 1121, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 7
x			= 10.0

[State 1121, End]
type		= ChangeState
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && AnimElemTime(6) >= 1
trigger2	= Time >= 120
value		= 1122

;------------------- 初期化2(通常)
[Statedef 1122]
type		= L
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1122, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 1122, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5110

[State 1122, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= F7, 0

[State 1122, GameMakeAnim]
type		= GameMakeAnim
trigger1	= 1
value		= 60
pos			= 0, 0
under		= 1

[State 1122, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1123

;------------------- 実行2(通常)
[Statedef 1123]
type		= L
movetype	= H
physics		= N
ctrl		= 0

[State 1123, NoyHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1123, End]
type		= ChangeState
trigger1	= Time >= 25
value		= 7030

;------------------- 初期化1(G)
[Statedef 1125]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1125, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1125, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 1125, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1125, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1125, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1120

[State 1125, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1125, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1126

;------------------- 実行1(G)
[Statedef 1126]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= 1

[State 1126, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1126, PlayerPush]
type		= PlayerPush
trigger1	= AnimElemTime(5) < 0
value		= 0

[State 1126, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1126, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1126, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1126, AngleSet]
type		= AngleSet
trigger1	= AnimElemNo(0) = [4, 5]
value		= -90

[State 1126, AngleDraw]
type		= AngleDraw
trigger1	= AnimElemNo(0) = [4, 5]

[State 1126, VelMul]
type		= VelMul
trigger1	= AnimElemNo(0) = [4, 5]
x			= 0.85

[State 1126, VelSet]
type		= VelSet
trigger1	= AnimElem = 4
x			= 14.0

[State 1126, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(5) < 0
value		= SCA
ignorehitpause	= 1

[State 1126, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 6
x			= 4.0

[State 1126, VelSet]
type		= VelSet
trigger1	= AnimElem = 6
x			= 2.0
y			= -3.5

[State 1126, StateTypeSet]
type		= StateTypeSet
trigger1	= AnimElemTime(6) >= 5
statetype	= L

[State 1126, VelAdd]
type		= VelAdd
trigger1	= AnimElemTime(6) >= 1
y			= .44

[State 1126, NoyHit]
type		= NotHitBy
trigger1	= AnimElemTime(8) >= 0
value		= SCA
ignorehitpause	= 1

[State 1126, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 7
x			= 10.0

[State 1126, End]
type		= ChangeState
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && AnimElemTime(6) >= 1
trigger2	= Time >= 120
value		= 1127

;------------------- 初期化2(G)
[Statedef 1127]
type		= L
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1127, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 1127, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5110

[State 1127, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= F7, 0

[State 1127, GameMakeAnim]
type		= GameMakeAnim
trigger1	= 1
value		= 60
pos			= 0, 0
under		= 1

[State 1127, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1128

;------------------- 実行2(G)
[Statedef 1128]
type		= L
movetype	= H
physics		= N
ctrl		= 0

[State 1128, NoyHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1128, End]
type		= ChangeState
trigger1	= Time >= 25
value		= 7035

;---------------------------------------------------------------------
; 空中小手投げ(弱)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1150]
type		= A
movetype	= A
physics		= N
anim		= 1150
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1150, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1150, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1150, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1152

;---------------------------------------------------------------------
; 空中小手投げ(強)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1151]
type		= A
movetype	= A
physics		= N
anim		= 1151
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1151, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1151, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1151, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1152

;---------------------------------------------------------------------
; 空中小手投げ(動作中)
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 1152]
type		= A
movetype	= A
physics		= N
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1152, NotHit]
type		= NotHitBy
trigger1	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
value		= SCA
ignorehitpause	= 1

[State 1152, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
value		= 200, Random % 4
channel		= 0
volume		= 200

[State 1152, HitOverride]
type		= HitOverride
triggerall	= (Var(32) & 7) < 4
triggerall	= Pos Y + Vel Y < 0
trigger1	= AnimElemTime(11) < 0
time		= 1
attr		= SCA, AP
stateno		= StateNo
slot		= 1
IgnoreHitPause	= 1

[State 1152, HitOverride]
type		= HitOverride
triggerall	= Pos Y + Vel Y < 0
triggerall	= AnimTime < 0
trigger1	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
time		= 1
attr		= SCA, AA, AT, AP
stateno		= StateNo
slot		= 0
IgnoreHitPause	= 1

[State 1152, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= 7070
IgnoreHitPause	= 1

[State 1152, VarSet]
type		= Null;VarSet
trigger1	= (Var(32) & 7) < 2
trigger2	= 0 && (Var(32) & 7) < 3
trigger2	= NumHelper(30000)
trigger2	= (Helper(30000),Var(0) = 30000)
trigger2	= (Helper(30000),Var(22) & 32)
var(0)		= 7500
IgnoreHitPause	= 1

[State 1152, TargetState]
type		= TargetState
trigger1	= MoveHit = 1
value		= Var(0)
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1152, VarSet]
type		= VarSet
trigger1	= MoveHit || HitCount || HitPauseTime || (Var(18) & 528482304)
var(5)		= 1
IgnoreHitPause	= 1

[State 1152, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= Var(5) > 0
value		= 1160

[State 1152, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1152, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

; 当身で取れるのはその枠にヒットした処理順の一番若いキャラのみで、
; 取った後再度当身判定枠を出しても古いTargetが捨てられるだけ
; よって取った後は当身判定枠を新規に出さないようにしたい
[State 1152, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
triggerall		= !(Var(18) & 528482304)
triggerall		= !MoveContact && !(MoveReversed && (HitPauseTime || (Var(18) & 528482304)))
trigger1		= 1
reversal.attr	= SCA, AA, AT, AP
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 11 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(20 * Const(size.xscale)), Floor((-25 + 20*(Anim = 1151)) * Const(size.yscale))
hitsound		= S2010, 1
id				= 10 + (Var(16) & 240)/16
p2stateno		= Var(0)
getpower		= Var(57), 0
givepower		= 0, 0
numhits			= 0
guard.dist		= 0
hitflag			= P

[State 1152, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
triggerall		= !(Var(18) & 528482304)
triggerall		= !MoveContact && !(MoveReversed && (HitPauseTime || (Var(18) & 528482304)))
trigger1		= (Var(32) & 7) >= 4
reversal.attr	= SCA, AA, AP
attr			= A, ST
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 11 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(20 * Const(size.xscale)), Floor((-25 + 20*(Anim = 1151)) * Const(size.yscale))
hitsound		= S2010, 1
id				= 10 + (Var(16) & 240)/16
p2stateno		= Var(0)
getpower		= Var(57), 0
givepower		= 0, 0
numhits			= 0
guard.dist		= 0

[State 1152, Gravity]
type		= Gravity
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) > 0

[State 1152, PosSet]
type		= PosSet
triggerall	= !(Var(18) & 528482304)
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 1152, On Land]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemNo(0) < 12
trigger1	= Pos Y >= 0
value		= 1155

[State 1152, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 48

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中小手投げ・着地
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1155]
type		= S
movetype	= A
physics		= N
anim		= 1155
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1155, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 1155, 3]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 1155, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1156

;------------------- 実行
[Statedef 1156]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1156, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中小手投げ・当身成功
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1160]
type		= A
movetype	= A
physics		= N
anim		= 1110
ctrl		= 0
facep2		= 1
velset		= -0.5*Const(size.xscale), 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1160, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1160, TargetState]
type		= TargetState
trigger1	= 1
value		= 1170 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1160, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1161

;------------------- 実行
[Statedef 1161]
type		= A
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1161, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1161, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(4) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1161, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1161, AngleSet]
type		= AngleSet
trigger1	= AnimTime != 0
value		= 15 * (Pos Y <= -5)

[State 1161, AngleDraw]
type		= AngleDraw
trigger1	= AnimTime != 0

[State 1160, Gravity]
type		= Gravity
triggerall	= AnimTime != 0
trigger1	= AnimElemTime(1) > 0
trigger1	= (Pos Y < 0)

[State 1161, VelSet]
type		= VelSet
trigger1	= Pos Y > -5
x			= 0
y			= 0

[State 1161, PosSet]
type		= PosSet
trigger1	= Pos Y > -5
y			= 0

[State 1161, PosAdd]
type		= PosAdd
trigger1	= Anim = 1110 && AnimElem = 6
x			= -25*Const(size.xscale)

[State 1161, PlaySnd]
type		= PlaySnd
trigger1	= Anim = 1110 && AnimElem = 3
value		= 1100, 1
channel		= 0
volume		= 200

[State 1161, PosAdd]
type		= PosAdd
trigger1	= Anim = 1110 && AnimElem = 9
x			= -20*Const(size.xscale)

[State 1161, PosAdd]
type		= PosAdd
trigger1	= Anim = 1110 && AnimElem = 12
x			= -10*Const(size.xscale)

[State 1161, Width]
type		= Width
triggerall	= AnimTime != 0
trigger1	= Anim = 1110 && AnimElemNo(0) < 7
edge		= Floor(35*Const(size.xscale)), Floor(35*Const(size.xscale))

[State 1161, TargetBind]
type		= TargetBind
triggerall	= AnimTime != 0
trigger1	= Anim = 1110 && AnimElemNo(0) = 1
pos			= (24 - 5*(Pos Y < 0)) * Const(size.xscale), (-4*(Pos Y < 0)) * Const(size.yscale)
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, TargetBind]
type		= TargetBind
triggerall	= AnimTime != 0
trigger1	= Anim = 1110 && AnimElemNo(0) = 3
pos			= (22 - 5*(Pos Y < 0)) * Const(size.xscale), (-4*(Pos Y < 0)) * Const(size.yscale)
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, TargetBind]
type		= TargetBind
triggerall	= AnimTime != 0
trigger1	= Anim = 1110 && AnimElemNo(0) = 5
pos			= (-4 - 5*(Pos Y < 0)) * Const(size.xscale), (-48 - 5*(Pos Y < 0)) * Const(size.yscale)
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, TargetBind]
type		= TargetBind
triggerall	= AnimTime != 0
trigger1	= Anim = 1110 && AnimElemNo(0) = 6
pos			= (-16 - 5*(Pos Y < 0)) * Const(size.xscale), (-28 - 5*(Pos Y < 0)) * Const(size.yscale)
time		= 255
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, Width]
type		= Width
trigger1	= Anim = 1110 && AnimElem = 7
edge		= Floor(20*Const(size.xscale)), Floor(65*Const(size.xscale))

[State 1161, PlaySnd]
type		= PlaySnd
trigger1	= Anim = 1110 && AnimElem = 7
value		= 2040, 3

[State 1161, TargetBind]
type		= TargetBind
triggerall	= AnimTime != 0
trigger1	= Anim = 1110 && AnimElem = 7
pos			= -63 * Const(size.xscale), (-5*(Pos Y < 0)) * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= Anim = 1110 && AnimElem = 7
value		= -Ceil(80 * FVar(3) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1161, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= Anim = 1110 && AnimElem = 7
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1161, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1161, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 3200
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(7)		= 3200

[State 1161, Hit]	; 爆発
type						= Projectile
triggerall					= Anim = 1110 && AnimElemTime(7) = 0
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1111 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(220 * FVar(3)), Ceil(20 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1161, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= Anim = 1110 && AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(220 * FVar(3)), Ceil(20 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1161, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= Anim = 1110 && AnimElem = 7
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(220 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1161, Turn]
type		= Turn
trigger1	= Anim = 1110 && AnimTime >= 0

[State 1161, VelSet]
type		= VelSet
trigger1	= Pos Y < 0
trigger1	= Anim = 1110 && AnimTime >= 0
x			= -0.75*Const(size.xscale)
y			= .5

[State 1161, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Anim = 1110 && AnimElem = 7
var(1)		= (Var(1) | 524288)

[State 1161, End]
type		= ChangeState
triggerall	= Anim = 1110
triggerall	= Pos Y < 0
trigger1	= AnimTime >= 0
value		= 950

[State 1161, End]
type		= ChangeState
triggerall	= Anim = 1110
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中小手投げ・喰らい側
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 1170]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1170, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1170

[State 1170, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1170, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1171

;------------------- 実行(通常)
[Statedef 1171]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= 1

[State 1171, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1171, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1171, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1171, VelSet]
type		= VelSet
trigger1	= AnimElem = 5, = 1
x			= 6.0
y			= 10.0

[State 1171, VelAdd]
type		= VelAdd
trigger1	= AnimElem = 5, >= 1
x			= .6
y			= .44

[State 1171, VelSet]
type		= VelSet
triggerall	= AnimElem = 5, >= 1
trigger1	= Pos Y >= 0
y			= -4.0

[State 1171, End]
type		= ChangeState
triggerall	= AnimElem = 5, >= 1
trigger1	= Pos Y >= 0
trigger2	= Time >= 120
value		= 1180

;------------------- 初期化(G)
[Statedef 1175]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1175, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1170

[State 1175, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1175, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1176

;------------------- 実行(G)
[Statedef 1176]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= 1

[State 1176, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1176, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1176, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1176, VelSet]
type		= VelSet
trigger1	= AnimElem = 5, = 1
x			= 6.0
y			= 10.0

[State 1176, VelAdd]
type		= VelAdd
trigger1	= AnimElem = 5, >= 1
x			= .6
y			= .44

[State 1176, VelSet]
type		= VelSet
triggerall	= AnimElem = 5, >= 1
trigger1	= Pos Y >= 0
y			= -4.0

[State 1176, End]
type		= ChangeState
triggerall	= AnimElem = 5, >= 1
trigger1	= Pos Y >= 0
trigger2	= Time >= 120
value		= 1185

;---------------------------------------------------------------------
; 空中小手投げ・喰らい側・地面バウンド後
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 1180]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1180, EnvShake]
type		= EnvShake
trigger1	= 1
ampl		= 10
time		= 10

[State 1180, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5100

[State 1180, Turn]
type		= Turn
trigger1	= 1

[State 1180, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 1180, GameMakeAnim]
type		= GameMakeAnim
trigger1	= 1
value		= 61
pos			= 0, 0
under		= 0

[State 1180, PosSet]
type		= PosSet
trigger1	= 1
y			= -1

[State 1180, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1181

;------------------- 実行(通常)
[Statedef 1181]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1181, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1181, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1181, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1181, VelAdd]
type		= VelAdd
trigger1	= 1
x			= -.6

[State 1181, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim = 5100 && AnimTime >= 0
value		= 5070

[State 1181, End]
type		= ChangeState
trigger1	= BackEdgeBodyDist <= 10
trigger2	= FrontEdgeBodyDist <= 10
trigger3	= Time >= 120
value		= 1190

;------------------- 初期化(G)
[Statedef 1185]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1185, EnvShake]
type		= EnvShake
trigger1	= 1
ampl		= 10
time		= 10

[State 1185, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5100

[State 1185, Turn]
type		= Turn
trigger1	= 1

[State 1185, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 1185, GameMakeAnim]
type		= GameMakeAnim
trigger1	= 1
value		= 61
pos			= 0, 0
under		= 0

[State 1185, PosSet]
type		= PosSet
trigger1	= 1
y			= -1

[State 1185, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1186

;------------------- 実行(G)
[Statedef 1186]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1186, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1186, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1186, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1186, VelAdd]
type		= VelAdd
trigger1	= 1
x			= -.6

[State 1186, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim = 5100 && AnimTime >= 0
value		= 5070

[State 1186, End]
type		= ChangeState
trigger1	= BackEdgeBodyDist <= 10
trigger2	= FrontEdgeBodyDist <= 10
trigger3	= Time >= 120
value		= 1195

;---------------------------------------------------------------------
; 空中小手投げ・喰らい側・壁バウンド後
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 1190]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1190, EnvShake]
type		= EnvShake
trigger1	= 1
ampl		= 10
time		= 10

[State 1190, Turn]
type		= Turn
trigger1	= (BackEdgeBodyDist < FrontEdgeBodyDist)

; postype=frontのバグ対策で、postype=backを使うため
[State 1190, Turn]
type		= Turn
trigger1	= 1

[State 1190, Explod]
type		= Explod
trigger1	= 1
anim		= F71
pos			= 0, Floor(ScreenPos Y - 50)
postype		= back
sprpriority	= 3

[State 1190, Turn]
type		= Turn
trigger1	= 1

[State 1190, VelMul]
type		= VelMul
trigger1	= Vel X >= 0
x			= -1

[State 1190, VelMul]
type		= VelMul
trigger1	= 1
x			= 0.1

[State 1190, VelSet]
type		= VelSet
trigger1	= 1
x			= Vel X - 1.125

[State 1190, VelSet]
type		= VelSet
Trigger1	= 1
y			= -5.0 - IfElse( Pos Y >= -200, 0.035 * (Pos Y + 200), 0 )

[State 1190, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1190

[State 1190, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1191

;------------------- 実行(通常)
[Statedef 1191]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1191, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1191, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1191, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1191, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1191, ChangeAnim2]
type		= ChangeAnim2
trigger1	= Anim = 1190 && AnimTime >= 0
value		= 7070

[State 1191, PlayerPush]
type		= PlayerPush
trigger1	= Anim = 1190
value		= 0

[State 1191, NotHitBy]
type		= NotHitBy
trigger1	= Anim = 1190
value		= SCA
ignorehitpause	= 1

[State 1191, VelAdd]
type		= VelAdd
trigger1	= 1
y			= .44

[State 1191, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= -4.0

[State 1191, Hit ground]
type		= ChangeState
trigger1	= Pos Y >= 0
trigger2	= Time >= 120
value		= 7050

;------------------- 初期化(G)
[Statedef 1195]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1195, EnvShake]
type		= EnvShake
trigger1	= 1
ampl		= 10
time		= 10

[State 1195, Turn]
type		= Turn
trigger1	= (BackEdgeBodyDist < FrontEdgeBodyDist)

; postype=frontのバグ対策で、postype=backを使うため
[State 1195, Turn]
type		= Turn
trigger1	= 1

[State 1195, Explod]
type		= Explod
trigger1	= 1
anim		= F71
pos			= 0, Floor(ScreenPos Y - 50)
postype		= back
sprpriority	= 3

[State 1195, Turn]
type		= Turn
trigger1	= 1

[State 1195, VelMul]
type		= VelMul
trigger1	= Vel X >= 0
x			= -1

[State 1195, VelMul]
type		= VelMul
trigger1	= 1
x			= 0.1

[State 1195, VelSet]
type		= VelSet
trigger1	= 1
x			= Vel X - 1.125

[State 1195, VelSet]
type		= VelSet
Trigger1	= 1
y			= -5.0 - IfElse( Pos Y >= -200, 0.035 * (Pos Y + 200), 0 )

[State 1195, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1190

[State 1195, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1196

;------------------- 実行(G)
[Statedef 1196]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1196, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1196, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1196, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1196, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1196, ChangeAnim2]
type		= ChangeAnim2
trigger1	= Anim = 1190 && AnimTime >= 0
value		= 7070

[State 1196, PlayerPush]
type		= PlayerPush
trigger1	= Anim = 1190
value		= 0

[State 1196, NotHitBy]
type		= NotHitBy
trigger1	= Anim = 1190
value		= SCA
ignorehitpause	= 1

[State 1196, VelAdd]
type		= VelAdd
trigger1	= 1
y			= .44

[State 1196, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= -4.0

[State 1196, Hit ground]
type		= ChangeState
trigger1	= Pos Y >= 0
trigger2	= Time >= 120
value		= 7055

;---------------------------------------------------------------------
; 寄り切り(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1200]
type		= S
movetype	= I
physics		= N
anim		= 1200
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1200, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1200, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1200, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 1200, 0
channel		= 0
volume		= 200

[State 1200, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1200, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1201

;------------------- 実行
[Statedef 1201]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1201, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1201, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 2
x			= 2*Const(size.xscale)

[State 1201, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1205

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 寄り切り(攻撃判定)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1205]
type		= S
movetype	= A
physics		= N
anim		= 1205
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1205, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1205, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1206

;------------------- 実行
[Statedef 1206]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1206, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(3) < 0
value		= SCA
ignorehitpause	= 1

[State 1206, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= AnimElemTime(3) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1206, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
x			= 5*Const(size.xscale)

[State 1206, NotHit]
type		= NotHitBy
trigger1	= MoveHit || HitCount
value		= SCA
ignorehitpause	= 1

[State 1206, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 1210

[State 1206, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1206, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(3) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(消し) ヒットストップ中を当身で取られる用
type		= Null;HitDef
trigger1	= 1
ignorehitpause	= 1

[State 1206, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 80
ignorehitpause	= 1

[State 1206, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1206, Throw]	; ガー不
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= P2Dist X >= (-35-2)*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= (35-2)*Const(size.xscale)
trigger2					= P2Dist X <= (35-2)*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= , ST
animtype					= Hard
damage						= 0
getpower					= Var(57), 0
givepower					= 0, 0
guardflag					= None
hitflag						= M-
priority					= 5, Miss
pausetime					= 1, 2
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= -1
guard.sparkno				= -1
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-78 * Const(size.yscale))
hitsound					= S2030, 0
;guardsound					= S2010, 0
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1206, Throw Hit]	; やられヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= P2MoveType = H
triggerall					= !((P2StateNo = 120) || (P2StateNo = [130, 132]) || (P2StateNo = 140) || (P2StateNo = [150, 155]))
triggerall					= P2Dist X >= (-51-20)*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= (51-20)*Const(size.xscale)
trigger2					= P2Dist X <= (51-20)*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= , ST
animtype					= Hard
damage						= 0
getpower					= Var(57), 0
givepower					= 0, 0
guardflag					= M
hitflag						= M
priority					= 5, Miss
pausetime					= 1, 2
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= -1
guard.sparkno				= -1
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-78 * Const(size.yscale))
hitsound					= S2030, 0
;guardsound					= S2010, 0
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(3)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1206, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
value		= 1200, 4
channel		= 0
volume		= 200

[State 1206,End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 寄り切り(成功・掴み動作)
;---------------------------------------------------------------------
;------------------- 初期化1
[Statedef 1210]
type		= A
movetype	= A
physics		= N
anim		= 1210
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1210, Explod]
type		= Explod
trigger1	= 1
anim		= 2150
pos			= Floor(56 * Const(size.xscale)), Floor(-52 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1
ignorehitpause	= 1

[State 1210, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1211
ignorehitpause	= 1

;------------------- 初期化2(派生から用)
[Statedef 1211]
type		= A
movetype	= A
physics		= N
anim		= 1210
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1211, TargetState]
type		= TargetState
trigger1	= 1
value		= 1240 + 2*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1211, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1211, ChangeAnim]
type		= ChangeAnim
trigger1	= Pos Y < 0
value		= 1215

[State 1211, PlaySnd]
type		= PlaySnd
trigger1	= PrevStateNo != 1210
value		= 1600, 1
channel		= 0
volume		= 200

[State 1211, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1212

;------------------- 実行
[Statedef 1212]
type		= A
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1212, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1212, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1212, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(4) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1212, PosFreeze]
type		= PosFreeze
trigger1	= 1

[State 1212, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1212, SprPriority]
type		= SprPriority
trigger1	= 1
value		= IfElse( Anim = 1210, 1, -1 )

[State 1212, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= IfElse( Anim = 1210, 43, 50 ) * Const(size.xscale), IfElse( Anim = 1210, 0, -65 ) * Const(size.yscale)
time		= 8
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1212, Width]
type		= Width
trigger1	= AnimElem = 1
edge		= Floor(45*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 1212, TargetBind]
type		= TargetBind
triggerall	= Anim = 1210
trigger1	= AnimElem = 3
pos			= 39 * Const(size.xscale), 0
time		= 8
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1212, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1220

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 寄り切り(寄り切り動作)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1220]
type		= A
movetype	= A
physics		= N
anim		= 1220
ctrl		= 0
velset		= 7.0*Const(size.xscale), 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1220, TargetState]
type		= TargetState
trigger1	= 1
value		= 1245 + 2*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1220, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 1220, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1220, Width]
type		= Width
trigger1	= 1
edge		= Floor(40*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 1220, ChangeAnim]
type		= ChangeAnim
trigger1	= Pos Y < 0
value		= 1225

[State 1220, PosAdd]
type		= PosAdd
trigger1	= Pos Y < 0
x			= 15*Const(size.xscale)

[State 1220, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1221

;------------------- 実行
[Statedef 1221]
type		= A
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1221, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1221, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1221, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1221, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 1220, VelSet]
type		= VelSet
triggerall	= AnimElem = 1
trigger1	= Pos Y < 0
y			= -2

[State 1221, ChangeAnim]
type		= ChangeAnim
triggerall	= Anim != 1220
trigger1	= Pos Y + Vel Y >= 0
value		= 1220

[State 1221, SprPriority]
type		= SprPriority
trigger1	= 1
value		= IfElse( Anim = 1220, 1, -1 )

[State 1221, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 1221, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 1221, PlaySnd]
type		= PlaySnd
triggerall	= Pos Y >= 0
trigger1	= ((Var(4) - Var(59)) % 70) = 0
value		= 2060, 0

[State 1221, PlaySnd]
type		= PlaySnd
triggerall	= Pos Y >= 0
trigger1	= ((Var(4) - Var(59)) % 70) = 21
value		= 2060, 1

[State 1221, PlaySnd]
type		= PlaySnd
triggerall	= Pos Y >= 0
trigger1	= ((Var(4) - Var(59)) % 70) = 47
value		= 2060, 2

[State 1221, TargetBind]
type		= TargetBind
trigger1	= 1
pos			= IfElse( Anim = 1220, 40, 35 ) * Const(size.xscale), IfElse( Anim = 1220, 0, -65 ) * Const(size.yscale)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1221, ScreenBound]
type		= ScreenBound
trigger1	= (Var(4) - Var(59)) > 150
value		= 1
movecamera	= 0, 0

[State 1221, End]
type		= ChangeState
trigger1	= FrontEdgeDist < 45
trigger2	= (Var(4) - Var(59)) >= 180
value		= 1230

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 寄り切り(壁ヒット)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1230]
type		= A
movetype	= A
physics		= N
ctrl		= 0
velset		= 0, 0
sprpriority	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1230, TargetState]
type		= TargetState
trigger1	= 1
value		= 1250 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1230, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 1230, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1230, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 1220
value		= 1220

[State 1230, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 1200, 2 + (Var(5) = 1660)
channel		= 0
volume		= 200

[State 1230, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2000, 7

[State 1230, EnvShake]
type		= EnvShake
trigger1	= 1
time		= 15

[State 1230, EnvColor]
type		= EnvColor
trigger1	= 1
time		= 2
value		= 248, 248, 248

[State 1230, TargetBind]
type		= TargetBind
trigger1	= 1
pos			= 50 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1230, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= 1
value		= -Ceil((140 - 20*(Var(5) = 920) + 80*(Var(5) = 1660)) * FVar(3) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1230, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1230, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
var(58)		= Floor( (39 - 9*(Var(5) = 920) + 8*(Var(5) = 1660)) * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1230, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= 1
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1230, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - (4750 - 750*(Var(5) = 920) + 1250*(Var(5) = 1660))
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
var(7)		= (4750 - 750*(Var(5) = 920) + 1250*(Var(5) = 1660))

[State 1230, Hit]	; 爆発
type						= Projectile
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1221 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil((140 - 20*(Var(5) = 920) + 80*(Var(5) = 1660)) * FVar(3)), Ceil((15 + 10*(Var(5) = 1660)) * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1230, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil((140 - 20*(Var(5) = 920) + 80*(Var(5) = 1660)) * FVar(3)), Ceil((15 + 10*(Var(5) = 1660)) * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1230, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil((140 - 20*(Var(5) = 920) + 80*(Var(5) = 1660)) * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1230, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= 1
var(1)		= (Var(1) | 524288)

[State 1230, Width]
type		= Width
trigger1	= 1
edge		= Floor(45*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 1230, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1231

;------------------- 実行
[Statedef 1231]
type		= A
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1231, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1231, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1231, Explod]
type		= Explod
trigger1	= (Var(4) - Var(59)) = 2
anim		= 2020
pos			= Floor(45 * Const(size.xscale)), Floor(-55 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
bindtime	= 1
ownpal		= 1

[State 1231, Explod]
type		= Explod
trigger1	= (Var(4) - Var(59)) = 2
anim		= 2307
pos			= Floor(-3*Facing * Const(size.xscale)), Floor(ScreenPos Y - 60 * Const(size.yscale))
postype		= front
scale		= Const(size.xscale), Const(size.yscale)
facing		= -1*Facing
sprpriority	= -2
bindtime	= 1
ownpal		= 1
removeongethit	= 1

[State 1231, Explod]
type		= Explod
trigger1	= (Var(4) - Var(59)) = 2
anim		= 2308
pos			= Floor(-3*Facing * Const(size.xscale)), Floor(ScreenPos Y - 60 * Const(size.yscale))
postype		= front
scale		= Const(size.xscale), Const(size.yscale)
facing		= -1*Facing
sprpriority	= 2
bindtime	= 1
ownpal		= 1
removeongethit	= 1

[State 1231, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 8
value		= 1235

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 寄り切り(バックステップ)
;---------------------------------------------------------------------
;------------------- 開始・初期化
[Statedef 1235]
type		= A
movetype	= I
physics		= N
anim		= 105
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1235, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1235, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1236

;------------------- 開始・実行
[Statedef 1236]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1236, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1236, Gravity]
type		= Gravity
trigger1	= AnimElemTime(2)  > 0

[State 1236, VelSet]
type		= VelSet
trigger1	= AnimElem = 2
x			= -2.1*Const(size.xscale)
y			= -3.25

[State 1236, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 2050, 1

[State 1236, End]
type		= ChangeState
trigger1	= AnimElem = 2, > 0
trigger1	= Vel Y > 0 && Pos Y + Vel Y >= 0
value		= 1237

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 着地・初期化
[Statedef 1237]
type		= S
movetype	= I
physics		= N
anim		= 1230
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1237, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 1237, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 1237, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1237, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1238

;------------------- 着地・実行
[Statedef 1238]
type		= S
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1238, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1238, MakeDust]
type		= MakeDust
trigger1	= 1
pos			= Floor(-30 * Const(size.xscale)), 0

[State 1238, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 寄り切り(投げられ側、掴まれ待ち)
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 1240]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1240, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1240, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 1240, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1240, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1240, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1240

[State 1240, ChangeAnim2]
type		= ChangeAnim2
trigger1	= Pos Y < 0
value		= 1245

[State 1240, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1240, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1241

;------------------- 実行(通常)
[Statedef 1241]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1241, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1241, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1241, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1241, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= Anim

[State 1241, End]
type		= ChangeState
trigger1	= Time >= 120
value		= 1245

;------------------- 初期化(G)
[Statedef 1242]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1242, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1242, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 1242, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1242, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1242, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1240

[State 1242, ChangeAnim2]
type		= ChangeAnim2
trigger1	= Pos Y < 0
value		= 1245

[State 1242, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1242, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1243

;------------------- 実行(G)
[Statedef 1243]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1243, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1243, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1243, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1243, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= Anim

[State 1243, End]
type		= ChangeState
trigger1	= Time >= 120
value		= 1247

;---------------------------------------------------------------------
; 寄り切り(投げられ側、寄り切られ)
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 1245]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1245, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1240

[State 1245, ChangeAnim2]
type		= ChangeAnim2
trigger1	= Pos Y < 0
value		= 1245

[State 1245, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1245, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1246

;------------------- 実行(通常)
[Statedef 1246]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1246, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1246, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1246, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1246, ChangeAnim2]
type		= ChangeAnim2
triggerall	= Anim != 1240
trigger1	= Pos Y >= 0
value		= 1240

[State 1246, ChangeAnim2]
type		= ChangeAnim2
trigger1	= AnimTime >= 0
value		= Anim

[State 1246, ScreenBound]
type		= ScreenBound
trigger1	= Time > 150
value		= 1
movecamera	= 0, 0

[State 1246, End]
type		= ChangeState
trigger1	= Time >= 210
value		= 1250

;------------------- 初期化(G)
[Statedef 1247]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1247, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1240

[State 1247, ChangeAnim2]
type		= ChangeAnim2
trigger1	= Pos Y < 0
value		= 1245

[State 1247, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1247, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1248

;------------------- 実行(G)
[Statedef 1248]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1248, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1248, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1248, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1248, ChangeAnim2]
type		= ChangeAnim2
triggerall	= Anim != 1240
trigger1	= Pos Y >= 0
value		= 1240

[State 1248, ChangeAnim2]
type		= ChangeAnim2
trigger1	= AnimTime >= 0
value		= Anim

[State 1248, ScreenBound]
type		= ScreenBound
trigger1	= Time > 150
value		= 1
movecamera	= 0, 0

[State 1248, End]
type		= ChangeState
trigger1	= Time >= 210
value		= 1255

;---------------------------------------------------------------------
; 寄り切り(投げられ側、壁やられ)
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 1250]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, -8.0

[State 1250, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 7050

[State 1250, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1251

;------------------- 実行(通常)
[Statedef 1251]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1251, ChangeAnim2]
type		= ChangeAnim2
triggerall	= Anim = 7050
trigger1	= Vel Y > 0
value		= 7060

[State 1251, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1251, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1251, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1251, NotHitBy]
type		= NotHitBy
trigger1	= Anim = 7050 && AnimElemTime(2) < 0
value		= SCA
ignorehitpause	= 1

[State 1251, VelAdd]
type		= VelAdd
trigger1	= Time > 1
y			= .44

[State 1251, ScreenBound]
type		= ScreenBound
trigger1	= 1
value		= 1
movecamera	= 0, 0

[State 1251, PosSet]
type		= PosSet
trigger1	= Time > 5 && Pos Y + Vel Y - Vel Y >= 0
y			= 0

[State 1251, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
x			= 0
y			= -2.0

[State 1251, End]
type		= ChangeState
trigger1	= (Time > 5 && Pos Y >= 0)
trigger2	= Time >= 120
value		= 7040

;------------------- 初期化(G)
[Statedef 1255]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, -8.0

[State 1255, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 7050

[State 1255, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1256

;------------------- 実行(G)
[Statedef 1256]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1256, ChangeAnim2]
type		= ChangeAnim2
triggerall	= Anim = 7050
trigger1	= Vel Y > 0
value		= 7060

[State 1256, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1256, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1256, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1256, NotHitBy]
type		= NotHitBy
trigger1	= Anim = 7050 && AnimElemTime(2) < 0
value		= SCA
ignorehitpause	= 1

[State 1256, VelAdd]
type		= VelAdd
trigger1	= Time > 1
y			= .44

[State 1256, ScreenBound]
type		= ScreenBound
trigger1	= 1
value		= 1
movecamera	= 0, 0

[State 1256, PosSet]
type		= PosSet
trigger1	= Time > 5 && Pos Y + Vel Y - Vel Y >= 0
y			= 0

[State 1256, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
x			= 0
y			= -2.0

[State 1256, End]
type		= ChangeState
trigger1	= (Time > 5 && Pos Y >= 0)
trigger2	= Time >= 120
value		= 7045

;---------------------------------------------------------------------
; 掛け投げ・弱
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1300]
type		= S
movetype	= A
physics		= N
anim		= 1300
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1300, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1300, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1300, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1302

;---------------------------------------------------------------------
; 掛け投げ・強
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1301]
type		= S
movetype	= A
physics		= N
anim		= 1300
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1301, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1301, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= 1

[State 1301, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1302

;------------------- 実行
[Statedef 1302]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1302, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 1310 + Var(5)

[State 1302, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1302, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(3) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1302, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 80
ignorehitpause	= 1

[State 1302, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1302, Throw]	; ガー不
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= P2Dist X >= -35*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= 35*Const(size.xscale)
trigger2					= P2Dist X <= 35*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= S, ST
animtype					= Hard
damage						= 0
getpower					= Var(57), 0
givepower					= 0, 0
guardflag					= None
hitflag						= M-
priority					= 5, Miss
pausetime					= 1, 2
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= -1
guard.sparkno				= -1
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-78 * Const(size.yscale))
hitsound					= S2030, 0
;guardsound					= S2010, 0
guard.dist					= 0
p1facing					= 1
p2facing					= -1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1302, Throw Hit]	; やられヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= P2MoveType = H
triggerall					= !((P2StateNo = 120) || (P2StateNo = [130, 132]) || (P2StateNo = 140) || (P2StateNo = [150, 155]))
triggerall					= P2Dist X >= -35*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= 35*Const(size.xscale)
trigger2					= P2Dist X <= 35*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= S, ST
animtype					= Hard
damage						= 0
getpower					= Var(57), 0
givepower					= 0, 0
guardflag					= M
hitflag						= M
priority					= 5, Miss
pausetime					= 1, 2
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= -1
guard.sparkno				= -1
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-78 * Const(size.yscale))
hitsound					= S2030, 0
;guardsound					= S2010, 0
guard.dist					= 0
p1facing					= 1
p2facing					= -1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(3)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1302, NotHit]
type		= NotHitBy
trigger1	= MoveHit || HitCount
value		= SCA
ignorehitpause	= 1

[State 1302, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 掛け投げ・後方・成功
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1310]
type		= S
movetype	= A
physics		= N
anim		= 1310
ctrl		= 0
facep2		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1310, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1310, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1312

;---------------------------------------------------------------------
; 掛け投げ・前方・成功
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1311]
type		= S
movetype	= A
physics		= N
anim		= 1310
ctrl		= 0
facep2		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1311, Turn]
type		= Turn
trigger1	= 1

[State 1311, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1311, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1312

;---------------------------------------------------------------------
; 掛け投げ・成功
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 1312]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1312, TargetState]
type		= TargetState
trigger1	= AnimElem = 1
value		= 1320 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(3) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1312, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1312, Freeze]
type		= PosFreeze
trigger1	= !AnimElem = 16

[State 1312, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1312, Explod]
type		= Explod
trigger1	= AnimElem = 2
anim		= 2100
pos			= Floor(16 * Const(size.xscale)), Floor(-63 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= 26 * Const(size.xscale), 0
time		= 4
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 2
pos			= 16 * Const(size.xscale), -62 * Const(size.yscale)
time		= 6
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 3
pos			= 14 * Const(size.xscale), -62 * Const(size.yscale)
time		= 5
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
pos			= 9 * Const(size.xscale), -72 * Const(size.yscale)
time		= 5
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 5
pos			= 1 * Const(size.xscale), -72 * Const(size.yscale)
time		= 4
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
pos			= -18 * Const(size.xscale), -70 * Const(size.yscale)
time		= 3
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 7
pos			= -26 * Const(size.xscale), -60 * Const(size.yscale)
time		= 2
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, Width]
type		= Width
trigger1	= AnimElem = 7
edge		= Floor(20*Const(size.xscale)), Floor(30*Const(size.xscale))

[State 1312, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 8
pos			= -60 * Const(size.xscale), -40 * Const(size.yscale)
time		= 2
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, Width]
type		= Width
trigger1	= AnimElem = 8
edge		= Floor(20*Const(size.xscale)), Floor(60*Const(size.xscale))

[State 1312, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 9
absolute	= 0
value		= -Ceil(130 * FVar(3) * (Const(data.attack)/100.0))
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1312, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 9
var(58)		= Floor( 156 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1312, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1312, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 4750
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 9
var(7)		= 4750

[State 1312, Hit]	; 爆発
type						= Projectile
triggerall					= AnimElemTime(9) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1311 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(130 * FVar(3)), Ceil(15 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1312, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 9
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(130 * FVar(3)), Ceil(15 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1312, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 9
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(130 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1312, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 9
var(1)		= (Var(1) | 524288)

[State 1312, PlaySnd]
type		= PlaySnd
trigger1 	= AnimElem = 1
value		= 200, Random % 4
channel		= 0
volume		= 200

[State 1312, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 8
value		= 1300, 0
channel		= 0
volume		= 200

[State 1312, PlaySnd]
type		= PlaySnd
trigger1 	= AnimElem = 9
value		= 2040, 3

[State 1312, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 16
x			= -20*Const(size.xscale)

[State 1312, Turn]
type		= Turn
trigger1	= AnimTime >= 0

[State 1312, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 掛け投げ(喰らい側)
;---------------------------------------------------------------------
;------------------- 初期化1(通常)
[Statedef 1320]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1320, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1320, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 1320, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1320, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1320, Anim]
type		= ChangeAnim2
trigger1	= 1
value		= 1320

[State 1320, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1320, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1321

;------------------- 実行1(通常)
[Statedef 1321]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1321, NoTurn]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1321, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1321, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1321, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 120
value		= 1322

;------------------- 初期化2(通常)
[Statedef 1322]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1322, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1321

[State 1322, Velocity]
type		= VelSet
trigger1	= 1
x			= 3.4
y			= -4.5

[State 1322, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1323

;------------------- 実行2(通常)
[Statedef 1323]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1323, NoTurn]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1323, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1323, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1323, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1323, Accel]
type		= VelAdd
trigger1	= AnimElemTime(1) > 0
y			= .44

[State 1323, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 1323, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0 && Vel X != 0
y			= -2.0

[State 1323, End]
type		= ChangeState
trigger1	= Vel X != 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7040

;------------------- 初期化1(G)
[Statedef 1325]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1325, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1325, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 1325, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1325, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1325, Anim]
type		= ChangeAnim2
trigger1	= 1
value		= 1320

[State 1325, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1325, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1326

;------------------- 実行1(G)
[Statedef 1326]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1326, NoTurn]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1326, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1326, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1326, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 120
value		= 1327

;------------------- 初期化2(G)
[Statedef 1327]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1327, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1321

[State 1327, Velocity]
type		= VelSet
trigger1	= 1
x			= 3.4
y			= -4.5

[State 1327, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1328

;------------------- 実行2(G)
[Statedef 1328]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 1328, NoTurn]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 1328, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1328, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1328, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1328, Accel]
type		= VelAdd
trigger1	= AnimElemTime(1) > 0
y			= .44

[State 1328, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 1328, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0 && Vel X != 0
y			= -2.0

[State 1328, End]
type		= ChangeState
trigger1	= Vel X != 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7045

;---------------------------------------------------------------------
; 突き上げ・弱(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1400]
type		= S
movetype	= A
physics		= N
anim		= 1400
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1400, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1400, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 1400, Contact Reset]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 8192) - 8192

[State 1400, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1401

;------------------- 実行
[Statedef 1401]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
;x			= 11*Const(size.xscale)
x			= 6*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
;x			= 6*Const(size.xscale)
x			= 3*Const(size.xscale)

[State 1401, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1401, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1401, ReversalDef]	; ガードポイント
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= 0 <= AnimElemTime(2) && AnimElemTime(7) < 0
reversal.attr	= SCA, AA, AP
getpower		= Var(57)
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 8 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S2010, 1
guard.dist		= Floor(Const(size.attack.dist) * Const(size.xscale))
hitflag			= P
p1stateno		= 1402
ignorehitpause	= 1

[State 1401, PalFX]
type		= PalFX
trigger1	= 0 <= AnimElemTime(2) && AnimElemTime(7) < 0
trigger1	= MoveHit = 1 && ((Var(18) & 528482304) / (528482304 / 63)) = 4
trigger2	= NumHelper(20000)
trigger2	= (Helper(20000),Var(0) = 20000)
trigger2	= Helper(20000),MoveHit = 1
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1401, PalFX Counter]
type		= VarSet
trigger1	= 0 <= AnimElemTime(2) && AnimElemTime(7) < 0
trigger1	= MoveHit = 1 && ((Var(18) & 528482304) / (528482304 / 63)) = 4
trigger2	= NumHelper(20000)
trigger2	= (Helper(20000),Var(0) = 20000)
trigger2	= Helper(20000),MoveHit = 1
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1401, HitCount Set]
type		= VarAdd
triggerall	= MoveHit && ((Var(18) & 528482304) / (528482304 / 63)) = 1
triggerall	= (Var(4) - Var(59)) < 511
trigger1	= (0 <= AnimElemTime(7) && AnimElemTime(12) < 0)
trigger2	= (0 <= AnimElemTime(21) && AnimElemTime(26) < 0)
var(4)		= 1
ignorehitpause	= 1

[State 1401, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElem = 14
trigger1	= (Var(25) & 4096)
value		= 1405

[State 1401, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(12) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1401, MoveHitReset]
type		= MoveHitReset
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
trigger2	= AnimElem = 21

[State 1401, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 0 <= AnimElemTime(7)
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1401, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40
ignorehitpause	= 1

[State 1401, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1401, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1401, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1401, Hit1]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) = [7, 11]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(80 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 22 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 22 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 22
guard.ctrltime				= 22
guard.hittime				= 31
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -1.75 * Const(size.xscale), -3.5
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1
forcestand					= 1

[State 1401, Hit1]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) = [7, 11]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(80 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 22 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 22 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 22
guard.ctrltime				= 22
guard.hittime				= 31
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -1.75 * Const(size.xscale), -3.5
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1
forcestand					= 1

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 15
x			= 4*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= 8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 19
x			= 2*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 20
x			= 8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 21
x			= 8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 30
x			= -2*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 31
x			= -1*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 32
x			= -8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 33
x			= -8*Const(size.xscale)

[State 1401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 34
x			= -3*Const(size.xscale)

[State 1401, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
value		= 1400, 0
channel		= 0
volume		= 200

[State 1401, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
value		= 2040, 0

[State 1401, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 19
value		= 1400, 4
channel		= 0
volume		= 200

[State 1401, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 21
value		= 2040, 2

[State 1401, Hit2]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) >= 21
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(80.0 * FVar(3) / (2.0 ** (Var(4) - Var(59)))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-72 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1401, Hit2]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) >= 21
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(80.0 * FVar(3) / (2.0 ** (Var(4) - Var(59)))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-72 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(26)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1401, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- ガードポイント初期化
[Statedef 1402]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1402, PalFX]
type		= PalFX
trigger1	= !MoveHit
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1402, PalFX Counter]
type		= VarSet
trigger1	= !MoveHit
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1402, Explod]
type		= Explod
trigger1	= !MoveHit
anim		= 2060
ID			= 2060
pos			= Floor(30 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
postype		= p1
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 1402, PlaySnd]
type		= PlaySnd
trigger1	= !MoveHit
value		= 2010, 1
ignorehitpause	= 1

[State 1402, Get Power]
type		= VarSet
trigger1	= !MoveHit
var(57)		= 20
ignorehitpause	= 1

[State 1402, Get Power]
type		= VarSet
triggerall	= !MoveHit
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1402, PowerAdd]
type		= PowerAdd
trigger1	= !MoveHit
value		= Var(57)
ignorehitpause	= 1

[State 1402, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1401
ignorehitpause	= 1

[State 1402, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1401
ignorehitpause	= 1

[State 1402, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1401
ignorehitpause	= 1

;---------------------------------------------------------------------
; 突き上げ・弱(派生)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1405]
type		= S
movetype	= A
physics		= N
anim		= 1420
ctrl		= 0
velset		= 0, 0
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1405, MoveHitReset]
type		= MoveHitReset
trigger1	= 1

[State 1405, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1406

;------------------- 実行
[Statedef 1406]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1406, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 1
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1406, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40
ignorehitpause	= 1

[State 1406, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1406, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1406, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1406, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(80.0 * FVar(3) / (2.0 ** (Var(4) - Var(59)))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-39 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), 3
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), 3
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
fall.envshake.time			= 15

[State 1406, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(80.0 * FVar(3) / (2.0 ** (Var(4) - Var(59)))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-39 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), 3
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), 3
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
fall.envshake.time			= 15

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(12)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1406, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 1400, 1 + 6 * (Random >= 500)
channel		= 0
volume		= 200

[State 1406, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 2040, 2

[State 1406, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 突き上げ・強(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1410]
type		= S
movetype	= A
physics		= N
anim		= 1410
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1410, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1410, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 1410, Contact Reset]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 8192) - 8192

[State 1410, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1411

;------------------- 実行
[Statedef 1411]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
x			= 1*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 5
x			= 3*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 6
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 13
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 14
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 15
x			= 1*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= 6*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 18
;x			= 11*Const(size.xscale)
x			= 6*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 19
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 21
;x			= 6*Const(size.xscale)
x			= 3*Const(size.xscale)

[State 1411, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1411, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1411, ReversalDef]	; ガードポイント
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= 0 <= AnimElemTime(2) && AnimElemTime(8) < 0
trigger2		= 0 <= AnimElemTime(18) && AnimElemTime(21) < 0
reversal.attr	= SCA, AA, AP
getpower		= Var(57)
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 8 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S2010, 1
guard.dist		= Floor(Const(size.attack.dist) * Const(size.xscale))
hitflag			= P
p1stateno		= 1412
ignorehitpause	= 1

[State 1411, PalFX]
type		= PalFX
trigger1	= (0 <= AnimElemTime(2) && AnimElemTime(8) < 0) || (0 <= AnimElemTime(18) && AnimElemTime(21) < 0)
trigger1	= MoveHit = 1 && ((Var(18) & 528482304) / (528482304 / 63)) = 4
trigger2	= NumHelper(20000)
trigger2	= (Helper(20000),Var(0) = 20000)
trigger2	= Helper(20000),MoveHit = 1
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1411, PalFX Counter]
type		= VarSet
trigger1	= (0 <= AnimElemTime(2) && AnimElemTime(8) < 0) || (0 <= AnimElemTime(18) && AnimElemTime(21) < 0)
trigger1	= MoveHit = 1 && ((Var(18) & 528482304) / (528482304 / 63)) = 4
trigger2	= NumHelper(20000)
trigger2	= (Helper(20000),Var(0) = 20000)
trigger2	= Helper(20000),MoveHit = 1
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1411, HitCount Set]
type		= VarAdd
triggerall	= MoveHit && ((Var(18) & 528482304) / (528482304 / 63)) = 1
triggerall	= (Var(4) - Var(59)) < 511
trigger1	= (0 <= AnimElemTime(8)) && (AnimElemTime(12) < 0)
trigger2	= (0 <= AnimElemTime(21)) && (AnimElemTime(26) < 0)
trigger3	= (0 <= AnimElemTime(35)) && (AnimElemTime(40) < 0)
var(4)		= 1
ignorehitpause	= 1

[State 1411, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElem = 28
trigger1	= (Var(25) & 4096)
value		= 1415

[State 1411, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(11) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1411, MoveHitReset]
type		= MoveHitReset
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
trigger2	= AnimElem = 21
trigger3	= AnimElem = 35

[State 1411, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 0 <= AnimElemTime(8) && AnimElemTime(11) < 0
trigger2	= 0 <= AnimElemTime(21) && AnimElemTime(26) < 0
trigger3	= 0 <= AnimElemTime(35) && AnimElemTime(40) < 0
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1411, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 32
ignorehitpause	= 1

[State 1411, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1411, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1411, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1411, Hit1]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) = [8, 10]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(65 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 5
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 22 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 22 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 22
guard.ctrltime				= 22
guard.hittime				= 31
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1
forcestand					= 1

[State 1411, Hit1]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) = [8, 10]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(65 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 5
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 22 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 22 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 22
guard.ctrltime				= 22
guard.hittime				= 31
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1
forcestand					= 1

[State 1411, Hit2]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) = [21, 25]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(65 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 22 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 22 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 22
guard.ctrltime				= 22
guard.hittime				= 31
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1
forcestand					= 1

[State 1411, Hit2]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) = [21, 25]
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(65 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 22 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 22 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 22
guard.ctrltime				= 22
guard.hittime				= 31
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1
forcestand					= 1

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 29
x			= 4*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 30
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 31
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 33
x			= 2*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 34
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 35
x			= 8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 44
x			= -2*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 45
x			= -1*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 46
x			= -8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 47
x			= -8*Const(size.xscale)

[State 1411, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 48
x			= -3*Const(size.xscale)

[State 1411, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
value		= 1400, 2 + 3 * (Random >= 500)
channel		= 0
volume		= 200

[State 1411, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 2040, 1

[State 1411, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
value		= 1400, 3 + 3 * (Random >= 500)
channel		= 0
volume		= 200

[State 1411, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 21
value		= 2040, 0

[State 1411, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 33
value		= 1400, 4
channel		= 0
volume		= 200

[State 1411, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 35
value		= 2040, 2

[State 1411, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 36
ignorehitpause	= 1

[State 1411, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1411, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1411, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1411, Hit3]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) >= 35
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(70 * FVar(3) / (2.0 ** (Var(4) - Var(59) > 0))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-72 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1411, Hit3]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) >= 35
affectteam					= E
attr						= S, SA
animtype					= Hard
damage						= Ceil(70 * FVar(3) / (2.0 ** (Var(4) - Var(59) > 0))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-72 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(40)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1411, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- ガードポイント初期化
[Statedef 1412]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1412, PalFX]
type		= PalFX
trigger1	= !MoveHit
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1412, PalFX Counter]
type		= VarSet
trigger1	= !MoveHit
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1412, Explod]
type		= Explod
trigger1	= !MoveHit
anim		= 2060
ID			= 2060
pos			= Floor(30 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
postype		= p1
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 1412, PlaySnd]
type		= PlaySnd
trigger1	= !MoveHit
value		= 2010, 1
ignorehitpause	= 1

[State 1412, Get Power]
type		= VarSet
trigger1	= !MoveHit
var(57)		= 20
ignorehitpause	= 1

[State 1412, Get Power]
type		= VarSet
triggerall	= !MoveHit
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1412, PowerAdd]
type		= PowerAdd
trigger1	= !MoveHit
value		= Var(57)
ignorehitpause	= 1

[State 1412, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1411
ignorehitpause	= 1

[State 1412, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1411
ignorehitpause	= 1

[State 1412, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1411
ignorehitpause	= 1

;---------------------------------------------------------------------
; 突き上げ・強(派生)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1415]
type		= S
movetype	= A
physics		= N
anim		= 1420
ctrl		= 0
velset		= 0, 0
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1415, MoveHitReset]
type		= MoveHitReset
trigger1	= 1

[State 1415, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1416

;------------------- 実行
[Statedef 1416]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1416, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 1
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1416, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 36
ignorehitpause	= 1

[State 1416, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1416, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1416, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1416, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(70 * FVar(3) / (2.0 ** (Var(4) - Var(59) > 0))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-39 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), 3
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), 3
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
fall.envshake.time			= 15

[State 1416, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(70 * FVar(3) / (2.0 ** (Var(4) - Var(59) > 0))), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= 0, Floor(-39 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), 3
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), 3
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
fall.envshake.time			= 15

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(12)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1416, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 1400, 1 + 6 * (Random >= 500)
channel		= 0
volume		= 200

[State 1416, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 2040, 2

[State 1416, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 超頭突き・弱(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1500]
type		= S
movetype	= A
physics		= N
anim		= 1500
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1500, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1500, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1500, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1501

;------------------- 実行
[Statedef 1501]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1501, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1501, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 1500, 0
channel		= 0
volume		= 200

[State 1501, VelSet]
type		= VelSet
trigger1	= AnimTime >= 0
x			= 3*Const(size.xscale)
y			= -5

[State 1501, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1510

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 超頭突き・強(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1502]
type		= S
movetype	= A
physics		= N
anim		= 1500
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1502, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1502, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1503

;------------------- 実行
[Statedef 1503]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1503, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(2) >= 0
value		= SCA
ignorehitpause	= 1

[State 1503, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 1500, 0
channel		= 0
volume		= 200

[State 1503, VelSet]
type		= VelSet
trigger1	= AnimTime >= 0
x			= 7.75*Const(size.xscale)
y			= -5

[State 1503, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1510

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中超頭突き・弱(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1505]
type		= A
movetype	= A
physics		= N
anim		= 1501
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1505, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1505, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1505, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1506

;------------------- 実行
[Statedef 1506]
type		= A
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1506, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1506, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 1500, 0
channel		= 0
volume		= 200

[State 1506, VelSet]
type		= VelSet
trigger1	= AnimTime >= 0
x			= 3*Const(size.xscale)
y			= -5

[State 1506, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1515

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中超頭突き・強(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1507]
type		= A
movetype	= A
physics		= N
anim		= 1501
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1507, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1507, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1508

;------------------- 実行
[Statedef 1508]
type		= A
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1508, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(2) >= 0
value		= SCA
ignorehitpause	= 1

[State 1508, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 1500, 0
channel		= 0
volume		= 200

[State 1508, VelSet]
type		= VelSet
trigger1	= AnimTime >= 0
x			= 7.75*Const(size.xscale)
y			= -5

[State 1508, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1515

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 超頭突き(地上用、攻撃部)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1510]
type		= A
movetype	= A
physics		= N
anim		= 1511
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1510, Contact Reset]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 8192) - 8192

[State 1510, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1511

;------------------- 実行
[Statedef 1511]
type		= A
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1511, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 1511, HitOverride]
type		= HitOverride
trigger1	= 1
time		= 1
attr		= SCA, AA, AP
stateno		= 1512
ignorehitpause	= 1

[State 1511, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= !(AnimElemTime(16) >= 0 && Pos Y >= 0)
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1511, PalFX]
type		= PalFX
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= Helper(20000),MoveHit = 1
trigger2	= !(Helper(20000),Var(1) & 1024) && (Helper(20000),StateNo = 21512)
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1511, PalFX Counter]
type		= VarSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= Helper(20000),MoveHit = 1
trigger2	= !(Helper(20000),Var(1) & 1024) && (Helper(20000),StateNo = 21512)
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1511, Gravity]
type		= Gravity
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(1) > 0
trigger1	= Pos Y < 0

[State 1511, VelMul]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemNo(0) >= 16
x			= .95

[State 1511, PosSet]
type		= PosSet
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(1) > 0
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 1511, VelSet]
type		= VelSet
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(1) > 0
trigger1	= Pos Y >= 0
y			= 0

[State 1511, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 1
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1511, MoveHitReset]
type		= MoveHitReset
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 6
trigger2	= AnimElem = 11
trigger3	= AnimElem = 16

[State 1511, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40
ignorehitpause	= 1

[State 1511, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1511, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1511, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1511, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor((-50 + 10*(AnimElemNo(0)>=11)*((AnimElemNo(0)-6)/5)) * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -9.50
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1511, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor((-50 + 10*(AnimElemNo(0)>=11)*((AnimElemNo(0)-6)/5)) * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -9.50
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1511, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(16) >= 0
trigger1	= Pos Y >= 0
value		= 1520

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- やられ初期化
[Statedef 1512]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1512, PalFX]
type		= PalFX
trigger1	= 1
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1512, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1512, Explod]
type		= Explod
trigger1	= 1
anim		= 2060
ID			= 2060
pos			= Floor(35 * Const(size.xscale)), Floor((-40 + 10*(AnimElemNo(0)>=11)*((AnimElemNo(0)-6)/5)) * Const(size.yscale))
postype		= p1
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 1512, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2010, 1
ignorehitpause	= 1

[State 1512, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1512, Get Power]
type		= VarSet
triggerall	= 1
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1512, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)
ignorehitpause	= 1

[State 1512, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1511
ignorehitpause	= 1

[State 1512, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1511
ignorehitpause	= 1

[State 1512, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1511
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中超頭突き(空中用、攻撃部)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1515]
type		= A
movetype	= A
physics		= N
anim		= 1511
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1515, Contact Reset]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 8192) - 8192

[State 1515, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1516

;------------------- 実行
[Statedef 1516]
type		= A
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1516, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 1516, HitOverride]
type		= HitOverride
trigger1	= 1
time		= 1
attr		= SCA, AA, AP
stateno		= 1517
ignorehitpause	= 1

[State 1516, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= !(AnimElemTime(16) >= 0 && Pos Y >= 0)
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1516, PalFX]
type		= PalFX
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= Helper(20000),MoveHit = 1
trigger2	= !(Helper(20000),Var(1) & 1024) && (Helper(20000),StateNo = 21512)
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1516, PalFX Counter]
type		= VarSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= Helper(20000),MoveHit = 1
trigger2	= !(Helper(20000),Var(1) & 1024) && (Helper(20000),StateNo = 21512)
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1516, Gravity]
type		= Gravity
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(1) > 0
trigger1	= Pos Y < 0

[State 1516, VelMul]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemNo(0) >= 16
x			= .95

[State 1516, PosSet]
type		= PosSet
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(1) > 0
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 1516, VelSet]
type		= VelSet
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(1) > 0
trigger1	= Pos Y >= 0
y			= 0

[State 1516, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 1
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1516, MoveHitReset]
type		= MoveHitReset
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 6
trigger2	= AnimElem = 11
trigger3	= AnimElem = 16

[State 1516, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40
ignorehitpause	= 1

[State 1516, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1516, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1516, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1516, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= H
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor((-50 + 10*(AnimElemNo(0)>=11)*((AnimElemNo(0)-6)/5)) * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -9.50
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1516, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= H
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor((-50 + 10*(AnimElemNo(0)>=11)*((AnimElemNo(0)-6)/5)) * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -9.50
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1516, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= AnimElemTime(16) >= 0
trigger1	= Pos Y >= 0
value		= 1520

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- やられ初期化
[Statedef 1517]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1517, PalFX]
type		= PalFX
trigger1	= 1
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1517, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1517, Explod]
type		= Explod
trigger1	= 1
anim		= 2060
ID			= 2060
pos			= Floor(35 * Const(size.xscale)), Floor((-40 + 10*(AnimElemNo(0)>=11)*((AnimElemNo(0)-6)/5)) * Const(size.yscale))
postype		= p1
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 1517, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2010, 1
ignorehitpause	= 1

[State 1517, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1517, Get Power]
type		= VarSet
triggerall	= 1
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1517, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)
ignorehitpause	= 1

[State 1517, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1516
ignorehitpause	= 1

[State 1517, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1516
ignorehitpause	= 1

[State 1517, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1516
ignorehitpause	= 1

;---------------------------------------------------------------------
; 超頭突き(接地・攻撃)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1520]
type		= S
movetype	= A
physics		= N
anim		= 1521
ctrl		= 0
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1520, Explod]
type		= Explod
trigger1	= 1
anim		= 2320
pos			= Floor(10 * Const(size.xscale)), 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1

[State 1520, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2050, 2

[State 1520, MoveHitReset]
type		= MoveHitReset
trigger1	= 1

[State 1520, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1521

;------------------- 実行
[Statedef 1521]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1521, NotHitBy]
type		= NotHitBy
trigger1	= AnimTime < 0
value		= , AT
ignorehitpause	= 1

[State 1521, HitOverride]
type		= HitOverride
trigger1	= AnimTime < 0
time		= 1
attr		= SCA, AA, AP
stateno		= 1522
ignorehitpause	= 1

[State 1521, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= AnimTime <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1521, PalFX]
type		= PalFX
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= Helper(20000),MoveHit = 1
trigger2	= !(Helper(20000),Var(1) & 1024) && (Helper(20000),StateNo = 21522)
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1521, PalFX Counter]
type		= VarSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= Helper(20000),MoveHit = 1
trigger2	= !(Helper(20000),Var(1) & 1024) && (Helper(20000),StateNo = 21522)
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1521, VelMul]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= 1
x			= .95

[State 1521, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 1
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1521, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40
ignorehitpause	= 1

[State 1521, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1521, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1521, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1521, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-10 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -9.50
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1521, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-10 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -9.50
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1521, Hit]	; ダウンヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2StateType = L
trigger1					= 1
affectteam					= E
attr						= S, SA
animtype					= Diagup
damage						= Ceil(100.0 * FVar(3) / (1.0 + 1.0*!!HitCount)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFDP
;priority					= 4, Hit
pausetime					= 1, 18 + 16 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 4
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-10 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -5.0 * Const(size.xscale), -9.50
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -5.0 * Const(size.xscale), -2.5
down.velocity				= -10.4 * Const(size.xscale), 0
down.hittime				= 16
air.cornerpush.veloff		= 0
airguard.velocity			= 0, 0
fall.recover				= 1
fall						= 1

[State 1521, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1525

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- やられ初期化
[Statedef 1522]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1522, PalFX]
type		= PalFX
trigger1	= 1
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1522, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1522, Explod]
type		= Explod
trigger1	= 1
anim		= 2060
ID			= 2060
pos			= Floor(35 * Const(size.xscale)), Floor(-10 * Const(size.yscale))
postype		= p1
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 1522, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2010, 1
ignorehitpause	= 1

[State 1522, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1522, Get Power]
type		= VarSet
triggerall	= 1
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1522, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)
ignorehitpause	= 1

[State 1522, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1521
ignorehitpause	= 1

[State 1522, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1521
ignorehitpause	= 1

[State 1522, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1521
ignorehitpause	= 1

;---------------------------------------------------------------------
; 超頭突き(接地)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1525]
type		= S
movetype	= A
physics		= N
anim		= 1525
ctrl		= 0
velset		= 0, 0
hitcountpersist	= 1
movehitpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1525, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1526

;------------------- 実行
[Statedef 1526]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitcountpersist	= 1
movehitpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1526, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(8) >= 0
trigger2	= HitCount && (Var(32) & 7) < 4
;trigger3	= HitCount && AnimElemTime(6) >= 0
value		= SCA
ignorehitpause	= 1

[State 1526, StateTypeSet]
type		= StateTypeSet
trigger1	= AnimElemTime(8) >= 0
trigger2	= HitCount && (Var(32) & 7) < 4
;trigger3	= HitCount && AnimElemTime(6) >= 0
statetype	= L
movetype	= I
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1526, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1600]
type		= S
movetype	= I
physics		= N
anim		= 1600
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1600, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1600, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1600, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1601

;------------------- 実行
[Statedef 1601]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1601, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(12) < 0
value		= SCA
ignorehitpause	= 1

[State 1601, VelSet]
type		= VelSet
trigger1	= AnimElem = 7
x			= 6*Const(size.xscale)

[State 1601, VelSet]
type		= VelSet
trigger1	= AnimElem = 16
x			= 0

[State 1601, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 16
x			= 6*Const(size.xscale)

[State 1601, Branch]
type		= ChangeState
triggerall	= NumEnemy
triggerall	= AnimElemNo(0) = [9, 15]
trigger1	= (P2BodyDist X <= 48*Const(size.xscale))
trigger2	= (P2Dist X <= 48*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front))
value		= 1605

[State 1601, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 16
value		= 1600, 0
channel		= 0
volume		= 200

[State 1601, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(始動2)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1605]
type		= S
movetype	= I
physics		= N
anim		= 1605
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1605, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1605, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1606

;------------------- 実行
[Statedef 1606]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1606, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1606, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 1
x			= 8*Const(size.xscale)

[State 1606, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 2
x			= 8*Const(size.xscale)

[State 1606, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1610
ctrl		= 0

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(攻撃)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1610]
type		= S
movetype	= A
physics		= N
anim		= 1610
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1610, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1610, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 1200, 1
channel		= 0
volume		= 200

[State 1610, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1611

;------------------- 実行
[Statedef 1611]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1611, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(3) < 0
trigger2	= MoveHit || HitCount
value		= SCA
ignorehitpause	= 1

[State 1611, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= AnimElemTime(3) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1611, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 1620

[State 1611, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1611, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(3) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1611, Throw]	; ガー不
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) <= 2
affectteam					= E
attr						= , ST
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= M-
priority					= 5, Miss
pausetime					= 1, 1
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= -1
guard.sparkno				= -1
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-78 * Const(size.yscale))
hitsound					= S2030, 0
;guardsound					= S2010, 0
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1611, Throw Hit]	; やられヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2MoveType = H
triggerall					= !((P2StateNo = 120) || (P2StateNo = [130, 132]) || (P2StateNo = 140) || (P2StateNo = [150, 155]))
trigger1					= AnimElemNo(0) <= 2
affectteam					= E
attr						= , ST
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= M
priority					= 5, Miss
pausetime					= 1, 1
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= -1
guard.sparkno				= -1
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-78 * Const(size.yscale))
hitsound					= S2030, 0
;guardsound					= S2010, 0
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(3)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1611, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(成功)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1620]
type		= S
movetype	= A
physics		= N
anim		= 1620
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1620, TargetState]
type		= TargetState
trigger1	= 1
value		= 1625
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1620, Explod]
type		= Explod
trigger1	= 1
anim		= 2150
pos			= Floor(40 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1

[State 1620, Branch Reset]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 1620, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1620, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1621

;------------------- 実行
[Statedef 1621]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1621, TargetBind]
type		= TargetBind
trigger1	= AnimElemTime(5) < 0
pos			= 40 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1621, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1621, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1621, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(3) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1621, Freeze]
type		= PosFreeze
trigger1	= AnimTime != 0

[State 1621, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1621, Width]
type		= Width
trigger1	= 1
edge		= Floor(60*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 1621, Branch Set]
type		= VarSet
triggerall	= !Var(5)
triggerall	= AnimElemNo(0) = [2, 4]
trigger1	= (Var(25) & 16777216)
var(5)		= 1630
ignorehitpause	= 1

[State 1621, Branch Set]
type		= VarSet
triggerall	= !Var(5)
triggerall	= AnimElemNo(0) = [2, 4]
trigger1	= (Var(25) & 67108864)
var(5)		= 1640
ignorehitpause	= 1

[State 1621, Branch Set]
type		= VarSet
triggerall	= !Var(5)
triggerall	= AnimElemNo(0) = [2, 4]
trigger1	= (Var(25) & 33554432)
var(5)		= 1650
ignorehitpause	= 1

[State 1621, Branch Set]
type		= VarSet
triggerall	= !Var(5)
triggerall	= AnimElemNo(0) = [2, 4]
trigger1	= (Var(25) & 134217728)
var(5)		= 1660
ignorehitpause	= 1

[State 1621, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= Var(5) && Var(5) != 1660 && (AnimElemNo(0) = [3, 4])
trigger2	= AnimTime >= 0
var(1)		= (Var(1) | 524288)

[State 1621, Branch]
type		= ChangeState
triggerall	= Var(5)
trigger1	= AnimElemNo(0) = [3, 4]
value		= Var(5)

[State 1621, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5
value		= 2000, 4

[State 1621, EnvColor]
type		= EnvColor
trigger1	= AnimElem = 5
time		= 2
value		= 248, 248, 248

[State 1621, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(投げられ側)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1625]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 1625, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 1625, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= H
physics		= N

[State 1625, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 1625, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 1625, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1625

[State 1625, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 1625, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1626

;------------------- 実行
[Statedef 1626]
type		= S
movetype	= H
physics		= N
ctrl		= 0

[State 1626, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1626, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1626, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1626, HitFall Reset]
type		= HitFallSet
trigger1	= 1
value		= 0

[State 1626, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim = 1625 && AnimTime >= 0
value		= 120

[State 1626, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim = 120 && AnimTime >= 0
value		= 130

[State 1626, End]
type		= SelfState
trigger1	= Time >= 66
value		= 0
ctrl		= 1

;---------------------------------------------------------------------
; がぶり寄り(投げられ側、追加待ち)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1627]
type		= S
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 1627, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 1626

[State 1627, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1628

;------------------- 実行
[Statedef 1628]
type		= S
movetype	= H
physics		= N
ctrl		= 0

[State 1628, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1628, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 1628, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1628, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 1628, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 1628, HitFall Reset]
type		= HitFallSet
trigger1	= 1
value		= 0

[State 1628, End]
type		= SelfState
trigger1	= Time >= 120
value		= 0
ctrl		= 1

;---------------------------------------------------------------------
; がぶり寄り(はたきこみ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1630]
type		= S
movetype	= A
physics		= N
anim		= 1630
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1630, TargetState]
type		= TargetState
trigger1	= 1
value		= 1627
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1630, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1630, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1631

;------------------- 実行
[Statedef 1631]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1631, TargetBind]
type		= TargetBind
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(9) < 0
pos			= 40 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1631, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1631, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(9) && AnimElemTime(12) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1631, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1631, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
value		= 900, Random % 4
channel		= 0
volume		= 200

[State 1631, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemNo(0) = [9, 11]
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1631, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveContact || HitCount || HitPauseTime || (Var(18) & 528482304)
value		= 1635

[State 1631, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveContact = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1631, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 0
ignorehitpause	= 1

[State 1631, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1631, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 76 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1631, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= AnimElemNo(0) >= 8
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1631, Hit]
type						= HitDef
trigger1					= !MoveContact && !MoveReversed
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(80 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2010
guard.sparkno				= S2070
sparkxy						= Floor(-40 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -13.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -13.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(12)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1631, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 2040, 2

[State 1631, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(はたきこみ、続き)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1635]
type		= S
movetype	= A
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1635, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 1630
elem		= 9

[State 1635, TargetState]
type		= TargetState
trigger1	= 1
value		= 3420 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1635, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1635, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1636

;------------------- 実行
[Statedef 1636]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1636, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1636, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(9) && AnimElemTime(12) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1636, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1636, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemNo(0) = [9, 11]
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1636, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 120
ignorehitpause	= 1

[State 1636, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1636, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1636, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1636, Hit]
type						= HitDef
trigger1					= !MoveContact && !MoveReversed
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(140 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2010
guard.sparkno				= S2070
sparkxy						= Floor(-40 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -13.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -13.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(12)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1636, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(けたぐり)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1640]
type		= S
movetype	= A
physics		= N
anim		= 780
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1640, TargetState]
type		= TargetState
trigger1	= 1
value		= 1627
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1640, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1640, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1641

;------------------- 実行
[Statedef 1641]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1641, TargetBind]
type		= TargetBind
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(4) < 0
pos			= 40 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1641, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1641, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(4) && AnimElemTime(7) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1641, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1641, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
value		= 900, Random % 4
channel		= 0
volume		= 200

[State 1641, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
value		= 2040, 2

[State 1641, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemNo(0) = [4, 6]
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1641, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveContact || HitCount || HitPauseTime || (Var(18) & 528482304)
value		= 1645

[State 1641, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveContact = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 1641, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 0
ignorehitpause	= 1

[State 1641, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1641, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 76 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1641, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1641, Hit]
type						= HitDef
trigger1					= !MoveContact && !MoveReversed
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(80 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2010
guard.sparkno				= S2070
sparkxy						= Floor(-40 * Const(size.xscale)), Floor(-25 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p2facing					= -1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 13.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 13.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(7)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
x			= 7*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 11
x			= 4*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 12
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 13
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 14
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 15
x			= 4*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 18
x			= 8*Const(size.xscale)

[State 1641, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
x			= 1*Const(size.xscale)

[State 1641, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(けたぐり、続き)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1645]
type		= S
movetype	= A
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1645, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 780
elem		= 4

[State 1645, TargetState]
type		= TargetState
trigger1	= 1
value		= 3420 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1645, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1645, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1646

;------------------- 実行
[Statedef 1646]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1646, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1646, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(4) && AnimElemTime(7) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1646, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1646, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemNo(0) = [4, 6]
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1646, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 120
ignorehitpause	= 1

[State 1646, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1646, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1646, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1646, Hit]
type						= HitDef
trigger1					= !MoveContact && !MoveReversed
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(140 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2010
guard.sparkno				= S2070
sparkxy						= Floor(-40 * Const(size.xscale)), Floor(-25 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p2facing					= -1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 13.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * FVar(4)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 13.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(7)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
x			= 7*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 11
x			= 4*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 12
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 13
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 14
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 15
x			= 4*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 18
x			= 8*Const(size.xscale)

[State 1646, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
x			= 1*Const(size.xscale)

[State 1646, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶりより(突き出し・強)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1650]
type		= S
movetype	= A
physics		= N
anim		= 1005
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1650, TargetState]
type		= TargetState
trigger1	= 1
value		= 1627
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1650, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 1000, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 1650, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1650, Contact Reset]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 8192) - 8192

[State 1650, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1651

;------------------- 実行
[Statedef 1651]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1651, TargetBind]
type		= TargetBind
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(4) < 0
pos			= 40 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 1651, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1651, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(4) && AnimElemTime(6) <= 0
trigger2	= 0 <= AnimElemTime(9) && AnimElemTime(11) <= 0
trigger3	= 0 <= AnimElemTime(15) && AnimElemTime(17) <= 0
trigger4	= 0 <= AnimElemTime(20) && AnimElemTime(22) <= 0
trigger5	= 0 <= AnimElemTime(26) && AnimElemTime(27) <= 0
trigger6	= 0 <= AnimElemTime(33) && AnimElemTime(45) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 1651, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 1651, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(33) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 1651, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemNo(0) = [2, 32]
x			= 3*Const(size.xscale)

[State 1651, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 31
trigger2	= AnimElem = 32
trigger3	= AnimElem = 33
x 			= 8*Const(size.xscale)

[State 1651, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 48
x			= 3*Const(size.xscale)

[State 1651, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 49
trigger2	= AnimElem = 50
x			= 8*Const(size.xscale)

[State 1651, Contact Set]
type		= VarSet
triggerall	= MoveContact
trigger1	= 1
var(1)		= (Var(1) | 8192)
ignorehitpause	= 1

[State 1651, MoveHitReset]
type		= MoveHitReset
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
trigger2	= AnimElem = 15
trigger3	= AnimElem = 20
trigger4	= AnimElem = 26
trigger5	= AnimElem = 33

[State , Hit Dummy]	; 攻撃判定消し(消し) ヒットストップ中を当身で取られる用
type		= Null;HitDef
trigger1	= 1
ignorehitpause	= 1

[State 1651, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1651, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1651, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * 1.5 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1651, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1651, Hit1]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) = [4, 5]
trigger2					= AnimElemNo(0) = [15, 16]
trigger3					= AnimElemNo(0) = [26, 27]
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(40 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-25 * Const(size.xscale)), Floor(-69 * Const(size.yscale))
hitsound					= S2000, 5
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 16 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -3.5
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 1651, Hit2]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) = [9, 10]
trigger2					= AnimElemNo(0) = [20, 21]
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(35 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-25 * Const(size.xscale)), Floor(-69 * Const(size.yscale))
hitsound					= S2000, 6
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16 + 11 * ((Var(1) & 1) != 0)
ground.hittime				= 16 + 11 * ((Var(1) & 1) != 0)
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -1.5
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 1651, Hit3]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) = [33, 44]
affectteam					= E
attr						= , SA
animtype					= Hard
damage						= Ceil(35 * FVar(3)), Ceil(10 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 8 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-20 * Const(size.xscale)), Floor(-69 * Const(size.yscale))
hitsound					= S2000, 7
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(45)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1651, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4 || AnimElem = 15 || AnimElem = 26
value		= 2040, 0

[State 1651, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9 || AnimElem = 20
value		= 2040, 1

[State 1651, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 30
value		= 250, 1 + 6*(Random >= 500)
channel		= 0
volume		= 200

[State 1651, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 33
value		= 2040, 2

[State 1651, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; がぶり寄り(寄り切り)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1660]
type		= A
movetype	= A
physics		= N
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1660, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 112 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1660, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 1660, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1211

;---------------------------------------------------------------------
; ぶちかまし
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1700]
type		= U
movetype	= A
physics		= N
anim		= 1700
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1700, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 60 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1700, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType != A
statetype	= S

[State 1700, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1701

;------------------- 実行
[Statedef 1701]
type		= U
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 1701, AfterImage]
type			= AfterImage
triggerall		= !(Var(18) & 528482304)
trigger1		= AnimElem = 1
length			= 6
timegap			= 1
framegap		= 1
palinvertall	= 1
palbright		= 0, 0, 0
palcontrast		= 64, 64, 128
paladd			= 0, 0, 0
palmul			= .8, .8, .8
trans			= add1
time			= 20

[State 1701, PosSet]
type		= PosSet
triggerall	= StateType = A
trigger1	= Pos Y > -0.1
y			= -0.1
ignorehitpause	= 1

[State 1701, PosSet]
type		= PosSet
triggerall	= StateType != A
trigger1	= Pos Y > 0
y			= 0
ignorehitpause	= 1

[State 1701, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
ignorehitpause	= 1

[State 1701, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A
ignorehitpause	= 1

[State 1701, Turn]
type		= Turn
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
trigger1	= P2Dist X < 0

[State 1701, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
anim		= 2716
pos			= Floor(-10 * Const(size.xscale)), Floor(-50 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1
facing		= -1

[State 1701, VelCalc Init]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
fvar(0)		= 0

[State 1701, VelCalc Init]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
var(0)		= 0

[State 1701, VelCalc Init]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
var(58)		= 0

[State 1701, VelCalc]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
triggerall	= NumEnemy
trigger1	= AnimElem = 16
var(0)		= EnemyNear,Const(size.head.pos.x) - Const(size.head.pos.x)

[State 1701, VelCalc]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
triggerall	= NumEnemy
trigger1	= AnimElem = 16
var(58)		= EnemyNear,Const(size.head.pos.y) - Const(size.head.pos.y)

[State 1701, VelCalc]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
triggerall	= StateType = A
trigger1	= AnimElem = 16
fvar(0)		= Atan( Abs((P2Dist Y+Var(58))*1.0-1.0*((P2Dist Y+Var(58))=0)) / Abs((P2Dist X+Var(0))*1.0-1.0*((P2Dist X+Var(0))=0)) )

[State 1701, VelCalc]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
triggerall	= StateType = A
triggerall	= Abs(FVar(0)) > Pi * 50.0 / 180.0
trigger1	= AnimElem = 16
fvar(0)		= Pi * 50.0 / 180.0 * IfElse( FVar(0) >= 0, 1, -1 )

[State 1701, VelSet]
type		= VelSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= (45.0 + 3.0*(StateType = A))*Const(size.xscale) * Cos( FVar(0) )
y			= (45.0 + 3.0*(StateType = A))*Const(size.yscale) * Sin( FVar(0) ) * IfElse( (P2Dist Y+Var(58)) >= 0, 1.0, -1.0 )

[State 1701, PosAdd]
type		= PosSet
triggerall	= !(Var(18) & 528482304)
triggerall	= StateType = A
triggerall	= Vel X + Vel X*0.625 + Vel X*0.625*0.625 + Vel X*0.625*0.625*0.625 + Vel X*0.625*0.625*0.625*0.625 >= P2BodyDist X
trigger1	= AnimElem = 16
y			= EnemyNear,Pos Y + IfElse( Vel Y <= 0, IfElse(EnemyNear,Const(size.head.pos.y)<=0, 0, EnemyNear,Const(size.head.pos.y)), IfElse(EnemyNear,Const(size.head.pos.y)<=0, EnemyNear,Const(size.head.pos.y), 0) )

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= -15*Const(size.xscale) * Cos( FVar(0) ) * IfElse( (P2Dist X+Var(0)) >= 0, 1.0, -1.0 )
y			= -15*Const(size.yscale) * Sin( FVar(0) ) * IfElse( (P2Dist Y+Var(58)) >= 0, 1.0, -1.0 )

[State 1701, VelMul]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(16) >= 1
x			= .625
y			= .625

[State 1701, VelSet]
type		= VelSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 21
x			= 0
y			= 0

[State 1701, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimElemNo(0) = [16, 20]
flag		= invisible
ignorehitpause	= 1

[State 1701, PlayerPush]
type		= PlayerPush
trigger1	= AnimElemNo(0) = [16, 20]
value		= 0
ignorehitpause	= 1

[State 1701, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 20
ignorehitpause	= 1

[State 1701, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

; 飛び道具無敵 ここから
[State 1701, HitOverride]
type		= HitOverride
trigger1	= AnimElemTime(16) < 0
trigger2	= (Var(32) & 7) < 4
trigger2	= 0 <= AnimElemTime(21)
time		= 1
attr		= SCA, AP
stateno		= IfElse( AnimTime < 0, 1703, 1 )
ignorehitpause	= 1

[State , Hit Dummy]	; 通常モード時の攻撃判定消し用
type		= HitDef
trigger1	= 0
trigger2	= 0 <= AnimElemTime(21)
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1701, ReversalDef]	; ガードポイント
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= AnimElemTime(16) < 0
trigger2		= (Var(32) & 7) < 4
trigger2		= 0 <= AnimElemTime(21)
reversal.attr	= SCA, AP
getpower		= Var(57)
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 8 - !!(Helper(20000),Var(1) & 256)
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S2010, 1
guard.dist		= Floor(Const(size.attack.dist) * Const(size.xscale))
hitflag			= P
p1stateno		= 1703
ignorehitpause	= 1

[State 1701, PalFX]
type		= PalFX
triggerall	= MoveHit = 1 && ((Var(18) & 528482304) / (528482304 / 63)) = 4
trigger1	= AnimElemTime(16) < 0
trigger2	= 0 <= AnimElemTime(21)
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1701, PalFX Counter]
type		= VarSet
triggerall	= MoveHit = 1 && ((Var(18) & 528482304) / (528482304 / 63)) = 4
trigger1	= AnimElemTime(16) < 0
trigger2	= 0 <= AnimElemTime(21)
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1
; 飛び道具無敵 ここまで

[State 1701, EnvShake]
type		= EnvShake
triggerall	= 0 <= AnimElemTime(16) && AnimElemTime(21) < 0
trigger1	= MoveHit = 1
time		= 5
freq		= 180
ampl		= -2
ignorehitpause	= 1

[State 1701, VarSet]	; 鋼体(通常モード)
type		= VarSet
triggerall	= AnimElemTime(16) >= 0
triggerall	= AnimElemTime(16) < 5+7
triggerall	= (Var(32) & 7) >=4
trigger1	= (Var(18) & 1008) < (1008 / 63 * (5+7 - AnimElemTime(16)))
var(18)		= (Var(18) | 1008) - 1008 + 1008 / 63 * (5+7 - AnimElemTime(16))
ignorehitpause	= 1

[State 1701, VarSet]	; 鋼体(通常モード以外)
type		= VarSet
triggerall	= AnimElemTime(16) >= 0
triggerall	= AnimTime < -3
triggerall	= (Var(32) & 7) < 4
trigger1	= (Var(18) & 1008) < (1008 / 63 * (-1 * AnimTime - 3))
var(18)		= (Var(18) | 1008) - 1008 + 1008 / 63 * (-1 * AnimTime - 3)
ignorehitpause	= 1

; 鋼体用で、ここでセットすると、ヘルパーの当身が出ないから、
; 最初の1フレだけようにフラグを立ててしまおうという試み
[State 1701, Endure No Decrease]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
var(16)		= (Var(16) | 268435456)

[State 1701, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
value		= 1700, 0
channel		= 0
volume		= 200

[State 1701, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
value		= 2040, 7

[State 1701, MoveHitReset]
type		= MoveHitReset
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
trigger2	= AnimElemNo(0) = [16, 20]
trigger2	= (Var(32) & 7) < 4
trigger2	= P2MoveType != H

[State 1701, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 60
ignorehitpause	= 1

[State 1701, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1701, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1701, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1701, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
triggerall					= P2StateType != L
trigger1					= AnimElemNo(0) = [16, 20]
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(70 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
sparkno						= S2020
guard.sparkno				= S2050
sparkxy						= Floor(10 * Const(size.xscale)), Floor(-44 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 0
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 8
ground.hittime				= 8
guard.slidetime				= 8
guard.ctrltime				= 8
guard.hittime				= 17
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6 - 3 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= -5.85 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6 - 3 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
airguard.velocity			= 0, -3.0
fall.recover				= 1
fall						= 1

[State 1701, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
triggerall					= P2StateType != L
trigger1					= AnimElemNo(0) = [16, 20]
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(70 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFP-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
sparkno						= S2020
guard.sparkno				= S2050
sparkxy						= Floor(10 * Const(size.xscale)), Floor(-44 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 0
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 8
ground.hittime				= 8
guard.slidetime				= 8
guard.ctrltime				= 8
guard.hittime				= 17
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6 - 3 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= -5.85 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6 - 3 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
airguard.velocity			= 0, -3.0
fall.recover				= 1
fall						= 1

[State 1701, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40
ignorehitpause	= 1

[State 1701, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1701, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1701, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1701, Hit]	; ダウンヒット
type						= HitDef
triggerall					= (Var(32) & 7) < 4
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2StateType = L
trigger1					= AnimElemNo(0) = [16, 20]
affectteam					= E
attr						= S, SA
animtype					= Up
damage						= Ceil(40 * FVar(3))
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= FD
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
sparkno						= S2020
guard.sparkno				= S2050
sparkxy						= Floor(10 * Const(size.xscale)), Floor(-44 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 0
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 8
ground.hittime				= 8
guard.slidetime				= 8
guard.ctrltime				= 8
guard.hittime				= 17
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 2.0 * Const(size.xscale), -6 - 3 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 5.85 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 2.0 * Const(size.xscale), -2.5
down.velocity				= 5.85 * Const(size.xscale), 0
down.hittime				= 0
air.cornerpush.veloff		= 0
airguard.velocity			= 0, 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(21)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 5
x			= -5*Const(size.xscale)

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 2*Const(size.xscale)

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 19
x			= 8*Const(size.xscale)

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 37
x			= 8*Const(size.xscale)

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 38
x			= 6*Const(size.xscale)

[State 1701, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 42
x			= 5*Const(size.xscale)

[State 1701, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
triggerall	= StateType = A
trigger1	= AnimTime >= 0
value		= 47

[State 1701, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 初期化2
[Statedef 1702]
type		= U
movetype	= A
physics		= N
anim		= 1700
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1702, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -500 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1702, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType != A
statetype	= S

[State 1702, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1701

;------------------- やられ初期化
[Statedef 1703]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1703, PalFX]
type		= PalFX
trigger1	= !MoveHit
;add			= 144, 144, 0
;sinadd		= -96, -96, 0, 80
add			= 48, 48, 160
sinadd		= -24, -24, -80, 80
time		= 20
ignorehitpause	= 1

[State 1703, PalFX Counter]
type		= VarSet
trigger1	= !MoveHit
var(32)		= (Var(32) | 260046848) - 260046848 + 20*8388608
ignorehitpause	= 1

[State 1703, Explod]
type		= Explod
trigger1	= !MoveHit
anim		= 2060
ID			= 2060
pos			= Floor(15 * Const(size.xscale)), Floor(-50 * Const(size.yscale))
postype		= p1
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 1703, PlaySnd]
type		= PlaySnd
trigger1	= !MoveHit
value		= 2010, 1
ignorehitpause	= 1

[State 1703, Get Power]
type		= VarSet
trigger1	= !MoveHit
var(57)		= 20
ignorehitpause	= 1

[State 1703, Get Power]
type		= VarSet
triggerall	= !MoveHit
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1703, PowerAdd]
type		= PowerAdd
trigger1	= !MoveHit
value		= Var(57)
ignorehitpause	= 1

[State 1703, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1701
ignorehitpause	= 1

[State 1703, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1701
ignorehitpause	= 1

[State 1703, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1701
ignorehitpause	= 1

;---------------------------------------------------------------------
; 四股踏み(弱)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1800]
type		= S
movetype	= A
physics		= N
anim		= 1800
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1800, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1800, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1801

;------------------- 実行
[Statedef 1801]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1801, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 13
value		= 191, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 1801, EnvShake]
type		= EnvShake
trigger1	= AnimElem = 18
time		= 5

[State 1801, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 18
value		= 2082, 1

[State 1801, Explod]
type		= Explod
trigger1	= AnimElem = 18
anim		= 2305
ID			= 2305
pos			= Floor(-35 * Const(size.xscale)), 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= -1
bindtime	= 1
ownpal		= 1
removeongethit	= 1

[State 1801, Explod]
type		= Explod
trigger1	= AnimElem = 18
anim		= 2306
ID			= 2306
pos			= Floor(-35 * Const(size.xscale)), 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1
removeongethit	= 1

[State , Proj Dummy]	; 相手にガードさせ用
type			= Projectile
triggerall		= !(Var(18) & 528482304)
trigger1		= AnimElemTime(18) < 0
attr			= SCA, AA, AT, AP
projID			= 0
projanim		= 9999
projremove		= 1
projremovetime	= 1
guard.dist		= Const(size.proj.attack.dist)
ignorehitpause	= 1

[State 1801, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 80
ignorehitpause	= 1

[State 1801, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 1801, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( Var(57) / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1801, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 1801, Hit]	; 通常対地上ヒット
type						= Projectile
trigger1					= AnimElem = 18
projID						= 1800
projanim					= 1808
projremove					= 0
projremovetime				= 6
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= L
hitflag						= M
;priority					= 4, Hit
pausetime					= 0, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 0, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1801, Hit]	; ダウンヒット
type						= Projectile
trigger1					= AnimElem = 18
projID						= 1800
projanim					= 1805
projremove					= 0
projremovetime				= 6
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= FD
;priority					= 4, Hit
pausetime					= 0, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 0, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6.5
down.velocity				= 0, -6.5
down.hittime				= 16
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1801, Hit]	; 対ちょっとだけ空中ヒット
type						= Projectile
triggerall					= (Var(32) & 7) < 4
trigger1					= AnimElem = 18
projID						= 1800
projanim					= 1805
projremove					= 0
projremovetime				= 1
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= L
hitflag						= A
;priority					= 4, Hit
pausetime					= 0, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 0, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1801, Hit]	; 地中ヒット
type						= Projectile
triggerall					= (Var(32) & 7) < 4
trigger1					= AnimElem = 18
projID						= 1800
projanim					= 1806
projremove					= 0
projremovetime				= 6
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 0, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1801, Hit]	; 上空ヒット
type						= Projectile
triggerall					= (Var(32) & 7) < 4
trigger1					= AnimElem = 18
projID						= 1800
projanim					= 1807
projremove					= 0
projremovetime				= 6
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 0, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 1801, Get Enemy Idx]
type		= VarSet
trigger1	= 1
var(56)		= 0
ignorehitpause	= 1

[State 1801, Get Enemy Idx]
type		= VarSet
triggerall	= NumEnemy >= 2
trigger1	= !EnemyNear(Var(56)),Alive
var(56)		= 1
ignorehitpause	= 1

[State 1801, Attack Width]
type		= VarSet
trigger1	= 1
var(55)		= Const(size.attack.z.width.front)
ignorehitpause	= 1

[State 1801, Attack Width]
type		= VarSet
triggerall	= NumEnemy
;(size.z.width)trigger1	= EnemyNear(Var(56)),Const(size.z.width) >= 0
trigger1	= 3 >= 0
;(size.z.width)var(55)		= 2147483647 - EnemyNear(Var(56)),Const(size.z.width)
var(55)		= 2147483647 - 3
ignorehitpause	= 1

[State 1801, Attack Width]	; 計算結果後がオーバーフローして2147483647になるとなぜか当たらないので、2147483646基準にした
type		= VarSet
triggerall	= NumEnemy
;(size.z.width)trigger1	= EnemyNear(Var(56)),Const(size.z.width) < 0
trigger1	= 3 < 0
;(size.z.width)var(55)		= 2147483646 - EnemyNear(Var(56)),Const(size.z.width)
var(55)		= 2147483646 - 3
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 1801, Hit]	; Z軸ずれ用(地空ヒット)
type						= HitDef
triggerall					= !(P2BodyDist Z = (-9, 9))
triggerall					= (Var(32) & 7) >= 4
triggerall					= (P2BodyDist Y >= -30)
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) = 18
affectteam					= E
attr						= , AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MA
;priority					= 4, Hit
pausetime					= 1, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
attack.width				= Var(55), Var(55)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 1801, Hit]	; Z軸ずれ用(地上のみヒット)
type						= HitDef
triggerall					= !(P2BodyDist Z = (-9, 9))
triggerall					= (Var(32) & 7) >= 4
triggerall					= (P2BodyDist Y < -30)
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) = 18
affectteam					= E
attr						= , AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= M
;priority					= 4, Hit
pausetime					= 1, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
attack.width				= Var(55), Var(55)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 1801, Hit]	; Z軸ずれ用(全ヒット)
type						= HitDef
triggerall					= !(P2BodyDist Z = (-9, 9))
triggerall					= (Var(32) & 7) < 4
triggerall					= !MoveContact && !MoveReversed
trigger1					= AnimElemNo(0) = 18
affectteam					= E
attr						= , AA, AT, AP
animtype					= Up
damage						= Ceil(75 * FVar(3))
getpower					= 0, 0
givepower					= 0, 0
getpower					= Var(57), Var(57)
givepower					= Var(58), Var(58)
guardflag					= None
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 1, 9 + 15 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 0
id							= 1 + (Var(19) & 3)/1
numhit						= 1
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Const(size.proj.attack.dist)
attack.width				= Var(55), Var(55)
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -7.25 - 1.0 * ((Var(1) & 1) != 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(19)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 1801, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 四股踏み(強)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1805]
type		= S
movetype	= A
physics		= N
anim		= 1801
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1805, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1805, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1806

;------------------- 実行
[Statedef 1806]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1806, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 五輪突き(弱)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1900]
type		= S
movetype	= A
physics		= N
anim		= 1900
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1900, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1900, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1901

;------------------- 実行
[Statedef 1901]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1901, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 7
value		= 191, 2 + (Random >= 500)
channel		= 0
volume		= 200

; 現状この処理は本体が別のステートに移ったときに、この擬似飛び道具相殺判定が場に残らない問題がある
; だからってそのために新たにヘルパーを使いたくないという感じなので、これは苦肉の仮処理的な感じです
[State 1901, ReversalDef]	; 対飛び道具ガードポイント
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= 1
reversal.attr	= SCA, AP
getpower		= 0
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 1 * !(Helper(20000),Var(1) & 256)
guard.dist		= Const(size.proj.attack.dist)
hitflag			= P
ignorehitpause	= 1

[State 1901, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
value		= 2040, 2

[State 1901, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
ID			= 2091
anim		= 2091
pos			= 0, 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1
removeongethit	= 0

[State 1901, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
ID			= 2092
anim		= 2092
pos			= 0, 0
postype		= p1
scale		= 1.25 * Const(size.xscale), 1.25 * Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
removeongethit	= 0

[State 1901, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
x			= 3*Const(size.xscale)

[State 1901, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 2*Const(size.xscale)

[State 1901, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 6
x			= 8*Const(size.xscale)

[State 1901, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 五輪突き(強)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1905]
type		= S
movetype	= A
physics		= N
anim		= 1901
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1905, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( 76 * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 1905, State Init End]
type		= ChangeState
trigger1	= 1
value		= 1906

;------------------- 実行
[Statedef 1906]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 1906, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 7
value		= 191, 2 + (Random >= 500)
channel		= 0
volume		= 200

; 現状この処理は本体が別のステートに移ったときに、この擬似飛び道具相殺判定が場に残らない問題がある
; だからってそのために新たにヘルパーを使いたくないという感じなので、これは苦肉の仮処理的な感じです
[State 1906, ReversalDef]	; 対飛び道具ガードポイント
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= 1
reversal.attr	= SCA, AP
getpower		= 0
givepower		= 0
numhits			= 0
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 1 * !(Helper(20000),Var(1) & 256)
guard.dist		= Const(size.proj.attack.dist)
hitflag			= P
ignorehitpause	= 1

[State 1906, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
value		= 2040, 2

[State 1906, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
ID			= 2091
anim		= 2091
pos			= 0, 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1
removeongethit	= 0

[State 1906, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
ID			= 2092
anim		= 2092
pos			= 0, 0
postype		= p1
scale		= 1.25 * Const(size.xscale), 1.25 * Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
removeongethit	= 0

[State 1906, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
x			= 3*Const(size.xscale)

[State 1906, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 2*Const(size.xscale)

[State 1906, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 6
x			= 8*Const(size.xscale)

[State 1906, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= 0 <= AnimElemTime(7) && AnimElemTime(9) <= 0
x			= 8*Const(size.xscale)

[State 1906, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1
