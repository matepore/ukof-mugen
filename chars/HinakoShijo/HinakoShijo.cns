;=====================================================================
;  CNS File For "Refuse Hinako Shijo"                Made By OG子 OGヲ
;                                       Ver. 1.0            2007/10/01
;=====================================================================

;=====================================================================
; 変数表
;	Var(0)	:	temp
;	Var(1)	:	各種ビットフラグ
;		0(1):				カウンター判定中か
;		1(2):				空中追撃不可能か
;		2(4):				強制復帰
;		3(8):				物理攻撃を喰らった(ガード含む)フレームか
;		4(16):				大ジャンプ(or 前転などのロング移動 or 溜JCDバウンド判定)
;		5(32):				CPUフラグ
;		6(64):				無条件空中追撃可能
;		7(128):				3C空中追撃不可能
;		8(256):				カットイン初期化要求
;		9(512):				本体の攻撃が相手にヒットしたか
;		10(1024):			ステートを奪取されたか(最低でも相手のステート内処理を実行した)
;		11(2048):			ステートを奪取前判定用
;		12(4096):			攻撃力補正用、シールドで取ったか
;		13(8192):			キャンセル用、攻撃がヒット触れたか
;		14(16384):			ダメージを食らってる状態だったか
;		15(32768):			ダメージ終了SEを鳴らしていないか
;		16(65536):			鋼体用、ステート奪取された攻撃を食らったか
;		17(131072):			自分以外のスーパーポーズが長すぎるか
;		18(262144):			回数が減るタイプの鋼体用当身を出すか
;		19(524288):			鋼体ペナルティが起きたか
;		20(1048576):		鋼体中
;		21(2097152):		本体の攻撃が相手にガードされたか
;		22(4194304):		カウンター始動だったか
;		23(8388608):		再初期化が起きたか
;		24(16777216):		永続Target外し
;		25(33554432):		防御ステートで終わるか
;		26(67108864):		スーパーポーズ要請でスーパーポーズするか
;		27(134217728):		今ステート奪取されてないか(AI用)
;		28-31(-268435456):	予約(キー)
;	Var(2)	:	StateNo、type、MoveType、Ctrl、ステート奪取　履歴(現在のフレーム)
;		0-16(131071):		StateNo
;		17-18(393216):		type(S=0 C=1 A=2 L=3)
;		19-20(1572864):		MoveType(I=0 A=1 H=2)
;		21(2097152):		Ctrl
;		22(4194304):		このフレームに入った時に、実はステート奪取されてきたか
;		23(8388608):		ステート変更が起きるか
;		24(16777216):		ステート終了時の向き(0=右 1=左)
;		25(33554432):		ステート奪取されないステート変更だったか
;		26(67108864):		このフレームに入った時に、ダメージ状態だったか
;	Var(3)	:	Anim、AnimElemNo(0)　履歴(現在のフレーム)
;		0-16(131071):		Anim
;		17-25(66977792):	AnimElemNo(0) (0〜511要素)
;	Var(4)	:	ステート汎用タイマー
;	Var(5)	:	派生入力、犬の吠えるまでのフレーム、ステート奪取だけされる用鋼体への蓄積ダメージ
;	Var(6)	:	整数型、旧体力(計算用)
;	Var(7)	:	総合ヒット数カウンタ
;		0-13(16383):		本体技ヒット数
;		28-31(-268435456):	予約(キー)
;	Var(8)	:	コマンド入力履歴用ビットフラグ(通常技)
;		0-1(3):				A
;		2-3(12):			B
;		4-5(48):			C
;		6-7(192):			D
;		8-9(768):			C+D
;		10-12(7168):		A+B
;		13-14(24576):		シールド
;		18-19(786432):		挑発
;		20-21(3145728):		バースト
;		22-24(29360128):	ダッシュ
;		25-27(234881024):	バクステ
;		28-31(-268435456):	high_jump_flag
;	Var(9)	:	コマンド入力履歴用ビットフラグ(必殺技1)
;		0-2(7):				寄り切り
;		3-5(56):			がぶり寄り
;		6-8(448):			掛け投げ(弱)
;		9-11(3584):			掛け投げ(強)
;		12-14(28672):		超頭突き(弱)
;		15-17(229376):		超頭突き(強)
;		18-20(1835008):		小手投げ(弱)
;		21-23(14680064):	小手投げ(強)
;		24-26(117440512):	五輪突き(弱)
;		27-29(939524096):	五輪突き(強)
;	Var(10)	:	コマンド入力履歴用ビットフラグ(必殺技2、超必殺技2)
;		0-2(7):				突き上げ(弱)
;		3-5(56):			突き上げ(強)
;		6-8(448):			四股踏み(弱)
;		9-11(3584):			四股踏み(強)
;		12-14(28672):		我慢(弱)
;		15-17(229376):		我慢(強)
;		18-20(1835008):		MAX我慢
;	Var(11)	:	コマンド入力履歴用ビットフラグ(超必殺技1)
;		0-2(7):				合掌ひねり(弱)
;		3-5(56):			合掌ひねり(強)
;		6-8(448):			MAX合掌ひねり
;		9-11(3584):			大一番(弱)
;		12-14(28672):		大一番(強)
;		15-17(229376):		MAX大一番
;		18-20(1835008):		諸手突き(弱)
;		21-23(14680064):	諸手突き(強)
;		24-26(117440512):	MAX諸手突き
;	Var(12)	:	真のHP最大値
;	Var(13)	:	真のHP残り
;	Var(14)	:	被連続技用総ダメージ
;	Var(15)	:	盾
;	Var(16)	:	各種ビットフラグ2(カウンタの効果も？)
;		0-3(15):			予約(キー)
;		4-7(240):			本体用、攻撃ID (0〜15要素)
;		8-11(3840):			シールド成功後の補正残り時間 (0〜15要素)
;		12-14(28672):		被連続技用総ダメージ用、リセットカウンタ
;		15-20(2064384):		コンタクトスライドタイム (0〜63要素)
;		21-24(31457280):	地上での『突っ張り』ヒット数 (0〜15要素)
;		25-27(234881024):	ヘルパー初期化失敗の時間 (0〜7要素)
;		28(268435456):		回数が減らないタイプの鋼体用当身を出すか
;		29(536870912):		初めてRoundState=3になったか(死んでる時は立てない)
;		30(1073741824):		!Aliveになったか
;		31(-2147483648):	
;	Var(17)	:	整数型、旧体力(前フレのLife値)
;	Var(18)	:	各種ビットフラグ3(カウンタの効果も？)
;		0-3(15):			予約(キー)
;		4-9(1008):			強制鋼体残りフレーム (0〜63要素)
;		10-22(8387584):		ステート奪取された総フレーム (0〜8191要素)
;		23-28(528482304):	残りのヒットストップフレーム (0〜63要素)
;		29(536870912):		ガードクラッシュが起きたか
;		30(1073741824):		ステート奪取されないステート変更か
;		31(-2147483648):	前にヒットストップ中で、このフレームでヒットストップが終了したか
;	Var(19)	:	各種ビットフラグ4(カウンタの効果も？)
;		0-1(3):				飛び道具用、攻撃ID (0〜3要素)
;		2-6(124):			ガードキャンセル残りフレーム (0〜31要素)
;		7(128):				前方InGuardDist
;		8(256):				後方InGuardDist
;		9(512):				AI起動初期化チェック完了
;		10(1024):			鋼体を強制的に1個減らす命令
;		11(2048):			ステート奪取され鋼体中に鋼体が1個でも減ったか
;		12(4096):			MoveType=Hで始まってそのまま過ごすか
;		13(8192):			ステート奪取だけされる鋼体か
;		14(16384):			
;		15(32768):			勝敗演出を行ったか
;		16(65536):			HitFallDamage要請
;		17(131072):			1回でもCtrlになったか
;		18-27():
;		28-31(-268435456):	予約(キー)
;	Var(20)	:	ダメージ無視
;		0-9(1023):			
;		10-19(1047552):		連続・連携技で食らう総ダメージ用 (0〜1023要素)
;		20-28(535822336):	パワーゲージ、連続で食らう総ダメージ用 (0〜511要素)
;	Var(21)	:	被連続技用総ダメージ(パワーゲージ用)
;	Var(22)	:	プレーコンフィグ
;		0-3(15):			予約(キー)
;		4(16):				攻撃力補正タイプ(false:通常 true:相手のHPと防御力倍率依存)
;		5(32):				当身可能攻撃じゃないと残り鋼体回数が減らないか
;		6(64):				(鋼体回数含む)永続Targetを付加するか
;		7(128):				HPダメージ無視発動にペナルティを付加するか
;		8(256):				演出技中にTargetが無くなったらペナルティを付加するか
;		9(512):				相手のHitOverrideにペナルティを付加するか
;		10(1024):			F1とかで死なないか？
;	Var(23)	:	パワーゲージ保持
;	Var(24)	:	ゲームタイマー
;	Var(25)	:	コマンド入力補完用ビットフラグ
;		0(1):				"x"
;		1(2):				"y"
;		2(4):				"z"
;		3(8):				"a"
;		4(16):				"b"
;		5(32):				"c"
;		6(64):				"s"
;		7(128):				"holdup"
;		8(256):				"holddown"
;		9(512):				"holdfwd"
;		10(1024):			"holdback"
;		11(2048):			"hold_x"
;		12(4096):			"hold_y"
;		13(8192):			"hold_z"
;		14(16384):			"hold_a"
;		15(32768):			"hold_b"
;		16(65536):			"hold_c"
;		17(131072):			"hold_s"
;		18(262144):			"hold_right"
;		19(524288):			"hold_left"
;		20(1048576):		
;		21(2097152):		
;		22(4194304):		"recovery"
;		23(8388608):		
;		24(16777216):		"hatakikomi"
;		25(33554432):		"tsukidashi"
;		26(67108864):		"ketaguri"
;		27(134217728):		"yorikiri2"
;		28-31(-268435456):	予約(キー)
;	Var(26)	:	StateNo、type、MoveType、Ctrl、ステート奪取　履歴(1F前のフレーム)
;	Var(27)	:	Anim、AnimElemNo(0)　履歴(前のフレーム)
;	Var(28)	:	キャンセル可能状態フラグ
;		0-3(15):			予約(キー)
;		4(16):				全ての行動可能状態
;		5(32):				準行動可能状態
;		6(64):				準々行動可能状態
;		7(128):				連打キャンセル可
;		8(256):				特殊技1でキャンセル可
;		9(512):				特殊技2でキャンセル可
;		10(1024):			必殺技1でキャンセル可
;		11(2048):			必殺技2でキャンセル可
;		12(4096):			SC超必殺技でキャンセル可
;	Var(29)	:	Move〜履歴(前のフレーム)
;		0-4(31):			MoveContact
;		5-9(992):			MoveHit (0〜31要素)
;		10-14(31744):		MoveGuarded (0〜31要素)
;		15-19(1015808):		MoveReversed (0〜31要素)
;	Var(30)	:	ターゲットのID履歴
;	Var(31)	:	現在のターゲット番号 -2で生成 プレイヤーのIDではない
;	Var(32)	:	各種ビットフラグ5(カウンタの効果も？)
;		0-2(7):				キャラ性能設定
;							0:		SUMOU設定
;							1:		神設定
;							2:		強設定
;							3:		対強キャラ用処置設定
;							4:		通常設定
;		3-17():
;		18-22(8126464):		鋼体一瞬光用のPalFXタイマー (0〜31要素)
;		23-27(260046848):	鋼体常時光用のPalFXタイマー (0〜31要素)
;		28-31(-268435456):	予約(キー)
;	Var(33)	:	相手の残りガードクラッシュ値
;	Var(34)	:	コマンド入力補完用ビットフラグ2
;		0-3(15):			予約(キー)
;		4(16):				ガード(AI用)
;		5(32):				屈ガードにするようの 屈状態(AI用)
;		6(64):				"injure"
;		7(128):				"injure_damage_up"
;		8(256):				"injure_damage_down"
;	Var(35)	:	StateNo、type、MoveType、Ctrl、ステート奪取　履歴(2F前のフレーム)
;
;	Var(50) :	temp(-3、-2、-1で使用。通常ステートからは書き換えてOK)
;
;	Var(53) :	temp
;	Var(54) :	temp
;	Var(55) :	temp
;	Var(56) :	temp
;	Var(57) :	temp
;	Var(58) :	temp
;	Var(59) :	キー
;
;	FVar(0)	:	temp
;	FVar(1)	:	ヒットバックベクトル
;	FVar(2)	:	摩擦差によるヒットバック倍率
;	FVar(3)	:	攻撃力補正(通常の)
;	FVar(4)	:	カットインの倍率
;	FVar(5)	:	パワーゲージ上昇倍率
;	FVar(6)	:	ガードクラッシュ補正
;	FVar(7)	:	ベクトル履歴x
;	FVar(8)	:	ベクトル履歴y
;	FVar(9)	:	攻撃力補正(超必殺技の)
;
;	FVar(37):	temp
;	FVar(38):	temp
;	FVar(39):	temp
;
;	00010000000000000000000000000000;	268435456
;	00110000000000000000000000000000;	805306368
;	01110000000000000000000000000000;	1879048192
;	11110000000000000000000000000000:	-268435456
;	00001111111111111111111111111111:	268435455
;	00001000000000000000000000000000;	134217728
;	01111000000000000000000000000000:	2013265920
;	00000111111111111111111111111111:	134217727
;	01111111111111111111111111111111:	2147483647
;	10000000000000000000000000000000:	-2147483648
;1111111111100000000000000000000
;
;
; サウンドチャンネル表
;	0:		本体ボイス
;	1:		汎用エフェクト1
;	2:		汎用エフェクト2
;	3:		パワーチャージ
;
; ヒットID
;	0:		何でもない判定
;	1-4:	本体の飛び道具
;	10-25:	本体の通常技、本体の投げ技
;=====================================================================

;---------------------------------------------------------------------
; 基本設定
;---------------------------------------------------------------------
[Data]
life				= 3000	; 体力ゲージ(デフォルト：1000(* 1)　他キャラ：1000(* 1))
; HPは2150000未満じゃないとTimeOver時の勝敗判定で不具合が出る
; mugen.cfgのLife項目の倍率で、その値を超えた時も同様に不具合が出る
power				= 5000		; パワーゲージ最大値(デフォルト：3000　他キャラ：3000 = Lv.3)
attack				= 100		; 攻撃力(%)(デフォルト：100)　他キャラ：100
defence				= 100		; 防御力(%)(デフォルト：100)　他キャラ：100
fall.defence_up		= 50		; 空中コンボ修正率(%)(デフォルト：50)　他キャラ：50
liedown.time		= 40		; ダウン時間
airjuggle			= 15		; 空中コンボ
sparkno				= 2			; 初期ヒットスパーク番号
guard.sparkno		= 40		; 初期ガードスパーク番号
KO.echo				= 0			; KOボイスエコー(0:OFF、1:ON)
volume				= 0			; キャラボイスボリューム値
IntPersistIndex		= 1
;FloatPersistIndex	= 

[Size]
xscale				= 1.0		; 水平サイズ倍率
yscale				= 1.0		; 垂直サイズ倍率
ground.back			= 15		; キャラ幅(地上、後ろ側)
ground.front		= 16		; キャラ幅(地上、前側)
air.back			= 12		; キャラ幅(空中、後ろ側)
air.front			= 12		; キャラ幅(空中、前側)
z.width				= 3			; キャラ幅(Z軸の接触判定幅と相手のHitDefへの喰らい判定幅を兼ねる)
height				= 60		; キャラの高さ(ジャンプで飛び越せる高さ)
attack.width		= 4, 4		; Default attack width: back, front
attack.z.width		= 4, 4		; HitDefの幅(top(奥、Z軸が-値方向), bottom(手前、Z軸が+値方向))
attack.dist			= 9999		; Default attack distance(他キャラ：160)
proj.attack.dist	= 9999		; Default attack distance for projectiles(他キャラ：90)
proj.doscale		= 0			; Set to 1 to scale projectiles too   
head.pos			= 12, -73	; 頭部座標
mid.pos				= -2, -51	; 体中心部座標
shadowoffset		= 0			; キャラの影・オフセット値

[Velocity]
walk.fwd		= 2.4			; 前進速度
walk.back		= -2.2			; 後退速度
run.fwd			= 4.8, 0		; 前ダッシュ速度(y<0の場合、ホップステップ)
run.back		= -5.0, -3.75	; バックステップ速度(y=0の場合、走り)
jump.neu		= 0, -7.71		; 垂直ジャンプ速度
jump.back		= -2.20			; 後方ジャンプ速度
jump.fwd		= 2.40			; 前方ジャンプ速度
runjump.back	= -3.7, -7.71	; 後方ジャンプ速度(ここでは大ジャンプとして扱う)
runjump.fwd		= 4.0, -7.71	; 前方ジャンプ速度(ここでは大ジャンプとして扱う)
airjump.neu		= 0, -5.73		; 空中垂直ジャンプ速度(ここではyを小ジャンプ、xをジャンプのyaccelとして扱う)
airjump.back	= -2.2, -5.73	; 空中後方ジャンプ速度
airjump.fwd		= 2.4, -5.73	; 空中前方ジャンプ速度

[Movement]
airjump.num			= 0			; 空中ジャンプ回数
airjump.height		= 35		; 空中ジャンプ最低高度(他キャラ：35)
yaccel				= .44		; キャラ重力加速度(他キャラ：.44)
stand.friction		= .85		; 摩擦係数(立ち状態)(他キャラ：.85)
crouch.friction		= .82		; 摩擦係数(しゃがみ状態)(他キャラ：.82)

;===============================================================================
; Definition of the Basic Action
;===============================================================================

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type		= S
physics		= S
velset		= 0, 0
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State , Provocation]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(2) & 131071) = 196
trigger1	= (Var(3) & 131071) = 195 && Anim = 195 && AnimTime < 0
value		= (Var(2) & 131071)

[State , Jump]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 128)
value		= 40

[State , Crouch]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
value		= 10

[State , Walk]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 512) || ((Var(25) & 1024) || (Var(34) & 16))
value		= 20

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 151
trigger2	= (Var(2) & 131071) = 153
value		= (Var(2) & 131071)

[State 0, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 0 && Anim != 5
trigger2	= Anim = 5 && AnimTime >= 0 ;Turn anim over
value		= 0

[State 0, VelSet]
type		= VelSet
trigger1	= Time = 0
y			= 0

[State 0, VelSet] ;Stop moving if low velocity or 4 ticks pass
type		= VelSet
trigger1	= Abs(Vel X) < 2*Const(size.xscale)
trigger2	= Time = 4
x			= 0

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.stand.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 立ち共通初期化処理
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 1]
type		= S
movetype	= U
physics		= U
ctrl		= 1
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 1, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5

;---------------------------------------------------------------------
; 行動可能共通初期化処理
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 5]
type		= U
movetype	= U
physics		= U
ctrl		= 1
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State 5, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 0
value		= 0 + 11*(StateType = C) + 50*(StateType = A)
ctrl		= 1

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; しゃがみ共通初期化処理
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 9]
type		= C
movetype	= U
physics		= U
ctrl		= 1
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 9, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type		= C
physics		= C
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State , Jump]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 128)
value		= 40

[State , Walk]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
trigger1	= (Var(25) & 512) || ((Var(25) & 1024) || (Var(34) & 16))
value		= 20

[State , Crouch End]
type		= ChangeState
trigger1	= !Ctrl && !(Var(2) & 2097152)
trigger2	= !((Var(25) & 256) || (Var(34) & 32))
value		= 0

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 151
trigger2	= (Var(2) & 131071) = 153
value		= (Var(2) & 131071)

[State , Guard Player]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 119

[State , Guard AI]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 119

[State 10, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 10
value		= 10

[State 10, VelMul]
type		= VelMul
trigger1	= Time = 0
x			= .75

[State 10, ChangeAnim]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 11

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.crouch.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type		= C
physics		= C
velset		= 0, 0
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State , Jump]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 128)
value		= 40

[State , Walk]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
trigger1	= (Var(25) & 512) || ((Var(25) & 1024) || (Var(34) & 16))
value		= 20

[State , Crouch End]
type		= ChangeState
trigger1	= !Ctrl && !(Var(2) & 2097152)
trigger2	= !((Var(25) & 256) || (Var(34) & 32))
value		= 12

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 151
trigger2	= (Var(2) & 131071) = 153
value		= (Var(2) & 131071)

[State , Guard Player]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 119

[State , Guard AI]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 119

[State 11, ChangeAnim] ;Change from turning animation
type		= ChangeAnim
trigger1	= Anim = 6 && AnimTime >= 0
trigger2	= Anim != 6 && Anim != 11
value		= 11

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.crouch.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type		= S
physics		= S
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State , Jump]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 128)
value		= 40

[State , Crouch]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
value		= 11

[State , Walk]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 512) || ((Var(25) & 1024) || (Var(34) & 16))
value		= 20

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 151
trigger2	= (Var(2) & 131071) = 153
value		= (Var(2) & 131071)

[State 12, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 12
value		= 12

[State 12, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 0

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.stand.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type		= S
physics		= S
sprpriority	= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State , Jump]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= (Var(25) & 128)
value		= 40

[State , Crouch]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
value		= 10

[State , Walk End]
type		= ChangeState
trigger1	= !Ctrl && !(Var(2) & 2097152)
trigger2	= !(Var(25) & 512) && !((Var(25) & 1024) || (Var(34) & 16))
value		= 0

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 151
trigger2	= (Var(2) & 131071) = 153
value		= (Var(2) & 131071)

[State , Guard Player]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 119

[State , Guard AI]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 119

[State 20, Vel Reset]
type		= VelSet
trigger1	= 1
x			= Const(velocity.walk.fwd.x)*Const(size.xscale)

[State 20, VelSet]
type		= VelSet
trigger1	= (Facing >= 0) && (Var(25) & 262144)
trigger2	= (Facing < 0) && (Var(25) & 524288)
x			= Const(velocity.walk.fwd.x)*Const(size.xscale)

[State 20, VelSet]
type		= VelSet
trigger1	= (Facing < 0) && (Var(25) & 262144)
trigger2	= (Facing >= 0) && (Var(25) & 524288)
x			= Const(velocity.walk.back.x)*Const(size.xscale)

[State 20, ChangeAnim]
type		= ChangeAnim
triggerall	= vel x > 0
trigger1	= Anim != 20 && Anim != 5
trigger2	= Anim = 5 && AnimTime >= 0
value		= 20

[State 20, ChangeAnim]
type		= ChangeAnim
triggerall	= vel x < 0
trigger1	= Anim != 21 && Anim != 5
trigger2	= Anim = 5 && AnimTime >= 0
value		= 21

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.stand.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 各種ジャンプ
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 40]
type		= S
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State , Crouch]
type		= ChangeState
triggerall	= Ctrl && ((Var(2) & 2097152) || ((Var(2) & 131071) = [101, 104]))
trigger1	= !(Var(25) & 128)
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
value		= 10

[State , Walk]
type		= ChangeState
triggerall	= Ctrl && ((Var(2) & 2097152) || ((Var(2) & 131071) = [101, 104]))
trigger1	= !(Var(25) & 128)
trigger1	= (Var(25) & 512) || ((Var(25) & 1024) || (Var(34) & 16))
value		= 20

[State , Stand]
type		= ChangeState
triggerall	= Ctrl && ((Var(2) & 2097152) || ((Var(2) & 131071) = [101, 104]))
trigger1	= !(Var(25) & 128)
value		= 0

[State 40, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 40
value		= 40

[State 40, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 40, Turn]
type		= Turn
trigger1	= P2Dist X < 0

[State 40, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 40, Var Reset]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 16) - 16

[State 40, Var Reset]
type		= VarSet
trigger1	= 1
sysvar(1)	= 0

[State 40, VarSet]
type		= VarSet
trigger1	= (Var(8) & -268435456)
trigger2	= (Var(2) & 131071) = [101, 102]
var(1)		= (Var(1) | 16)

[State 40, VarSet]
type		= VarSet
trigger1	= 1
var(8)		= (Var(8) | -268435456) - -268435456

[State 40, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 40, State Init End]
type		= ChangeState
trigger1	= 1
value		= 41

;------------------- 実行
[Statedef 41]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 41, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 41, fwd jump]
type		= VarSet
triggerall	= AnimElemTime(2) <= 0
trigger1	= (Facing >= 0) && (Var(25) & 262144)
trigger2	= (Facing < 0) && (Var(25) & 524288)
sysvar(1)	= 1

[State 41, back jump]
type		= VarSet
triggerall	= AnimElemTime(2) <= 0
trigger1	= (Facing < 0) && (Var(25) & 262144)
trigger2	= (Facing >= 0) && (Var(25) & 524288)
sysvar(1)	= -1

[State 41, VarSet] ; 垂直ジャンプの場合は、ロングジャンプフラグリセット
type		= VarSet
triggerall	= AnimTime >= 0
trigger1	= SysVar(1) = 0
var(1)		= (Var(1) | 16) - 16

[State 41, VelSet Nomal Jump]
type		= VelSet
triggerall	= AnimTime >= 0
trigger1	= !(Var(1) & 16)
x			= IfElse( SysVar(1) = 0, 0, IfElse(SysVar(1) = -1, Const(velocity.jump.back.x), Const(velocity.jump.fwd.x)) )*Const(size.xscale)
y			= Const(velocity.jump.y)

[State 41, VelSet Long Jump]
type		= VelSet
triggerall	= AnimTime >= 0
trigger1	= (Var(1) & 16)
x			= IfElse( SysVar(1) = 0, 0, IfElse(SysVar(1) = -1, Const(velocity.runjump.back.x), Const(velocity.runjump.fwd.x)) )*Const(size.xscale)
y			= Const(velocity.jump.y)

[State 41, Low Jump Y]
type		= VelSet
triggerall	= AnimTime >= 0
trigger1	= !(Var(25) & 128)
y			= Const(velocity.airjump.y)

[State 41, AfterImage]
type			= AfterImage
triggerall		= AnimTime >= 0
trigger1		= (Var(1) & 16)
length			= 5
timegap			= 2
framegap		= 2
palcontrast		= 160, 160, 160
palpostbright	= -32, -32, -32
trans			= add1
time			= 16

[State 41, PlaySnd] ; ロングジャンプ
type		= PlaySnd
triggerall	= AnimTime >= 0
trigger1	= (Var(1) & 16)
value		= 2070, 1

[State 41, PlaySnd] ; ジャンプ
type		= PlaySnd
triggerall	= AnimTime >= 0
trigger1	= !(Var(1) & 16)
value		= 2070, 0

[State 41, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 47

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; AirJump Start
;------------------- 初期化
[Statedef 45]
type		= A
movetype	= I
physics		= N
anim		= 40
ctrl		= 0
facep2		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State 45, Var Reset]
type		= VarSet
trigger1	= AnimElem = 1
var(1)		= (Var(1) | 16) - 16

[State 45, Var Reset]
type		= VarSet
trigger1	= AnimElem = 1
sysvar(1)	= 0

[State 45, VarSet]
type		= VarSet
triggerall	= AnimElem = 1
trigger1	= (Var(8) & -268435456)
trigger2	= (Var(2) & 131071) = [101, 102]
var(1)		= (Var(1) | 16)

[State 45, VarSet]
type		= VarSet
trigger1	= 1
var(8)		= (Var(8) | -268435456) - -268435456

[State 45, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 45, State Init End]
type		= ChangeState
trigger1	= 1
value		= 46

;------------------- 実行
[Statedef 46]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 46, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 46, fwd jump]
type		= VarSet
triggerall	= AnimElemTime(2) <= 0
trigger1	= (Facing >= 0) && (Var(25) & 262144)
trigger2	= (Facing < 0) && (Var(25) & 524288)
sysvar(1)	= 1

[State 46, back jump]
type		= VarSet
triggerall	= AnimElemTime(2) <= 0
trigger1	= (Facing < 0) && (Var(25) & 262144)
trigger2	= (Facing >= 0) && (Var(25) & 524288)
sysvar(1)	= -1

[State 46, VarSet] ; 垂直ジャンプの場合は、ロングジャンプフラグリセット
type		= VarSet
triggerall	= AnimTime >= 0
trigger1	= SysVar(1) = 0
var(1)		= (Var(1) | 16) - 16

[State 46, VelSet Nomal Jump]
type		= VelSet
triggerall	= AnimTime >= 0
trigger1	= !(Var(1) & 16)
x			= IfElse( SysVar(1) = 0, 0, IfElse(SysVar(1) = -1, Const(velocity.jump.back.x), Const(velocity.jump.fwd.x)) )*Const(size.xscale)
y			= Const(velocity.jump.y)

[State 46, VelSet Long Jump]
type		= VelSet
triggerall	= AnimTime >= 0
trigger1	= (Var(1) & 16)
x			= IfElse( SysVar(1) = 0, 0, IfElse(SysVar(1) = -1, Const(velocity.runjump.back.x), Const(velocity.runjump.fwd.x)) )*Const(size.xscale)
y			= Const(velocity.jump.y)

[State 46, Low Jump Y]
type		= VelSet
triggerall	= AnimTime >= 0
trigger1	= !(Var(25) & 128)
y			= Const(velocity.airjump.y)

[State 46, AfterImage]
type			= AfterImage
triggerall		= AnimTime >= 0
trigger1		= (Var(1) & 16)
length			= 5
timegap			= 2
framegap		= 2
palcontrast		= 160, 160, 160
palpostbright	= -32, -32, -32
trans			= add1
time			= 16

[State 46, PlaySnd] ; ロングジャンプ
type		= PlaySnd
triggerall	= AnimTime >= 0
trigger1	= (Var(1) & 16)
value		= 2070, 1

[State 46, PlaySnd] ; ジャンプ
type		= PlaySnd
triggerall	= AnimTime >= 0
trigger1	= !(Var(1) & 16)
value		= 2070, 0

[State 46, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 47

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ジャンプ共通初期化処理
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 47]
type		= A
movetype	= U
physics		= U
ctrl		= 1
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 47, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5

;---------------------------------------------------------------------
; ジャンプ共通フォロースルー初期化処理
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 48]
type		= A
movetype	= U
physics		= U
ctrl		= 1
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 48, State Init End]
type		= ChangeState
trigger1	= 1
value		= 49

;------------------- 実行
[Statedef 49]
type		= U
movetype	= U
physics		= U
ctrl		= 1
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 49, ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(4) - Var(59)) >= 0
value		= 44
elem		= 2

[State 49, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 0
value		= 51
ctrl		= 1

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type		= A
physics		= A

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State 50, VarSet]
type		= VarSet
trigger1	= Time = 0
sysvar(1)	= 0

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 155
value		= (Var(2) & 131071)

[State , Guard Player]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 119

[State , Guard AI]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 119

[State 50, ChangeAnim]
type		= ChangeAnim
triggerall	= !(Vel Y > -2)
trigger1	= (Vel X = 0) && Anim != 41
trigger2	= (Vel X > 0) && Anim != 42
trigger3	= (Vel X < 0) && Anim != 43
value		= IfElse( (Vel X) = 0, 41, IfElse((Vel X) > 0, 42, 43) )

[State 50, ChangeAnim]
type		= ChangeAnim
triggerall	= Vel y > -2
trigger1	= (Vel X = 0) && (Anim != 44) && SelfAnimExist(44)
trigger2	= (Vel X > 0) && (Anim != 45) && SelfAnimExist(45)
trigger3	= (Vel X < 0) && (Anim != 46) && SelfAnimExist(46)
value		= IfElse( (Vel X) = 0, 44, IfElse((Vel X) > 0, 45, 46) )

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= IfElse( HitPauseTime, Vel Y, Vel Y + Const(movement.yaccel) )
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type		= A
physics		= A

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Guard continue]
type		= ChangeState
triggerall	= Ctrl
triggerall	= !HitOver
trigger1	= (Var(2) & 131071) = 155
value		= (Var(2) & 131071)

[State , Guard Player]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 119

[State , Guard AI]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 119

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= IfElse( HitPauseTime, Vel Y, Vel Y + Const(movement.yaccel) )
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 着地
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 52]
type		= S
movetype	= I
physics		= N
anim		= 47
ctrl		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 52, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 52, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 52, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= , AT
ignorehitpause	= 1

[State 52, State Init End]
type		= ChangeState
trigger1	= 1
value		= 53

;------------------- 実行
[Statedef 53]
type		= S
movetype	= I
physics		= N
ctrl		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 53, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State 53, StateTypeSet]
type		= StateTypeSet
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S

[State 53, StateTypeSet]
type		= StateTypeSet
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C

[State , Guard Player]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 119

[State , Guard AI]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 119

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ダッシュ
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 100]
type		= S
movetype	= I
physics		= N
anim		= 100
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 100, Branch]
type		= ChangeState
trigger1	= (Facing >= 0) && !(Var(25) & 262144) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144) && !(Var(25) & 524288)
value		= 105

[State 100, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 100, State Init End]
type		= ChangeState
trigger1	= 1
value		= 101

;------------------- 実行1
[Statedef 101]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 101, VelSet]
type		= VelSet
trigger1	= AnimElem = 2
x			= Const(velocity.run.fwd.x)*Const(size.xscale)

[State 101, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) % 70 = 0
value		= 2060, 0

[State 101, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) % 70 = 21
value		= 2060, 1

[State 101, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) % 70 = 47
value		= 2060, 2

[State , Jump]
type		= ChangeState
triggerall	= AnimElemTime(2) >= 0
trigger1	= (Var(25) & 128)
value		= 40
ctrl		= 1

[State 101, Loop]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 8
value		= 102

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 70
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 実行2
[Statedef 102]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 102, End]
type		= ChangeState
trigger1	= !(Var(25) & 512)
value		= 103

[State , Jump]
type		= ChangeState
trigger1	= (Var(25) & 128)
value		= 40
ctrl		= 1

[State 102, VelSet]
type		= VelSet
trigger1	= AnimElem = 2
x			= Const(velocity.run.fwd.x)*Const(size.xscale)

[State 102, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) % 70 = 0
value		= 2060, 0

[State 102, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) % 70 = 21
value		= 2060, 1

[State 102, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) % 70 = 47
value		= 2060, 2

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 70
var(4)		= 1

[State , State Timer]
type		= VarSet
trigger1	= (Var(4) - Var(59)) >= 70
var(4)		= Var(59) - 1

; ↑ で-1に初期化しているので、それで判定
[State 102, Loop]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) = -1
value		= StateNo

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 停止・初期化
[Statedef 103]
type		= S
movetype	= I
physics		= N
anim		= 101
velset		= 0, 0
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 103, State Init End]
type		= ChangeState
trigger1	= 1
value		= 104

;------------------- 停止・実行
[Statedef 104]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 104, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; バックステップ
;---------------------------------------------------------------------
;------------------- 開始・初期化
[Statedef 105]
type		= S
movetype	= I
physics		= N
anim		= 105
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 105, Branch]
type		= ChangeState
trigger1	= (Facing >= 0) && (Var(25) & 262144) && !(Var(25) & 524288)
trigger2	= (Facing < 0) && !(Var(25) & 262144) && (Var(25) & 524288)
value		= 100

[State 105, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 105, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 105, State Init End]
type		= ChangeState
trigger1	= 1
value		= 106

;------------------- 開始・実行
[Statedef 106]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 106, NotHit]
type		= NotHitBy
trigger1	= (Var(4) - Var(59)) < 6
value		= SCA
ignorehitpause	= 1

[State 106, StateTypeSet]
type		= StateTypeSet
trigger1	= AnimElemNo(0) >= 2
statetype	= A
physics		= N

[State 106, VelSet]
type		= VelSet
trigger1	= AnimElem = 2
x			= Const(velocity.run.back.x)*Const(size.xscale)
y			= Const(velocity.run.back.y)

[State 106, Gravity]
type		= Gravity
trigger1	= AnimElemTime(2) > 0

[State 106, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 2050, 1

[State 106, 1]
type		= ChangeState
trigger1	= AnimElemTime(2) > 0
trigger1	= Vel Y > 0 && Pos Y + Vel Y >= 0
value		= 107

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 着地・初期化
[Statedef 107]
type		= S
movetype	= I
physics		= N
anim		= 106
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 107, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 107, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 107, State Init End]
type		= ChangeState
trigger1	= 1
value		= 108

;------------------- 着地・実行
[Statedef 108]
type		= S
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 108, MakeDust]
type		= MakeDust
trigger1	= 1
pos			= Floor(-30 * Const(size.xscale)), 0

[State 108, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime >= 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime >= 0
trigger2	= 1
value = 1

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime >= 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime >= 0
trigger2	= 1
value = 1

;---------------------------------------------------------------------------
; 敵のTarget状態外し、状態保持終了
;---------------------------------------------------------------------------
;------------------- 初期化
[Statedef 118]
type		= U		;Leave state type unchanged
movetype	= U		;Leave
physics		= U		;Leave physics unchanged
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 118, VarSet]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 33554432)
ignorehitpause	= 1

[State 118, State Init End]
type		= ChangeState
trigger1	= 1
value		= 120
ignorehitpause	= 1

[State 118, State Init End]
type		= ChangeState
trigger1	= 1
value		= 120
ignorehitpause	= 1

[State 118, State Init End]
type		= ChangeState
trigger1	= 1
value		= 120
ignorehitpause	= 1

;---------------------------------------------------------------------------
; GUARD (start)
;------------------- 初期化
[Statedef 119]
type		= U		;Leave state type unchanged
physics		= U		;Leave physics unchanged

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 119, VarSet]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 33554432) - 33554432
ignorehitpause	= 1

; 以後
; ヒットポーズ中はガード状態と認識されないから、ignorehitpause別にいらなくね
; ChangeState、SelfStateバグを考慮しても、むしろここに来ることはないかと

[State 119, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 120 + (StateType = C) + (StateType = A)*2
ignorehitpause	= 1

[State 119, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType = S
physics		= S

[State 119, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType = C
physics		= C

[State 119, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType = A
physics		= A

[State 119, State Init End]
type		= ChangeState
trigger1	= 1
value		= 120

;------------------- 実行
[Statedef 120]
type		= U	;Leave state type unchanged
movetype	= U	;Leave 
physics		= U	;Leave physics unchanged
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Get Up Check]
type		= ChangeState
trigger1	= StateType = L
trigger1	= MoveType = I
trigger1	= Ctrl
trigger1	= (Anim = 0) || (Anim = 5) || (Anim = [5110, 5119]) || (Anim = [5120, 5129])
trigger1	= PrevStateNo = 7027
value		= PrevStateNo
ctrl		= 1
ignorehitpause	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Are you dead?]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State 120, Init Check]
type		= ChangeState
triggerall	= !(Var(1) & 33554432)
trigger1	= !(Anim = [120, 122])
value		= 119

[State 120, Hi to Lo]
type		= StateTypeSet
triggerall	= !(Var(1) & 33554432)
triggerall	= StateType = S
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C
physics		= C

[State 120, Lo to Hi]
type		= StateTypeSet
triggerall	= !(Var(1) & 33554432)
triggerall	= StateType = C
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S
physics		= S

[State 120, End]
type		= ChangeState
triggerall	= !(Var(1) & 33554432)
trigger1	= AnimTime >= 0
value		= 130 + (StateType = C) + (StateType = A)*2

[State , Stop Guarding Player]
type		= ChangeState
triggerall	= !(Var(1) & 33554432)
triggerall	= !(Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !InGuardDist
value		= 139

[State , Stop Guarding AI]
type		= ChangeState
triggerall	= !(Var(1) & 33554432)
triggerall	= (Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= !EnemyNear,NumProj
;trigger3	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger3	= NumEnemy >= 2
;trigger3	= !EnemyNear(0),NumProj && !EnemyNear(1),NumProj
value		= 139

[State , State Memory]
type		= VarSet
triggerall	= !(Var(1) & 33554432)
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !(Var(1) & 33554432)
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !(Var(1) & 33554432)
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !(Var(1) & 33554432)
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !(Var(1) & 33554432)
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * IfElse( StateType = S, Const(movement.stand.friction), IfElse( StateType = C, Const(movement.crouch.friction), 1.0 ) ) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !(Var(1) & 33554432)
trigger1	= 1
fvar(8)		= IfElse( HitPauseTime, Vel Y, Vel Y + (StateType = A)*Const(movement.yaccel) )
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
triggerall	= !(Var(1) & 33554432)
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type		= S
physics		= S

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 130, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 130
value		= 130

[State 130, Hi to Lo]
type		= ChangeState
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
value		= 131

[State , Stop Guarding Player]
type		= ChangeState
triggerall	= !(Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !InGuardDist
value		= 139

[State , Stop Guarding AI]
type		= ChangeState
triggerall	= (Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= !EnemyNear,NumProj
;trigger3	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger3	= NumEnemy >= 2
;trigger3	= !EnemyNear(0),NumProj && !EnemyNear(1),NumProj
value		= 139

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.stand.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type		= C
physics		= C

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 131, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 131
value		= 131

[State 131, Lo to Hi]
type		= ChangeState
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
value		= 130

[State , Stop Guarding Player]
type		= ChangeState
triggerall	= !(Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !InGuardDist
value		= 139

[State , Stop Guarding AI]
type		= ChangeState
triggerall	= (Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= !EnemyNear,NumProj
;trigger3	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger3	= NumEnemy >= 2
;trigger3	= !EnemyNear(0),NumProj && !EnemyNear(1),NumProj
value		= 139

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.crouch.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type		= A
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 132, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 132
value		= 132

[State 132, VelAdd]
type		= VelAdd
trigger1	= 1
y			= Const(movement.yaccel)

[State 132, VarSet]
type		= VarSet
trigger1	= 1
sysvar(0)	= (pos y >= 0) && (vel y > 0)

[State 132, VelSet]
type		= VelSet
trigger1	= SysVar(0)
y			= 0

[State 132, PosSet]
type		= PosSet
trigger1	= SysVar(0)
y			= 0

[State 132, Air to Hi Player]
type		= ChangeState
triggerall	= SysVar(0)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 130

[State 132, Air to Hi AI]
type		= ChangeState
triggerall	= SysVar(0)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 130

[State 132, On Ground]
type		= ChangeState
trigger1	= SysVar(0)
value		= 52

[State , Stop Guarding Player]
type		= ChangeState
triggerall	= !(Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !InGuardDist
value		= 139

[State , Stop Guarding AI]
type		= ChangeState
triggerall	= (Var(1) & 32)
trigger1	= !((Var(25) & 1024) || (Var(34) & 16))
trigger2	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= !EnemyNear,NumProj
;trigger3	= !(InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger3	= NumEnemy >= 2
;trigger3	= !EnemyNear(0),NumProj && !EnemyNear(1),NumProj
value		= 139

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; GUARD (end)
;------------------- 初期化
[Statedef 139]
type		= U		;Leave state type unchanged
physics		= U		;Leave physics unchanged
ctrl		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 139, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 140 + (StateType = C) + (StateType = A)*2

[State 139, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType = S
physics		= S

[State 139, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType = C
physics		= C

[State 139, StateTypeSet]
type		= StateTypeSet
trigger1	= StateType = A
physics		= A

[State 139, State Init End] ;Implemented within engine
type		= ChangeState
trigger1	= 1
value		= 140

;------------------- 実行
[Statedef 140]
type		= U	;Leave state type unchanged
movetype	= U	;Leave 
physics		= U	;Leave physics unchanged
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 140, Init Check]
type		= ChangeState
trigger1	= !(Anim = [140, 142])
value		= 139

[State 140, Jump]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= StateType != A
trigger1	= (Var(25) & 128)
value		= 40

[State 140, Walk]
type		= ChangeState
triggerall	= Ctrl && (Var(2) & 2097152)
triggerall	= StateType != A
trigger1	= (Var(25) & 512)
value		= 20

[State 140, Hi to Lo]
type		= StateTypeSet
triggerall	= StateType = S
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C
physics		= C

[State 140, Lo to Hi]
type		= StateTypeSet
triggerall	= StateType = C
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S
physics		= S

[State 140, End] ;Implemented within engine
type		= ChangeState
trigger1	= AnimTime >= 0
value		= (StateType = C)*11 + (StateType = A)*48

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * IfElse( StateType = S, Const(movement.stand.friction), IfElse( StateType = C, Const(movement.crouch.friction), 1.0 ) ) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= IfElse( HitPauseTime, Vel Y, Vel Y + (StateType = A)*Const(movement.yaccel) )
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type		= S
movetype	= H
physics		= N
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 150, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 150

[State 150, End]
type		= ChangeState
trigger1	= HitShakeOver
value		= 151 + 2*((Var(25) & 256) || (Var(34) & 32))

[State 150, Hi to Lo]
type		= StateTypeSet
triggerall	= StateType = S
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C
physics		= C

[State 150, Lo to Hi]
type		= StateTypeSet
triggerall	= StateType = C
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S
physics		= S

[State 150, ForceFeedback]
type		= ForceFeedback
trigger1	= Time = 0
waveform	= square
time		= 3

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * IfElse( StateType = S, Const(movement.stand.friction), IfElse( StateType = C, Const(movement.crouch.friction), 1.0 ) ) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type		= S
movetype	= H
physics		= S
anim		= 150

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 151, HitVelSet]
type		= HitVelSet
triggerall	= !Ctrl
trigger1	= Time = 0
x			= 1

[State 151, VelSet]
type		= VelSet
trigger1	= Time = GetHitVar(slidetime)
trigger2	= HitOver
x			= 0

[State 151, CtrlSet]
type		= CtrlSet
trigger1	= Time = GetHitVar(ctrltime)
value		= 1

[State 151, Hi to Lo]
type		= StateTypeSet
triggerall	= StateType = S
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C
physics		= C

[State 151, Lo to Hi]
type		= StateTypeSet
triggerall	= StateType = C
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S
physics		= S

[State 151, End]
type		= ChangeState
trigger1	= HitOver
value		= 130
ctrl		= 1

[State 151, Branch End]
type		= ChangeState
triggerall	= Ctrl
trigger1	= StateType = C
value		= 153

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * IfElse( StateType = S, Const(movement.stand.friction), IfElse( StateType = C, Const(movement.crouch.friction), 1.0 ) ) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type		= C
movetype	= H
physics		= N
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 152, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 151

[State 152, End]
type		= ChangeState
trigger1	= HitShakeOver
value		= 151 + 2*((Var(25) & 256) || (Var(34) & 32))

[State 152, Hi to Lo]
type		= StateTypeSet
triggerall	= StateType = S
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C
physics		= C

[State 152, Lo to Hi]
type		= StateTypeSet
triggerall	= StateType = C
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S
physics		= S

[State 152, ForceFeedback]
type		= ForceFeedback
trigger1	= Time = 0
waveform	= square
time		= 4

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * IfElse( StateType = S, Const(movement.stand.friction), IfElse( StateType = C, Const(movement.crouch.friction), 1.0 ) ) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type		= C
movetype	= H
physics		= C
anim		= 151

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 153, HitVelSet]
type		= HitVelSet
triggerall	= !Ctrl
trigger1	= Time = 0
x			= 1

[State 153, VelSet]
type		= VelSet
trigger1	= Time = GetHitVar(slidetime)
trigger2	= HitOver
x			= 0

[State 153, CtrlSet]
type		= CtrlSet
trigger1	= Time = GetHitVar(ctrltime)
value		= 1

[State 153, Hi to Lo]
type		= StateTypeSet
triggerall	= StateType = S
trigger1	= ((Var(25) & 256) || (Var(34) & 32))
statetype	= C
physics		= C

[State 153, Lo to Hi]
type		= StateTypeSet
triggerall	= StateType = C
trigger1	= !((Var(25) & 256) || (Var(34) & 32))
statetype	= S
physics		= S

[State 153, End]
type		= ChangeState
trigger1	= HitOver
value		= 131
ctrl		= 1

[State 153, Branch End]
type		= ChangeState
triggerall	= Ctrl
trigger1	= StateType = S
value		= 151

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * IfElse( StateType = S, Const(movement.stand.friction), IfElse( StateType = C, Const(movement.crouch.friction), 1.0 ) ) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type		= A
movetype	= H
physics		= N
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 154, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 152

[State 154, End]
type		= ChangeState
trigger1	= HitShakeOver
value		= 155 ;AGUARDHIT2

[State 154, ForceFeedback]
type		= ForceFeedback
trigger1	= Time = 0
waveform	= square
time		= 4

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type		= A
movetype	= H
physics		= N
anim		= 152

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 155, HitVelSet]
type		= HitVelSet
triggerall	= !Ctrl
trigger1	= Time = 0
x			= 1
y			= 1

[State 155, VelAdd]
type		= VelAdd
trigger1	= 1
y			= Const(movement.yaccel)

[State 155, CtrlSet]
type		= CtrlSet
trigger1	= Time = GetHitVar(ctrltime)
value		= 1

[State 155, VarSet]
type		= VarSet
trigger1	= 1
sysvar(0)	= (pos y >= 0) && (vel y > 0)

[State 155, VelSet]
type		= VelSet
trigger1	= SysVar(0)
y			= 0

[State 155, PosSet]
type		= PosSet
trigger1	= SysVar(0)
y			= 0

[State 155, Air to Hi Player]
type		= ChangeState
triggerall	= SysVar(0)
triggerall	= !(Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= InGuardDist
value		= 130

[State 155, Air to Hi AI]
type		= ChangeState
triggerall	= SysVar(0)
triggerall	= (Var(1) & 32)
triggerall	= ((Var(25) & 1024) || (Var(34) & 16))
trigger1	= (InGuardDist || (Var(19) & 128) || (Var(19) & 256))
;trigger2	= NumEnemy = 1
;trigger2	= EnemyNear,NumProj
;trigger3	= NumEnemy >= 2
;trigger3	= EnemyNear(0),NumProj || EnemyNear(1),NumProj
value		= 130

[State 155, ON Ground]
type		= ChangeState
trigger1	= SysVar(0)
value		= 52

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;===============================================================================
; Definition of the Win/Lose/Intro Pause
;===============================================================================

;---------------------------------------------------------------------
; 勝利デモ
;---------------------------------------------------------------------
;------------------- 閉幕・初期化
[Statedef 160]
type		= S
anim		= 9999
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 160, Incorrect End]
type		= ChangeState
trigger1	= RoundState < 4
value		= 1
ignorehitpause	= 1

[State 160, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 160, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 160, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 160, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 160, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2991

[State 160, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2992

[State 160, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2993

[State 160, Explod]	; 画面白
type		= Explod
trigger1	= 1
anim		= 6601
id			= 6601
postype		= left
pos			= -160, -120
scale		= 2.0, 2.0
ownpal		= 1
sprpriority	= 20
bindtime	= 9999
removetime	= 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 160, Explod]	; 閉幕黒・上段
type		= Explod
trigger1	= 1
ID			= 6610
anim		= 6610
postype		= left
ontop		= 1
sprpriority	= 30
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 160, Explod]	; 閉幕黒・下段
type		= Explod
trigger1	= 1
ID			= 6611
anim		= 6611
postype		= left
ontop		= 1
sprpriority	= 30
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 160, StopSnd]
type		= StopSnd
trigger1	= 1
channel		= 0
ignorehitpause	= 1

[State 160, State Init End]
type		= ChangeState
trigger1	= 1
value		= 161
ignorehitpause	= 1

[State 160, State Init End]
type		= ChangeState
trigger1	= 1
value		= 161
ignorehitpause	= 1

[State 160, State Init End]
type		= ChangeState
trigger1	= 1
value		= 161
ignorehitpause	= 1

;------------------- 閉幕・実行
[Statedef 161]
type		= S
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 161, Incorrect End]
type		= ChangeState
trigger1	= RoundState < 4
value		= 1
ignorehitpause	= 1

; 効果開始はステコンより1F遅れるのため、事前にここでもやっておく
[State 161, BGPalFx]	; 背景白黒
type		= BGPalFx
trigger1	= 1
time		= 1
color		= 0
ignorehitpause	= 1

[State 161, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 161, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoFG
flag2		= NoBarDisplay
flag3		= NoMusic

[State 161, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= GlobalNoShadow

[State 161, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= RoundNotOver

[State 161, End]
type		= ChangeState
trigger1	= !NumExplod(6610)
value		= 162
ignorehitpause	= 1

[State 161, End]
type		= ChangeState
trigger1	= !NumExplod(6610)
value		= 162
ignorehitpause	= 1

[State 161, End]
type		= ChangeState
trigger1	= !NumExplod(6610)
value		= 162
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- デモ画面・初期化
[Statedef 162]
type		= S
anim		= 9999
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 162, Incorrect End]
type		= ChangeState
trigger1	= RoundState < 4
value		= 1
ignorehitpause	= 1

[State 162, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 162, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 6601

[State 162, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 162, Explod]	; 背景黒
type		= Explod
trigger1	= 1
ID			= 2994
anim		= 2994
postype		= left
pos			= 0, 0
ontop		= 1
bindtime	= 9999
removetime	= -1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 背景白
type		= Explod
trigger1	= 1
ID			= 2995
anim		= 2995
postype		= left
facing		= (TeamSide = 1) - (TeamSide != 1)
pos			= 160 - 152*((TeamSide = 1) - (TeamSide != 1)), 15
ontop		= 1
bindtime	= 9999
removetime	= -1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 背景青
type		= Explod
trigger1	= 1
ID			= 2996
anim		= 2996
postype		= left
facing		= (TeamSide = 1) - (TeamSide != 1)
pos			= 160 - 152*((TeamSide = 1) - (TeamSide != 1)), 15
ontop		= 1
bindtime	= 9999
removetime	= -1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; メッセージウィンドウ
type		= Explod
trigger1	= 1
ID			= 2997
anim		= 2997
postype		= left
pos			= 22, 172
ontop		= 1
bindtime	= 9999
removetime	= -1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= IfElse( Random<1000*3/18.0, 6400, IfElse(Random<1000*5/15.0, 6410, 6420 + 10*(Random<1000*5/10.0)) )
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= Var(0) = 6400
var(0)		= Var(0) + Random%3
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= Var(0) = 6410
var(0)		= Var(0) + Random%5
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= Var(0) = 6420
var(0)		= Var(0) + Random%5
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= Var(0) = 6430
var(0)		= Var(0) + Random%5
ignorehitpause	= 1

[State 162, Explod]	; 台詞
type		= Explod
trigger1	= 1
ID			= 6400
anim		= Var(0)
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removetime	= -1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6502
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6503
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6504
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6505
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6506
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6507
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6508
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6509
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6510
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6511
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6512
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6513
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6514
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6515
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6520
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6521
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6522
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6523
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6524
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6525
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6526
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6527
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6528
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6529
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6530
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6531
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6532
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6533
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6534
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, Explod]	; 台詞隠し
type		= Explod
trigger1	= 1
ID			= 6500
anim		= 6535
postype		= left
pos			= 33, 181
ontop		= 1
bindtime	= 9999
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= -1
ignorehitpause	= 1

; 試合終了後は、何故かヘルパーのコマンドは取得できない
[State 162, Branch]
type		= VarSet
trigger1	= !(Var(1) & 32)
trigger1	= (Command = "hold_x")
trigger2	= (Var(1) & 32)
trigger2	= (Var(25) & 2048)
var(0)		= 0
ignorehitpause	= 1

; 試合終了後は、何故かヘルパーのコマンドは取得できない
[State 162, Branch]
type		= VarSet
trigger1	= !(Var(1) & 32)
trigger1	= (Command = "hold_a")
trigger2	= (Var(1) & 32)
trigger2	= (Var(25) & 16384)
var(0)		= 1
ignorehitpause	= 1

; 試合終了後は、何故かヘルパーのコマンドは取得できない
[State 162, Branch]
type		= VarSet
trigger1	= !(Var(1) & 32)
trigger1	= (Command = "hold_y")
trigger2	= (Var(1) & 32)
trigger2	= (Var(25) & 4096)
var(0)		= 2
ignorehitpause	= 1

; 試合終了後は、何故かヘルパーのコマンドは取得できない
[State 162, Branch]
type		= VarSet
trigger1	= !(Var(1) & 32)
trigger1	= (Command = "hold_b")
trigger2	= (Var(1) & 32)
trigger2	= (Var(25) & 32768)
var(0)		= 3
ignorehitpause	= 1

[State 162, VarSet]
type		= VarSet
trigger1	= Var(0) < 0
var(0)		= Random % 4
ignorehitpause	= 1

[State 162, Explod]	; キャラ絵
type		= Explod
trigger1	= 1
ID			= 162
anim		= 6310*(Var(0)=0) + 6311*(Var(0)=1) + 6331*(Var(0)=2) + 6334*(Var(0)=3)
postype		= left
facing		= (TeamSide = 1) - (TeamSide != 1)
pos			= 160 + 79*((TeamSide = 1) - (TeamSide != 1)), 167
ontop		= 1
bindtime	= 9999
removetime	= -1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 162, StopSnd]
type		= StopSnd
trigger1	= 1
channel		= 0
ignorehitpause	= 1

[State 162, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2220, 0
volume		= 200
ignorehitpause	= 1

[State 162, State Init End]
type		= ChangeState
trigger1	= 1
value		= 163
ignorehitpause	= 1

[State 162, State Init End]
type		= ChangeState
trigger1	= 1
value		= 163
ignorehitpause	= 1

[State 162, State Init End]
type		= ChangeState
trigger1	= 1
value		= 163
ignorehitpause	= 1

;------------------- デモ画面・実行
[Statedef 163]
type		= S
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 163, Incorrect End]
type		= ChangeState
trigger1	= RoundState < 4
value		= 1
ignorehitpause	= 1

[State 163, BGPalFx]	; 背景白黒
type		= BGPalFx
trigger1	= 1
time		= 1
color		= 0
ignorehitpause	= 1

[State 163, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 163, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoFG
flag2		= NoBarDisplay
flag3		= NoMusic

[State 163, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= GlobalNoShadow

[State 163, AssertSpecial]
type		= AssertSpecial
trigger1	= (Var(4) - Var(59)) <= 371
flag		= RoundNotOver

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 2048
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 時間切れ負け
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 170]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 170, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 175
ignorehitpause	= 1

[State 170, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 170, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 170, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 170, VarSet]
type		= VarSet
trigger1	= RoundState >= 4
var(19)		= (Var(19) | 32768)
ignorehitpause	= 1

[State 170, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 170, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 199, 0
channel		= 0
volume		= 200
ignorehitpause	= 1

[State 170, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 170, State Init End]
type		= ChangeState
trigger1	= 1
value		= 171
ignorehitpause	= 1

[State 170, State Init End]
type		= ChangeState
trigger1	= 1
value		= 171
ignorehitpause	= 1

[State 170, State Init End]
type		= ChangeState
trigger1	= 1
value		= 171
ignorehitpause	= 1

;------------------- 実行
[Statedef 171]
type		= S
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 171, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 171, 3]
type		= AssertSpecial
trigger1	= (Var(4) - Var(59)) <= 180
flag		= RoundNotOver

[State 171, End]
type		= ChangeState
triggerall	= (0 < RoundState && RoundState <= 2) && Alive
trigger1	= AnimTime >= 0
value		= 1

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 時間切れ引き分け
;---------------------------------------------------------------------
[Statedef 175]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 175, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 175
ignorehitpause	= 1

[State 175, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 175, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 175, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 175, VarSet]
type		= VarSet
trigger1	= RoundState >= 4
var(19)		= (Var(19) | 32768)
ignorehitpause	= 1

[State 175, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 175, State Init End]
type		= ChangeState
trigger1	= 1
value		= 170
ignorehitpause	= 1

[State 175, State Init End]
type		= ChangeState
trigger1	= 1
value		= 170
ignorehitpause	= 1

[State 175, State Init End]
type		= ChangeState
trigger1	= 1
value		= 170
ignorehitpause	= 1

;---------------------------------------------------------------------
; 勝利イントロ・分岐
;---------------------------------------------------------------------
[Statedef 180]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 180, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 180
ignorehitpause	= 1

[State 180, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 180, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 180, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 180, VarSet]
type		= VarSet
trigger1	= RoundState >= 4
var(19)		= (Var(19) | 32768)
ignorehitpause	= 1

[State 180, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 180, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= 0
ignorehitpause	= 1

[State 180, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

; 試合終了後は、何故かヘルパーのコマンドは取得できない
[State 180, Branch]
type		= VarSet
trigger1	= !(Var(1) & 32)
trigger1	= (Command = "hold_x")
trigger2	= (Var(1) & 32)
trigger2	= (Var(25) & 2048)
var(0)		= 181
ignorehitpause	= 1

; 試合終了後は、何故かヘルパーのコマンドは取得できない
[State 180, Branch]
type		= VarSet
trigger1	= !(Var(1) & 32)
trigger1	= (Command = "hold_a")
trigger2	= (Var(1) & 32)
trigger2	= (Var(25) & 16384)
var(0)		= 183
ignorehitpause	= 1

[State 180, Random Branch]
type		= VarSet
trigger1	= !Var(0)
var(0)		= IfElse( Random < 500, 181, 183 )
ignorehitpause	= 1

[State 180, State Init End]
type		= ChangeState
trigger1	= Var(0)
value		= Var(0)
ignorehitpause	= 1

[State 180, State Init End]
type		= ChangeState
trigger1	= Var(0)
value		= Var(0)
ignorehitpause	= 1

[State 180, State Init End]
type		= ChangeState
trigger1	= Var(0)
value		= Var(0)
ignorehitpause	= 1

;---------------------------------------------------------------------
; 勝利1(目がキラキラ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 181]
type		= S
anim		= 180
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 181, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 180
ignorehitpause	= 1

[State 181, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 181, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 181, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 181, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 181, State Init End]
type		= ChangeState
trigger1	= 1
value		= 182
ignorehitpause	= 1

[State 181, State Init End]
type		= ChangeState
trigger1	= 1
value		= 182
ignorehitpause	= 1

[State 181, State Init End]
type		= ChangeState
trigger1	= 1
value		= 182
ignorehitpause	= 1

;------------------- 実行
[Statedef 182]
type		= S
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 182, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 182, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 6
value		= 180, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 182, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 10
value		= 180, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 182, Explod]	; キラキラ
type		= Explod
trigger1	= AnimElem = 10
trigger2	= AnimElem = 18
ID			= 2991
anim		= 2991
pos			= 0, 0
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 0
bindtime	= 1
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 182, Win Intro Check Init]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 182, Win Intro Check]
type		= VarSet
triggerall	= RoundState >= 4
triggerall	= MatchOver
trigger1	= !NumPartner
trigger2	= !Partner,Alive
var(58)		= 1
ignorehitpause	= 1

[State 182, Win Pose Time]
type		= VarSet
trigger1	= 1
var(57)		= 250
ignorehitpause	= 1

[State 182, Fade Time]
type		= VarSet
trigger1	= 1
var(56)		= 30
ignorehitpause	= 1

[State 182, Now Fade Timer Count]
type		= VarSet
trigger1	= 1
var(55)		= !!Var(58) * ((Var(4) - Var(59)) > Var(57)) * ((Var(4) - Var(59)) - Var(57))
ignorehitpause	= 1

[State 182, AssertSpecial]
type		= AssertSpecial
trigger1	= Var(58)
trigger2	= (Var(4) - Var(59)) <= Var(57)
flag		= RoundNotOver

[State 182, AssertSpecial]
type		= AssertSpecial
trigger1	= Var(55)
flag		= NoFG
flag2		= NoBarDisplay

[State 182, Explod]	; 画面白
type		= Explod
trigger1	= Var(55) = 1
anim		= 6601
id			= 6601
postype		= left
pos			= -160, -120
scale		= 2.0, 2.0
ownpal		= 1
sprpriority	= 20
bindtime	= 9999
removetime	= Var(56)
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 182, ModifyExplod]
type		= ModifyExplod
triggerall	= NumExplod(6601)
trigger1	= Var(55) && Var(55) <= Var(56)
ID			= 6601
trans		= AddAlpha
alpha		= 256*Var(55)/Var(56), 256

[State 182, Branch]
type		= ChangeState
trigger1	= Var(55) > Var(56)
value		= 160

[State 182, End]
type		= ChangeState
triggerall	= (0 < RoundState && RoundState <= 2) && Alive
trigger1	= AnimTime >= 0
value		= 1

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 2048
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 勝利2(もじもじ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 183]
type		= S
anim		= 181
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 183, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 181
ignorehitpause	= 1

[State 183, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 183, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 183, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 183, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 183, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= BackEdgeDist
ignorehitpause	= 1

[State 183, VarSet]
type		= VarSet
trigger1	= Var(0) < 0
var(0)		= 320 + Var(0)
ignorehitpause	= 1

[State 183, VarSet]
type		= VarSet
trigger1	= 1
var(5)		= Floor( (Var(0) + (55 + 13)*Const(size.xscale)) / (2.0*IfElse(Const(size.xscale) < 0.01, 0.01, Const(size.xscale))) )
ignorehitpause	= 1

[State 183, Explod]	; 犬移動
type		= Explod
trigger1	= 1
ID			= 2992
anim		= 2992
removetime	= Var(5)
postype		= p1
pos			= Floor(-(Var(0) + 55 * Const(size.xscale))), -Floor(Pos Y)
scale		= Const(size.xscale), Const(size.yscale)
vel			= 2.0*Const(size.xscale), 0.0
ownpal		= 1
sprpriority	= 2
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 183, State Init End]
type		= ChangeState
trigger1	= 1
value		= 184
ignorehitpause	= 1

[State 183, State Init End]
type		= ChangeState
trigger1	= 1
value		= 184
ignorehitpause	= 1

[State 183, State Init End]
type		= ChangeState
trigger1	= 1
value		= 184
ignorehitpause	= 1

;------------------- 実行
[Statedef 184]
type		= S
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 184, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 184, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= 0

[State 184, VarSet]
type		= VarSet
triggerall	= NumExplod(2992)
triggerall	= !NumExplod(2993)
trigger1	= (Var(4) - Var(59)) = Var(5)
var(0)		= 1

[State 184, VarSet]
type		= VarSet
trigger1	= Var(0)
var(5)		= (Var(4) - Var(59)) + 41

[State 184, Explod]	; 吼える犬
type		= Explod
trigger1	= Var(0)
ID			= 2993
anim		= 2993
postype		= p1
pos			= Floor(13 * Const(size.xscale)), -Floor(Pos Y)
scale		= Const(size.xscale), Const(size.yscale)
ownpal		= 1
sprpriority	= 2
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 184, PlaySnd]
type		= PlaySnd
triggerall	= NumExplod(2993)
trigger1	= (Var(4) - Var(59)) = Var(5)
value		= 2210, 0

[State 184, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 4
value		= 181, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 184, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 16
value		= 181, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 184, Win Intro Check Init]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 184, Win Intro Check]
type		= VarSet
triggerall	= RoundState >= 4
triggerall	= MatchOver
trigger1	= !NumPartner
trigger2	= !Partner,Alive
var(58)		= 1
ignorehitpause	= 1

[State 184, Win Pose Time]
type		= VarSet
trigger1	= 1
var(57)		= 270
ignorehitpause	= 1

[State 184, Fade Time]
type		= VarSet
trigger1	= 1
var(56)		= 30
ignorehitpause	= 1

[State 184, Now Fade Timer Count]
type		= VarSet
trigger1	= 1
var(55)		= !!Var(58) * ((Var(4) - Var(59)) > Var(57)) * ((Var(4) - Var(59)) - Var(57))
ignorehitpause	= 1

[State 184, AssertSpecial]
type		= AssertSpecial
trigger1	= Var(58)
trigger2	= (Var(4) - Var(59)) <= Var(57)
flag		= RoundNotOver

[State 184, AssertSpecial]
type		= AssertSpecial
trigger1	= Var(55)
flag		= NoFG
flag2		= NoBarDisplay

[State 184, Explod]	; 画面白
type		= Explod
trigger1	= Var(55) = 1
anim		= 6601
id			= 6601
postype		= left
pos			= -160, -120
scale		= 2.0, 2.0
ownpal		= 1
sprpriority	= 20
bindtime	= 9999
removetime	= Var(56)
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 184, ModifyExplod]
type		= ModifyExplod
triggerall	= NumExplod(6601)
trigger1	= Var(55) && Var(55) <= Var(56)
ID			= 6601
trans		= AddAlpha
alpha		= 256*Var(55)/Var(56), 256

[State 184, Branch]
type		= ChangeState
trigger1	= Var(55) > Var(56)
value		= 160

[State 184, End]
type		= ChangeState
triggerall	= (0 < RoundState && RoundState <= 2) && Alive
trigger1	= AnimTime >= 0
value		= 1

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 2048
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 登場イントロ・分岐
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 190]
type		= S
movetype	= I
physics		= N
anim		= 190
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 190, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 190, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 190, State Init End]
type		= ChangeState
trigger1	= 1
value		= 191

;------------------- 実行
;------------------- 条件分岐
[Statedef 191]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 191, AssertSpecial]
type		= AssertSpecial
triggerall	= RoundState < 2
trigger1	= 1
flag		= Intro

[State 191, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= 0

[State 191, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 191, Branch]
type		= VarSet
triggerall	= (Var(4) - Var(59)) > 0
trigger1	= (Var(25) & 4096)
var(0)		= 194

[State 191, Branch]
type		= VarSet
triggerall	= (Var(4) - Var(59)) > 0
trigger1	= (Var(25) & 16384)
var(0)		= 193

[State 191, Branch]
type		= VarSet
triggerall	= (Var(4) - Var(59)) > 0
trigger1	= (Var(25) & 2048)
var(0)		= 192

[State 191, Random Branch]
type		= VarSet
triggerall	= (Var(4) - Var(59)) > 0
trigger1	= !Var(0)
var(0)		= IfElse( Random < 333, 192, IfElse(Random < 500, 193, 194) )

[State 191, ChangeAnim]
type		= ChangeAnim
trigger1	= Var(0)
value		= Var(0) - 2

[State 191, Timer Reset]
type		= VarSet
trigger1	= Var(0)
var(4)		= Var(59)

[State 191, State Init End]
type		= ChangeState
trigger1	= Var(0)
value		= Var(0)

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 登場1(高見盛)
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 192]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 192, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 192, 4]
type		= AssertSpecial
triggerall	= RoundState < 2
trigger1	= (Var(4) - Var(59)) <= 280
flag		= Intro

[State 192, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 3
value		= 2000, 5

[State 192, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 8
value		= 2000, 6

[State 192, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 14
value		= 2040, 1

[State 192, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 18
value		= 2040, 1

[State 192, End]
type		= ChangeState
triggerall	= (Var(19) & 131072)
trigger1	= AnimTime >= 0
value		= 1

[State 192, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 0

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 登場2(四股)
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 193]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 193, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 193, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 12
value		= 191, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 193, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 24
value		= 191, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 193, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 24
value		= 2082, 0

[State 193, Explod]	; 地震波動
type		= Explod
trigger1	= AnimElem = 24
anim		= 2310
pos			= Floor(-35 * Const(size.xscale)), 0
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 0
bindtime	= 1
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 193, 4]
type		= AssertSpecial
triggerall	= RoundState < 2
trigger1	= (Var(4) - Var(59)) <= 280
flag		= Intro

[State 193, End]
type		= ChangeState
triggerall	= (Var(19) & 131072)
trigger1	= AnimTime >= 0
value		= 1

[State 193, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 0

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 登場3(塩)
;---------------------------------------------------------------------
;------------------- 実行
[Statedef 194]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 194, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 194, PlaySnd]
type		= PlaySnd
trigger1	= (Var(4) - Var(59)) = 52
value		= 192, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 194, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5
value		= 192, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 194, Explod]	; 塩
type		= Explod
trigger1	= AnimElem = 5
anim		= 2990
pos			= 0, 0
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 194, 4]
type		= AssertSpecial
triggerall	= RoundState < 2
trigger1	= (Var(4) - Var(59)) <= 200
flag		= Intro

[State 194, End]
type		= ChangeState
triggerall	= (Var(19) & 131072)
trigger1	= AnimTime >= 0
value		= 1

[State 194, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 0

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 挑発
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 195]
type		= S
movetype	= I
physics		= N
anim		= 195
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 195, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 195, (Random >= 500)
channel		= 0
volume		= 200

[State 195, State Init End]
type		= ChangeState
trigger1	= 1
value		= 196

;------------------- 実行
[Statedef 196]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 196, CtrlSet]
type		= CtrlSet
trigger1	= AnimElemTime(1) > 3
value		= 1

[State 196, AssertSpecial]
type		= AssertSpecial
trigger1	= Ctrl
flag		= nostandguard
flag2		= nocrouchguard
flag3		= noairguard

[State 196, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;=====================================================================
; 特殊動作
;=====================================================================

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作(前)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4000]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4000
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4000, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4000, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4001

;------------------- 実行
[Statedef 4001]
type		= U
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4001, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4001, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 4001, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4001, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 4001, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 4001, VelSet]
type		= VelSet
trigger1	= AnimElem = 3
x			= 6.00*Const(size.xscale)

[State 4001, VelSet]
type		= VelSet
trigger1	= AnimElem = 8
x			= 0

[State 4001, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 4001, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A

[State 4001, Turn]
type		= Turn
trigger1	= AnimTime >= 0 && P2Dist X < 0

[State 4001, End]
type		= ChangeState
triggerall	= StateType = A
trigger1 	= AnimTime >= 0
value		= 47

[State 4001, End]
type		= ChangeState
trigger1 	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 緊急回避動作(前)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4050]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4000
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4050, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4050, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4051

;------------------- 実行
[Statedef 4051]
type		= U
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4051, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(2) < 0
value		= SCA
ignorehitpause	= 1

[State 4051, NotHit]
type		= NotHitBy
trigger1	= 0 <= AnimElemTime(2) && AnimElemTime(8) < 0
value		= , AA, AP
ignorehitpause	= 1

[State 4051, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 4051, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4051, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 4051, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 4051, VelSet]
type		= VelSet
trigger1	= AnimElem = 3
x			= (5.00 + 2.5 * ((Var(1) & 16) != 0))*Const(size.xscale)

[State 4051, VelSet]
type		= VelSet
trigger1	= AnimElem = 8
x			= 0

[State 4051, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 4051, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A

[State 4051, Turn]
type		= Turn
trigger1	= AnimTime >= 0 && P2Dist X < 0

[State 4051, End]
type		= ChangeState
triggerall	= StateType = A
trigger1 	= AnimTime >= 0
value		= 47

[State 4051, End]
type		= ChangeState
trigger1 	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作(後)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4070]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4050
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4070, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4070, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4071

;------------------- 実行
[Statedef 4071]
type		= U
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4071, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4071, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 4071, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4071, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 4071, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 4071, VelSet]
type		= VelSet
trigger1	= AnimElem = 4
x			= -6.00*Const(size.xscale)

[State 4071, VelSet]
type		= VelSet
trigger1	= AnimElem = 9
x			= 0

[State 4071, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 4071, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A

[State 4071, Turn]
type		= Turn
trigger1	= AnimTime >= 0 && P2Dist X < 0

[State 4071, End]
type		= ChangeState
triggerall	= StateType = A
trigger1 	= AnimTime >= 0
value		= 47

[State 4071, End]
type		= ChangeState
trigger1 	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 緊急回避動作(後)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4080]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4050
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4080, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4080, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4081

;------------------- 実行
[Statedef 4081]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4081, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(3) < 0
value		= SCA
ignorehitpause	= 1

[State 4081, NotHit]
type		= NotHitBy
trigger1	= 0 <= AnimElemTime(3) && AnimElemTime(9) < 0
value		= , AA, AP
ignorehitpause	= 1

[State 4081, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 4081, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4081, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 4081, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 4081, VelSet]
type		= VelSet
trigger1	= AnimElem = 4
x			= -5.00*Const(size.xscale)

[State 4081, VelSet]
type		= VelSet
trigger1	= AnimElem = 9
x			= 0

[State 4081, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 4081, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A

[State 4081, Turn]
type		= Turn
trigger1	= AnimTime >= 0 && P2Dist X < 0

[State 4081, End]
type		= ChangeState
triggerall	= StateType = A
trigger1 	= AnimTime >= 0
value		= 47

[State 4081, End]
type		= ChangeState
trigger1 	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作(中)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4090]
type		= U
movetype	= U
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4090, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4090, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 4090, Branch Reset]
type		= VarSet
trigger1	= 1
var(5)		= 0
ignorehitpause	= 1

[State 4090, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing < 0) && (Var(25) & 524288)
trigger2	= (Facing >= 0) && (Var(25) & 262144)
var(5)		= 4000
ignorehitpause	= 1

[State 4090, Branch]
type		= VarSet
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
var(5)		= 4070
ignorehitpause	= 1

[State 4090, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4091
ignorehitpause	= 1

[State 4090, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4091
ignorehitpause	= 1

[State 4090, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4091
ignorehitpause	= 1

;------------------- 待機
[Statedef 4091]
type		= U
movetype	= U
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4091, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4091, State Init End]
type		= ChangeState
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= 4092

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 255
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 分岐・初期化・中
[Statedef 4092]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4200
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4092, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4092, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= -IfElse( (Var(32) & 7) >= 4, 1000, 500 )
ignorehitpause	= 1

[State 4092, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4092, GC Reset]
type		= VarSet
trigger1	= 1
var(19)		= (Var(19) | 124) - 124

[State 4092, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= 1
time		= 10
movetime	= 8
anim		= S2300
pos			= 0, -40 * Const(size.yscale)
poweradd	= Var(57)

[State 4092, EnvColor]
type		= EnvColor
trigger1	= 1
value		= 248, 248, 248
time		= 2
under		= 1

[State 4092, AfterImage]
type			= AfterImage
trigger1		= 1
length			= 5
timegap			= 2
framegap		= 2
palcontrast		= 160, 160, 255
palpostbright	= -80, -80, -80
trans			= add1
time			= 18

[State 4092, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 4000, 1
channel		= 0
volume		= 200

[State 4092, Branch]
type		= ChangeState
trigger1	= Var(5)
value		= Var(5)

[State 4092, Turn]
type		= Turn
trigger1	= P2Dist X < 0

[State 4092, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4093

;------------------- 実行・中
[Statedef 4093]
type		= U
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4093, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4093, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 4093, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4093, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 4093, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 4093, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 4093, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A

[State 4093, Turn]
type		= Turn
trigger1	= AnimTime >= 0 && P2Dist X < 0

[State 4093, End]
type		= ChangeState
triggerall	= StateType != S
trigger1 	= AnimTime >= 0
value		= 47

[State 4093, End]
type		= ChangeState
trigger1 	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 緊急回避動作(中)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4095]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4200
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4095, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4095, VarSet]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 16) - 16 * !((Var(2) & 131071) = [101, 102])

[State 4095, Branch Reset]
type		= VarSet
trigger1	= 1
var(5)		= 0

[State 4095, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing < 0) && (Var(25) & 524288)
trigger2	= (Facing >= 0) && (Var(25) & 262144)
var(5)		= 4050

[State 4095, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
var(5)		= 4080

[State 4095, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4096

;------------------- 初期化・分岐
[Statedef 4096]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4200
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4096, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4096, AfterImage]
type			= AfterImage
trigger1		= 1
length			= 5
timegap			= 2
framegap		= 2
palcontrast		= 160, 160, 160
palpostbright	= -32, -32, -32
trans			= add1
time			= 18

[State 4096, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 4000, 0
channel		= 0
volume		= 200

[State 4096, Branch]
type		= ChangeState
trigger1	= Var(5)
value		= Var(5)

[State 4096, Turn]
type		= Turn
trigger1	= P2Dist X < 0

[State 4096, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4097

;------------------- 実行
[Statedef 4097]
type		= U
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4097, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(2) < 0
value		= SCA
ignorehitpause	= 1

[State 4097, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(2) >= 0
value		= , AA, AP
ignorehitpause	= 1

[State 4097, Gravity]
type		= Gravity
triggerall	= Pos Y < 0
trigger1	= AnimElemTime(1) > 0

[State 4097, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4097, VelSet]
type		= VelSet
trigger1	= Pos Y >= 0
y			= 0

[State 4097, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 4097, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 4097, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A

[State 4097, Turn]
type		= Turn
trigger1	= AnimTime >= 0 && P2Dist X < 0

[State 4097, End]
type		= ChangeState
triggerall	= StateType != S
trigger1 	= AnimTime >= 0
value		= 47

[State 4097, End]
type		= ChangeState
trigger1 	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 攻撃緊急回避動作(中)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4098]
type		= U
movetype	= U
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4098, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4098, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4098, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4098, VarSet]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 16) - 16
ignorehitpause	= 1

[State 4098, VarSet]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 16) - 16
ignorehitpause	= 1

[State 4098, VarSet]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 16) - 16
ignorehitpause	= 1

[State 4098, Branch Reset]
type		= VarSet
trigger1	= 1
var(5)		= 0
ignorehitpause	= 1

[State 4098, Branch Reset]
type		= VarSet
trigger1	= 1
var(5)		= 0
ignorehitpause	= 1

[State 4098, Branch Reset]
type		= VarSet
trigger1	= 1
var(5)		= 0
ignorehitpause	= 1

[State 4098, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing < 0) && (Var(25) & 524288)
trigger2	= (Facing >= 0) && (Var(25) & 262144)
var(5)		= 4050
ignorehitpause	= 1

[State 4098, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing < 0) && (Var(25) & 524288)
trigger2	= (Facing >= 0) && (Var(25) & 262144)
var(5)		= 4050
ignorehitpause	= 1

[State 4098, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing < 0) && (Var(25) & 524288)
trigger2	= (Facing >= 0) && (Var(25) & 262144)
var(5)		= 4050
ignorehitpause	= 1

[State 4098, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
var(5)		= 4080
ignorehitpause	= 1

[State 4098, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
var(5)		= 4080
ignorehitpause	= 1

[State 4098, Branch Set]
type		= VarSet
triggerall	= !Var(5)
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
var(5)		= 4080
ignorehitpause	= 1

[State 4098, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 4098, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 4098, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 4098, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4099
ignorehitpause	= 1

[State 4098, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4099
ignorehitpause	= 1

[State 4098, State Init End]
type		= ChangeState
trigger1 	= 1
value		= 4099
ignorehitpause	= 1

;------------------- 待機・中
[Statedef 4099]
type		= U
movetype	= U
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)
ignorehitpause	= 1

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)
ignorehitpause	= 1

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)
ignorehitpause	= 1

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)
ignorehitpause	= 1

[State 4099, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4099, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4099, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4099, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= -IfElse( (Var(32) & 7) >= 4, 500, 400 )
ignorehitpause	= 1

[State 4099, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4099, SuperPause]
type		= SuperPause
triggerall	= !(Var(18) & 528482304)
triggerall	= RoundState < 3
trigger1	= 1
time		= 13
movetime	= 13
anim		= S2300
pos			= 0, -40 * Const(size.yscale)
poweradd	= Var(57)

[State 4099, State Init End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= 1
value		= 4096

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; パワー溜め(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4100]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4100
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4100, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 4100, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= Random % 3

[State 4100, PlaySnd]
type		= PlaySnd
trigger1	= Var(0) = 0
value		= 180, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 4100, PlaySnd]
type		= PlaySnd
trigger1	= Var(0) = 1
value		= 191, 0 + (Random >= 500)
channel		= 0
volume		= 200

[State 4100, PlaySnd]
type		= PlaySnd
trigger1	= Var(0) = 2
value		= 200, 0 + (Random % 4)
channel		= 0
volume		= 200

[State 4100, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2090, 2
channel		= 1

[State 4100, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4101

;------------------- 実行
[Statedef 4101]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4101, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 4102

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; パワー溜め中
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4102]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4101
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4102, conversion]
type		= VarAdd
trigger1	= 1
var(4)		= -Var(59)

[State 4102, VarSet]	; パワーゲージ用
type		= VarSet
trigger1	= 1
fvar(0)		= 1.0

[State 4102, VarSet]	; パワーゲージ用
type		= VarSet
trigger1	= Const(data.power) > 0
fvar(0)		= IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power))

[State 4102, VarSet]	; パワーゲージ用
type		= VarSet
trigger1	= 1
var(0)		= IfElse( 31.0 * FVar(5) * FVar(0) < 1, 1, IfElse(31.0 * FVar(5) * FVar(0) > 32767, 32767, Floor(31.0 * FVar(5) * FVar(0))) )

[State 4102, VarSet]	; パワーゲージ用
type		= VarSet
trigger1	= !(Var(25) & 256)
var(4)		= IfElse( (Var(4) & 32767) + Var(0) < 32767, Var(4) + Var(0), (Var(4) | 32767) )

[State 4102, VarAdd]	; HP用
type		= VarAdd
triggerall	= (Var(4) & (32768*255)) <= (32768*200)
trigger1	= (Var(25) & 256)
var(4)		= 32768*(35 + 25*((Var(32) & 7) < 4) + 25*((Var(32) & 7) < 3) + 15*((Var(32) & 7) < 2))

[State 4102, resume]
type		= VarAdd
trigger1	= 1
var(4)		= Var(59)

[State 4102, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4103

;------------------- 実行
[Statedef 4103]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4103, Loop End]
type		= ChangeState
trigger1	= !( (Var(25) & 2048) && (Var(25) & 16384) && (Var(25) & 4096) )
trigger2	= RoundState > 2
value		= 4104

[State 4103, Explod]
type		= Explod
triggerall	= !(Var(25) & 256)
trigger1	= !NumExplod(2330)
anim		= 2330
ID			= 2330
pos			= 0, 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 9999
ownpal		= 1
removeongethit	= 1
ignorehitpause	= 1

[State 4103, Explod]
type		= Explod
triggerall	= (Var(25) & 256)
trigger1	= !NumExplod(2331)
anim		= 2331
ID			= 2331
pos			= 0, 0
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 9999
ownpal		= 1
removeongethit	= 1
ignorehitpause	= 1

[State 4103, Loop]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 4102

[State 4103, conversion]
type		= VarAdd
trigger1	= 1
var(4)		= -Var(59)

[State 4103, PowerAdd]
type		= PowerAdd
trigger1	= (Var(4) & 32767)
value		= (Var(4) & 32767) / 10

[State 4103, VarSet]	; パワーゲージ用
type		= VarSet
trigger1	= (Var(4) & 32767)
var(4)		= (Var(4) | 32767) - 32767 + ((Var(4) & 32767) % 10)

[State 4103, LifeAdd]
type		= LifeAdd
trigger1	= (Var(4) & (32768*255))
value		= (Var(4) & (32768*255)) / (32768*100)
absolute	= 1

[State 4103, VarSet2]	; HP用
type		= VarSet
trigger1	= (Var(4) & (32768*255))
var(4)		= (Var(4) | (32768*255)) - (32768*255) + ((Var(4) & (32768*255)) % (32768*100))

[State 4103, resume]
type		= VarAdd
trigger1	= 1
var(4)		= Var(59)

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; パワー溜め(終了)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4104]
type		= S
movetype	= I
physics		= N
ctrl		= 0
anim		= 4102
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4104, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4105

;------------------- 実行
[Statedef 4105]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4105, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ガードキャンセル吹っ飛ばし攻撃
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4300]
type		= U
movetype	= U
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4300, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4300, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 4300, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4301
ignorehitpause	= 1

[State 4300, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4301
ignorehitpause	= 1

[State 4300, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4301
ignorehitpause	= 1

;------------------- 待機
[Statedef 4301]
type		= U
movetype	= U
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4301, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4301, ChangeAnim]
type		= ChangeAnim
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= 4300

[State 4301, Turn]
type		= Turn
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
trigger1	= P2Dist X < 0

[State 4301, VelSet]
type		= VelSet
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
x			= 0
y			= 0

[State 4301, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= -IfElse( (Var(32) & 7) >= 4, 1000, 500 )
ignorehitpause	= 1

[State 4301, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4301, PowerAdd]
type		= PowerAdd
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= Var(57)

[State 4301, StateTypeSet]
type		= StateTypeSet
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
statetype	= S
movetype	= A

[State 4301, VarSet]
type		= VarSet
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
var(19)		= (Var(19) | 124) - 124

[State 4301, AfterImage]
type			= AfterImage
trigger1		= HitShakeOver || (Var(4) - Var(59)) >= 120
length			= 5
timegap			= 2
framegap		= 2
palcontrast		= 160, 160, 255
palpostbright	= -80, -80, -80
trans			= add1
time			= 12

[State 4301, State Init End]
type		= ChangeState
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= 4302

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 実行
[Statedef 4302]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 4302, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(12) < 0
value		= SCA
ignorehitpause	= 1

[State 4302, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(8) && AnimElemTime(12) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 4302, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 5
value		= 250, 1
channel		= 0
volume		= 200

[State 4302, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
value		= 2040, 2

[State 4302, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElemTime(8) = -10
time		= 10
movetime	= 10
anim		= S2300
pos			= 10, -20 * Const(size.yscale)
p2defmul	= 1

[State 4302, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 4302, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 40 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4302, Hit]
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= 1
affectteam					= E
attr						= S, NA
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
kill						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-44 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(12)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
x			= 2*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 8*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 8*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
x			= 2*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 8
x			= 8*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 14
x			= 8*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 15
x			= 6*Const(size.xscale)

[State 4302, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 16
x			= 5*Const(size.xscale)

[State 4302, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ガードキャンセルジャンプ吹っ飛ばし攻撃
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4350]
type		= U
movetype	= U
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4350, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4350, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 4350, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4351
ignorehitpause	= 1

[State 4350, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4351
ignorehitpause	= 1

[State 4350, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4351
ignorehitpause	= 1

;------------------- 待機
[Statedef 4351]
type		= U
movetype	= U
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4351, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4351, ChangeAnim]
type		= ChangeAnim
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= 4350

[State 4351, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= -IfElse( (Var(32) & 7) >= 4, 1000, 500 )
ignorehitpause	= 1

[State 4351, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4351, PowerAdd]
type		= PowerAdd
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= Var(57)

[State 4351, StateTypeSet]
type		= StateTypeSet
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
statetype	= A
movetype	= A

[State 4351, VarSet]
type		= VarSet
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
var(19)		= (Var(19) | 124) - 124

[State 4351, AfterImage]
type			= AfterImage
trigger1		= HitShakeOver || (Var(4) - Var(59)) >= 120
length			= 5
timegap			= 2
framegap		= 2
palcontrast		= 160, 160, 255
palpostbright	= -80, -80, -80
trans			= add1
time			= 12

[State 4351, State Init End]
type		= ChangeState
trigger1	= HitShakeOver || (Var(4) - Var(59)) >= 120
value		= 4352

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 実行
[Statedef 4352]
type		= A
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
trigger2	= -10 <= AnimElemTime(4) && AnimElemTime(4) <= 0
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)
trigger2	= -10 <= AnimElemTime(4) && AnimElemTime(4) <= 0

[State 4352, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(8) < 0
value		= SCA
ignorehitpause	= 1

[State 4352, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(4) && AnimElemTime(8) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 4352, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
value		= 250, 7
channel		= 0
volume		= 200

[State 4352, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
value		= 2040, 2

[State 4352, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElemTime(4) = -10
time		= 10
movetime	= 10
anim		= S2300
pos			= 0, -60 * Const(size.yscale)
p2defmul	= 1

[State 4352, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 4352, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 40 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4352, Hit]
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= 1
affectteam					= E
attr						= A, NA
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(8)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 4352, Gravity]
type		= Gravity
triggerall	= !(Var(18) & 528482304)
trigger1	= !(-10 <= AnimElemTime(4) && AnimElemTime(4) <= 0)

[State 4352, On Land]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= Pos Y + Vel Y >= 0
value		= 4355

[State 4352, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 47

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ガードキャンセルジャンプ吹っ飛ばし攻撃(着地硬直)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4355]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4355, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 4355

[State 4355, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 4355, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 4355, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 4355, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4356

;------------------- 実行
[Statedef 4356]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 4356, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; サイクバースト
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4500]
type		= A
movetype	= I
physics		= N
ctrl		= 0
anim		= 4500
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4500, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= I
physics		= N
ignorehitpause	= 1

[State 4500, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 4500
ignorehitpause	= 1

[State 4500, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 4500, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 4500, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= -2500
ignorehitpause	= 1

[State 4500, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 4500, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)
ignorehitpause	= 1

;------------------- スーパーポーズ解除で、20000が事前にMoveType=Aになっているためここで保持
[State 4500, Power Damage Init]
type		= VarSet
trigger1	= 1
var(23)		= Power + Var(59)
ignorehitpause	= 1

[State 4500, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4500, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4501
ignorehitpause	= 1

[State 4500, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4501
ignorehitpause	= 1

[State 4500, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4501
ignorehitpause	= 1

;------------------- 実行
[Statedef 4501]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4501, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4501, VarSet]	; 鋼体
type		= VarSet
trigger1	= (Var(18) & 1008) < (1008 / 63)
var(18)		= (Var(18) | 1008) - 1008 + 1008 / 63
ignorehitpause	= 1

[State 4501, VelAdd]
type		= VelAdd
trigger1	= 1
y			= .25

[State 4501, VelSet]
type		= VelSet
trigger1	= AnimElem = 1
y			= -3.75

[State 4501, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 1700, 0
channel		= 0
volume		= 200

[State 4501, Pause]
type		= Pause
triggerall	= RoundState < 3
trigger1	= AnimElem = 2
time		= 0
movetime	= 0

[State 4501, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElem = 2
time		= 28
movetime	= 0
anim		= -1
sound		= S2100, 4
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 4501, Explod]
type		= Explod
trigger1	= AnimElem = 2
anim		= 2712
ID			= 2712
pos			= 0, Floor(-70 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= 1
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 4501, PosSet]
type		= PosSet
triggerall	= AnimElemTime(4) > 0
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 4501, VelSet]
type		= VelSet
triggerall	= AnimElemTime(4) > 0
trigger1	= Pos Y >= 0
x			= 0
y			= 0

[State 4501, End]
type		= ChangeState
triggerall	= Pos Y < 0
trigger1	= AnimTime >= 0
value		= 48

[State 4501, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 立ちシールド
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4600]
type		= S
movetype	= I
physics		= N
anim		= 4600
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4600, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 4200, Random % 2
channel		= 0
volume		= 200

[State 4600, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2110, 0

[State 4600, Branch]
type		= ChangeState
trigger1	= (Var(25) & 256)
value		= 4610

[State 4600, Explod]
type		= Explod
trigger1	= 1
anim		= 2713
ID			= 2713
pos			= Floor(20 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= -1
ownpal		= 1
removeongethit	= 1

[State 4600, Explod]
type		= Explod
trigger1	= 1
anim		= 2721
ID			= 2721
pos			= Floor(20 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= 2
ownpal		= 1
removeongethit	= 1

[State 4600, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4601

[State 4600, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

;------------------- 実行
[Statedef 4601]
type		= S
movetype	= I
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4601, NotHit]
type		= NotHitBy
trigger1	= MoveHit
value		= SCA
ignorehitpause	= 1

[State 4601, Branch]
type		= ChangeState
trigger1	= MoveHit || HitCount || HitPauseTime
value		= 4605

[State 4601, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= AnimElemNo(0) = 1
reversal.attr	= SA, AA, AP
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 21 - !!(Helper(20000),Var(1) & 256)
sparkno			= -1
sparkxy			= Floor(10 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
;hitsound		= S0, 0
getpower		= 0, 0
givepower		= 0
numhits			= 0
guard.dist		= 0
hitflag			= P
ignorehitpause	= 1

[State 4601, HitOverride]
type		= HitOverride
trigger1	= AnimElemNo(0) = 1
time		= 1
attr		= SA, AA, AP
stateno		= 4604
slot		= 1
ignorehitpause	= 1

[State 4601, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimTime >= 0
ID			= 2713

[State 4601, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimTime >= 0
ID			= 2721

[State 4601, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 立ちシールド(成功・待機)
;---------------------------------------------------------------------
;------------------- やられ成功・初期化
[Statedef 4604]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4604, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= 1
time		= 20
movetime	= 20
anim		= -1
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 4604, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4605

;------------------- 通常・初期化
[Statedef 4605]
type		= S
movetype	= I
physics		= N
anim		= 4605
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4605, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 4605, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40

[State 4605, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 4605, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)

[State 4605, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2713

[State 4605, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2721

[State 4605, Explod]
type		= Explod
trigger1	= 1
anim		= 2717 + Random % 4
ID			= 2717
pos			= Floor(20 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
facing		= IfElse( Random < 500, 1, -1 )
vfacing		= IfElse( Random < 500, 1, -1 )
bindtime	= 9999
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 4605, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2110, 2

[State 4605, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4606

;------------------- 実行
[Statedef 4606]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4606, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4606, State Init End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 14
value		= 4607

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 255
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 立ちシールド(成功・終了)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4607]
type		= S
movetype	= I
physics		= N
anim		= 4605
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4607, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4608

;------------------- 実行
[Statedef 4608]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4608, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4608, Attack Correct]
type		= VarSet
trigger1	= 1
var(16)		= (Var(16) | 3840)

[State 4608, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 屈シールド
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4610]
type		= C
movetype	= I
physics		= N
anim		= 4610
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4610, Explod]
type		= Explod
trigger1	= 1
anim		= 2713
ID			= 2713
pos			= Floor(20 * Const(size.xscale)), Floor(-50 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= -1
ownpal		= 1
removeongethit	= 1

[State 4610, Explod]
type		= Explod
trigger1	= 1
anim		= 2721
ID			= 2721
pos			= Floor(20 * Const(size.xscale)), Floor(-50 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= 2
ownpal		= 1
removeongethit	= 1

[State 4610, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4611

[State 4610, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

;------------------- 実行
[Statedef 4611]
type		= C
movetype	= I
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4611, NotHit]
type		= NotHitBy
trigger1	= MoveHit
value		= SCA
ignorehitpause	= 1

[State 4611, Branch]
type		= ChangeState
trigger1	= MoveHit || HitCount || HitPauseTime
value		= 4615

[State 4611, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= AnimElemNo(0) = 1
reversal.attr	= C, AA, AP
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 21 - !!(Helper(20000),Var(1) & 256)
sparkno			= -1
sparkxy			= Floor(10 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
;hitsound		= S0, 0
getpower		= 0, 0
givepower		= 0
numhits			= 0
guard.dist		= 0
hitflag			= P
ignorehitpause	= 1

[State 4611, HitOverride]
type		= HitOverride
trigger1	= AnimElemNo(0) = 1
time		= 1
attr		= C, AA, AP
stateno		= 4614
slot		= 1
ignorehitpause	= 1

[State 4611, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimTime >= 0
ID			= 2713

[State 4611, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimTime >= 0
ID			= 2721

[State 4611, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 9

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 屈シールド(成功・待機)
;---------------------------------------------------------------------
;------------------- やられ成功・初期化
[Statedef 4614]
type		= C
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4614, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= 1
time		= 20
movetime	= 20
anim		= -1
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 4614, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4615

;------------------- 通常・初期化
[Statedef 4615]
type		= C
movetype	= I
physics		= N
anim		= 4615
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4615, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 4615, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40

[State 4615, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 4615, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)

[State 4615, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2713

[State 4615, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2721

[State 4615, Explod]
type		= Explod
trigger1	= 1
anim		= 2717 + Random % 4
ID			= 2717
pos			= Floor(20 * Const(size.xscale)), Floor(-50 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
facing		= IfElse( Random < 500, 1, -1 )
vfacing		= IfElse( Random < 500, 1, -1 )
bindtime	= 9999
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 4615, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2110, 2

[State 4615, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4616

;------------------- 実行
[Statedef 4616]
type		= C
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4616, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4616, State Init End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 14
value		= 4617

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 255
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 屈シールド(成功・終了)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4617]
type		= C
movetype	= I
physics		= N
anim		= 4615
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4617, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4618

;------------------- 実行
[Statedef 4618]
type		= C
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4618, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4618, Attack Correct]
type		= VarSet
trigger1	= 1
var(16)		= (Var(16) | 3840)

[State 4618, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 9

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中シールド
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4620]
type		= A
movetype	= I
physics		= N
anim		= 4620
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4620, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 4200, Random % 2
channel		= 0
volume		= 200

[State 4620, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2110, 0

[State 4620, Explod]
type		= Explod
trigger1	= 1
anim		= 2713
ID			= 2713
pos			= Floor(20 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= -1
ownpal		= 1
removeongethit	= 1

[State 4620, Explod]
type		= Explod
trigger1	= 1
anim		= 2721
ID			= 2721
pos			= Floor(20 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
bindtime	= 9999
sprpriority	= 2
ownpal		= 1
removeongethit	= 1

[State 4620, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4621

[State 4620, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

;------------------- 実行
[Statedef 4621]
type		= A
movetype	= I
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4621, NotHit]
type		= NotHitBy
trigger1	= MoveHit
value		= SCA
ignorehitpause	= 1

[State 4621, Branch]
type		= ChangeState
trigger1	= MoveHit || HitCount || HitPauseTime
value		= 4625

[State 4621, ReversalDef]
type			= ReversalDef
triggerall		= NumHelper(20000)
trigger1		= AnimElemNo(0) = 1
reversal.attr	= SCA, AA, AP
pausetime		= 1 * !(Helper(20000),Var(1) & 256), 21 - !!(Helper(20000),Var(1) & 256)
sparkno			= -1
sparkxy			= Floor(10 * Const(size.xscale)), Floor(-60 * Const(size.yscale))
;hitsound		= S0, 0
getpower		= 0, 0
givepower		= 0
numhits			= 0
guard.dist		= 0
hitflag			= P
ignorehitpause	= 1

[State 4621, HitOverride]
type		= HitOverride
trigger1	= AnimElemNo(0) = 1
time		= 1
attr		= SCA, AA, AP
stateno		= 4624
slot		= 1
ignorehitpause	= 1

[State 4621, Gravity]
type		= Gravity
trigger1	= AnimElemTime(1) > 0

[State 4621, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimTime >= 0
trigger2	= Pos Y + Vel Y >= 0
ID			= 2713

[State 4621, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimTime >= 0
trigger2	= Pos Y + Vel Y >= 0
ID			= 2721

[State 4621, On Land]
type		= ChangeState
trigger1	= Pos Y + Vel Y >= 0
value		= 4622

[State 4621, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 48

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 着地硬直・初期化
[Statedef 4622]
type		= S
movetype	= I
physics		= N
anim		= 4621
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4622, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 4622, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 4622, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4623

;------------------- 着地硬直・実行
[Statedef 4623]
type		= S
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4623, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中シールド(成功・待機)
;---------------------------------------------------------------------
;------------------- やられ成功・初期化
[Statedef 4624]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4624, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= 1
time		= 20
movetime	= 20
anim		= -1
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 4624, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4625

;------------------- 通常・初期化
[Statedef 4625]
type		= A
movetype	= I
physics		= N
anim		= 4625
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4625, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)
ignorehitpause	= 1

[State 4625, Get Power]
type		= VarSet
trigger1	= 1
var(57)		= 40

[State 4625, Get Power]
type		= VarSet
trigger1	= Const(data.power) > 0
var(57)		= Floor( Var(57) * FVar(5) * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 4625, PowerAdd]
type		= PowerAdd
trigger1	= 1
value		= Var(57)

[State 4625, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2713

[State 4625, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 2721

[State 4625, Explod]
type		= Explod
trigger1	= 1
anim		= 2717 + Random % 4
ID			= 2717
pos			= Floor(20 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
postype		= p1
scale		= Const(size.xscale), Const(size.yscale)
facing		= IfElse( Random < 500, 1, -1 )
vfacing		= IfElse( Random < 500, 1, -1 )
bindtime	= 9999
sprpriority	= 2
ownpal		= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 4625, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2110, 2

[State 4625, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4626

;------------------- 実行
[Statedef 4626]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4626, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4626, PosFreeze]
type		= PosFreeze
trigger1	= 1

[State 4626, State Init End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 14
value		= 4627

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 255
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中シールド(成功・終了)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 4627]
type		= A
movetype	= I
physics		= A
anim		= 4625
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4627, State Init End]
type		= ChangeState
trigger1	= 1
value		= 4628

;------------------- 実行
[Statedef 4628]
type		= A
movetype	= I
physics		= A
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 4628, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 4628, PosFreeze]
type		= PosFreeze
trigger1	= 1

[State 4628, Attack Correct]
type		= VarSet
trigger1	= 1
var(16)		= (Var(16) | 3840)

[State 4628, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 48

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= IfElse( HitPauseTime, Vel Y, Vel Y + Const(movement.yaccel) )
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type		= S
movetype	= H
physics		= N
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5000, StateTypeSet] ;State type gets set to aerial if getting hit up
type		= StateTypeSet
trigger1	= Time = 0
trigger1	= GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2	= Pos Y != 0
statetype	= A

[State 5000, ChangeAnim] ;Anim for HIT_LIGHT to HIT_HARD
type		= ChangeAnim
trigger1	= Time = 0
trigger1	= GetHitVar(animtype) != [3,5]
value		= IfElse( (GetHitVar(groundtype) = 1), 5000, 5010 ) + GetHitVar(animtype)

[State 5000, ChangeAnim] ;Anim for HIT_BACK
type		= ChangeAnim
trigger1	= Time = 0
trigger1	= GetHitVar(animtype) = [3, 5]
value 		= 5030

[State 5000, ChangeAnim] ;Anim for HIT_BACK
type		= ChangeAnim
trigger1	= Time = 0
trigger1	= StateType = A
value 		= 5034

[State 5000, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type		= ChangeAnim
trigger1	= Time = 0
trigger1	= (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value		= 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, ChangeAnim] ;Freeze anim
type		= ChangeAnim
trigger1	= Time > 0
value		= Anim

[State 5000, Ground End]
type		= ChangeState
trigger1	= HitShakeOver
trigger1	= GetHitVar(yvel) = 0 && !GetHitVar(fall)
value		= 5001 ;HITG_SLIDE

[State 5000, Air End]
type		= ChangeState
trigger1	= HitShakeOver
value		= 5030

[State 5000, FFB Light]
type		= ForceFeedback
trigger1	= Anim = 5000
trigger2	= Anim = 5010
persistent	= 0
time		= 6
waveform	= square

[State 5000, FFB Medium]
type		= ForceFeedback
trigger1	= Anim = 5001
trigger2	= Anim = 5011
persistent	= 0
time		= 8
waveform	= sinesquare
ampl		= 110, -1, -.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 	= Anim = 5012
trigger2	= Anim = 5002
trigger3	= Anim = 5030
persistent	= 0
time		= 15
waveform	= sinesquare
ampl		= 140

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITG_SLIDE
;---------------------------------------------------------------------------
[Statedef 5001]
type    = S
movetype= H
physics = S

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime >= 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type		= ChangeState
trigger1	= HitOver
value		= 5002

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.stand.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; やられ共通初期化処理
;---------------------------------------------------------------------------
;------------------- 初期化
[Statedef 5002]
type		= U
movetype	= I
physics		= U
ctrl		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5002, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= Anim
elem		= AnimElemNo(0)
ignorehitpause	= 1

[State 5002, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59) - 1

[State 5002, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = StateType = A
value = 5034

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITC_SLIDE
;---------------------------------------------------------------------------
[Statedef 5011]
type    = C
movetype= H
physics = C

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime >= 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type		= ChangeState
trigger1	= HitOver
value		= 5002

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.crouch.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = IfElse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = StateType = A
value = 5034

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 5035 ;HITA_UP (transition)

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime >= 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime >= 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
;---------------------------------------------------------------------------
[Statedef 5040]
type		= A
movetype	= H
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5040, 1]
type		= ChangeState
trigger1	= !Alive
value		= 5050

[State 5040, 2]
type		= ChangeAnim
trigger1	= AnimTime >= 0
trigger1	= Anim != 5040
trigger2	= Time = 0
trigger2	= Anim != 5035
value		= 5040

[State 5040, 3]
type		= CtrlSet
trigger1	= HitOver
value		= 1

[State 5040, 4]
type		= StateTypeSet
trigger1	= HitOver
movetype	= I

[State 5040, 5]
type		= VelAdd
trigger1	= 1
y			= GetHitVar(yaccel)

[State 5040, 6]
type		= ChangeState
trigger1	= Vel Y > 0
trigger1	= Pos Y >= 0
value		= 52 ;JUMPLAND

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime >= 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= IfElse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = (Var(25) & 4194304)
trigger1 = CanRecover
trigger2 = GetHitVar(fall.recover)
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = (Var(25) & 4194304)
trigger1 = CanRecover
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= IfElse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = (Var(25) & 4194304)
trigger1 = 0
trigger2 = GetHitVar(fall.recover)
value = 5200 ;HITFALL_RECOVER

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = IfElse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(SysVar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = SysVar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = SysVar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= IfElse( HitPauseTime, Vel X, Vel X * Const(movement.crouch.friction) )
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (SysVar(1) > 5) + (SysVar(1) > 14)
pos = 0, 0
under = SysVar(1) <= 14

[State 5100, HitFallDamage Req]
type		= VarSet
triggerall	= !IsHelper
trigger1	= Time = 3
var(19)		= (Var(19) | 65536)

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (SysVar(1) > 5) + (SysVar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime >= 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, HitFallDamage Req]
type		= VarSet
triggerall	= !IsHelper
trigger1	= Time = 0
var(19)		= (Var(19) | 65536)

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (SysVar(1) > 5) + (SysVar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (SysVar(1) > 5) + (SysVar(1) > 14)
pos = 0, 0
under = SysVar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime >= 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime >= 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime >= 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; HIT_GETUP
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5120]
type		= L
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5120, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5120, ChangeAnim] ;Get up anim (normal)
type		= ChangeAnim
trigger1	= !( (Anim = [5111, 5119]) || (Anim = [5171, 5179]) )
trigger2	= !SelfAnimExist(5110 + (Anim % 10))
value		= 5110

[State 5120, ChangeAnim] ;Get up anim (for hit up/diag-up)
type		= ChangeAnim
trigger1	= ( (Anim = [5111, 5119]) || (Anim = [5171, 5179]) )
trigger1	= SelfAnimExist(5110 + (Anim % 10))
value		= 5110 + (Anim % 10)

[State 5120, VelSet]
type		= VelSet
trigger1	= 1
x			= 0

[State 5120, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 5120, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5121

;------------------- 実行1
[Statedef 5121]
type		= L
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5121, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5121, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= Anim
elem		= AnimElemNo(0)

[State 5121, End Check]
type		= VarSet
trigger1	= !( (Var(25) & 2048) || (Var(25) & 4096) || (Var(25) & 8192) || (Var(25) & 16384) || (Var(25) & 32768) || (Var(25) & 65536) )
var(4)		= Var(59) + 511

[State 5121, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 90
value		= 5122

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 511
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 起き上がり
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5122]
type		= L
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5122, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5122, Branch]
type		= ChangeState
triggerall	= !(Var(25) & 128) && !(Var(25) & 256)
trigger1	= (Var(25) & 512) || (Var(25) & 1024)
value		= 5130

[State 5122, ChangeAnim] ;Get up anim (normal)
type		= ChangeAnim
trigger1	= Anim != [5111,5119]
trigger2	= !SelfAnimExist(5120 + (Anim % 10))
value		= 5120

[State 5122, ChangeAnim] ;Get up anim (for hit up/diag-up)
type		= ChangeAnim
trigger1	= Anim = [5111,5119]
trigger1	= SelfAnimExist(5120 + (Anim % 10))
value		= 5120 + (Anim % 10)

[State 5122, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5123

;------------------- 実行
[Statedef 5123]
type		= L
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5123, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5123, HitFallSet]
type		= HitFallSet
trigger1	= AnimTime >= 0
value		= 1

[State 5123, 5] ;Can't be thrown right after getting up
type		= NotHitBy
trigger1	= AnimTime >= 0
value		= , NT,ST,HT
time		= 12
ignorehitpause	= 1

[State 5123, 6] ;Can't be hit right after getting up (short time)
type		= NotHitBy
trigger1	= AnimTime >= 0
value2		= SCA
time		= 3
ignorehitpause	= 1

[State 5123, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 移動起き上がり(前)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5130]
type		= L
movetype	= I
physics		= N
anim		= 5130
ctrl		= 0
facep2		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5130, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5130, Branch]
type		= ChangeState
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
value		= 5135
ctrl		= 0

[State 5130, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5131

;------------------- 実行
[Statedef 5131]
type		= L
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5131, NitHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5131, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 5131, VelSet]
type		= VelSet
trigger1	= AnimElem = 2
x			= 5.75*Const(size.xscale)
y			= 0

[State 5131, VelMul]
type		= VelMul
trigger1	= AnimElemTime(2) > 0
x			= 0.95

[State 5131, VelSet]
type		= VelSet
trigger1	= AnimTime >= 0
x			= 0

[State 5131, HitFallSet]
type		= HitFallSet
trigger1	= AnimTime >= 0
value		= 1

[State 5131, 5] ;Can't be thrown right after getting up
type		= NotHitBy
trigger1	= AnimTime >= 0
value		= , NT,ST,HT
time		= 12
ignorehitpause	= 1

[State 5131, 6] ;Can't be hit right after getting up (short time)
type		= NotHitBy
trigger1	= AnimTime >= 0
value2		= SCA
time		= 3
ignorehitpause	= 1

[State 5131, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 移動起き上がり(後)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5135]
type		= L
movetype	= I
physics		= N
anim		= 5135
ctrl		= 0
facep2		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5135, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5135, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5136

;------------------- 実行
[Statedef 5136]
type		= L
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5136, NitHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5136, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 5136, VelSet]
type		= VelSet
trigger1	= AnimElem = 2
x			= -5.75*Const(size.xscale)
y			= 0

[State 5136, VelMul]
type		= VelMul
trigger1	= AnimElemTime(2) > 0
x			= 0.95

[State 5136, VelSet]
type		= VelSet
trigger1	= AnimTime >= 0
x			= 0

[State 5136, HitFallSet]
type		= HitFallSet
trigger1	= AnimTime >= 0
value		= 1

[State 5136, 5] ;Can't be thrown right after getting up
type		= NotHitBy
trigger1	= AnimTime >= 0
value		= , NT,ST,HT
time		= 12
ignorehitpause	= 1

[State 5136, 6] ;Can't be hit right after getting up (short time)
type		= NotHitBy
trigger1	= AnimTime >= 0
value2		= SCA
time		= 3
ignorehitpause	= 1

[State 5136, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; HIT_LIEDEAD
;---------------------------------------------------------------------
[Statedef 5150]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
triggerall	= IsHelper
trigger1	= !(Var(0) = 20000)
trigger1	= !(Var(0) = [30000, 30099])
trigger1	= !(Var(0) = 40000)
trigger1	= !(Var(0) = 50000)
trigger1	= !(Var(0) = 60000)
value		= 19900
ignorehitpause	= 1

[State 5150, Init]
type		= StateTypeSet
triggerall	= !IsHelper
trigger1	= Time = 0
statetype	= L
movetype	= H
physics		= N

[State 5150, Init]
type		= SprPriority
triggerall	= !IsHelper
trigger1	= Time = 0
value		= -3

[State 5150, 1] ;Normal anim
type		= ChangeAnim
triggerall	= !IsHelper
triggerall	= Time = 0
triggerall	= SelfAnimExist(5140)
trigger1	= (anim != [5111,5119]) && (anim != [5171,5179])
trigger2	= !SelfAnimExist(5140 + (anim % 10))
value		= 5140

[State 5150, 3] ;Hit up type anim
type		= ChangeAnim
triggerall	= !IsHelper
trigger1	= Time = 0
trigger1	= (anim = [5111,5119]) || (anim = [5171,5179])
trigger1	= SelfAnimExist(5140 + (anim % 10))
value		= 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type		= ChangeAnim
triggerall	= !IsHelper
trigger1	= MatchOver = 1
trigger1	= Anim = [5140,5149]
trigger1	= SelfAnimExist(anim+10)
value		= anim+10
persistent	= 0

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type		= ChangeAnim
triggerall	= !IsHelper
trigger1	= Time = 0
trigger1	= Anim != [5140,5159]
trigger1	= Anim != [5110,5119]
value		= 5110

[State 5150, 6] ;Friction
type		= VelMul
triggerall	= !IsHelper
trigger1	= 1
x			= 0.85

[State 5150, 7] ;Friction
type		= VelSet
triggerall	= !IsHelper
trigger1	= Vel x < .05
persistent	= 0
x			= 0

[State 5150, 8]
type		= NotHitBy
triggerall	= !IsHelper
trigger1	= 1
value		= SCA
time		= 1
ignorehitpause	= 1

[State 5150, End]
type		= ChangeState
triggerall	= !IsHelper
triggerall	= (RoundState = 2) && Alive && Life > 0
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
triggerall	= !IsHelper
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !IsHelper
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !IsHelper
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !IsHelper
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !IsHelper
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
triggerall	= !IsHelper
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
triggerall	= !IsHelper
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime >= 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ダウン回避(前)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5201]
type		= L
movetype	= I
physics		= N
anim		= 5200
ctrl		= 0
facep2		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5201, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= (Random >= 500)

[State 5201, PlaySnd]
type		= PlaySnd
trigger1	= Var(0)
value		= 4999, 0
channel		= 0
volume		= 200

[State 5201, PlaySnd]
type		= PlaySnd
trigger1	= !Var(0)
value		= 1600, 0
channel		= 0
volume		= 200

[State 5201, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 5201, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5201, Branch]
type		= ChangeState
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
value		= 5203
ctrl		= 0

[State 5201, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5202

;------------------- 実行
[Statedef 5202]
type		= L
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5202, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 5202, NitHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5202, VelSet]
type		= VelSet
trigger1	= AnimElem = 1
x			= 6.75*Const(size.xscale)
y			= 0

[State 5202, VelMul]
type		= VelMul
trigger1	= AnimElemTime(1) > 0
x			= 0.95

[State 5202, VelSet]
type		= VelSet
trigger1	= AnimTime = -1
x			= 0

[State 5202, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ダウン回避(後)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5203]
type		= L
movetype	= I
physics		= N
anim		= 5201
ctrl		= 0
facep2		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5203, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5203, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5204

;------------------- 実行
[Statedef 5204]
type		= L
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5204, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 5204, NitHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5204, VelSet]
type		= VelSet
trigger1	= AnimElem = 1
x			= -6.75*Const(size.xscale)
y			= 0

[State 5204, VelMul]
type		= VelMul
trigger1	= AnimElemTime(1) > 0
x			= 0.95

[State 5204, VelSet]
type		= VelSet
trigger1	= AnimTime = -1
x			= 0

[State 5204, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中受身・中
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5210]
type		= A
movetype	= I
physics		= N
anim		= 5210
ctrl		= 0
velset		= 0, 0
facep2		= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5210, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 5210, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5210, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= (Random >= 500)

[State 5210, PlaySnd]
type		= PlaySnd
trigger1	= Var(0)
value		= 4999, 0
channel		= 0
volume		= 200

[State 5210, PlaySnd]
type		= PlaySnd
trigger1	= !Var(0)
value		= 1600, 0
channel		= 0
volume		= 200

[State 5210, VelSet] 
type		= VelSet
trigger1	= 1
y			= IfElse( (!!(Var(25) & 128)) - (!!(Var(25) & 256)) = 0, -4, IfElse((!!(Var(25) & 128)) - (!!(Var(25) & 256)) > 0, -7, -0.5) )

[State 5210, Branch Fwd]
type		= ChangeState
trigger1	= (Facing < 0) && (Var(25) & 524288)
trigger2	= (Facing >= 0) && (Var(25) & 262144)
value		= 5211

[State 5210, Branch Back]
type		= ChangeState
trigger1	= (Facing >= 0) && (Var(25) & 524288)
trigger2	= (Facing < 0) && (Var(25) & 262144)
value		= 5212

[State 5210, Branch Extra Down]
type		= ChangeState
triggerall	= (Var(32) & 7) < 4
trigger1	= (Var(25) & 256) && !(Var(25) & 128)
value		= 5215

[State 5210, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5214

;------------------- 初期化・前
[Statedef 5211]
type		= A
movetype	= I
physics		= N
anim		= 5211

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5211, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5211, VelSet]
type		= VelSet
trigger1	= 1
x			= 4.5*Const(size.xscale)

[State 5211, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5214

;------------------- 初期化・後
[Statedef 5212]
type		= A
movetype	= I
physics		= N
anim		= 5212

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5212, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5212, VelSet]
type		= VelSet
trigger1	= 1
x			= -4.5*Const(size.xscale)

[State 5212, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5214

;------------------- 実行
[Statedef 5214]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5214, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(8) < 0
value		= SCA
ignorehitpause	= 1

[State 5214, Gravity]
type		= Gravity
trigger1	= AnimElemTime(1) > 0

[State 5214, Turn]
type		= Turn
triggerall	= AnimElemTime(8) = -1
trigger1	= P2Dist X < 0

[State 5214, Land On Ground]
type		= ChangeState
triggerall	= AnimElemTime(8) < 0
triggerall	= Vel Y > 0
trigger1	= Pos Y + Vel Y >= 0
value		= 952 ;JUMP_LAND
ctrl		= 1

[State 5214, Land On Ground]
type		= ChangeState
triggerall	= Vel Y > 0
trigger1	= Pos Y + Vel Y >= 0
value		= 52 ;JUMP_LAND
ctrl		= 1

[State 5214, End]
type		= CtrlSet
trigger1	= AnimElemTime(8) = -1
value		= 1

[State 5214, Blink White]
type		= PalFX
triggerall	= AnimElemTime(8) < 0
trigger1	= ((Var(4) - Var(59)) % 2) = 0
time		= 1
add			= 128, 128, 128

[State 5214, PalFX Counter]
type		= VarSet
triggerall	= AnimElemTime(8) < 0
trigger1	= ((Var(4) - Var(59)) % 2) = 0
var(32)		= (Var(32) | 260046848) - 260046848 + 2*8388608
ignorehitpause	= 1

[State , State Timer]
type		= VarSet
trigger1	= 1
var(4)		= Var(59) + ((Var(4) - Var(59) + 1) % 256)

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 空中受身・下(特殊)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5215]
type		= A
movetype	= I
physics		= N

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5215, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5215, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5216

;------------------- 実行
[Statedef 5216]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5216, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5216, Gravity]
type		= Gravity
trigger1	= AnimElemTime(1) > 0

[State 5216, Land On Ground]
type		= ChangeState
triggerall	= Vel Y > 0
trigger1	= Pos Y + Vel Y >= 0
value		= 952 ;JUMP_LAND
ctrl		= 1

[State 5216, Blink White]
type		= PalFX
triggerall	= ((Var(4) - Var(59)) % 2) = 0
trigger1	= Pos Y < 0
trigger2	= Vel Y <= 0
time		= 1
add			= 128, 128, 128

[State 5216, PalFX Counter]
type		= VarSet
triggerall	= ((Var(4) - Var(59)) % 2) = 0
trigger1	= Pos Y < 0
trigger2	= Vel Y <= 0
var(32)		= (Var(32) | 260046848) - 260046848 + 2*8388608
ignorehitpause	= 1

[State , State Timer]
type		= VarSet
trigger1	= 1
var(4)		= Var(59) + ((Var(4) - Var(59) + 1) % 256)

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; コンティニュー
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5500]
type		= S
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5500, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim != 5300 && Anim != 5500
value		= IfElse( !SelfAnimExist(5500), 5300, 5500 )

[State 5500, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 5500, End]
type		= ChangeState
triggerall	= (0 < RoundState && RoundState <= 2) && Alive
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ラウンド開始時のキャラの初期化
;---------------------------------------------------------------------
[Statedef 5900]
type = S

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5900, 1] ;Clear all int variables
type		= VarRangeSet
trigger1	= RoundsExisted = 0
value		= 0
ignorehitpause	= 1

[State 5900, 2] ;Clear all float variables
type		= VarRangeSet
trigger1	= RoundsExisted = 0
fvalue		= 0
ignorehitpause	= 1

;---------------------------------------------------------------------
; ユーザーコンフィグ初期化
;---------------------------------------------------------------------
[State 5900, Key]
type		= VarSet
trigger1	= 1
var(22)		= (Var(22) | 15) - 15
ignorehitpause	= 1

;---------------------------------------------------------------------
; AI初期化
;---------------------------------------------------------------------
[State 5900, AI]
type		= VarSet
trigger1	= 1
var(1)		= IfElse( !(Var(1) & 32), 0 , 32 )
ignorehitpause	= 1

[State 5900, AI Init Check]
type		= VarSet
trigger1	= RoundState = 0
var(19)		= (Var(19) | 512) - 512
ignorehitpause	= 1

;---------------------------------------------------------------------
; キャラ設定初期化
;---------------------------------------------------------------------
[State 5900, Base Setting]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) & 7)
ignorehitpause	= 1

;---------------------------------------------------------------------
; 変数初期化
;---------------------------------------------------------------------
;------------------- キー
[State 5900, Key]
type		= VarSet
trigger1	= 1
persistent	= 0
var(59)		= (Random % 14) + 2
ignorehitpause	= 1

;------------------- 各種ビットフラグ
[State 5900, Bit]
type		= VarSet
trigger1	= 1
persistent	= 0
var(1)		= Var(1) + (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- 汎用ステートタイマー
[State 5900, State Timer]
type		= VarSet
trigger1	= 1
persistent	= 0
var(4)		= Var(59)
ignorehitpause	= 1

;------------------- 保持HP
[State 5900, Life Init]
type		= VarSet
trigger1	= 1
persistent	= 0
var(6)		= Life + (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- 総合ヒット数カウンタ
[State 5900, Combo Count]
type		= VarSet
trigger1	= 1
persistent	= 0
var(7)		= (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- 最大HP
[State 5900, Life Init]
type		= VarSet
trigger1	= 1
persistent	= 0
var(12)		= Ceil( LifeMax*1.035 )
ignorehitpause	= 1

;------------------- 現在HP
; LifeMax=1000とした時の、防御力補正が終了する体力の値
; 値の範囲は 0〜1000
[State 5900, Correct Life End]
type		= VarSet
trigger1	= 1
persistent	= 0
var(54)		= 250
ignorehitpause	= 1

; LifeMax=1000とした時の、防御力補正が開始する体力の値
; 値の範囲は 0〜1000
[State 5900, Correct Life Start]
type		= VarSet
trigger1	= 1
persistent	= 0
var(55)		= 750
ignorehitpause	= 1

; 防御力補正が最大に働いた時に何倍になるか？
; 値の範囲は 1.0 以上 
[State 5900, Correct Life Rate Value]
type		= VarSet
trigger1	= 1
persistent	= 0
fvar(38)	= 2.0
ignorehitpause	= 1

; 真の最大HPは、見掛け最大HPの何倍か？
[State 5900, True Life Rate]
type		= VarSet
trigger1	= 1
persistent	= 0
fvar(37)	= ( 1000-Var(55) + (Var(55)-Var(54))*0.5*(1.0 + FVar(38)) + Var(54)*FVar(38) ) / 1000.0
ignorehitpause	= 1

[State 5900, Correct Life Start]
type		= VarSet
trigger1	= 1
persistent	= 0
var(58)		= Ceil( Var(12) * ( 1.0 - (1000-Var(55))/1000.0/FVar(37) ) )
ignorehitpause	= 1

[State 5900, Correct Life End]
type		= VarSet
trigger1	= 1
persistent	= 0
var(56)		= Ceil( Var(12) * ( Var(54)/1000.0*FVar(38)/FVar(37) ) )
ignorehitpause	= 1

[State 5900, Temp]
type		= VarSet
trigger1	= 1
persistent	= 0
fvar(39)	= Var(55) - Var(54)
ignorehitpause	= 1

[State 5900, Life Init No]	; 見かけHPが補正開始体力を超えた時用
type		= VarSet
trigger1	= Life >= LifeMax*Var(55)/1000.0
persistent	= 0
var(13)		= Floor( (Life*1000/(1.0*LifeMax) - Var(55))/(1.0*(1000-Var(55))) *(Var(12)-Var(58)) + Var(58) )
ignorehitpause	= 1

[State 5900, Life Init Start]	; 見かけHPが補正開始〜終了体力の範囲内用
type		= VarSet
trigger1	= LifeMax*Var(55)/1000.0 > Life && Life >= LifeMax*Var(54)/1000.0
persistent	= 0
var(13)		= Floor( Var(58) - ( (2.0 + (FVar(38)-1.0) *((Var(55)-Life*1000.0/(1.0*LifeMax))/FVar(39))) *0.5/FVar(37) *(Var(55)-Life*1000.0/(1.0*LifeMax)) *Var(12)/1000.0 ) )
ignorehitpause	= 1

[State 5900, Life Init End]	; 見かけHPが補正終了体力の範囲内用
type		= VarSet
trigger1	= LifeMax*Var(54)/1000.0 > Life
persistent	= 0
var(13)		= Floor( Life/(LifeMax*Var(54)/1000.0) *Var(56) )
ignorehitpause	= 1

[State 5900, Life Init]
type		= VarAdd
trigger1	= 1
persistent	= 0
var(12)		= (Var(59) * 268435456)
ignorehitpause	= 1

[State 5900, Life Init]
type		= VarAdd
trigger1	= 1
persistent	= 0
var(13)		= (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- 被連続技用総ダメージ
[State 5900, Enemy Total Combo Damage]
type		= VarSet
trigger1	= 1
persistent	= 0
var(14)		= Var(59)
ignorehitpause	= 1

;------------------- 盾
[State 5900, Shield]
type		= VarSet
trigger1	= 1
persistent	= 0
var(15)		= Var(59)
ignorehitpause	= 1

;------------------- 各種ビットフラグ2
[State 5900, Bit2]
type		= VarSet
trigger1	= 1
persistent	= 0
var(16)		= Var(59)
ignorehitpause	= 1

;------------------- 真の保持HP
[State 5900, Life Init]
type		= VarSet
trigger1	= 1
persistent	= 0
var(17)		= Var(6)
ignorehitpause	= 1

;------------------- 各種ビットフラグ3
[State 5900, Bit3]
type		= VarSet
trigger1	= 1
persistent	= 0
var(18)		= Var(59)
ignorehitpause	= 1

;------------------- 各種ビットフラグ4
[State 5900, Bit4]
type		= VarSet
trigger1	= 1
persistent	= 0
var(19)		= (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- 被連続技用総ダメージ(パワーゲージ)
[State 5900, Enemy Total Combo Damage Power]
type		= VarSet
trigger1	= 1
persistent	= 0
var(21)		= Var(59)
ignorehitpause	= 1

;------------------- ユーザーコンフィグ
[State 5900, User Config]
type		= VarSet
trigger1	= 1
persistent	= 0
var(22)		= Var(22) + Var(59)
ignorehitpause	= 1

;------------------- 保持パワーゲージ
[State 5900, Power]
type		= VarSet
trigger1	= 1
persistent	= 0
var(23)		= Power + Var(59)
ignorehitpause	= 1

;------------------- ゲームタイマー
[State 5900, GameTime]
type		= VarSet
trigger1	= 1
persistent	= 0
var(24)		= Var(59)
ignorehitpause	= 1

;------------------- AIコマンド入力補完用ビットフラグ
[State 5900, AI Command Bit]
type		= VarSet
trigger1	= 1
persistent	= 0
var(25)		= (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- キャンセル可能状態
[State 5900, Cancel Enable]
type		= VarSet
trigger1	= 1
persistent	= 0
var(28)		= Var(59)
ignorehitpause	= 1

;------------------- ターゲットのID
[State 5900, TargetID]
type		= VarSet
trigger1	= 1
persistent	= 0
var(30)		= Var(59)
ignorehitpause	= 1

;------------------- 各種ビットフラグ5
[State 5900, Bit5]
type		= VarSet
trigger1	= 1
persistent	= 0
var(32)		= Var(32) + (Var(59) * 268435456)
ignorehitpause	= 1

;------------------- ガードクラッシュ値
[State 5900, Guard Crush Point]
type		= VarSet
trigger1	= 1
persistent	= 0
var(33)		= 1000 * 1000
ignorehitpause	= 1

;------------------- AIコマンド入力補完用ビットフラグ2
[State 5900, AI Command Bit2]
type		= VarSet
trigger1	= 1
persistent	= 0
var(34)		= Var(59)
ignorehitpause	= 1
;---------------------------------------------------------------------
; 変数初期化
;---------------------------------------------------------------------

[State 5900, Penalty]
type		= VarSet
trigger1	= RoundState != 0
var(1)		= (Var(1) | 8388608)
ignorehitpause	= 1

[State 5900, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

;------------------- 終了
[State 5900, End]
type		= ChangeState
trigger1	= 1
value		= 5901
ignorehitpause	= 1

[State 5900, End]
type		= ChangeState
trigger1	= 1
value		= 5901
ignorehitpause	= 1

[State 5900, End]
type		= ChangeState
trigger1	= 1
value		= 5901
ignorehitpause	= 1

;---------------------------------------------------------------------
; 最初期化
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5905]
type		= U
movetype	= U
physics		= U

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5905, VarSet]
type		= VarSet
trigger1	= (Var(18) & 1008) < 1008 / 63 * 60
var(18)		= (Var(18) | 1008) - 1008 + 1008 / 63 * 60
ignorehitpause	= 1

[State 5905, Branch]
type		= ChangeState
trigger1	= HitPauseTime >= 1
value		= 5907
ignorehitpause	= 1

[State 5905, Branch]
type		= ChangeState
trigger1	= HitPauseTime >= 1
value		= 5907
ignorehitpause	= 1

[State 5905, Branch]
type		= ChangeState
trigger1	= HitPauseTime >= 1
value		= 5907
ignorehitpause	= 1

[State 5905, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 5905, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5905
ignorehitpause	= 1

[State 5905, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 5905, Turn]
type		= Turn
trigger1	= P2Dist X < 0
ignorehitpause	= 1

[State 5905, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 5905, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2200, 0
ignorehitpause	= 1

[State 5905, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5906
ignorehitpause	= 1

[State 5905, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5906
ignorehitpause	= 1

[State 5905, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5906
ignorehitpause	= 1

;------------------- 実行
[Statedef 5906]
type		= S
movetype	= I
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5906, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 5906, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 5906, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 5906, SuperPause]
type		= SuperPause
trigger1	= RoundState < 3
time		= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
movetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
anim		= -1
sound		= -1
darken		= 0
unhittable	= 0
p2defmul	= 1.0
ignorehitpause	= 1

[State 5906, Pause]
type		= Pause
trigger1	= RoundState < 3
time		= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
movetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 5906, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimTime >= 0
time		= 0
movetime	= 0
anim		= -1
sound		= -1
darken		= 0
unhittable	= 0
p2defmul	= 1.0
ignorehitpause	= 1

[State 5906, Pause]
type		= Pause
trigger1	= AnimTime >= 0
time		= 0
movetime	= 0
ignorehitpause	= 1

[State 5906, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; ヒットポーズ解除待ち
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 5907]
type		= U
movetype	= U
physics		= U

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5907, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= A
physics		= N
ignorehitpause	= 1

[State 5907, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5907
ignorehitpause	= 1

[State 5907, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 5907, Turn]
type		= Turn
trigger1	= P2Dist X < 0
ignorehitpause	= 1

[State 5907, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 5907, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5908
ignorehitpause	= 1

[State 5907, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5908
ignorehitpause	= 1

[State 5907, State Init End]
type		= ChangeState
trigger1	= 1
value		= 5908
ignorehitpause	= 1

;------------------- 実行
[Statedef 5908]
statetype	= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 5908, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= A
physics		= N
ignorehitpause	= 1

[State 5908, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 5908, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 5908, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 5908, VarSet]
type		= VarSet
trigger1	= (Var(18) & 1008) < 1008 / 63 * 60
var(18)		= (Var(18) | 1008) - 1008 + 1008 / 63 * 60
ignorehitpause	= 1

[State 5908, SuperPause]
type		= SuperPause
trigger1	= RoundState < 3
time		= 1
movetime	= 1
anim		= -1
sound		= -1
darken		= 0
unhittable	= 0
p2defmul	= 1.0
ignorehitpause	= 1

[State 5908, Pause]
type		= Pause
trigger1	= RoundState < 3
time		= 1
movetime	= 1
ignorehitpause	= 1

[State 5908, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

;自分で解除するようにした
[State 5908, Branch End]
type		= ChangeState
trigger1	= HitPauseTime
value		= 7501
ignorehitpause	= 1

[State 5908, Branch End]
type		= ChangeState
trigger1	= HitPauseTime
value		= 7501
ignorehitpause	= 1

[State 5908, Branch End]
type		= ChangeState
trigger1	= HitPauseTime
value		= 7501
ignorehitpause	= 1

[State 5908, Hit]	; 全ヒット
type						= HitDef
trigger1					= 1
affectteam					= F
attr						= , NA
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
hitflag						= MAFD
;priority					= 4, Hit
sparkno						= -1
guard.sparkno				= -1
guard.dist					= 0
pausetime					= 1, 0
guard.pausetime				= 1, 0
ignorehitpause	= 1

[State 5908, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= HitPauseTime <= 1
value		= 1
ignorehitpause	= 1

[State 5908, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= HitPauseTime <= 1
value		= 1
ignorehitpause	= 1

[State 5908, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= HitPauseTime <= 1
value		= 1
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071) - 131071 + 1
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; バグ
;---------------------------------------------------------------------
[Statedef 6100]
type		= S
movetype	= I
physics		= N
anim		= 9999
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 6100, Explod]
type		= Explod
trigger1	= 1
ID			= 6100
anim		= 6100
postype		= p1
scale		= 0.5*Const(size.xscale), 0.5*Const(size.yscale)
facing		= 1
sprpriority	= 0
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
ignorehitpause	= 1

[State 6100, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= I
physics		= N
ignorehitpause	= 1

[State 6100, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 6106
ignorehitpause	= 1

[State 6100, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 6100, Turn]
type		= Turn
trigger1	= P2Dist X < 0
ignorehitpause	= 1

[State 6100, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 6100, LifeSet]
type		= LifeSet
trigger1	= 1
value		= LifeMax
ignorehitpause	= 1

[State 6100, PowerSet]
type		= PowerSet
trigger1	= 1
value		= PowerMax
ignorehitpause	= 1

[State 6100, HitOverride]
type		= HitOverride
trigger1	= 1
time		= 1
attr		= SCA, AA, AT, AP
stateno		= 120
slot		= 1
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
trigger1	= 1
fvar(0)		= 5.0
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= (Command = "holdfwd") - (Command = "holdback")
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= 1
var(58)		= (Command = "holddown") - (Command = "holdup")
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
triggerall	= (Var(1) & 32)
trigger1	= 1
var(58)		= (Pos Y < 0)*(Command = "holddown") - (Pos Y > -240)*(Command = "holdup")
ignorehitpause	= 1

[State 6100, PosAdd]
type		= PosAdd
trigger1	= 1
x			= FVar(0) * Var(0)
y			= FVar(0) * Var(58)
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
trigger1	= 1
var(0)		= 0
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= Command = "hold_c"
var(0)		= 1
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= Command = "hold_z"
var(0)		= 2
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= Command = "hold_z"
trigger1	= Command = "hold_c"
var(0)		= 3
ignorehitpause	= 1

[State 6100, VarSet]
type		= VarSet
triggerall	= (Var(1) & 32)
trigger1	= Random < 750
var(0)		= IfElse( Random < 333, 1, IfElse( Random < 500, 2, 3 ) )
ignorehitpause	= 1

[State 6100, Branch]	; 通常攻撃
type		= ChangeState
trigger1	= Var(0) = 3
value		= 6140
ignorehitpause	= 1

[State 6100, Branch]	; 通常攻撃
type		= ChangeState
trigger1	= Var(0) = 3
value		= 6140
ignorehitpause	= 1

[State 6100, Branch]	; 通常攻撃
type		= ChangeState
trigger1	= Var(0) = 3
value		= 6140
ignorehitpause	= 1

[State 6100, Branch]	; 投げ
type		= ChangeState
trigger1	= Var(0) = 2
value		= 6120
ignorehitpause	= 1

[State 6100, Branch]	; 投げ
type		= ChangeState
trigger1	= Var(0) = 2
value		= 6120
ignorehitpause	= 1

[State 6100, Branch]	; 投げ
type		= ChangeState
trigger1	= Var(0) = 2
value		= 6120
ignorehitpause	= 1

[State 6100, Branch]	; 当身
type		= ChangeState
trigger1	= Var(0) = 1
value		= 6130
ignorehitpause	= 1

[State 6100, Branch]	; 当身
type		= ChangeState
trigger1	= Var(0) = 1
value		= 6130
ignorehitpause	= 1

[State 6100, Branch]	; 当身
type		= ChangeState
trigger1	= Var(0) = 1
value		= 6130
ignorehitpause	= 1

[State 6100, End]	; 飛び道具攻撃
type		= ChangeState
trigger1	= 1
value		= 6101
ignorehitpause	= 1

[State 6100, End]	; 飛び道具攻撃
type		= ChangeState
trigger1	= 1
value		= 6101
ignorehitpause	= 1

[State 6100, End]	; 飛び道具攻撃
type		= ChangeState
trigger1	= 1
value		= 6101
ignorehitpause	= 1

;---------------------------------------------------------------------
; バグ(飛び道具攻撃)
;---------------------------------------------------------------------
[Statedef 6101]
type		= U
movetype	= U
physics		= U

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 6101, Attack Reset]
type		= VarSet
trigger1	= 1
var(0)		= -1
ignorehitpause	= 1

[State 6101, VarSet]
type		= VarSet
trigger1	= Command = "x"
var(0)		= 0
ignorehitpause	= 1

[State 6101, VarSet]
type		= VarSet
trigger1	= Command = "a"
var(0)		= 1
ignorehitpause	= 1

[State 6101, VarSet]
type		= VarSet
trigger1	= Command = "y"
var(0)		= 2
ignorehitpause	= 1

[State 6101, VarSet]
type		= VarSet
trigger1	= Command = "b"
var(0)		= 3
ignorehitpause	= 1

[State 6101, Anim Reset]
type		= VarSet
trigger1	= 1
var(58)		= 6106
ignorehitpause	= 1

[State 6101, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= !(Command = "hold_s")
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6101, VarSet]
type		= VarSet
triggerall	= (Var(1) & 32)
trigger1	= Random < 750
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6101, ChangeAnim]
type		= ChangeAnim
trigger1	= Var(0) >= 0
value		= Var(58)
ignorehitpause	= 1

[State 6101, StateTypeSet]
type		= StateTypeSet
trigger1	= Var(0) >= 0
movetype	= A
ignorehitpause	= 1

[State 6101, Hit Small]
type						= HitDef
trigger1					= Var(0) = 0
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 50
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6101, Hit Normal]
type						= HitDef
trigger1					= Var(0) = 1
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 100
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6101, Hit Big]
type						= HitDef
trigger1					= Var(0) = 2
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 200
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6101, Hit Dead]
type						= HitDef
trigger1					= Var(0) = 3
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 2147483648
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6101, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6101, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6101, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

;---------------------------------------------------------------------
; バグやられ側(やさしい)
;---------------------------------------------------------------------
[Statedef 6110]
type		= A
movetype	= H
physics		= N
anim		= IfElse(SelfAnimExist(5051), 5051, 5050)
ctrl		= 0
velset		= 0, -6.0

[State 6110, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 6110, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6110, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 6110, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 6110, LifeAdd]
type		= LifeAdd
trigger1	= Time = 0
value		= -50
kill		= 1
absolute	= 1

[State 6110, ChangeAnim]
type		= ChangeAnim
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061))
persistent	= 0
value		= IfElse(SelfAnimExist(5061), 5061, 5060)

[State 6110, VelAdd]
type		= VelAdd
trigger1	= Time > 1
y			= .44

[State 6110, ScreenBound]
type		= ScreenBound
trigger1	= Time < 10
value		= 1
movecamera	= 0, 0

[State 6110, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
x			= 0
y			= 0

[State 6110, PosSet]
type		= PosSet
trigger1	= Time > 5 && Pos Y >= 0
y			= 0

[State 6110, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
y			= -2.0

[State 6110, End]
type		= ChangeState
trigger1	= (Time > 5 && Pos Y >= 0) || Time > 120
value		= 7045

;---------------------------------------------------------------------
; バグやられ側(普通)
;---------------------------------------------------------------------
[Statedef 6111]
type		= A
movetype	= H
physics		= N
anim		= IfElse(SelfAnimExist(5051), 5051, 5050)
ctrl		= 0
velset		= 0, -7.0

[State 6111, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 6111, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6111, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 6111, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 6111, LifeAdd]
type		= LifeAdd
trigger1	= Time = 0
value		= -100
kill		= 1
absolute	= 1

[State 6111, ChangeAnim]
type		= ChangeAnim
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061))
persistent	= 0
value		= IfElse(SelfAnimExist(5061), 5061, 5060)

[State 6111, VelAdd]
type		= VelAdd
trigger1	= Time > 1
y			= .44

[State 6111, ScreenBound]
type		= ScreenBound
trigger1	= Time < 15
value		= 1
movecamera	= 0, 0

[State 6111, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
x			= 0
y			= 0

[State 6111, PosSet]
type		= PosSet
trigger1	= Time > 5 && Pos Y >= 0
y			= 0

[State 6111, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
y			= -2.0

[State 6111, End]
type		= ChangeState
trigger1	= (Time > 5 && Pos Y >= 0) || Time > 120
value		= 7045

;---------------------------------------------------------------------
; バグやられ側(痛い)
;---------------------------------------------------------------------
[Statedef 6112]
type		= A
movetype	= H
physics		= N
anim		= IfElse(SelfAnimExist(5051), 5051, 5050)
ctrl		= 0
velset		= 0, -8.0

[State 6112, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 6112, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6112, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 6112, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 6112, LifeAdd]
type		= LifeAdd
trigger1	= Time = 0
value		= -200
kill		= 1
absolute	= 1

[State 6112, ChangeAnim]
type		= ChangeAnim
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061))
persistent	= 0
value		= IfElse(SelfAnimExist(5061), 5061, 5060)

[State 6112, VelAdd]
type		= VelAdd
trigger1	= Time > 1
y			= .44

[State 6112, ScreenBound]
type		= ScreenBound
trigger1	= Time < 20
value		= 1
movecamera	= 0, 0

[State 6112, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
x			= 0
y			= 0

[State 6112, PosSet]
type		= PosSet
trigger1	= Time > 5 && Pos Y >= 0
y			= 0

[State 6112, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
y			= -2.0

[State 6112, End]
type		= ChangeState
trigger1	= (Time > 5 && Pos Y >= 0) || Time > 120
value		= 7045

;---------------------------------------------------------------------
; バグやられ側(即死)
;---------------------------------------------------------------------
[Statedef 6113]
type		= A
movetype	= H
physics		= N
anim		= IfElse(SelfAnimExist(5051), 5051, 5050)
ctrl		= 0
velset		= 0, -10.0

[State 6113, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 6113, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6113, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 6113, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 6113, LifeSet]
type		= LifeSet
trigger1	= 1
value		= 0
kill		= 1
absolute	= 1

[State 6113, ChangeAnim]
type		= ChangeAnim
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061))
persistent	= 0
value		= IfElse(SelfAnimExist(5061), 5061, 5060)

[State 6113, VelAdd]
type		= VelAdd
trigger1	= Time > 1
y			= .44

[State 6113, ScreenBound]
type		= ScreenBound
trigger1	= Time < 30
value		= 1
movecamera	= 0, 0

[State 6113, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
x			= 0
y			= 0

[State 6113, PosSet]
type		= PosSet
trigger1	= Time > 5 && Pos Y >= 0
y			= 0

[State 6113, VelSet]
type		= VelSet
trigger1	= Time > 5 && Pos Y >= 0
y			= -2.0

[State 6113, End]
type		= ChangeState
trigger1	= (Time > 5 && Pos Y >= 0) || Time > 120
value		= 7045

;---------------------------------------------------------------------
; バグ(投げ攻撃)
;---------------------------------------------------------------------
[Statedef 6120]
type		= U
movetype	= U
physics		= U

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 6120, Attack Reset]
type		= VarSet
trigger1	= 1
var(0)		= -1
ignorehitpause	= 1

[State 6120, VarSet]
type		= VarSet
trigger1	= Command = "x"
var(0)		= 0
ignorehitpause	= 1

[State 6120, VarSet]
type		= VarSet
trigger1	= Command = "a"
var(0)		= 1
ignorehitpause	= 1

[State 6120, VarSet]
type		= VarSet
trigger1	= Command = "y"
var(0)		= 2
ignorehitpause	= 1

[State 6120, VarSet]
type		= VarSet
trigger1	= Command = "b"
var(0)		= 3
ignorehitpause	= 1

[State 6120, Anim Reset]
type		= VarSet
trigger1	= 1
var(58)		= 6106
ignorehitpause	= 1

[State 6120, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= !(Command = "hold_s")
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6120, VarSet]
type		= VarSet
triggerall	= (Var(1) & 32)
trigger1	= Random < 750
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6120, ChangeAnim]
type		= ChangeAnim
trigger1	= Var(0) >= 0
value		= Var(58)
ignorehitpause	= 1

[State 6120, StateTypeSet]
type		= StateTypeSet
trigger1	= Var(0) >= 0
movetype	= A
ignorehitpause	= 1

[State 6120, Hit Small]
type						= HitDef
trigger1					= Var(0) = 0
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 0
guard.pausetime				= 1, 0
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
p2stateno					= 6110
p2getp1state				= 1
ignorehitpause	= 1

[State 6120, Hit Normal]
type						= HitDef
trigger1					= Var(0) = 1
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 0
guard.pausetime				= 1, 0
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
p2stateno					= 6111
p2getp1state				= 1
ignorehitpause	= 1

[State 6120, Hit Big]
type						= HitDef
trigger1					= Var(0) = 2
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 0
guard.pausetime				= 1, 0
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
p2stateno					= 6112
p2getp1state				= 1
ignorehitpause	= 1

[State 6120, Hit Dead]
type						= HitDef
trigger1					= Var(0) = 3
affectteam					= E
attr						= , AA, AT, AP
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 0
guard.pausetime				= 1, 0
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
p2stateno					= 6113
p2getp1state				= 1
ignorehitpause	= 1

[State 6120, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6120, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6120, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

;---------------------------------------------------------------------
; バグ(当身攻撃)
;---------------------------------------------------------------------
[Statedef 6130]
type		= U
movetype	= U
physics		= U

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 6130, Attack Reset]
type		= VarSet
trigger1	= 1
var(0)		= -1
ignorehitpause	= 1

[State 6130, VarSet]
type		= VarSet
trigger1	= Command = "x"
var(0)		= 0
ignorehitpause	= 1

[State 6130, VarSet]
type		= VarSet
trigger1	= Command = "a"
var(0)		= 1
ignorehitpause	= 1

[State 6130, VarSet]
type		= VarSet
trigger1	= Command = "y"
var(0)		= 2
ignorehitpause	= 1

[State 6130, VarSet]
type		= VarSet
trigger1	= Command = "b"
var(0)		= 3
ignorehitpause	= 1

[State 6130, Anim Reset]
type		= VarSet
trigger1	= 1
var(58)		= 6106
ignorehitpause	= 1

[State 6130, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= !(Command = "hold_s")
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6130, VarSet]
type		= VarSet
triggerall	= (Var(1) & 32)
trigger1	= Random < 750
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6130, ChangeAnim]
type		= ChangeAnim
trigger1	= Var(0) >= 0
value		= Var(58)
ignorehitpause	= 1

[State 6130, ReversalDef Small]
type			= ReversalDef
trigger1		= Var(0) = 0
reversal.attr	= SCA, AA, AT, AP
pausetime		= 1, 12
numhits			= 0
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S0, 0
p2stateno		= 6110
hitflag			= P
damage			= 50
guard.dist		= 0
ignorehitpause	= 1

[State 6130, ReversalDef Normal]
type			= ReversalDef
trigger1		= Var(0) = 1
reversal.attr	= SCA, AA, AT, AP
pausetime		= 1, 12
numhits			= 0
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S0, 0
p2stateno		= 6111
hitflag			= P
damage			= 100
guard.dist		= 0
ignorehitpause	= 1

[State 6130, ReversalDef Big]
type			= ReversalDef
trigger1		= Var(0) = 2
reversal.attr	= SCA, AA, AT, AP
pausetime		= 1, 12
numhits			= 0
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S0, 0
p2stateno		= 6112
hitflag			= P
damage			= 200
guard.dist		= 0
ignorehitpause	= 1

[State 6130, ReversalDef Dead]
type			= ReversalDef
trigger1		= Var(0) = 3
reversal.attr	= SCA, AA, AT, AP
pausetime		= 1, 12
numhits			= 0
sparkno			= S2060
sparkxy			= Floor(10 * Const(size.xscale)), 0
hitsound		= S0, 0
p2stateno		= 6113
hitflag			= P
damage			= 2147483648
guard.dist		= 0
ignorehitpause	= 1

[State 6130, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6130, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6130, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

;---------------------------------------------------------------------
; バグ(通常攻撃)
;---------------------------------------------------------------------
[Statedef 6140]
type		= U
movetype	= U
physics		= U

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 6140, Attack Reset]
type		= VarSet
trigger1	= 1
var(0)		= -1
ignorehitpause	= 1

[State 6140, VarSet]
type		= VarSet
trigger1	= Command = "x"
var(0)		= 0
ignorehitpause	= 1

[State 6140, VarSet]
type		= VarSet
trigger1	= Command = "a"
var(0)		= 1
ignorehitpause	= 1

[State 6140, VarSet]
type		= VarSet
trigger1	= Command = "y"
var(0)		= 2
ignorehitpause	= 1

[State 6140, VarSet]
type		= VarSet
trigger1	= Command = "b"
var(0)		= 3
ignorehitpause	= 1

[State 6140, Anim Reset]
type		= VarSet
trigger1	= 1
var(58)		= 6106
ignorehitpause	= 1

[State 6140, VarSet]
type		= VarSet
triggerall	= !(Var(1) & 32)
trigger1	= !(Command = "hold_s")
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6140, VarSet]
type		= VarSet
triggerall	= (Var(1) & 32)
trigger1	= Random < 750
var(58)		= Var(58) - 1
ignorehitpause	= 1

[State 6140, ChangeAnim]
type		= ChangeAnim
trigger1	= Var(0) >= 0
value		= Var(58)
ignorehitpause	= 1

[State 6140, StateTypeSet]
type		= StateTypeSet
trigger1	= Var(0) >= 0
movetype	= A
ignorehitpause	= 1

[State 6140, Hit Small]
type						= HitDef
trigger1					= Var(0) = 0
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= 50
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6140, Hit Normal]
type						= HitDef
trigger1					= Var(0) = 1
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= 100
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6140, Hit Big]
type						= HitDef
trigger1					= Var(0) = 2
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= 200
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6140, Hit Dead]
type						= HitDef
trigger1					= Var(0) = 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= 2147483648
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= MAFD
priority					= 7, Hit
pausetime					= 1, 60
guard.pausetime				= 1, 60
numhit						= 1
hitonce						= 0
sparkno						= -1
guard.sparkno				= -1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
ignorehitpause	= 1

[State 6140, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6140, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

[State 6140, End]
type		= ChangeState
trigger1	= 1
value		= 6150
ignorehitpause	= 1

;---------------------------------------------------------------------
; バグ(共通終了)
;---------------------------------------------------------------------
[Statedef 6150]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 6150, CtrlSet]
type		= CtrlSet
trigger1	= RoundState >= 3
value		= 1
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= 1
value		= 118
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= 1
value		= 118
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= 1
value		= 118
ignorehitpause	= 1
