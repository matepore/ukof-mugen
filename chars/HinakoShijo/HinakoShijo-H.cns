;=====================================================================
;  CNS File For "Refuse Hinako Shijo"                Made By OG子 OGヲ
;                                       Ver. 1.0            2007/10/01
;=====================================================================

;---------------------------------------------------------------------
; 合掌ひねり
;---------------------------------------------------------------------
;------------------- 超必殺技演出・初期化
[Statedef 3000]
type		= A
movetype	= I
physics		= N
anim		= 3000
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3000, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3000, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3000, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3001

;------------------- 超必殺技演出・実行
[Statedef 3001]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3001, Freeze]
type		= PosFreeze
trigger1	= 1

[State 3001, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3001, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 0
value		= 248, 248, 248
time		= 2
under		= 1

[State 3001, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3001, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimElemTime(1) - 1 = [0, 28-2]
flag		= NoFG

[State 3001, Afterimage]
type		= AfterImage
trigger1	= AnimElemTime(1) - 1 = 0
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3001, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2200
ID			= 2200
pos			= Floor(-9 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3001, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2250
ID			= 2250
pos			= Floor(-9 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3001, CutIn Init Require]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
var(1)		= (Var(1) | 256)

[State 3001, CutIn Scale]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
fvar(4)		= 1.25

[State 3001, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 6200

[State 3001, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 6210
ID			= 6200
pos			= 90, 200
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3001, PlaySnd]
type		= PlaySnd
trigger1	= AnimElemTime(1) - 1 = 0
value		= 3000, (Random >= 500)
channel		= 0
volume		= 200

[State 3001, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElemTime(1) - 1 = 0
time		= 28
movetime	= 28
anim		= -1
sound		= S2100, 0
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3001, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 3010

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- SC発動
[Statedef 3005]
type		= A
movetype	= I
physics		= N
anim		= 3000
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3005, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3005, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3005, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3005, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3005, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3005, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3005, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3005, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3000

;------------------- 発動・初期化
[Statedef 3010]
type		= A
movetype	= A
physics		= N
anim		= 3011
ctrl		= 0
velset		= 6.5*Const(size.xscale), -5.0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3010, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2070, 1

[State 3010, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3010, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3011

;------------------- 発動・実行
[Statedef 3011]
type		= A
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3011, Gravity]
type		= Gravity
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) > 0

[State 3011, Speed Correct Key Value X]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(0)		= 0

[State 3011, Speed Correct Key Value Y]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(58)		= 0

[State 3011, Speed Correct Key Value X]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(0)		= !!(Var(25) & 512) - !!(Var(25) & 1024)

[State 3011, Speed Correct Key Value Y]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(58)		= !!(Var(25) & 128) - !!(Var(25) & 256)

[State 3011, Speed Correct X]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
trigger1	= Var(0)
x			= 1.0 + 0.25 * Var(0) * IfElse( Var(58), 0.70710678118654752440084436210485, 1.0 )

[State 3011, Speed Correct Y]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
trigger1	= Var(58)
y			= 1.0 + 0.5 * Var(58) * IfElse( Var(0), 0.70710678118654752440084436210485, 1.0 )

[State 3011, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(4) < 0
value		= SCA
ignorehitpause	= 1

[State 3011, NotHitBy]
type		= NotHitBy
trigger1	= MoveHit || HitCount
value		= SCA
ignorehitpause	= 1

[State 3011, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 3030

[State 3011, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 3011, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(13) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3011, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) >= 4
affectteam					= E
attr						= A, HA
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-66 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3011, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) >= 4
affectteam					= E
attr						= A, HA
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-66 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(13)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3011, PosSet]
type		= PosSet
triggerall	= !(Var(18) & 528482304)
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 3011, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemNo(0) >= 13 && Pos Y >= 0
value		= 3020

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 着地・初期化
[Statedef 3020]
type		= S
movetype	= A
physics		= N
anim		= 3020
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3020, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 3020, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 3020, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3021

;------------------- 着地・実行
[Statedef 3021]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3021, AfterImageTime]
type		= AfterImageTime
trigger1	= AnimTime = -5
time		= 0

[State 3021, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 掴み成功・初期化
[Statedef 3030]
type		= S
movetype	= A
physics		= N
anim		= 3030
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3030, TargetState]
type		= TargetState
trigger1	= 1
value		= 3040 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3030, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3030, AfterImageTime]
type		= AfterImageTime
trigger1	= 1
time		= 0

[State 3030, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3031

;------------------- 掴み成功・実行
[Statedef 3031]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3031, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3031, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(3) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, PosFreeze]
type		= PosFreeze
trigger1	= AnimElem != 19

[State 3031, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3031, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3031, PosSet]
type		= PosSet
trigger1	= AnimElemTime(1) = 0
y			= 0

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= 24 * Const(size.xscale), -86 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 2
pos			= 5 * Const(size.xscale), -91 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, Width]
type		= Width
trigger1	= AnimElem = 2
edge		= Floor(20*Const(size.xscale)), Floor(45*Const(size.xscale))

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 3
pos			= -20 * Const(size.xscale), -93 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
pos			= -34 * Const(size.xscale), -86 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 5
pos			= -42 * Const(size.xscale), -83 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
pos			= -46 * Const(size.xscale), -82 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 7
pos			= -36 * Const(size.xscale), -82 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 8
pos			= -8 * Const(size.xscale), -85 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 9
pos			= 45 * Const(size.xscale), -100 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 1
value		= 2201, 0

[State 3031, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 2040, 5

[State 3031, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 8
value		= 2201, 1

[State 3031, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 9
value		= 2040, 4

[State 3031, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 3000, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 3031, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 2
value		= -Ceil(135 * FVar(9) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)
kill		= 0

[State 3031, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 10
value		= -Ceil(135 * FVar(9) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3031, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 2
var(58)		= Floor( 0 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3031, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 10
var(58)		= Floor( 0 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3031, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3031, HitAdd]
type		= HitAdd
triggerall	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 10
value		= 1

[State 3031, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 5000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 10
var(7)		= 5000

[State 3031, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 2000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 10
var(7)		= 2000

[State 3031, Hit]	; 爆発　途中
type						= Projectile
triggerall					= AnimElem = 2
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3031 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(135 * FVar(9)), Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3031, Hit]	; 爆発　ラスト
type						= Projectile
triggerall					= AnimElemTime(10) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3032 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(135 * FVar(9)), Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3031, Hit]	; 空振り用(通常モード)　途中
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 2
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(135 * FVar(9)), Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3031, Hit]	; 空振り用(通常モード)　ラスト
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 10
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(135 * FVar(9)), Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3031, Hit]	; 空振り用(通常モード以外)　途中
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 2
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(135 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3031, Hit]	; 空振り用(通常モード以外)　ラスト
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 10
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(135 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3031, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 10
var(1)		= (Var(1) | 524288)

[State 3031, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 19
x			= 9*Const(size.xscale)

[State 3031, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 合掌ひねり(喰らい側)
;---------------------------------------------------------------------
;------------------- ぶん回され・初期化(通常)
[Statedef 3040]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3040, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3040, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 3040, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3040, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3040, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3040

[State 3040, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3040, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3041

;------------------- ぶん回され・実行(通常)
[Statedef 3041]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3041, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3041, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3041, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3041, ChangeState]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 150
value		= 3042

;------------------- 投げ捨てられ・初期化(通常)
[Statedef 3042]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -4.5, -11.25
anim		= IfElse( SelfAnimExist(5052), 5052, IfElse(SelfAnimExist(5051), 5051, 5050) )

[State 3042, PosAdd]
type 		= PosAdd
trigger1	= 1
y			= -Const(size.mid.pos.y)

[State 3042, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3043

;------------------- 投げ捨てられ・実行(通常)
[Statedef 3043]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3043, ChangeAnim]
type		= ChangeAnim
triggerall	= Anim != [5060, 5069]
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061) || SelfAnimExist(5062))
value		= IfElse( SelfAnimExist(5062), 5062, IfElse(SelfAnimExist(5061), 5061, 5060) )

[State 3043, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3043, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3043, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3043, VelAdd]
type		= VelAdd
trigger1	= Time > 0 && Pos Y < 0
y			= .44

[State 3043, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3043, EnvShake]
type		= EnvShake
trigger1	= Time > 0 && Pos Y >= 0
time		= 25

[State 3043, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -6.0

[State 3043, VelMul]
type		= VelMul
trigger1	= Time > 0 && Pos Y >= 0
x			= 0.75

[State 3043, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7042

;------------------- ぶん回され・初期化(G)
[Statedef 3045]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3045, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3045, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 3045, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3045, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3045, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3040

[State 3045, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3045, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3046

;------------------- ぶん回され・実行(G)
[Statedef 3046]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3046, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3046, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3046, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3046, ChangeState]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 150
value		= 3047

;------------------- 投げ捨てられ・初期化(G)
[Statedef 3047]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -4.5, -11.25
anim		= IfElse( SelfAnimExist(5052), 5052, IfElse(SelfAnimExist(5051), 5051, 5050) )

[State 3047, PosAdd]
type 		= PosAdd
trigger1	= 1
y			= -Const(size.mid.pos.y)

[State 3047, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3048

;------------------- 投げ捨てられ・実行(G)
[Statedef 3048]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3048, ChangeAnim]
type		= ChangeAnim
triggerall	= Anim != [5060, 5069]
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061) || SelfAnimExist(5062))
value		= IfElse( SelfAnimExist(5062), 5062, IfElse(SelfAnimExist(5061), 5061, 5060) )

[State 3048, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3048, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3048, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3048, VelAdd]
type		= VelAdd
trigger1	= Time > 0 && Pos Y < 0
y			= .44

[State 3048, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3048, EnvShake]
type		= EnvShake
trigger1	= Time > 0 && Pos Y >= 0
time		= 25

[State 3048, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -6.0

[State 3048, VelMul]
type		= VelMul
trigger1	= Time > 0 && Pos Y >= 0
x			= 0.75

[State 3048, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7047

;---------------------------------------------------------------------
; MAX版・合掌ひねり
;---------------------------------------------------------------------
;------------------- 超必殺技演出・初期化
[Statedef 3100]
type		= A
movetype	= I
physics		= N
anim		= 3000
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3100, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -2000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3100, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3100, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3101

;------------------- 超必殺技演出・実行
[Statedef 3101]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3101, Freeze]
type		= PosFreeze
trigger1	= 1

[State 3101, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3101, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 0
value		= 248, 248, 248
time		= 2
under		= 1

[State 3101, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3101, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimElemTime(1) - 1 = [0, 28-2]
flag		= NoFG

[State 3101, Afterimage]
type		= AfterImage
trigger1	= AnimElemTime(1) - 1 = 0
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3101, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2201
ID			= 2201
pos			= Floor(-9 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3101, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2251
ID			= 2251
pos			= Floor(-9 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3101, CutIn Init Require]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
var(1)		= (Var(1) | 256)

[State 3101, CutIn Scale]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
fvar(4)		= 1.25

[State 3101, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 6200

[State 3101, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 6234
ID			= 6200
pos			= 90, 200
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3101, PlaySnd]
type		= PlaySnd
trigger1	= AnimElemTime(1) - 1 = 0
value		= 3000, (Random >= 500)
channel		= 0
volume		= 200

[State 3101, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElemTime(1) - 1 = 0
time		= 28
movetime	= 28
anim		= -1
sound		= S2100, 1
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3101, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 3110

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- SC発動
[Statedef 3105]
type		= A
movetype	= I
physics		= N
anim		= 3000
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3105, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3105, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3105, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3105, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3105, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3105, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3105, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3105, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3100

;------------------- 発動・初期化
[Statedef 3110]
type		= A
movetype	= A
physics		= N
anim		= 3010
ctrl		= 0
velset		= 6.5*Const(size.xscale), -5.0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3110, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2070, 1

[State 3110, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3110, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3111

;------------------- 発動・実行
[Statedef 3111]
type		= A
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3111, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(4) && AnimElemTime(10) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 3111, Gravity]
type		= Gravity
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) > 0

[State 3111, Speed Correct Key Value X]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(0)		= 0

[State 3111, Speed Correct Key Value Y]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(58)		= 0

[State 3111, Speed Correct Key Value X]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(0)		= !!(Var(25) & 512) - !!(Var(25) & 1024)

[State 3111, Speed Correct Key Value Y]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
var(58)		= !!(Var(25) & 128) - !!(Var(25) & 256)

[State 3111, Speed Correct X]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
trigger1	= Var(0)
x			= 1.0 + 0.25 * Var(0) * IfElse( Var(58), 0.70710678118654752440084436210485, 1.0 )

[State 3111, Speed Correct Y]
type		= VelMul
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 1
trigger1	= Var(58)
y			= 1.0 + 0.5 * Var(58) * IfElse( Var(0), 0.70710678118654752440084436210485, 1.0 )

[State 3111, NotHitBy]
type		= NotHitBy
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(10) < 0
value		= SCA
ignorehitpause	= 1

[State 3111, NotHitBy]
type		= NotHitBy
trigger1	= MoveHit || HitCount
value		= SCA
ignorehitpause	= 1

[State 3111, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 3130

[State 3111, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 3111, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(13) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3111, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
trigger1					= AnimElemNo(0) >= 4
affectteam					= E
attr						= A, HA
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-66 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3111, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
trigger1					= AnimElemNo(0) >= 4
affectteam					= E
attr						= A, HA
animtype					= Hard
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2020
guard.sparkno				= S2070
sparkxy						= Floor(-10 * Const(size.xscale)), Floor(-66 * Const(size.yscale))
hitsound					= S2030, 1
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
p1facing					= 1
p2facing					= 1
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(13)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3111, PosSet]
type		= PosSet
triggerall	= !(Var(18) & 528482304)
trigger1	= Pos Y + Vel Y >= 0
y			= 0

[State 3111, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemNo(0) >= 13 && Pos Y >= 0
value		= 3120

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 着地・初期化
[Statedef 3120]
type		= S
movetype	= A
physics		= N
anim		= 3020
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3120, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2080, 0

[State 3120, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 3120, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3121

;------------------- 着地・実行
[Statedef 3121]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3121, AfterImageTime]
type		= AfterImageTime
trigger1	= AnimTime = -5
time		= 0

[State 3121, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- 掴み成功・初期化
[Statedef 3130]
type		= S
movetype	= A
physics		= N
anim		= 3130
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3130, TargetState]
type		= TargetState
trigger1	= 1
value		= 3140 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3130, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3130, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3131

;------------------- 掴み成功・実行
[Statedef 3131]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3131, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3131, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(3) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, PosFreeze]
type		= PosFreeze
trigger1	= AnimElem != 46

[State 3131, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3131, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3131, PosSet]
type		= PosSet
trigger1	= AnimElem = 1
y			= 0

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= 24 * Const(size.xscale), -86 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 2
trigger2	= AnimElem = 12
trigger3	= AnimElem = 22
pos			= 5 * Const(size.xscale), -91 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, Width]
type		= Width
trigger1	= AnimElem = 2
edge		= Floor(20*Const(size.xscale)), Floor(45*Const(size.xscale))

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 3
trigger2	= AnimElem = 13
trigger3	= AnimElem = 23
pos			= -20 * Const(size.xscale), -93 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
trigger2	= AnimElem = 14
trigger3	= AnimElem = 24
pos			= -34 * Const(size.xscale), -86 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 5
trigger2	= AnimElem = 15
trigger3	= AnimElem = 25
pos			= -42 * Const(size.xscale), -83 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
trigger2	= AnimElem = 16
trigger3	= AnimElem = 26
pos			= -46 * Const(size.xscale), -82 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 7
trigger2	= AnimElem = 17
pos			= -24 * Const(size.xscale), -91 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 8
trigger2	= AnimElem = 18
pos			= 2 * Const(size.xscale), -92 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 9
trigger2	= AnimElem = 19
pos			= 16 * Const(size.xscale), -87 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 10
trigger2	= AnimElem = 20
pos			= 24 * Const(size.xscale), -84 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 11
trigger2	= AnimElem = 21
pos			= 27 * Const(size.xscale), -83 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 27
pos			= -36 * Const(size.xscale), -82 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 28
pos			= -8 * Const(size.xscale), -85 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 29
pos			= 45 * Const(size.xscale), -100 * Const(size.yscale)
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 1
trigger2	= AnimElem = 6
trigger3	= AnimElem = 11
trigger4	= AnimElem = 16
trigger5	= AnimElem = 21
value		= 2201, 0

[State 3131, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
trigger2	= AnimElem = 7
trigger3	= AnimElem = 12
trigger4	= AnimElem = 17
trigger5	= AnimElem = 22
value		= 2040, 5

[State 3131, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 28
value		= 2201, 1

[State 3131, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 29
value		= 2040, 4

[State 3131, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 2
value		= 900, (Random % 4)
channel		= 0
volume		= 200

[State 3131, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 31
value		= 3100, 0
channel		= 0
volume		= 200

[State 3131, TargetLifeAdd]	; 途中
type		= TargetLifeAdd
trigger1	= AnimElem = 2
trigger2	= AnimElem = 7
trigger3	= AnimElem = 12
trigger4	= AnimElem = 17
trigger5	= AnimElem = 22
value		= -Ceil(50 * FVar(9) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)
kill		= 0

[State 3131, TargetLifeAdd]	; ラスト
type		= TargetLifeAdd
trigger1	= AnimElem = 30
value		= -Ceil(155 * FVar(9) * (Const(data.attack)/100.0))
absolute	= 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3131, Give Power]	; 途中
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 2
trigger2	= AnimElem = 7
trigger3	= AnimElem = 12
trigger4	= AnimElem = 17
trigger5	= AnimElem = 22
var(58)		= Floor( 0 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3131, Give Power]	; ラスト
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 30
var(58)		= Floor( 0 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3131, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3131, HitAdd]
type		= HitAdd
triggerall	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 7
trigger2	= AnimElem = 12
trigger3	= AnimElem = 17
trigger4	= AnimElem = 22
trigger5	= AnimElem = 30
value		= 1

[State 3131, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 5000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 30
var(7)		= 5000

[State 3131, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 4000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 30
var(7)		= 4000

[State 3131, Hit]	; 爆発　途中
type						= Projectile
triggerall					= (AnimElem = 2 || AnimElem = 7 || AnimElem = 12 || AnimElem = 17 || AnimElem = 22)
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3031 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(50 * FVar(9)), Ceil(10 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 2
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 8
ground.hittime				= 8
guard.slidetime				= 8
guard.ctrltime				= 8
guard.hittime				= 17
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3131, Hit]	; 爆発　ラスト
type						= Projectile
triggerall					= AnimElemTime(30) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3032 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(155 * FVar(9)), Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3131, Hit]	; 空振り用(通常モード)　途中
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= (AnimElem = 2 || AnimElem = 7 || AnimElem = 12 || AnimElem = 17 || AnimElem = 22)
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(50 * FVar(9)), Ceil(10 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 2
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 8
ground.hittime				= 8
guard.slidetime				= 8
guard.ctrltime				= 8
guard.hittime				= 17
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3131, Hit]	; 空振り用(通常モード)　ラスト
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 30
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(155 * FVar(9)), Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3131, Hit]	; 空振り用(通常モード以外)　途中
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= (AnimElem = 2 || AnimElem = 7 || AnimElem = 12 || AnimElem = 17 || AnimElem = 22)
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(50 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 2
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 8
ground.hittime				= 8
guard.slidetime				= 8
guard.ctrltime				= 8
guard.hittime				= 17
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3131, Hit]	; 空振り用(通常モード以外)　ラスト
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 30
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(155 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3131, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 30
var(1)		= (Var(1) | 524288)

[State 3131, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 19
x			= 9*Const(size.xscale)

[State 3131, AfterImageTime]
type		= AfterImageTime
trigger1	= AnimTime = -5
time		= 0

[State 3131, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX版・合掌ひねり(喰らい側)
;---------------------------------------------------------------------
;------------------- ぶん回され・初期化(通常)
[Statedef 3140]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3140, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3140, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 3140, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3140, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3140, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3140

[State 3140, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3140, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3141

;------------------- ぶん回され・実行(通常)
[Statedef 3141]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3141, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3141, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3141, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3141, ChangeState]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 300
value		= 3142

;------------------- 投げ捨てられ・初期化(通常)
[Statedef 3142]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -6.25, -13.0
anim		= IfElse( SelfAnimExist(5052), 5052, IfElse(SelfAnimExist(5051), 5051, 5050) )

[State 3142, PosAdd]
type 		= PosAdd
trigger1	= 1
y			= -Const(size.mid.pos.y)

[State 3142, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3143

;------------------- 投げ捨てられ・実行(通常)
[Statedef 3143]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3143, ChangeAnim]
type		= ChangeAnim
triggerall	= Anim != [5060, 5069]
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061) || SelfAnimExist(5062))
value		= IfElse( SelfAnimExist(5062), 5062, IfElse(SelfAnimExist(5061), 5061, 5060) )

[State 3143, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3143, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3143, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3143, VelAdd]
type		= VelAdd
trigger1	= Time > 0 && Pos Y < 0
y			= .44

[State 3143, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3143, EnvShake]
type		= EnvShake
trigger1	= Time > 0 && Pos Y >= 0
time		= 25

[State 3143, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -7.5

[State 3143, VelMul]
type		= VelMul
trigger1	= Time > 0 && Pos Y >= 0
x			= 0.75

[State 3143, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7052

;------------------- ぶん回され・初期化(G)
[Statedef 3145]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3145, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3145, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 3145, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3145, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3145, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3140

[State 3145, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3145, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3146

;------------------- ぶん回され・実行(G)
[Statedef 3146]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3146, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3146, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3146, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3146, ChangeState]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 300
value		= 3147

;------------------- 投げ捨てられ・初期化(G)
[Statedef 3147]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -6.25, -13.0
anim		= IfElse( SelfAnimExist(5052), 5052, IfElse(SelfAnimExist(5051), 5051, 5050) )

[State 3147, PosAdd]
type 		= PosAdd
trigger1	= 1
y			= -Const(size.mid.pos.y)

[State 3147, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3148

;------------------- 投げ捨てられ・実行(G)
[Statedef 3148]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3148, ChangeAnim]
type		= ChangeAnim
triggerall	= Anim != [5060, 5069]
trigger1	= Vel Y > 0 && (SelfAnimExist(5060) || SelfAnimExist(5061) || SelfAnimExist(5062))
value		= IfElse( SelfAnimExist(5062), 5062, IfElse(SelfAnimExist(5061), 5061, 5060) )

[State 3148, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3148, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3148, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3148, VelAdd]
type		= VelAdd
trigger1	= Time > 0 && Pos Y < 0
y			= .44

[State 3148, PosSet]
type		= PosSet
trigger1	= Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3148, EnvShake]
type		= EnvShake
trigger1	= Time > 0 && Pos Y >= 0
time		= 25

[State 3148, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -7.5

[State 3148, VelMul]
type		= VelMul
trigger1	= Time > 0 && Pos Y >= 0
x			= 0.75

[State 3148, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7057

;---------------------------------------------------------------------
; 大一番(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3200]
type		= S
movetype	= I
physics		= N
anim		= 3200
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3200, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3200, EnvColor]
type		= EnvColor
trigger1	= 1
value		= 248, 248, 248
time		= 2
under		= 1

[State 3200, AfterImage]
type		= AfterImage
trigger1	= 1
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3200, Explod]
type		= Explod
trigger1	= 1
anim		= 2200
ID			= 2200
pos			= Floor(30 * Const(size.xscale)), Floor(-33 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3200, Explod]
type		= Explod
trigger1	= 1
anim		= 2250
ID			= 2250
pos			= Floor(30 * Const(size.xscale)), Floor(-33 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3200, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= 1
time		= 28+8
movetime	= 28+8
anim		= -1
sound		= S2100, 0
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3200, CutIn Init Require]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 256)

[State 3200, CutIn Scale]
type		= VarSet
trigger1	= 1
fvar(4)		= 1.25

[State 3200, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 6200

[State 3200, Explod]
type		= Explod
trigger1	= 1
anim		= 6233
ID			= 6200
pos			= 90, 200
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3200, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 3200, 0
channel		= 0
volume		= 200

[State 3200, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3200, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3201

;------------------- 実行
[Statedef 3201]
type		= S
movetype	= I
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3201, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(15) < 0
value		= SCA
ignorehitpause	= 1

[State 3201, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(13) && AnimElemTime(15) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 3201, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 3208

[State 3201, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 3201, EnvColor]
type		= EnvColor
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3201, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) = [0, 28-2]
flag		= NoFG

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 2*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
x			= 8*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 5
x			= 8*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
x			= 2*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 11
x			= 8*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 6*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 18
x			= 8*Const(size.xscale)

[State 3201, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 19
x			= 5*Const(size.xscale)

[State 3201, StateTypeSet]
type		= StateTypeSet
trigger1	= AnimElemNo(0) >= 13
movetype	= A
ignorehitpause	= 1

[State 3201, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(15) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3201, Throw]	; ガー不
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= AnimElemNo(0) >= 13
triggerall					= P2Dist X >= (-42-28)*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= (42-28)*Const(size.xscale)
trigger2					= P2Dist X <= (42-28)*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= S, HT
animtype					= DiagUp
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= M-
priority					= 5, Miss
pausetime					= 1, 32
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2030
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
envshake.ampl				= 8
envshake.time				= 21

[State 3201, Throw Hit]	; やられヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= P2MoveType = H
triggerall					= !((P2StateNo = 120) || (P2StateNo = [130, 132]) || (P2StateNo = 140) || (P2StateNo = [150, 155]))
triggerall					= AnimElemNo(0) >= 13
triggerall					= P2Dist X >= (-42-28)*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= (42-28)*Const(size.xscale)
trigger2					= P2Dist X <= (42-28)*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= S, HT
animtype					= DiagUp
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= M
priority					= 5, Miss
pausetime					= 1, 32
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2030
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
envshake.ampl				= 8
envshake.time				= 21

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= HitDef
trigger1	= 0 <= AnimElemTime(15)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3201, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
value		= 3200, 1
channel		= 0
volume		= 200

[State 3201, AfterImage]
type		= AfterImageTime
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime = -5
time		= 0

[State 3201, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- SC発動・初期化
[Statedef 3205]
type		= S
movetype	= I
physics		= N
anim		= 3200
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3205, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3205, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3205, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3205, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3205, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3205, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3205, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3205, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3200

;---------------------------------------------------------------------
; 大一番(成功・ヒットストップ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3208]
type		= S
movetype	= A
physics		= N
anim		= 3200
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3208, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 3208, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 3208, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3208, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3209

;------------------- 実行
[Statedef 3209]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3209, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3209, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3209, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3209, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 3200
elem		= 10

[State 3209, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 30
value		= 3210

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 大一番(張り手)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3210]
type		= S
movetype	= A
physics		= N
anim		= 3210
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3210, TargetState]
type		= TargetState
trigger1	= 1
value		= 3250
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3210, AfterImageTime]
type		= AfterImageTime
trigger1	= 1
time		= 0

[State 3210, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3210, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3211

;------------------- 実行
[Statedef 3211]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State 3211, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3211, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3211, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(11) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3211, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3211, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 3
trigger2	= AnimElem = 12
trigger3	= AnimElem = 13
x			= 4*Const(size.xscale)

[State 3211, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 6
x			= 7*Const(size.xscale)

[State 3211, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 13, =2
trigger2	= AnimElem = 19, =2
x			= -3*Const(size.xscale)

[State 3211, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 19
trigger2	= AnimElem = 24
x			= 11*Const(size.xscale)

[State 3211, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 4
trigger2	= AnimElem = 15
trigger3	= AnimElem = 20

trigger4	= AnimElem = 38
trigger5	= AnimElem = 40
trigger6	= AnimElem = 42
trigger7	= AnimElem = 43
trigger8	= AnimElem = 44
trigger9	= AnimElem = 48

trigger10	= AnimElem = 49
trigger11	= AnimElem = 51
trigger12	= AnimElem = 53
trigger13	= AnimElem = 54
trigger14	= AnimElem = 55
trigger15	= AnimElem = 59

trigger16	= AnimElem = 60
trigger17	= AnimElem = 62
trigger18	= AnimElem = 64
trigger19	= AnimElem = 65
trigger20	= AnimElem = 66
trigger21	= AnimElem = 70

trigger22	= AnimElem = 71
trigger23	= AnimElem = 73
trigger24	= AnimElem = 75
trigger25	= AnimElem = 76
trigger26	= AnimElem = 77
trigger27	= AnimElem = 81

trigger28	= AnimElem = 82
trigger29	= AnimElem = 84
trigger30	= AnimElem = 86
trigger31	= AnimElem = 87
trigger32	= AnimElem = 88
trigger33	= AnimElem = 92

trigger34	= AnimElem = 93
x			= 6*Const(size.xscale)

[State 3211, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 41, =2
trigger2	= AnimElem = 52, =2
trigger3	= AnimElem = 63, =2
trigger4	= AnimElem = 74, =2
trigger5	= AnimElem = 85, =2
x			= -3*Const(size.xscale)

[State 3211, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5
value		= 3200, 2
channel		= 0
volume		= 200

[State 3211, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 19, =1
trigger3	= AnimElem = 41, =1
trigger4	= AnimElem = 52, =1
trigger5	= AnimElem = 63, =1
trigger6	= AnimElem = 74, =1
trigger7	= AnimElem = 85, =1
value		= 2000, 0

[State 3211, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 13, =1
trigger2	= AnimElem = 31, =1
trigger3	= AnimElem = 46, =1
trigger4	= AnimElem = 57, =1
trigger5	= AnimElem = 68, =1
trigger6	= AnimElem = 79, =1
trigger7	= AnimElem = 90, =1
value		= 2000, 1

[State 3211, TargetState]
type		= TargetState
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 19, =1
trigger3	= AnimElem = 41, =1
trigger4	= AnimElem = 52, =1
trigger5	= AnimElem = 63, =1
trigger6	= AnimElem = 74, =1
trigger7	= AnimElem = 85, =1
value		= 3250
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3211, TargetState]
type		= TargetState
trigger1	= AnimElem = 13, =1
trigger2	= AnimElem = 31, =1
trigger3	= AnimElem = 46, =1
trigger4	= AnimElem = 57, =1
trigger5	= AnimElem = 68, =1
trigger6	= AnimElem = 79, =1
trigger7	= AnimElem = 90, =1
value		= 3252
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3211, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 13, =1
trigger3	= AnimElem = 19, =1
trigger4	= AnimElem = 31, =1
trigger5	= AnimElem = 41, =1
trigger6	= AnimElem = 46, =1
trigger7	= AnimElem = 52, =1
trigger8	= AnimElem = 57, =1
trigger9	= AnimElem = 63, =1
trigger10	= AnimElem = 68, =1
trigger11	= AnimElem = 74, =1
trigger12	= AnimElem = 79, =1
trigger13	= AnimElem = 85, =1
trigger14	= AnimElem = 90, =1
absolute	= 0
kill		= 0
value		= -Floor(18 * FVar(9) * (Const(data.attack)/100.0))
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3211, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3211, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 13, =1
trigger3	= AnimElem = 19, =1
trigger4	= AnimElem = 31, =1
trigger5	= AnimElem = 41, =1
trigger6	= AnimElem = 46, =1
trigger7	= AnimElem = 52, =1
trigger8	= AnimElem = 57, =1
trigger9	= AnimElem = 63, =1
trigger10	= AnimElem = 68, =1
trigger11	= AnimElem = 74, =1
trigger12	= AnimElem = 79, =1
trigger13	= AnimElem = 85, =1
trigger14	= AnimElem = 90, =1
var(58)		= Floor( 20 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3211, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3211, Hit]	; 爆発
type						= Projectile
triggerall					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1					= AnimElem = 5
trigger2					= AnimElem = 13
trigger3					= AnimElem = 19
trigger4					= AnimElem = 31
trigger5					= AnimElem = 41
trigger6					= AnimElem = 46
trigger7					= AnimElem = 52
trigger8					= AnimElem = 57
trigger9					= AnimElem = 63
trigger10					= AnimElem = 68
trigger11					= AnimElem = 74
trigger12					= AnimElem = 79
trigger13					= AnimElem = 85
trigger14					= AnimElem = 90
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3211 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(18 * FVar(9)), Floor(5 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 8
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 60
ground.hittime				= 60
guard.slidetime				= 60
guard.ctrltime				= 60
guard.hittime				= 60
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -9.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
guard.velocity				= -9.0 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= (-6.0 + 5.0*(AnimElemTime(90) >= 0)) * Const(size.xscale), -2.0 - 9.25*(AnimElemTime(90) >= 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 3211, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1					= AnimElem = 5
trigger2					= AnimElem = 13
trigger3					= AnimElem = 19
trigger4					= AnimElem = 31
trigger5					= AnimElem = 41
trigger6					= AnimElem = 46
trigger7					= AnimElem = 52
trigger8					= AnimElem = 57
trigger9					= AnimElem = 63
trigger10					= AnimElem = 68
trigger11					= AnimElem = 74
trigger12					= AnimElem = 79
trigger13					= AnimElem = 85
trigger14					= AnimElem = 90
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(18 * FVar(9)), Floor(5 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 8
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 60
ground.hittime				= 60
guard.slidetime				= 60
guard.ctrltime				= 60
guard.hittime				= 60
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -9.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
guard.velocity				= -9.0 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= (-6.0 + 5.0*(AnimElemTime(90) >= 0)) * Const(size.xscale), -2.0 - 9.25*(AnimElemTime(90) >= 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 3211, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1					= AnimElem = 5
trigger2					= AnimElem = 13
trigger3					= AnimElem = 19
trigger4					= AnimElem = 31
trigger5					= AnimElem = 41
trigger6					= AnimElem = 46
trigger7					= AnimElem = 52
trigger8					= AnimElem = 57
trigger9					= AnimElem = 63
trigger10					= AnimElem = 68
trigger11					= AnimElem = 74
trigger12					= AnimElem = 79
trigger13					= AnimElem = 85
trigger14					= AnimElem = 90
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(18 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 8
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 60
ground.hittime				= 60
guard.slidetime				= 60
guard.ctrltime				= 60
guard.hittime				= 60
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -9.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
guard.velocity				= -9.0 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= (-6.0 + 5.0*(AnimElemTime(90) >= 0)) * Const(size.xscale), -2.0 - 9.25*(AnimElemTime(90) >= 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 3211, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
trigger2	= AnimElem = 12
trigger3	= AnimElem = 18
trigger4	= AnimElem = 30
trigger5	= AnimElem = 40
trigger6	= AnimElem = 45
trigger7	= AnimElem = 51
trigger8	= AnimElem = 56
trigger9	= AnimElem = 62
trigger10	= AnimElem = 67
trigger11	= AnimElem = 73
trigger12	= AnimElem = 78
trigger13	= AnimElem = 84
trigger14	= AnimElem = 89
pos			= 35 * Const(size.xscale), 0
time		= 3
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3211, Explod]
type		= Explod
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 19, =1
trigger3	= AnimElem = 41, =1
trigger4	= AnimElem = 52, =1
trigger5	= AnimElem = 63, =1
trigger6	= AnimElem = 74, =1
trigger7	= AnimElem = 85, =1
anim		= 2030
ID			= 2030
pos			= Floor(47 * Const(size.xscale)), Floor(-75 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3211, Explod]
type		= Explod
trigger1	= AnimElem = 13, =1
trigger2	= AnimElem = 31, =1
trigger3	= AnimElem = 46, =1
trigger4	= AnimElem = 57, =1
trigger5	= AnimElem = 68, =1
trigger6	= AnimElem = 79, =1
trigger7	= AnimElem = 90, =1
anim		= 2030
ID			= 2030
pos			= Floor(38 * Const(size.xscale)), Floor(-58 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3211, HitAdd]
type		= HitAdd
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 13, =1
trigger3	= AnimElem = 19, =1
trigger4	= AnimElem = 31, =1
trigger5	= AnimElem = 41, =1
trigger6	= AnimElem = 46, =1
trigger7	= AnimElem = 52, =1
trigger8	= AnimElem = 57, =1
trigger9	= AnimElem = 63, =1
trigger10	= AnimElem = 68, =1
trigger11	= AnimElem = 74, =1
trigger12	= AnimElem = 79, =1
trigger13	= AnimElem = 85, =1
trigger14	= AnimElem = 90, =1
value		= 1

[State 3211, Width]
type		= Width
trigger1	= 1
edge		= Floor(40*Const(size.xscale))
player		= Floor(32*Const(size.xscale))

[State 3211, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 3220

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 大一番(投げ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3220]
type		= S
movetype	= A
physics		= N
anim		= 3220
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3220, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3220, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3221

;------------------- 実行
[Statedef 3221]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3221, TargetState]
type		= TargetState
trigger1	= AnimElem = 4
value		= 3260 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3221, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3221, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3221, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5
value		= 2030, 1

[State 3221, HitAdd]
type		= HitAdd
trigger1	= AnimElem = 5
value		= 1

[State 3221, Explod]
type		= Explod
trigger1	= AnimElem = 5
anim		= 2150
ID			= 2150
pos			= Floor(52 * Const(size.xscale)), Floor(-52 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3221, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 6
value		= 3200, 3
channel		= 0
volume		= 200

[State 3221, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 8
value		= 2040, 3

[State 3221, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 9
absolute	= 0
value		= -( Ceil(270 * FVar(9) * (Const(data.attack)/100.0)) - Floor(18 * FVar(9) * (Const(data.attack)/100.0)) * 14 )
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3221, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 9
var(58)		= Floor( 0 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3221, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 5000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 9
var(7)		= 5000

[State 3221, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 2000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 9
var(7)		= 2000

[State 3221, Hit]	; 爆発
type						= Projectile
triggerall					= AnimElemTime(9) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3221 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(270 * FVar(9)) - Floor(18 * FVar(9)) * 14, Ceil(10 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3221, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 9
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(270 * FVar(9)) - Floor(18 * FVar(9)) * 14, Ceil(10 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3221, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 9
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(270 * FVar(9)) - Floor(18 * FVar(9)) * 14
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3221, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 9
var(1)		= (Var(1) | 524288)

[State 3221, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
pos			= 45 * Const(size.xscale), 0
time		= 3
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
pos			= 40 * Const(size.xscale), 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 7
pos			= 36 * Const(size.xscale), -7 * Const(size.yscale)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 8
pos			= 32 * Const(size.xscale), -14 * Const(size.yscale)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3221, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 大一番(喰らい側1)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3250]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3250, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3250, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= S
movetype	= H
physics		= N

[State 3250, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3250, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3250, SprPriority]
type		= SprPriority
trigger1	= 1
value		= -2

[State 3250, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 3250, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5002

[State 3250, VelSet]
type		= VelSet
trigger1	= 1
x			= -4.2

[State 3250, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3250, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3251

;------------------- 実行
[Statedef 3251]
type		= S
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3251, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3251, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3251, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3251, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim = 5002
trigger1	= AnimTime >= 0
value		= 5007

[State 3251, VelMul]
type		= VelMul
trigger1	= 1
x			= 0.85

[State 3251, End]
type		= SelfState
trigger1	= Time >= 120
value		= 0
ctrl		= 1

;---------------------------------------------------------------------
; 大一番(喰らい側2)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3252]
type		= S
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3252, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 3252, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 5012

[State 3252, VelSet]
type		= VelSet
trigger1	= 1
x			= -4.2

[State 3252, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3253

;------------------- 実行
[Statedef 3253]
type		= S
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3253, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3253, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3253, ChangeAnim]
type		= ChangeAnim
trigger1	= Anim = 5012
trigger1	= AnimTime >= 0
value		= 5017

[State 3253, VelMul]
type		= VelMul
trigger1	= 1
x			= 0.85

[State 3253, End]
type		= SelfState
trigger1	= Time >= 120
value		= 0
ctrl		= 1

;---------------------------------------------------------------------
; 大一番(投げられ側)
;---------------------------------------------------------------------
;------------------- 初期化1(通常)
[Statedef 3260]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3260, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3260

[State 3260, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3261

;------------------- 実行1(通常)
[Statedef 3261]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3261, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3261, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3261, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3261, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 120
value		= 3262

;------------------- 初期化2(通常)
[Statedef 3262]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -3.0, -11.0

[State 3262, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 5050

[State 3262, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3263

;------------------- 実行2(通常)
[Statedef 3263]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3263, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3263, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3263, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3263, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3263, VelAdd]
type		= VelAdd
triggerall	= Pos Y < 0
trigger1	= AnimElem = 1, > 2
y			= .44

[State 3263, PosSet]
type		= PosSet
trigger1	= Time > 0 && Pos Y + Vel Y - Vel Y >= 0
y			= 0

[State 3263, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -2.0

[State 3263, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7040

;------------------- 初期化1(G)
[Statedef 3265]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3265, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3260

[State 3265, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3266

;------------------- 実行1(G)
[Statedef 3266]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3266, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3266, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3266, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3266, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 120
value		= 3267

;------------------- 初期化2(G)
[Statedef 3267]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -3.0, -11.0

[State 3267, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 5050

[State 3267, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3268

;------------------- 実行2(G)
[Statedef 3268]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3268, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3268, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3268, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3268, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3268, VelAdd]
type		= VelAdd
triggerall	= Pos Y < 0
trigger1	= AnimElem = 1, > 2
y			= .44

[State 3268, PosSet]
type		= PosSet
trigger1	= Time > 0 && Pos Y + Vel Y - Vel Y >= 0
y			= 0

[State 3268, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -2.0

[State 3268, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y = 0
trigger2	= Time >= 120
value		= 7045

;---------------------------------------------------------------------
; MAX大一番(始動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3300]
type		= S
movetype	= I
physics		= N
anim		= 3200
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3200, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -2000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3300, EnvColor]
type		= EnvColor
trigger1	= 1
value		= 248, 248, 248
time		= 2
under		= 1

[State 3300, AfterImage]
type		= AfterImage
trigger1	= 1
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3300, Explod]
type		= Explod
trigger1	= 1
anim		= 2201
ID			= 2201
pos			= Floor(30 * Const(size.xscale)), Floor(-33 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3300, Explod]
type		= Explod
trigger1	= 1
anim		= 2251
ID			= 2251
pos			= Floor(30 * Const(size.xscale)), Floor(-33 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3300, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= 1
time		= 28+8
movetime	= 28+8
anim		= -1
sound		= S2100, 1
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3300, CutIn Init Require]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 256)

[State 3300, CutIn Scale]
type		= VarSet
trigger1	= 1
fvar(4)		= 1.0

[State 3300, RemoveExplod]
type		= RemoveExplod
trigger1	= 1
ID			= 6200

[State 3300, Explod]
type		= Explod
trigger1	= 1
anim		= 6211
ID			= 6200
pos			= 90, 220
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3300, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 3200, 0
channel		= 0
volume		= 200

[State 3300, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3300, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3301

;------------------- 実行
[Statedef 3301]
type		= S
movetype	= I
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3301, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(15) < 0
value		= SCA
ignorehitpause	= 1

[State 3301, Push Pos Correct]
type		= PosSet
triggerall	= NumHelper(20000)
triggerall	= (Helper(20000),Var(0) = 20000)
trigger1	= 0 <= AnimElemTime(13) && AnimElemTime(15) <= 0
x			= Helper(20000),Pos X
ignorehitpause	= 1

[State 3301, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || (HitCount && !MoveReversed)
value		= 3308

[State 3301, TargetState] ; 演出待ちやられ
type		= TargetState
trigger1	= MoveHit = 1
value		= 7000
ID			= (10 + ((Var(16) & 240)/16-!(Var(18) & 528482304)+16)%16)
IgnoreHitPause	= 1

[State 3301, EnvColor]
type		= EnvColor
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3301, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) = [0, 28-2]
flag		= NoFG

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 2*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
x			= 8*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 5
x			= 8*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
x			= 2*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 11
x			= 8*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 17
x			= 6*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 18
x			= 8*Const(size.xscale)

[State 3301, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 19
x			= 5*Const(size.xscale)

[State 3301, StateTypeSet]
type		= StateTypeSet
trigger1	= AnimElemNo(0) >= 13
movetype	= A
ignorehitpause	= 1

[State 3301, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(15) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3301, Throw]	; ガー不
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= AnimElemNo(0) >= 13
triggerall					= P2Dist X >= (-42-28)*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= (42-28)*Const(size.xscale)
trigger2					= P2Dist X <= (42-28)*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= S, HT
animtype					= DiagUp
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= None
hitflag						= M-
priority					= 5, Miss
pausetime					= 1, 32
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2030
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
envshake.ampl				= 8
envshake.time				= 21

[State 3301, Throw Hit]	; やられヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= NumEnemy
triggerall					= P2MoveType = H
triggerall					= !((P2StateNo = 120) || (P2StateNo = [130, 132]) || (P2StateNo = 140) || (P2StateNo = [150, 155]))
triggerall					= AnimElemNo(0) >= 13
triggerall					= P2Dist X >= (-42-28)*Const(size.xscale) - 2*Const(size.ground.front)
trigger1					= P2BodyDist X <= (42-28)*Const(size.xscale)
trigger2					= P2Dist X <= (42-28)*Const(size.xscale) + Const(size.ground.front) + EnemyNear,Const(size.ground.front)
affectteam					= E
attr						= S, HT
animtype					= DiagUp
damage						= 0
getpower					= 0, 0
givepower					= 0, 0
guardflag					= M
hitflag						= M
priority					= 5, Miss
pausetime					= 1, 32
guard.pausetime				= 1, 0
id							= 10 + (Var(16) & 240)/16
numhit						= 0
hitonce						= 0
guard.kill					= 0
sparkno						= S2030
guard.sparkno				= S2070
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-65 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= 0
p1facing					= 1
p2facing					= 1
ground.type					= Low
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 0
guard.ctrltime				= 0
guard.hittime				= 0
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -3.5 * Const(size.xscale), -6
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -3.5 * Const(size.xscale), -6
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1
envshake.ampl				= 8
envshake.time				= 21

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= HitDef
trigger1	= 0 <= AnimElemTime(15)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3301, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 10
value		= 3200, 1
channel		= 0
volume		= 200

[State 3301, AfterImage]
type		= AfterImageTime
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime = -5
time		= 0

[State 3301, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- SC発動・初期化
[Statedef 3305]
type		= S
movetype	= I
physics		= N
anim		= 3200
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3305, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3305, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3305, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3305, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3305, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3305, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3305, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3305, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3300

;---------------------------------------------------------------------
; MAX大一番(成功・ヒットストップ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3308]
type		= S
movetype	= A
physics		= N
anim		= 3200
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3308, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 3308, PosSet]
type		= PosSet
trigger1	= 1
y			= 0

[State 3308, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3308, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3309

;------------------- 実行
[Statedef 3309]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3309, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3309, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3309, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3309, ChangeAnim]
type		= ChangeAnim
trigger1	= 1
value		= 3200
elem		= 10

[State 3309, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 30
value		= 3310

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX大一番(張り手)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3310]
type		= S
movetype	= A
physics		= N
anim		= 3210
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3310, TargetState]
type		= TargetState
trigger1	= 1
value		= 3250
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3310, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3310, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3311

;------------------- 実行
[Statedef 3311]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3311, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3311, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3311, TargetFacing]
type		= TargetFacing
trigger1	= 0 <= AnimElemTime(1) && AnimElemTime(11) < 0
value		= -1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3311, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3311, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 3
trigger2	= AnimElem = 12
trigger3	= AnimElem = 13
x			= 4*Const(size.xscale)

[State 3311, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 6
x			= 7*Const(size.xscale)

[State 3311, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 13, =2
trigger2	= AnimElem = 19, =2
x			= -3*Const(size.xscale)

[State 3311, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 19
trigger2	= AnimElem = 24
x			= 11*Const(size.xscale)

[State 3311, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 4
trigger2	= AnimElem = 15
trigger3	= AnimElem = 20

trigger4	= AnimElem = 38
trigger5	= AnimElem = 40
trigger6	= AnimElem = 42
trigger7	= AnimElem = 43
trigger8	= AnimElem = 44
trigger9	= AnimElem = 48

trigger10	= AnimElem = 49
trigger11	= AnimElem = 51
trigger12	= AnimElem = 53
trigger13	= AnimElem = 54
trigger14	= AnimElem = 55
trigger15	= AnimElem = 59

trigger16	= AnimElem = 60
trigger17	= AnimElem = 62
trigger18	= AnimElem = 64
trigger19	= AnimElem = 65
trigger20	= AnimElem = 66
trigger21	= AnimElem = 70

trigger22	= AnimElem = 71
trigger23	= AnimElem = 73
trigger24	= AnimElem = 75
trigger25	= AnimElem = 76
trigger26	= AnimElem = 77
trigger27	= AnimElem = 81

trigger28	= AnimElem = 82
trigger29	= AnimElem = 84
trigger30	= AnimElem = 86
trigger31	= AnimElem = 87
trigger32	= AnimElem = 88
trigger33	= AnimElem = 92

trigger34	= AnimElem = 93
x			= 6*Const(size.xscale)

[State 3311, PosAdd]
type		= PosAdd
trigger1	= AnimElem = 41, =2
trigger2	= AnimElem = 52, =2
trigger3	= AnimElem = 63, =2
trigger4	= AnimElem = 74, =2
trigger5	= AnimElem = 85, =2
x			= -3*Const(size.xscale)

[State 3311, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5
value		= 3200, 2
channel		= 0
volume		= 200

[State 3311, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 19, =1
trigger3	= AnimElem = 41, =1
trigger4	= AnimElem = 52, =1
trigger5	= AnimElem = 63, =1
trigger6	= AnimElem = 74, =1
trigger7	= AnimElem = 85, =1
value		= 2000, 0

[State 3311, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 13, =1
trigger2	= AnimElem = 31, =1
trigger3	= AnimElem = 46, =1
trigger4	= AnimElem = 57, =1
trigger5	= AnimElem = 68, =1
trigger6	= AnimElem = 79, =1
trigger7	= AnimElem = 90, =1
value		= 2000, 1

[State 3311, TargetState]
type		= TargetState
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 19, =1
trigger3	= AnimElem = 41, =1
trigger4	= AnimElem = 52, =1
trigger5	= AnimElem = 63, =1
trigger6	= AnimElem = 74, =1
trigger7	= AnimElem = 85, =1
value		= 3250
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3311, TargetState]
type		= TargetState
trigger1	= AnimElem = 13, =1
trigger2	= AnimElem = 31, =1
trigger3	= AnimElem = 46, =1
trigger4	= AnimElem = 57, =1
trigger5	= AnimElem = 68, =1
trigger6	= AnimElem = 79, =1
trigger7	= AnimElem = 90, =1
value		= 3252
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3311, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 13, =1
trigger3	= AnimElem = 19, =1
trigger4	= AnimElem = 31, =1
trigger5	= AnimElem = 41, =1
trigger6	= AnimElem = 46, =1
trigger7	= AnimElem = 52, =1
trigger8	= AnimElem = 57, =1
trigger9	= AnimElem = 63, =1
trigger10	= AnimElem = 68, =1
trigger11	= AnimElem = 74, =1
trigger12	= AnimElem = 79, =1
trigger13	= AnimElem = 85, =1
trigger14	= AnimElem = 90, =1
absolute	= 0
kill		= 0
value		= -Floor(18 * FVar(9) * (Const(data.attack)/100.0))
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3311, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3311, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 13, =1
trigger3	= AnimElem = 19, =1
trigger4	= AnimElem = 31, =1
trigger5	= AnimElem = 41, =1
trigger6	= AnimElem = 46, =1
trigger7	= AnimElem = 52, =1
trigger8	= AnimElem = 57, =1
trigger9	= AnimElem = 63, =1
trigger10	= AnimElem = 68, =1
trigger11	= AnimElem = 74, =1
trigger12	= AnimElem = 79, =1
trigger13	= AnimElem = 85, =1
trigger14	= AnimElem = 90, =1
var(58)		= Floor( 20 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3311, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3311, Hit]	; 爆発
type						= Projectile
triggerall					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1					= AnimElem = 5
trigger2					= AnimElem = 13
trigger3					= AnimElem = 19
trigger4					= AnimElem = 31
trigger5					= AnimElem = 41
trigger6					= AnimElem = 46
trigger7					= AnimElem = 52
trigger8					= AnimElem = 57
trigger9					= AnimElem = 63
trigger10					= AnimElem = 68
trigger11					= AnimElem = 74
trigger12					= AnimElem = 79
trigger13					= AnimElem = 85
trigger14					= AnimElem = 90
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3211 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(18 * FVar(9)), Floor(5 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 8
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 60
ground.hittime				= 60
guard.slidetime				= 60
guard.ctrltime				= 60
guard.hittime				= 60
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -9.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
guard.velocity				= -9.0 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= (-6.0 + 3.5*(AnimElemTime(90) >= 0)) * Const(size.xscale), -2.0 - 5.5*(AnimElemTime(90) >= 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 3311, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1					= AnimElem = 5
trigger2					= AnimElem = 13
trigger3					= AnimElem = 19
trigger4					= AnimElem = 31
trigger5					= AnimElem = 41
trigger6					= AnimElem = 46
trigger7					= AnimElem = 52
trigger8					= AnimElem = 57
trigger9					= AnimElem = 63
trigger10					= AnimElem = 68
trigger11					= AnimElem = 74
trigger12					= AnimElem = 79
trigger13					= AnimElem = 85
trigger14					= AnimElem = 90
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(18 * FVar(9)), Floor(5 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 8
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 60
ground.hittime				= 60
guard.slidetime				= 60
guard.ctrltime				= 60
guard.hittime				= 60
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -9.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
guard.velocity				= -9.0 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= (-6.0 + 3.5*(AnimElemTime(90) >= 0)) * Const(size.xscale), -2.0 - 5.5*(AnimElemTime(90) >= 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 3311, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1					= AnimElem = 5
trigger2					= AnimElem = 13
trigger3					= AnimElem = 19
trigger4					= AnimElem = 31
trigger5					= AnimElem = 41
trigger6					= AnimElem = 46
trigger7					= AnimElem = 52
trigger8					= AnimElem = 57
trigger9					= AnimElem = 63
trigger10					= AnimElem = 68
trigger11					= AnimElem = 74
trigger12					= AnimElem = 79
trigger13					= AnimElem = 85
trigger14					= AnimElem = 90
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(18 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 8
guard.pausetime				= 0, 8
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 60
ground.hittime				= 60
guard.slidetime				= 60
guard.ctrltime				= 60
guard.hittime				= 60
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -9.0 * Const(size.xscale) * FVar(2)
ground.cornerpush.veloff	= 0
guard.velocity				= -9.0 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= (-6.0 + 3.5*(AnimElemTime(90) >= 0)) * Const(size.xscale), -2.0 - 5.5*(AnimElemTime(90) >= 0)
air.cornerpush.veloff		= 0
fall.recover				= 1
air.fall					= 1

[State 3311, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
trigger2	= AnimElem = 12
trigger3	= AnimElem = 18
trigger4	= AnimElem = 30
trigger5	= AnimElem = 40
trigger6	= AnimElem = 45
trigger7	= AnimElem = 51
trigger8	= AnimElem = 56
trigger9	= AnimElem = 62
trigger10	= AnimElem = 67
trigger11	= AnimElem = 73
trigger12	= AnimElem = 78
trigger13	= AnimElem = 84
trigger14	= AnimElem = 89
pos			= 35 * Const(size.xscale), 0
time		= 3
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3311, Explod]
type		= Explod
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 19, =1
trigger3	= AnimElem = 41, =1
trigger4	= AnimElem = 52, =1
trigger5	= AnimElem = 63, =1
trigger6	= AnimElem = 74, =1
trigger7	= AnimElem = 85, =1
anim		= 2030
ID			= 2030
pos			= Floor(47 * Const(size.xscale)), Floor(-75 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3311, Explod]
type		= Explod
trigger1	= AnimElem = 13, =1
trigger2	= AnimElem = 31, =1
trigger3	= AnimElem = 46, =1
trigger4	= AnimElem = 57, =1
trigger5	= AnimElem = 68, =1
trigger6	= AnimElem = 79, =1
trigger7	= AnimElem = 90, =1
anim		= 2030
ID			= 2030
pos			= Floor(38 * Const(size.xscale)), Floor(-58 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3311, HitAdd]
type		= HitAdd
trigger1	= AnimElem = 5, =1
trigger2	= AnimElem = 13, =1
trigger3	= AnimElem = 19, =1
trigger4	= AnimElem = 31, =1
trigger5	= AnimElem = 41, =1
trigger6	= AnimElem = 46, =1
trigger7	= AnimElem = 52, =1
trigger8	= AnimElem = 57, =1
trigger9	= AnimElem = 63, =1
trigger10	= AnimElem = 68, =1
trigger11	= AnimElem = 74, =1
trigger12	= AnimElem = 79, =1
trigger13	= AnimElem = 85, =1
trigger14	= AnimElem = 90, =1
value		= 1

[State 3311, Width]
type		= Width
trigger1	= 1
edge		= Floor(40*Const(size.xscale))
player		= Floor(32*Const(size.xscale))

[State 3311, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 3320

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX大一番(寄り切り・掴み動作)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3320]
type		= S
movetype	= A
physics		= N
anim		= 3320
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3320, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3320, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3321

;------------------- 実行
[Statedef 3321]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3321, TargetState]
type		= TargetState
trigger1	= AnimElem = 4
value		= 1240 + 2*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3321, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3321, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3321, PosFreeze]
type		= PosFreeze
trigger1	= 1

[State 3321, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3321, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 4
value		= 1200, 2 + (Random >= 500)
channel		= 0
volume		= 200

[State 3321, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 4
value		= 2030, 1

[State 3321, Explod]
type		= Explod
trigger1	= AnimElem = 4
anim		= 2150
pos			= Floor(56 * Const(size.xscale)), Floor(-52 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 1
bindtime	= 1
ownpal		= 1

[State 3321, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 4
pos			= 43 * Const(size.xscale), 0
time		= 8
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3321, Width]
type		= Width
trigger1	= AnimElem = 1
edge		= Floor(45*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 3321, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 6
pos			= 39 * Const(size.xscale), 0
time		= 8
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3321, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 3330

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX大一番(寄り切り動作)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3330]
type		= S
movetype	= A
physics		= N
anim		= 1220
ctrl		= 0
velset		= 9.0*Const(size.xscale), 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3330, TargetState]
type		= TargetState
trigger1	= 1
value		= 1245 + 2*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3330, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 3330, Width]
type		= Width
trigger1	= 1
edge		= Floor(45*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 3330, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3330, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3331

;------------------- 実行
[Statedef 3331]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3331, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3331, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3331, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3331, PlaySnd]
type		= PlaySnd
trigger1	= ((Var(4) - Var(59)) % 70) = 0
value		= 2060, 0

[State 3331, PlaySnd]
type		= PlaySnd
trigger1	= ((Var(4) - Var(59)) % 70) = 21
value		= 2060, 1

[State 3331, PlaySnd]
type		= PlaySnd
trigger1	= ((Var(4) - Var(59)) % 70) = 47
value		= 2060, 2

[State 3331, TargetBind]
type		= TargetBind
trigger1	= 1
pos			= 40 * Const(size.xscale), 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3331, ScreenBound]
type		= ScreenBound
trigger1	= (Var(4) - Var(59)) > 150
value		= 1
movecamera	= 0, 0

[State 3331, End]
type		= ChangeState
trigger1	= FrontEdgeDist < 45
trigger2	= (Var(4) - Var(59)) >= 180
value		= 3340

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX大一番(寄り切り、壁ヒット)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3340]
type		= S
movetype	= A
physics		= N
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3340, Timer Reset]
type		= VarSet
trigger1	= 1
var(4)		= Var(59)

[State 3340, PlaySnd]
type		= PlaySnd
trigger1	= 1
value		= 2000, 7

[State 3340, EnvShake]
type		= EnvShake
trigger1	= 1
time		= 15

[State 3340, EnvColor]
type		= EnvColor
trigger1	= 1
time		= 2
value		= 248, 248, 248

[State 3340, TargetBind]
type		= TargetBind
trigger1	= 1
pos			= 50 * Const(size.xscale), 0
time		= 1
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3340, HitAdd]
type		= HitAdd
trigger1	= 1
value		= 1

[State 3340, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= 1
value		= -Floor(75 * FVar(9) * (Const(data.attack)/100.0))
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)
kill		= 0
absolute	= 0

[State 3340, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3340, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
var(58)		= Floor( 60 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3340, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= 1
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3340, Hit]	; 爆発
type						= Projectile
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 1221 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(75 * FVar(9)), Floor(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3340, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(75 * FVar(9)), Floor(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3340, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Floor(75 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3340, Width]
type		= Width
trigger1	= 1
edge		= Floor(45*Const(size.xscale)), Floor(20*Const(size.xscale))

[State 3340, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3340, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3341

;------------------- 実行
[Statedef 3341]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3341, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3341, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3341, Explod]
type		= Explod
trigger1	= (Var(4) - Var(59)) = 2
anim		= 2020
pos			= Floor(45 * Const(size.xscale)), Floor(-55 * Const(size.yscale))
postype		= P1
scale		= Const(size.xscale), Const(size.yscale)
sprpriority	= 3
bindtime	= 1
ownpal		= 1

[State 3341, Explod]
type		= Explod
trigger1	= (Var(4) - Var(59)) = 2
anim		= 2307
pos			= Floor(-3*Facing * Const(size.xscale)), Floor(ScreenPos Y - 60 * Const(size.yscale))
postype		= front
scale		= Const(size.xscale), Const(size.yscale)
facing		= -1*Facing
sprpriority	= -2
bindtime	= 1
ownpal		= 1
removeongethit	= 1

[State 3341, Explod]
type		= Explod
trigger1	= (Var(4) - Var(59)) = 2
anim		= 2308
pos			= Floor(-3*Facing * Const(size.xscale)), Floor(ScreenPos Y - 60 * Const(size.yscale))
postype		= front
scale		= Const(size.xscale), Const(size.yscale)
facing		= -1*Facing
sprpriority	= 2
bindtime	= 1
ownpal		= 1
removeongethit	= 1

[State 3341, End]
type		= ChangeState
trigger1	= (Var(4) - Var(59)) >= 8
value		= 3350

[State , State Timer]
type		= VarAdd
trigger1	= (Var(4) - Var(59)) < 512
var(4)		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX大一番(投げ)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3350]
type		= S
movetype	= A
physics		= N
anim		= 3350
ctrl		= 0
velset		= 0, 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3350, TargetState]
type		= TargetState
trigger1	= 1
value		= 3360 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3350, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3350, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3351

;------------------- 実行
[Statedef 3351]
type		= S
movetype	= A
physics		= N
ctrl		= 0
sprpriority	= 2

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3351, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3351, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3351, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3351, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 1
value		= 3200, 3
channel		= 0
volume		= 200

[State 3351, PlaySnd]
type		= PlaySnd
trigger1	= AnimElem = 3
value		= 2040, 3

[State 3351, HitAdd]
type		= HitAdd
trigger1	= AnimElem = 4
value		= 1

[State 3351, TargetLifeAdd]
type		= TargetLifeAdd
trigger1	= AnimElem = 4
absolute	= 0
value		= -( Ceil(405 * FVar(9) * (Const(data.attack)/100.0)) - Floor(75 * FVar(9) * (Const(data.attack)/100.0)) - Floor(18 * FVar(9) * (Const(data.attack)/100.0)) * 14 )
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3351, Give Power]	; こういう風にしないと、敵にパワー加算する時に原因不明のフリーズをする
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3351, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
triggerall	= NumTarget(10 + ((Var(16) & 240)/16-1+16)%16)
trigger1	= AnimElem = 4
var(58)		= Floor( 60 / 4.0 * FVar(5) * IfElse(Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax<Const(data.power),Target(10 + ((Var(16) & 240)/16-1+16)%16),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3351, TargetPowerAdd]
type		= TargetPowerAdd
trigger1	= Var(58)
value		= Var(58)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3351, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 5000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 4
var(7)		= 5000

[State 3351, HitCount Add]
type		= VarAdd
triggerall	= (Var(7) & 16383) <= 16383 - 4000
trigger1	= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 4
var(7)		= 4000

[State 3351, Hit]	; 爆発
type						= Projectile
triggerall					= AnimElemTime(4) = -3
trigger1					= NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= IfElse( Target((10 + ((Var(16) & 240)/16-1+16)%16)),IsHelper, 6000, 3221 )
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(405 * FVar(9)) - Floor(75 * FVar(9)) - Floor(18 * FVar(9)) * 14, Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3351, Hit]	; 空振り用(通常モード)
type						= Projectile
triggerall					= (Var(32) & 7) >= 4
triggerall					= AnimElem = 4
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 3
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(405 * FVar(9)) - Floor(75 * FVar(9)) - Floor(18 * FVar(9)) * 14, Ceil(15 * FVar(9))
getpower					= 0, 0
givepower					= 0, 0
guardflag					= MA
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 11
guard.pausetime				= 0, 11
numhit						= 1
hitonce						= 0
guard.kill					= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -2.5 * Const(size.xscale), -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -2.5 * Const(size.xscale), -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3351, Hit]	; 空振り用(通常モード以外)
type						= Projectile
triggerall					= (Var(32) & 7) < 4
triggerall					= AnimElem = 4
trigger1					= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
projID						= 0
projanim					= 6000
projremove					= 0
projremovetime				= 4
affectteam					= E
attr						= SCA, AA, AT, AP
animtype					= Hard
damage						= Ceil(405 * FVar(9)) - Floor(75 * FVar(9)) - Floor(18 * FVar(9)) * 14
getpower					= 0, 0
givepower					= 0, 0
;guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 0, 60
guard.pausetime				= 0, 60
numhit						= 1
hitonce						= 0
sparkno						= S2010
guard.sparkno				= S2060
sparkxy						= 0, Floor(-70 * Const(size.yscale))
hitsound					= S2000, 3
guardsound					= S2010, 1
guard.dist					= Const(size.proj.attack.dist)
ground.type					= High
ground.slidetime			= 16
ground.hittime				= 16
guard.slidetime				= 16
guard.ctrltime				= 16
guard.hittime				= 25
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= 0, -8.0
ground.cornerpush.veloff	= 0
guard.velocity				= 0
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= 0, -8.0
air.cornerpush.veloff		= 0
fall.recover				= 1
fall						= 1

[State 3351, No Target Penalty]
type		= VarSet
triggerall	= (Var(22) & 256)
triggerall	= !NumTarget((10 + ((Var(16) & 240)/16-1+16)%16))
trigger1	= AnimElem = 4
var(1)		= (Var(1) | 524288)

[State 3351, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 1
pos			= 40 * Const(size.xscale), 0
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3351, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 2
pos			= 36 * Const(size.xscale), -7 * Const(size.yscale)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3351, TargetBind]
type		= TargetBind
trigger1	= AnimElem = 3
pos			= 32 * Const(size.xscale), -14 * Const(size.yscale)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3351, AfterImageTime]
type		= AfterImageTime
trigger1	= AnimTime = -5
time		= 0

[State 3351, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX大一番(投げられ側)
;---------------------------------------------------------------------
;------------------- 初期化(通常)
[Statedef 3360]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3360, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3360

[State 3360, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3361

;------------------- 実行(通常)
[Statedef 3361]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3361, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3361, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3361, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3361, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 120
value		= 3262

;------------------- 初期化(G)
[Statedef 3365]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3365, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3360

[State 3365, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3366

;------------------- 実行(G)
[Statedef 3366]
type		= A
movetype	= H
physics		= N
ctrl		= 0
sprpriority	= -2

[State 3366, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3366, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3366, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3366, End]
type		= ChangeState
trigger1	= AnimTime >= 0
trigger2	= Time >= 120
value		= 3267

;---------------------------------------------------------------------
; 諸手突き
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3400]
type		= S
movetype	= A
physics		= N
anim		= 3400
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3400, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3400, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3400, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3401

;------------------- 実行
[Statedef 3401]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3401, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(8) < 0
value		= SCA
ignorehitpause	= 1

[State 3401, EnvColor]
type		= EnvColor
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
value		= 248, 248, 248
time		= 2
under		= 1

[State 3401, EnvColor]
type		= EnvColor
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3401, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = [0, 28-2]
flag		= NoFG

[State 3401, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2200
ID			= 2200
pos			= Floor(23 * Const(size.xscale)), Floor(-25 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3401, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2250
ID			= 2250
pos			= Floor(23 * Const(size.xscale)), Floor(-25 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3401, Afterimage]
type		= AfterImage
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3401, SuperPause]
type		= SuperPause
triggerall	= !(Var(18) & 528482304)
triggerall	= RoundState < 3
trigger1	= AnimElemTime(1) - 1 = 0
time		= 28
movetime	= 28
anim		= -1
sound		= S2100, 0
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3401, CutIn Init Require]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
var(1)		= (Var(1) | 256)

[State 3401, CutIn Scale]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
fvar(4)		= 1.25

[State 3401, RemoveExplod]
type		= RemoveExplod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 6200

[State 3401, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 6231
ID			= 6200
pos			= 90, 220
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3401, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
ID			= 2093
anim		= 2093
pos			= Floor(-10 * Const(size.xscale)), 0
postype		= p1
scale		= 1.25 * Const(size.xscale), 1.25 * Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
removeongethit	= 0

[State 3401, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 7
value		= 3400, 0
channel		= 0
volume		= 200

[State 3401, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
value		= 2040, 2

[State 3401, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(9) >= 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3401, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= MoveHit || HitCount
var(1)		= (Var(1) | 128) - 128
ignorehitpause	= 1

[State 3401, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3401, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3401, Hit]	; 全ヒット(痛い)
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2MoveType != H
trigger1					= AnimElemNo(0) >= 9
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(105 * FVar(9)), Ceil(30 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16

[State 3401, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 72 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3401, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
triggerall					= P2MoveType = H
trigger1					= AnimElemNo(0) >= 9
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(70 * FVar(9)), Ceil(30 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16

[State 3401, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
triggerall					= P2MoveType = H
trigger1					= AnimElemNo(0) >= 9
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(70 * FVar(9)), Ceil(30 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16

[State 3401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 8*Const(size.xscale)

[State 3401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 1*Const(size.xscale)

[State 3401, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
x			= 8*Const(size.xscale)

[State 3401, NotHit]
type		= NotHitBy
trigger1	= MoveContact
value		= SCA
ignorehitpause	= 1

[State 3401, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || HitCount
value		= 3415

[State 3401, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 3410

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 諸手突き(SC発動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3405]
type		= S
movetype	= A
physics		= N
anim		= 3400
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3405, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3405, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3405, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3405, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3405, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3405, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3405, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3405, End]
type		= ChangeState
trigger1	= 1
value		= 3400

;---------------------------------------------------------------------
; 諸手突き(空振り)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3410]
type		= S
movetype	= A
physics		= N
anim		= 3410
ctrl		= 0
velset		= 0, 0
movehitpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3410, AfterImageTime]
type		= AfterImageTime
trigger1	= 1
time		= 0

[State 3410, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3411

;------------------- 実行
[Statedef 3411]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3411, NotHit]
type		= NotHitBy
trigger1	= MoveContact
value		= SCA
ignorehitpause	= 1

[State 3411, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || HitCount
value		= 3415

[State 3411, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(5) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3411, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= MoveHit || HitCount
var(1)		= (Var(1) | 128) - 128
ignorehitpause	= 1

[State 3411, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3411, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3411, Hit]	; 全ヒット(痛い)
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2MoveType != H
trigger1					= 1
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(105 * FVar(9)), Ceil(30 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16

[State 3411, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 72 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3411, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2))
triggerall					= P2MoveType = H
trigger1					= 1
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(70 * FVar(9)), Ceil(30 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16

[State 3411, Hit]	; 喰らい中無し
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType = A && (Var(1) & 2))
triggerall					= P2MoveType = H
trigger1					= 1
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(70 * FVar(9)), Ceil(30 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF-
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(5)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3411, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 諸手突き(特殊)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3415]
type		= S
movetype	= A
physics		= N
anim		= 3410
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3415, TargetState]
type		= TargetState
trigger1	= 1
value		= 3420 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3415, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3415, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 128) - 128

[State 3415, AfterImageTime]
type		= AfterImageTime
trigger1	= 1
time		= 0

[State , State Init End]
type		= ChangeState
trigger1	= 1
value		= 3416

;------------------- 実行
[Statedef 3416]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3416, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3416, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3416, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 200 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 3416, Hit]	; 全ヒット
type						= HitDef
trigger1					= !MoveContact && !MoveReversed
affectteam					= E
attr						= , HA
animtype					= Hard
damage						= Ceil(195 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 8
envshake.time				= 16
ignorehitpause				= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(5)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3416, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(5) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3416, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= MoveHit || HitCount
var(1)		= (Var(1) | 128) - 128
ignorehitpause	= 1

[State 3416, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 超諸手突き(やられ側)
;---------------------------------------------------------------------
;------------------- 壁まで吹っ飛び・初期化(通常)
[Statedef 3420]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3420, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3420, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 3420, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3420, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3420, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3420

[State 3420, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3420, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3421

;------------------- 壁まで吹っ飛び・実行(通常)
[Statedef 3421]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3421, HitVelSet]
type		= HitVelSet
trigger1	= HitShakeOver
x			= 1
y			= 1

[State 3421, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 3421, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3421, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3421, End]
type		= ChangeState
triggerall	= HitShakeOver
trigger1	= BackEdgeBodyDist <= 10
trigger2	= FrontEdgeBodyDist <= 10
trigger3	= Time >= 120
value		= 3422

;------------------- 壁跳ね返り・初期化(通常)
[Statedef 3422]
type		= A
movetype	= H
physics		= N
velset		= 0, 0
ctrl		= 0

[State 3422, Turn]
type		= Turn
trigger1	= (BackEdgeBodyDist < FrontEdgeBodyDist)

; postype=frontのバグ対策で、postype=backを使うため
[State 3422, Turn]
type		= Turn
trigger1	= 1

[State 3422, Explod]
type		= Explod
trigger1	= 1
anim		= F72
pos			= 0, Floor(ScreenPos Y - 65)
postype		= back
sprpriority	= 3

[State 3422, Turn]
type		= Turn
trigger1	= 1

[State 3422, VelSet]
type		= VelSet
trigger1	= 1
x			= -3.0
y			= -10.0

[State 3422, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3421

[State 3422, PosSet]
type		= PosSet
trigger1	= Pos Y >= 0
y			= -1

[State , State Init End]
type		= ChangeState
trigger1	= 1
value		= 3423

;------------------- 壁跳ね返り・実行(通常)
[Statedef 3423]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3423, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 3423, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3423, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3423, PlayerPush]
type		= PlayerPush
trigger1	= AnimElemTime(4) < 0
value		= 0

[State 3423, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(4) < 0
value		= SCA
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3423, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3423, Gravity]
type		= VelAdd
trigger1	= Pos Y < 0 && Time > 0
y			= .44

[State 3423, PosSet]
type		= PosSet
trigger1	= Time > 1 && Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3423, VelSet]
type		= VelSet
trigger1	= Time > 1 && Pos Y >= 0
trigger2	= Time >= 120
y			= -3.5

[State 3423, End]
type		= ChangeState
trigger1	= Time > 5 && Pos Y >= 0
trigger2	= Time >= 120
value		= 7040

;------------------- 壁まで吹っ飛び・初期化(G)
[Statedef 3425]
type		= U
movetype	= U
physics		= U
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State 3425, Branch]
type		= SelfState
trigger1	= MoveType != H
trigger2	= (PrevStateNo = [150, 155])
value		= PrevStateNo

[State 3425, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A
movetype	= H
physics		= N

[State 3425, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0

[State 3425, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0

[State 3425, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3420

[State 3425, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3425, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3426

;------------------- 壁まで吹っ飛び・実行(G)
[Statedef 3426]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3426, HitVelSet]
type		= HitVelSet
trigger1	= HitShakeOver
x			= 1
y			= 1

[State 3426, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 3426, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3426, PlayerPush]
type		= PlayerPush
trigger1	= 1
value		= 0

[State 3426, End]
type		= ChangeState
triggerall	= HitShakeOver
trigger1	= BackEdgeBodyDist <= 10
trigger2	= FrontEdgeBodyDist <= 10
trigger3	= Time >= 120
value		= 3427

;------------------- 壁跳ね返り・初期化(G)
[Statedef 3427]
type		= A
movetype	= H
physics		= N
velset		= 0, 0
ctrl		= 0

[State 3427, Turn]
type		= Turn
trigger1	= (BackEdgeBodyDist < FrontEdgeBodyDist)

; postype=frontのバグ対策で、postype=backを使うため
[State 3427, Turn]
type		= Turn
trigger1	= 1

[State 3427, Explod]
type		= Explod
trigger1	= 1
anim		= F72
pos			= 0, Floor(ScreenPos Y - 65)
postype		= back
sprpriority	= 3

[State 3427, Turn]
type		= Turn
trigger1	= 1

[State 3427, VelSet]
type		= VelSet
trigger1	= 1
x			= -3.0
y			= -10.0

[State 3427, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3421

[State 3427, PosSet]
type		= PosSet
trigger1	= Pos Y >= 0
y			= -1

[State , State Init End]
type		= ChangeState
trigger1	= 1
value		= 3428

;------------------- 壁跳ね返り・実行(G)
[Statedef 3428]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3428, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimTime != 0
flag		= NoAutoTurn

[State 3428, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3428, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3428, PlayerPush]
type		= PlayerPush
trigger1	= AnimElemTime(4) < 0
value		= 0

[State 3428, NotHit]
type		= NotHitBy
trigger1	= AnimElemTime(4) < 0
value		= SCA
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3428, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3428, Gravity]
type		= VelAdd
trigger1	= Pos Y < 0 && Time > 0
y			= .44

[State 3428, PosSet]
type		= PosSet
trigger1	= Time > 1 && Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3428, VelSet]
type		= VelSet
trigger1	= Time > 1 && Pos Y >= 0
trigger2	= Time >= 120
y			= -3.5

[State 3428, End]
type		= ChangeState
trigger1	= Time > 5 && Pos Y >= 0
trigger2	= Time >= 120
value		= 7045

;---------------------------------------------------------------------
; MAX諸手突き
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3500]
type		= S
movetype	= A
physics		= N
anim		= 3400
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3500, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -2000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3500, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3500, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3501

;------------------- 実行
[Statedef 3501]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3501, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(9) < 0
value		= SCA
ignorehitpause	= 1

[State 3501, EnvColor]
type		= EnvColor
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
value		= 248, 248, 248
time		= 2
under		= 1

[State 3501, EnvColor]
type		= EnvColor
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3501, AssertSpecial]
type		= AssertSpecial
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = [0, 28-2]
flag		= NoFG

[State 3501, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2201
ID			= 2201
pos			= Floor(23 * Const(size.xscale)), Floor(-25 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3501, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2251
ID			= 2251
pos			= Floor(23 * Const(size.xscale)), Floor(-25 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3501, Afterimage]
type		= AfterImage
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3501, SuperPause]
type		= SuperPause
triggerall	= !(Var(18) & 528482304)
triggerall	= RoundState < 3
trigger1	= AnimElemTime(1) - 1 = 0
time		= 28
movetime	= 28
anim		= -1
sound		= S2100, 1
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3501, CutIn Init Require]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
var(1)		= (Var(1) | 256)

[State 3501, CutIn Scale]
type		= VarSet
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
fvar(4)		= 1.3

[State 3501, RemoveExplod]
type		= RemoveExplod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 6200

[State 3501, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 6230
ID			= 6200
pos			= 90, 200
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3501, Explod]
type		= Explod
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
ID			= 2093
anim		= 2093
pos			= Floor(-10 * Const(size.xscale)), 0
postype		= p1
scale		= 1.25 * Const(size.xscale), 1.25 * Const(size.yscale)
sprpriority	= 2
bindtime	= 1
ownpal		= 1
removeongethit	= 0

[State 3501, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
value		= 3400, 1
channel		= 0
volume		= 200

[State 3501, PlaySnd]
type		= PlaySnd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 9
value		= 2040, 2

[State 3501, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(9) >= 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3501, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= MoveHit || HitCount
var(1)		= (Var(1) | 128) - 128
ignorehitpause	= 1

[State 3501, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3501, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 208 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3501, Hit]	; 通常ヒット(痛い)
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2StateType != L
triggerall					= P2MoveType != H
trigger1					= AnimElemNo(0) >= 9
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(240 * FVar(9)), Ceil(45 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16

[State 3501, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 192 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3501, Hit]	; 通常ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2)) && P2StateType != L
triggerall					= P2MoveType = H
trigger1					= AnimElemNo(0) >= 9
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(190 * FVar(9)), Ceil(45 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16

[State 3501, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3501, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= AnimElemNo(0) >= 9
trigger1					= (P2StateType = A && (Var(1) & 2))
trigger1					= P2MoveType = H
trigger2					= P2StateType = L
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(90 * FVar(9)), Ceil(45 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16

[State 3501, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 2
x			= 8*Const(size.xscale)

[State 3501, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 3
x			= 1*Const(size.xscale)

[State 3501, PosAdd]
type		= PosAdd
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimElem = 4
x			= 8*Const(size.xscale)

[State 3501, NotHit]
type		= NotHitBy
trigger1	= MoveContact
value		= SCA
ignorehitpause	= 1

[State 3501, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || HitCount
value		= 3515

[State 3501, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 3510

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX諸手突き(SC発動)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3505]
type		= S
movetype	= A
physics		= N
anim		= 3400
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3505, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3505, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3505, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3505, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3505, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3505, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3505, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3505, End]
type		= ChangeState
trigger1	= 1
value		= 3500

;---------------------------------------------------------------------
; MAX諸手突き(空振り)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3510]
type		= S
movetype	= A
physics		= N
anim		= 3410
ctrl		= 0
velset		= 0, 0
movehitpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3510, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3511

;------------------- 実行
[Statedef 3511]
type		= S
movetype	= A
physics		= N
ctrl		= 0
hitdefpersist	= 1
movehitpersist	= 1
hitcountpersist	= 1

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3511, NotHit]
type		= NotHitBy
trigger1	= MoveContact
value		= SCA
ignorehitpause	= 1

[State 3511, Branch]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= MoveHit || HitCount
value		= 3515

[State 3511, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(5) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3511, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= MoveHit || HitCount
var(1)		= (Var(1) | 128) - 128
ignorehitpause	= 1

[State 3511, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3511, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 208 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3511, Hit]	; 通常ヒット(痛い)
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= P2StateType != L
triggerall					= P2MoveType != H
trigger1					= 1
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(240 * FVar(9)), Ceil(45 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16

[State 3511, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 192 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3511, Hit]	; 通常ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
triggerall					= (P2StateType != A || !(Var(1) & 2)) && P2StateType != L
triggerall					= P2MoveType = H
trigger1					= 1
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(190 * FVar(9)), Ceil(45 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAF
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16

[State 3511, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 96 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State 3511, Hit]	; 全ヒット
type						= HitDef
triggerall					= !MoveContact && !MoveReversed
trigger1					= (P2StateType = A && (Var(1) & 2))
trigger1					= P2MoveType = H
trigger2					= P2StateType = L
affectteam					= E
attr						= S, HA
animtype					= Hard
damage						= Ceil(90 * FVar(9)), Ceil(45 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(5)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3511, AfterImage]
type		= AfterImageTime
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime = -5
time		= 0

[State 3511, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; MAX諸手突き(特殊)
;---------------------------------------------------------------------
;------------------- 初期化
[Statedef 3515]
type		= S
movetype	= A
physics		= N
anim		= 3410
ctrl		= 0
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3515, TargetState]
type		= TargetState
trigger1	= 1
value		= 3420 + 5*((Var(32) & 7) < 4)
ID			= (10 + ((Var(16) & 240)/16-1+16)%16)

[State 3515, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3515, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3515, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 128) - 128

[State 3515, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3516

;------------------- 実行
[Statedef 3516]
type		= S
movetype	= A
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State , HitStop ChangeAnim]
type		= ChangeAnim
trigger1	= (Var(18) & 528482304)
value		= Anim
elem		= AnimElemNo(-1)

[State , HitStop VelSet]
type		= VelSet
trigger1	= (Var(18) & 528482304)
x			= FVar(7)
y			= FVar(8)

[State , HitStop PosFreeze]
type		= PosFreeze
trigger1	= (Var(18) & 528482304)

[State 3516, NotHit]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3516, Give Power]
type		= VarSet
trigger1	= 1
var(58)		= 0
ignorehitpause	= 1

[State 3516, Give Power]
type		= VarSet
triggerall	= Const(data.power) > 0
trigger1	= NumEnemy
var(58)		= Floor( 236 / 4.0 * FVar(5) * IfElse(Enemy,PowerMax<Const(data.power),Enemy,PowerMax,Const(data.power))/(1.0*Const(data.power)) )
ignorehitpause	= 1

[State , Hit Dummy]	; ヒットストップ中を当身で取られないようにする用
type		= HitDef
trigger1	= 1
attr		=
hitflag		=
guardflag	=
guard.dist	= Floor(Const(size.attack.dist) * Const(size.xscale))
ignorehitpause	= 1

[State 3516, Hit]	; 全ヒット
type						= HitDef
trigger1					= !MoveContact && !MoveReversed
affectteam					= E
attr						= , HA
animtype					= Hard
damage						= Ceil(210 * FVar(9))
getpower					= 0, 0
givepower					= Var(58), Var(58)
guardflag					= M
hitflag						= MAFD
;priority					= 4, Hit
pausetime					= 1, 9 + 4 * ((Var(1) & 1) != 0)
guard.pausetime				= 1, 7
id							= 10 + (Var(16) & 240)/16
numhit						= 1
guard.kill					= 1
sparkno						= S2030
guard.sparkno				= S2060
sparkxy						= Floor(-15 * Const(size.xscale)), Floor(-45 * Const(size.yscale))
hitsound					= S2000, 4
guardsound					= S2010, 1
guard.dist					= Floor(Const(size.attack.dist) * Const(size.xscale))
ground.type					= Low
ground.slidetime			= 21
ground.hittime				= 21
guard.slidetime				= 21
guard.ctrltime				= 21
guard.hittime				= 30
air.hittime					= 255
fall.recovertime			= 255
ground.velocity				= -20.0 * Const(size.xscale), -0.5
ground.cornerpush.veloff	= 0
guard.velocity				= -10.4 * Const(size.xscale) * FVar(2)
guard.cornerpush.veloff		= 0
yaccel						= 0.44
air.velocity				= -20.0 * Const(size.xscale), -0.5
air.cornerpush.veloff		= 0
fall.recover				= 0
fall						= 1
envshake.ampl				= 12
envshake.time				= 16
ignorehitpause				= 1

[State , Hit Dummy]	; 攻撃判定消し(ダミー)
type		= Null;HitDef
trigger1	= 0 <= AnimElemTime(5)
attr		=
hitflag		=
guardflag	=
guard.dist	= 0
ignorehitpause	= 1

[State 3516, Tsuigeki Reset]	; 無条件追撃
type		= VarSet
trigger1	= AnimElemTime(5) < 0
var(1)		= (Var(1) | 64)
ignorehitpause	= 1

[State 3516, 3C Reset]	; 3C解除
type		= VarSet
trigger1	= MoveHit || HitCount
var(1)		= (Var(1) | 128) - 128
ignorehitpause	= 1

[State 3516, AfterImage]
type		= AfterImageTime
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime = -5
time		= 0

[State 3516, End]
type		= ChangeState
triggerall	= !(Var(18) & 528482304)
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;---------------------------------------------------------------------
; 我慢
;---------------------------------------------------------------------
;------------------- 超必殺技演出・初期化
[Statedef 3600]
type		= A
movetype	= I
physics		= N
anim		= 3600
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3600, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3600, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3600, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3601

;------------------- 超必殺技演出・実行
[Statedef 3601]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3601, Freeze]
type		= PosFreeze
trigger1	= 1

[State 3601, NotHitBy]
type		= NotHitBy
trigger1	= AnimElemTime(6) < 0
value		= SCA
ignorehitpause	= 1

[State 3601, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 0
value		= 248, 248, 248
time		= 2
under		= 1

[State 3601, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3601, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimElemTime(1) - 1 = [0, 28-2]
flag		= NoFG

[State 3601, Afterimage]
type		= AfterImage
trigger1	= AnimElemTime(1) - 1 = 0
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3601, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2210
ID			= 2210
pos			= Floor(10 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3601, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2260
ID			= 2260
pos			= Floor(10 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3601, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 2340
anim		= 2340
postype		= P1
pos			= Floor((Const(size.mid.pos.x) + 10) * Const(size.xscale)), Floor(Const(size.mid.pos.y) * Const(size.yscale))
scale		= Const(size.xscale), Const(size.yscale)
ownpal		= 1
sprpriority	= 5
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3601, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElemTime(1) - 1 = 0
time		= 28
movetime	= 28
anim		= -1
sound		= S2100, 2
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3601, CutIn Init Require]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
var(1)		= (Var(1) | 256)

[State 3601, CutIn Scale]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
fvar(4)		= 1.3

[State 3601, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 6200

[State 3601, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 6214
ID			= 6200
pos			= 90, 200
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3601, PlaySnd]
type		= PlaySnd
trigger1	= AnimElemTime(1) - 1 = 0
value		= 199, 1
channel		= 0
volume		= 200

[State 3601, PlaySnd]
type		= PlaySnd
trigger1	= AnimElemTime(1) - 1 = 0
value		= 2090, 0

[State 3601, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A

[State 3601, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 3601, AfterImageTime]
type		= AfterImageTime
trigger1	= AnimTime = -20
time		= 0

[State 3601, End]
type		= ChangeState
triggerall	= StateType = A
trigger1	= AnimTime >= 0
value		= 47

[State 3601, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- SC発動
[Statedef 3605]
type		= A
movetype	= I
physics		= N
anim		= 3600
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3605, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3605, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3605, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3605, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3605, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3605, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3605, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3605, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3600

;---------------------------------------------------------------------
; MAX版・我慢
;---------------------------------------------------------------------
;------------------- 超必殺技演出・初期化
[Statedef 3700]
type		= A
movetype	= I
physics		= N
anim		= 3700
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3700, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -2000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3700, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3700, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3701

;------------------- 超必殺技演出・実行
[Statedef 3701]
type		= A
movetype	= I
physics		= N
ctrl		= 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3701, Freeze]
type		= PosFreeze
trigger1	= 1

[State 3701, NotHitBy]
type		= NotHitBy
trigger1	= AnimTime < -5
value		= SCA
ignorehitpause	= 1

[State 3701, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 0
value		= 248, 248, 248
time		= 2
under		= 1

[State 3701, EnvColor]
type		= EnvColor
trigger1	= AnimElemTime(1) - 1 = 2
value		= 0, 0, 0
time		= 28 - 6 - 2
under		= 1

[State 3701, AssertSpecial]
type		= AssertSpecial
trigger1	= AnimElemTime(1) - 1 = [0, 28-2]
flag		= NoFG

[State 3701, Afterimage]
type		= AfterImage
trigger1	= AnimElemTime(1) - 1 = 0
length		= 5
timegap		= 2
framegap	= 2
palbright	= 80, 80, 80
palcontrast	= 80, 30, 80
paladd		= 20, 20, 20
palmul		= .25, .25, .25
trans		= add1
time		= 600

[State 3701, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2211
ID			= 2211
pos			= Floor(10 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= 4
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3701, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 2261
ID			= 2261
pos			= Floor(10 * Const(size.xscale)), Floor(-67 * Const(size.yscale))
postype		= P1
sprpriority	= -5
ownpal		= 1
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3701, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 2340
anim		= 2340
postype		= P1
pos			= Floor((Const(size.mid.pos.x) + 10) * Const(size.xscale)), Floor(Const(size.mid.pos.y) * Const(size.yscale))
scale		= Const(size.xscale), Const(size.yscale)
ownpal		= 1
sprpriority	= 5
bindtime	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3701, SuperPause]
type		= SuperPause
triggerall	= RoundState < 3
trigger1	= AnimElemTime(1) - 1 = 0
time		= 28
movetime	= 28
anim		= -1
sound		= S2100, 3
darken		= 0
unhittable	= 0
p2defmul	= 1.0

[State 3701, CutIn Init Require]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
var(1)		= (Var(1) | 256)

[State 3701, CutIn Scale]
type		= VarSet
trigger1	= AnimElemTime(1) - 1 = 0
fvar(4)		= 1.25

[State 3701, RemoveExplod]
type		= RemoveExplod
trigger1	= AnimElemTime(1) - 1 = 0
ID			= 6200

[State 3701, Explod]
type		= Explod
trigger1	= AnimElemTime(1) - 1 = 0
anim		= 6215
ID			= 6200
pos			= 90, 200
postype		= Back
sprpriority	= -6
scale		= FVar(4), FVar(4)
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3701, PlaySnd]
type		= PlaySnd
trigger1	= AnimElemTime(1) - 1 = 0
value		= 199, 1
channel		= 0
volume		= 200

[State 3701, PlaySnd]
type		= PlaySnd
trigger1	= AnimElemTime(1) - 1 = 0
value		= 2090, 0

[State 3701, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
statetype	= A

[State 3701, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y >= 0
statetype	= S

[State 3701, AfterImageTime]
type		= AfterImageTime
trigger1	= AnimTime = -5
time		= 0

[State 3701, End]
type		= ChangeState
triggerall	= StateType = A
trigger1	= AnimTime >= 0
value		= 47

[State 3701, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(1)		= (Var(1) | 134217728)
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 131071 | 393216 | 1572864 | 2097152) - (131071 | 393216 | 1572864 | 2097152) + (StateNo | (131072 * ((StateType=C)+(StateType=A)*2+(StateType=L)*3)) | (524288 * ((MoveType=A)+(MoveType=H)*2)) | (2097152 * Ctrl))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(2)		= (Var(2) | 16777216) - (16777216) + ((16777216*(Facing!=1)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
var(3)		= (Var(3) | 131071 | 66977792) - (131071 | 66977792) + (Anim | (131072 * AnimElemNo(0)))
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(7)		= Vel X
ignorehitpause	= 1

[State , State Memory]
type		= VarSet
trigger1	= 1
fvar(8)		= Vel Y
ignorehitpause	= 1

[State , State Memory End]
type		= ChangeState
trigger1	= (Var(1) & 16777216) && (MoveType != H)
value		= 118
ignorehitpause	= 1

;------------------- SC発動
[Statedef 3705]
type		= A
movetype	= I
physics		= N
anim		= 3700
ctrl		= 0
facep2		= 1
velset		= 0, 0

[State , Helper Check]
type		= ChangeState
trigger1	= IsHelper
value		= 19900
ignorehitpause	= 1

[State 3705, PowerAdd]
type		= PowerAdd
trigger1	= Const(data.power) > 0
value		= Floor( -1000 * IfElse(PowerMax<Const(data.power),PowerMax,Const(data.power))/(1.0*Const(data.power)) )

[State 3705, PalFx]
type		= PalFx
trigger1	= 1
add			= 125, 125, 125
sinadd		= 125, 125, 125, 10
time		= 10

[State 3705, PalFX Counter]
type		= VarSet
trigger1	= 1
var(32)		= (Var(32) | 260046848) - 260046848 + 10*8388608
ignorehitpause	= 1

[State 3705, Explod]
type		= Explod
trigger1	= 1
ID			= 2960
anim		= 2960
sprpriority	= -4
postype		= left
pos			= 0, 0
bindtime	= 9999
scale		= 0.5, 0.5
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3705, Explod]
type		= Explod
trigger1	= 1
ID			= 2961
anim		= 2961
sprpriority	= -3
postype		= right
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3705, Explod]
type		= Explod
trigger1	= 1
ID			= 2962
anim		= 2962
sprpriority	= -5
postype		= left
pos			= 0, 0
bindtime	= 9999
under		= 0
ownpal		= 1
trans		= addalpha
alpha		= 224, 128
removeongethit	= 1
supermovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
pausemovetime	= 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999

[State 3705, NotHitBy]
type		= NotHitBy
trigger1	= 1
value		= SCA
ignorehitpause	= 1

[State 3705, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3700

;---------------------------------------------------------------------
; 試合前の負傷(やられ)
;---------------------------------------------------------------------
;------------------- 共通
[Statedef 3800]
type		= U
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 3800, StateTypeSet]
type		= StateTypeSet
trigger1	= 1
movetype	= H
physics		= N
ignorehitpause	= 1

[State 3800, CtrlSet]
type		= CtrlSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 3800, VelSet]
type		= VelSet
trigger1	= 1
x			= 0
y			= 0
ignorehitpause	= 1

[State 3800, StateTypeSet]
type		= StateTypeSet
triggerall	= StateType != A
trigger1	= Pos Y >= 0
statetype	= S
ignorehitpause	= 1

[State 3800, StateTypeSet]
type		= StateTypeSet
trigger1	= Pos Y < 0
statetype	= A
ignorehitpause	= 1

[State 3800, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3800, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3800, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3800, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3800, End]
type		= ChangeState
trigger1	= AnimTime >= 0
value		= 3810

;------------------- 1
[Statedef 3801]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3801, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3800
elem		= 1
ignorehitpause	= 1

[State 3801, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3801, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3801, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

;------------------- 2
[Statedef 3802]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3802, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3800
elem		= 2
ignorehitpause	= 1

[State 3802, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3802, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3802, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

;------------------- 3
[Statedef 3803]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3803, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3800
elem		= 3
ignorehitpause	= 1

[State 3803, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3803, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3803, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

;------------------- 4
[Statedef 3804]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3804, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3800
elem		= 4
ignorehitpause	= 1

[State 3804, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3804, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3804, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

;------------------- 5
[Statedef 3805]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3805, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3800
elem		= 5
ignorehitpause	= 1

[State 3805, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3804, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

[State 3804, End]
type		= ChangeState
trigger1	= 1
value		= 3800
ignorehitpause	= 1

;------------------- 9(Dead)
[Statedef 3809]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3809, LifeSet]
type		= LifeSet
trigger1	= 1
value		= 0
ignorehitpause	= 1

[State 3809, End]
type		= ChangeState
trigger1	= 1
value		= 3801
ignorehitpause	= 1

[State 3809, End]
type		= ChangeState
trigger1	= 1
value		= 3801
ignorehitpause	= 1

[State 3809, End]
type		= ChangeState
trigger1	= 1
value		= 3801
ignorehitpause	= 1

;------------------- 分岐
[Statedef 3810]
type		= U
movetype	= H
physics		= N
ctrl		= 0

[State 3810, End]
type		= ChangeState
trigger1	= StateType = A
trigger2	= Life = 0
trigger3	= !Alive
value		= 3815

[State 3810, End]
type		= ChangeState
trigger1	= 1
value		= 3811

;------------------- 地上終了初期化
[Statedef 3811]
type		= S
movetype	= H
physics		= N
ctrl		= 0
velset		= 0, 0

[State 3811, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 3810

[State 3811, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3812

;------------------- 実行
[Statedef 3812]
type		= S
movetype	= H
physics		= N
ctrl		= 0

[State 3812, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3812, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3812, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3812, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3812, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3812, End]
type		= SelfState
trigger1	= AnimTime >= 0
value		= 0
ctrl		= 1

;------------------- 空中終了初期化
[Statedef 3815]
type		= A
movetype	= H
physics		= N
ctrl		= 0
velset		= -3.2, -4

[State 3815, ChangeAnim2]
type		= ChangeAnim2
trigger1	= 1
value		= 7050

[State 3815, State Init End]
type		= ChangeState
trigger1	= 1
value		= 3816

;------------------- 実行
[Statedef 3816]
type		= A
movetype	= H
physics		= N
ctrl		= 0

[State 3816, AssertSpecial]
type		= AssertSpecial
trigger1	= 1
flag		= NoAutoTurn

[State 3816, DefenceMulSet]
type		= DefenceMulSet
trigger1	= 1
value		= 1.0

[State 3816, HitBy]
type		= HitBy
trigger1	= 1
value		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3816, HitBy]
type		= HitBy
trigger1	= 1
value2		= SCA, AA, AT, AP
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 0
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 1
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 2
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 3
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 4
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 5
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 6
ignorehitpause	= 1

[State 3816, HitOverride]
type		= HitOverride
trigger1	= 1
slot		= 7
ignorehitpause	= 1

[State 3816, VelAdd]
type		= VelAdd
trigger1	= Time > 0 && Pos Y < 0
y			= .44

[State 3816, PosSet]
type		= PosSet
trigger1	= Time > 0 && Pos Y + Vel Y - Vel Y >= 0 && Vel X != 0
y			= 0

[State 3816, VelSet]
type		= VelSet
trigger1	= Time > 0 && Pos Y >= 0
y			= -2.0

[State 3816, End]
type		= ChangeState
trigger1	= Time > 0 && Pos Y >= 0
trigger2	= Time >= 120
value		= 7045
