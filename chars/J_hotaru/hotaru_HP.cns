;---------------------------------------------------------------------------
;　天翔乱姫
[Statedef 3000]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = -1000
velset = 0,0
anim = 3000
ctrl = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
sound = s7,0
time = 30

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f101
pos = -5,-27
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f100
pos = -5,-27
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 3000]
type = NotHitBy
trigger1 = Time <= 32
value = SCA
time = 1

[State 3000]
type = AfterImage
trigger1 = Time = 0
time = 90
length = 13
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 4

;---------------------------------------------------------
;Super Cancel Effect
[State 1000, Explod]
type = Explod
trigger1 = time = 0 && var(17) = 1
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
trigger1 = time = 0 && var(17) = 1
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 8
trans = addalpha
alpha = 256, 135
ownpal = 1
;---------------------------------------------------------

[State Snd]
type = PlaySnd
trigger1 = Time = 0
value = 2, 0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 8, 6

[State 3000]
type = Explod
trigger1 = AnimElemTime(2) = 0
id = 3000
anim = 3090
pos = 0,0
postype = P1
persistent = 0
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3000]
type = velSet
trigger1 = AnimElem = 2
x = .8
y = -8
[State 3000]
type = VelAdd
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(9) < 0
y = .4

[State 3000]
type = HitDef
trigger1 = AnimElemTime(2) = 4 || AnimElemTime(3) = 2
trigger2 = AnimElemTime(4) = 1 || AnimElemTime(5) = 0
attr = A, HA
animtype  = Hard
damage    = 36,10
getpower = 0
guardflag = MA
hitflag = MAF
pausetime = 1,1
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -20,-30
hitsound = S5,3
guardsound = S5,7
ground.type = High
ground.slidetime = 23
ground.hittime = 22
ground.velocity = -4,-7
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -4,-6.8
yaccel = .4
air.juggle = 2
air.animtype = Back
fall = 1
fall.recover = 0

[State 3000]
type = PosAdd
trigger1 = AnimElemTime(9) = 0
y = -35

[State 3000]
type = velSet
trigger1 = AnimElemTime(9) = 0
x = 0
y = 0
[State 3000]
type = VelAdd
trigger1 = AnimElemTime(9) >= 0
y = 0
[State 3000]
type = VelSet
trigger1 = AnimElemTime(10) >= 0
x = 12
y = 6

[State Snd]
type = PlaySnd
trigger1 = AnimElemTime(8) = 0
value = 2, 1
channel = 1

[State 3000]
type = HitDef
trigger1 = AnimElemTime(10) = 0
attr = A, HA
animtype  = Hard
damage    = 0
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 1,1
sparkno = -1
guard.sparkno = 40; -1
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.velocity = 0
airguard.velocity = 0
air.velocity = 0
p1stateno = 3020
fall = 1
fall.recover = 0

[State 3000]
type = ChangeState
trigger1 = AnimElemTime(9) >= 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3040
;---------------------------------------------------------------------------
;　強天翔乱姫
[Statedef 3010]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = -1000
velset = 0,0
anim = 3010
ctrl = 0

[State 3010]
type = NotHitBy
trigger1 = Time <= 40
value = SCA
time = 1

[State 3010]
type = AfterImage
trigger1 = Time = 0
time = 90
length = 13
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 4

;---------------------------------------------------------
;Super Cancel Effect
[State 1000, Explod]
type = Explod
trigger1 = time = 0 && var(17) = 1
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
trigger1 = time = 0 && var(17) = 1
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 8
trans = addalpha
alpha = 256, 135
ownpal = 1
;---------------------------------------------------------

[State Snd]
type = PlaySnd
trigger1 = Time = 0
value = 2, 0
channel = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
sound = s7,0
time = 30

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f101
pos = -5,-27
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f100
pos = -5,-27
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 8, 6

[State 3010]
type = Explod
trigger1 = AnimElemTime(4) = 0
id = 3000
anim = 3090
pos = 0,0
postype = P1
persistent = 0
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3010]
type = velSet
trigger1 = AnimElem = 4
x = .8
y = -8
[State 3000]
type = VelAdd
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(11) < 0
y = .4

[State 3010]
type = HitDef
trigger1 = AnimElemTime(4) = 2 || AnimElemTime(6) = 0 || AnimElemTime(7) = 0
attr = A, HA
animtype  = Hard
damage    = 41,11
getpower = 0
guardflag = MA
hitflag = MAF
pausetime = 1,1
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -20,-30
hitsound = S5,3
guardsound = S5,7
ground.type = High
ground.slidetime = 23
ground.hittime = 22
ground.velocity = -4,-7
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -4,-6.8
yaccel = .4
air.juggle = 2
air.animtype = Back
fall = 1
fall.recover = 0

[State 3010]
type = PosAdd
trigger1 = AnimElemTime(11) = 0
y = -35

[State 3010]
type = velSet
trigger1 = AnimElemTime(11) = 0
x = 0
y = 0
[State 3010]
type = VelAdd
trigger1 = AnimElemTime(11) >= 0
y = 0
[State 3010]
type = VelSet
trigger1 = AnimElemTime(12) >= 0
x = 12
y = 6

[State Snd]
type = PlaySnd
trigger1 = AnimElemTime(10) = 0
value = 2, 1
channel = 1

[State 3010]
type = HitDef
trigger1 = AnimElemTime(12) = 0
attr = A, HA
animtype  = Hard
damage    = 0
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 1,1
sparkno = -1
guard.sparkno = 40; -1
hitsound = -1
guardsound = -1
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.velocity = 0
airguard.velocity = 0
air.velocity = 0
p1stateno = 3020
fall = 1
fall.recover = 0

[State 3010]
type = ChangeState
trigger1 = AnimElemTime(11) >= 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3040

;---------------------------------------------------------------------------
;　つかみはＯＫ
[Statedef 3020]
type    = A
physics = N
juggle  = 0
poweradd = 0
velset = 12, 6
anim = 3020
ctrl = 0
sprpriority = 2

[State 3020]
type = TargetBind
trigger1 = 1
pos = 0,-8

[State 3020]
type = TargetState
trigger1 = time = 0
value = 3050

[State 3020]
type = AfterImage
trigger1 = Time = 0
time = 40
length = 13
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 4

[State 3020]
type = VelSet
trigger1 = AnimElemTime(10) >= 0
x = 12
y = 6

[State 3020]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3030

;---------------------------------------------------------------------------
;　気、開放。
[Statedef 3030]
type    = A
movetype= I
physics = S
juggle  = 0
velset = 10,0
poweradd = 0
anim = 3030
ctrl = 0
sprpriority = 2

[State 3030]
type = PosSet
trigger1 = AnimElemTime(6) < 0
y = 0

[State 3030]
type = TargetState
trigger1 = time = 0
value = 3060

[State 3030]
type = Explod
trigger1 = Time = 1
anim = F120
pos = -70, 0
sprpriority = 4
postype = P1
bindtime = -1
facing = -1

[State 3030]
type = PosAdd
trigger1 = AnimElemTime(6) < 0
trigger1 = FrontEdgeDist < 100
x = -6
[State 3030]
type = VelSet
trigger1 = AnimElemTime(6) < 0
trigger1 = FrontEdgeDist < 50
x = 0
[State 3030]
type = VelAdd
trigger1 = AnimElemTime(6) < 0
trigger1 = FrontEdgeDist < 50
x = 0

[State 3030]
type = BGPalfx
trigger1 = AnimElemTime(10) < 0
value = 0, 0, 0
time = 1
under = 1

[State 3030]
type = AssertSpecial
trigger1 = AnimElemTime(10) < 0
flag = NoBG
flag2 = NoFG

[State 3030]
type = TargetBind
trigger1 = AnimElemTime(15) < 0
pos = 8,0

[State 3030]
type = AfterImage
trigger1 = Time = 0
time = 1
length = 13
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 4

[State 3030]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = s2, 2
channel = 1

[State 3030]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = s8, 7

[State 3030]
type = Explod
trigger1 = AnimElemTime(6) = 0
id = 3000
anim = 3095
pos = 12,0
postype = P1
persistent = 0
sprpriority = 4
bindtime = 1
ownpal = 1

[State 3030]
type = TargetLifeAdd
trigger1 = AnimElemTime(7) = 2
value = -136

[State 3030]
type = StateTypeSet
trigger1 = Pos Y < 0
physics = N
ignorehitpause = 1

[State 3030]
type = PlaySnd
trigger1 = AnimElemTime(16) = 0
value = 6, 0

[State 3030]
type = VelSet
trigger1 = AnimElemTime(16) = 0
x = -3
y = -5.5
[State 3030]
type = VelAdd
trigger1 = AnimElemTime(16) >= 0 && AnimElemTime(22) < 0
y = .4

[State 3030]
type = VelSet
trigger1 = AnimElemTime(22) >= 0
x = 0
y = 0
[State 3030]
type = VelAdd
trigger1 = AnimElemTime(22) >= 0
y = 0

[State 3030]
type = PlaySnd
trigger1 = AnimElemTime(22) = 0
value = 6, 1

[State 3030]
type = StateTypeSet
trigger1 = AnimElemTime(22) >= 0
value = S
physics = S
ignorehitpause = 1

[State 3030]
type = PosSet
trigger1 = AnimElemTime(22) >= 0
y = 0

[State 3030]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 着地
[Statedef 3040]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3040

[State 3040]
type = VelSet
trigger1 = 1
y = 0

[State 3040]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3040]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------
; 相手
[statedef 3050]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
facep2 = 1

[State 3050]
type = changeanim2
trigger1 = time = 0
value = 3050

[State 3050]
type = selfstate
trigger1 = time >= 100
value = 5050

;-------------------------------
; 相手２
[Statedef 3060]
type = L
movetype = H
physics = N
velset = 0,0
ctrl = 0
facep2 = 1

[State 3060]
type = changeanim2
trigger1 = time = 0
value = 3060

[State 3060]
type = posset
trigger1 = animtime = 0
y = 0

[State 3060]
type = selfstate
trigger1 = alive
trigger1 = animtime = 0
value = 5120

[State 3060]
type = selfstate
trigger1 = !alive
trigger1 = animtime = 0
value = 5150

;---------------------------------------------------------------------------
;　双掌天蓮華
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd = -2000
velset = 0,0
anim = 3100
ctrl = 0

[State 3100]
type = NotHitBy
trigger1 = Time <= 36
value = SCA
time = 1

[State 3100]
type = AfterImage
trigger1 = Time = 0
time = 90
length = 13
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 4

;---------------------------------------------------------
;Super Cancel Effect
[State 1000, Explod]
type = Explod
trigger1 = time = 0 && var(17) = 1
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
trigger1 = time = 0 && var(17) = 1
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 8
trans = addalpha
alpha = 256, 135
ownpal = 1
;---------------------------------------------------------

[State Snd]
type = PlaySnd
trigger1 = Time = 0
value = 2, 3
channel = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
sound = s7,1
time = 30

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f103
pos = -14,-69
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f102
pos = -14,-69
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 3100]
type = playsnd
trigger1 = AnimElem = 8 || AnimElem = 15
value = s8,3

[State 3100]
type = velSet
trigger1 = AnimElem = 4 || AnimElem = 11
x = 4.5
y = -3.5
[State 3100]
type = VelAdd
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(9) < 0
trigger2 = AnimElemTime(11) >= 0
y = .4

[State 3100]
type = StateTypeSet
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(9) < 0
trigger2 = AnimElemTime(11) >= 0
value = A
physics = N
ignorehitpause = 1
[State 3100]
type = StateTypeSet
trigger1 = AnimElemTime(4) < 0
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(11) < 0
value = S
physics = S
ignorehitpause = 1

[State 3100]
type = PosSet
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(11) < 0
trigger2 = AnimElemTime(15) >= 5
y = 0

[State 3100]
type = HitDef
trigger1 = AnimElemTime(6) = 0 || AnimElemTime(7) = 0
trigger2 = AnimElemTime(13) = 0 || AnimElemTime(14) = 0
attr = A, HA
animtype  = Hard
damage    = 15,6
guardflag = MA
hitflag = MAF
pausetime = 3,5
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,2
guardsound = S5,7
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
air.juggle = 2
air.animtype = Back
air.fall = 1
fall.recover = 0

[State 3100]
type = HitDef
trigger1 = AnimElemTime(8) = 0 || AnimElemTime(15) = 0
attr = A, HA
animtype  = Hard
damage    = 15,6
guardflag = MA
hitflag = MAF
pausetime = 7,15
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,2
guardsound = S5,7
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -4,-5
air.juggle = 2
air.animtype = Back
air.fall = 1
fall.recover = 0

[State 3100]
type = ChangeState
trigger1 = AnimTime = 0
value = 3110

;---------------------------------------------------------------------------
;　超転身翔
[Statedef 3110]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
juggle = 0
velset = 0,0
anim = 3110
sprpriority = 2

[State 3110]
type = playsnd
trigger1 = AnimElem = 2
value = s8,2

[State 3110]
type = playsnd
trigger1 = Time = 0
value = s2,4
channel = 1

[State 3110]
type = StateTypeSet
trigger1 = Pos Y < 0
value = A
physics = N
ignorehitpause = 1

[State 3110]
type = velSet
trigger1 = AnimElem = 2
x = 3.3
y = -6

[State 3110]
type = velSet
trigger1 = AnimElemTime(13) = 0
x = 0
y = 0

[State 3110]
type = HitDef
trigger1 = AnimElemTime(1) = 0
attr = A, HA
animtype  = Hard
damage    = 15,6
guardflag = MA
hitflag = MAF
pausetime = 16,16
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,2
guardsound = S5,7
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3,-10
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -3,-10
air.animtype = Back
fall = 1
fall.recover = 0

[State 3110]
type = HitDef
trigger1 = AnimElemTime(2) = 0 || AnimElemTime(3) = 0 || AnimElemTime(4) = 0
trigger2 = AnimElemTime(5) = 0 || AnimElemTime(6) = 0 || AnimElemTime(7) = 0
trigger3 = AnimElemTime(8) = 0 || AnimElemTime(9) = 0 || AnimElemTime(10) = 0
trigger4 = AnimElemTime(11) = 0 || AnimElemTime(12) = 0 || AnimElemTime(13) = 0
attr = A, HA
animtype  = Hard
damage    = 11,3
guardflag = MA
hitflag = MAF
pausetime = 1,1
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,2
guardsound = S5,7
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3,-10
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -3,-4.3
air.animtype = Back
fall = 1
fall.recover = 0

[State 3110]
type = HitDef
trigger1 = AnimElemTime(14) = 0
attr = A, HA
animtype  = Hard
damage    = 11,6
guardflag = MA
hitflag = MAF
pausetime = 16,17
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,2
guardsound = S5,7
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -2,-3
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -2,-3
air.animtype = Back
fall = 1
fall.recover = 0

[State 3110]
type = ChangeState
trigger1 = AnimTime = 0
value = 3120

;---------------------------------------------------------------------------
;　キメ
[Statedef 3120]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd = 0
velset = 0, 0
anim = 3120
ctrl = 0
sprpriority = 2

[State 3120]
type = playsnd
trigger1 = AnimElemTime(4) = 0
value = s8,8

[State 3120]
type = playsnd
trigger1 = AnimElemTime(4) = 0
value = s2,5
channel = 1

[State 3120]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3120]
type = Explod
trigger1 = AnimElemTime(6) = 0
anim = 3190
ID = 3100
pos = 0, 0
postype = P1
sprpriority = 3
ignorehitpause = 0
bindtime = -1
ownpal = 1

[State 3120]
type = HitDef
trigger1 = AnimElemTime(5) = 0
trigger1 = enemy,Pos Y >= 0
attr = A, HA
animtype  = Hard
damage    = 123,32
guardflag = MA
hitflag = MAF
pausetime = 11,14
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,3
guardsound = S5,7
ground.type = Low
ground.slidetime = 16
ground.hittime = 18
ground.velocity = ifelse((p2bodydist X <= 2),7,-7)
ground.cornerpush.veloff = 0
guard.velocity = -8
airguard.velocity = -4,-3
air.velocity = ifelse((p2dist X <= -1),7,-7),-1.5
air.animtype = Back
air.p2stateno = 900
yaccel = .5
air.fall = 1
envshake.time = 7
envshake.freq = 100
envshake.ampl = 3
envshake.phase = 100
fall.recover = 0

[State 3120]
type = HitDef
trigger1 = AnimElemTime(5) = 0
trigger1 = enemy,Pos Y < 0
attr = A, HA
animtype  = Hard
damage    = 123,32
guardflag = MA
hitflag = MAF
pausetime = 31,34
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,3
guardsound = S5,7
ground.type = Low
ground.slidetime = 16
ground.hittime = 18
ground.velocity = ifelse((p2bodydist X <= 2),7,-7),-4
ground.cornerpush.veloff = 0
guard.velocity = -8
airguard.velocity = -4,-3
air.velocity = ifelse((p2dist X <= -1),7,-7),-1.5
air.animtype = Back
p2stateno = 900
yaccel = .5
air.fall = 1
envshake.time = 20
envshake.freq = 100
envshake.ampl = 4
envshake.phase = 100
fall.recover = 0

[State 3120]
type = VelSet
trigger1 = AnimElemTime(4) >= 0 && !movehit
trigger2 = AnimElemTime(4) >= 0 && P2BodyDist X > 10 && movehit
x = 9
y = 5

[State 3120]
type = VelSet
trigger1 = AnimElemTime(4) >= 0 && P2BodyDist X <= 10 && movehit
x = 0
y = 5

[State 3120]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3130

;---------------------------------------------------------------------------
; 着地
[Statedef 3130]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3130

[State 3130]
type = VelSet
trigger1 = 1
y = 0

[State 3130]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3130]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;　ダブルアサルト
[Statedef 3500]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd = -1000
velset = 0,0
anim = 3500
ctrl = 0

[State 3500]
type = NotHitBy
trigger1 = Time <= 32
value = SCA
time = 1

[State 3500]
type = AfterImage
trigger1 = Time = 33
time = 30
length = 12
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 5

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
sound = s7,1
time = 30

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f103
pos = -16,-55
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = f102
pos = -16,-55
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 3500]
type = PosAdd
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(12) < 18
x = 8
[State 3500]
type = PosAdd
trigger1 = AnimElemTime(12) >= 18 && AnimElemTime(14) < 0
x = 5
[State 3500]
type = PosAdd
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(15) < 5
x = 2
[State 3500]
type = PosAdd
trigger1 = AnimElemTime(15) >= 5 && AnimElemTime(15) < 10
x = 1
[State 3500]
type = PosAdd
trigger1 = AnimElemTime(15) >= 10 && AnimElemTime(16) < 0
x = .5

[State 3500]
type = HitDef
trigger1 = AnimElemTime(10) = 0
attr = S, HT
animtype  = Hard
damage    = 0
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = 2
guard.sparkno = 40; s4610
sparkxy = -10,-50
hitsound = s5,3
guardsound = s5,7
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -6,-10
ground.cornerpush.veloff = 0
guard.velocity = -5
airguard.velocity = -4, -2
air.velocity = -6,-10
p2stateno = 3550
fall = 1
fall.recover = 0

[State 3500]
type = ChangeState
trigger1 = movehit
value = 3510
ctrl = 0

[State 3500]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;　ほた乱舞
[Statedef 3510]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 0
anim = 3510
ctrl = 0
sprpriority = 2

[State 3510]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3510]
type = AfterImage
trigger1 = Time = 1
time = 106
length = 10
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 2

[State 3510]
type = PosSet
trigger1 = AnimElemTime(29) < 0
y = 0

[State 3510]
type = TargetState
trigger1 = time = 0
value = 3550

[State 3510]
type = ScreenBound
trigger1 = time >= 10
value = 0
movecamera = 0,0

[State 3510]
type = PosAdd
trigger1 = BackEdgeDist > 30
x = -6
[State 3510]
type = PosAdd
trigger1 = BackEdgeDist < 30
x = 6

[State 3510]
type = BGPalfx
trigger1 = 1
value = 0, 0, 0
time = 1
under = 1

[State 3510]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

[State 3510]
type = TargetBind
trigger1 = AnimElemTime(29) < 0
pos = 40,0

[State 3510]
Type = Explod
Trigger1 = AnimElemTime(3) = 1
Anim = f0
Postype = P1
Pos = 57, -5
bindtime = -1
SprPriority = 7
[State 3510]
Type = Explod
Trigger1 = AnimElemTime(8) = 1
Anim = f0
Postype = P1
Pos = 79, -5
bindtime = -1
SprPriority = 7
[State 3510]
Type = Explod
Trigger1 = AnimElemTime(13) = 1
Anim = f0
Postype = P1
Pos = 72, -67
bindtime = -1
SprPriority = 7
[State 3510]
Type = Explod
Trigger1 = AnimElemTime(22) = 1
Anim = f0
Postype = P1
Pos = 68, -60
bindtime = -1
SprPriority = 7
[State 3510]
Type = Explod
Trigger1 = AnimElemTime(29) = 1
Anim = f2
Postype = P1
Pos = 24, -70
bindtime = -1
SprPriority = 7

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(2) = 1 || AnimElemTime(7) = 1 || AnimElemTime(12) = 1 
value = 0, IfElse((Random = [0,200]),10,var(21))

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(21) = 1
value = 1, 1

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(28) = 1
value = 1, 4

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(12) = 1 || AnimElemTime(21) = 1
value = 4, 0

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(2) = 1 || AnimElemTime(7) = 1 || AnimElemTime(28) = 1
value = 4, 1

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(3) = 1 || AnimElemTime(8) = 1
value = 5, 1

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(13) = 1 || AnimElemTime(22) = 1
value = 5, 2

[State 3510]
type = PlaySnd
trigger1 = AnimElemTime(29) = 1
value = 5, 3

[State 3510]
type = TargetLifeAdd
trigger1 = AnimElemTime(3) = 1 || AnimElemTime(8) = 1 || AnimElemTime(13) = 1
trigger2 = AnimElemTime(22) = 1 || AnimElemTime(29) = 1
value = -21
kill = 0

[state 3510]
type = HitAdd
trigger1 = AnimElemTime(3) = 1 || AnimElemTime(8) = 1 || AnimElemTime(13) = 1
trigger2 = AnimElemTime(22) = 1 || AnimElemTime(29) = 1
value = 1

[State 3510]
type = Helper
triggerall = (!numhelper(10000))
trigger1 = AnimElemTime(3) = 3
helpertype = normal
id = 10000
postype = p1
pos = 280,-50
stateno = 13500
keyctrl = 0
ownpal = 1
facing = -1
persistent = 0
ignorehitpause = 1

[State 3510]
type = ChangeState
trigger1 = AnimTime = 0 && var(3) = 1
value = 3520

[State 3510]
type = ChangeState
trigger1 = AnimTime = 0 && var(3) != 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;　ぽんヶん
[Statedef 3520]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3520
sprpriority = 2

[State 3520]
type = ChangeAnim
trigger1 = p2name = "kisarah" && enemy,authorname = "Juke Kisaragi"
trigger1 = Time = 0
value = 3521

[State 3520]
type = ScreenBound
trigger1 = AnimElemTime(8) <= 0
value = 0
movecamera = 0,0

[State 3520]
type = BGPalfx
trigger1 = 1
value = 0, 0, 0
time = 1
under = 1

[State 3520]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

[State 3520]
type = playsnd
trigger1 = AnimElem = 3
value = s1,0
channel = 1

[State 3520]
type = playsnd
trigger1 = AnimElemTime(4) = 0
value = s6,8

[State 3520]
type = Explod
trigger1 = AnimElemTime(4) = 0
anim = F62
pos = 23, 0
sprpriority = -1
postype = P1
bindtime = 1
facing = 1

[State 3520]
type = playsnd
trigger1 = AnimElem = 5
value = s1,4
channel = 1

[State 3520]
type = Explod
trigger1 = AnimElemTime(6) = 0
anim = F61
pos = 40, 0
sprpriority = -1
postype = P1
bindtime = 1
facing = 1

[State 3520]
type = HitDef
trigger1 = AnimElemTime(6) = 0
attr = S, HA
animtype  = Diugup
damage    = 36,10
guardflag = MA
hitflag = MAFD
pausetime = 12,14
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = 0,-50
hitsound = S5,4
guardsound = S5,7
ground.type = High
ground.slidetime = 23
ground.hittime = 22
ground.velocity = -8,-7
ground.cornerpush.veloff = 0
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = -8,-7
air.juggle = 2
fall = 1
fall.recover = 0

[State 3520]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;　相手
[Statedef 3550]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1
facep2 = 1

[State 3550]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3550]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3550

[State 3550]
type = ChangeState
trigger1 = AnimTime = 0
value = 3560

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 3560]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3560]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3560]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 3560]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3560]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype)

[State 3560]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3560]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 3560]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001

[State 3560]
type = ChangeState
trigger1 = HitShakeOver
value = 3570

[State 3560]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3560]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3560]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP
[Statedef 3570]
type    = A
movetype= H
physics = N
ctrl = 0

[State 3570]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3570]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3570]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 3570]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5040

[State 3570]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 3580

[State 3570]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035

;---------------------------------------------------------------------------
; HITA_FALL
[Statedef 3580]
type    = A
movetype= H
physics = N

[State 3580]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3580]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 3580]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3580]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3580]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100

;---------------------------------------------------------------------------
; 拝啓
[Statedef 3590]
type = A
movetype = I
physics = N
ctrl = 0
anim = 4999
velset = 0,0
ownpal = 1
sprpriority = 7

[State 3590]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

[State 3590]
type = Explod
trigger1 = Time = 0
anim = 4900
ID = 4900
pos = 0,0
postype = Left
removetime = -1
sprpriority = -5
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
scale = 1.1,1.1
under = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 3590]
type = Explod
triggerall = Parent,facing = 1
trigger1 = (AnimElemTime(2) = 0)
anim = 4950
ID = 4900
pos = -100, 230
postype = Left
velocity = 20, 0
sprpriority = -4
supermove = 1
ownpal = 0
bindtime = 1
facing = -1
under = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 3590]
type = Explod
triggerall = Parent,facing = -1
trigger1 = (AnimElemTime(2) = 0)
anim = 4950
ID = 4900
pos = 420, 230
postype = Left
velocity = -20, 0
sprpriority = -4
supermove = 1
ownpal = 0
bindtime = 1
facing = 1
under = 1
pausemovetime = 9999999
supermovetime = 9999999

[State Remove]
type = RemoveExplod
trigger1 = (Parent,Stateno != [3510, 3520])
ID = 4900

[State 3590]
type = DestroySelf
trigger1 = (Parent,Stateno != [3510, 3520])

;---------------------------------------------------------------------------
;　アナザーダブルアサルト
[Statedef 3900]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd = -3000
velset = 0,0
anim = 3900
ctrl = 0

[State 3900]
type = NotHitBy
trigger1 = Time <= 32
value = SCA
time = 1

[State 3900]
type = AfterImage
trigger1 = Time = 0
time = 38
length = 12
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1
timegap = 1
framegap = 5

[State 3900]
type = PlaySnd
trigger1 = Time = 1
value = 9, 1
channel = 1

[State 3900, Super]
type = Helper
trigger1 = Time = 1
persistent = 0
id = 2200
name = "ADA"
pos = 8,-48
postype = P1
stateno = 2100
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3900, SuperPause]
type = Pause
trigger1 = Time = 1
time = 30
movetime = 30

[State 3900]
type = PosAdd
trigger1 = AnimElemTime(5) = 0
x = 14

[State 3900]
type = playsnd
trigger1 = AnimElemTime(5) = 0
value = s4,0

[State 3900]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 1, 4
channel = 1

[State 3900]
type = playsnd
trigger1 = AnimElemTime(6) = 0
value = s6,8

[State 3900]
type = Explod
trigger1 = AnimElemTime(6) = 0
anim = F61
pos = 40, 0
sprpriority = -1
postype = P1
bindtime = 1
facing = 1

[State 3900]
type = HitDef
trigger1 = AnimElemTime(6) = 0
attr = S, HT
animtype  = Hard
damage    = 50,12
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 12,14
sparkno = 2
guard.sparkno = 40; s4610
sparkxy = -10,-50
hitsound = s5,3
guardsound = s5,7
ground.type = High
ground.slidetime = 10
ground.hittime = 10
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.velocity = -5
airguard.velocity = -4, -2
air.velocity = -6,-10
p2stateno = 3990
kill = 0

[State 3900]
type = ChangeState
trigger1 = movehit
value = 3910
ctrl = 0

[State 3900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;　ほたコール
[Statedef 3910]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 0
anim = 3910
ctrl = 0
sprpriority = 2

[State 3910, Super]
type = Helper
trigger1 = Time = 0
persistent = 0
name = "ADABG"
pos = 0,0
postype = P1
stateno = 2300
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3910]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3910]
type = TargetState
trigger1 = time = 0
value = 3990

[State 3910]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3910]
type = PosAdd
trigger1 = BackEdgeDist > 92
x = -6
[State 3910]
type = PosAdd
trigger1 = BackEdgeDist < 92
x = 6

[State 3910]
type = TargetBind
trigger1 = AnimElemTime(6) < 0
pos = 50,0

[State 3910]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 3, 4
channel = 1

[State 3910]
type = Helper
trigger1 = AnimElemTime(6) = 0
helpertype = normal
id = 10000
postype = Back
pos = 320, -100
stateno = 13900
keyctrl = 0
ownpal = 1
facing = -1
persistent = 0
ignorehitpause = 1

[State 3910]
type = ChangeState
trigger1 = Time >= 70
trigger1 = enemy,Pos Y <= -120
value = 3920

[State 3910]
type = ChangeState
trigger1 = Time >= 70
trigger1 = !numhelper(10000)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;　ADA流燕旋脚
[Statedef 3920]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3920
sprpriority = 2

[State 3920]
type = AfterImage
trigger1 = time = 0
time = 25
length = 7
framegap = 3
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1

[State 3920]
type = playsnd
trigger1 = AnimElem = 7
value = s1,1
channel = 1

[State 3920]
type = playsnd
trigger1 = AnimElem = 8
value = s4,2

[State 3920]
type = StateTypeSet
trigger1 = Pos Y < 0
value = A
physics = N
ignorehitpause = 1

[State 3920]
type = velSet
trigger1 = AnimElem = 3
y = -6.8
[State 3920]
type = VelAdd
trigger1 = AnimElemTime(3) >= 0
y = .5

[State 3920]
type = HitDef
trigger1 = AnimElemTime(9) = 0
attr = A, HA
animtype  = Hard
damage    = 78,10
guardflag = HA
hitflag = MAF
pausetime = 9,14
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -10,-50
hitsound = S5,4
guardsound = S5,7
ground.type = High
ground.slidetime = 16
ground.hittime = 18
ground.velocity = 0, 20
guard.velocity = -10
airguard.velocity = -4.0,-3.0
air.velocity = 0, 20
p2stateno = 3992
envshake.time = 20
envshake.freq = 60
envshake.ampl = 4
envshake.phase = 62
fall = 1
fall.recover = 0
kill = 0

[State 3920]
type = ChangeState
trigger1 = StateType = A
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3930

;---------------------------------------------------------------------------
; 着地＆待機
[Statedef 3930]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 3930
ctrl = 0
sprpriority = 0

[State 3930]
type = AfterImage
trigger1 = time = 0
time = 25
length = 7
framegap = 3
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1

[State 3930]
type = PlaySnd
trigger1 = time = 0
value = s6,1

[State 3930]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3930]
type = ChangeState
trigger1 = Time >= 60
trigger1 = enemy,vel Y >= 5 && enemy,pos Y >= -75
value = 3950

[State 3930]
type = ChangeState
trigger1 = Time >= 40
trigger1 = !numhelper(10000)
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 龍牙
[Statedef 3950]
type = S
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 3950
juggle = 0
sprpriority = 1

[State 3950]
type = AfterImage
trigger1 = time = 0
time = 25
length = 7
framegap = 3
trans = add1
palcontrast = 120,120,120
PalAdd = 0,0,0
palmul = 1,1,1

[State 3950]
type = BGPalfx
trigger1 = 1
value = 0, 0, 0
time = 1
under = 1

[State 3950]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG

[State 3950]
type = Explod
trigger1 = Time = 4
anim = 4000
pos = 20,-54
postype = P1
sprpriority = 4
supermove = 1
ownpal = 1
bindtime = -1

[State 3950]
type = Explod
trigger1 = Time = 4
anim = 4050
pos = 20,-54
postype = P1
sprpriority = 0
supermove = 1
ownpal = 1
bindtime = -1

[State 3950]
type = PlaySnd
trigger1 = Time = 4
value = 7, 0

[State 3950]
type = PlaySnd
trigger1 = Time = 4
value = 1, 2
channel = 1

[State 3950]
type = SuperPause
trigger1 = AnimElemTime(3) = 0
time = 28
anim = -1
darken = 0
unhittable = 1

[State 3950]
type = Hitdef
trigger1 = AnimElemTime(4) = 0
attr = S, HA
animtype = Hard
damage    = 25
getpower = 0
givepower = 50
guardflag = M
hitflag = MAF
pausetime = 11,11
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -25,-65
hitsound = S5,3
guardsound = S5,7
ground.type = High
ground.slidetime = 23
ground.hittime  = 24
guard.pausetime = 12,12
guard.slidetime = 26
guard.hittime  = 22
ground.velocity = 0,-11
air.velocity = 0,-11
airguard.velocity = -0.4,-3.5
guard.velocity = -7.5
guard.cornerpush.veloff = -10.2
fall = 0
fall.recover = 0
kill = 0

[State 3950]
type = ChangeState
trigger1 = AnimTime = 0
value = 3960
ctrl = 0

;---------------------------------------------------------------------------
; 龍牙上昇
[Statedef 3960]
type    = A
movetype= A
physics = N
ctrl = 0
velset = 0,-7.6
anim = 3960
hitdefpersist = 1

[State 3960]
type = PlaySnd
trigger1 = Time = 0
value = 2, 2
channel = 1

[State 3960]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 2

[State 3960]
type = VelMul
trigger1 = AnimElemTime(6) >= 1
y = 0.82

[State 3960]
type = Hitdef
trigger1 = AnimElemTime(1) = 2
trigger2 = AnimElemTime(3) = 1
trigger3 = AnimElemTime(5) = 1
attr = A, HA
animtype = Hard
damage    = 25
getpower = 0
givepower = 15
guardflag = M
hitflag = MAF
pausetime = 6,4
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -25,-65
hitsound = S5,3
guardsound = S5,7
ground.type = High
ground.slidetime = 23
ground.hittime  = 24
guard.pausetime = 5,5
guard.slidetime = 26
guard.hittime  = 22
ground.velocity = 0,-8.2
air.velocity = 0,-8.2
airguard.velocity = -0.2,-3.5
guard.velocity = -7.5
fall = 1
air.fall = 1
fall.recover = 0
kill = 0

[State 3960]
type = Hitdef
trigger1 = AnimElemTime(7) = 1
attr = A, HA
animtype = Up
damage    = 58
getpower = 0
givepower = 15
guardflag = M
hitflag = MAF
pausetime = 15,14
sparkno = 3
guard.sparkno = 40; S4620
sparkxy = -25,-65
hitsound = S5,4
guardsound = S5,7
ground.type = High
ground.slidetime = 23
ground.hittime  = 24
guard.pausetime = 5,5
guard.slidetime = 26
guard.hittime  = 22
ground.velocity = 0,-7
air.velocity = 0,-7
airguard.velocity = -0.2,-3.5
guard.velocity = -7.5
envshake.time = 30
envshake.freq = 90
envshake.ampl = 4
envshake.phase = 92
fall = 1
fall.recover = 0

[State 3960]
type = Explod
trigger1 = Time = 0
anim = 3990
ID = 3990
pos = 0,0
postype = p1
sprpriority = 3
supermove = 1
removetime = 150
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 3960]
type = ScreenBound
trigger1 = AnimTime = 0
value = -1
movecamera = -1,-1

[State 3960]
type = ScreenBound
trigger1 = Pos Y < -50
value = -1
movecamera = -1,-1
ignorehitpause = 1

[State 3960]
type = ChangeState
trigger1 = AnimTime = 0
value = 3970
ctrl = 0

;---------------------------------------------------------------------------
; 龍牙下降
[Statedef 3970]
type    = A
movetype= A
physics = N
ctrl = 0
velset = 0,0
anim = 3970
hitdefpersist = 1

[State 3970]
type = Explod
trigger1 = time =0
anim = 13195
pos = 0,-130
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 3970]
type = ScreenBound
trigger1 = Pos Y < -50
value = -1
movecamera = -1,-1

[State 3970]
type = VelAdd
trigger1 = time >= 2
y = 0.44

[State 3970]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1190
ctrl = 0

;---------------------------------------------------------------------------
; HIT_ADA
[Statedef 3990]
type    = A
movetype= H
physics = N
velset = 0,0
Anim = 5007

[State 3990]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3990]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3990]
type = ChangeState
trigger1 = Time >= 15
value = 3991

;---------------------------------------------------------------------------
; HIT_ADA_PIYO
[Statedef 3991]
type    = A
movetype= H
physics = N
anim = 5300

[State 3991]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3991]
type = SelfState
trigger1 = Time = 160
value = 5000

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 3992]
type    = A
movetype= H
physics = N
ctrl = 0

[State 3992]
type = VelAdd
trigger1 = 1
y = .5

[State 3992]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = Vel Y > 0 && Pos Y >= 10
value = 3994

[State 3992]
type = ChangeState
trigger1 = AnimTime = 0
value = 3993

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 3993]
type    = A
movetype= H
physics = N

[State 3993]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059]
trigger1 = Anim != 5090
value = 5035

[State 3993]
type = VelAdd
trigger1 = 1
y = .5

[State 5035, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0 && Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 3994

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 3994]
type    = A
movetype= H
physics = N

[State 3994]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 3994]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3994]
type = VelAdd
trigger1 = 1
y = .5

[State 3994]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 3995

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 3995]
type    = L
movetype= H
physics = N

[State 3995]
type = FallEnvShake
trigger1 = Time = 0

[State 3995]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 3995]
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 3995]
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 3995]
type = PosSet
trigger1 = Time = 0
y = -10

[State 3995]
type = VelSet
trigger1 = Time = 0
y = 0

[State 3995]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 10
under = sysvar(1) <= 14

[State 3995]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 3995]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = Time >= 3
value = 3996

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3996]
type    = A
movetype= H
physics = N
velSet

[State 3993]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059]
trigger1 = Anim != 5090
value = 5035

[State 3994]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090
value = 5050

[State 3994]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3996]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3996]
type = VelSet
trigger1 = Time = 0
y = -14

[State 3996]
type = VelAdd
trigger1 = 1
y = .62

[State 3996]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

