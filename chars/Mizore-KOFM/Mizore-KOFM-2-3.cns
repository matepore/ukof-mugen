;===============================================================================
;EN ESTA SECCION SE ENCUENTRABN TODOS LOS ESTADOS DE -2 Y -3
;DEL CHAR LA MODIFICACION SIN AUTORIZACION PUEDE SIGNIFICAR
;UNA FALLA TOTAL EN EL MISMO
;===============================================================================
;-------------------------------------------------------------------------------

;---------------Special KO detect
[Statedef 169]
type = S
physics = S
anim = 999
poweradd = 0
sprpriority = -1
velset = 0,0
ctrl = 0
facep2 = 1

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 169
;---------------------------------------------------------------------------

[Statedef -2]

[State -2, VarSet]
type = VarSet
trigger1 = stateno = [200,699]
trigger1 = enemy,movetype = H && enemy,statetype = A
trigger1 = var(15) = 0 && numexplod(4150) <= 0
v = 17
value = 1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = enemy,movetype != H
trigger2 = stateno = [1200,1250]
trigger3 = enemy,stateno = [154,155]
v = 17
value = 0
;-------------------------------------------------------------------------------
;Varsets De Escape al Congelarse
[State 1000, VarSet]
type = VarSet
triggerall = numhelper(2201)= 0
trigger1 = enemy,stateno = 2025
trigger1 = enemy,movetype = H
v = 10
value = 300
ignorehitpause = 1

[State 325, Increase]
type = varadd
triggerall = enemy,stateno = 2025
triggerall = enemy,movetype = H
trigger1 = enemy,command = "random"
var(10) = -10

[State -2, VarSet]
type = VarSet
triggerall = numhelper(2201)= 0
trigger1 = enemy,prevstateno = 2025
trigger1 = enemy,movetype = H
v = 10
value = 0
ignorehitpause = 1

[State -2, Width]
type = Width
trigger1 = Movetype != H
edge = 20-(Statetype = A)*3,0
ignorehitpause =1

[State -2, Sexy KO]
type = Helper
triggerall = NumHelper(6969) = 0
trigger1 = !alive
trigger1 = matchover || teammode = turns
helpertype = normal
name = "Sexy KO detect"
id = 6969
postype = p1
pos = 0,0
stateno = 169
keyctrl = 0
ownpal = 1
facep2 = 0
ignorehitpause = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = stateno = 5020
trigger1 = time >= 0
trigger1 = NumHelper(6969) = 1
trigger1 = anim != 25030
value = 25030
ignorehitpause

;-------------------------------------------------------------------------------
;Variable de quemar
[State 2300, Burn]
type = Varset
trigger1 = Projhittime(1000) >= 0 && Projhittime(1000) <= 25
trigger2 = Projhittime(1004) >= 0 && Projhittime(1004) <= 25
trigger3 = Projhittime(1006) >= 0 && Projhittime(1006) <= 25
trigger4 = Projhittime(2000) >= 0 && Projhittime(2000) <= 25
trigger5 = Projhittime(2010) >= 0 && Projhittime(2010) <= 25
trigger6 = Projhittime(2020) >= 0 && Projhittime(2020) <= 25
trigger7 = Projhittime(10010) >= 0 && Projhittime(10010) <= 25
trigger8 = Projhittime(10011) >= 0 && Projhittime(10011) <= 25
trigger9 = Projhittime(10012) >= 0 && Projhittime(10012) <= 25
trigger10 = Anim = 200
trigger10 = Movehit
trigger11 = Anim = 210
trigger11 = Movehit
trigger12 = Anim = 310
trigger12 = Movehit
trigger13 = Anim = 410
trigger13 = Movehit
trigger14 = Anim = 810
trigger14 = Movehit
trigger15 = Anim = 1021
trigger15 = Movehit
trigger16 = Anim = 1024
trigger16 = Movehit
trigger17 = Anim = 650
trigger17 = Movehit
trigger18 = Anim = 1080
trigger18 = Movehit
trigger19 = Anim = 3020
trigger19 = Movehit
trigger20 = Anim = 2080
trigger20 = Movehit
trigger21 = Projhittime(1005) >= 0 && Projhittime(1005) <= 25
trigger22 = Anim = 300
trigger22 = Movehit
trigger23 = Anim = 1026
trigger23 = Movehit
trigger24 = Anim = 1070
trigger24 = Movehit
trigger25 = Anim = 1071
trigger25 = Movehit
trigger26 = Anim = 1072
trigger26 = Movehit
trigger27 = Anim = 3401
trigger27 = Movehit
trigger28 = Anim = 215
trigger28 = Movehit
trigger29 = Random < 50
trigger29 = numtarget(1500)
persistent = 0
ignorehitpause = 1
var(31) = 1

;Freeze
[State -2, Explod]
type = Explod
triggerall = p2movetype = H
trigger1 = Projhittime(1000) >= 0 && Projhittime(1000) <= 25
trigger1 = Random < 100
trigger2 = Projhittime(1004) >= 0 && Projhittime(1004) <= 25
trigger2 = Random < 100
trigger3 = Projhittime(1006) >= 0 && Projhittime(1006) <= 25
trigger3 = Random < 100
trigger4 = Projhittime(2000) >= 0 && Projhittime(2000) <= 25
trigger4 = Random < 100
trigger5 = Projhittime(2010) >= 0 && Projhittime(2010) <= 25
trigger5 = Random < 100
trigger6 = Projhittime(2020) >= 0 && Projhittime(2020) <= 25
trigger6 = Random < 100
trigger7 = Projhittime(10010) >= 0 && Projhittime(10010) <= 25
trigger7 = Random < 100
trigger8 = Projhittime(10011) >= 0 && Projhittime(10011) <= 25
trigger8 = Random < 100
trigger9 = Projhittime(10012) >= 0 && Projhittime(10012) <= 25
trigger9 = Random < 100
trigger10 = Anim = 200
trigger10 = Random < 100
trigger10 = Movehit
trigger11 = Anim = 210
trigger11 = Random < 100
trigger11 = Movehit
trigger12 = Anim = 310
trigger12 = Random < 100
trigger12 = Movehit
trigger13 = Anim = 410
trigger13 = Random < 100
trigger13 = Movehit
trigger14 = Anim = 810
trigger14 = Random < 100
trigger14 = Movehit
trigger15 = Anim = 1021
trigger15 = Random < 100
trigger15 = Movehit
trigger16 = Anim = 1024
trigger16 = Random < 100
trigger16 = Movehit
trigger17 = Anim = 650
trigger17 = Random < 100
trigger17 = Movehit
trigger18 = Anim = 1080
trigger18 = Random < 100
trigger18 = Movehit
trigger19 = Anim = 3020
trigger19 = Random < 100
trigger19 = Movehit
trigger20 = Anim = 2080
trigger20 = Random < 100
trigger20 = Movehit
trigger21 = Projhittime(1005) >= 0 && Projhittime(1005) <= 25
trigger21 = Random < 100
trigger22 = Anim = 300
trigger22 = Random < 100
trigger22 = Movehit
trigger23 = Anim = 1026
trigger23 = Random < 100
trigger23 = Movehit
trigger24 = Anim = 1120
trigger24 = Random < 100
trigger24 = Movehit
trigger25 = Anim = 1121
trigger25 = Random < 300
trigger25 = Movehit
trigger26 = Anim = 1070
trigger26 = Movehit
trigger26 = Random < 100
trigger27 = Anim = 1071
trigger27 = Movehit
trigger27 = Random < 100
trigger28 = Anim = 1072
trigger28 = Movehit
trigger28 = Random < 100
trigger29 = Anim = 3401
trigger29 = Movehit
trigger29 = Random < 100
trigger30 = Anim = 215
trigger30 = Movehit
trigger30 = Random < 100
trigger31 = Random < 50
trigger31 = numtarget(1500)
anim = 4130
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
ignorehitpause = 1

;Freeze
[State -2, Explod]
type = Explod
triggerall = p2movetype = H
trigger1 = Projhittime(1000) >= 0 && Projhittime(1000) <= 25
trigger1 = Random < 100
trigger2 = Projhittime(1004) >= 0 && Projhittime(1004) <= 25
trigger2 = Random < 100
trigger3 = Projhittime(1006) >= 0 && Projhittime(1006) <= 25
trigger3 = Random < 100
trigger4 = Projhittime(2000) >= 0 && Projhittime(2000) <= 25
trigger4 = Random < 100
trigger5 = Projhittime(2010) >= 0 && Projhittime(2010) <= 25
trigger5 = Random < 100
trigger6 = Projhittime(2020) >= 0 && Projhittime(2020) <= 25
trigger6 = Random < 100
trigger7 = Projhittime(10010) >= 0 && Projhittime(10010) <= 25
trigger7 = Random < 100
trigger8 = Projhittime(10011) >= 0 && Projhittime(10011) <= 25
trigger8 = Random < 100
trigger9 = Projhittime(10012) >= 0 && Projhittime(10012) <= 25
trigger9 = Random < 100
trigger10 = Anim = 200
trigger10 = Random < 100
trigger10 = Movehit
trigger11 = Anim = 210
trigger11 = Random < 100
trigger11 = Movehit
trigger12 = Anim = 310
trigger12 = Random < 100
trigger12 = Movehit
trigger13 = Anim = 410
trigger13 = Random < 100
trigger13 = Movehit
trigger14 = Anim = 810
trigger14 = Random < 100
trigger14 = Movehit
trigger15 = Anim = 1021
trigger15 = Random < 100
trigger15 = Movehit
trigger16 = Anim = 1024
trigger16 = Random < 100
trigger16 = Movehit
trigger17 = Anim = 650
trigger17 = Random < 100
trigger17 = Movehit
trigger18 = Anim = 1080
trigger18 = Random < 100
trigger18 = Movehit
trigger19 = Anim = 3020
trigger19 = Random < 100
trigger19 = Movehit
trigger20 = Anim = 2080
trigger20 = Random < 100
trigger20 = Movehit
trigger21 = Projhittime(1005) >= 0 && Projhittime(1005) <= 25
trigger21 = Random < 100
trigger22 = Anim = 300
trigger22 = Random < 100
trigger22 = Movehit
trigger23 = Anim = 1026
trigger23 = Random < 100
trigger23 = Movehit
trigger24 = Anim = 1120
trigger24 = Random < 100
trigger24 = Movehit
trigger25 = Anim = 1121
trigger25 = Random < 300
trigger25 = Movehit
trigger26 = Anim = 1070
trigger26 = Movehit
trigger26 = Random < 100
trigger27 = Anim = 1071
trigger27 = Movehit
trigger27 = Random < 100
trigger28 = Anim = 1072
trigger28 = Movehit
trigger28 = Random < 100
trigger29 = Anim = 3401
trigger29 = Movehit
trigger29 = Random < 100
trigger30 = Anim = 215
trigger30 = Movehit
trigger30 = Random < 100
trigger31 = Random < 50
trigger31 = numtarget(1500)
anim = 4145
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
ignorehitpause = 1

;Freeze
[State -2, Explod]
type = Explod
triggerall = p2movetype = H
trigger1 = Projhittime(1000) >= 0 && Projhittime(1000) <= 25
trigger1 = Random < 100
trigger2 = Projhittime(1004) >= 0 && Projhittime(1004) <= 25
trigger2 = Random < 100
trigger3 = Projhittime(1006) >= 0 && Projhittime(1006) <= 25
trigger3 = Random < 100
trigger4 = Projhittime(2000) >= 0 && Projhittime(2000) <= 25
trigger4 = Random < 100
trigger5 = Projhittime(2010) >= 0 && Projhittime(2010) <= 25
trigger5 = Random < 100
trigger6 = Projhittime(2020) >= 0 && Projhittime(2020) <= 25
trigger6 = Random < 100
trigger7 = Projhittime(10010) >= 0 && Projhittime(10010) <= 25
trigger7 = Random < 100
trigger8 = Projhittime(10011) >= 0 && Projhittime(10011) <= 25
trigger8 = Random < 100
trigger9 = Projhittime(10012) >= 0 && Projhittime(10012) <= 25
trigger9 = Random < 100
trigger10 = Anim = 200
trigger10 = Random < 100
trigger10 = Movehit
trigger11 = Anim = 210
trigger11 = Random < 100
trigger11 = Movehit
trigger12 = Anim = 310
trigger12 = Random < 100
trigger12 = Movehit
trigger13 = Anim = 410
trigger13 = Random < 100
trigger13 = Movehit
trigger14 = Anim = 810
trigger14 = Random < 100
trigger14 = Movehit
trigger15 = Anim = 1021
trigger15 = Random < 100
trigger15 = Movehit
trigger16 = Anim = 1024
trigger16 = Random < 100
trigger16 = Movehit
trigger17 = Anim = 650
trigger17 = Random < 100
trigger17 = Movehit
trigger18 = Anim = 1080
trigger18 = Random < 100
trigger18 = Movehit
trigger19 = Anim = 3020
trigger19 = Random < 100
trigger19 = Movehit
trigger20 = Anim = 2080
trigger20 = Random < 100
trigger20 = Movehit
trigger21 = Projhittime(1005) >= 0 && Projhittime(1005) <= 25
trigger21 = Random < 100
trigger22 = Anim = 300
trigger22 = Random < 100
trigger22 = Movehit
trigger23 = Anim = 1026
trigger23 = Random < 100
trigger23 = Movehit
trigger24 = Anim = 1120
trigger24 = Random < 100
trigger24 = Movehit
trigger25 = Anim = 1121
trigger25 = Random < 300
trigger25 = Movehit
trigger26 = Anim = 1070
trigger26 = Movehit
trigger26 = Random < 100
trigger27 = Anim = 1071
trigger27 = Movehit
trigger27 = Random < 100
trigger28 = Anim = 1072
trigger28 = Movehit
trigger28 = Random < 100
trigger29 = Anim = 3401
trigger29 = Movehit
trigger29 = Random < 100
trigger30 = Anim = 215
trigger30 = Movehit
trigger30 = Random < 100
trigger31 = Random < 50
trigger31 = numtarget(1500)
anim = 4135
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
ignorehitpause = 1

;Freeze
[State -2, Explod]
type = Explod
triggerall = p2movetype = H
trigger1 = Projhittime(1000) >= 0 && Projhittime(1000) <= 25
trigger1 = Random < 100
trigger2 = Projhittime(1004) >= 0 && Projhittime(1004) <= 25
trigger2 = Random < 100
trigger3 = Projhittime(1006) >= 0 && Projhittime(1006) <= 25
trigger3 = Random < 100
trigger4 = Projhittime(2000) >= 0 && Projhittime(2000) <= 25
trigger4 = Random < 100
trigger5 = Projhittime(2010) >= 0 && Projhittime(2010) <= 25
trigger5 = Random < 100
trigger6 = Projhittime(2020) >= 0 && Projhittime(2020) <= 25
trigger6 = Random < 100
trigger7 = Projhittime(10010) >= 0 && Projhittime(10010) <= 25
trigger7 = Random < 100
trigger8 = Projhittime(10011) >= 0 && Projhittime(10011) <= 25
trigger8 = Random < 100
trigger9 = Projhittime(10012) >= 0 && Projhittime(10012) <= 25
trigger9 = Random < 100
trigger10 = Anim = 200
trigger10 = Random < 100
trigger10 = Movehit
trigger11 = Anim = 210
trigger11 = Random < 100
trigger11 = Movehit
trigger12 = Anim = 310
trigger12 = Random < 100
trigger12 = Movehit
trigger13 = Anim = 410
trigger13 = Random < 100
trigger13 = Movehit
trigger14 = Anim = 810
trigger14 = Random < 100
trigger14 = Movehit
trigger15 = Anim = 1021
trigger15 = Random < 100
trigger15 = Movehit
trigger16 = Anim = 1024
trigger16 = Random < 100
trigger16 = Movehit
trigger17 = Anim = 650
trigger17 = Random < 100
trigger17 = Movehit
trigger18 = Anim = 1080
trigger18 = Random < 100
trigger18 = Movehit
trigger19 = Anim = 3020
trigger19 = Random < 100
trigger19 = Movehit
trigger20 = Anim = 2080
trigger20 = Random < 100
trigger20 = Movehit
trigger21 = Projhittime(1005) >= 0 && Projhittime(1005) <= 25
trigger21 = Random < 100
trigger22 = Anim = 300
trigger22 = Random < 100
trigger22 = Movehit
trigger23 = Anim = 1026
trigger23 = Random < 100
trigger23 = Movehit
trigger24 = Anim = 1120
trigger24 = Random < 100
trigger24 = Movehit
trigger25 = Anim = 1121
trigger25 = Random < 300
trigger25 = Movehit
trigger26 = Anim = 1070
trigger26 = Movehit
trigger26 = Random < 100
trigger27 = Anim = 1071
trigger27 = Movehit
trigger27 = Random < 100
trigger28 = Anim = 1072
trigger28 = Movehit
trigger28 = Random < 100
trigger29 = Anim = 3401
trigger29 = Movehit
trigger29 = Random < 100
trigger30 = Anim = 215
trigger30 = Movehit
trigger30 = Random < 100
trigger31 = Random < 50
trigger31 = numtarget(1500)
anim = 4137
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
ignorehitpause = 1

;Freeze
[State -2, Explod]
type = Explod
triggerall = p2movetype = H
trigger1 = Projhittime(1000) >= 0 && Projhittime(1000) <= 25
trigger1 = Random < 100
trigger2 = Projhittime(1004) >= 0 && Projhittime(1004) <= 25
trigger2 = Random < 100
trigger3 = Projhittime(1006) >= 0 && Projhittime(1006) <= 25
trigger3 = Random < 100
trigger4 = Projhittime(2000) >= 0 && Projhittime(2000) <= 25
trigger4 = Random < 100
trigger5 = Projhittime(2010) >= 0 && Projhittime(2010) <= 25
trigger5 = Random < 100
trigger6 = Projhittime(2020) >= 0 && Projhittime(2020) <= 25
trigger6 = Random < 100
trigger7 = Projhittime(10010) >= 0 && Projhittime(10010) <= 25
trigger7 = Random < 100
trigger8 = Projhittime(10011) >= 0 && Projhittime(10011) <= 25
trigger8 = Random < 100
trigger9 = Projhittime(10012) >= 0 && Projhittime(10012) <= 25
trigger9 = Random < 100
trigger10 = Anim = 200
trigger10 = Random < 100
trigger10 = Movehit
trigger11 = Anim = 210
trigger11 = Random < 100
trigger11 = Movehit
trigger12 = Anim = 310
trigger12 = Random < 100
trigger12 = Movehit
trigger13 = Anim = 410
trigger13 = Random < 100
trigger13 = Movehit
trigger14 = Anim = 810
trigger14 = Random < 100
trigger14 = Movehit
trigger15 = Anim = 1021
trigger15 = Random < 100
trigger15 = Movehit
trigger16 = Anim = 1024
trigger16 = Random < 100
trigger16 = Movehit
trigger17 = Anim = 650
trigger17 = Random < 100
trigger17 = Movehit
trigger18 = Anim = 1080
trigger18 = Random < 100
trigger18 = Movehit
trigger19 = Anim = 3020
trigger19 = Random < 100
trigger19 = Movehit
trigger20 = Anim = 2080
trigger20 = Random < 100
trigger20 = Movehit
trigger21 = Projhittime(1005) >= 0 && Projhittime(1005) <= 25
trigger21 = Random < 100
trigger22 = Anim = 300
trigger22 = Random < 100
trigger22 = Movehit
trigger23 = Anim = 1026
trigger23 = Random < 100
trigger23 = Movehit
trigger24 = Anim = 1120
trigger24 = Random < 100
trigger24 = Movehit
trigger25 = Anim = 1121
trigger25 = Random < 300
trigger25 = Movehit
trigger26 = Anim = 1070
trigger26 = Movehit
trigger26 = Random < 100
trigger27 = Anim = 1071
trigger27 = Movehit
trigger27 = Random < 100
trigger28 = Anim = 1072
trigger28 = Movehit
trigger28 = Random < 100
trigger29 = Anim = 3401
trigger29 = Movehit
trigger29 = Random < 100
trigger30 = Anim = 215
trigger30 = Movehit
trigger30 = Random < 100
trigger31 = Random < 50
trigger31 = numtarget(1500)
anim = 4140
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
ignorehitpause = 1

;P2 en el Suelo
[State 1000, explods]
type = Explod
triggerall = (p2stateno = [5100,5460]) && p2movetype = H
trigger1 = var(31) > 0 && Random < 70
anim = 4136
pos = 0,0
facing = -1
postype = p2
sprpriority = 999
bindtime = 1
random = 100,0
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, explods]
type = Explod
triggerall = (p2stateno = [5100,5460]) && p2movetype = H
trigger1 = var(31) > 0 && Random < 100
anim = 4135
pos = 0,-50
postype = p2
sprpriority = 999
bindtime = 1
random = 100,100
ownpal = 1
supermove = 1
ignorehitpause = 1

[State 1000, explods]
type = Explod
triggerall = (p2stateno = [5100,5110]) && p2movetype = H
trigger1 = var(31) > 0 && Random < 50
anim = 3021
pos = 0,10
postype = p2
sprpriority = 999
bindtime = 1
random = 100,0
ownpal = 1
supermove = 1
ignorehitpause = 1
persistent = 0

[State 1000, VarSet]
type = VarSet
trigger1 = p2movetype != H
v = 31
value = 0
persistent = 0

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = gametime%2 = 0
flag = noshadow
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Counter Hits
[State -2, Counter Hit1]
type = VarSet
triggerall = prevstateno != [120,152]
trigger1 = enemy, movetype = A
ignorehitpause = 1
var(15) = 1

[State -2, Counter Hit2]
type = VarSet
trigger1 = enemy, movetype = I || var(16) >= 1
ignorehitpause = 1
var(15) = 0

[State -2, Counter Hit3]
type = VarSet
trigger1 = var(16) > 10 && enemy, movetype = H
ignorehitpause = 1
var(15) = 0

[State -2, Counter Hit4]
type = VarSet
trigger1 = var(15) = 1 && movehit
ignorehitpause = 1
var(16) = 1

[State -2, Counter Hit5]
type = Varadd
trigger1 = var(16) >= 1
ignorehitpause = 1
var(16) = 1

[State -2, Counter Hit6]
type = VarSet
trigger1 = p2movetype != H
trigger2 = var(16) > 22
trigger3 = p2statetype = L
trigger4 = var(16) > 30 && movehit
ignorehitpause = 1
var(16) = 0

[State -2, Counter Hit7]
type = Assertspecial
trigger1 = var(15) = 1 && numexplod(4150) <= 1
flag = Nojugglecheck

[State -2, EnvColor]
type = EnvColor
trigger1 = var(16) = [1,2]
value = 255,255,255
time = 1
ignorehitpause = 1
under = 1

[State -2, Counter Explod1]
type = Explod
triggerall = var(15) = 1 && numexplod(4150) <= 0 && teamside = 2
trigger1 = movehit
trigger2 = Projhit >= 1
ignorehitpause = 1
persistent = 0
anim = f4150
id = 4150
pos = -62,206
postype = right
bindtime = -1
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999

[State -2, Counter Explod2]
type = Explod
triggerall = var(15) = 1 && numexplod(4150) <= 0 && teamside = 1
trigger1 = movehit
trigger2 = Projhit >= 1
ignorehitpause = 1
persistent = 0
anim = f4150
id = 4150
pos = 4,206
postype = left
bindtime = -1
ontop = 1
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 99999
pausemovetime = 99999
;-------------------------------------------------------------------------------
[State -2, Helper]
type = Helper
triggerall = numhelper(9910) <= 0
trigger1 = winKo = 1 && movehit && stateno = [899,4999]
trigger2 = winKo = 1 && Projhittime(1000) >= 0 && Projhittime(1000) <= 1
trigger3 = winKo = 1 && Projhittime(1004) >= 0 && Projhittime(1004) <= 1
trigger4 = winKo = 1 && Projhittime(1006) >= 0 && Projhittime(1006) <= 1
trigger5 = winKo = 1 && Projhittime(2000) >= 0 && Projhittime(2000) <= 1
trigger6 = winKo = 1 && Projhittime(2010) >= 0 && Projhittime(2010) <= 1
trigger7 = winKo = 1 && Projhittime(2020) >= 0 && Projhittime(2020) <= 1
trigger8 = winKo = 1 && Projhittime(10010) >= 0 && Projhittime(10010) <= 1
trigger9 = winKo = 1 && Projhittime(10011) >= 0 && Projhittime(10011) <= 1
trigger10 = winKo = 1 && Projhittime(10012) >= 0 && Projhittime(10012) <= 1
trigger11 = winKo = 1 && Projhittime(1005) >= 0 && Projhittime(1005) <= 1
trigger12 = winKo = 1 && numhelper(2201) = 1
trigger13 = winKo = 1 && stateno = 3021 && p2stateno = [5000,5050]
helpertype = normal
name = "KO Flash"
Id = 9910
stateno = 9910
pos = 0,0
postype = p1
facing = 1
ignorehitpause = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
ownpal = 1

[State -2, Helper]
type = Helper
triggerall = numhelper(9911) <= 0
trigger1 = WinKO
trigger1 = RoundState = 3
helpertype = normal
name = "KO Flash Sound"
Id = 9911
stateno = 9911
pos = 0,0
postype = p1
facing = 1
ignorehitpause = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
ownpal = 1

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
v = 13
value = 0
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
v = 14
value = 0
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Pausa de ataques
[State -3, Slow Down]
type = Pause
triggerall = RoundState = 2
trigger1 = ProjHitTime(1000) = [12,20]
trigger2 = ProjHitTime(10012) = [12,20]
trigger3 = ProjHitTime(2000) = [12,20]
trigger4 = ProjHitTime(2010) = [12,20]
trigger5 = ProjHitTime(2020) = [12,20]
time = 1
movetime = 0
ignorehitpause = 1

[State -2, EnvColor]
type = EnvColor
trigger1 = Projhittime(2000) >= 0 && Projhittime(2000) <= 1
trigger2 = Projhittime(2010) >= 0 && Projhittime(2010) <= 1
trigger3 = Projhittime(2020) >= 0 && Projhittime(2020) <= 1
trigger4 = Projhittime(1005) >= 0 && Projhittime(1005) <= 1
value = 255,255,255
time = 1
under = 1

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
v = 6
value = 0
;-------------------------------------------------------------------------------
;Efectos Para Evitar Errores
[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 310
id = 311
ignorehitpause = 1
persistent = 0

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 310
id = 312
ignorehitpause = 1
persistent = 0

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = prevstateno = 3010
trigger1 = movetype = H
time = 1

[State 1000, EnvShake]
type = EnvShake
trigger1 = prevstateno = 3010
trigger1 = movetype = H
time = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = stateno = 52
id = 650

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 310
id = 311

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 610
id = 611
;----------------------------------------------------------------------------

[State -2, No sound in Guanding KO]
type = AssertSpecial
triggerall = prevstateno = [120,152]
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5070
trigger1 = statetype != A
flag = Nokosnd
ignorehitpause = 1

[State -2, Guarding KO]
type = ChangeState
trigger1 = prevstateno = [120,152]
trigger1 = !alive
value = 6010
ignorehitpause = 1
;----------------------------------------------------------------------------
[State 100, StopSnd]
type = StopSnd
trigger1 = stateno != 910 && stateno != 911
channel = 8

[State 100, StopSnd]
type = StopSnd
trigger1 = stateno != 910 && stateno != 911
channel = 9
;-------------------------------------------------------------------------------

[State -2, 二人目のイントロ]
type = ChangeState
value = 190
triggerall = TeamMode = Turns
trigger1 = stateno = 5900

[State -2, ライフ確認]
type = VarSet
triggerall = RoundState = [0,1]
trigger1 = RoundNo = 1
trigger2 = TeamMode = Turns
trigger2 = RoundsExisted = 0
v = 30
value = Life

[State -2, ライフ取得ミス対策]
type = VarSet
triggerall = var(30) = [0,100]
triggerall = Time = 1
trigger1 = RoundNo = 1
trigger2 = RoundsExisted = 0
v = 30
value = const(data.life)

;----------------------------------------------------------------------------
[State -2, AfterImage]
type = AfterImage
trigger1 = movetype = H
time = 0

[State -2,]
type = StopSnd
trigger1 = Anim != 100
trigger2 = Movetype = H
channel = 6

[State -2,]
type = StopSnd
trigger1 = Movetype = H
channel = 4
;-------------------------------------------------------------------------------
[State -2, 4]
type = VarRandom
triggerall = Time = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
v = 4
range = 0,100

[State -2, 5]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(4) = [0,3]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000,0

[State -2, 6]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(4) = [4,7]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000,1

[State -2, 6]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(4) = [8,11]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000,2

[State -2, 6]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(4) = [12,16]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000,3

[State -2, 6]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(4) = [17,21]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000,4

[State -2, 6]
type = PlaySnd
triggerall = Time = 1
triggerall = Var(4) = [22,100]
triggerall = alive = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s0,99

[State -2]
type = PlaySnd
Triggerall = Alive = 1
triggerall = Time = 1
trigger1 = (stateno = 5100) && (anim = 5100 || anim = 5101 || anim = 5102)
value = S5000,2
;---------------------------------------------------------------------------------
[Statedef -3]
;---------------------------------------------------------------------------------

[State -3, noautoturn]
type = AssertSpecial
trigger1 = BackEdgeBodyDist < 23
flag = noautoturn

[State -3, コマンドを入れたらVarをON]
type = VarSet
trigger1 = command = "jump"
trigger1 = ctrl
trigger1 = statetype = S
v = 3
value = 1

[State -3, sysvarを引継ぐ]
type = VarSet
trigger1 = Var(3) = 1
trigger1 = stateno = 40
trigger1 = AnimTime = 0
var(3) = ifelse(sysvar(1)=0, 2, ifelse(sysvar(1)=1, 3, 4))

[State -3, varをOFFにするステート]
type = VarSet
triggerall = Time = 2
trigger1 = stateno = 50
trigger2 = stateno != [40,59]
v = 3
value = 0

[State -3, 前にボタンを押してたら前にも加速]
type = VelAdd
trigger1 = var(3) = 3
trigger1 = stateno = 50
x = 2

[State -3, 後ろなら後ろに加速]
type = VelAdd
trigger1 = var(3) = 4
trigger1 = stateno = 50
x = -2.1

[State -3, varをOFFにするステート]
type = VarSet
trigger1 = Var(3) != 0
trigger2 = prevstateno = 100
trigger2 = AnimTime = 0
v = 2
value = 1

[State -3, varをOFFにするステート]
type = VarSet
trigger1 = statetype != A
trigger1 = stateno != 40
v = 2
value = 0

[State -3, Afterimage]
type = Afterimage
trigger1 = var(3) >= 1
trigger1 = stateno = 50
trigger2 = AnimTime = 0
trigger2 = prevstateno = 100 ;RUN_FWD
trigger2 = sysvar(1) = 1
time = 2
length = 7
PalBright = 0,0,0
PalContrast = 256,256,256
PalAdd = 0,0,0
PalMul = 1,1,1
FrameGap = 3

[State -3, Afterimagetime]
type = Afterimagetime
triggerall = Var(2) = 1
triggerall = Stateno != 0
trigger1 = stateno = 50
trigger1 = time%2 = 0
time = 2
;------------------------------------------------------------------------------
[State -3, 空中ガード]
type  = ChangeState
value = 132
triggerall = p2movetype = A
triggerall = statetype = A
triggerall = var(20) = 1
triggerall = ctrl
triggerall = stateno != [190,194]
triggerall = p2statetype = A
trigger1   = P2BodyDist X = [40,80]
trigger1   = var(21) = [0,39]
trigger2   = P2BodyDist X = [-20,39]
trigger2   = var(21) = [0,59]

[State -3, 対地 立ちガード]
type  = ChangeState
value = 130
triggerall = p2movetype = A
triggerall = statetype != A
triggerall = var(20) = 1
triggerall = ctrl
triggerall = stateno != [190,194]
triggerall = p2statetype = S
trigger1   = P2BodyDist X = [40,90]
trigger1   = var(21) = [0,14]
trigger2   = P2BodyDist X = [-15,39]
trigger2   = var(21) = [10,29]
trigger3   = enemy,teammode = simul
trigger3   = P2BodyDist X = [-50,-16]
trigger3   = var(21) = [0,39]
trigger4   = P2BodyDist X = [-15,39]
trigger4   = enemy,hitdefattr = S, NA,SA,HA
trigger4   = Random < 200

[State -3, 対空 立ちガード]
type  = ChangeState
value = 130
triggerall = p2movetype = A
triggerall = statetype != A
triggerall = var(20) = 1
triggerall = ctrl
triggerall = stateno != [190,194]
triggerall = p2statetype = A
trigger1   = P2BodyDist X = [40,90]
trigger1   = var(21) = [0,15]
trigger2   = P2BodyDist X = [-40,39]
trigger2   = var(21) = [0,32]
trigger3   = P2BodyDist X = [-40,39]
trigger3   = enemy,hitdefattr = A, NA,SA,HA
trigger3   = Random < 400

[State -3, しゃがみガード]
type  = ChangeState
value = 131
triggerall = p2movetype = A
triggerall = statetype != A
triggerall = var(20) = 1
triggerall = ctrl
triggerall = stateno != [190,194]
trigger1   = p2statetype = C
trigger1   = P2BodyDist X = [40,85]
trigger1   = var(21) = [0,24]
trigger2   = p2statetype = C
trigger2   = P2BodyDist X = [-20,39]
trigger2   = var(21) = [0,39]
trigger3   = p2statetype = S
trigger3   = P2BodyDist X = [-15,39]
trigger3   = var(21) = [0,9]
trigger4   = p2statetype = C
trigger4   = enemy,teammode = simul
trigger4   = P2BodyDist X = [-50,-16]
trigger4   = var(21) = [0,39]
trigger5   = P2BodyDist X = [-20,39]
trigger5   = enemy,hitdefattr = C, NA,SA,HA
trigger5   = Random < 300

[State -3, 投げ]
type  = ChangeState
value = 800
triggerall = var(20) = 1
triggerall = roundstate = 2
triggerall = Random = [0,59]
triggerall = statetype = S
triggerall = ctrl
trigger1   = P2BodyDist X = [-3,3)
trigger1   = p2statetype != A
trigger1   = p2statetype != L
trigger1   = p2movetype != H
