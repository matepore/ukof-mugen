;###########################################################################
; KOF-Common state file
;###########################################################################

;*********************************************************************
; Wait for A.I.
;*********************************************************************
[StateDef 13]
type    = C
physics = C
anim = 11
sprpriority = 0
ctrl = 0

[State 13, Turn Miss]
type = ChangeState
trigger1 = Var(59) < 4
trigger1 = P2Dist X < 0
trigger1 = PlayerID(Var(46)),Pos Y < 0
trigger1 = Random < 1000 - Var(59) * 100
value = 19

[State 13, Turn]
type = turn
trigger1 = P2Dist X < 0

[State 13, StateTypeSet]
type = StateTypeSet
triggerall = StateType = C
;飛んできた時(しゃがみ解除)
trigger1 = PlayerID(Var(46)),StateType = A
trigger1 = Helper(20000+id),Var(6) >= 30 - Var(59) * 5 + Random % 10
trigger1 = facing * PlayerID(Var(46)),facing * PlayerID(Var(46)),Vel X < -1 || P2BodyDist X < 100
trigger1 = P2BodyDist X - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 12 = [-60, 140] ; 100
trigger1 = Random < 20 + Var(59) * (20 + (Life * 100 / LifeMax <= 40) * 20) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
statetype = S
physics = S

[State 120, VarAdd]
type = VarAdd
trigger1 = 1
fvar(33) = 1

[State 13, Guard]
Type = ChangeState
Value = ifelse(StateType = C, 131, 130)
;テンプレ
triggerall = !IsHelper
triggerall = Var(59) > 0
triggerall = RoundState = 2 && Alive
;必要条件
;条件
;これは誰でもガードできるだろjk
trigger1 = InGuardDist || ((Helper(20000+id),Var(0) / 10) % 10)
ctrl = 1

[State 13, End]
type = ctrlset
trigger1 = Time > 10
trigger1 = RoundState != 2
value = 1

;*********************************************************************
; BackWalk for A.I.
;*********************************************************************
[Statedef 18]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 18, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 18, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 18, END]
type = ChangeState
trigger1 = RoundState != 2
trigger1 = Time > 5
trigger2 = Var(59) = 0
trigger2 = (PlayerID(Var(46)),MoveType != H || PlayerID(Var(46)),StateNo < 200) && Time >= 60 || fVar(34) < 3
trigger2 = 0	; 封印
trigger3 = P2BodyDist X <= -10
trigger3 = Time > 10
trigger4 = PlayerID(Var(46)),StateType = L
trigger4 = Time = 3 || Time = 6
trigger4 = P2BodyDist X > 15
trigger4 = (Var(47) = [0, 29]) || (P2BodyDist X > 40 && Var(47) = [0, 69])
value = 0
ctrl = 1

[State 18, Guard]
Type = ChangeState
Value = ifelse(StateType = C, 131, 130)
;テンプレ
triggerall = !IsHelper
triggerall = Var(59) > 0
triggerall = RoundState = 2 && Alive
;必要条件
;条件
;これは誰でもガードできるだろjk
trigger1 = InGuardDist || ((Helper(20000+id),Var(0) / 10) % 10)
ctrl = 1

;*********************************************************************
; FrontWalk for A.I.
;*********************************************************************
[Statedef 19]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 19, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 19, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 19, END]
type = ChangeState
trigger1 = RoundState != 2
trigger1 = Time > 5
trigger2 = Var(59) = 0
trigger2 = (PlayerID(Var(46)),MoveType != H || PlayerID(Var(46)),StateNo < 200) && Time >= 60 || fVar(34) < 3
trigger2 = 0	; 封印
trigger3 = P2BodyDist X <= 0
trigger3 = Time > 10
trigger4 = PlayerID(Var(46)),MoveType = H && PlayerID(Var(46)),StateType = A
trigger4 = P2BodyDist X - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 3 < 10 && P2BodyDist Y+(PlayerID(Var(46)),Vel Y*(4-fVar(36))+(fVar(39)*(4-fVar(36))*((4-fVar(36))-1)/2)) < 50
trigger4 = 0	; 封印
value = 0
ctrl = 1

;*********************************************************************
; FrontWalk for A.I. (To Throw)
;*********************************************************************
[Statedef 21]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 21, 1]
type = VelSet
trigger1 = P2BodyDist X - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 3 >= 30 || Var(59) < 4
x = const(velocity.walk.fwd.x)

[State 21, 3]
type = ChangeAnim
triggerall = Vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 0

[State 21, END]
type = ChangeState
trigger1 = RoundState != 2
trigger1 = Time > 10
trigger2 = P2BodyDist X < -5
trigger2 = Time > 10
trigger3 = NumEnemy >= 2
trigger3 = Time > 10
value = 0
ctrl = 1

;*********************************************************************
; ジャンプ準備動作
;*********************************************************************
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
velset = 0,0

[State 40, ChangeState]
type = ChangeState
triggerall = Var(59) != 0
trigger1 = 1
value = ifelse((PrevStateNo = [120, 149]), 130 + (StateType = C), 0)
ctrl = 1

[State 40, HitBy]
type = HitBy
trigger1 = 1
value = SCA ,AA ,AP

[State 40, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = Time <= 2
trigger2 = command != "holdfwd"
trigger2 = PrevStateNo = 100
trigger2 = P2Dist X < 0
sysvar(1) = 0

[State 40, VarSet]
type = VarSet
trigger1 = Time = 0
trigger1 = command = "holdfwd"
trigger1 = PrevStateNo = 100
trigger2 = Time <= 2
trigger2 = command = "holdfwd"
trigger2 = P2Dist X >= 0
trigger2 = PrevStateNo != 100
trigger3 = Time <= 2
trigger3 = command = "holdback"
trigger3 = P2Dist X < 0
trigger3 = PrevStateNo != 100
sysvar(1) = 1

[State 40, VarSet]
type = VarSet
triggerall = Time <= 2
trigger1 = command = "holdback"
trigger1 = P2Dist X >= 0
trigger1 = PrevStateNo != 100
trigger2 = command = "holdfwd"
trigger2 = P2Dist X < 0
trigger2 = PrevStateNo != 100
sysvar(1) = -1

[State 40, Turn]
type = Turn
triggerall = P2Dist X < 0
trigger1 = PrevStateNo != 100
trigger2 = PrevStateNo = 100
trigger2 = sysvar(1) = 0
persistent = 0

[State 40, VarSet]
type = VarSet
triggerall = command = "holdfwd"
triggerall = P2Dist X >= 0
triggerall = PrevStateNo = 100
trigger1 = sysvar(1) = 0
trigger2 = sysvar(1) = -2
sysvar(1) = 2

[State 40, VarSet]
type = VarSet
triggerall = command = "holdback"
triggerall = P2Dist X >= 0
triggerall = PrevStateNo = 100
trigger1 = sysvar(1) = 0
trigger2 = sysvar(1) = 2
sysvar(1) = -2

[State 40, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

;===============================================================
; ジャンプの種類を判定
;===============================================================
; 小ジャンプ
[State 40, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) = 0
trigger2 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) = 0
trigger3 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
var(5) = 2

; 中ジャンプ
[State 40, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) = 1
trigger2 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) = -1
trigger3 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = 1
var(5) = 3

; 大ジャンプ
[State 40, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0 && Command = "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = 1
var(5) = 4

; ノーマルジャンプ
[State 40, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0 && Command = "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && (var(4) = 0 || (var(4) > 0 && sysvar(1) = 0))
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
var(5) = 1

;===============================================================
; ジャンプの速度を格納
;===============================================================
; 小ジャンプ
[State 40, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 2 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && (var(4) = 0 || var(4) > 0 && sysvar(1) = 0)
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
x = IfElse(sysvar(1)=0,0,IfElse((sysvar(1)=[1,2]),const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = floor(Const(velocity.jump.y)*.7)

; 中ジャンプ
[State 40, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 3 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = 1
x = IfElse((sysvar(1)=[1,2]),const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = floor(Const(velocity.jump.y)*.7)

; 大ジャンプ
[State 40, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 4 && Command = "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = 1
x = IfElse((sysvar(1)=[1,2]),const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = Const(velocity.jump.y)

; ノーマルジャンプ
[State 40, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 1 && Command = "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && (var(4) = 0 || (var(4) > 0 && sysvar(1) = 0))
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
x = IfElse(sysvar(1)=0,0,IfElse((sysvar(1)=[1,2]),const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = Const(velocity.jump.y)

;===============================================================
; エフェクト
;===============================================================
; ジャンプサウンドの再生
[State 40, PlaySnd]
type = PlaySnd
trigger1 = AnimTime = 0
value = 40,IfElse(var(5) >= 3,1,0)

; 中・大ジャンプ残像を表示
[State 40, AfterImage]
type = AfterImage
trigger1 = AnimTime = 0 && var(5) >= 3
time = 10
length = 7
framegap = 2
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
trans = add1

;===============================================================
; ジャンプへ移行
;===============================================================
[State 40, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;*********************************************************************
; ジャンプ準備動作(AI)
;*********************************************************************
[Statedef 39]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
velset = 0,0

[State 39, HitBy]
type = HitBy
trigger1 = 1
value = SCA ,AA ,AP

[State 39, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = Time <= 2
;trigger2 = command != "holdfwd"
trigger2 = PrevStateNo = 100
trigger2 = P2Dist X < 0
sysvar(1) = 0

[State 39, VarSet]
type = VarSet
triggerall = sysvar(1) = 0
triggerall = ((Var(48))%10) != 6
trigger1 = Time = 0
trigger1 = PrevStateNo = 100
trigger1 = P2BodyDist X > -10	; 10
trigger1 = Random < 900	; + (Helper(20000+id),Var(52) > 0) * 600 + (PlayerID(Var(46)),MoveType = H || PlayerID(Var(46)),StateType = L || (PlayerID(Var(46)),StateNo = [5200, 5299])) * 300
trigger2 = Time = 0
trigger2 = P2Dist X >= 0
trigger2 = PrevStateNo != 100
trigger2 = ((Var(48))%10) != 5
trigger2 = ((Var(48))%10) != 7
trigger2 = Random < 700 + (Helper(20000+id),Var(52) > 0) * 200 + (PlayerID(Var(46)),MoveType = H || PlayerID(Var(46)),StateType = L || (PlayerID(Var(46)),StateNo = [5200, 5299])) * 200 + (((Var(48))%10) = 2) * 600
trigger3 = Time <= 2
trigger3 = P2Dist X < 0
trigger3 = PrevStateNo != 100
trigger4 = Time = 0
trigger4 = P2Dist X >= 0
trigger4 = PrevStateNo != 100
trigger4 = ((Var(48))%10) = 7
trigger4 = P2BodyDist X - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 12 > 100 + Random % 20
sysvar(1) = 1

[State 39, VarSet]
type = VarSet
triggerall = Time <= 2
triggerall = sysvar(1) = 0
triggerall = ((Var(48))%10) != 6
trigger1 = Time = 0
trigger1 = P2Dist X >= 0
trigger1 = PrevStateNo != 100
trigger1 = Var(59) < 4 && (Helper(20000+id),fVar(10) > 12 || Helper(20000+id),fVar(11) > 12)
trigger1 = Helper(20000+id),fVar(29) - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 < 90
trigger1 = Random < 600 - Var(59) * 50
;trigger2 = command = "holdfwd"
trigger2 = P2Dist X < 0
trigger2 = PrevStateNo != 100
sysvar(1) = -1

[State 39, Turn]
type = Turn
triggerall = P2Dist X < 0
trigger1 = PrevStateNo != 100
trigger2 = PrevStateNo = 100
trigger2 = sysvar(1) = 0
persistent = 0

[State 39, VarSet]
type = VarSet
;triggerall = command = "holdfwd"
triggerall = P2Dist X >= 0
triggerall = PrevStateNo = 100
trigger1 = sysvar(1) = 0
trigger2 = sysvar(1) = -2
sysvar(1) = 2

[State 39, VarSet]
type = VarSet
triggerall = 0	; command = "holdback"
triggerall = P2Dist X >= 0
triggerall = PrevStateNo = 100
trigger1 = sysvar(1) = 0
trigger2 = sysvar(1) = 2
sysvar(1) = -2

[State 39, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

;===============================================================
; ジャンプの種類を判定
;===============================================================
; 小ジャンプ
[State 39, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0
triggerall = ((Var(48))%10) != 5 && ((Var(48))%10) != 6
triggerall = (Helper(30000+id),fVar(8) = 0 || Helper(30000+id),fVar(8) >= 150) || Helper(30000+id),fVar(9) >= -40
triggerall = PlayerID(Var(46)),StateType != L || fVar(32) = 0 || fVar(32) < 24
trigger1 = PrevStateNo != 100 && PrevStateNo != 920
trigger1 = ((Var(48))%10) != 7
trigger1 = (Helper(20000+id),fVar(29) - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 != [80, 130]) || Random % 3 = 0
trigger1 = Helper(20000+id),fVar(29) - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 < 80 + Random % 40	; 80
trigger1 = Helper(20000+id),fVar(29) - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 < 40 || Random < 700
trigger1 = Random < 100 + (sysvar(1) = 1 || (Helper(20000+id),Var(14) > 0 && P2BodyDist X < 40)) * 300	; 0 + 200
trigger2 = PrevStateNo != 100 && PrevStateNo != 920 && sysvar(1) = 0
trigger2 = Random < 50 + (sysvar(1) = 1) * 200 + (((Var(48))%10) = 7 && Helper(20000+id),fVar(29) + Vel X * 5 < 150 + Random % 20) * 1000
trigger3 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
var(5) = 2

; 中ジャンプ
[State 39, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0
triggerall = PlayerID(Var(46)),StateType != A || P2BodyDist Y-((Vel Y+Const(Movement.Yaccel)*(14-1)/2)*14)+(PlayerID(Var(46)),Vel Y*(14-fVar(36))+(fVar(39)*(14-fVar(36))*((14-fVar(36))-1)/2)) >= -40
triggerall = ((Var(48))%10) != 4 || Helper(20000+id),fVar(29) - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 >= 30	; 100
triggerall = ((Var(48))%10) != 6
triggerall = (Helper(30000+id),fVar(8) = 0 || Helper(30000+id),fVar(8) >= 150) || Helper(30000+id),fVar(9) >= -40
triggerall = Var(59) > 3 || Random < Var(59) * 150 + 400
triggerall = PlayerID(Var(46)),StateType != L || fVar(32) = 0 || fVar(32) < 24
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && sysvar(1) = 1
trigger1 = ((Var(48))%10) != 5
trigger1 = Helper(20000+id),fVar(29) - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 < 140 + Random % 20 || ((Var(48))%10) = 7
trigger1 = Random < 200 + (sysvar(1) > 0) * 300 + (((Var(48))%10) = 7 && Helper(20000+id),fVar(29) + Vel X * 5 < 170 + Random % 20) * 1000	; 600
trigger2 = PrevStateNo != 100 && PrevStateNo != 920 && sysvar(1) = -1
trigger2 = 0
trigger3 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = [1, 2]
trigger3 = Helper(20000+id),fVar(29) + Vel X * 5 < 140 + Random % 20
trigger3 = Random < 600
var(5) = 3

; 大ジャンプ
[State 39, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0
triggerall = ((Var(48))%10) != 6
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && sysvar(1) != 0
trigger1 = Helper(20000+id),fVar(29) + Vel X * 5 - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 > 60
trigger1 = Random < 300 + ((P2BodyDist X > 80 || PrevStateNo = 100) && ((Var(48))%10)!=2) * 300 + (((Var(48))%10) = 7 && Helper(20000+id),fVar(29) < 220 + Random % 20) * 1000 || ((Var(48))%10) = 3 || fVar(32) = [28, 36]
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = [1, 2]
var(5) = 4

; ノーマルジャンプ
[State 39, VarSet]
type = VarSet
triggerall = AnimTime = 0 && var(5) = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 920	; && (var(4) = 0 || (var(4) > 0 && sysvar(1) = 0))
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
var(5) = 1

;===============================================================
; ジャンプの速度を格納
;===============================================================
; 小ジャンプ
[State 39, VelSet]
type = VelSet
triggerall = 0	; AnimTime = 0 && var(5) = 2 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && (var(4) = 0 || var(4) > 0 && sysvar(1) = 0)
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
x = IfElse(sysvar(1)=0,0,IfElse((sysvar(1)=[1,2]),const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = floor(Const(velocity.jump.y)*.7)

; 中ジャンプ
[State 39, VelSet]
type = VelSet
triggerall = 0	; AnimTime = 0 && var(5) = 3 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = 1
x = IfElse((sysvar(1)=[1,2]),const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = floor(Const(velocity.jump.y)*.7)

; 大ジャンプ
[State 39, VelSet]
type = VelSet
triggerall = 0	; AnimTime = 0 && var(5) = 4 && Command = "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && var(4) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) = 1
x = IfElse((sysvar(1)=[1,2]),const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = Const(velocity.jump.y)

; ノーマルジャンプ
[State 39, VelSet]
type = VelSet
triggerall = 0	; AnimTime = 0 && var(5) = 1 && Command = "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 920 && (var(4) = 0 || (var(4) > 0 && sysvar(1) = 0))
trigger2 = (PrevStateNo = 100 || PrevStateNo = 920) && sysvar(1) != 1
x = IfElse(sysvar(1)=0,0,IfElse((sysvar(1)=[1,2]),const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = Const(velocity.jump.y)

; 小ジャンプ
[State 39, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 2
trigger1 = 1
x = IfElse(sysvar(1)=0,0,IfElse((sysvar(1)=[1,2]),const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = floor(Const(velocity.jump.y)*.7)

; 中ジャンプ
[State 39, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 3
trigger1 = 1
x = IfElse((sysvar(1)=[1,2]),const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = floor(Const(velocity.jump.y)*.7)

; 大ジャンプ
[State 39, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 4
trigger1 = 1
x = IfElse((sysvar(1)=[1,2]),const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = Const(velocity.jump.y)

; ノーマルジャンプ
[State 39, VelSet]
type = VelSet
triggerall = AnimTime = 0 && var(5) = 1
trigger1 = 1
x = IfElse(sysvar(1)=0,0,IfElse((sysvar(1)=[1,2]),const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = Const(velocity.jump.y)

;===============================================================
; エフェクト
;===============================================================
; ジャンプサウンドの再生
[State 39, PlaySnd]
type = PlaySnd
trigger1 = AnimTime = 0
value = 40,IfElse(var(5) >= 3,1,0)

; 中・大ジャンプ残像を表示
[State 39, AfterImage]
type = AfterImage
trigger1 = AnimTime = 0 && var(5) >= 3
time = 10
length = 7
framegap = 2
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
trans = add1

;===============================================================
; ジャンプへ移行
;===============================================================
[State 39, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;*********************************************************************
; ジャンプ
;*********************************************************************
[Statedef 50]
type = A
physics = A

; 小、中ジャンプは空中ガードができないようにする処理
[State 50, AssertSpecial]
type = AssertSpecial
trigger1 = var(5) = [2,3]
flag = noairguard
ignorehitpause = 1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && var(5) != [2,3]
value = IfElse((vel x)=0, 41, IfElse((vel x)>0, 42, 43))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && var(5) = [2,3]
value = IfElse((vel x)>0, 52,51)

[State 50, 3]
type = ChangeAnim
trigger1 = var(5) != [2,3]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(Anim + 3)
persistent = 0
value = Anim + 3

[State 50, 3]
type = ChangeAnim
trigger1 = var(5) = [2,3]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(Anim + 2)
persistent = 0
value = Anim + 2

;*********************************************************************
; 着地
;*********************************************************************
[Statedef 52]
type = S
physics = S
anim = 47
ctrl = 0
velset = 0, 0

[State 52, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2,4]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 52, CtrlSet]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 52, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; ダッシュ
;*********************************************************************
;===============================================================
; 開始
;===============================================================
[Statedef 100]
type = S
movetype = I
physics = N
anim = 100
ctrl = 0

; キャンセル受付時間の解除
[State 100, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

; 先行入力発動時の振り向き
[State 100, Turn]
type = Turn
triggerall = Time = 0
trigger1 = P2Dist X < 0

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 100,1]
type = PlaySnd
trigger1 = Time%68=0
value = 100,0
channel = 2

[State 100,4]
type = ChangeState
triggerall = Var(59) = 0 && (Helper(20000+id),Var(58) <= 0 || P2MoveType != H)
trigger1 = Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100,5]
type = ChangeState
triggerall = Var(59) = 0
trigger1 = Command = "holdupfwd"
value = 40

[State 100, Stop(AI)]
type = ChangeState
triggerall = Var(59) > 0
triggerall = Time >= 10
trigger1 = 0 ;Random < 100
trigger2 = P2Dist X < -20 || (FrontEdgeBodyDist < 30 && P2BodyDist X < 0)
trigger2 = Time > 10 || PlayerID(Var(46)),Pos Y >= 0
value = 101
ctrl = 1

[State 100, Stop(AI)]
type = ChangeState
triggerall = Var(59) < 0
triggerall = Time >= 10
trigger1 = Helper(20000+id),fVar(8) = 0
trigger1 = Time > 20
trigger1 = BackEdgeBodyDist > 180 || P2BodyDist X - Helper(20000+id),fVar(2) * PlayerID(Var(46)),Vel X * 10 * (fVar(31) > 70) < 60 || Time > 60
trigger2 = NumPartner
trigger2 = Partner,Alive
trigger2 = Helper(20000+id),fVar(8) + facing * Partner,facing * Partner,Vel X * 15 < 40 || Partner,StateNo = [99, 106]
value = 101
ctrl = 1

[State 100,6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;===============================================================
; 停止
;===============================================================
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0

[State 101,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; バックステップ
;*********************************************************************
;===============================================================
; 開始
;===============================================================
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

; キャンセル受付時間の解除
[State 105, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

; 先行入力発動時の振り向き
[State 105, Turn]
type = Turn
triggerall = Time = 0
trigger1 = P2Dist X < 0

[State 105, HitBy]
type = HitBy
trigger1 = AnimElemTime(2) < 0
value = SCA ,AA ,AP

[State 105, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 105,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105,VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .12

[State 105, VelMul]
type = VelMul
trigger1 = AnimElem = 2, > 0
x = .94

[State 105, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0

[State 105, VelAdd]
type = VelSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
x = 0

[State 105, PosSet]
type = PosSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 105, End]
type = ChangeState
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;===============================================================
; 停止
;===============================================================
[Statedef 106]
type = S
movetype = I
physics = S
anim = 106
velset = 0, 0

[State 106, PlaySnd]
type = PlaySnd
trigger1 = Time= 1
value = 52,0

[State 106, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; ガード
;*********************************************************************

; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != 20 && Anim != 130 && Anim != 131
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = Statetype = S
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = Statetype = C
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = command != "holddown"
statetype = S
physics = S
pausemovetime = 9999

[State 120, Advance]
type = ChangeAnim
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
triggerall = StateType != A
triggerall = Anim != 20
trigger1 = Helper(20000+id),Var(19)
value = 20

[State 120, Advance END]
type = ChangeAnim
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
triggerall = Anim = 20
trigger1 = !Helper(20000+id),Var(19)
trigger2 = StateType = A
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, Advance Vel]
type = velset
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
trigger1 = Anim = 20
X = const(velocity.walk.fwd.x)

[State 120, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (100 + (Life * 100 / LifeMax <= 40) * 100) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 120, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 100 + Var(59) * (50 + (Life * 100 / LifeMax <= 40) * 50) + ((Helper(20000+id),Var(2)) % 10) * 50 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 120, VarAdd]
type = VarAdd
trigger1 = 1
fvar(33) = 1

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0 && Anim != 20
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
triggerall = Var(59) <= 0 && Helper(20000+id),Var(58) = 0
triggerall = StateType = S
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 20
ctrl = 1

[State 120, Stop Guarding]
type = ChangeState
triggerall = Var(59) <= 0 && Helper(20000+id),Var(58) = 0
triggerall = StateType = C
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 11
ctrl = 1

[State 120, Stop Guarding]
type = ChangeState
triggerall = Var(59) <= 0 && Helper(20000+id),Var(58) = 0
triggerall = StateType = A
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140 ;53
ctrl = 1


;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S
ctrl = 1

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130 && Anim != 20
value = 130

[State 120, Advance]
type = ChangeAnim
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
triggerall= Anim != 20
trigger1 = Helper(20000+id),Var(19)
value = 20

[State 120, Advance END]
type = ChangeAnim
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
triggerall = Anim = 20
trigger1 = !Helper(20000+id),Var(19)
value = 130

[State 120, Advance Vel]
type = velset
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
trigger1 = Anim = 20
X = const(velocity.walk.fwd.x)

[State 130, Hi to Lo]; 
type = ChangeState
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = command = "holddown"
value = 131

[State 130, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (80 + (Life * 100 / LifeMax <= 40) * 80) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 130, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 40 + Var(59) * (40 + (Life * 100 / LifeMax <= 40) * 40) + ((Helper(20000+id),Var(2)) % 10) * 40 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 120, VarAdd]
type = VarAdd
trigger1 = 1
fvar(33) = 1

[State 130, Turn]
type = Turn
trigger1 = ceil(P2Dist X) < -10

[State 130, Stop Guarding]
type = ChangeState
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = !inguarddist
value = 20
ctrl = 1

[State 130, Stop Guarding]
type = ChangeState
triggerall = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = command != "holdback"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C
ctrl = 1

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131 && Anim != 20
value = 131

[State 120, Advance]
type = ChangeAnim
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
triggerall= Anim != 20
trigger1 = Helper(20000+id),Var(19)
value = 20

[State 120, Advance END]
type = ChangeAnim
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
triggerall = Anim = 20
trigger1 = !Helper(20000+id),Var(19)
value = 131

[State 120, Advance Vel]
type = velset
triggerall = Var(59) > 0 || Helper(20000+id),Var(58) = [-2, -1]
trigger1 = Anim = 20
X = const(velocity.walk.fwd.x)

[State 131, Lo to Hi];
type = ChangeState
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = command != "holddown"
value = 130

[State 131, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (80 + (Life * 100 / LifeMax <= 40) * 80) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 131, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 40 + Var(59) * (40 + (Life * 100 / LifeMax <= 40) * 40) + ((Helper(20000+id),Var(2)) % 10) * 40 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 120, VarAdd]
type = VarAdd
trigger1 = 1
fvar(33) = 1

[State 131, Turn]
type = Turn
trigger1 = ceil(P2Dist X) < -10

[State 131, Stop Guarding]
type = ChangeState
triggerall = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = !inguarddist
trigger2 = command != "holdback"
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N
ctrl = 1

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
trigger2 = Var(59) > 0
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
triggerall = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140 ;53
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 140, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (80 + (Life * 100 / LifeMax <= 40) * 80) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 140, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 40 + Var(59) * (40 + (Life * 100 / LifeMax <= 40) * 40) + ((Helper(20000+id),Var(2)) % 10) * 40 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 140, Turn]
type = Turn
trigger1 = ceil(P2Dist X) < -10

[State 140, ChangeState]
type = ChangeState
trigger1 = Var(59) > 4
value = 131

[State 140, 5] ;Implemented within engine
type = ChangeState
triggerall = Var(59) = 0 && Helper(20000+id),Var(58) != [-2, -1]
trigger1 = AnimTime = 0
trigger1 = !ctrl
trigger1 = StateType = S
value = 0
ctrl = 1

[State 140, 5] ;Implemented within engine
type = ChangeState
triggerall = Var(59) = 0 && Helper(20000+id),Var(58) != [-2, -1]
trigger1 = AnimTime = 0
trigger1 = !ctrl
trigger1 = StateType = C
value = 11
ctrl = 1

[State 140, 5] ;Implemented within engine
type = ChangeState
triggerall = Var(59) = 0 && Helper(20000+id),Var(58) != [-2, -1]
trigger1 = AnimTime = 0
trigger1 = !ctrl
trigger1 = StateType = A
value = 53
ctrl = 1

;*********************************************************************
; ガード硬直（立ち）
;*********************************************************************
[Statedef 150]
type = S
movetype = H
physics = N
velset = 0,0

[State 150, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 150

; ガードキャンセル判定用varの初期化
[State 150, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = 0

; ガードキャンセル緊急回避動作（前）へのステート移行を予約
[State 150, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = Command = "recovery" || Command = "c" 
trigger1 = Command != "hold_y"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_z"
trigger1 = Command != "holdback"
var(23) = 901

; ガードキャンセル緊急回避動作（後）へのステート移行を予約
[State 150, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = (Command = "recovery" || Command = "c" ) && Command = "holdback"
trigger1 = Command != "hold_y"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_z"
trigger1 = Command != "holdfwd"
var(23) = 906

; ガードキャンセルグランドフロントステップへのステート移行を予約
[State 150, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = Command = "FF"
var(23) = 920

; ガードキャンセル吹っ飛ばし攻撃へのステート移行を予約
[State 150, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = Command = "by" || Command = "z"
var(23) = 930

;7~8F, 37F, 100D, 37D, HitPauseを無視して発動
[State 150, ガードキャンセル吹っ飛ばし攻撃]
type = VarSet
;テンプレ
triggerall = !IsHelper
triggerall = Var(59) > 0
triggerall = RoundState = 2 && Alive
;必要条件
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
;条件
triggerall = P2Dist X >= 0
triggerall = PlayerID(Var(46)),StateType != L
triggerall = PlayerID(Var(46)),MoveType != H || PlayerID(Var(46)),StateNo < 200
;追い詰められたらガーキャン(Lv.3以下)
trigger1 = Var(59) <= 3
trigger1 = !((Helper(20000+id),Var(16) / 10) % 10)
trigger1 = PlayerID(Var(46)),Vel Y >= 0
trigger1 = PlayerID(Var(46)),MoveType = A && PlayerID(Var(46)),StateNo >= 200
trigger1 = (PlayerID(Var(46)),AnimTime<-1&&Helper(20000+id),fVar(12) + PlayerID(var(46)),AnimTime > 10 - (P2BodyDist X <= 25) * 4) || PlayerID(var(46)),AnimTime < 10	; 5
trigger1 = Helper(20000+id),Var(17) >= 10 || Helper(20000+id),Var(1) = 13 || Helper(20000+id),Var(1) = 19
trigger1 = P2BodyDist X <= 100 + (4 - Var(59)) * Var(47) % 10
trigger1 = P2BodyDist Y >= -37 + (4 - Var(59)) * Var(47) % 10
trigger1 = (PrevStateNo = [150, 159]) || Helper(20000+id),Var(6) >= 20
trigger1 = Var(47) = [80 - (Power >= PowerMax * 2 / 5) * Power / 100 - (BackEdgeBodyDist <= 60 && fVar(30) <= 70) * 10, 99]
trigger1 = Random < 60 + (Life * 100 / LifeMax <= 30) * 60
;タッグ戦でガーキャン
trigger2 = Var(59) > 3
trigger2 = NumPartner && NumEnemy >= 2
trigger2 = Helper(20000+id),fVar(9) > 0
trigger2 = PlayerID(Var(46)),Vel Y >= 0
trigger2 = PlayerID(Var(46)),MoveType = A && PlayerID(Var(46)),StateNo >= 200
trigger2 = Helper(20000+id),fVar(12) + PlayerID(var(46)),AnimTime > 8 - (P2BodyDist X <= 25) * 3 || PlayerID(var(46)),AnimTime >= 1
trigger2 = P2BodyDist X <= 90
trigger2 = P2BodyDist Y >= -35
trigger2 = Var(47) = [80 - (Power >= PowerMax * 2 / 5) * Power / 100, 99]
trigger2 = Random < 100	; 50
var(23) = 930

; 各ガードキャンセル行動へ移行
[State 150, ChangeState]
type = ChangeState
triggerall = var(23) > 0
trigger1 = HitShakeOver
value = var(23)

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(Var(59) = 0 && Helper(20000+id),Var(58) != -1 && command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (100 + (Life * 100 / LifeMax <= 40) * 100) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 150, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 100 + Var(59) * (50 + (Life * 100 / LifeMax <= 40) * 50) + ((Helper(20000+id),Var(2)) % 10) * 80 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 150, ForceFeedback]
type = ForceFeedback
trigger1 = Time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (100 + (Life * 100 / LifeMax <= 40) * 100) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 150, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 100 + Var(59) * (50 + (Life * 100 / LifeMax <= 40) * 50) + ((Helper(20000+id),Var(2)) % 10) * 80 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;*********************************************************************
; ガード硬直（しゃがみ）
;*********************************************************************
[Statedef 152]
type = C
movetype = H
physics = N
velset = 0,0

[State 152, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 151

; ガードキャンセル判定用varの初期化
[State 152, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = 0

; ガードキャンセル緊急回避動作（前）へのステート移行を予約
[State 152, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = Command = "recovery" || Command = "c" 
trigger1 = Command != "hold_y"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_z"
trigger1 = Command != "holdback"
var(23) = 901

; ガードキャンセル緊急回避動作（後）へのステート移行を予約
[State 152, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = (Command = "recovery" || Command = "c" ) && Command = "holdback"
trigger1 = Command != "hold_y"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_z"
trigger1 = Command != "holdfwd"
var(23) = 906

; ガードキャンセルグランドフロントステップへのステート移行を予約
[State 152, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = Command = "FF"
var(23) = 920

; ガードキャンセル吹っ飛ばし攻撃へのステート移行を予約
[State 152, VarSet]
type = VarSet
triggerall = Var(59) = 0
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
triggerall = !IsHelper
trigger1 = Command = "by" || Command = "z"
var(23) = 930

;7~8F, 37F, 100D, 37D, HitPauseを無視して発動
[State 152, ガードキャンセル吹っ飛ばし攻撃]
type = VarSet
;テンプレ
triggerall = !IsHelper
triggerall = Var(59) > 0
triggerall = RoundState = 2 && Alive
;必要条件
triggerall = var(23) = 0
triggerall = !HitShakeOver
triggerall = Power >= PowerMax/5
;条件
triggerall = P2Dist X >= 0
triggerall = PlayerID(Var(46)),StateType != L
triggerall = PlayerID(Var(46)),MoveType != H || PlayerID(Var(46)),StateNo < 200
;追い詰められたらガーキャン(Lv.3以下)
trigger1 = Var(59) <= 3
trigger1 = !((Helper(20000+id),Var(16) / 10) % 10)
trigger1 = PlayerID(Var(46)),Vel Y >= 0
trigger1 = PlayerID(Var(46)),MoveType = A && PlayerID(Var(46)),StateNo >= 200
trigger1 = (PlayerID(Var(46)),AnimTime<-1&&Helper(20000+id),fVar(12) + PlayerID(var(46)),AnimTime > 10 - (P2BodyDist X <= 25) * 4) || PlayerID(var(46)),AnimTime < 10	; 5
trigger1 = Helper(20000+id),Var(17) >= 10 || Helper(20000+id),Var(1) = 13 || Helper(20000+id),Var(1) = 19
trigger1 = P2BodyDist X <= 100 + (4 - Var(59)) * Var(47) % 10
trigger1 = P2BodyDist Y >= -37 + (4 - Var(59)) * Var(47) % 10
trigger1 = (PrevStateNo = [150, 159]) || Helper(20000+id),Var(6) >= 20
trigger1 = Var(47) = [80 - (Power >= PowerMax * 2 / 5) * Power / 100 - (BackEdgeBodyDist <= 60 && fVar(30) <= 70) * 10, 99]
trigger1 = Random < 60 + (Life * 100 / LifeMax <= 30) * 60
;タッグ戦でガーキャン
trigger2 = Var(59) > 3
trigger2 = NumPartner && NumEnemy >= 2
trigger2 = Helper(20000+id),fVar(9) > 0
trigger2 = PlayerID(Var(46)),Vel Y >= 0
trigger2 = PlayerID(Var(46)),MoveType = A && PlayerID(Var(46)),StateNo >= 200
trigger2 = Helper(20000+id),fVar(12) + PlayerID(var(46)),AnimTime > 8 - (P2BodyDist X <= 25) * 3 || PlayerID(var(46)),AnimTime >= 1
trigger2 = P2BodyDist X <= 90
trigger2 = P2BodyDist Y >= -35
trigger2 = Var(47) = [80 - (Power >= PowerMax * 2 / 5) * Power / 100, 99]
trigger2 = Random < 100	; 50
var(23) = 930

; 各ガードキャンセル行動へ移行
[State 152, ChangeState]
type = ChangeState
triggerall = var(23) > 0
trigger1 = HitShakeOver
value = var(23)

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1]) || command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != [-2, -1]
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != [-2, -1]
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (100 + (Life * 100 / LifeMax <= 40) * 100) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 152, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 100 + Var(59) * (50 + (Life * 100 / LifeMax <= 40) * 50) + ((Helper(20000+id),Var(2)) % 10) * 80 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 152, ForceFeedback]
type = ForceFeedback
trigger1 = Time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = Var(59) = 0 && Helper(20000+id),Var(58) != -1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, Hi to Lo AI]
Type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = S
triggerall = Random < 100 + Var(59) * (100 + (Life * 100 / LifeMax <= 40) * 100) || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(55) % 100000 && PlayerID(Var(45)),Anim != Var(55) / 100000) || PlayerID(Var(45)),StateNo < 200
;対しゃがみ
trigger1 = PlayerID(Var(45)),StateType = C
;対立ち
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time < 15 && Var(56) % 4
trigger2 = !((Helper(20000+id),Var(2))&1) && !((Helper(20000+id),Var(2))&2)
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(57) % 100000 || PlayerID(Var(45)),Anim = Var(57) / 100000
trigger3 = Var(47) % 10 < Var(59) + 1 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || ((Helper(20000+id),Var(2)) % 10) || Var(59) > 3 || Helper(20000+id),Var(58)
;下段設置
trigger4 = Var(39) = 1
trigger4 = PlayerID(Var(45)),MoveType != A || PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
StateType = C
Physics = C

[State 153, Lo to Hi AI]
type = StateTypeSet
triggerall = Var(59) > 0 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = StateType = C
triggerall = Random < 100 + Var(59) * (50 + (Life * 100 / LifeMax <= 40) * 50) + ((Helper(20000+id),Var(2)) % 10) * 80 || Var(59) > 3 || (Helper(20000+id),Var(58) = [-2, -1])
triggerall = (PlayerID(Var(45)),Anim != Var(57) % 100000 && PlayerID(Var(45)),Anim != Var(57) / 100000) || PlayerID(Var(45)),StateNo < 200
;対空
trigger1 = PlayerID(Var(45)),StateType = A
trigger1 = Helper(20000+id),Var(6)>=10+Random%10||PlayerID(Var(45)),Time>=15||Var(59)>3||(Helper(20000+id),Var(17)>=30-Var(59)*5&&Var(47)=[0, Var(59)*10+9])||(NumEnemy>=2&&Helper(20000+id),Var(47)!=1)||Helper(20000+id),Var(58)=-1
trigger1 = Random < 400 || Var(59) > 3
;中段
trigger2 = PlayerID(Var(45)),StateType = S
trigger2 = PlayerID(Var(46)),Time > 14 || ((Helper(20000+id),Var(2))&1) || ((Helper(20000+id),Var(2))&2)
trigger2 = PlayerID(Var(45)),MoveType = A && PlayerID(Var(45)),StateNo >= 200
trigger2 = !((Helper(20000+id),Var(16) / 100) % 10)
trigger2 = Var(47) % 5 < 3
;学習
trigger3 = PlayerID(Var(45)),StateNo >= 200 && !PlayerID(Var(45)),ctrl
trigger3 = PlayerID(Var(45)),Anim = Var(55) % 100000 || PlayerID(Var(45)),Anim = Var(55) / 100000
trigger3 = Var(47) % 10 < Var(59) + 2 || PlayerID(Var(45)),Time > 30 - Var(59) * 5 + Random % 10 || Var(59) > 3 || Helper(20000+id),Var(58)
;中段設置
trigger4 = Var(39) = 2
trigger4 = PlayerID(Var(45)),StateNo < 200 || PlayerID(Var(45)),ctrl
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;###########################################################################
; 特殊動作
;###########################################################################

;*********************************************************************
; 投げ抜け
;*********************************************************************
;===============================================================
; 自分側
;===============================================================
[Statedef 820]
type = S
movetype = A
physics = N
anim = 5945
ctrl = 0
velset = 0, 0

[State 820, TargetBind]
type = TargetState
trigger1 = Time = 0
value = 870

[State 820, Envcolor]
type = Envcolor
trigger1 = AnimElem = 2,=1
value = 255, 255, 255
time = 1
under = 1

[State 820, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=3
value = 8020,0

[State 820, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 820, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 820, VelMul]
type = velset
trigger1 = AnimElem = 2
x = -7

[State 820, VelMul]
type = VelMul
trigger1 = 1
x = .80

[State 820, PlayerPush]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 820, End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;===============================================================
; 相手側
;===============================================================
[Statedef 870]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0, 0

[State 870, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 870, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && SelfAnimExist(5940)
value = 5940

[State 870, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && SelfAnimExist(5910) && !SelfAnimExist(5940)
value = 5910

[State 870, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 5940 && Anim != 5910
value = 5007

[State 870, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 870, PlayerPush]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 870, End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1

;*********************************************************************
; 緊急回避動作（前）
;*********************************************************************
[Statedef 900]
type = S
movetype = I
physics = N
ctrl = 0
anim = 900
velset = 0, 0

; 先行入力発動時の振り向き
[State 900, Turn]
type = Turn
triggerall = Time = 0
trigger1 = P2Dist X < 0

; 振り向き時の暴発防止
[State 900, ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "holdback"
value = 905
ctrl = 0

; キャンセル受付時間の解除
[State 900, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

[State 900, HitBy]
type = HitBy
trigger1 = AnimElemTime(8) < 0
value = SCA,AT

[State 900,PlayerPush]
type = PlayerPush
trigger1 = AnimElemNo(0)<8
value = 0

[State 900, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 5

[State 900, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 900, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 900,0
channel = 0

[State 900, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2,=1
time = 12
length = 7
framegap = 2
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
trans = add1

[State 900, Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 900, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; ガードキャンセル緊急回避動作（前）
;*********************************************************************
[Statedef 901]
type = S
movetype = I
physics = N
ctrl = 0
anim = 901
velset = 0, 0
poweradd = -(PowerMax/5)

; キャンセル受付時間の解除
[State 901, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

; ガードキャンセル判定用varの初期化
[State 901, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = 0

[State 901, EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255
under = 1
time = 4

[State 901, Explod]
type = Explod
trigger1 = Time = 0
anim = 915
pos = 7,-72
ownpal = 1
ontop = 1
sprpriority = 4

[State 901, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,=1
value = 900,0
channel = 0

[State 901, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 901, NotHitBy]
type = NotHitBy
trigger1 = AnimTime = 0
value = SCA
time = 1

[State 901, PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 11,<0
value = 0

[State 901, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 5.25

[State 901, VelSet]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 901, AfterImage]
type = AfterImage
trigger1 = AnimElem = 6,=1
time = 16
length = 6
palcolor = 0
palcontrast = 90,80,200
paladd = 0,0,0
timegap = 2
framegap = 2
Trans = Add1

[State 901, Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 901, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; 緊急回避動作（後）
;*********************************************************************
[Statedef 905]
type = S
movetype = I
physics = N
ctrl = 0
anim = 905
velset = 0, 0

; 先行入力発動時の振り向き
[State 905, Turn]
type = Turn
triggerall = Time = 0
trigger1 = P2Dist X < 0

; キャンセル受付時間の解除
[State 905, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

[State 905, HitBy]
type = HitBy
trigger1 = AnimElemTime(8) < 0
value = SCA,AT

[State 905, PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 8,<0
value = 0

[State 905, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = -5

[State 905, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 900,0
channel = 0

[State 905, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 905, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2,=1
time = 12
length = 7
framegap = 2
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
trans = add1

[State 905, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; ガードキャンセル緊急回避動作（後）
;*********************************************************************
[Statedef 906]
type = S
movetype = I
physics = N
ctrl = 0
anim = 906
velset = 0, 0
poweradd = -(PowerMax/5)

; キャンセル受付時間の解除
[State 906, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

; ガードキャンセル判定用varの初期化
[State 906, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = 0

[State 906, EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255
under = 1
time = 4

[State 906, Explod]
type = Explod
trigger1 = Time = 0
anim = 915
pos = 7,-72
ownpal = 1
ontop = 1
sprpriority = 4

[State 906, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,=1
value = 900,0
channel = 0

[State 906, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 906, NotHitBy]
type = NotHitBy
trigger1 = AnimTime = 0
value = SCA
time = 1

[State 906, PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 11,<0
value = 0

[State 906, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = -5.25

[State 906, VelSet]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 906, AfterImage]
type = AfterImage
trigger1 = AnimElem = 6,=1
time = 16
length = 6
palcolor = 0
palcontrast = 90,80,200
paladd = 0,0,0
timegap = 2
framegap = 2
Trans = Add1

[State 906, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; クイック緊急回避
;*********************************************************************
[Statedef 910]
type = S
movetype = I
physics = N
ctrl = 0
anim = 910
velset = 0, 0
poweradd = -(PowerMax/5)

; キャンセル受付時間の解除
[State 910, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

[State 910, EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255
under = 1
time = 4

[State 910, Explod]
type = Explod
trigger1 = Time = 0
anim = 915
pos = 7,-72
ownpal = 1
ontop = 1
sprpriority = 4

[State 910, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,=1
value = 900,0
channel = 0

[State 910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 910, NotHitBy]
type = NotHitBy
trigger1 = AnimTime = 0
value = SCA
time = 1

[State 910, PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 10,<0
value = 0

[State 910, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 5.25

[State 910, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 910, Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 910, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; ガードキャンセルグランドフロントステップ
;*********************************************************************
[Statedef 920]
type = S
movetype = I
physics = N
ctrl = 0
anim = 920
velset = 0, 0
poweradd = -(PowerMax/5)

; キャンセル受付時間の解除
[State 920, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

; ガードキャンセル判定用varの初期化
[State 920, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = 0

[State 920, PalFX]
type = PalFX
triggerall = GameTime % 2
trigger1 = AnimElem = 2,< 0
time = 1
add = 255,255,255

[State 920, HitBy]
type = HitBy
trigger1 = Time <= 10
value = SCA,NT,ST,HT

[State 920, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=3
value = 920,0

[State 920, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 920, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 7

[State 920, VelMul]
type = VelMul
trigger1 = AnimElem = 2, > 0
x = .94

[State 920, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 920, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = 10
length = 10
framegap = 3
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 920, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 101
ctrl = 1

;*********************************************************************
; ガードキャンセル吹っ飛ばし攻撃
;*********************************************************************
[Statedef 930]
type = S
movetype = A
physics = S
ctrl = 0
anim = 930
velset = 0, 0
poweradd = -(PowerMax/5)

; 無敵時間の設定
[State 930, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 5,<1
value = SCA

; キャンセル受付時間の解除
[State 930, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = AnimElem = 6
var(9) = 0

; ガードキャンセル判定用varの初期化
[State 930, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = 0

[State 930, PalFX]
type = PalFX
trigger1 = AnimElem = 1,<= 1
time = 1
add = 255,255,255

;キャンセル受付時間の格納
[State 930, VarSet]
type = VarSet
trigger1 = var(22) = 1
var(9) = 2
ignorehitpause = 1

[State 930, HitDef]
type = HitDef
triggerall = !MoveContact && !MoveReversed
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
attr = S, NA
damage = 20
getpower = 0
animtype = Hard
hitflag = MAF
guardflag = M
pausetime = 14,14
sparkno = S8010
guard.sparkno = S8060
sparkxy = 5,-45
hitsound = S8020,0
guardsound = S8050,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -4.5,-8.4
air.hittime = 13
air.velocity = -4.5,-8.4
down.velocity = -3.5,-2 
guard.velocity = -15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recovertime = 13-5+Helper(8990),var(23);40
id = IfElse(var(1)=0,930,2)
yaccel = .6
kill = 0
nochainid = var(11)

[State 930, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 930, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 930, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 9

[State 930, PosAdd]
type = PosAdd
trigger1 = AnimElem = 7
x = -9

[State 930, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = -8

[State 930, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; パワーMAX発動
;*********************************************************************
;===============================================================
; MAX発動
;===============================================================
[Statedef 950]
type = S
movetype = I
physics = S
anim = 950
sprpriority = 1
velset = 0,0
ctrl = 0
poweradd = -(PowerMax/5)

; 先行入力発動時の振り向き
[State 950, Turn]
type = Turn
triggerall = Time = 0
trigger1 = P2Dist X < 0

; キャンセル受付時間の解除
[State 950, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

[State 950, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 950, VarSet]
type = VarSet
trigger1 = Time = 0
fvar(0) = 768

[State 950, VarSet]
type = VarSet
trigger1 = fvar(0) > 0
trigger1 = var(6)
var(7) = Power
ignorehitpause = 1
persistent = 0

[State 950, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 8505
sprpriority = -1
pos = 0,-101
supermovetime = -1
pausemovetime = -1
ownpal = 1

[State 950, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 14
freq = 90
ampl = -12

[State 950, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 950,0

[State 950, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================
; クイックMAX発動
;===============================================================
[Statedef 955]
type = S
movetype = I
physics = S
anim = 0
sprpriority = 1
velset = 0,0
ctrl = 0
poweradd = -(PowerMax*2/5)

; キャンセル受付時間の解除
[State 955, VarSet]
type = Null;VarSet
trigger1 = Time = 0
var(9) = 0

; ダメージ補正
[State 955, VarSet]
type = VarSet
trigger1 = Time = 0
fvar(1) = .45

[State 955, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 955, VarSet]
type = VarSet
trigger1 = Time = 0
fvar(0) = 768

[State 955, VarSet]
type = VarSet
trigger1 = fvar(0) > 0
trigger1 = var(6)
var(7) = Power
persistent=0
ignorehitpause = 1

[State 955, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 955,0

[State 955, ChangeState]
type = ChangeState
triggerall = Var(59) = 0
trigger1 = Time = 0 && Command = "FF"
value = 100
ctrl = 0

[State 955, ChangeState]
type = ChangeState
triggerall = Var(59) != 0 || Helper(20000+id),Var(58) > 0
triggerall = Time = 0
trigger1 = PlayerID(Var(46)),MoveType = H && PlayerID(Var(46)),StateNo >= 200 && !PlayerID(Var(46)),ctrl
trigger1 = fVar(34) > 9
trigger1 = (Var(51) % 10)
trigger1 = (Var(47) % 100 = [0, (Helper(20000+id),Var(56) * 20) + 29 + (Life * 100 / LifeMax <= 33) * 20 + (Var(56) >= 4) * 10]) || Helper(20000+id),Var(58)
value = 100
ctrl = 0

[State 955, ChangeState]
type = ChangeState
triggerall = Var(59) = 0
trigger1 = Time = 0 && Command = "BB"
value = 105
ctrl = 0

[State 955, ChangeState]
type = ChangeState
triggerall = Var(59) = 0
trigger1 = Time >= 0
value = 0+11*(Command="holddown")
ctrl = 1

;*********************************************************************
; 吹っ飛び下降
;*********************************************************************
[Statedef 5050]
type = A
movetype = H
physics = N

; 足払いでダウンした時のエフェクト表示用の判定を初期化
[State 5050, Var]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[State 5050, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, ChangeAnim] ;Coming down anim
type = ChangeAnim
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050, 1, -2)
trigger1 = SelfAnimExist(Anim+10)
value = Anim+10
persistent = 0

[State 5050, VelAdd] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, ChangeState] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Helper(8990),var(0) = [900,905]
value = 5200 ;HITFALL_RECOVER

[State 5050, ChangeState]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = Pos Y < -20
triggerall = alive
triggerall = CanRecover
trigger1 = Helper(8990),var(10) = [600,640]
trigger2 = Helper(8990),var(10) = 700
trigger3 = Helper(8990),var(0) = [900,905]
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= IfElse((Anim = [5051,5059]) || (Anim = [5061,5069]), 0, 25)
;trigger1 = Pos Y >= IfElse((anim = [5051,5059]) || (anim = [5061,5069]), 0, Const(movement.air.gethit.groundlevel))
value = 5100 ;HIT_BOUNCE

;*********************************************************************
; 足払いで転ぶ
;*********************************************************************
[Statedef 5071]
type = A
movetype = H
physics = N

[State 5071, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, VelAdd] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, ChangeState] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = Alive
triggerall = CanRecover
trigger1 = Helper(8990),var(0) = [900,905]
value = 5200 ;HITFALL_RECOVER

[State 5071, ChangeState] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
value = 5100

;*********************************************************************
; 吹っ飛び後地面に激突
;*********************************************************************
[Statedef 5100]
type = L
movetype = H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = Vel X > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(Vel Y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Time = 0
trigger1 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (Anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (Anim = [5051,5059]) || (Anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (Anim % 10))
value = 5100 + (Anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

; ダウン時の衝撃波エフェクトを表示
[State 5100, 8]
type = Explod
;trigger1 = PrevStateNo = [5020,5079]
trigger1 = Time = 0
anim = 8220
id = 8220
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

; ダウン時の効果音を再生
[State 5100, 10]
type = PlaySnd
trigger1 = Time = 0
value = 8320,0

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;*********************************************************************
; 激突後バウンド
;*********************************************************************
[Statedef 5101]
type = L
movetype = H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5160 + (Anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 10;20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;*********************************************************************
; 横に倒れる
;*********************************************************************
[Statedef 5110]
type = L
movetype = H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (Anim % 10))
trigger1 = Anim = [5081,5089]
value = 5110 + (Anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Time = 0
triggerall = Anim != [5110,5119] ;Not already changed anim
trigger1 = Anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (Anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = Time = 0
triggerall = Anim != [5110,5119] ;Not already changed anim
trigger1 = Anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (Anim % 10))
value = 5170 + (Anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(Vel Y)

; ダウン時の効果音を再生
[State 5110, 6]
type = PlaySnd
trigger1 = (PrevStateNo = [5020,5079]) || (PrevStateNo = [5100,5101])
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 8320,0

; ダウン時の砂埃エフェクトを表示
[State 5110, 7]
type = Explod
trigger1 = (PrevStateNo = [5020,5079]) || (PrevStateNo = [5100,5101])
trigger1 = Time = 0
anim = 8320
id = 8320
pos = -14+59*(sysvar(3)=1),4-2*(sysvar(3)=1)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

; 足払いでダウンした時のエフェクト表示用の判定を初期化
[State 5110, Var]
type = VarSet
trigger1 = Time = 0
sysvar(3) = 0

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = Anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (Anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (Anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !Alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = Alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !Alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;*********************************************************************
; 起き上がる
;*********************************************************************
[Statedef 5120]
type = L
movetype = I
physics = N

[State 5120, ChangeAnim] ;Get up anim (normal)
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (Anim % 10))
value = 5120

[State 5120, ChangeAnim] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (Anim % 10))
value = 5120 + (Anim % 10)

[State 5120, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, HitFallSet]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, NotHitBy] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 8

[State 5120, NotHitBy] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 1

[State 5120, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; 負けた時に横に倒れている
;*********************************************************************
[Statedef 5150]
type = L
movetype = H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = PrevStateNo != 5950
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (Anim != [5111,5119]) && (Anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (Anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
triggerall = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = (Anim = [5111,5119]) || (Anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (Anim % 10))
value = 5140 + (Anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
triggerall = PrevStateNo != 5950
trigger1 = MatchOver = 1
trigger1 = Anim != 5960
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(Anim+10)
value = Anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = Anim != 5960
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 5]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = PrevStateNo = 5950
value = 5950
elem = 4

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel X < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;*********************************************************************
; 地上受け身予約
;*********************************************************************
[Statedef 5200]
type = A
movetype = H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;*********************************************************************
; 地上に近い時の受け身（KOF風リカバー)
;*********************************************************************
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200
velset = -7, 0
ctrl = 0

; キャンセル受付時間の解除
[State 5201, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

[State 5201,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 240,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5200,0
channel = 0

[State 5201,VelMul]
type = VelMul
trigger1 = 1
x = .87

[State 5201,VelMul]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;*********************************************************************
; 空中受け身(GG風空中リカバー)
;*********************************************************************
[Statedef 5210]
type = A
movetype = I
physics = N
anim = 5210
ctrl = 0

; キャンセル受付時間の解除
[State 5210, VarSet]
type = VarSet
trigger1 = Time = 0
var(9) = 0

[State 5210, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 5200,0
channel = 0

[State 5200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 5210,0

[State 5210, Palfx]
type = Palfx
trigger1 = Time <= 7
time = 1
add = 200,200,200

[State 5210, 1] 
type = VelMul
trigger1 = Time = 0
x = .8
y = .8

; 受け身方向(ニュートラル)
[State 5210, VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

; 受け身方向(前方)
[State 5210, VarSet]
Type = VarSet
triggerall = Var(59) = 0
Triggerall = Time <= 1 || sysvar(1) = 0
Trigger1 = Command = "holdfwd"
sysvar(1) = 1

; 受け身方向(後方)
[State 5210, VarSet]
Type = VarSet
triggerall = Var(59) = 0
Triggerall = Time <= 1 || sysvar(1) = 0
Trigger1 = Command = "holdback"
sysvar(1) = -1

[State 5210, Turn] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 2] ;Go fwd
Type = Velset
Triggerall = Time <= 1
Trigger1 = sysvar(1) = 1
x = 2.5
y = -6.5
persistent = 0

[State 5210, 2] ;Go back
Type = Velset
Triggerall = Time <= 1
Trigger1 = sysvar(1) = -1
;x = -2
y = -5.6
persistent = 0

[State 5210, 2] ;Go back
Type = Veladd
Triggerall = Time <= 1
Trigger1 = sysvar(1) = -1
x = -2
persistent = 0

[State 5210, VelSet]
type = VelSet
trigger1 = Time = 4
y = -3

[State 5210, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, CtrlSet]
type = CtrlSet
trigger1 = Time = 7
value = 1

[State 5210, VelAdd]
type = VelAdd
trigger1 = Time >= 1
y = .50

[State 5210, ChangeState] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

;*********************************************************************
; 特殊喰らい
;*********************************************************************

;===============================================================
; 投げ抜け
;===============================================================
;---------------------------------------------------------
; 自分側
;---------------------------------------------------------
[Statedef 5940]
type = S
movetype = A
physics = N
anim = 5945
ctrl = 0
velset = 0, 0

[State 5940, TargetBind]
type = TargetState
trigger1 = Time = 0
value = 5945

[State 5940, Envcolor]
type = Envcolor
trigger1 = AnimElem = 2,=1
value = 255, 255, 255
time = 1
under = 1

[State 5940, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=3
value = 8020,0

[State 5940, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5940, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5940, VelMul]
type = velset
trigger1 = AnimElem = 2
x = -7

[State 5940, VelMul]
type = VelMul
trigger1 = 1
x = .80

[State 5940, PlayerPush]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 5940, End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;---------------------------------------------------------
; 相手側
;---------------------------------------------------------
[Statedef 5945]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0, 0

[State 5945, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5945, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && SelfAnimExist(5940)
value = 5940

[State 870, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && SelfAnimExist(5910) && !SelfAnimExist(5940)
value = 5910

[State 5945, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 5940 && Anim != 5910
value = 5007

[State 5945, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5945, PlayerPush]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 5945, End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1


;===============================================================
; 削られKO
;===============================================================
[Statedef 5950]
type = S
movetype = H
physics = S
ctrl = 0
velset = 0, 0

[State 5950, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5950, VelSet]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 5950, ChangeAnim]
type = ChangeAnim
trigger1 = NumHelper(8000)
trigger1 = !HitOver
value = Helper(8000),var(2)

[State 5950, ChangeAnim]
type = ChangeAnim
trigger1 = HitOver && Anim != 5950
value = 5950

[State 5950, PlaySnd]
type = PlaySnd
trigger1 = Anim = 5950
trigger1 = AnimElem = 1,=0
value = 5950,0

[State 5950, End]
type = ChangeState
trigger1 = Anim = 5950 && AnimElem = 4
value = 5150
ctrl = 0


;*********************************************************************
; 勝利デモ用ヘルパー
;*********************************************************************
[Statedef 6500]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = 7

[State 6500]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
flag3 = nobardisplay

[State 6500, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,640]
flag = roundnotover

[State 6500, AssertSpecial]
type = AssertSpecial
trigger1 = Time >= 32
flag = noBG
flag2 = noFG

; 座標を本体に合わせる
[State 6500, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = 0,0

;===============================================================
; 相手キャラ判定
;===============================================================
; 相手キャラ判定用varの初期化
[State 6500, VarSet]
type = VarSet
trigger1 = Time = 0
var(2) = 0

;---------------------------------------------------------
; Simul時の相手パートナーを判定
;---------------------------------------------------------
; クーラ・ダイアモンドを判定_Simul時の相手パートナーを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "beppu" && Enemy(1),Name = "KulaXI")
trigger2 = (Enemy(1),AuthorName = "chikuchikugonzalez" && Enemy(1),Name = "Kula Diamond")
trigger3 = (Enemy(1),AuthorName = "Choiyer" && Enemy(1),Name = "Kula Diamond")
trigger4 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Kula")
trigger5 = (Enemy(1),AuthorName = "Zero-Sennin" && Enemy(1),Name = "ZeroKula")
trigger6 = (Enemy(1),AuthorName = "David Demianoff" && Enemy(1),Name = "Kula Diamond")
trigger7 = (Enemy(1),AuthorName = "NAO&M." && Enemy(1),Name = "Kula")
trigger8 = (Enemy(1),AuthorName = "P-tan" && Enemy(1),Name = "Kula Diamond")
trigger9 = (Enemy(1),AuthorName = "KoopaKoot" && Enemy(1),Name = "Kula Diamond")
trigger10 = (Enemy(1),AuthorName = "jn2" && Enemy(1),Name = "Kula")
trigger11 = (Enemy(1),AuthorName = "KaKu" && Enemy(1),Name = "Kula")
trigger12 = (Enemy(1),AuthorName = "zzzasd" && Enemy(1),Name = "Kula Diamond")
trigger13 = (Enemy(1),AuthorName = "BUG" && Enemy(1),Name = "kula diamond")
var(2) = 6552
ignorehitpause = 1

; ハイデルンを判定_Simul時の相手パートナーを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Tatsu" && Enemy(1),Name = "Heidern")
trigger2 = (Enemy(1),AuthorName = "A,c,c" && Enemy(1),Name = "Heidern")
trigger3 = (Enemy(1),AuthorName = "Raposo" && Enemy(1),Name = "Heidern")
trigger4 = (Enemy(1),AuthorName = "Fixxxer" && Enemy(1),Name = "Heidern")
trigger5 = (Enemy(1),AuthorName = "Zelgadis" && Enemy(1),Name = "Heidern")
var(2) = 6556
ignorehitpause = 1

; クリザリッドを判定_Simul時の相手パートナーを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Nyankoro" && Enemy(1),Name = "Krizalid")
trigger2 = (Enemy(1),AuthorName = "Ahuron" && Enemy(1),Name = "Krizalid-0")
trigger3 = (Enemy(1),AuthorName = "TightRiam" && Enemy(1),Name = "Krizalid")
trigger4 = (Enemy(1),AuthorName = "Chin-ya" && Enemy(1),Name = "Krizalid-")
trigger5 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Krizalid")
trigger6 = (Enemy(1),AuthorName = "GoD_Ryu" && Enemy(1),Name = "Krizalid")
trigger7 = (Enemy(1),AuthorName = "YongMing" && Enemy(1),Name = "krizalid")
trigger8 = (Enemy(1),AuthorName = "Digital Kreations" && Enemy(1),Name = "Krizalid")
trigger9 = (Enemy(1),AuthorName = "Zelgadis & RockBogard" && Enemy(1),Name = "Krizalid")
trigger10 = (Enemy(1),AuthorName = "Kjha435y" && Enemy(1),Name = "Krizalid")
trigger11 = (Enemy(1),AuthorName = "VISUAL KREATIONS" && Enemy(1),Name = "Krizalid") ;※
trigger12 = (Enemy(1),AuthorName = "119way,ｻｨｴﾌ,9mb" && Enemy(1),Name = "Krizalid2k1")
var(2) = 6560
ignorehitpause = 1

; ネームレスを判定_Simul時の相手パートナーを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Ahuron" && Enemy(1),Name = "Nameless")
trigger2 = (Enemy(1),AuthorName = "K.O.D & Vans" && Enemy(1),Name = "Nameless")
trigger3 = (Enemy(1),AuthorName = "ikaruga" && Enemy(1),Name = "Nameless")
var(2) = 6564
ignorehitpause = 1

; 武器持ち相手を判定_Simul時の相手パートナーを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
; 対フォクシー
trigger1 = (Enemy(1),AuthorName = "ahuron" && Enemy(1),Name = "Foxy")
trigger2 = (Enemy(1),AuthorName = "M.M.R." && Enemy(1),Name = "Foxy")
; 対チャン・コーハン
trigger3 = (Enemy(1),AuthorName = "M.M.R." && Enemy(1),Name = "Chang Koehan")
trigger4 = (Enemy(1),AuthorName = "Noobic Cube" && Enemy(1),Name = "Chang Koehan")
trigger5 = (Enemy(1),AuthorName = "Noise_Low" && Enemy(1),Name = "chang_koehan")
trigger6 = (Enemy(1),AuthorName = "JaeMZ" && Enemy(1),Name = "Chang_2003&XI")
trigger7 = (Enemy(1),AuthorName = "Le@n" && Enemy(1),Name = "Chang Koehan")
trigger8 = (Enemy(1),AuthorName = "MR.S&&Misamu K Young" && Enemy(1),Name = "Smart-Chang")
; 対チョイ・ボンゲ
trigger9 = (Enemy(1),AuthorName = "H”" && Enemy(1),Name = "CHOI BOUNGE")
trigger10 = (Enemy(1),AuthorName = "Noobic Cube" && Enemy(1),Name = "Choi Bounge")
trigger11 = (Enemy(1),AuthorName = "Fangke" && Enemy(1),Name = "Choi Bounge")
trigger12 = (Enemy(1),AuthorName = "MR.S&&Misamu K Young" && Enemy(1),Name = "C-Choi")
; 対ビリー・カーン
trigger13 = (Enemy(1),AuthorName = "TightRiam" && Enemy(1),Name = "Billy Kane")
trigger14 = (Enemy(1),AuthorName = "Noobic Cube" && Enemy(1),Name = "Billy Kane")
trigger15 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Billy")
trigger16 = (Enemy(1),AuthorName = "Ehnyd" && Enemy(1),Name = "Billy_ByEhnyd")
trigger17 = (Enemy(1),AuthorName = "Infinite" && Enemy(1),Name = "Billy Kane")
trigger18 = (Enemy(1),AuthorName = "iori974" && Enemy(1),Name = "Billy")
trigger19 = (Enemy(1),AuthorName = "Sela" && Enemy(1),Name = "Billy Kane 95")
trigger20 = (Enemy(1),AuthorName = "Liam" && Enemy(1),Name = "billy")
trigger21 = (Enemy(1),AuthorName = "J.Lee & GoD_Ryu" && Enemy(1),Name = "Billy Kane")
trigger22 = (Enemy(1),AuthorName = "Conversion Wolrd - J.Lee" && Enemy(1),Name = "Billy Kane")
trigger23 = (Enemy(1),AuthorName = "Conversion Wolrd - J.Lee" && Enemy(1),Name = "Billy Kane 03 ")
; 対ウィップ
trigger24 = (Enemy(1),AuthorName = "H”" && Enemy(1),Name = "whip")
trigger25 = (Enemy(1),AuthorName = "HaiJin" && Enemy(1),Name = "whip")
trigger26 = (Enemy(1),AuthorName = "Joahie & MDK" && Enemy(1),Name = "JM_Whip")
trigger27 = (Enemy(1),AuthorName = "Ryokucha updated by Shingin and E" && Enemy(1),Name = "whip")
trigger28 = (Enemy(1),AuthorName = "ryokucha" && Enemy(1),Name = "Whip")
; 対Mr.BIG
trigger29 = (Enemy(1),AuthorName = "Aomura" && Enemy(1),Name = "Mr.Big")
trigger30 = (Enemy(1),AuthorName = "DD" && Enemy(1),Name = "Mr.Big")
trigger31 = (Enemy(1),AuthorName = "ikaruga" && Enemy(1),Name = "Mr.Big")
trigger32 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Mr.Big")
trigger33 = (Enemy(1),AuthorName = "David Demianoff" && Enemy(1),Name = "Mr.Big")
trigger34 = (Enemy(1),AuthorName = "David Demianoff" && Enemy(1),Name = "Mr Big")
trigger35 = (Enemy(1),AuthorName = "David Demianof, Jerzy" && Enemy(1),Name = "Mr.Big_xi")
trigger36 = (Enemy(1),AuthorName = "E-FRY" && Enemy(1),Name = "Mr.Big")
trigger37 = (Enemy(1),AuthorName = "Jin Kazama" && Enemy(1),Name = "Mr. Big")
trigger38 = (Enemy(1),AuthorName = "" && Enemy(1),Name = "Mr.Big2000")
; 対ショー・ハヤテ
trigger39 = (Enemy(1),AuthorName = "ahuron" && Enemy(1),Name = "Syo Hayate")
trigger40 = (Enemy(1),AuthorName = "Vans" && Enemy(1),Name = "Sho_WLS")
trigger41 = (Enemy(1),AuthorName = "Ainotenshi" && Enemy(1),Name = "Sho Hayate")
var(2) = 6568
ignorehitpause = 1

;---------------------------------------------------------
; 相手を判定
;---------------------------------------------------------
; クーラ・ダイアモンドを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "beppu" && Enemy(0),Name = "KulaXI")
trigger2 = (Enemy(0),AuthorName = "chikuchikugonzalez" && Enemy(0),Name = "Kula Diamond")
trigger3 = (Enemy(0),AuthorName = "Choiyer" && Enemy(0),Name = "Kula Diamond")
trigger4 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Kula")
trigger5 = (Enemy(0),AuthorName = "Zero-Sennin" && Enemy(0),Name = "ZeroKula")
trigger6 = (Enemy(0),AuthorName = "David Demianoff" && Enemy(0),Name = "Kula Diamond")
trigger7 = (Enemy(0),AuthorName = "NAO&M." && Enemy(0),Name = "Kula")
trigger8 = (Enemy(0),AuthorName = "P-tan" && Enemy(0),Name = "Kula Diamond")
trigger9 = (Enemy(0),AuthorName = "KoopaKoot" && Enemy(0),Name = "Kula Diamond")
trigger10 = (Enemy(0),AuthorName = "jn2" && Enemy(0),Name = "Kula")
trigger11 = (Enemy(0),AuthorName = "KaKu" && Enemy(0),Name = "Kula")
trigger12 = (Enemy(0),AuthorName = "zzzasd" && Enemy(0),Name = "Kula Diamond")
trigger13 = (Enemy(0),AuthorName = "BUG" && Enemy(0),Name = "kula diamond")
var(2) = 6552
ignorehitpause = 1

; ハイデルンを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Tatsu" && Enemy(0),Name = "Heidern")
trigger2 = (Enemy(0),AuthorName = "A,c,c" && Enemy(0),Name = "Heidern")
trigger3 = (Enemy(0),AuthorName = "Raposo" && Enemy(0),Name = "Heidern")
trigger4 = (Enemy(0),AuthorName = "Fixxxer" && Enemy(0),Name = "Heidern")
trigger5 = (Enemy(0),AuthorName = "Zelgadis" && Enemy(0),Name = "Heidern")
var(2) = 6556
ignorehitpause = 1

; クリザリッドを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Nyankoro" && Enemy(0),Name = "Krizalid")
trigger2 = (Enemy(0),AuthorName = "Ahuron" && Enemy(0),Name = "Krizalid-0")
trigger3 = (Enemy(0),AuthorName = "TightRiam" && Enemy(0),Name = "Krizalid")
trigger4 = (Enemy(0),AuthorName = "Chin-ya" && Enemy(0),Name = "Krizalid-")
trigger5 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Krizalid")
trigger6 = (Enemy(0),AuthorName = "GoD_Ryu" && Enemy(0),Name = "Krizalid")
trigger7 = (Enemy(0),AuthorName = "YongMing" && Enemy(0),Name = "krizalid")
trigger8 = (Enemy(0),AuthorName = "Digital Kreations" && Enemy(0),Name = "Krizalid")
trigger9 = (Enemy(0),AuthorName = "Zelgadis & RockBogard" && Enemy(0),Name = "Krizalid")
trigger10 = (Enemy(0),AuthorName = "Kjha435y" && Enemy(0),Name = "Krizalid")
trigger11 = (Enemy(0),AuthorName = "VISUAL KREATIONS" && Enemy(0),Name = "Krizalid") ;※
trigger12 = (Enemy(0),AuthorName = "119way,ｻｨｴﾌ,9mb" && Enemy(0),Name = "Krizalid2k1")
var(2) = 6560
ignorehitpause = 1

; ネームレスを判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Ahuron" && Enemy(0),Name = "Nameless")
trigger2 = (Enemy(0),AuthorName = "K.O.D & Vans" && Enemy(0),Name = "Nameless")
trigger3 = (Enemy(0),AuthorName = "ikaruga" && Enemy(0),Name = "Nameless")
var(2) = 6564
ignorehitpause = 1

; 武器持ち相手を判定
[State 6100, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
; 対フォクシー
trigger1 = (Enemy(0),AuthorName = "ahuron" && Enemy(0),Name = "Foxy")
trigger2 = (Enemy(0),AuthorName = "M.M.R." && Enemy(0),Name = "Foxy")
; 対チャン・コーハン
trigger3 = (Enemy(0),AuthorName = "M.M.R." && Enemy(0),Name = "Chang Koehan")
trigger4 = (Enemy(0),AuthorName = "Noobic Cube" && Enemy(0),Name = "Chang Koehan")
trigger5 = (Enemy(0),AuthorName = "Noise_Low" && Enemy(0),Name = "chang_koehan")
trigger6 = (Enemy(0),AuthorName = "JaeMZ" && Enemy(0),Name = "Chang_2003&XI")
trigger7 = (Enemy(0),AuthorName = "Le@n" && Enemy(0),Name = "Chang Koehan")
trigger8 = (Enemy(0),AuthorName = "MR.S&&Misamu K Young" && Enemy(0),Name = "Smart-Chang")
; 対チョイ・ボンゲ
trigger9 = (Enemy(0),AuthorName = "H”" && Enemy(0),Name = "CHOI BOUNGE")
trigger10 = (Enemy(0),AuthorName = "Noobic Cube" && Enemy(0),Name = "Choi Bounge")
trigger11 = (Enemy(0),AuthorName = "Fangke" && Enemy(0),Name = "Choi Bounge")
trigger12 = (Enemy(0),AuthorName = "MR.S&&Misamu K Young" && Enemy(0),Name = "C-Choi")
; 対ビリー・カーン
trigger13 = (Enemy(0),AuthorName = "TightRiam" && Enemy(0),Name = "Billy Kane")
trigger14 = (Enemy(0),AuthorName = "Noobic Cube" && Enemy(0),Name = "Billy Kane")
trigger15 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Billy")
trigger16 = (Enemy(0),AuthorName = "Ehnyd" && Enemy(0),Name = "Billy_ByEhnyd")
trigger17 = (Enemy(0),AuthorName = "Infinite" && Enemy(0),Name = "Billy Kane")
trigger18 = (Enemy(0),AuthorName = "iori974" && Enemy(0),Name = "Billy")
trigger19 = (Enemy(0),AuthorName = "Sela" && Enemy(0),Name = "Billy Kane 95")
trigger20 = (Enemy(0),AuthorName = "Liam" && Enemy(0),Name = "billy")
trigger21 = (Enemy(0),AuthorName = "J.Lee & GoD_Ryu" && Enemy(0),Name = "Billy Kane")
trigger22 = (Enemy(0),AuthorName = "Conversion Wolrd - J.Lee" && Enemy(0),Name = "Billy Kane")
trigger23 = (Enemy(0),AuthorName = "Conversion Wolrd - J.Lee" && Enemy(0),Name = "Billy Kane 03 ")
; 対ウィップ
trigger24 = (Enemy(0),AuthorName = "H”" && Enemy(0),Name = "whip")
trigger25 = (Enemy(0),AuthorName = "HaiJin" && Enemy(0),Name = "whip")
trigger26 = (Enemy(0),AuthorName = "Joahie & MDK" && Enemy(0),Name = "JM_Whip")
trigger27 = (Enemy(0),AuthorName = "Ryokucha updated by Shingin and E" && Enemy(0),Name = "whip")
trigger28 = (Enemy(0),AuthorName = "ryokucha" && Enemy(0),Name = "Whip")
; 対Mr.BIG
trigger29 = (Enemy(0),AuthorName = "Aomura" && Enemy(0),Name = "Mr.Big")
trigger30 = (Enemy(0),AuthorName = "DD" && Enemy(0),Name = "Mr.Big")
trigger31 = (Enemy(0),AuthorName = "ikaruga" && Enemy(0),Name = "Mr.Big")
trigger32 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Mr.Big")
trigger33 = (Enemy(0),AuthorName = "David Demianoff" && Enemy(0),Name = "Mr.Big")
trigger34 = (Enemy(0),AuthorName = "David Demianoff" && Enemy(0),Name = "Mr Big")
trigger35 = (Enemy(0),AuthorName = "David Demianof, Jerzy" && Enemy(0),Name = "Mr.Big_xi")
trigger36 = (Enemy(0),AuthorName = "E-FRY" && Enemy(0),Name = "Mr.Big")
trigger37 = (Enemy(0),AuthorName = "Jin Kazama" && Enemy(0),Name = "Mr. Big")
trigger38 = (Enemy(0),AuthorName = "" && Enemy(0),Name = "Mr.Big2000")
; 対ショー・ハヤテ
trigger39 = (Enemy(0),AuthorName = "ahuron" && Enemy(0),Name = "Syo Hayate")
trigger40 = (Enemy(0),AuthorName = "Vans" && Enemy(0),Name = "Sho_WLS")
trigger41 = (Enemy(0),AuthorName = "Ainotenshi" && Enemy(0),Name = "Sho Hayate")
var(2) = 6568
ignorehitpause = 1

; ※ このキャラのdefファイルの初期状態ではauthorが表記されていないので、
;　　 適応したい場合はその作者のクリザリッドのdefファイルに
;　　　「author = "VISUAL KREATIONS"」を書き加えてください。

;===============================================================
; サウンドの処理
;===============================================================
; サウンドを停止
[State 6500, AssertSpecial]
type = AssertSpecial
trigger1 = Time >= 32
flag = nomusic

; 勝利デモBGMの再生
[State 6500, PlaySnd]
type = PlaySnd
trigger1 = Time = 84
value = 6500, 0
abspan = 0

; システムボイスの再生
[State 6500, PlaySnd]
type = PlaySnd
trigger1 = Time = 283
value = 6500, 1
abspan = 0

;===============================================================
; フェードイン演出
;===============================================================
[State 6500, VarAdd]
type = VarAdd
trigger1 = Time <= 32
var(0) = 8

[State 6500, VarSet]
type = VarSet
trigger1 = Time = 32
var(0) = 256

[State 6500, VarSet]
type = VarSet
trigger1 = Time = 33
var(0) = 0

[State 6500, VarAdd]
type = VarAdd
trigger1 = Time >= 153
trigger1 = Time < 186
var(0) = -8

[State 6500, VarSet]
type = VarSet
trigger1 = Time = 185
var(0) = -256

[State 6500, AllPalfx]
type = AllPalfx
trigger1 = Time <= 32
trigger2 = Time >= 153
trigger2 = Time < 186
time = 1
add = var(0),var(0),var(0)
invertall = 0
color = 256

[State 6500, VarSet]
type = VarSet
trigger1 = Time = 187
trigger2 = Time = 325
var(0) = 0

[State 6500, VarAdd]
type = VarAdd
trigger1 = Time >= 284
trigger1 = Time < 325
var(0) = -6

[State 6500, VarSet]
type = VarSet
trigger1 = Time = 283
var(0) = 256

[State 6500, AllPalfx]
type = AllPalfx
trigger1 = Time >= 283
trigger1 = Time < 325
time = 1
add = var(0),var(0),var(0)
invertall = 0
color = 256

;===============================================================
; 各種表示
;===============================================================
; 白背景
[State 6500, Explod]
type = Explod
trigger1 = time = 32
anim = 6516
id = 6516
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1
scale = 9999,9999

; PLAYER WON THE MATCHの文字のアニメーションを表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 64
anim = 6520
id = 6520
sprpriority = 3
postype = left
pos = 56,118
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; 白背景の消去
[State 6500, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 186
id = 6516

; 黒背景
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;186
anim = 6517
;id = 6517
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
scale = 999999,999999
ontop = 1

; 背景の表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;227
anim = 6515
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; WINNER表示欄の下枠を表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;188
anim = 6511
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; WINNER表示欄の上枠を表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;188
anim = 6510
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; 勝利デモのキャラクターポートレイトを表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;284
anim = 6500
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; 背景のスクロール演出
[State 6500, Explod]
type = Explod
trigger1 = Time = 227
anim = 6518
id = 6518
sprpriority = 3
postype = left
pos = 0,43
vel = 0,7.4
bindtime = 1
ownpal = 1
removetime = 30
supermovetime = -1
pausemovetime = -1
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

; 背景のスクロール演出
[State 6500, Explod]
type = Explod
trigger1 = Time = 227
anim = 6518
id = 6518
sprpriority = 3
postype = left
pos = 0,47
vel = 0,7.4
bindtime = 1
ownpal = 1
removetime = 30
supermovetime = -1
pausemovetime = -1
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

; 背景のスクロール演出
[State 6500, Explod]
type = Explod
trigger1 = Time = 227
anim = 6518
id = 6518
sprpriority = 3
postype = left
pos = 0,51
vel = 0,7.4
bindtime = 1
ownpal = 1
removetime = 30
supermovetime = -1
pausemovetime = -1
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,192

; 背景のスクロール演出
[State 6500, Explod]
type = Explod
trigger1 = Time = 227
anim = 6518
id = 6518
sprpriority = 3
postype = left
pos = 0,55
vel = 0,7.4
bindtime = 1
ownpal = 1
removetime = 30
supermovetime = -1
pausemovetime = -1
scale = 999999,999999
ontop = 1
trans = addalpha
alpha = 255,0

; 背景のスクロール表示用アニメを消去
[State 6500, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 250
id = 6518

; メッセージ欄の下地
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;253
anim = 6530+(Root,TeamSide=2)
id = 6530
sprpriority = 3
postype = left
pos = 0,211
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
scale = 999999,1
ontop = 1

; メッセージ欄の上枠
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;250
anim = 6512
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; メッセージ欄の下枠
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;250
anim = 6513
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; WINNERの文字を表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;284
anim = 6521
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; キャラクターネームの表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;284
anim = 6524
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; GO TO NEXT MATCHの矢印を表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;450
anim = 6522
sprpriority = 3
postype = left
pos = 222,235
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; GO TO NEXT MATCHの文字を表示
[State 6500, Explod]
type = Explod
trigger1 = Time = 0;450
anim = 6523
sprpriority = 3
postype = left
pos = 222,235
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; メッセージカーソルの表示_待機状態
[State 6500, Explod]
type = Explod
trigger1 = Time = 329
anim = 6535+(Root,TeamSide=2)
sprpriority = 3
postype = left
pos = 16,196
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; ランダム変数
[State 6500, VarSet]
type = VarSet
trigger1 = Time = 0
var(1) = random%3

; 汎用メッセージを表示
[State 6500, Explod]
type = Explod
trigger1 = var(2) = 0
trigger1 = Time = 0;345
anim = 6540+2*(Root,TeamSide=2)+4*var(1)
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; 汎用メッセージのカーソルを表示
[State 6500, Explod]
type = Explod
trigger1 = var(2) = 0
trigger1 = Time = 0;341
anim = 6541+2*(Root,TeamSide=2)+4*var(1)
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; 専用メッセージを表示
[State 6500, Explod]
type = Explod
trigger1 = var(2) > 0
trigger1 = Time = 0;345
anim = var(2)+2*(Root,TeamSide=2)
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1

; 専用メッセージのカーソルを表示
[State 6500, Explod]
type = Explod
trigger1 = var(2) > 0
trigger1 = Time = 0;341
anim = var(2)+1+2*(Root,TeamSide=2)
sprpriority = 3
postype = left
pos = 0,0
bindtime = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
ontop = 1


;*********************************************************************
; 汎用常駐ヘルパー(Pause中は処理できない)
;*********************************************************************
[Statedef 8000]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------------------------------------------
; 座標と向きを本体に合わせる(未使用)
;---------------------------------------------------------
[State 8000, BindToRoot]
type = Null;BindToRoot
trigger1 = 1
time = 1
facing = 1
pos = 0,-15
ignorehitpause = 1

;===============================================================
; Var管理
;===============================================================
;---------------------------------------------------------
; エフェクト処理の設定
;---------------------------------------------------------
; エフェクト表示を有効にする(相手1)
[State 8000, ParentVarSet]
type = ParentVarSet
triggerall = Root,NumTarget > 0
triggerall = Root,var(2) = 1
triggerall = Root,var(20) = 1
triggerall = NumEnemy
triggerall = Enemy(0),Movetype = H
triggerall = Enemy(0),GetHitVar(guarded) = 0
;--------------------------
trigger1 = NumPartner = 0
;--------------------------
trigger2 = NumPartner = 1
trigger2 = Partner,AuthorName != "HaiJin"
;--------------------------
trigger3 = NumPartner = 1
trigger3 = Partner,AuthorName = "HaiJin"
trigger3 = Partner,Name != "whip"
;--------------------------
trigger4 = NumPartner = 1
trigger4 = Partner,AuthorName = "HaiJin"
trigger4 = Partner,Name != "Kasumi Todo"
;--------------------------
trigger5 = NumPartner = 1
trigger5 = Partner,Name = "whip"
trigger5 = Partner,AuthorName = "HaiJin"
trigger5 = Partner,var(2) != 2
;--------------------------
trigger6 = NumPartner = 1
trigger6 = Partner,Name = "Kasumi Todo"
trigger6 = Partner,AuthorName = "HaiJin"
trigger6 = Partner,var(2) != 2
var(2) = 2

; エフェクト表示を有効にする(相手2)
[State 8000, ParentVarSet]
type = ParentVarSet
triggerall = Root,NumTarget > 0
triggerall = Root,var(3) = 1
triggerall = Root,var(20) = 1
triggerall = NumEnemy > 1
triggerall = Enemy(1),Movetype = H
triggerall = Enemy(1),GetHitVar(guarded) = 0
;--------------------------
trigger1 = NumPartner = 0
;--------------------------
trigger2 = NumPartner = 1
trigger2 = Partner,AuthorName != "HaiJin"
;--------------------------
trigger3 = NumPartner = 1
trigger3 = Partner,AuthorName = "HaiJin"
trigger3 = Partner,Name != "whip"
;--------------------------
trigger4 = NumPartner = 1
trigger4 = Partner,AuthorName = "HaiJin"
trigger4 = Partner,Name != "Kasumi Todo"
;--------------------------
trigger5 = NumPartner = 1
trigger5 = Partner,Name = "whip"
trigger5 = Partner,AuthorName = "HaiJin"
trigger5 = Partner,var(3) != 2
;--------------------------
trigger6 = NumPartner = 1
trigger6 = Partner,Name = "Kasumi Todo"
trigger6 = Partner,AuthorName = "HaiJin"
trigger6 = Partner,var(3) != 2
var(3) = 2

; エフェクト表示を無効にする(相手1)
[State 8000, ParentVarSet]
type = ParentVarSet
trigger1 = Root,var(2) != 1
trigger1 = NumEnemy
trigger1 = Enemy(0),Movetype != H
;--------------------------
trigger2 = Root,var(2) = 1
trigger2 = Root,Movetype != A
;--------------------------
trigger3 = Root,var(2) = 1
trigger3 = NumPartner = 1
trigger3 = Partner,Name = "whip"
trigger3 = Partner,AuthorName = "HaiJin"
trigger3 = Partner,var(2) = 2
;--------------------------
trigger4 = Root,var(2) = 1
trigger4 = NumPartner = 1
trigger4 = Partner,Name = "Kasumi Todo"
trigger4 = Partner,AuthorName = "HaiJin"
trigger4 = Partner,var(2) = 2
var(2) = 0

; エフェクト表示を無効にする(相手2)
[State 8000, ParentVarSet]
type = ParentVarSet
trigger1 = Root,var(3) != 1
trigger1 = NumEnemy > 1
trigger1 = Enemy(1),MoveType != H
;--------------------------
trigger2 = Root,var(3) = 1
trigger2 = Root,MoveType != A
;--------------------------
trigger3 = Root,var(3) = 1
trigger3 = NumPartner = 1
trigger3 = Partner,Name = "whip"
trigger3 = Partner,AuthorName = "HaiJin"
trigger3 = Partner,var(3) = 2
;--------------------------
trigger4 = Root,var(3) = 1
trigger4 = NumPartner = 1
trigger4 = Partner,Name = "Kasumi Todo"
trigger4 = Partner,AuthorName = "HaiJin"
trigger4 = Partner,var(3) = 2
var(3) = 0

;---------------------------------------------------------
; 地上ヒットorガードから復帰した直後の相手を投げれなくする時間を設定
;---------------------------------------------------------
[State 8000, ParentVarAdd] ;Can't be thrown right after getting up
type = ParentVarAdd
trigger1 = Root,var(17) > 0
var(17) = -1
ignorehitpause = 1

[State 8000, ParentVarSet] ;Can't be thrown right after getting up
type = ParentVarSet
trigger1 = Root,p2StateNo = [5000,5001]
trigger2 = Root,p2StateNo = [5010,5011]
var(17) = 8
ignorehitpause = 1

[State 8000, ParentVarSet] ;Can't be thrown right after getting up
type = ParentVarSet
trigger1 = Root,p2StateNo = [150,153]
var(17) = 8

[State 8000, ParentVarSet]
type = ParentVarSet
trigger1 = Root,var(10) = 1
trigger1 = NumEnemy
trigger1 = Enemy(0),MoveType = H
trigger1 = Enemy(0),StateNo = 9900
trigger1 = Enemy(0),Vel Y > 0
trigger1 = Enemy(0),Pos Y >= 0
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),MoveType = H
trigger2 = Enemy(1),StateNo = 9900
trigger2 = Enemy(1),Vel Y > 0
trigger2 = Enemy(1),Pos Y >= 0
var(17) = 8
ignorehitpause = 1

;---------------------------------------------------------
; キャラクター判別
;---------------------------------------------------------
; 初期化
[State 8000, VarSet]
type = VarSet
trigger1 = Time = 0
var(0) = 0

; K9999(ネスツ相手)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Mouser" && Enemy(1),Name = "K9999")
trigger2 = (Enemy(1),AuthorName = "Mouser, Jerzy" && Enemy(1),Name = "K9999")
trigger3 = (Enemy(1),AuthorName = "yajirushi" && Enemy(1),Name = "K9999")
trigger4 = (Enemy(1),AuthorName = "<=&maya" && Enemy(1),Name = "K9999")
trigger5 = (Enemy(1),AuthorName = "Tobikage" && Enemy(1),Name = "K9999")
trigger6 = (Enemy(1),AuthorName = "BLACK" && Enemy(1),Name = "K9999")
trigger7 = (Enemy(1),AuthorName = "MDK" && Enemy(1),Name = "M_K9999")
trigger8 = (Enemy(1),AuthorName = "Adzeer" && Enemy(1),Name = "k'four nine")
trigger9 = (Enemy(1),AuthorName = "Kjha435y" && Enemy(1),Name = "K9999")
trigger10 = (Enemy(1),AuthorName = "EI" && Enemy(1),Name = "K9999")
trigger11 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "K9999")
var(0) = 1
ignorehitpause = 1

; アンヘル(ネスツ相手)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Vans" && Enemy(1),Name = "Angel")
trigger2 = (Enemy(1),AuthorName = "Juke Kisaragi" && Enemy(1),Name = "angel")
trigger3 = (Enemy(1),AuthorName = "jin" && Enemy(1),Name = "Angel")
trigger4 = (Enemy(1),AuthorName = "jin" && Enemy(1),Name = "Clone-Angel")
trigger5 = (Enemy(1),AuthorName = "[Rumiko]" && Enemy(1),Name = "[Rumiko]'s Angel")
var(0) = 1
ignorehitpause = 1

; クリザリッド(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Ahuron" && Enemy(1),Name = "Krizalid-0")
trigger2 = (Enemy(1),AuthorName = "Zelgadis & RockBogard" && Enemy(1),Name = "Krizalid")
trigger3 = (Enemy(1),AuthorName = "119way,ｻｨｴﾌ,9mb" && Enemy(1),Name = "Krizalid2k1")
trigger4 = (Enemy(1),AuthorName = "Chin-ya" && Enemy(1),Name = "Krizalid-")
trigger5 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Krizalid")
var(0) = 1
ignorehitpause = 1

; クローンゼロ(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "GONZO-" && Enemy(1),Name = "ZERO")
trigger2 = (Enemy(1),AuthorName = "Men'sClub" && Enemy(1),Name = "Cloned Zero")
trigger3 = (Enemy(1),AuthorName = "TightRiam" && Enemy(1),Name = "Zero")
trigger4 = (Enemy(1),AuthorName = "ICCHA" && Enemy(1),Name = "ZERO")
trigger5 = (Enemy(1),AuthorName = "ARMS" && Enemy(1),Name = "ZERO")
var(0) = 1
ignorehitpause = 1

; オリジナルゼロ(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "ICCHA" && Enemy(1),Name = "ORIGINAL ZERO")
trigger2 = (Enemy(1),AuthorName = "ICCHA" && Enemy(1),Name = "ORIGINAL ZERO-Boss")
trigger3 = (Enemy(1),AuthorName = "Rin & Bat" && Enemy(1),Name = "Original Zero")
trigger4 = (Enemy(1),AuthorName = "Rin & Bat" && Enemy(1),Name = "Original Zerob UM")
trigger5 = (Enemy(1),AuthorName = "Men'sClub" && Enemy(1),Name = "Original Zero")
var(0) = 1
ignorehitpause = 1

; イグニス(ネスツ相手)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "GONZO-" && Enemy(1),Name = "IGNIZ")
trigger2 = (Enemy(1),AuthorName = "GONZO-" && Enemy(1),Name = "Igniz-Boss")
trigger3 = (Enemy(1),AuthorName = "TightRiam" && Enemy(1),Name = "Igniz")
trigger4 = (Enemy(1),AuthorName = "butti" && Enemy(1),Name = "igniz")
trigger5 = (Enemy(1),AuthorName = "Illuyankas" && Enemy(1),Name = "IGNIZ")
trigger6 = (Enemy(1),AuthorName = "breakfast" && Enemy(1),Name = "IGNIZ")
trigger7 = (Enemy(1),AuthorName = "Third" && Enemy(1),Name = "Igniz By Third")
trigger8 = (Enemy(1),AuthorName = "Kjha435y" && Enemy(1),Name = "Igniz")
var(0) = 1
ignorehitpause = 1

; ハイデルン(怒チーム)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Tatsu" && Enemy(1),Name = "Heidern")
trigger2 = (Enemy(1),AuthorName = "A,c,c" && Enemy(1),Name = "Heidern")
trigger3 = (Enemy(1),AuthorName = "Raposo" && Enemy(1),Name = "Heidern")
trigger4 = (Enemy(1),AuthorName = "Fixxxer" && Enemy(1),Name = "Heidern")
trigger5 = (Enemy(1),AuthorName = "Zelgadis" && Enemy(1),Name = "Heidern")
var(0) = 2
ignorehitpause = 1

; レオナ(怒チーム)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Tin" && Enemy(1),Name = "Tin's Leona")
trigger2 = (Enemy(1),AuthorName = "Ehnyd" && Enemy(1),Name = "Leona Heidern")
trigger3 = (Enemy(1),AuthorName = "KoopaKoot" && Enemy(1),Name = "Leona Heidern")
trigger4 = (Enemy(1),AuthorName = "NAO&M." && Enemy(1),Name = "Leona")
trigger5 = (Enemy(1),AuthorName = "Edo Impact" && Enemy(1),Name = "Leona by Edo Impact")
trigger6 = (Enemy(1),AuthorName = "hero" && Enemy(1),Name = "Leona")
trigger7 = (Enemy(1),AuthorName = "P-tan" && Enemy(1),Name = "Leona XIII")
trigger8 = (Enemy(1),AuthorName = "Zero-Sennin" && Enemy(1),Name = "ZeroLeona")
trigger9 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Leona")
trigger10 = (Enemy(1),AuthorName = "Tokia" && Enemy(1),Name = "Another Leona")
var(0) = 2
ignorehitpause = 1

; ラルフ(怒チーム)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Mouser" && Enemy(1),Name = "Ralf Jones")
trigger2 = (Enemy(1),AuthorName = "Men'sClub" && Enemy(1),Name = "Ralf Jones")
trigger3 = (Enemy(1),AuthorName = "Vans" && Enemy(1),Name = "Ralf_WLS")
trigger4 = (Enemy(1),AuthorName = "Vans" && Enemy(1),Name = "Ralf99_WLS")
trigger5 = (Enemy(1),AuthorName = "Fixxxer" && Enemy(1),Name = "Ralf")
trigger6 = (Enemy(1),AuthorName = "Facu-96" && Enemy(1),Name = "96-Ralf")
trigger7 = (Enemy(1),AuthorName = "Facu-96 & Kofab" && Enemy(1),Name = "Classic Ralf")
trigger8 = (Enemy(1),AuthorName = "KOFFAB" && Enemy(1),Name = "Ralf Jones")
trigger9 = (Enemy(1),AuthorName = "zzzasd" && Enemy(1),Name = "Ralf Jones")
trigger10 = (Enemy(1),AuthorName = "ActJapan" && Enemy(1),Name = "Ralf Jones")
trigger11 = (Enemy(1),AuthorName = "Robo Z" && Enemy(1),Name = "Ralf Jones")
trigger12 = (Enemy(1),AuthorName = "SMI & Misamu K Young" && Enemy(1),Name = "Ralf Jones")
trigger13 = (Enemy(1),AuthorName = "Conversion World - zolagun" && Enemy(1),Name = "ralf jones")
trigger14 = (Enemy(1),AuthorName = "REJY2505" && Enemy(1),Name = "RALF_XIII")
trigger15 = (Enemy(1),AuthorName = "Infinite" && Enemy(1),Name = "Ralf Jones")
trigger16 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Ralf")
trigger17 = (Enemy(1),AuthorName = "ohgaki" && Enemy(1),Name = "Ralf")
var(0) = 2
ignorehitpause = 1

; クラーク(怒チーム)を判定_Simul時の相手パートナーを判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = (Enemy(1),AuthorName = "Tin" && Enemy(1),Name = "Tin's Clark")
trigger2 = (Enemy(1),AuthorName = "hirohiro" && Enemy(1),Name = "clark")
trigger3 = (Enemy(1),AuthorName = "OrochiKOF97" && Enemy(1),Name = "Clark Steel")
trigger4 = (Enemy(1),AuthorName = "OrochiKOF97 & Scal" && Enemy(1),Name = "Clark Steel")
trigger5 = (Enemy(1),AuthorName = "YongMing" && Enemy(1),Name = "Clark Steel")
trigger6 = (Enemy(1),AuthorName = "TAN_E" && Enemy(1),Name = "TAN_CLARK")
trigger7 = (Enemy(1),AuthorName = "zzzasd" && Enemy(1),Name = "Clark Steel")
trigger8 = (Enemy(1),AuthorName = "REJY2505" && Enemy(1),Name = "CLARK_XIII")
trigger9 = (Enemy(1),AuthorName = "RYO 2005" && Enemy(1),Name = "Clark")
trigger10 = (Enemy(1),AuthorName = "ikaruga" && Enemy(1),Name = "Clark Still")
var(0) = 2
ignorehitpause = 1

;---------------------------------------
; K9999(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Mouser" && Enemy(0),Name = "K9999")
trigger2 = (Enemy(0),AuthorName = "Mouser, Jerzy" && Enemy(0),Name = "K9999")
trigger3 = (Enemy(0),AuthorName = "yajirushi" && Enemy(0),Name = "K9999")
trigger4 = (Enemy(0),AuthorName = "<=&maya" && Enemy(0),Name = "K9999")
trigger5 = (Enemy(0),AuthorName = "Tobikage" && Enemy(0),Name = "K9999")
trigger6 = (Enemy(0),AuthorName = "BLACK" && Enemy(0),Name = "K9999")
trigger7 = (Enemy(0),AuthorName = "MDK" && Enemy(0),Name = "M_K9999")
trigger8 = (Enemy(0),AuthorName = "Adzeer" && Enemy(0),Name = "k'four nine")
trigger9 = (Enemy(0),AuthorName = "Kjha435y" && Enemy(0),Name = "K9999")
trigger10 = (Enemy(0),AuthorName = "EI" && Enemy(0),Name = "K9999")
trigger11 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "K9999")
var(0) = 1
ignorehitpause = 1

; アンヘル(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Vans" && Enemy(0),Name = "Angel")
trigger2 = (Enemy(0),AuthorName = "Juke Kisaragi" && Enemy(0),Name = "angel")
trigger3 = (Enemy(0),AuthorName = "jin" && Enemy(0),Name = "Angel")
trigger4 = (Enemy(0),AuthorName = "jin" && Enemy(0),Name = "Clone-Angel")
trigger5 = (Enemy(0),AuthorName = "[Rumiko]" && Enemy(0),Name = "[Rumiko]'s Angel")
var(0) = 1
ignorehitpause = 1

; クリザリッド(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Ahuron" && Enemy(0),Name = "Krizalid-0")
trigger2 = (Enemy(0),AuthorName = "Zelgadis & RockBogard" && Enemy(0),Name = "Krizalid")
trigger3 = (Enemy(0),AuthorName = "119way,ｻｨｴﾌ,9mb" && Enemy(0),Name = "Krizalid2k1")
trigger4 = (Enemy(0),AuthorName = "Chin-ya" && Enemy(0),Name = "Krizalid-")
trigger5 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Krizalid")
var(0) = 1
ignorehitpause = 1

; クローンゼロ(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "GONZO-" && Enemy(0),Name = "ZERO")
trigger2 = (Enemy(0),AuthorName = "Men'sClub" && Enemy(0),Name = "Cloned Zero")
trigger3 = (Enemy(0),AuthorName = "TightRiam" && Enemy(0),Name = "Zero")
trigger4 = (Enemy(0),AuthorName = "ICCHA" && Enemy(0),Name = "ZERO")
trigger5 = (Enemy(0),AuthorName = "ARMS" && Enemy(0),Name = "ZERO")
var(0) = 1
ignorehitpause = 1

; オリジナルゼロ(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "ICCHA" && Enemy(0),Name = "ORIGINAL ZERO")
trigger2 = (Enemy(0),AuthorName = "ICCHA" && Enemy(0),Name = "ORIGINAL ZERO-Boss")
trigger3 = (Enemy(0),AuthorName = "Rin & Bat" && Enemy(0),Name = "Original Zero")
trigger4 = (Enemy(0),AuthorName = "Rin & Bat" && Enemy(0),Name = "Original Zerob UM")
trigger5 = (Enemy(0),AuthorName = "Men'sClub" && Enemy(0),Name = "Original Zero")
var(0) = 1
ignorehitpause = 1

; イグニス(ネスツ相手)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "GONZO-" && Enemy(0),Name = "IGNIZ")
trigger2 = (Enemy(0),AuthorName = "GONZO-" && Enemy(0),Name = "Igniz-Boss")
trigger3 = (Enemy(0),AuthorName = "TightRiam" && Enemy(0),Name = "Igniz")
trigger4 = (Enemy(0),AuthorName = "butti" && Enemy(0),Name = "igniz")
trigger5 = (Enemy(0),AuthorName = "Illuyankas" && Enemy(0),Name = "IGNIZ")
trigger6 = (Enemy(0),AuthorName = "breakfast" && Enemy(0),Name = "IGNIZ")
trigger7 = (Enemy(0),AuthorName = "Third" && Enemy(0),Name = "Igniz By Third")
trigger8 = (Enemy(0),AuthorName = "Kjha435y" && Enemy(0),Name = "Igniz")
var(0) = 1
ignorehitpause = 1

; ハイデルン(怒チーム)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Tatsu" && Enemy(0),Name = "Heidern")
trigger2 = (Enemy(0),AuthorName = "A,c,c" && Enemy(0),Name = "Heidern")
trigger3 = (Enemy(0),AuthorName = "Raposo" && Enemy(0),Name = "Heidern")
trigger4 = (Enemy(0),AuthorName = "Fixxxer" && Enemy(0),Name = "Heidern")
trigger5 = (Enemy(0),AuthorName = "Zelgadis" && Enemy(0),Name = "Heidern")
var(0) = 2
ignorehitpause = 1

; レオナ(怒チーム)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Tin" && Enemy(0),Name = "Tin's Leona")
trigger2 = (Enemy(0),AuthorName = "Ehnyd" && Enemy(0),Name = "Leona Heidern")
trigger3 = (Enemy(0),AuthorName = "KoopaKoot" && Enemy(0),Name = "Leona Heidern")
trigger4 = (Enemy(0),AuthorName = "NAO&M." && Enemy(0),Name = "Leona")
trigger5 = (Enemy(0),AuthorName = "Edo Impact" && Enemy(0),Name = "Leona by Edo Impact")
trigger6 = (Enemy(0),AuthorName = "hero" && Enemy(0),Name = "Leona")
trigger7 = (Enemy(0),AuthorName = "P-tan" && Enemy(0),Name = "Leona XIII")
trigger8 = (Enemy(0),AuthorName = "Zero-Sennin" && Enemy(0),Name = "ZeroLeona")
trigger9 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Leona")
trigger10 = (Enemy(0),AuthorName = "Tokia" && Enemy(0),Name = "Another Leona")
var(0) = 2
ignorehitpause = 1

; ラルフ(怒チーム)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Mouser" && Enemy(0),Name = "Ralf Jones")
trigger2 = (Enemy(0),AuthorName = "Men'sClub" && Enemy(0),Name = "Ralf Jones")
trigger3 = (Enemy(0),AuthorName = "Vans" && Enemy(0),Name = "Ralf_WLS")
trigger4 = (Enemy(0),AuthorName = "Vans" && Enemy(0),Name = "Ralf99_WLS")
trigger5 = (Enemy(0),AuthorName = "Fixxxer" && Enemy(0),Name = "Ralf")
trigger6 = (Enemy(0),AuthorName = "Facu-96" && Enemy(0),Name = "96-Ralf")
trigger7 = (Enemy(0),AuthorName = "Facu-96 & Kofab" && Enemy(0),Name = "Classic Ralf")
trigger8 = (Enemy(0),AuthorName = "KOFFAB" && Enemy(0),Name = "Ralf Jones")
trigger9 = (Enemy(0),AuthorName = "zzzasd" && Enemy(0),Name = "Ralf Jones")
trigger10 = (Enemy(0),AuthorName = "ActJapan" && Enemy(0),Name = "Ralf Jones")
trigger11 = (Enemy(0),AuthorName = "Robo Z" && Enemy(0),Name = "Ralf Jones")
trigger12 = (Enemy(0),AuthorName = "SMI & Misamu K Young" && Enemy(0),Name = "Ralf Jones")
trigger13 = (Enemy(0),AuthorName = "Conversion World - zolagun" && Enemy(0),Name = "ralf jones")
trigger14 = (Enemy(0),AuthorName = "REJY2505" && Enemy(0),Name = "RALF_XIII")
trigger15 = (Enemy(0),AuthorName = "Infinite" && Enemy(0),Name = "Ralf Jones")
trigger16 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Ralf")
trigger17 = (Enemy(0),AuthorName = "ohgaki" && Enemy(0),Name = "Ralf")
var(0) = 2
ignorehitpause = 1

; クラーク(怒チーム)を判定
[State 8000, VarSet]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = (Enemy(0),AuthorName = "Tin" && Enemy(0),Name = "Tin's Clark")
trigger2 = (Enemy(0),AuthorName = "hirohiro" && Enemy(0),Name = "clark")
trigger3 = (Enemy(0),AuthorName = "OrochiKOF97" && Enemy(0),Name = "Clark Steel")
trigger4 = (Enemy(0),AuthorName = "OrochiKOF97 & Scal" && Enemy(0),Name = "Clark Steel")
trigger5 = (Enemy(0),AuthorName = "YongMing" && Enemy(0),Name = "Clark Steel")
trigger6 = (Enemy(0),AuthorName = "TAN_E" && Enemy(0),Name = "TAN_CLARK")
trigger7 = (Enemy(0),AuthorName = "zzzasd" && Enemy(0),Name = "Clark Steel")
trigger8 = (Enemy(0),AuthorName = "REJY2505" && Enemy(0),Name = "CLARK_XIII")
trigger9 = (Enemy(0),AuthorName = "RYO 2005" && Enemy(0),Name = "Clark")
trigger10 = (Enemy(0),AuthorName = "ikaruga" && Enemy(0),Name = "Clark Still")
var(0) = 2
ignorehitpause = 1

;---------------------------------------------------------
; どこキャンやスーパーキャンセルでないことを判定
;---------------------------------------------------------
; 初期化
[State 8000, VarSet]
type = VarSet
trigger1 = 1
var(4) = 0
ignorehitpause = 1

; 各アクションが終わった瞬間を判定
[State 8000, VarSet]
type = VarSet
triggerall = Root,StateType != A
triggerall = Root,AnimTime = -1
trigger1 = Root,StateNo = [200,599]
trigger2 = Root,StateNo = [900,959]
trigger3 = Root,StateNo = [1000,4999]
var(4) = 1
ignorehitpause = 1

;---------------------------------------------------------
; スローモーション処理
;---------------------------------------------------------
; 初期化
[State 8000, VarSet]
type = VarSet
trigger1 = RoundState != 2
var(5) = -1
ignorehitpause = 1

; スローモーションの時間を設定
[State 8000, VarSet]
type = Null;VarSet
trigger1 = 1
var(5) = 12
ignorehitpause = 1

; スローモーション時間をカウントする
[State 8000, VarAdd]
type = VarAdd
trigger1 = var(5) >= 0
var(5) = -1
ignorehitpause = 1

; スローモーションの実行
[State 8000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = var(5) >= 0
time = 1

;===============================================================
; 特殊喰らい用のvarを管理
;===============================================================
; 初期化
[State 8000, VarSet]
type = VarSet
trigger1 = 1
var(1) = 0
ignorehitpause = 1

[State 8000, VarSet]
type = VarSet
trigger1 = Root,MoveType != H
var(2) = 0
ignorehitpause = 1

;---------------------------------------------------------
; JerzyさんのマリーのM・スパイダーを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 60
triggerall = Root,StateNo = 1230
triggerall = Root,Anim = 5970
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "TESTP, Jerzy"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1220
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "TESTP, Jerzy"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1220
var(1) = 100
ignorehitpause = 1

;---------------------------------------------------------
; 青っぽい猫さんのマリーのM・スパイダーを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Anim = 5970
trigger1 = Root,Time = 20
trigger1 = Root,StateNo = 1026
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "BluishCat"
trigger1 = Enemy(0),Name = "BlueMary"
trigger1 = Enemy(0),StateNo = 1110
trigger2 = Root,Time = 20
trigger2 = Root,StateNo = 1026
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "BluishCat"
trigger2 = Enemy(1),Name = "BlueMary"
trigger2 = Enemy(1),StateNo = 1110
trigger3 = Root,Time = 20
trigger3 = Root,StateNo = 2016
trigger3 = NumEnemy
trigger3 = Enemy(0),AuthorName = "BluishCat"
trigger3 = Enemy(0),Name = "BlueMary"
trigger3 = Enemy(0),StateNo = 2150
trigger4 = Root,Time = 20
trigger4 = Root,StateNo = 2016
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),AuthorName = "BluishCat"
trigger4 = Enemy(1),Name = "BlueMary"
trigger4 = Enemy(1),StateNo = 2150
trigger5 = Root,Time = 21
trigger5 = Root,StateNo = 4053
trigger5 = NumEnemy
trigger5 = Enemy(0),AuthorName = "BluishCat"
trigger5 = Enemy(0),Name = "BlueMary"
trigger5 = Enemy(0),StateNo = 4001
trigger6 = Root,Time = 21
trigger6 = Root,StateNo = 4053
trigger6 = NumEnemy > 1
trigger6 = Enemy(1),AuthorName = "BluishCat"
trigger6 = Enemy(1),Name = "BlueMary"
trigger6 = Enemy(1),StateNo = 4001
var(1) = 110
ignorehitpause = 1

[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Anim = 5970
trigger1 = Root,Time = 24
trigger1 = Root,StateNo = 1026
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "BluishCat"
trigger1 = Enemy(0),Name = "BlueMary"
trigger1 = Enemy(0),StateNo = 1110
trigger2 = Root,Time = 24
trigger2 = Root,StateNo = 1026
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "BluishCat"
trigger2 = Enemy(1),Name = "BlueMary"
trigger2 = Enemy(1),StateNo = 1110
trigger3 = Root,Time = 24
trigger3 = Root,StateNo = 2016
trigger3 = NumEnemy
trigger3 = Enemy(0),AuthorName = "BluishCat"
trigger3 = Enemy(0),Name = "BlueMary"
trigger3 = Enemy(0),StateNo = 2150
trigger4 = Root,Time = 24
trigger4 = Root,StateNo = 2016
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),AuthorName = "BluishCat"
trigger4 = Enemy(1),Name = "BlueMary"
trigger4 = Enemy(1),StateNo = 2150
trigger5 = Root,Time = 25
trigger5 = Root,StateNo = 4053
trigger5 = NumEnemy
trigger5 = Enemy(0),AuthorName = "BluishCat"
trigger5 = Enemy(0),Name = "BlueMary"
trigger5 = Enemy(0),StateNo = 4001
trigger6 = Root,Time = 25
trigger6 = Root,StateNo = 4053
trigger6 = NumEnemy > 1
trigger6 = Enemy(1),AuthorName = "BluishCat"
trigger6 = Enemy(1),Name = "BlueMary"
trigger6 = Enemy(1),StateNo = 4001
var(1) = 111
ignorehitpause = 1

;---------------------------------------------------------
; TESTPさんのマリーのM・スパイダーを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 59
triggerall = Root,StateNo = 1230
triggerall = Root,Anim = 1230
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "TESTP"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1220
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "TESTP"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1220
var(1) = 120
ignorehitpause = 1

;---------------------------------------------------------
; ActJapanさんのマリーのM・スパイダーを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 59
triggerall = Root,StateNo = 9970
triggerall = Root,Anim = 1170
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "ActJapan"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1121
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "ActJapan"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1121
var(1) = 120
ignorehitpause = 1

;---------------------------------------------------------
; ピータンさんのマリーのM・スパイダーを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 59
triggerall = Root,StateNo = 1120
triggerall = Root,Anim = 1120
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "P-tan"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1110
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "P-tan"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1110
var(1) = 120
ignorehitpause = 1

;---------------------------------------------------------
; JerzyさんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 15
triggerall = Root,StateNo = 1631
triggerall = Root,Anim = 5975
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "TESTP, Jerzy"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1620
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "TESTP, Jerzy"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1620
var(1) = 200
ignorehitpause = 1

;---------------------------------------------------------
; 青っぽい猫さんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 12
triggerall = Root,Anim = 5975
trigger1 = Root,StateNo = 1361
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "BluishCat"
trigger1 = Enemy(0),Name = "BlueMary"
trigger1 = Enemy(0),StateNo = 1350
trigger2 = Root,StateNo = 1361
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "BluishCat"
trigger2 = Enemy(1),Name = "BlueMary"
trigger2 = Enemy(1),StateNo = 1350
trigger3 = Root,StateNo = 2361
trigger3 = NumEnemy
trigger3 = Enemy(0),AuthorName = "BluishCat"
trigger3 = Enemy(0),Name = "BlueMary"
trigger3 = Enemy(0),StateNo = 2350
trigger4 = Root,StateNo = 2361
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),AuthorName = "BluishCat"
trigger4 = Enemy(1),Name = "BlueMary"
trigger4 = Enemy(1),StateNo = 2350
trigger5 = Root,StateNo = 4051
trigger5 = NumEnemy
trigger5 = Enemy(0),AuthorName = "BluishCat"
trigger5 = Enemy(0),Name = "BlueMary"
trigger5 = Enemy(0),StateNo = 4001
trigger6 = Root,StateNo = 4051
trigger6 = NumEnemy > 1
trigger6 = Enemy(1),AuthorName = "BluishCat"
trigger6 = Enemy(1),Name = "BlueMary"
trigger6 = Enemy(1),StateNo = 4001
var(1) = 210
ignorehitpause = 1

[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 25
triggerall = Root,Anim = 5975
trigger1 = Root,StateNo = 1361
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "BluishCat"
trigger1 = Enemy(0),Name = "BlueMary"
trigger1 = Enemy(0),StateNo = 1350
trigger2 = Root,StateNo = 1361
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "BluishCat"
trigger2 = Enemy(1),Name = "BlueMary"
trigger2 = Enemy(1),StateNo = 1350
trigger3 = Root,StateNo = 2361
trigger3 = NumEnemy
trigger3 = Enemy(0),AuthorName = "BluishCat"
trigger3 = Enemy(0),Name = "BlueMary"
trigger3 = Enemy(0),StateNo = 2350
trigger4 = Root,StateNo = 2361
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),AuthorName = "BluishCat"
trigger4 = Enemy(1),Name = "BlueMary"
trigger4 = Enemy(1),StateNo = 2350
trigger5 = Root,StateNo = 4051
trigger5 = NumEnemy
trigger5 = Enemy(0),AuthorName = "BluishCat"
trigger5 = Enemy(0),Name = "BlueMary"
trigger5 = Enemy(0),StateNo = 4001
trigger6 = Root,StateNo = 4051
trigger6 = NumEnemy > 1
trigger6 = Enemy(1),AuthorName = "BluishCat"
trigger6 = Enemy(1),Name = "BlueMary"
trigger6 = Enemy(1),StateNo = 4001
var(1) = 211
ignorehitpause = 1

;---------------------------------------------------------
; TESTPさんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 43
triggerall = Root,StateNo = 1630
triggerall = Root,Anim = 1630
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "TESTP"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1620
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "TESTP"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1620
var(1) = 220
ignorehitpause = 1

;---------------------------------------------------------
; ActJapanさんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 43
triggerall = Root,StateNo = 1260
triggerall = Root,Anim = 1260
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "ActJapan"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1250
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "ActJapan"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1250
var(1) = 220
ignorehitpause = 1

;---------------------------------------------------------
; ピータンさんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 43
triggerall = Root,StateNo = 1520
triggerall = Root,Anim = 1520
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "P-tan"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1510
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "P-tan"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1510
var(1) = 220
ignorehitpause = 1

;---------------------------------------------------------
; zzzasdさんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 15
triggerall = Root,StateNo = 1140
triggerall = Root,Anim = 5975
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "zzzasd"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1120
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "zzzasd"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1120
var(1) = 230
ignorehitpause = 1

;---------------------------------------------------------
; MARさんのマリーのM・クラブクラッチを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 51
triggerall = Root,StateNo =1320
triggerall = Root,Anim = 1320
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "MAR"
trigger1 = Enemy(0),Name = "Blue Mary"
trigger1 = Enemy(0),StateNo = 1300
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "MAR"
trigger2 = Enemy(1),Name = "Blue Mary"
trigger2 = Enemy(1),StateNo = 1300
var(1) = 240
ignorehitpause = 1

;---------------------------------------------------------
; アフロンさんの天童 凱のガイスパイダーを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
triggerall = Root,MoveType = H
triggerall = Root,Time = 1
triggerall = Root,StateNo = 1094
triggerall = Root,Anim = 1094
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName = "ahuron"
trigger1 = Enemy(0),Name = "Gai Tendo"
trigger1 = Enemy(0),StateNo = 1091
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),AuthorName = "ahuron"
trigger2 = Enemy(1),Name = "Gai Tendo"
trigger2 = Enemy(1),StateNo = 1091
var(1) = 300
ignorehitpause = 1

;---------------------------------------------------------
; 削られKO時に立ちかしゃがみかを判定
;---------------------------------------------------------
[State 8000, VarSet]
type = VarSet
trigger1 = Root,PrevStateNo = 120
trigger2 = Root,PrevStateNo = 130
trigger3 = Root,PrevStateNo = 150
var(2) = 150
ignorehitpause = 1

[State 8000, VarSet]
type = VarSet
trigger1 = Root,PrevStateNo = 121
trigger2 = Root,PrevStateNo = 131
trigger3 = Root,PrevStateNo = 151
var(2) = 151
ignorehitpause = 1


;===============================================================
; エフェクト処理ヘルパーの呼び出し
;===============================================================
;---------------------------------------------------------
; 相手1
;---------------------------------------------------------
[State 8000, Helper]
type = Helper
triggerall = Root,var(2) = 2
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Enemy(0),Time = 1
;---------------------------------------------------
trigger1 = Root,NumTarget(700) || Root,NumTarget(701)
trigger1 = Enemy(0),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(0),StateNo = 750
;---------------------------------------------------
trigger2 = Root,NumTarget(702) || Root,NumTarget(703)
trigger2 = Enemy(0),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(0),StateNo = 9920
;---------------------------------------------------
trigger3 = Root,NumTarget(850)
trigger3 = Enemy(0),GetHitVar(chainid) = 850
trigger3 = Enemy(0),StateNo = 850
;---------------------------------------------------
trigger4 = Root,NumTarget(860)
trigger4 = Enemy(0),GetHitVar(chainid) = 860
trigger4 = Enemy(0),StateNo = 860
;---------------------------------------------------
trigger5 = Root,NumTarget(1050)
trigger5 = Enemy(0),GetHitVar(chainid) = 1050
trigger5 = Enemy(0),StateNo = 1050
;---------------------------------------------------
trigger6 = Root,NumTarget(1150) || Root,NumTarget(1151)
trigger6 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger6 = Enemy(0),StateNo = 9950
;---------------------------------------------------
trigger7 = Root,NumTarget(1150) || Root,NumTarget(1151)
trigger7 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger7 = Enemy(0),StateNo = 9960
;---------------------------------------------------
trigger8 = Root,NumTarget(1160) || Root,NumTarget(1161)
trigger8 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger8 = Enemy(0),StateNo = 9960
;---------------------------------------------------
trigger9 = Root,NumTarget(1170) || Root,NumTarget(1171)
trigger9 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger9 = Enemy(0),StateNo = 9970
;---------------------------------------------------
trigger10 = Root,NumTarget(1350)
trigger10 = Enemy(0),GetHitVar(chainid) = 1350
trigger10 = Enemy(0),StateNo = 1351
;---------------------------------------------------
trigger11 = Root,NumTarget(1550)
trigger11 = Enemy(0),GetHitVar(chainid) = 1550
trigger11 = Enemy(0),StateNo = 1550
;---------------------------------------------------
trigger12 = Root,NumTarget(3450)
trigger12 = Enemy(0),GetHitVar(chainid) = 3450
trigger12 = Enemy(0),StateNo = 3451
;---------------------------------------------------
;trigger = Root,NumTarget()
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9930
;---------------------------------------------------
name = "Effects_Enemy(0)"
id = 8001
StateNo = 8001
pos = 0,0
postype = p1
facing = 1
ownpal = 1

;---------------------------------------------------------
; 相手2
;---------------------------------------------------------
[State 8000, Helper]
type = Helper
triggerall = Root,var(3) = 2
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Enemy(1),Time = 1
;---------------------------------------------------
trigger1 = Root,NumTarget(700) || Root,NumTarget(701)
trigger1 = Enemy(1),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(1),StateNo = 750
;---------------------------------------------------
trigger2 = Root,NumTarget(702) || Root,NumTarget(703)
trigger2 = Enemy(1),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(1),StateNo = 9920
;---------------------------------------------------
trigger3 = Root,NumTarget(850)
trigger3 = Enemy(1),GetHitVar(chainid) = 850
trigger3 = Enemy(1),StateNo = 850
;---------------------------------------------------
trigger4 = Root,NumTarget(860)
trigger4 = Enemy(1),GetHitVar(chainid) = 860
trigger4 = Enemy(1),StateNo = 860
;---------------------------------------------------
trigger5 = Root,NumTarget(1050)
trigger5 = Enemy(1),GetHitVar(chainid) = 1050
trigger5 = Enemy(1),StateNo = 1050
;---------------------------------------------------
trigger6 = Root,NumTarget(1150) || Root,NumTarget(1151)
trigger6 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger6 = Enemy(1),StateNo = 9950
;---------------------------------------------------
trigger7 = Root,NumTarget(1150) || Root,NumTarget(1151)
trigger7 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger7 = Enemy(1),StateNo = 9960
;---------------------------------------------------
trigger8 = Root,NumTarget(1160) || Root,NumTarget(1161)
trigger8 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger8 = Enemy(1),StateNo = 9960
;---------------------------------------------------
trigger9 = Root,NumTarget(1170) || Root,NumTarget(1171)
trigger9 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger9 = Enemy(1),StateNo = 9970
;---------------------------------------------------
trigger10 = Root,NumTarget(1350)
trigger10 = Enemy(1),GetHitVar(chainid) = 1350
trigger10 = Enemy(1),StateNo = 1351
;---------------------------------------------------
trigger11 = Root,NumTarget(1550)
trigger11 = Enemy(1),GetHitVar(chainid) = 1550
trigger11 = Enemy(1),StateNo = 1550
;---------------------------------------------------
trigger12 = Root,NumTarget(3450)
trigger12 = Enemy(1),GetHitVar(chainid) = 3450
trigger12 = Enemy(1),StateNo = 3451
;---------------------------------------------------
;trigger = Root,NumTarget()
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9930
;---------------------------------------------------
name = "Effects_Enemy(1)"
id = 8002
StateNo = 8002
pos = 0,0
postype = p1
facing = 1
ownpal = 1

;===============================================================
; KOボイスをランダムで再生
;===============================================================
; 本体がKOされていない
[State 8000, VarSet]
type = VarSet
trigger1 = Root,Alive = 1
var(3) = 0

; 本体がKOされたことを判定
[State 8000, VarSet]
type = VarSet
triggerall = Root,Alive = 0
triggerall = var(3) < 2
trigger1 = Root,PrevStateNo != [120,121]
trigger1 = Root,PrevStateNo != [130,131]
trigger1 = Root,PrevStateNo != [150,151]
var(3) = 1

; KOボイスの再生
[State 8000, PlaySnd]
type = PlaySnd
trigger1 = var(3) = 1
value = 10,0+Random%2
channel = 0
abspan = 0

; KOボイスが再生されたことを判定
[State 8000, VarSet]
type = VarSet
trigger1 = Root,Alive = 0
var(3) = 2


;*********************************************************************
; 相手1用エフェクト処理ヘルパー
;*********************************************************************
[Statedef 8001]
type = A
movetype = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;===============================================================
; 座標と向きを相手1に合わせる
;===============================================================
[State 8001, PosSet]
type = PosSet
triggerall = NumEnemy
trigger1 = 1
x = Ceil(Enemy(0),Pos X)
y = 0;Ceil(Enemy(0),Pos Y)
ignorehitpause = 1

[State 8001, Turn]
type = Turn
triggerall = NumEnemy
trigger1 = Enemy(0),Facing != Facing
ignorehitpause = 1

;===============================================================
; Explodの表示位置を設定
;===============================================================
;---------------------------------------------------------
; X軸
;---------------------------------------------------------
[State 8001, VarSet]
type = VarSet
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = 1
var(0) = 0

;---------------------------------------------------------
; Y軸
;---------------------------------------------------------
[State 8001, VarSet]
type = VarSet
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = 1
var(1) = 0

;===============================================================
; エフェクトの処理
;===============================================================
;---------------------------------------------------------
; 叩き付け
;---------------------------------------------------------
; サウンド再生
[State 8001, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = 1050
trigger1 = Enemy(0),StateNo = 1050
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger2 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger2 = Enemy(0),StateNo = 9951 && Enemy(0),Time = 1
trigger3 = Enemy(0),GetHitVar(chainid) = 1350
trigger3 = Enemy(0),StateNo = 9951 && Enemy(0),Time = 1
trigger4 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger4 = Enemy(0),StateNo = 9960
trigger4 = Enemy(0),HitShakeOver && Enemy(0),Pos Y >= 0
trigger5 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger5 = Enemy(0),StateNo = 9960
trigger5 = Enemy(0),HitShakeOver && Enemy(0),Pos Y >= 0
trigger6 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger6 = Enemy(0),StateNo = 9970 && Enemy(0),Time = 14
trigger7 = Enemy(0),GetHitVar(chainid) = 3450
trigger7 = Enemy(0),StateNo = 3454
trigger7 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9930
;trigger = Enemy(0),HitShakeOver
;trigger = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
value = 8200,0
;abspan = 0

; フォビドゥンエンゲージ“CODE：MC”のフィニッシュサウンド再生
[State 8001, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Enemy(0),GetHitVar(chainid) = 3450
triggerall = Root,var(2) = 2
trigger1 = Root,var(41) >= 4
trigger1 = Enemy(0),StateNo = 3454
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
value = 8010,2
;abspan = 0

; 叩き付けエフェクト1-1の表示
[State 8001, Explod]
type = Explod
triggerall = NumExplod(8200) = 0
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger1 = Enemy(0),StateNo = 9951 && Enemy(0),Time = 1
trigger2 = Enemy(0),GetHitVar(chainid) = 1350
trigger2 = Enemy(0),StateNo = 9951 && Enemy(0),Time = 1
trigger3 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger3 = Enemy(0),StateNo = 9960
trigger3 = Enemy(0),HitShakeOver && Enemy(0),Pos Y >= 0
trigger4 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger4 = Enemy(0),StateNo = 9960
trigger4 = Enemy(0),HitShakeOver && Enemy(0),Pos Y >= 0
trigger5 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger5 = Enemy(0),StateNo = 9970 && Enemy(0),Time = 14
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9930
;trigger = Enemy(0),HitShakeOver
;trigger = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
anim = 8200
id = 8200
postype = p1
pos = 0,0
sprpriority = -2
ownpal = 1
bindtime = 1
ignorehitpause = 1

; 叩き付けエフェクト1-2の表示
[State 8001, Explod]
type = Explod
triggerall = NumExplod(8210) = 0
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger1 = Enemy(0),StateNo = 9951 && Enemy(0),Time = 1
trigger2 = Enemy(0),GetHitVar(chainid) = 1350
trigger2 = Enemy(0),StateNo = 9951 && Enemy(0),Time = 1
trigger3 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger3 = Enemy(0),StateNo = 9960
trigger3 = Enemy(0),HitShakeOver && Enemy(0),Pos Y >= 0
trigger4 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger4 = Enemy(0),StateNo = 9960
trigger4 = Enemy(0),HitShakeOver && Enemy(0),Pos Y >= 0
trigger5 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger5 = Enemy(0),StateNo = 9970 && Enemy(0),Time = 14
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9930
;trigger = Enemy(0),HitShakeOver
;trigger = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
anim = 8210
id = 8210
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = 1
ignorehitpause = 1

; 叩き付けエフェクト2の表示
[State 8001, Explod]
type = Explod
triggerall = NumExplod(8220) = 0
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = 1050
trigger1 = Enemy(0),StateNo = 1050
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger2 = Enemy(0),GetHitVar(chainid) = 3450
trigger2 = Enemy(0),StateNo = 3454
trigger2 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
anim = 8220
id = 8220
postype = p1
pos = 0,0
sprpriority = -2
ownpal = 1
bindtime = 1
ignorehitpause = 1

;---------------------------------------------------------
; ダウン
;---------------------------------------------------------
; サウンド再生
[State 8001, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = 850
trigger1 = Enemy(0),StateNo = 852
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 12
trigger2 = Enemy(0),GetHitVar(chainid) = 860
trigger2 = Enemy(0),StateNo = 862
trigger2 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 12
trigger3 = Enemy(0),GetHitVar(chainid) = 1050
trigger3 = Enemy(0),StateNo = 1052
trigger3 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger4 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger4 = Enemy(0),StateNo = 9952 || Enemy(0),StateNo = 9962
trigger4 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger5 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger5 = Enemy(0),StateNo = 9962
trigger5 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger6 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger6 = Enemy(0),StateNo = 9971 || Enemy(0),StateNo = 9973
trigger6 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger7 = Enemy(0),GetHitVar(chainid) = 1350
trigger7 = Enemy(0),StateNo = 9952
trigger7 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger8 = Enemy(0),GetHitVar(chainid) = 3450
trigger8 = Enemy(0),StateNo = 3456
trigger8 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 8
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9932
;trigger = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
value = 8320,0
;abspan = 0

; エフェクトの表示
[State 8001, Explod]
type = Explod
triggerall = NumExplod(8320) = 0
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = 850
trigger1 = Enemy(0),StateNo = 852
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 12
trigger2 = Enemy(0),GetHitVar(chainid) = 860
trigger2 = Enemy(0),StateNo = 862
trigger2 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 12
trigger3 = Enemy(0),GetHitVar(chainid) = 1050
trigger3 = Enemy(0),StateNo = 1052
trigger3 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger4 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger4 = Enemy(0),StateNo = 9952 || Enemy(0),StateNo = 9962
trigger4 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger5 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger5 = Enemy(0),StateNo = 9962
trigger5 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger6 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger6 = Enemy(0),StateNo = 9973
trigger6 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger7 = Enemy(0),GetHitVar(chainid) = 1350
trigger7 = Enemy(0),StateNo = 9952
trigger7 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger8 = Enemy(0),GetHitVar(chainid) = 3450
trigger8 = Enemy(0),StateNo = 3456
trigger8 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 8
;trigger = Enemy(0),GetHitVar(chainid) = 
;trigger = Enemy(0),StateNo = 9932
;trigger = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
anim = 8320
id = 8320
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = 1
ignorehitpause = 1

;---------------------------------------------------------
; すべりダウン
;---------------------------------------------------------
; サウンド再生
[State 8001, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(0),StateNo = 9910
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger2 = Enemy(0),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(0),StateNo = 9920
trigger2 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger3 = Enemy(0),GetHitVar(chainid) = 1550
trigger3 = Enemy(0),StateNo = 1554
trigger3 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
value = 8300,0
;abspan = 0

; エフェクト1の表示
[State 8001, Explod]
type = Explod
triggerall = NumExplod(8300) = 0
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(0),StateNo = 9910
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger2 = Enemy(0),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(0),StateNo = 9920
trigger2 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger3 = Enemy(0),GetHitVar(chainid) = 1550
trigger3 = Enemy(0),StateNo = 1554
trigger3 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
anim = 8300
id = 8300
postype = p1
pos = 10,0
facing = -1
ownpal = 1
bindtime = 1
sprpriority = 4
ignorehitpause = 1

; エフェクト2の表示
[State 8001, Explod]
type = Explod
triggerall = NumExplod(8310) = 0
triggerall = NumEnemy
triggerall = Enemy(0),MoveType = H
triggerall = Root,var(2) = 2
trigger1 = Enemy(0),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(0),StateNo = 9910
trigger1 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger2 = Enemy(0),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(0),StateNo = 9920
trigger2 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
trigger3 = Enemy(0),GetHitVar(chainid) = 1550
trigger3 = Enemy(0),StateNo = 1554
trigger3 = Enemy(0),Vel Y > 0 && Enemy(0),Pos Y >= 0
anim = 8310
id = 8310
postype = p1
pos = 38,0
facing = -1
ownpal = 1
bindtime = 1
sprpriority = 4
ignorehitpause = 1

;===============================================================
; Explodの表示位置設定をリセット
;===============================================================
; X軸
[State 8001, VarSet]
type = VarSet
trigger1 = NumExplod(8200) = 1
trigger2 = NumExplod(8210) = 1
trigger3 = NumExplod(8220) = 1
trigger4 = NumExplod(8320) = 1
var(0) = 0

; Y軸
[State 8001, VarSet]
type = VarSet
trigger1 = NumExplod(8200) = 1
trigger2 = NumExplod(8210) = 1
trigger3 = NumExplod(8220) = 1
trigger4 = NumExplod(8320) = 1
var(1) = 0

;===============================================================
; ヘルパーを消去
;===============================================================
[State 8001, DestroySelf]
type = DestroySelf
triggerall = NumEnemy
;---------------------------------------------------
trigger1 = Root,var(2) = 0
trigger2 = Root,NumTarget = 0
trigger3 = Enemy(0),MoveType != H
;---------------------------------------------------
trigger4 = Enemy(0),GetHitVar(chainid) = [700,701]
trigger4 = Enemy(0),StateNo = 9911
trigger4 = Enemy(0),Time = 1
;---------------------------------------------------
trigger5 = Enemy(0),GetHitVar(chainid) = [702,703]
trigger5 = Enemy(0),StateNo = 9921
trigger5 = Enemy(0),Time = 1
;---------------------------------------------------
trigger6 = Enemy(0),GetHitVar(chainid) = [702,703]
trigger6 = Enemy(0),StateNo = 9920
trigger6 = Enemy(0),HitShakeOver && Enemy(0),BackEdgeDist < 20
;---------------------------------------------------
trigger7 = Enemy(0),GetHitVar(chainid) = 850
trigger7 = Enemy(0),StateNo = 853
trigger7 = Enemy(0),Time = 1
;---------------------------------------------------
trigger8 = Enemy(0),GetHitVar(chainid) = 860
trigger8 = Enemy(0),StateNo = 863
trigger8 = Enemy(0),Time = 1
;---------------------------------------------------
trigger9 = Enemy(0),GetHitVar(chainid) = 1050
trigger9 = Enemy(0),StateNo = 9953
trigger9 = Enemy(0),Time = 1
;---------------------------------------------------
trigger10 = Enemy(0),GetHitVar(chainid) = [1150,1151]
trigger10 = Enemy(0),StateNo = 9953
trigger10 = Enemy(0),Time = 1
;---------------------------------------------------
trigger11 = Enemy(0),GetHitVar(chainid) = [1160,1161]
trigger11 = Enemy(0),StateNo = 9953
trigger11 = Enemy(0),Time = 1
;---------------------------------------------------
trigger12 = Enemy(0),GetHitVar(chainid) = [1170,1171]
trigger12 = Enemy(0),StateNo = 9953
trigger12 = Enemy(0),Time = 1
;---------------------------------------------------
trigger13 = Enemy(0),GetHitVar(chainid) = 1350
trigger13 = Enemy(0),StateNo = 9953
trigger13 = Enemy(0),Time = 1
;---------------------------------------------------
trigger14 = Enemy(0),GetHitVar(chainid) = 1550
trigger14 = Enemy(0),StateNo = 1555
trigger14 = Enemy(0),Time = 1
;---------------------------------------------------
trigger15 = Enemy(0),GetHitVar(chainid) = 3450
trigger15 = Enemy(0),StateNo = 3457
trigger15 = Enemy(0),Time = 1


;*********************************************************************
; 相手2用エフェクト処理ヘルパー
;*********************************************************************
[Statedef 8002]
type = A
movetype = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8002, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;===============================================================
; 座標と向きを相手2に合わせる
;===============================================================
[State 8002, PosSet]
type = PosSet
triggerall = NumEnemy > 1
trigger1 = 1
x = Ceil(Enemy(1),Pos X)
y = 0;Ceil(Enemy(1),Pos Y)
ignorehitpause = 1

[State 8002, Turn]
type = Turn
triggerall = NumEnemy > 1
trigger1 = Enemy(1),Facing != Facing
ignorehitpause = 1

;===============================================================
; Explodの表示位置を設定
;===============================================================
;---------------------------------------------------------
; X軸
;---------------------------------------------------------
[State 8002, VarSet]
type = VarSet
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = 1
var(0) = 0

;---------------------------------------------------------
; Y軸
;---------------------------------------------------------
[State 8002, VarSet]
type = VarSet
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = 1
var(1) = 0

;===============================================================
; エフェクトの処理
;===============================================================
;---------------------------------------------------------
; 叩き付け
;---------------------------------------------------------
; サウンド再生
[State 8002, PlaySnd]
type = PlaySnd
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = 1050
trigger1 = Enemy(1),StateNo = 1050
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger2 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger2 = Enemy(1),StateNo = 9951 && Enemy(1),Time = 1
trigger3 = Enemy(1),GetHitVar(chainid) = 1350
trigger3 = Enemy(1),StateNo = 9951 && Enemy(1),Time = 1
trigger4 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger4 = Enemy(1),StateNo = 9960
trigger4 = Enemy(1),HitShakeOver && Enemy(1),Pos Y >= 0
trigger5 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger5 = Enemy(1),StateNo = 9960
trigger5 = Enemy(1),HitShakeOver && Enemy(1),Pos Y >= 0
trigger6 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger6 = Enemy(1),StateNo = 9970 && Enemy(1),Time = 14
trigger7 = Enemy(1),GetHitVar(chainid) = 3450
trigger7 = Enemy(1),StateNo = 3454
trigger7 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
;trigger = Enemy(1),GetHitVar(chainid) = 
;trigger = Enemy(1),StateNo = 9930
;trigger = Enemy(1),HitShakeOver
;trigger = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
value = 8200,0
;abspan = 0

; フォビドゥンエンゲージ“CODE：MC”のフィニッシュサウンド再生
[State 8002, PlaySnd]
type = PlaySnd
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Enemy(1),GetHitVar(chainid) = 3450
triggerall = Root,var(2) = 2
trigger1 = Root,var(41) >= 4
trigger1 = Enemy(1),StateNo = 3454
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
value = 8010,2
;abspan = 0

; 叩き付けエフェクト1-1の表示
[State 8002, Explod]
type = Explod
triggerall = NumExplod(8201) = 0
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger1 = Enemy(1),StateNo = 9951 && Enemy(1),Time = 1
trigger2 = Enemy(1),GetHitVar(chainid) = 1350
trigger2 = Enemy(1),StateNo = 9951 && Enemy(1),Time = 1
trigger3 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger3 = Enemy(1),StateNo = 9960
trigger3 = Enemy(1),HitShakeOver && Enemy(1),Pos Y >= 0
trigger4 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger4 = Enemy(1),StateNo = 9960
trigger4 = Enemy(1),HitShakeOver && Enemy(1),Pos Y >= 0
trigger5 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger5 = Enemy(1),StateNo = 9970 && Enemy(1),Time = 14
;trigger = Enemy(1),GetHitVar(chainid) = 
;trigger = Enemy(1),StateNo = 9930
;trigger = Enemy(1),HitShakeOver
;trigger = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
anim = 8200
id = 8201
postype = p1
pos = 0,0
sprpriority = -2
ownpal = 1
bindtime = 1
ignorehitpause = 1

; 叩き付けエフェクト1-2の表示
[State 8002, Explod]
type = Explod
triggerall = NumExplod(8211) = 0
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger1 = Enemy(1),StateNo = 9951 && Enemy(1),Time = 1
trigger2 = Enemy(1),GetHitVar(chainid) = 1350
trigger2 = Enemy(1),StateNo = 9951 && Enemy(1),Time = 1
trigger3 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger3 = Enemy(1),StateNo = 9960
trigger3 = Enemy(1),HitShakeOver && Enemy(1),Pos Y >= 0
trigger4 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger4 = Enemy(1),StateNo = 9960
trigger4 = Enemy(1),HitShakeOver && Enemy(1),Pos Y >= 0
trigger5 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger5 = Enemy(1),StateNo = 9970 && Enemy(1),Time = 14
;trigger = Enemy(1),GetHitVar(chainid) = 
;trigger = Enemy(1),StateNo = 9930
;trigger = Enemy(1),HitShakeOver
;trigger = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
anim = 8210
id = 8211
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = 1
ignorehitpause = 1

; 叩き付けエフェクト2の表示
[State 8002, Explod]
type = Explod
triggerall = NumExplod(8221) = 0
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = 1050
trigger1 = Enemy(1),StateNo = 1050
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger2 = Enemy(1),GetHitVar(chainid) = 3450
trigger2 = Enemy(1),StateNo = 3454
trigger2 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
anim = 8220
id = 8221
postype = p1
pos = 0,0
sprpriority = -2
ownpal = 1
bindtime = 0
ignorehitpause = 1

;---------------------------------------------------------
; ダウン
;---------------------------------------------------------
; サウンド再生
[State 8002, PlaySnd]
type = PlaySnd
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = 850
trigger1 = Enemy(1),StateNo = 852
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 12
trigger2 = Enemy(1),GetHitVar(chainid) = 860
trigger2 = Enemy(1),StateNo = 862
trigger2 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 12
trigger3 = Enemy(1),GetHitVar(chainid) = 1050
trigger3 = Enemy(1),StateNo = 1052
trigger3 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger4 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger4 = Enemy(1),StateNo = 9952 || Enemy(0),StateNo = 9962
trigger4 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger5 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger5 = Enemy(1),StateNo = 9962
trigger5 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger6 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger6 = Enemy(1),StateNo = 9971 || Enemy(1),StateNo = 9973
trigger6 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger7 = Enemy(1),GetHitVar(chainid) = 1350
trigger7 = Enemy(1),StateNo = 9952
trigger7 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger8 = Enemy(1),GetHitVar(chainid) = 3450
trigger8 = Enemy(1),StateNo = 3456
trigger8 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 8
;trigger = Enemy(1),GetHitVar(chainid) = 
;trigger = Enemy(1),StateNo = 9932
;trigger = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
value = 8320,0
;abspan = 0

; エフェクトの表示
[State 8002, Explod]
type = Explod
triggerall = NumExplod(8321) = 0
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = 850
trigger1 = Enemy(1),StateNo = 852
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 12
trigger2 = Enemy(1),GetHitVar(chainid) = 860
trigger2 = Enemy(1),StateNo = 862
trigger2 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 12
trigger3 = Enemy(1),GetHitVar(chainid) = 1050
trigger3 = Enemy(1),StateNo = 1052
trigger3 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger4 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger4 = Enemy(1),StateNo = 9952 || Enemy(0),StateNo = 9962
trigger4 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger5 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger5 = Enemy(1),StateNo = 9962
trigger5 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger6 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger6 = Enemy(1),StateNo = 9973
trigger6 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger7 = Enemy(1),GetHitVar(chainid) = 1350
trigger7 = Enemy(1),StateNo = 9952
trigger7 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger8 = Enemy(1),GetHitVar(chainid) = 3450
trigger8 = Enemy(1),StateNo = 3456
trigger8 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 8
;trigger = Enemy(1),GetHitVar(chainid) = 
;trigger = Enemy(1),StateNo = 9932
;trigger = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
anim = 8320
id = 8321
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = 1
ignorehitpause = 1

;---------------------------------------------------------
; すべりダウン
;---------------------------------------------------------
; サウンド再生
[State 8002, PlaySnd]
type = PlaySnd
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(1),StateNo = 9910
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger2 = Enemy(1),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(1),StateNo = 9920
trigger2 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger3 = Enemy(1),GetHitVar(chainid) = 1550
trigger3 = Enemy(1),StateNo = 1554
trigger3 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
value = 8300,0
;abspan = 0

; エフェクト1の表示
[State 8002, Explod]
type = Explod
triggerall = NumExplod(8301) = 0
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(1),StateNo = 9910
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger2 = Enemy(1),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(1),StateNo = 9920
trigger2 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger3 = Enemy(1),GetHitVar(chainid) = 1550
trigger3 = Enemy(1),StateNo = 1554
trigger3 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
anim = 8300
id = 8301
postype = p1
pos = 10,0
facing = -1
ownpal = 1
bindtime = 1
sprpriority = 4
ignorehitpause = 1

; エフェクト2の表示
[State 8002, Explod]
type = Explod
triggerall = NumExplod(8311) = 0
triggerall = NumEnemy > 1
triggerall = Enemy(1),MoveType = H
triggerall = Root,var(3) = 2
trigger1 = Enemy(1),GetHitVar(chainid) = [700,701]
trigger1 = Enemy(1),StateNo = 9910
trigger1 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger2 = Enemy(1),GetHitVar(chainid) = [702,703]
trigger2 = Enemy(1),StateNo = 9920
trigger2 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
trigger3 = Enemy(1),GetHitVar(chainid) = 1550
trigger3 = Enemy(1),StateNo = 1554
trigger3 = Enemy(1),Vel Y > 0 && Enemy(1),Pos Y >= 0
anim = 8310
id = 8311
postype = p1
pos = 38,0
facing = -1
ownpal = 1
bindtime = 1
sprpriority = 4
ignorehitpause = 1

;===============================================================
; Explodの表示位置設定をリセット
;===============================================================
; X軸
[State 8002, VarSet]
type = VarSet
trigger1 = NumExplod(8201) = 1
trigger2 = NumExplod(8211) = 1
trigger3 = NumExplod(8221) = 1
trigger4 = NumExplod(8321) = 1
var(0) = 0

; Y軸
[State 8002, VarSet]
type = VarSet
trigger1 = NumExplod(8201) = 1
trigger2 = NumExplod(8211) = 1
trigger3 = NumExplod(8221) = 1
trigger4 = NumExplod(8321) = 1
var(1) = 0

;===============================================================
; ヘルパーを消去
;===============================================================
[State 8002, DestroySelf]
type = DestroySelf
triggerall = NumEnemy > 1
;---------------------------------------------------
trigger1 = Root,var(3) = 0
trigger2 = Root,NumTarget = 0
trigger3 = Enemy(1),MoveType != H
;---------------------------------------------------
trigger4 = Enemy(1),GetHitVar(chainid) = [700,701]
trigger4 = Enemy(1),StateNo = 9911
trigger4 = Enemy(1),Time = 1
;---------------------------------------------------
trigger5 = Enemy(1),GetHitVar(chainid) = [702,703]
trigger5 = Enemy(1),StateNo = 9921
trigger5 = Enemy(1),Time = 1
;---------------------------------------------------
trigger6 = Enemy(1),GetHitVar(chainid) = [702,703]
trigger6 = Enemy(1),StateNo = 9920
trigger6 = Enemy(1),HitShakeOver && Enemy(1),BackEdgeDist < 20
;---------------------------------------------------
trigger7 = Enemy(1),GetHitVar(chainid) = 850
trigger7 = Enemy(1),StateNo = 853
trigger7 = Enemy(1),Time = 1
;---------------------------------------------------
trigger8 = Enemy(1),GetHitVar(chainid) = 860
trigger8 = Enemy(1),StateNo = 863
trigger8 = Enemy(1),Time = 1
;---------------------------------------------------
trigger9 = Enemy(1),GetHitVar(chainid) = 1050
trigger9 = Enemy(1),StateNo = 9953
trigger9 = Enemy(1),Time = 1
;---------------------------------------------------
trigger10 = Enemy(1),GetHitVar(chainid) = [1150,1151]
trigger10 = Enemy(1),StateNo = 9953
trigger10 = Enemy(1),Time = 1
;---------------------------------------------------
trigger11 = Enemy(1),GetHitVar(chainid) = [1160,1161]
trigger11 = Enemy(1),StateNo = 9953
trigger11 = Enemy(1),Time = 1
;---------------------------------------------------
trigger12 = Enemy(1),GetHitVar(chainid) = [1170,1171]
trigger12 = Enemy(1),StateNo = 9953
trigger12 = Enemy(1),Time = 1
;---------------------------------------------------
trigger13 = Enemy(1),GetHitVar(chainid) = 1350
trigger13 = Enemy(1),StateNo = 9953
trigger13 = Enemy(1),Time = 1
;---------------------------------------------------
trigger14 = Enemy(1),GetHitVar(chainid) = 1550
trigger14 = Enemy(1),StateNo = 1555
trigger14 = Enemy(1),Time = 1
;---------------------------------------------------
trigger15 = Enemy(1),GetHitVar(chainid) = 3450
trigger15 = Enemy(1),StateNo = 3457
trigger15 = Enemy(1),Time = 1


;*********************************************************************
; カウンターヒット表示
;*********************************************************************
[Statedef 8400]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[state 8400, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8400, VarSet]
type = VarSet
trigger1 = Time = 0
var(0) = -52

[State 8400, VarAdd]
type = VarAdd
trigger1 = Time < 10
var(0) = 10

[State 8400, VarAdd]
type = VarAdd
trigger1 = Time > 59
var(0) = -10

[State 8400, Explod]
type = Explod
triggerall = TeamSide = 1
trigger1 = Time < 10
trigger2 = Time > 59
anim = 8400
id = 8400
ontop = 1
postype = left
pos = var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

[State 8400, Explod]
type = Explod
triggerall = TeamSide = 1
trigger1 = Time = 10
anim = 8401
id = 8400
ontop = 1
postype = left
pos = var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

[State 8400, Explod]
type = Explod
triggerall = TeamSide = 2
trigger1 = Time < 10
trigger2 = Time > 59
anim = 8400
id = 8400
ontop = 1
postype = right
pos = -var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

[State 8400, Explod]
type = Explod
triggerall = TeamSide = 2
trigger1 = Time = 10
anim = 8401
id = 8400
ontop = 1
postype = right
pos = -var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

[State 8400, DestroySelf]
type = DestroySelf
trigger1 = Time = 70


;*********************************************************************
; MAX2背景エフェクト
;*********************************************************************
;===============================================================
; MAX2発動
;===============================================================
[Statedef 8600]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0
sprpriority = -6

[State 8600, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
flag3 = noshadow

;---------------------------------------------------------
; 背景の表示
;---------------------------------------------------------
[State 8600, Explod]
type = Explod
trigger1 = Time % 32 = 0
anim = 8605
id = 8605
postype = left
bindtime = -1
sprpriority = -6
ownpal = 1
supermovetime = -1
pausemovetime = -1
trans = AddAlpha
alpha = 200,256

[State 8600, Explod]
type = Explod
trigger1 = Time % 63 = 0
anim = 8606
id = 8606
postype = left
bindtime = -1
sprpriority = -6
ownpal = 1
supermovetime = -1
pausemovetime = -1
trans = AddAlpha
alpha = 200,256

[State 8600, Explod]
type = Explod
trigger1 = Time % 32 = 0
anim = 8607
id = 8607
postype = left
bindtime = -1
sprpriority = -6
ownpal = 1
supermovetime = -1
pausemovetime = -1
trans = AddAlpha
alpha = 200,256

[State 8600, Explod]
type = Explod
trigger1 = Time % 79 = 0
anim = 8608
id = 8608
postype = left
bindtime = -1
sprpriority = -6
ownpal = 1
supermovetime = -1
pausemovetime = -1
trans = AddAlpha
alpha = 200,256

;---------------------------------------------------------
; 背景の表示スケールを0にして一時的に見えなくする
;---------------------------------------------------------
[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time > 27 && Time < 56
ID = 8605
scale = 0,0
trans = AddAlpha
alpha = 200,256

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time > 27 && Time < 56
ID = 8606
scale = 0,0
trans = AddAlpha
alpha = 200,256

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time > 27 && Time < 56
ID = 8607
scale = 0,0
trans = AddAlpha
alpha = 200,256

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time > 27 && Time < 56
ID = 8608
scale = 0,0
trans = AddAlpha
alpha = 200,256

;---------------------------------------------------------
; 背景の表示スケールを戻す
;---------------------------------------------------------
[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time = 55
ID = 8605
scale = 1,1
trans = AddAlpha
alpha = 200,256

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time = 55
ID = 8606
scale = 1,1
trans = AddAlpha
alpha = 200,256

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time = 55
ID = 8607
scale = 1,1
trans = AddAlpha
alpha = 200,256

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = Time = 55
ID = 8608
scale = 1,1
trans = AddAlpha
alpha = 200,256

;---------------------------------------------------------
; カットイン枠の表示
;---------------------------------------------------------
; 1P側
[State 8600, Explod]
type = Explod
triggerall = Time = 0
trigger1 = TeamSide = 1
anim = 8602
id = 8602
postype = left
bindtime = -1
sprpriority = -4
scale = .5,.5
ownpal = 1
supermovetime = -1
pausemovetime = -1

; 2P側
[State 8600, Explod]
type = Explod
triggerall = Time = 0
trigger1 = TeamSide = 2
anim = 8602
id = 8602
postype = right
bindtime = -1
sprpriority = -4
scale = .5,.5
ownpal = 1
supermovetime = -1
pausemovetime = -1
facing = -1

;---------------------------------------------------------
; カットインの表示
;---------------------------------------------------------
; 1P側
[State 8600, Explod]
type = Explod
triggerall = Time = 0
trigger1 = TeamSide = 1
anim = 8600
id = 8600
postype = left
bindtime = -1
sprpriority = -5
ownpal = 1
supermovetime = -1
pausemovetime = -1

; 2P側
[State 8600, Explod]
type = Explod
triggerall = Time = 0
trigger1 = TeamSide = 2
anim = 8601
id = 8600
postype = right
bindtime = -1
sprpriority = -5
ownpal = 1
supermovetime = -1
pausemovetime = -1
facing = -1

;---------------------------------------------------------
; MAX2終了ステートに移行
;---------------------------------------------------------
[State 8600, ChangeState]
type = ChangeState
trigger1 = Root,MoveType != A
value = 8601
 
;===============================================================
; MAX2終了
;===============================================================
[Statedef 8601]
type = A
physics = N
anim = 9999

[State 8601, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8601, PlaySnd]
type = PlaySnd
trigger1 = Time = 2
value = 8600,0
abspan = 0

[State 8601, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 0
id = 8605

[State 8601, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 0
id = 8606

[State 8601, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 0
id = 8607

[State 8601, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 0
id = 8608

[State 8601, EnvColor]
type = EnvColor
trigger1 = Time < 2
value = 255,255,255
under = 1

[State 8601, Explod]
type = Explod
trigger1 = Time = 2
anim = 8609
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1
supermovetime = -1
pausemovetime = -1
scale = 1.0,1.07

[State 8601, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 2
flag = NoFG

[State 8601, DestroySelf]
type = DestroySelf
trigger1 = Time = 2

;*********************************************************************
; MAXゲージ(ヘルパー)
;*********************************************************************
;===============================================================
; 待機状態
;===============================================================
[Statedef 8700]
type = A
movetype = I
physics = N
anim = 9999
sprpriority = 10
velset = 0,0
ctrl = 0

[State 8700, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8700, BindToRoot]
type = Null;BindToRoot
trigger1 = 1
time = 1
facing = 0
pos = 0,-20
ignorehitpause = 1

;---------------------------------------------------------
; パワーMAXモードの解除
;---------------------------------------------------------
[state 8700, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 0

;---------------------------------------------------------
; 発動状態へ移行
;---------------------------------------------------------
[state 8700, ChangeState]
type = ChangeState
triggerall = Root,MoveType != H
trigger1 = Root,StateNo = 950
trigger2 = Root,fvar(0) = 768
value = 8701

;---------------------------------------------------------
; 本体がKOされたらヘルパーを消去
;---------------------------------------------------------
[State 8700, DestroySelf]
type = DestroySelf
trigger1 = Root,Alive = 0

;===============================================================
; 発動状態
;===============================================================
[Statedef 8701]
type = A
movetype = I
physics = N
anim = 9999
sprpriority = 10
velset = 0,0
ctrl = 0

[state 8701, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8701, BindToRoot]
type = Null;BindToRoot
trigger1 = 1
time = 1
facing = 0
pos = 0,-20
ignorehitpause = 1

;---------------------------------------------------------
; ゲージ表示のX軸についての設定
;---------------------------------------------------------
[State 8701, VarSet]
type = VarSet
trigger1 = 1
var(0) = 0

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = [0,1]
trigger2 = Root,var(0) = [12,13]
trigger3 = Root,var(0) = 20
trigger4 = Root,var(0) = 208
trigger5 = Root,var(0) = 400
trigger6 = Root,var(0) = 1010
trigger7 = Root,var(0) = 1031
trigger8 = Root,var(0) = [1200,1201]
trigger9 = Root,var(0) = 1310
trigger10 = Root,var(0) = 2004
trigger11 = Root,var(0) = 2302
trigger12 = Root,var(0) = [3500,3502]
trigger13 = Root,var(0) = 3604
trigger14 = Root,var(0) = 3700
trigger15 = Root,var(0) = [5090,5091]
var(0) = 18

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = [2,3]
trigger2 = Root,var(0) = [15,17]
trigger3 = Root,var(0) = [50,55]
var(0) = -28

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5
trigger2 = Root,var(0) = 43
trigger3 = Root,var(0) = 3608
var(0) = -5

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 14
trigger2 = Root,var(0) = 60
trigger3 = Root,var(0) = 3601
var(0) = 16

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 33
var(0) = IfElse((Root,TeamSide=1),-4,-3)

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 35 && Root,TeamSide = 2
trigger2 = Root,var(0) = 40
trigger3 = Root,var(0) = 5002
var(0) = 1

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 41
var(0) = 3

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 42
trigger2 = Root,var(0) = 103
trigger3 = Root,var(0) = 202
trigger4 = Root,var(0) = 3000
trigger5 = Root,var(0) = 3602
trigger6 = Root,var(0) = 3609
trigger7 = Root,var(0) = 5020
var(0) = 41

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 44
var(0) = -26

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 56
trigger2 = Root,var(0) = 3620
var(0) = 50

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 57
trigger2 = Root,var(0) = 3617
var(0) = 7

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 58
var(0) = 30

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 59
trigger2 = Root,var(0) = 1021
trigger3 = Root,var(0) = 3503
trigger4 = Root,var(0) = 3607
trigger5 = Root,var(0) = 3623
var(0) = -31

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 100
trigger2 = Root,var(0) = 5070
trigger3 = Root,var(0) = 5100
var(0) = 52

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 101
var(0) = -14

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 200
trigger2 = Root,var(0) = 3613
var(0) = 11

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 201
trigger2 = Root,var(0) = 1300
trigger3 = Root,var(0) = 3603
var(0) = 24

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 203
trigger2 = Root,var(0) = 205
trigger3 = Root,var(0) = 3410
var(0) = 9

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 204
trigger2 = Root,var(0) = 3619
var(0) = 33

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 206
trigger2 = Root,var(0) = 5030
var(0) = 2

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 207
trigger2 = Root,var(0) = [2300,2301]
var(0) = 38

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 209
trigger2 = Root,var(0) = 2100
trigger3 = Root,var(0) = 2102
trigger4 = Root,var(0) = 5050
var(0) = 22

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 301
trigger2 = Root,var(0) = 2104
var(0) = 31

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 300
trigger2 = Root,var(0) = 3505
var(0) = 20

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 302
trigger2 = Root,var(0) = 2101
trigger3 = Root,var(0) = 3612
var(0) = -6

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 401
var(0) = 27

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1020
trigger2 = Root,var(0) = 3200
var(0) = -27

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1022
trigger2 = Root,var(0) = 3618
var(0) = -15

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1030
trigger2 = Root,var(0) = 2001
trigger3 = Root,var(0) = 5041
var(0) = 49

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 103
trigger2 = Root,var(0) = 210
var(0) = 19

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1000
trigger2 = Root,var(0) = 3504
var(0) = 36

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1033
trigger2 = Root,var(0) = 3615
trigger3 = Root,var(0) = 3651
var(0) = 44

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1100
var(0) = -7

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2000
trigger2 = Root,var(0) = 2005
trigger3 = Root,var(0) = 3616
trigger4 = Root,var(0) = 3701
trigger5 = Root,var(0) = 9000
var(0) = -18

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2002
var(0) = 54

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2003
var(0) = 51

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2200
trigger2 = Root,var(0) = 3420
trigger3 = Root,var(0) = 3614
var(0) = 43

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3300
trigger2 = Root,var(0) = 3624
trigger3 = Root,var(0) = 3810
trigger4 = Root,var(0) = 5080
var(0) = 48

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3400
var(0) = 25

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3401
var(0) = -16

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3402
var(0) = 15

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3411
trigger2 = Root,var(0) = 3600
trigger3 = Root,var(0) = 3603
var(0) = 29

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3605
trigger2 = Root,var(0) = 3610
trigger3 = Root,var(0) = 3622
var(0) = 21

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3606
var(0) = 47

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3621
trigger2 = Root,var(0) = 5010
trigger3 = Root,var(0) = 5040
var(0) = 45

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3611
var(0) = 4

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3650
var(0) = 53

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3900
var(0) = 40

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5000
var(0) = -17

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5001
var(0) = 26

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5042
var(0) = 35

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5060
var(0) = 46

[State 8701, VarSet]
type = VarSet
trigger1 = 1
var(1) = 56 + var(0)

;---------------------------------------------------------
; ゲージ表示のY軸についての設定
;---------------------------------------------------------
[State 8701, VarSet]
type = VarSet
trigger1 = 1
var(2) = 0

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 0
trigger2 = Root,var(0) = 59
trigger3 = Root,var(0) = 2200
trigger4 = Root,var(0) = 3300
trigger5 = Root,var(0) = 3810
trigger6 = Root,var(0) = 5100
var(2) = -15

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1
trigger2 = Root,var(0) = 14
trigger3 = Root,var(0) = 42
trigger4 = Root,var(0) = 201
trigger5 = Root,var(0) = 208
trigger6 = Root,var(0) = 210
trigger7 = Root,var(0) = 2300
trigger8 = Root,var(0) = 3650
var(2) = 5

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = [2,3]
trigger2 = Root,var(0) = 101
trigger3 = Root,var(0) = 3900
var(2) = 21

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 4
trigger2 = Root,var(0) = 12
trigger3 = Root,var(0) = 30
trigger4 = Root,var(0) = 32
trigger5 = Root,var(0) = 43
trigger6 = Root,var(0) = 55
trigger7 = Root,var(0) = 56
trigger8 = Root,var(0) = 102
trigger9 = Root,var(0) = 1021
trigger10 = Root,var(0) = 3401
var(2) = 8

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5
var(2) = -4

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 13
trigger2 = Root,var(0) = 40
trigger3 = Root,var(0) = 58
trigger4 = Root,var(0) = 3000
var(2) = 3

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = [15,17]
trigger2 = Root,var(0) = 1033
trigger3 = Root,var(0) = 3200
trigger4 = Root,var(0) = 3600
var(2) = 17

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 20
trigger2 = Root,var(0) = 1032
trigger3 = Root,var(0) = 3606
trigger4 = Root,var(0) = 3611
trigger5 = Root,var(0) = 3619
trigger6 = Root,var(0) = 3700
var(2) = 12

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 33
trigger2 = Root,var(0) = 206
trigger3 = Root,var(0) = 1100
trigger4 = Root,var(0) = 1200
trigger5 = Root,var(0) = 2103
trigger6 = Root,var(0) = 3410
trigger7 = Root,var(0) = 3411
trigger8 = Root,var(0) = 3601
trigger9 = Root,var(0) = 3622
trigger10 = Root,var(0) = 5002
var(2) = 15

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 34
trigger2 = Root,var(0) = 5050
trigger3 = Root,var(0) = 5080
var(2) = 13

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 35
trigger2 = Root,var(0) = 51
trigger3 = Root,var(0) = 401
trigger4 = Root,var(0) = 3500
trigger5 = Root,var(0) = 3651
trigger6 = Root,var(0) = 5020
var(2) = 10

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 41
trigger2 = Root,var(0) = 54
trigger3 = Root,var(0) = 2000
trigger4 = Root,var(0) = 3607
trigger5 = Root,var(0) = 3613
trigger6 = Root,var(0) = 5090
var(2) = 4

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 44
trigger2 = Root,var(0) = 60
trigger3 = Root,var(0) = [204,205]
trigger4 = Root,var(0) = [204,205]
trigger5 = Root,var(0) = 209
trigger6 = Root,var(0) = 1201
trigger7 = Root,var(0) = [2002,2003]
trigger8 = Root,var(0) = 3010
trigger9 = Root,var(0) = 3420
trigger10 = Root,var(0) = 3603
trigger11 = Root,var(0) = 3621
trigger12 = Root,var(0) = 3701
trigger13 = Root,var(0) = 3800
var(2) = 6

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 50
trigger2 = Root,var(0) = 2302
trigger3 = Root,var(0) = 3400
var(2) = 2

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 52
trigger2 = Root,var(0) = 200
trigger3 = Root,var(0) = 1022
trigger4 = Root,var(0) = 2001
trigger5 = Root,var(0) = 3402
trigger6 = Root,var(0) = [3503,3505]
trigger7 = Root,var(0) = 3608
trigger8 = Root,var(0) = 5010
trigger9 = Root,var(0) = 5060
trigger10 = Root,var(0) = 5091
var(2) = 11

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 53
trigger2 = Root,var(0) = 1020
trigger3 = Root,var(0) = 1010
trigger4 = Root,var(0) = 1031
trigger5 = Root,var(0) = 3612
trigger6 = Root,var(0) = 5030
trigger7 = Root,var(0) = 5041
var(2) = 9

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 57
trigger2 = Root,var(0) = 400
trigger3 = Root,var(0) = 2104
trigger4 = Root,var(0) = 3502
trigger5 = Root,var(0) = 3614
var(2) = 7

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 100
trigger2 = Root,var(0) = 1310
trigger3 = Root,var(0) = 2100
trigger4 = Root,var(0) = 2301
trigger5 = Root,var(0) = 3620
trigger6 = Root,var(0) = 5001
var(2) = -1

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 103
trigger2 = Root,var(0) = 302
trigger3 = Root,var(0) = 2101
trigger4 = Root,var(0) = 3604
var(2) = -3

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 202
trigger2 = Root,var(0) = 3501
trigger3 = Root,var(0) = [3617,3618]
var(2) = 1

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 203
trigger2 = Root,var(0) = 2005
trigger3 = Root,var(0) = 3615
var(2) = 14

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1300
var(2) = -6

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1000
trigger2 = Root,var(0) = 3602
trigger3 = Root,var(0) = [3623,3624]
trigger4 = Root,var(0) = 5042
trigger5 = Root,var(0) = 5070
var(2) = -5

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3605
var(2) = 23

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3609
trigger2 = Root,var(0) = 3616
var(2) = 16

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3610
var(2) = 19

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5000
var(2) = -9

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5040
var(2) = -12

[State 8701, VarSet]
type = VarSet
trigger1 = Root,var(0) = 9000
var(2) = 178

[State 8701, VarSet]
type = VarSet
trigger1 = 1
var(3) = 221 - var(2)

;---------------------------------------------------------
; MAX-ON表示(1P側)
;---------------------------------------------------------
[State 8701, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 1
trigger1 = Time < 28
anim = 8700
postype = left
pos = var(1),var(3)
ontop = 1
ownpal = 1
id = 8700
supermovetime = -1
pausemovetime = -1

;---------------------------------------------------------
; MAX-ON表示(2P側)
;---------------------------------------------------------
[State 8701, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 2
trigger1 = Time < 28
anim = 8701
postype = right
pos = -var(1),var(3)
ontop = 1
ownpal = 1
id = 8700
supermovetime = -1
pausemovetime = -1

;---------------------------------------------------------
; MAX-ON表示の変形
;---------------------------------------------------------
[State 8701, ModifyExplod]
type = ModifyExplod
trigger1 = Time < 7
ID = 8700
scale = 1.0,(Time+1)/7.0

[State 8701, ModifyExplod]
type = ModifyExplod
trigger1 = Time = [7,21]
ID = 8700
scale = 1.0,1.0

[State 8701, ModifyExplod]
type = ModifyExplod
trigger1 = Time = [22,27]
ID = 8700
scale = 1.0,1.0-(Time-21)/7.0

;---------------------------------------------------------
; MAXゲージ枠(1P側)
;---------------------------------------------------------
[state 8701, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 1
triggerall = NumExplod(8702) = 0
trigger1 = Time >= 28
anim = 8702
id = 8702
postype = left
bindtime = -1
pos = var(1),var(3)
sprpriority = 997
;ontop = 1
ownpal = 1
supermovetime = -1
pausemovetime = -1

;---------------------------------------------------------
; MAXゲージ枠(2P側)
;---------------------------------------------------------
[state 8701, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 2
triggerall = NumExplod(8702) = 0
trigger1 = Time >= 28
anim = 8703
id = 8702
postype = right
bindtime = -1
pos = -var(1),var(3)
sprpriority = 997
;ontop = 1
ownpal = 1
supermovetime = -1
pausemovetime = -1

;---------------------------------------------------------
; MAXゲージ枠の変形
;---------------------------------------------------------
[State 8701, ModifyExplod]
type = ModifyExplod
trigger1 = Time = [28,33]
ID = 8702
scale = 1.0,(Time-27)/7.0

[State 8701, ModifyExplod]
type = ModifyExplod
trigger1 = Time = 34
ID = 8702
scale = 1.0,1.0

;---------------------------------------------------------
; MAXゲージ(1P側)
;---------------------------------------------------------
[state 8701, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 1
triggerall = NumExplod(8704) = 0
trigger1 = Time >= 36
anim = 8704
id = 8704
postype = left
bindtime = -1
pos = var(1),var(3)
ontop = 1
ownpal = 1
supermovetime = -1
pausemovetime = -1
removetime = -1

;---------------------------------------------------------
; MAXゲージ(2P側)
;---------------------------------------------------------
[state 8701, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 2
triggerall = NumExplod(8704) = 0
trigger1 = Time >= 36
anim = 8704
id = 8704
postype = right
bindtime = -1
pos = -var(1),var(3)
ontop = 1
ownpal = 1
facing = -1
supermovetime = -1
pausemovetime = -1
removetime = -1

;---------------------------------------------------------
; MAXゲージの変形
;---------------------------------------------------------
[State 8701, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8704
scale = Root,fvar(0)/768,1.0

;---------------------------------------------------------
; MAX-ONの消去
;---------------------------------------------------------
[State 8702, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState != [2,3]
id = 8700

;---------------------------------------------------------
; MAXゲージの消去
;---------------------------------------------------------
[State 8702, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState != [2,3]
id = 8704

;---------------------------------------------------------
; MAXゲージ枠の消滅
;---------------------------------------------------------
[State 8701, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(0) <= 0
trigger2 = RoundState != [2,3]
id = 8702

;---------------------------------------------------------
; MAXゲージ終了へ移行
;---------------------------------------------------------
[State 8701, ChangeState]
type = ChangeState
trigger1 = Root,fvar(0) <= 0
value = 8702

;===============================================================
; MAXゲージ_終了
;===============================================================
[Statedef 8702]
type    = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1
anim = 9999

[state 8702, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8702, BindToRoot]
type = Null;BindToRoot
trigger1 = 1
time = 1
facing = 0
pos = 0,-20
ignorehitpause = 1

;---------------------------------------------------------
; MAX-ONの消去
;---------------------------------------------------------
[State 8702, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
trigger2 = Time = 0
trigger3 = RoundState != [2,3]
id = 8700

;---------------------------------------------------------
; MAXゲージの消去
;---------------------------------------------------------
[State 8702, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
trigger2 = Time = 0
trigger3 = RoundState != [2,3]
id = 8704

;---------------------------------------------------------
; MAXゲージ枠の消滅(1P側)
;---------------------------------------------------------
[State 8702, Explod]
type = Explod
triggerall = Root,TeamSide = 1
trigger1 = Time < 7
trigger2 = RoundState != [2,3]
anim = 8702
postype = left
pos = var(1),var(3)
ontop = 1
ownpal = 1
scale = 1.0,1.0-(Time+1.0)/7.0
id = 8702
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; MAXゲージ枠の消滅(2P側)
;---------------------------------------------------------
[State 8702, Explod]
type = Explod
triggerall = Root,TeamSide = 2
trigger1 = Time < 7
trigger2 = RoundState != [2,3]
anim = 8703
postype = right
pos = -var(1),var(3)
ontop = 1
ownpal = 1
scale = 1.0,1.0-(Time+1.0)/7.0
id = 8702
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; MAXゲージ枠の消去
;---------------------------------------------------------
[State 8702, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
trigger2 = RoundState != [2,3]
id = 8702

;---------------------------------------------------------
; MAXゲージ待機状態へ移行
;---------------------------------------------------------
[State 8702, ChangeState]
type = ChangeState
trigger1 = Time = 7
value = 8700


;*********************************************************************
; ガードクラッシュ用ヘルパー
;*********************************************************************
;===============================================================
; 通常時
;===============================================================
[Statedef 8710]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8710, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------------------------------------------
; 座標と向きを本体に合わせる
;---------------------------------------------------------
[State 8710, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
facing = 1
pos = 0,-25;0
ignorehitpause = 1

;---------------------------------------------------------
; ゲージ表示のX軸についての設定
;---------------------------------------------------------
[State 8710, VarSet]
type = VarSet
trigger1 = 1
var(0) = 0

[State 8710, VarSet]
type = VarSet
trigger1 = 1
var(1) = 117 + var(0)

;---------------------------------------------------------
; ゲージ表示のY軸についての設定
;---------------------------------------------------------
[State 8710, VarSet]
type = VarSet
trigger1 = 1
var(2) = 0

[State 8710, VarSet]
type = VarSet
trigger1 = Root,var(0) = 31
var(2) = 7

[State 8710, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2101
trigger2 = Root,var(0) = 3810
var(2) = 9

[State 8710, VarSet]
type = VarSet
trigger1 = 1
var(3) = 36 + var(2)

;---------------------------------------------------------
; ガードゲージの文字(1P側)
;---------------------------------------------------------
[State 8710, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 1
trigger1 = Time >= 0
anim = 8710
id = 8710
postype = right
bindtime = -1
pos = -var(1)-16,var(3)
sprpriority = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; ガードゲージの文字(2P側)
;---------------------------------------------------------
[State 8710, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 2
trigger1 = Time >= 0
anim = 8710
id = 8710
postype = left
bindtime = -1
pos = var(1)+16,var(3)
sprpriority = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; ガードゲージ_枠(1P側)
;---------------------------------------------------------
[State 8710, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 1
trigger1 = Time >= 0 && Root,var(14) <= 104
trigger2 = Root,var(14) > 104 && NumExplod(8712) = 0
anim = IfElse(Root,var(14) <= 104,8711,8712)
id = IfElse(Root,var(14) <= 104,8711,8712)
postype = right
bindtime = -1
pos = -var(1),var(3)
sprpriority = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
removetime = IfElse(Root,var(14) <= 104,1,-1)

;---------------------------------------------------------
; ガードゲージ_枠(2P側)
;---------------------------------------------------------
[State 8710, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 2
trigger1 = Time >= 0 && Root,var(14) <= 104
trigger2 = Root,var(14) > 104 && NumExplod(8712) = 0
anim = IfElse(Root,var(14) <= 104,8711,8712)
id = IfElse(Root,var(14) <= 104,8711,8712)
postype = left
bindtime = -1
pos = var(1),var(3)
sprpriority = -1
ownpal = 1
facing = -1
supermovetime = -1
pausemovetime = -1
removetime = IfElse(Root,var(14) <= 104,1,-1)

;---------------------------------------------------------
; ガードゲージ_内容(1P側)
;---------------------------------------------------------
[State 8710, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 1
trigger1 = Time >= 0
anim = 8720 + IfElse((Root,var(14)<131),Ceil(Root,var(14) / 2.32142857),55)
id = 8720
postype = right
bindtime = -1
pos = -var(1),var(3)
sprpriority = 0
ownpal = 1
scale = 1,1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; ガードゲージ_内容(2P側)
;---------------------------------------------------------
[State 8710, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 2
trigger1 = Time >= 0
anim = 8720 + IfElse((Root,var(14)<131),Ceil(Root,var(14) / 2.32142857),55)
id = 8720
postype = left
bindtime = -1
pos = var(1),var(3)
sprpriority = 0
ownpal = 1
facing = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; 表示の消去
;---------------------------------------------------------
[State 8710, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
trigger2 = Root,var(14) <= 104
ID = 8712

[State 8710, RemoveExplod]
type = RemoveExplod
triggerall = Root,var(14) > 130
trigger1 = NumEnemy
trigger1 = Enemy(0),StateNo = 9940
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),StateNo = 9940
trigger3 = NumEnemy
trigger3 = Enemy(0),StateNo = 9945
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),StateNo = 9945
ID = 8712

[State 8710, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
trigger2 = Root,var(14) > 104
ID = 8711

[State 8710, RemoveExplod]
type = RemoveExplod
triggerall = Root,NumTarget
triggerall = Root,var(14) > 130
trigger1 = NumEnemy
trigger1 = Enemy(0),StateNo = 9940
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),StateNo = 9940
trigger3 = NumEnemy
trigger3 = Enemy(0),StateNo = 9945
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),StateNo = 9945
ID = 8711

[State 8710, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
ID = 8710

[State 8710, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Alive = 0
ID = 8720

;---------------------------------------------------------
; ステート移行
;---------------------------------------------------------
; ガードクラッシュに移行
[state 8710, ChangeState]
type = ChangeState
triggerall = Root,NumTarget
triggerall = Root,var(14) > 130
trigger1 = NumEnemy
trigger1 = Enemy(0),StateNo = 9940
trigger2 = NumEnemy > 1
trigger2 = Enemy(1),StateNo = 9940
trigger3 = NumEnemy
trigger3 = Enemy(0),StateNo = 9945
trigger4 = NumEnemy > 1
trigger4 = Enemy(1),StateNo = 9945
value = 8711

;---------------------------------------------------------
; ガードクラッシュがミスした時にゲージを戻す処理
;---------------------------------------------------------
[state 8710, VarSet]
type = ParentVarSet
trigger1 = Root,var(14) > 130
var(14) = 130

;---------------------------------------------------------
; ヘルパーの消去
;---------------------------------------------------------
[State 8710, DestroySelf]
type = DestroySelf
trigger1 = Root,Alive = 0
trigger2 = Root,var(30) = 1

;===============================================================
; ガードクラッシュ
;===============================================================
[Statedef 8711]
type = A
movetype = I;A
physics = N
anim = 9999;8714
velset = 0,0
ctrl = 0

[state 8711, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

; ガードゲージを0にする
[State 8710, ParentVarSet]
type = ParentVarSet
trigger1 = Time = 0
var(14) = 131

;---------------------------------------------------------
; 座標と向きを本体に合わせる
;---------------------------------------------------------
[State 8711, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
facing = 1
pos = 0,-25;0
ignorehitpause = 1

;---------------------------------------------------------
; ガードクラッシュが連続で起きた場合のエフェクト消去(一応)
;---------------------------------------------------------
[state 8711, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 0
ID = 8713

;---------------------------------------------------------
; クラッシュ効果音を再生
;---------------------------------------------------------
[State 8711, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 8710,0
abspan = 0
persistent = 0

;---------------------------------------------------------
; 攻撃状態を解除
;---------------------------------------------------------
[State 8711, StateTypeSet]
type = Null;StateTypeSet
trigger1 = Time = 1
movetype = I

;---------------------------------------------------------
; ガードクラッシュメッセージ用ヘルパーの呼び出し
;---------------------------------------------------------
[State 8711, Helper]
type = Helper
trigger1 = Time = 0
name = "Guard Crash Message"
StateNo = 8410
id = 8410
pos = 0, 9999
postype = p1
ignorehitpause = 1
ownpal = 1
supermovetime = 99999999999999
pausemovetime = 99999999999999
persistent = 0

;---------------------------------------------------------
; ガードゲージの文字(1P側)
;---------------------------------------------------------
[State 8711, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 1
trigger1 = Time >= 0
anim = 8710
id = 8710
postype = right
bindtime = -1
pos = -var(1)-16,var(3)
sprpriority = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; ガードゲージの文字(2P側)
;---------------------------------------------------------
[State 8711, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 2
trigger1 = Time >= 0
anim = 8710
id = 8710
postype = left
bindtime = -1
pos = var(1)+16,var(3)
sprpriority = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; ガードゲージ_クラッシュ(1P側)
;---------------------------------------------------------
[State 8711, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 1
trigger1 = Time = 0
anim = 8713
id = 8713
postype = right
bindtime = -1
pos = -var(1),var(3)
sprpriority = -1
ownpal = 1
supermovetime = -1
pausemovetime = -1

;---------------------------------------------------------
; ガードゲージ_クラッシュ(2P側)
;---------------------------------------------------------
[State 8711, Explod]
type = Explod
triggerall = RoundState = [2,3]
trigger1 = Root,TeamSide = 2
trigger1 = Time = 0
anim = 8713
id = 8713
postype = left
bindtime = -1
pos = var(1),var(3)
sprpriority = -1
ownpal = 1
facing = -1
supermovetime = -1
pausemovetime = -1

;---------------------------------------------------------
; ガードゲージ_内容(1P側)
;---------------------------------------------------------
[State 8711, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 1
trigger1 = Time = 0
trigger2 = Time >= 27
anim = IfElse(Time = 0,8720,8720+IfElse((Root,var(14)<131),Ceil(Root,var(14) / 2.32142857),55))
id = 8720
postype = right
bindtime = -1
pos = -var(1),var(3)
sprpriority = 0
ownpal = 1
scale = 1,1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; ガードゲージ_内容(2P側)
;---------------------------------------------------------
[State 8711, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = Root,TeamSide = 2
trigger1 = Time = 0
trigger2 = Time >= 27
anim = IfElse(Time = 0,8720,8720+IfElse((Root,var(14)<131),Ceil(Root,var(14) / 2.32142857),55))
id = 8720
postype = left
bindtime = -1
pos = var(1),var(3)
sprpriority = 0
ownpal = 1
facing = -1
scale = 1,1
supermovetime = -1
pausemovetime = -1
removetime = 1

;---------------------------------------------------------
; 透過処理
;---------------------------------------------------------
; ガードゲージ_枠
[State 8711, ModifyExplod]
type = ModifyExplod
trigger1 = Time >= 26 && Time <= 28
ID = 8713
trans = AddAlpha
alpha = 106,150

[State 8711, ModifyExplod]
type = ModifyExplod
trigger1 = Time >= 29 && Time <= 31
ID = 8713
trans = AddAlpha
alpha = 126 + (Time - 29) * 20,130 - (Time - 29) * 20

[State 8711, ModifyExplod]
type = ModifyExplod
trigger1 = Time >= 32 && Time <= 33
ID = 8713
trans = AddAlpha
alpha = 186,70

; ガードゲージ_内容
[State 8711, ModifyExplod]
type = ModifyExplod
trigger1 = Time >= 27 && Time <= 28
ID = 8720
trans = AddAlpha
alpha = 106,150

[State 8711, ModifyExplod]
type = ModifyExplod
trigger1 = Time >= 29 && Time <= 31
ID = 8720
trans = AddAlpha
alpha = 126 + (Time - 29) * 20,130 - (Time - 29) * 20

[State 8711, ModifyExplod]
type = ModifyExplod
trigger1 = Time >= 32 && Time <= 33
ID = 8720
trans = AddAlpha
alpha = 186,70

;---------------------------------------------------------
; ステート移行
;---------------------------------------------------------
; 通常時に移行
[state 8711, ChangeState]
type = ChangeState
trigger1 = Time >= 34
value = 8710

; 連続でガードクラッシュが発生したときにガードクラッシュに移行(一応)
[state 8711, ChangeState]
type = ChangeState
trigger1 = Time > 1
trigger1 = Root,var(14) > 130
value = 8711

;===============================================================
; ガードクラッシュメッセージヘルパー
;===============================================================
[Statedef 8410]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0

;---------------------------------------------------------
; ガードクラッシュメッセージのX軸を格納
;---------------------------------------------------------
[State 8410, VarSet]
type = VarSet
trigger1 = Time = 0
var(0) = -52

[State 8410, VarAdd]
type = VarAdd
trigger1 = Time < 10
var(0) = 10

[State 8410, VarAdd]
type = VarAdd
trigger1 = Time > 59
var(0) = -10

;---------------------------------------------------------
; ガードクラッシュメッセージの表示(1P側)
;---------------------------------------------------------
[State 8410, Explod]
type = Explod
triggerall = Root,TeamSide = 1
trigger1 = Time < 10
trigger2 = Time > 59
anim = 8410
id = 8410
ontop = 1
postype = left
pos = var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

[State 8410, Explod]
type = Explod
triggerall = Root,TeamSide = 1
trigger1 = Time = 10
anim = 8411
id = 8410
ontop = 1
postype = left
pos = var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

;---------------------------------------------------------
; ガードクラッシュメッセージの表示(2P側)
;---------------------------------------------------------
[State 8410, Explod]
type = Explod
triggerall = Root,TeamSide = 2
trigger1 = Time < 10
trigger2 = Time > 59
anim = 8410
id = 8410
ontop = 1
postype = right
pos = -var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

[State 8410, Explod]
type = Explod
triggerall = Root,TeamSide = 2
trigger1 = Time = 10
anim = 8411
id = 8410
ontop = 1
postype = right
pos = -var(0),88
bindtime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
scale = .5,.5

;---------------------------------------------------------
; ガードクラッシュメッセージ用ヘルパーを消す
;---------------------------------------------------------
[State 8410, DestroySelf]
type = DestroySelf
trigger1 = Time = 70


;*********************************************************************
; 02UMのパワーゲージ表示ヘルパー
;*********************************************************************
[Statedef 8780]
type = A
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 10

[state 8780, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8780, BindToRoot]
type = Null;BindToRoot
trigger1 = 1
time = 1
facing = 0
pos = 0,-30
ignorehitpause = 1

;===============================================================
; パワーゲージ表示の設定
;===============================================================
;---------------------------------------------------------
; X軸についての設定
;---------------------------------------------------------
[State 8780, VarSet]
type = VarSet
trigger1 = 1
var(0) = 0

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [0,1]
trigger2 = Root,var(0) = [12,14]
trigger3 = Root,var(0) = 20
trigger4 = Root,var(0) = 1010
trigger5 = Root,var(0) = [1200,1201]
trigger6 = Root,var(0) = 1310
trigger7 = Root,var(0) = 2000
trigger8 = Root,var(0) = [2004,2005]
trigger9 = Root,var(0) = 2302
trigger10 = Root,var(0) = [3500,3502]
trigger11 = Root,var(0) = 3604
trigger12 = Root,var(0) = 3607
trigger13 = Root,var(0) = 3616
trigger14 = Root,var(0) = 3623
trigger15 = Root,var(0) = [3700,3701]
trigger16 = Root,var(0) = 5000
trigger17 = Root,var(0) = [5090,5091]
trigger18 = Root,var(0) = 9000
var(0) = -20

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3
trigger2 = Root,var(0) = 16
var(0) = 57

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5
trigger2 = Root,var(0) = 302
trigger3 = Root,var(0) = 2101
trigger4 = Root,var(0) = 3612
var(0) = -6

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 15
trigger2 = Root,var(0) = 2100
trigger3 = Root,var(0) = 2102
var(0) = -16

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 42
trigger2 = Root,var(0) = 202
var(0) = 3

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 44
trigger2 = Root,var(0) = 3606
trigger3 = Root,var(0) = 3613
var(0) = 9

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 57
trigger2 = Root,var(0) = 3619
var(0) = 7

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 58
trigger2 = Root,var(0) = 3608
var(0) = -8

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [100,101]
trigger2 = Root,var(0) = 3411
trigger3 = Root,var(0) = 3600
trigger4 = Root,var(0) = 3624
var(0) = 64

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 103
trigger2 = Root,var(0) = 400
var(0) = 53

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 200
trigger2 = Root,var(0) = 3400
var(0) = 23

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 201
var(0) = 35

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 203
trigger2 = Root,var(0) = 205
trigger3 = Root,var(0) = 209
trigger4 = Root,var(0) = 1022
trigger5 = Root,var(0) = 5050
var(0) = 20

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 204
trigger2 = Root,var(0) = 3410
trigger3 = Root,var(0) = 5010
var(0) = 44

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 206
trigger2 = Root,var(0) = 3601
trigger3 = Root,var(0) = 5030
var(0) = 13

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 207
trigger2 = Root,var(0) = 3609
trigger3 = Root,var(0) = 3900
var(0) = 38

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 208
trigger2 = Root,var(0) = 1021
var(0) = 29

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 210
trigger2 = Root,var(0) = 1032
var(0) = 30

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [300,301]
var(0) = 31

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 401
trigger2 = Root,var(0) = 5070
var(0) = 63

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1000
trigger2 = Root,var(0) = 3620
var(0) = 48

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1020
trigger2 = Root,var(0) = 3605
trigger3 = Root,var(0) = 3610
var(0) = 18

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1030
trigger2 = Root,var(0) = 2003
var(0) = 49

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1031
trigger2 = Root,var(0) = 1100
trigger3 = Root,var(0) = 3402
var(0) = 27

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1033
var(0) = 54

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1300
var(0) = -14

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2001
var(0) = 60

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2002
trigger2 = Root,var(0) = 3602
var(0) = 52

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [2103,2104]
trigger2 = Root,var(0) = 3000
var(0) = 66

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2200
trigger2 = Root,var(0) = 3420
trigger3 = Root,var(0) = 3614
trigger4 = Root,var(0) = 3617
var(0) = 5

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [2300,2301]
var(0) = 73

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3200
var(0) = 72

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3300
trigger2 = Root,var(0) = 3401
trigger3 = Root,var(0) = 3810
trigger4 = Root,var(0) = 5080
var(0) = 10

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [3503,3505]
var(0) = 40

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3603
var(0) = -10

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3611
var(0) = 19

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3615
var(0) = 6

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3618
var(0) = -17

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3621
var(0) = 43

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3622
var(0) = 33

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3650
var(0) = 15

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3651
var(0) = 41

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3800
var(0) = 21

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5001
var(0) = 61

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5002
var(0) = 36

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5020
var(0) = 75

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5040
var(0) = 80

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5041
trigger2 = Root,var(0) = 5042
var(0) = 70

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5060
var(0) = 8

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5100
var(0) = 14

[State 8780, VarSet]
type = VarSet
trigger1 = 1
var(1) = 36 + var(0)

;---------------------------------------------------------
; Y軸についての設定
;---------------------------------------------------------
[State 8780, VarSet]
type = VarSet
trigger1 = 1
var(2) = 0

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 0
trigger2 = Root,var(0) = 14
trigger3 = Root,var(0) = 101
trigger4 = Root,var(0) = 1000
trigger5 = Root,var(0) = 1031
trigger6 = Root,var(0) = 1033
trigger7 = Root,var(0) = 3602
trigger8 = Root,var(0) = 3611
trigger9 = Root,var(0) = 3619
trigger10 = Root,var(0) = [3623,3624]
trigger11 = Root,var(0) = 3800
trigger12 = Root,var(0) = 5000
trigger13 = Root,var(0) = 5042
trigger14 = Root,var(0) = 5070
trigger15 = Root,var(0) = 5100
var(2) = -6

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1
trigger2 = Root,var(0) = 206
trigger3 = Root,var(0) = 1100
trigger4 = Root,var(0) = [3410,3411]
trigger5 = Root,var(0) = 3622
trigger6 = Root,var(0) = 3650
var(2) = 14

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [2,3]
trigger2 = Root,var(0) = [15,16]
trigger3 = Root,var(0) = 208
var(2) = -5

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 4
trigger2 = Root,var(0) = 102
trigger3 = Root,var(0) = 1020
trigger4 = Root,var(0) = 1310
trigger5 = Root,var(0) = 2100
trigger6 = Root,var(0) = 3621
trigger7 = Root,var(0) = 3701
trigger8 = Root,var(0) = 5030
var(2) = 8

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5
trigger2 = Root,var(0) = 302
trigger3 = Root,var(0) = 2101
var(2) = -3

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 12
trigger2 = Root,var(0) = 2005
trigger3 = Root,var(0) = 3601
var(2) = 17

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 13
trigger2 = Root,var(0) = 58
trigger3 = Root,var(0) = 3651
var(2) = 12

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 20
trigger2 = Root,var(0) = 3606
trigger3 = Root,var(0) = 3610
trigger4 = Root,var(0) = 3700
var(2) = 21

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 44
trigger2 = Root,var(0) = 201
trigger3 = Root,var(0) = 210
trigger4 = Root,var(0) = 3400
trigger5 = Root,var(0) = 5040
var(2) = 4

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 57
var(2) = 7

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 100
trigger2 = Root,var(0) = [2103,2104]
trigger3 = Root,var(0) = 3401
trigger4 = Root,var(0) = 5001
var(2) = -2

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 103
trigger2 = Root,var(0) = [2300,2301]
var(2) = -4

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 200
trigger2 = Root,var(0) = 202
trigger3 = Root,var(0) = 1022
trigger4 = Root,var(0) = 2001
trigger5 = Root,var(0) = 3501
trigger6 = Root,var(0) = [3503,3505]
var(2) = 10

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 203
trigger2 = Root,var(0) = 3608
trigger3 = Root,var(0) = 5002
trigger4 = Root,var(0) = 5010
trigger5 = Root,var(0) = 5090
var(2) = 13

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = [204,205]
trigger2 = Root,var(0) = 300
trigger3 = Root,var(0) = 400
var(2) = 5

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 209
trigger2 = Root,var(0) = 401
trigger3 = Root,var(0) = [2002,2004]
trigger4 = Root,var(0) = 2102
trigger5 = Root,var(0) = 3612
trigger6 = Root,var(0) = 5020
var(2) = 9

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1010
trigger2 = Root,var(0) = 3609
trigger3 = Root,var(0) = 3616
var(2) = 18

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1032
trigger2 = Root,var(0) = 2302
var(2) = 11

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1200
var(2) = 24

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1201
trigger2 = Root,var(0) = 3420
trigger3 = Root,var(0) = 3600
trigger4 = Root,var(0) = 5050
var(2) = 15

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 1300
trigger2 = Root,var(0) = 3607
trigger3 = Root,var(0) = [3617,3618]
var(2) = 3

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2000
trigger2 = Root,var(0) = 3010
trigger3 = Root,var(0) = 3604
trigger4 = Root,var(0) = 3613
var(2) = 6

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 2200
trigger2 = Root,var(0) = 3300
trigger3 = Root,var(0) = 3810
var(2) = -7

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3402
var(2) = 2

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3500
var(2) = 19

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3502
trigger2 = Root,var(0) = 3614
var(2) = 16

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3603
trigger2 = Root,var(0) = 5060
trigger3 = Root,var(0) = 5091
var(2) = 20

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3605
var(2) = 25

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3615
trigger2 = Root,var(0) = 3900
var(2) = 23

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 3620
var(2) = 1

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 5080
var(2) = 22

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) = 9000
var(2) = 180

[State 8780, VarSet]
type = VarSet
trigger1 = 1
var(3) = 230 - var(2)

;---------------------------------------------------------
; スケールの設定
;---------------------------------------------------------
[State 8780, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = 1

[State 8780, VarSet]
type = VarSet
trigger1 = Root,var(0) < 30 && Root,var(0) != [4,5]
trigger2 = Root,var(0) = 42
trigger3 = Root,var(0) = 44
trigger4 = Root,var(0) = 58
trigger5 = Root,var(0) > 59 && Root,var(0) < 9999
trigger5 = Root,var(0) != 102
trigger5 = Root,var(0) != 207
trigger5 = Root,var(0) != [301,302]
trigger5 = Root,var(0) != 1030
trigger5 = Root,var(0) != 2101
trigger5 = Root,var(0) != 3010
trigger5 = Root,var(0) != 3401
trigger5 = Root,var(0) != 3612
fvar(0) = .5

;===============================================================
; パワーゲージの枠を表示
;===============================================================
;---------------------------------------------------------
; パワーゲージの枠を表示(1P側)
;---------------------------------------------------------
; パワーゲージの枠
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
triggerall = NumExplod(8780) = 0
trigger1 = Time >= 0
anim = 8780
id = 8780
postype = left
bindtime = -1
pos = var(1),var(3)
removetime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
sprpriority = 996
;ontop = 1
scale = fvar(0),fvar(0)

; パワーゲージの枠_下地
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
triggerall = NumExplod(8781) = 0
trigger1 = Time >= 0
anim = 8781
id = 8781
postype = left
bindtime = -1
pos = var(1),var(3)
removetime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
sprpriority = 997
;ontop = 1
trans = addalpha
alpha = 250,130
scale = fvar(0),fvar(0)

;---------------------------------------------------------
; パワーゲージの枠を表示(2P側)
;---------------------------------------------------------
; パワーゲージの枠
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
triggerall = NumExplod(8780) = 0
trigger1 = Time >= 0
anim = 8780
id = 8780
postype = right
bindtime = -1
pos = -var(1),var(3)
removetime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
facing = -1
sprpriority = 996
;ontop = 1
scale = fvar(0),fvar(0)

; パワーゲージの枠_下地
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
triggerall = NumExplod(8781) = 0
trigger1 = Time >= 0
anim = 8781
id = 8781
postype = right
bindtime = -1
pos = -var(1),var(3)
removetime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
facing = -1
sprpriority = 997
;ontop = 1
trans = addalpha
alpha = 250,130
scale = fvar(0),fvar(0)

;===============================================================
; パワーゲージのストック数を表示
;===============================================================
;---------------------------------------------------------
; パワーゲージのストック数を表示(1P側)
;---------------------------------------------------------
; ストック0
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Time >= 0
trigger1 = Power >= 0
trigger1 = Power < PowerMax/5
anim = 8782
id = 8782
postype = left
bindtime = -1
pos = var(1)-Ceil(19*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック1
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Time >= 0
trigger1 = Power >= PowerMax/5
trigger1 = Power < PowerMax*2/5
anim = 8783
id = 8783
postype = left
bindtime = -1
pos = var(1)-Ceil(19*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック2
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Time >= 0
trigger1 = Power >= PowerMax*2/5
trigger1 = Power < PowerMax*3/5
anim = 8784
id = 8784
postype = left
bindtime = -1
pos = var(1)-Ceil(19*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック3
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Time >= 0
trigger1 = Power >= PowerMax*3/5
trigger1 = Power < PowerMax*4/5
anim = 8785
id = 8785
postype = left
bindtime = -1
pos = var(1)-Ceil(19*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック4
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Time >= 0
trigger1 = Power >= PowerMax*4/5
trigger1 = Power < PowerMax
anim = 8786
id = 8786
postype = left
bindtime = -1
pos = var(1)-Ceil(19*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック5
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Time >= 0
trigger1 = Power >= PowerMax
anim = 8787
id = 8787
postype = left
bindtime = -1
pos = var(1)-Ceil(19*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

;---------------------------------------------------------
; パワーゲージのストック数を表示(2P側)
;---------------------------------------------------------
; ストック0
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Time >= 0
trigger1 = Power >= 0
trigger1 = Power < PowerMax/5
anim = 8782
id = 8782
postype = right
bindtime = -1
pos = -var(1)+Ceil(20*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック1
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Time >= 0
trigger1 = Power >= PowerMax/5
trigger1 = Power < PowerMax*2/5
anim = 8783
id = 8783
postype = right
bindtime = -1
pos = -var(1)+Ceil(20*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック2
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Time >= 0
trigger1 = Power >= PowerMax*2/5
trigger1 = Power < PowerMax*3/5
anim = 8784
id = 8784
postype = right
bindtime = -1
pos = -var(1)+Ceil(20*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック3
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Time >= 0
trigger1 = Power >= PowerMax*3/5
trigger1 = Power < PowerMax*4/5
anim = 8785
id = 8785
postype = right
bindtime = -1
pos = -var(1)+Ceil(20*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック4
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Time >= 0
trigger1 = Power >= PowerMax*4/5
trigger1 = Power < PowerMax
anim = 8786
id = 8786
postype = right
bindtime = -1
pos = -var(1)+Ceil(20*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; ストック5
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Time >= 0
trigger1 = Power >= PowerMax
anim = 8787
id = 8787
postype = right
bindtime = -1
pos = -var(1)+Ceil(20*fvar(0)),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

;===============================================================
; パワーゲージの内容を表示
;===============================================================
;---------------------------------------------------------
; パワーゲージの内容を表示(1P側)
;---------------------------------------------------------
; パワーゲージのストックが0〜4の時
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
trigger1 = Power < PowerMax
anim = 8790 + floor(Power*(5/(PowerMax*0.001))*0.001)
id = 8790
postype = left
bindtime = -1
pos = var(1),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; パワーゲージがMAXの時
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 1
triggerall = NumExplod(8795) = 0
trigger1 = Power >= PowerMax
anim = 8795
id = 8795
postype = left
bindtime = -1
pos = var(1),var(3)
removetime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

;---------------------------------------------------------
; パワーゲージの内容を表示(2P側)
;---------------------------------------------------------
; パワーゲージのストックが0〜4の時
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
trigger1 = Power < PowerMax
anim = 8790 + floor(Power*(5/(PowerMax*0.001))*0.001)
id = 8790
postype = right
bindtime = -1
pos = -var(1),var(3)
removetime = 1
supermovetime = -1
pausemovetime = -1
ownpal = 1
facing = -1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

; パワーゲージがMAXの時
[State 8780, Explod]
type = Explod
triggerall = RoundState = [2,3]
triggerall = TeamSide = 2
triggerall = NumExplod(8795) = 0
trigger1 = Power >= PowerMax
anim = 8796
id = 8795
postype = right
bindtime = -1
pos = -var(1),var(3)
removetime = -1
supermovetime = -1
pausemovetime = -1
ownpal = 1
facing = -1
;sprpriority = 998
ontop = 1
scale = fvar(0),fvar(0)

;---------------------------------------------------------
; パワーゲージの内容の表示を変形
;---------------------------------------------------------
[State 8780, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8790
scale = ((Power*(5/(PowerMax*0.001))*0.001)-floor(Power*(5/(PowerMax*0.001))*0.001))*fvar(0),1*fvar(0)

;===============================================================
; 表示の消去
;===============================================================
;---------------------------------------------------------
; パワーゲージの枠の表示の消去
;---------------------------------------------------------
[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
id = 8780

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
id = 8781

;---------------------------------------------------------
; パワーゲージのストック数表示の消去
;---------------------------------------------------------
[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power >= PowerMax/5
id = 8782

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power >= PowerMax*2/5
trigger4 = Power < PowerMax/5
id = 8783

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Power >= PowerMax*3/5
trigger3 = Power < PowerMax*2/5
id = 8784

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power >= PowerMax*4/5
trigger4 = Power < PowerMax*3/5
id = 8785

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power >= PowerMax
trigger4 = Power < PowerMax*4/5
id = 8786

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power < PowerMax
id = 8787

;---------------------------------------------------------
; パワーゲージの内容の表示を消去
;---------------------------------------------------------
[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power = PowerMax/5
trigger4 = Power = PowerMax*2/5
trigger5 = Power = PowerMax*3/5
trigger6 = Power = PowerMax*4/5
trigger7 = Power = PowerMax
id = 8790

[State 8780, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 2 || RoundState = 4
trigger2 = Root,Alive = 0
trigger3 = Power < PowerMax
id = 8795

;---------------------------------------------------------
; 本体がKOされたらヘルパーを消去
;---------------------------------------------------------
[State 8780, DestroySelf]
type = DestroySelf
trigger1 = Root,Alive = 0

;###########################################################################
; システム関連
;###########################################################################

;*********************************************************************
; コマンド認識用ヘルパー
;*********************************************************************
[Statedef 8990]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9999

; 間違いで本体が来たら立ちへ移行
[State 8990, SelfState]
type = SelfState
trigger1 = !ishelper
value = 0

; 不可視化
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2= noshadow

; 無敵化
[State 8990, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

; X軸を本体に合わせる
[State 8990, PosSet]
type = PosSet
trigger1 = 1
x = Root,Pos X
y = Root,Pos Y - 5

; 画面端の侵入不可範囲を設定
[State 8990, Width]
type = Width
trigger1 = 1
edge = 20,0

; 向きの設定
[State 8990, Turn]
type = Turn
trigger1 = P2Dist X < 0
ignorehitpause = 1

;===============================================================
; 先行入力受付時間を設定
;===============================================================
;---------------------------------------------------------
; 地上行動の先行入力受付時間を設定
;---------------------------------------------------------
; 通常攻撃，特殊攻撃，その他の先行入力受付時間
[State 8990, VarSet]
type = VarSet
trigger1 = 1
var(2) = 6	; 数値を大きくすることでコマンド先行入力の受付時間が延びます。(1〜)

; 必殺技の先行入力受付時間
[State 8990, VarSet]
type = VarSet
trigger1 = 1
var(3) = 6	; 数値を大きくすることでコマンド先行入力の受付時間が延びます。(1〜)

;---------------------------------------------------------
; 空中行動の先行入力受付時間を設定
;---------------------------------------------------------
; 通常攻撃，特殊攻撃，その他の先行入力受付時間
[State 8990, VarSet]
type = VarSet
trigger1 = 1
var(12) = 6	; 数値を大きくすることでコマンド先行入力の受付時間が延びます。(1〜)

; 必殺技の先行入力受付時間
[State 8990, VarSet]
type = VarSet
trigger1 = 1
var(13) = 6	; 数値を大きくすることでコマンド先行入力の受付時間が延びます。(1〜)

;===============================================================
; 先行入力受付時間の処理
;===============================================================
;---------------------------------------------------------
; 地上行動の先行入力
;---------------------------------------------------------
; 地上行動の先行入力受付時間を減少
[State 8990, VarAdd]
type = VarAdd
trigger1 = var(1) > 0
trigger1 = Root,HitPauseTime = 0
var(1) = -1

;---------------------------------------------------------
; 空中行動の先行入力
;---------------------------------------------------------
; 空中行動の先行入力受付時間を減少
[State 8990, VarAdd]
type     = VarAdd
trigger1 = var(11) > 0
trigger1 = Root,HitPauseTime = 0
var(11) = -1

;===============================================================
; stupaさんの「いっしょにとれーにんぐ」を判定
;===============================================================
[State 8990, VarSet]
type = VarSet
trigger1 = 1
var(20) = 0

[State 8990, VarSet]
type = VarSet
trigger1 = NumEnemy
trigger1 = Enemy(0),AuthorName="stupa"
trigger1 = Enemy(0),Name="Training"
trigger2 = NumEnemy > 1
trigger2 = Enemy(0),AuthorName="stupa"
trigger2 = Enemy(0),Name="Training"
trigger3 = NumEnemy > 1
trigger3 = Enemy(1),AuthorName="stupa"
trigger3 = Enemy(1),Name="Training"
var(20) = 1

;===============================================================
; 一部の攻撃のfall.recovertime設定用
;===============================================================
; 基本重力加速度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = 0.6
ignorehitpause = 1

; Simul時に近くの相手を判定する為の処理
[State 8990, VarSet]
type = VarSet
trigger1 = NumEnemy > 1
trigger1 = !Enemy(1),IsHelper
var(21) = (!Enemy,Alive||(EnemyNear,Alive&&EnemyNear,ID!=Enemy,ID))

;---------------------------------------------------------
; 高度を格納
;---------------------------------------------------------
; 吹っ飛ばし攻撃(99ver)の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = 300
var(22) = 129+25
ignorehitpause = 1

; ウィップショットの高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = [310,313]
trigger2 = Root,StateNo = [315,317]
var(22) = 53+25
ignorehitpause = 1

; 吹っ飛ばし攻撃(00〜XIver)の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = 500
var(22) = 53+25
ignorehitpause = 1

; ガードキャンセル吹っ飛ばし攻撃の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = 930
var(22) = 53+25
ignorehitpause = 1

; ブーメラン・ショット”コード：SC”_一段目の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = [1000,1001]
trigger1 = Root,AnimElemTime(6) < 0
var(22) = 46+25
ignorehitpause = 1

; アサシン・ストライク”コード：BB”_上昇部分の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = [1100,1130]
trigger1 = Root,AnimElemTime(12) < 0
var(22) = 49+25
ignorehitpause = 1

; フック・ショット”コード：風”の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = [1200,1201]
var(22) = 53+25
ignorehitpause = 1

; ストリングス・ショット・タイプA〜Cの一段目の高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = 1301
trigger1 = Root,AnimElemTime(6) < 0
trigger2 = Root,StateNo = 1311
trigger2 = Root,AnimElemTime(5) < 0
trigger3 = Root,StateNo = 1321
trigger3 = Root,AnimElemTime(5) < 0
var(22) = 42+25
ignorehitpause = 1

; レッドウィップ・ジェノサイド_フィニッシュの高度を格納
[State 8990, VarSet]
type = VarSet
trigger1 = Root,StateNo = 3300
trigger1 = Root,AnimElemTime(6) < 0
var(22) = 72
ignorehitpause = 1

;---------------------------------------------------------
; 相手の地面落下までの時間を格納
;---------------------------------------------------------
[State 8990, VarSet]
type = VarSet
trigger1 = NumEnemy
trigger1 = (var(22)-Enemy(var(21)),Pos Y) > 0
var(23) = Ceil(((((2*fvar(0)*(var(22)-Enemy(var(21)),Pos Y))**0.5)+((2*fvar(0)*var(22))**0.5))/fvar(0))-0.4)
ignorehitpause = 1

;===============================================================
; 通常攻撃，特殊攻撃，その他の先行入力受付時間を格納
;===============================================================
;---------------------------------------------------------
; 基本動作
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
; ダッシュ
trigger1 = Command = "FF"
trigger1 = var(0) := 100
trigger1 = var(1) := var(2)
; バックステップ
trigger2 = Command = "BB"
trigger2 = var(0) := 105
trigger2 = var(1) := var(2)
ignorehitpause = 1

;---------------------------------------------------------
; 立ち通常攻撃
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command != "holddown"
; 立ち弱パンチ
trigger1 = Command = "x"
trigger1 = var(0) := 200
trigger1 = var(1) := var(2)
; 立ち弱キック
trigger2 = Command = "a"
trigger2 = var(0) := 230
trigger2 = var(1) := var(2)
trigger3 = Command = "ay"
trigger3 = Root,Power < Root,PowerMax/5 || Root,var(6)
trigger3 = var(0) := 230
trigger3 = var(1) := var(2)
; 立ち強パンチ
trigger4 = Command = "y"
trigger4 = var(0) != 800
trigger4 = var(0) := 210
trigger4 = var(1) := var(2)
; 立ち強キック
trigger5 = Command = "b"
trigger5 = var(0) != 810
trigger5 = var(0) := 240
trigger5 = var(1) := var(2)
ignorehitpause = 1

;---------------------------------------------------------
; しゃがみ通常攻撃
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "holddown"
; しゃがみ弱パンチ
trigger1 = Command = "x"
trigger1 = var(0) := 400
trigger1 = var(1) := var(2)
; しゃがみ弱キック
trigger2 = Command = "a"
trigger2 = var(0) := 430
trigger2 = var(1) := var(2)
trigger3 = Command = "ay"
trigger3 = Root,Power < Root,PowerMax/5 || Root,var(6)
trigger3 = var(0) := 430
trigger3 = var(1) := var(2)
; しゃがみ強パンチ
trigger4 = Command = "y"
trigger4 = var(0) := 410
trigger4 = var(1) := var(2)
; しゃがみ強キック
trigger5 = Command = "b"
trigger5 = var(0) := 440
trigger5 = var(1) := var(2)
ignorehitpause = 1

;---------------------------------------------------------
; ジャンプ通常攻撃
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
; ジャンプ弱パンチ
trigger1 = Command = "x"
trigger1 = var(10) := 600
trigger1 = var(11) := var(12)
; ジャンプ弱キック
trigger2 = Command = "a"
trigger2 = var(10) := 630
trigger2 = var(11) := var(12)
; ジャンプ強パンチ
trigger3 = Command = "y"
trigger3 = var(10) := 610
trigger3 = var(11) := var(12)
; ジャンプ強キック
trigger4 = Command = "b"
trigger4 = var(10) := 640
trigger4 = var(11) := var(12)
ignorehitpause = 1

;---------------------------------------------------------
; 特殊技
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command != "a"
; ウィップショット（→＋X）
trigger1 = Command = "fwd_x"
trigger1 = var(0) := 310
trigger1 = var(1) := var(2)
; 吹っ飛ばし攻撃(99ver)
trigger2 = Command != "x"
trigger2 = (Command = "by" || Command = "z") && Command != "holddown"
trigger2 = var(0) := 300
trigger2 = var(1) := var(2)
; 吹っ飛ばし攻撃(00〜XIver)
trigger3 = Command != "x"
trigger3 = (Command = "by" || Command = "z") && Command = "holddown"
trigger3 = var(0) := 500
trigger3 = var(1) := var(2)
ignorehitpause = 1

; スパイラルピック
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
trigger1 = Command != "x"
trigger1 = Command != "a"
trigger1 = Command = "by" || Command = "z"
trigger1 = var(10) := 700
trigger1 = var(11) := var(12)
ignorehitpause = 1

;---------------------------------------------------------
; 通常投げ
;---------------------------------------------------------
; ツェット（Ｋ通常投げ）
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command != "y"
triggerall = Root,StateNo != 100
triggerall = Command != "Alpha_b"
triggerall = Command != "Sonic Slaughter(Code : DP)_b"
triggerall = Command != "Red Whip Genocide_b"
triggerall = Command != "Super Black Hawk"
trigger1 = Command = "fwd_b" && P2BodyDist X < 8
trigger1 = var(0) := 810
trigger1 = var(1) := var(2)
trigger2 = Command = "back_b" && P2BodyDist X < 20
trigger2 = var(0) := 810
trigger2 = var(1) := var(2)
ignorehitpause = 1

; ツェット（Ｐ通常投げ）
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command != "a"
triggerall = Command != "b"
triggerall = Root,StateNo != 100
triggerall = Command != "Boomerang Shot (Code : SC)_y"
triggerall = Command != "Strength Shot . Type C (Code: Victory)"
triggerall = Command != "Sonic Slaughter(Code : KW)_y"
triggerall = Command != "Forbidden Engage(Code : MC)_y"
triggerall = Command != "Sonic Slaughter(Code : KW)_MAX"
triggerall = Command != "Whip's whip!?"
trigger1 = Command = "fwd_y" && P2BodyDist X < 8
trigger1 = var(0) := 800
trigger1 = var(1) := var(2)
trigger2 = Command = "back_y" && P2BodyDist X < 20
trigger2 = var(0) := 800
trigger2 = var(1) := var(2)
ignorehitpause = 1

;---------------------------------------------------------
; 特殊動作
;---------------------------------------------------------
; 緊急回避動作
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command != "y"
triggerall = Command != "b"
triggerall = Command != "holddown"
triggerall = Command = "recovery" || Command = "c"
; クイック緊急回避
trigger1 = Root,Power >= Root,PowerMax*1/5 && Root,var(6) = 0
trigger1 = Root,MoveType = A
trigger1 = Root,StateType != A
trigger1 = var(0) := 910
trigger1 = var(1) := var(2)
; 緊急回避動作（前）
trigger2 = Command != "holdback"
trigger2 = var(0) := 900
trigger2 = var(1) := var(2)
; 緊急回避動作（後）
trigger3 = Command = "holdback"
trigger3 = var(0) := 905
trigger3 = var(1) := var(2)
ignorehitpause = 1

; パワーMAXモード発動
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command != "x"
triggerall = Command != "b"
triggerall = Command = "ay"
trigger1 = Root,Power >= Root,PowerMax*2/5 && Root,var(6) = 0
trigger1 = Root,MoveType = A
trigger1 = Root,StateType != A
trigger1 = var(0) := 955
trigger1 = var(1) := var(2)
trigger2 = Root,Power >= Root,PowerMax*1/5 && Root,var(6) = 0
trigger2 = var(0) := 950
trigger2 = var(1) := var(2)
ignorehitpause = 1

;===============================================================
; 必殺技の先行入力受付時間を格納
;===============================================================
;---------------------------------------------------------
; フック・ショット“CODE：風”（強）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Root,Pos Y <= -50 && Root,StateNo != [1100,1130]
triggerall = Command = "Hook Shot (Code: Wind)_y"
triggerall = Command != "hold_x"
triggerall = Command != "hold_b"
trigger1 = Command = "a"
trigger1 = var(10) := 1201
trigger1 = var(11) := var(13)
trigger2 = Command != "hold_a"
trigger2 = var(10) := 1201
trigger2 = var(11) := var(13)
ignorehitpause = 1

[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Root,StateNo = [1100,1130]
triggerall = Command = "Hook Shot (Code: Wind)_y"
triggerall = Command != "hold_x"
triggerall = Command != "hold_b"
trigger1 = Command = "a"
trigger1 = var(10) := 1201
trigger1 = var(11) := var(13)
trigger2 = Command != "hold_a"
trigger2 = var(10) := 1201
trigger2 = var(11) := var(13)
ignorehitpause = 1

;---------------------------------------------------------
; フック・ショット“CODE：風”（弱）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Hook Shot (Code: Wind)_x"
triggerall = Root,Pos Y <= -50 && Root,StateNo != [1100,1130]
trigger1 = Command = "b"
trigger1 = Command != "hold_a" && Command != "hold_y"
trigger1 = var(10) := 1200
trigger1 = var(11) := var(13)
trigger2 = Command = "y"
trigger2 = Command != "hold_b" && Command != "hold_a"
trigger2 = var(10) := 1200
trigger2 = var(11) := var(13)
trigger3 = Command = "a"
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(10) := 1200
trigger3 = var(11) := var(13)
trigger4 = Command != "hold_a" && Command != "hold_y" && Command != "hold_b"
trigger4 = var(10) := 1200
trigger4 = var(11) := var(13)
ignorehitpause = 1

[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Hook Shot (Code: Wind)_x"
triggerall = Root,StateNo = [1100,1130]
trigger1 = Command = "b"
trigger1 = Command != "hold_a" && Command != "hold_y"
trigger1 = var(10) := 1200
trigger1 = var(11) := var(13)
trigger2 = Command = "y"
trigger2 = Command != "hold_b" && Command != "hold_a"
trigger2 = var(10) := 1200
trigger2 = var(11) := var(13)
trigger3 = Command = "a"
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(10) := 1200
trigger3 = var(11) := var(13)
trigger4 = Command != "hold_a" && Command != "hold_y" && Command != "hold_b"
trigger4 = var(10) := 1200
trigger4 = var(11) := var(13)
ignorehitpause = 1

;---------------------------------------------------------
; デザートイーグル（強）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Desert Eagle_y"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_b"
trigger1 = var(0) := IfElse(Root,var(43) >= 7,1420,1401)
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; デザートイーグル（弱）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Desert Eagle_x"
triggerall = Command != "hold_a" 
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := IfElse(Root,var(43) >= 7,1420,1400)
trigger1 = var(1) := var(3)
trigger2 = Command = "b"
trigger2 = Command != "hold_y"
trigger2 = var(0) := IfElse(Root,var(43) >= 7,1420,1400)
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(0) := IfElse(Root,var(43) >= 7,1420,1400)
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; アサシン・ストライク“CODE：BB”（強K）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
trigger1 = Command = "Assassin Strike (Code : BB)_b"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_y"
trigger1 = var(0) := 1130
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; アサシン・ストライク“CODE：BB”（強P）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Assassin Strike (Code : BB)_y"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_a"
trigger1 = var(0) := 1120
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; アサシン・ストライク“CODE：BB”（弱K）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Assassin Strike (Code : BB)_a"
triggerall = Command != "hold_x"
trigger1 = Root,Power < Root,PowerMax/5 || Root,var(6)
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 1110
trigger1 = var(1) := var(3)
trigger2 = Root,Power < Root,PowerMax*2/5 && Root,var(6) = 0
trigger2 = Command = "y"
trigger2 = Command != "hold_b"
trigger2 = var(0) := 1110
trigger2 = var(1) := var(3)
trigger3 = Command = "b"
trigger3 = Command != "hold_y"
trigger3 = var(0) := 1110
trigger3 = var(1) := var(3)
trigger4 = Command != "hold_y" && Command != "hold_b"
trigger4 = var(0) := 1110
trigger4 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; アサシン・ストライク“CODE：BB”（弱P）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Assassin Strike (Code : BB)_x"
triggerall = Command != "hold_a"
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 1100
trigger1 = var(1) := var(3)
trigger2 = Command = "b"
trigger2 = Command != "hold_y"
trigger2 = var(0) := 1100
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(0) := 1100
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ストリングス・ショット・タイプC“CODE：勝利”
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Strength Shot . Type C (Code: Victory)"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_a"
trigger1 = var(0) := 1320
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ストリングス・ショット・タイプB“CODE：力”
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Strength Shot . Type B (Code: Strength)"
triggerall = Command != "hold_x"
trigger1 = Root,Power < Root,PowerMax/5 || Root,var(6)
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 1310
trigger1 = var(1) := var(3)
trigger2 = Root,Power < Root,PowerMax*2/5 && Root,var(6) = 0
trigger2 = Command = "y"
trigger2 = Command != "hold_b"
trigger2 = var(0) := 1310
trigger2 = var(1) := var(3)
trigger3 = Command = "b"
trigger3 = Command != "hold_y"
trigger3 = var(0) := 1310
trigger3 = var(1) := var(3)
trigger4 = Command != "hold_y" && Command != "hold_b"
trigger4 = var(0) := 1310
trigger4 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ストリングス・ショット・タイプA“CODE：優越”
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Strength Shot . Type A (Code: Superior)"
triggerall = Command != "hold_a" 
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 1300
trigger1 = var(1) := var(3)
trigger2 = Command = "b"
trigger2 = Command != "hold_y"
trigger2 = var(0) := 1300
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(0) := 1300
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ブーメラン・ショット“CODE：SC”（強）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Boomerang Shot (Code : SC)_y"
triggerall = Command != "hold_x"
triggerall = Command != "hold_b"
trigger1 = Root,Power < Root,PowerMax/5 || Root,var(6)
trigger1 = Command = "a"
trigger1 = var(0) := 1001
trigger1 = var(1) := var(3)
trigger2 = Root,Power < Root,PowerMax*2/5 && Root,var(6) = 0
trigger2 = Command = "a"
trigger2 = var(0) := 1001
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_a"
trigger3 = var(0) := 1001
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ブーメラン・ショット“CODE：SC”（弱）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Boomerang Shot (Code : SC)_x"
triggerall = Command != "hold_a"
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 1000
trigger1 = var(1) := var(3)
trigger2 = Command = "b"
trigger2 = Command != "hold_y"
trigger2 = var(0) := 1000
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(0) := 1000
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; アルファ（強）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Alpha_b"
triggerall = Command != "hold_a"
triggerall = Command != "hold_y"
trigger1 = Command = "x"
trigger1 = var(0) := 1501
trigger1 = var(1) := var(3)
trigger2 = Command != "hold_x"
trigger2 = var(0) := 1501
trigger2 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; アルファ（弱）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = Command = "Alpha_a"
triggerall = Command != "hold_x"
triggerall = Command != "hold_b"
trigger1 = Root,Power < Root,PowerMax/5 || Root,var(6)
trigger1 = Command = "y"
trigger1 = var(0) := 1500
trigger1 = var(1) := var(3)
trigger2 = Root,Power < Root,PowerMax*2/5 && Root,var(6) = 0
trigger2 = Command = "y"
trigger2 = var(0) := 1500
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_y"
trigger3 = var(0) := 1500
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; レッドウィップ・ジェノサイド
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Red Whip Genocide_b"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_y"
trigger1 = var(0) := 3300
trigger1 = var(1) := var(3)
ignorehitpause = 1

[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Red Whip Genocide_a"
triggerall = Command != "hold_x"
trigger1 = Root,Power < Root,PowerMax/5
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3300
trigger1 = var(1) := var(3)
trigger2 = Root,Power < Root,PowerMax*2/5 && Root,var(6) = 0
trigger2 = Command = "y"
trigger2 = Command != "hold_b"
trigger2 = var(0) := 3300
trigger2 = var(1) := var(3)
trigger3 = Command = "b"
trigger3 = Command != "hold_y"
trigger3 = var(0) := 3300
trigger3 = var(1) := var(3)
trigger4 = Command != "hold_y" && Command != "hold_b"
trigger4 = var(0) := 3300
trigger4 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; フォビドゥンエンゲージ“CODE：MC”（強）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Forbidden Engage(Code : MC)_y"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_b"
trigger1 = Command != "hold_a"
trigger1 = var(0) := 3401
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; フォビドゥンエンゲージ“CODE：MC”（弱）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Forbidden Engage(Code : MC)_x"
triggerall = Command != "hold_a" 
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3400
trigger1 = var(1) := var(3)
trigger2 = Command = "b"
trigger2 = Command != "hold_y"
trigger2 = var(0) := 3400
trigger2 = var(1) := var(3)
trigger3 = Command != "hold_y" && Command != "hold_b"
trigger3 = var(0) := 3400
trigger3 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ソニック・スローター“CODE：KW”（ノーマル版_強）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Sonic Slaughter(Code : KW)_y"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3001
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ソニック・スローター“CODE：KW”（ノーマル版_弱）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Sonic Slaughter(Code : KW)_x"
triggerall = Command != "hold_a"
trigger1 = Command = "y" && Power < PowerMax/5
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3000
trigger1 = var(1) := var(3)
trigger2 = Command = "y" && Power < PowerMax*2/5 && fvar(0) <= 0
trigger2 = Command != "hold_b"
trigger2 = var(0) := 3000
trigger2 = var(1) := var(3)
trigger3 = Command = "b"
trigger3 = Command != "hold_y"
trigger3 = var(0) := 3000
trigger3 = var(1) := var(3)
trigger4 = Command != "hold_y" && Command != "hold_b"
trigger4 = var(0) := 3000
trigger4 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ソニック・スローター“CODE：DP”
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Sonic Slaughter(Code : DP)_b"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_y"
trigger1 = var(0) := 3200
trigger1 = var(1) := var(3)
ignorehitpause = 1

[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax/5 || Root,fvar(0) > 0)
triggerall = Command = "Sonic Slaughter(Code : DP)_a"
triggerall = Command != "hold_x"
trigger1 = Root,Power < Root,PowerMax/5
trigger1 = Command = "y"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3200
trigger1 = var(1) := var(3)
trigger2 = Root,Power < Root,PowerMax*2/5 && Root,var(6) = 0
trigger2 = Command = "y"
trigger2 = Command != "hold_b"
trigger2 = var(0) := 3200
trigger2 = var(1) := var(3)
trigger3 = Command = "b"
trigger3 = Command != "hold_y"
trigger3 = var(0) := 3200
trigger3 = var(1) := var(3)
trigger4 = Command != "hold_y" && Command != "hold_b"
trigger4 = var(0) := 3200
trigger4 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ソニック・スローター“CODE：KW”（MAX版）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax*3/5 || (Root,Power >= Root,PowerMax/5 && Root,fvar(0) > 0))
triggerall = Command = "Sonic Slaughter(Code : KW)_MAX"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3100
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; スーパーブラックホーク
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = (Root,Power >= Root,PowerMax*3/5 || (Root,Power >= Root,PowerMax/5 && Root,fvar(0) > 0))
triggerall = Command = "Super Black Hawk"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_y"
trigger1 = var(0) := 3500
trigger1 = var(1) := var(3)
ignorehitpause = 1

;---------------------------------------------------------
; ウッドドゥ！？（MAX2）
;---------------------------------------------------------
[State 8990, VarSet]
type = Null ; VarSet
triggerall = RoundState = [1,3]
triggerall = ((Root,Power >= Root,PowerMax*3/5) || (Root,Power >= Root,PowerMax/5 && Root,fvar(0) > 0))
triggerall = (100*Root,life/const(data.life))<=30 || var(20) = 1
trigger1 = Command = "Whip's whip!?"
trigger1 = Command != "hold_x"
trigger1 = Command != "hold_a"
trigger1 = Command != "hold_b"
trigger1 = var(0) := 3600
trigger1 = var(1) := var(3)
ignorehitpause = 1

;===============================================================
; 先行入力の初期化
;===============================================================
;---------------------------------------------------------
; 地上行動の先行入力を初期化
;---------------------------------------------------------
; 受付時間が切れた時に地上行動の先行入力を初期化
[State 8990, VarRangeSet]
type = VarRangeSet
trigger1 = Var(1) <= 0
first = 0
last = 1
value = 0

; 発動時に地上行動の先行入力を初期化
[State 8990, VarRangeSet]
type = VarRangeSet
triggerall = Root,Time <= 1
trigger1 = Root,StateNo = 100 || Root,StateNo = 105 || Root,StateNo = 195
trigger2 = Root,StateNo = [200,599]
trigger3 = Root,StateNo = 800 || Root,StateNo = 810
trigger4 = Root,StateNo = 900 || Root,StateNo = 905 || Root,StateNo = 910 || Root,StateNo = 915
trigger5 = Root,StateNo = 920 || Root,StateNo = 930 || Root,StateNo = 950 || Root,StateNo = 955
trigger6 = Root,StateNo = 1000 || Root,StateNo = 1001
trigger7 = Root,StateNo = 1100 || Root,StateNo = 1110 || Root,StateNo = 1120 || Root,StateNo = 1130
trigger8 = Root,StateNo = 1300 || Root,StateNo = 1310 || Root,StateNo = 1320
trigger9 = Root,StateNo = 1400 || Root,StateNo = 1401 || Root,StateNo = 1500 || Root,StateNo = 1501
trigger10 = Root,StateNo = 3000 || Root,StateNo = 3001 || Root,StateNo = 3100 || Root,StateNo = 3200
trigger11 = Root,StateNo = 3300 || Root,StateNo = 3400 || Root,StateNo = 3401
trigger12 = Root,StateNo = 3500 || Root,StateNo = 3600
trigger13 = Root,StateNo = 5201 || Root,StateNo = 5210
first = 0
last = 1
value = 0

;---------------------------------------------------------
; 空中行動の先行入力を初期化
;---------------------------------------------------------
; 受付時間が切れた時に空中行動の先行入力を初期化
[State 8990, VarRangeSet]
type = VarRangeSet
trigger1 = var(11) <= 0
first = 10
last = 11
value = 0

; 発動時に空中行動の先行入力を初期化
[State 8990, VarRangeSet]
type = VarRangeSet
triggerall = Root,Time <= 2
trigger1 = Root,StateNo = [600,799]
trigger2 = Root,StateNo = 1200 || Root,StateNo = 1201
trigger3 = Root,StateNo = 5201 || Root,StateNo = 5210
first = 10
last = 11
value = 0


;===============================================================
; デバッグ表示
;===============================================================
[State 8990, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Var(0)=%d, Var(1)=%d, var(10)=%d, var(22)=%d Facing=%d"
params = Var(0),Var(1),var(10),var(22),Facing


;###########################################################################
; 特殊喰らいステート(相手動作)
;###########################################################################

;*********************************************************************
; 自動リカバー(相手動作)
;*********************************************************************
[Statedef 9900]
type = A
movetype = H
physics = N
ctrl = 0

; 空中ヒットでない場合や相手がヘルパーの場合に相手を元のステートに戻す処理
[State 9900, SelfState]
type = SelfState
triggerall = Time = 0
trigger1 = !GetHitVar(fall)
trigger2 = IsHelper
value = PrevStateNo

[State 9900, SelfState]
type = SelfState
trigger1 = !Alive
value = 5050

[State 9900, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
;trigger1 = Anim != 5035
value = 5040

[State 9900, NotHitBy]
type = NotHitBy
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = SCA
time = 3

[State 9900, VelAdd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 9900, Turn]
type = Turn
trigger1 = p2Dist X < 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0

[State 9900, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND


;*********************************************************************
; すべりダウン(相手動作)
;*********************************************************************
;===============================================================
; 吹き飛び部分
;===============================================================
[Statedef 9910]
type    = A
movetype= H
physics = N
sprpriority = 1

; 相手がヘルパーの場合に相手を元のステートに戻す処理
[State 9910, SelfState]
type = SelfState
trigger1 = IsHelper
value = PrevStateNo

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 5
value = 5050

[State 9910, VelAdd]
type = VelAdd
Trigger1 = Time != 0
y = .55

[State 9910, ChangeState]
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9911

;===============================================================
; すべり部分
;===============================================================
[Statedef 9911]
type    = L
movetype= H
physics = N
sprpriority = 1

[State 9911, NotHitBy]
type = Null;NotHitBy
trigger1 = 1
value = SCA

[State 9911, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 9911, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 9911, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9911, VelMul]
type = VelMul
trigger1 = 1
x = 0.85

[State 9911, ChangeAnim]
type = ChangeAnim
Trigger1 = Time = 0
value = 5100

; 最後のelemで固定する
[State 9911, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 5100
trigger1 = AnimTime = -1
value = 5100
elem = AnimElemNo(0)

[State 9911, ChangeState] 
type = ChangeState
trigger1 = Time = 20
value = 9912

;===============================================================
; ダウン部分
;===============================================================
[Statedef 9912]
type    = L
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 9912, ChangeAnim]
type = ChangeAnim
Trigger1 = Time = 0
value = 5110

[State 9912, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

[State 9912, SelfState]
type = SelfState
triggerall = !alive
trigger1 = Time >= 9
value = 5150

[State 9912, SelfState] 
type = SelfState
triggerall = alive
trigger1 = Time >= 9
value = 5120 


;*********************************************************************
; ワイヤーダメージ(相手動作)
;*********************************************************************
;===============================================================
; ワイヤーダメージ_吹き飛び
;===============================================================
[Statedef 9920]
type    = A
movetype= H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 1

; 相手がヘルパーの場合に相手を元のステートに戻す処理
[State 9920, SelfState]
type = SelfState
trigger1 = IsHelper
value = PrevStateNo

[State 9920, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9920, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 9920, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

; ワイヤー喰らい専用アニメに変更
[State 9920, ChangeAnim]
type = ChangeAnim
triggerall = !HitShakeOver
triggerall = SelfAnimExist(5900)
trigger1 = AuthorName = "adamskie"
trigger2 = AuthorName = "bad darkness"
trigger3 = AuthorName = "h”"
trigger4 = AuthorName = "HaiJin"
trigger5 = AuthorName = "mouser"
trigger6 = AuthorName = "nhk"
trigger7 = AuthorName = "tellie"
trigger8 = AuthorName = "tin"
trigger9 = AuthorName = "warusaki3"
value = 5900

; ワイヤー喰らい汎用アニメに変更
[State 9920, ChangeAnim2]
type = ChangeAnim2
trigger1 = !HitShakeOver
trigger1 = Anim != 5900
value = 5901

[State 9920, VelSet]
type = VelSet
trigger1 = HitShakeOver
x = -15
y = -7
persistent = 0

[State 9920, VelAdd]
type = VelAdd
trigger1 = HitShakeOver
y = .6

[State 9920, ChangeState] 
type = ChangeState
trigger1 = HitShakeOver && BackEdgeDist < 20
value = 9921

[State 9920, ChangeState] 
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9911

;===============================================================
; ワイヤーダメージ_跳ね返り
;===============================================================
[Statedef 9921]
type    = A
movetype= H
physics = N
sprpriority = 1
velset = 0,0

[State 9921, NotHitBy]
type = NotHitBy
trigger1 = Time < 4
value = SCA

[State 9921, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5902

[state 9921, Turn]
type = Turn
trigger1 = Time = 4

[State 9921, VelSet]
type = VelSet
trigger1 = Time = 4
x = -2
y = -12

[State 9921, ChangeAnim]
type = ChangeAnim
Trigger1 = Time = 4
value = 5030

[State 9921, ChangeAnim]
type = ChangeAnim
Trigger1 = Time = 9
value = 5050

[State 9921, VelAdd]
type = VelAdd
Trigger1 = Time > 4
y = .55

[State 9921, SelfState]
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;*********************************************************************
; KOF風垂直回転吹っ飛び(相手動作)
;*********************************************************************
;===============================================================
; 吹っ飛び部分
;===============================================================
[Statedef 9930]
type = A
movetype = H
physics = N
ctrl = 0
;velset = 0,0
sprpriority = 1

[State 9930, NotHitBy]
type = Null;NotHitBy
trigger1 = 1
value = SCA

; 仰向けダウンかうつ伏せダウンかの判定用フラグを初期化
[State 9930, VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(2) = 0

;　上昇吹っ飛びアニメに変更
[State 9930, ChangeAnim]
type = ChangeAnim
triggerall = SelfAnimExist(5250)
triggerall = SelfAnimExist(5251)
triggerall = SelfAnimExist(5051)
trigger1 = Time = 0
value = 5051
persistent = 0

;　垂直回転吹っ飛び(落下)アニメに変更
[State 9930, ChangeAnim]
type = ChangeAnim
triggerall = SelfAnimExist(5251)
trigger1 = Anim = 5051
trigger1 = Time = 5
value = 5251
persistent = 0

; KOF風垂直回転吹っ飛び_専用アニメに変更
[State 9930, ChangeAnim]
type = ChangeAnim
triggerall = SelfAnimExist(5252)
triggerall = Time = 0
triggerall = AuthorName = "HaiJin"
trigger1 = Name = "Whip"
value = 5252
persistent = 0

; KOF風垂直回転吹っ飛び(上昇)_汎用アニメに変更
[State 9930, ChangeAnim2]
type = ChangeAnim2
triggerall = Time = 0
trigger1 = Anim != 5051
trigger1 = Anim != [5250,5252]
value = 5253
persistent = 0

[State 9930, VelSet]
type = VelSet
trigger1 = HitShakeOver
x = GetHitVar(xvel)*facing	;-2
y = GetHitVar(yvel)		;-13
persistent = 0

[State 9930, VelAdd]
type = VelAdd
trigger1 = HitShakeOver
y = GetHitVar(yaccel)

; 仰向けダウンかうつ伏せダウンかの判定
[State 9930, VarSet]
type = VarSet
trigger1 = Anim = 5252
sysvar(2) = 1+(AnimElem=10,>=0&&AnimElem=11,<=1)

[State 9930, VarSet]
type = VarSet
trigger1 = Anim = 5253
sysvar(2) = 1+(AnimElem=8,>=0&&AnimElem=9,<=1)

[State 9930,ChangeState]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 9931

;===============================================================
; 地面に激突
;===============================================================
[Statedef 9931]
type    = L
movetype= H
physics = N

[State 9931, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9931, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !SelfAnimExist(5101) && sysvar(2) = 0
trigger2 = sysvar(2) = 1
value = 5100

[State 9931, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5101) && sysvar(2) = 0
trigger2 = sysvar(2) = 2
value = 5101

[State 9931, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9931, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 9931, VelMul]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 9931, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 9931, ChangeState]
type = ChangeState
trigger1 = Time = 4
value = 9932

;---------------------------------------------------------
; バウンド部分
;---------------------------------------------------------
[Statedef 9932]
type    = L
movetype= H
physics = N

[State 9932, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

; 仰向けダウンかうつ伏せダウンかの判定用フラグを初期化
[State 9932, VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(2) = 0

[State 9932, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
value = 5160

[State 9932, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5160 + (Anim % 10)

[State 9932, VelSet]
type = VelSet
trigger1 = Time = 0
y = -7

[State 9932, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9932, VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 9932, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9933

;---------------------------------------------------------
; ダウン部分
;---------------------------------------------------------
[Statedef 9933]
type    = L
movetype= H
physics = N

[State 9933, ChangeAnim2]
type = ChangeAnim2
triggerall = Time = 0
trigger1 = Anim != [5161,5169]
trigger2 = !SelfAnimExist(5110 + (Anim % 10))
value = 5110

[State 9933, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5161,5169]
trigger1 = SelfAnimExist(5110 + (Anim % 10))
value = 5110 + (Anim % 10)

[State 9933, NotHitBy]
type = Null;NotHitBy
trigger1 = 1
value = SCA

[State 9933, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 9933, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 9933, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9933, SelfState]
type = SelfState
triggerall = !Alive
trigger1 = Time >= 22
value = 5150

[State 9933, SelfState]
type = SelfState
triggerall = Alive
trigger1 = Time >= 22
value = 5120


;*********************************************************************
; 地上ガードクラッシュ(相手動作)
;*********************************************************************
[Statedef 9940]
type    = U
movetype = H
physics = N
sprpriority = 0
velset = 0,0

; 相手がヘルパーの場合に相手を元のステートに戻す処理
[State 9940, SelfState]
type = SelfState
trigger1 = IsHelper
value = PrevStateNo

; 空中の場合は空中ガードクラッシュに移行
[State 9940, ChangeState]
type = ChangeState
trigger1 = Time = 0
trigger1 = StateType = A
value = 9945
ctrl = 0

[State 9940, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = StateType != A
statetype = S

[State 9940, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

; ガードクラッシュ汎用アニメ
[State 9940, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5915
persistent = 0

; ガードクラッシュ専用アニメ
[State 9940, ChangeAnim]
type = ChangeAnim
triggerall = AuthorName = "HaiJin"
trigger1 = Name = "Whip"
value = 5910
persistent = 0

; ガードクラッシュ汎用アニメの戻りモーション
[State 9940, ChangeAnim2]
type = ChangeAnim2
trigger1 = HitShakeOver
trigger1 = Anim = 5915
value = 5916
persistent = 0

; ガードクラッシュ専用アニメの戻りモーション
[State 9940, ChangeAnim]
type = ChangeAnim
trigger1 = HitShakeOver
trigger1 = Anim = 5910
value = 5911
persistent = 0

; 製作者＆キャラ別ガードクラッシュ専用アニメ(この処理を適用するかは現在未定)
;[State 9940, ChangeAnim2]
;type = ChangeAnim2
;triggerall = AuthorName = "Ahuron"
;trigger1 = Name = "KyoXIII"
;value = 12005
;persistent = 0

[State 9940, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;*********************************************************************
; 空中ガードクラッシュ(相手動作)
;*********************************************************************
[Statedef 9945]
type    = A
movetype= H
physics = N
sprpriority = 0
velset = 0,0

; 相手がヘルパーの場合に相手を元のステートに戻す処理
[State 9945, SelfState]
type = SelfState
trigger1 = IsHelper
value = PrevStateNo

[State 9945, VelSet]
type = VelSet
trigger1 = HitShakeOver
x = -1
y = -6
persistent = 0

[State 9945, VelAdd]
type = VelAdd
trigger1 = 1
trigger1 = HitShakeOver
y = GetHitVar(yaccel)

; ガードクラッシュ汎用アニメ
[State 9945, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5030
persistent = 0

; ガードクラッシュ汎用アニメ_落下部分
[State 9945, ChangeAnim]
type = ChangeAnim
trigger1 = HitShakeOver
value = 5040
persistent = 0

; 製作者＆キャラ別ガードクラッシュ専用アニメ(この処理を適用するかは現在未定)
;[State 9945, ChangeAnim2]
;type = ChangeAnim2
;triggerall = AuthorName = ""
;trigger1 = Name = ""
;value = 
;persistent = 0

[State 9945, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND


;*********************************************************************
; 叩き付けダウン_地上ヒット(相手動作)
;*********************************************************************
;===============================================================
; 地上喰らい状態
;===============================================================
[Statedef 9950]
type    = U
movetype= H
physics = N
velset = 0,0

[State 9950, SelfState]
type = SelfState
trigger1 = GetHitVar(Guarded)
trigger2 = IsHelper
value = PrevStateNo

[State 9950, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

; 空中やられステートへ移行
[State 9950, ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = StateType = A
value = 9960

[State 9950, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 9950, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 0
value = Anim

[State 9950, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 9951

;===============================================================
; 地面へ落下
;===============================================================
[Statedef 9951]
type    = L
movetype= H
physics = N
velset = 0,0

[State 9951, EnvShake]
type = EnvShake
Trigger1 = Time = 0
time = 9
ampl = -3
freq = 110

[State 9951, NotHitby]
type = NotHitby
trigger1 = 1
value = SCA

[State 9951, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5102)
value = 5102

[State 9951, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5101)
trigger1 = !SelfAnimExist(5102)
value = 5101

[State 9951, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = !SelfAnimExist(5101)
trigger1 = !SelfAnimExist(5102)
value = 5100

[State 9951, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9951, VelMul]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 9951, ChangeState]
type = ChangeState
trigger1 = Time = 2
value = 9952

;===============================================================
; バウンド部分
;===============================================================
[Statedef 9952]
type    = L
movetype= H
physics = N

[State 9952, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9952, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 9952, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
value = 5160

[State 9952, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5160 + (Anim % 10)

[State 9952, VelSet]
type = VelSet
trigger1 = Time = 0
y = -5.4

[State 9952, PosSet]
type = PosSet
trigger1 = Time = 0
y = 20

[State 9952, 5]
type = VelAdd
trigger1 = 1
y = .48

[State 9952, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9953

;===============================================================
; ダウン部分
;===============================================================
[Statedef 9953]
type    = L
movetype= H
physics = N

[State 9953, ChangeAnim2]
type = ChangeAnim2
triggerall = Time = 0
trigger1 = Anim != [5161,5169]
trigger2 = !SelfAnimExist(5110 + (Anim % 10))
value = 5110

[State 9953, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5161,5169]
trigger1 = SelfAnimExist(5110 + (Anim % 10))
value = 5110 + (Anim % 10)

[State 9953, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9953, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 9953, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 9953, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9953, SelfState]
type = SelfState
triggerall = !Alive
trigger1 = Time >= 22
value = 5150

[State 9953, SelfState]
type = SelfState
triggerall = Alive
trigger1 = Time >= 22
value = 5120

;*********************************************************************
; 叩き付けダウン_空中ヒット(相手動作)
;*********************************************************************
;===============================================================
; 地面へ落下する部分
;===============================================================
[Statedef 9960]
type    = A
movetype= H
physics = N
velset = 0,0

[State 9960, SelfState]
type = SelfState
trigger1 = GetHitVar(Guarded)
trigger2 = IsHelper
value = PrevStateNo

[State 9960, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9960, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 9960

[State 9960, PosFreeze]
type = PosFreeze
trigger1 = !HitShakeOver

[State 9960, VelSet]
type = VelSet
trigger1 = HitShakeOver
x = -7
y = 12.5

[State 9960, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 9960, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 9961
ctrl = 0

;===============================================================
; 地面に衝突する部分
;===============================================================
[Statedef 9961]
type    = L
movetype= H
physics = N

[State 9961, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9961, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 9961, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5100

[State 9961, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9961, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 9961, VelMul]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 9961, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 9961, ChangeState]
type = ChangeState
trigger1 = Time = 4
value = 9962

;===============================================================
; バウンド部分
;===============================================================
[Statedef 9962]
type    = L
movetype= H
physics = N

[State 9962, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9962, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
value = 5160

[State 9962, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5160 + (Anim % 10)

[State 9962, VelSet]
type = VelSet
trigger1 = Time = 0
x = -4
y = -7

[State 9962, PosSet]
type = PosSet
trigger1 = Time = 0
y = 20

[State 9962, VelAdd]
type = VelAdd
trigger1 = 1
y = .48

[State 9962, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9953

;*********************************************************************
; 叩き付けダウン_相手動作(ダウンヒット)
;*********************************************************************
;===============================================================
; ダウンヒット中
;===============================================================
[Statedef 9970]
type    = L
movetype= H
physics = N
velset = 0,0

[State 9970, SelfState]
type = SelfState
trigger1 = GetHitVar(Guarded)
trigger2 = IsHelper
value = PrevStateNo

[State 9970, VarSet] ;Set default anim
type = VarSet
trigger1 = Time = 0
sysvar(2) = 5080

[State 9970, VarAdd]
type = VarAdd
trigger1 = Time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (Anim % 10))
sysvar(2) = Anim % 10

[State 9970, PosSet]
type = PosSet
trigger1 = Time = 0
y = -20

[State 9970, ChangeAnim] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 9970, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = Time >= 6
value = 9971 ;Downed get-hit (knocked back)

;===============================================================
; バウンド部分_1
;===============================================================
[Statedef 9971]
type    = L
movetype= H
physics = N

[State 9971, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9971, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5081,5089]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
value = 5160

[State 9971, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5081,5089]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5160 + (Anim % 10)

[State 9971, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9971, VelSet]
type = VelSet
trigger1 = Time = 0
x = -3
y = -5

[State 9971, VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 9971, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9972

;===============================================================
; 地面叩きつけ部分
;===============================================================
[Statedef 9972]
type    = L
movetype= H
physics = N

[State 9972, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9972, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5161,5169]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
trigger3 = !SelfAnimExist(5101)
value = 5100

[State 9972, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5161,5169]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5100 + (Anim % 10)

[State 9972, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9972, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 9972, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 9972, ChangeState]
type = ChangeState
trigger1 = Time >= 2
value = 9973

;===============================================================
; バウンド部分_2
;===============================================================
[Statedef 9973]
type    = L
movetype= H
physics = N

[State 9973, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9973, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (Anim % 10))
value = 5160

[State 9973, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (Anim % 10))
value = 5160 + (Anim % 10)

[State 9973, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9973, VelSet]
type = VelSet
trigger1 = Time = 0
x = -3
y = -3

[State 9973, VelAdd]
type = VelAdd
trigger1 = 1
y = .55

[State 9973, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 9953

;*********************************************************************
; KOフィニッシュ処理（KOF）
;*********************************************************************
[Statedef 9990]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9999
velset = 0,0

[State 9990, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible
;flag3 = nomusic

[State 9990, EnvColor]
type = EnvColor
trigger1 = Time = 1 || Time = 3
value = 120,0,0
time = 1
under = 1
ignorehitpause = 1

[State 9990, EnvColor]
type = EnvColor
trigger1 = Time = 2 || Time = 4
value = 222,255,255
time = 1
under = 1
ignorehitpause = 1

[State 9990, BGPalFX]
type = BGPalFX
trigger1 = Time = [4,43]
trigger1 = RoundState < 4
trigger1 = Time%2 = 0
add = 30,-250,-250
time = 1

[State 9990, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 9990,0
persistent = 0

[State 9990, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
