;---------------------------------------------------------------------------
; ここからは超必殺技のステート
;---------------------------------------------------------------------------
; 弱禁千弐百拾壱式・八稚女
; CNS レベル: 中級
;
; 超必殺技でのHitDefでは「getpower = 0」があるのに注目してください。
; 攻撃が当たってもパワーゲージを回復させないためです。

[Statedef 2000]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2000
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 3000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
time = 27
movetime = 27
darken = 0
p2defmul = 1

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 5, >= 0
x = 10

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 6
time = 2
palcolor = 0
paladd = 60,20,100
PalContrast = 220,200,350
Trans = none
TimeGap  = 1
FrameGap = 3
length = 11
ignorehitpause = 1

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(6) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6100
pos = 20,-115
sprpriority = -5
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 6101
pos = 20,-115
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,35]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (6) < 0
value = SCA,NA,SA,HA,NT,ST,HT,NP,SP,HP,AA,AT,AP

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s7,14

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 6,>= 0
x = ifelse((p2bodydist x = [-5,20]),3,10)

[State 1000, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "Cheap"
ID = 2000
stateno = 2048
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 3000, ヒット定義]
type = HitDef
triggerall =!movecontact && !movereversed
trigger1 = AnimElemTime(6) >= 0
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
guardflag = M
hitflag   = MAF
priority  = 4, Hit
pausetime = 3,5
guard.pausetime = 3,3
sparkno = s4010
guard.sparkno = s4120
sparkxy = -30,-40
hitsound = s0,21
guardsound = s8,11
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2facing = 1
kill = 0
id = 2000
numhits = 0

[State 1000, movehitreset]
type = movehitreset
triggerall = movehit > 0
trigger1 = numtarget(2000) = 0
trigger2 = numtarget(2000) > 0
trigger2 = target(2000),Movetype != H

[State 1000, p2GCRUSH]
type = targetstate
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 2028
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 2018
ctrl = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = MoveGuarded
value = 2001

;---------------------------------------------------------------------------
; 移動終了

[Statedef 2001]
type     = S
movetype = I
physics  = N
juggle   = 0
poweradd = 0
;velset   = 0,0
anim     = 2001
ctrl     = 0
sprpriority = 2

[State 3001, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(1) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 3001, VelMul]
type = VelMul
trigger1 = 1
x = .9

[State 3001, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------

[Statedef 2048]
type = S
ctrl = 0
anim = 2048
velset = 0,0

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, ReversalDef]
type = ReversalDef
trigger1 = parent,AnimElemtime(6) > 0
trigger1 = enemynear(parent,fvar(37)),prevstateno = [120,159]
reversal.attr = SC,AA,AP,AT
pausetime = 0,1
sparkno = -1
hitsound = -1
p2stateno = 2030
ignorehitpause = 1

[State 1000, PosSet]
type = PosSet
trigger1 = pos y < -100
x = Root,pos x - 10
y = -100
ignorehitpause = 1

[State 1000, PosSet]
type = PosSet
trigger1 = pos y >= -100
x = Root,pos x - 10
y = enemynear(fvar(37)),pos y
ignorehitpause = 1

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 2000
trigger1 = root,stateno != 2050
trigger1 = root,stateno != 3500

;---------------------------------------------------------------------------
; 強禁千弐百拾壱式・八稚女

[Statedef 2050]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2050
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 3000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
time = 27
movetime = 27
darken = 0
p2defmul = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6100
pos = 20,-115
sprpriority = -5
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 6101
pos = 20,-115
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,36]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (6) < 0
value = SCA,NA,SA,HA,NT,ST,HT,NP,SP,HP,AA,AT,AP

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s7,14

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 5, >= 0
x = 10

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 6
time = 2
palcolor = 0
paladd = 60,20,100
PalContrast = 220,200,350
Trans = none
TimeGap  = 1
FrameGap = 3
length = 11
ignorehitpause = 1

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(6) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 6,>= 0
x = ifelse((p2bodydist x = [-5,20]),3,12)

[State 1000, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "Cheap"
ID = 2000
stateno = 2048
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 3000, ヒット定義]
type = HitDef
triggerall =!movecontact && !movereversed
trigger1 = AnimElemTime(6) >= 0
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
guardflag = M
hitflag   = MAF
priority  = 4, Hit
pausetime = 3,5
guard.pausetime = 3,3
sparkno = s4010
guard.sparkno = s6077
sparkxy = -30,-40
hitsound = s0,21
guardsound = s8,11
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2facing = 1
kill = 0
id = 2000
numhits = 0

[State 1000, movehitreset]
type = movehitreset
triggerall = movehit > 0
trigger1 = numtarget(2000) = 0
trigger2 = numtarget(2000) > 0
trigger2 = target(2000),Movetype != H

[State 1000, p2GCRUSH]
type = targetstate
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 2028
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 2018
ctrl = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = MoveGuarded
value = 2005

;---------------------------------------------------------------------------
; 移動終了

[Statedef 2005]
type     = S
movetype = I
physics  = N
juggle   = 0
poweradd = 0
;velset   = 0,0
anim     = 2005
ctrl     = 0
sprpriority = 2

[State 1301, VelMul]
type = VelMul
trigger1 = 1
x = .9

[State 1301, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 禁千弐百拾壱式・八稚女発動

[Statedef 2018]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2018
ctrl     = 0
sprpriority = 5

[State 3020, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 40,0

[State 3000, TargetState]
type = TargetState
trigger1 = time = 0
value = 2092

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3020, EnvColor]
type = EnvColor
trigger1 = animelem = 6
trigger2 = animelem = 10
trigger3 = animelem = 15
trigger4 = animelem = 17
trigger5 = animelem = 26
trigger6 = animelem = 32
trigger7 = animelem = 37
trigger8 = animelem = 44
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s2000,0
channel = 10

[State 3000, TargetBind]
type = TargetBind
trigger1 = 1
pos = 48,0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4020
sparkxy = -15,-55
hitsound = s0,21
ground.type = High
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2090
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4020
sparkxy = -25,-55
hitsound = s0,21
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2092
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4020
sparkxy = -20,-55
hitsound = s0,21
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2090
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 17
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4070
sparkxy = -20,-65
hitsound = s0,14
ground.type = High
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2090
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 26
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4070
sparkxy = -25,-55
hitsound = s0,14
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2090
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 32
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4070
sparkxy = -25,-65
hitsound = s0,14
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2092
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 37
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4070
sparkxy = -25,-65
hitsound = s0,14
ground.type = High
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2090
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 44
attr = S, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
hitflag   = MAF
priority  = 4, Hit
pausetime = 1, 1
sparkno = s4070
sparkxy = -25,-65
hitsound = s0,14
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity = -4.5,-6.5
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-6.5
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2stateno = 2092
kill = 0

[State 3020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2019

;---------------------------------------------------------------------------
; フィニッシュ

[Statedef 2019]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
anim     = 2019
ctrl     = 0
sprpriority = 5

[State 3000, TargetState]
type = TargetState
trigger1 = time = 0
value = 2020

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3020, EnvColor]
type = EnvColor
trigger1 = animelem = 7
ignorehitpause = 1
time = 1
value = 255,255,255
under = 2

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s15000,0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s7,9
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = s666,2

[State 3021, エフェクト表示]
type = Explod
trigger1 = AnimElem = 2
anim = 4040
sprpriority = 4
postype = p1
pos = 28,-78
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3021, エフェクト表示]
type = Explod
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
anim = 10072+random%3
sprpriority = 10
postype = p1
pos = 10 + random%25,-45 - random%50
bindtime = 1
supermovetime = 0
under = 0
ownpal = 1

[State 3021, 燃え小エフェクト]
type = Helper
trigger1 = AnimElem = 7
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1

[State 3021, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 32,0

[State 3021, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
pos = 24,0

;[State 3021, TargetLifeAdd]
;type = TargetLifeAdd
;trigger1 = AnimElem = 7
;value = -150

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 6000;3000
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "3200"
value = 3200

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 6000;3000
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "39000"
value = 39000

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 2000
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "38000"
value = 38000

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 2000
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "3100"
value = 3100

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 1000
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "20002"
value = 20002

[State 3021, ステート変更]
type = ChangeState
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "1300"
trigger2 = var(59) = 0
trigger2 = command = "1310"
value = 1310

[State 3021, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)禁千弐百拾壱式・八稚女・掴まれ

[Statedef 2020]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 3025, ]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3025, ]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2020

[State 3025, ]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 3025, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 2039

;---------------------------------------------------------------------------
;(ENEMY)禁千弐百拾壱式・八稚女・吹き飛び

[Statedef 2021]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 3026, ]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 3026, ]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 3026, ]
type = velset
trigger1 = time = 0
x = -4.5
y = -7

[State 3026, ]
type = VelAdd
Trigger1 = time > 0
y = .5

[State 3026, 炎上]
type = palfx
trigger1 = time = 0
time = 30
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1

[State 3026, ]
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; 相手動作(上段やられ)
; P2 - Shaking from the hit

[Statedef 2090]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 5650, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -15
kill = 0
absolute = 1
ignorehitpause = 1

[State 5650, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 5650, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5650, 3]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2090

[State 5650, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 2091

;---------------------------------------------------------------------------
; 相手動作(上段やられ)

[Statedef 2091]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 5651, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 5651, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 5651, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5651, 3]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2091

[State 5651, 4]
type = SelfState
trigger1 = time = 60
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 相手動作(下段やられ)
; P2 - Shaking from the hit

[Statedef 2092]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 5655, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -15
kill = 0
absolute = 1
ignorehitpause = 1

[State 5655, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 5655, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5655, 3]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2092

[State 5655, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 2093

;---------------------------------------------------------------------------
; 相手動作(下段やられ)

[Statedef 2093]
type    = S;A
movetype= H
physics = N
velset = 0,0

[State 5656, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 5656, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 5656, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5656, 3]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2093

[State 5656, 4]
type = SelfState
trigger1 = time = 60
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;MAXｲｻｪ
[Statedef 20002]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 20002
ctrl     = 0
sprpriority = 10

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 30
time = 30
darken = 0

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000, 超必殺技発動のエフェクト表示]
type = Explod
trigger1 = AnimElem = 1
anim = 6200
pos = 40,-110
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 3000, 超必殺技発動のエフェクト表示]
type = Explod
trigger1 = AnimElem = 1
anim = 6201
pos = 40,-110
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1000, ･ﾘ･･ﾑｩ`､ｳ､ｹ]
type = Helper
trigger1 = movehit = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = Time = 0
time = 250
mul = 158,158,158
invertall = 1
ignorehitpause = 1

[State 1000, EnvColor]
type = EnvColor
trigger1 = Time = [0,2]
value = 255,255,255
time = 1
under = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s7,19
channel = 4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = s5,5

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
getpower = 0,0
givepower = 15,15
damage = 0, 0
animtype = up
hitflag = MAF
priority = 3, Hit
pausetime = 0,32
sparkno = s4070
sparkxy = 0, -95
hitsound = s0,14
ground.type = low
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0,-9
guard.pausetime = 16,16
air.type = High
air.velocity = 0,-9
air.hittime = 60
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
envshake.time = 25
envshake.ampl = 10
envshake.freq = 90
yaccel = .5
kill = 0
p2stateno = 20098

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [40,62]
time = 1
movetime = 1

[State 1000, ステート変更]
type = ChangeState
triggerall = Movehit
trigger1 = AnimElem = 10
value = 20003

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 20003]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 20003
ctrl     = 0
sprpriority = 3

[State 1000, Helper]
type = Helper
trigger1 = animelem = 11
helpertype = normal
name = "Efecto de Ojos"
stateno = 20004
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s5,5

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 22
value = s18,2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s7,20

[State 810,]
type = EnvShake
trigger1 = AnimElem = 20
ampl = 10
freq = 120
time = 25

[State 1000, EnvColor]
type = EnvColor
trigger1 = animelem = 8
value = 255,255,255
time = 1
under = 1

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = 12
trigger2 = time = 14
trigger3 = time = 16
time = 5
movetime = 0

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [28,48]
time = 1
movetime = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
getpower = 0,0
givepower = 15,15
damage = 0, 0
animtype = hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = s4070
sparkxy = -10,-140
hitsound = s0,14
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0,-15
air.velocity = 0,-15
air.hittime = 50
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
kill = 0
yaccel = .5
p2stateno = 20098

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
getpower = 0,0
givepower = 15,15
damage = 0, 0
animtype = hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = s4070
sparkxy = -15,-150
hitsound = s0,14
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -11,-10
air.velocity = -11,-10
air.hittime = 50
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
kill = 0
yaccel = .5
p2stateno = 20098

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
getpower = 0,0
givepower = 15,15
damage = 0, 0
animtype = hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = s4070
sparkxy = -20,-160
hitsound = s0,14
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -10,-10
air.velocity = -10,-10
air.hittime = 50
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
kill = 0
yaccel = .5
p2stateno = 20098

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
getpower = 0,0
givepower = 15,15
damage = 0, 0
animtype = high
hitflag = MAF
priority = 3, Hit
pausetime = 0,18
sparkno = s4070
sparkxy = -25, -175
hitsound = s0,14
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = 0,-12
air.type = High
air.velocity = 0,-12
air.hittime = 50
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 0
palfx.time = 90
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 20
envshake.ampl = 12
envshake.freq = 90
p2stateno = 20020
p2facing = 1
yaccel = .5

[State 3000]
type = Projectile
trigger1 = AnimElem = 20
projID = 2300
projanim = 2310
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 28
getpower = 0,0
givepower = 15,15
ownpal = 0
offset = 20,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 0,10
hitflag = MAF
hitsound = s9,10
guardsound = s8,11
pausetime = 0,10
sparkno = s4010
sparkxy = 20+(floor(p2bodydist X)),-150+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -5,-10
guard.velocity = -12
air.juggle = 0
air.velocity = -5,-10
fall = 1
palfx.time = 70
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
p2stateno = 20099
p2facing = 1
yaccel = .5

[State 0, Explod]
type = Explod
trigger1 =  animelem = 20
anim = 7601
ID = 20002
pos = 65,8
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
sprpriority = 20

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

;Efecto de Ojos
[Statedef 20004]
type = S
ctrl = 0
anim = 20004
velset = 0,0
sprpriority = 9

[State 1000, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = -3,0
ignorehitpause = 1

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1000, AfterImage]
type = AfterImage
trigger1 = time = 0
trans = add
PalContrast = 250,250,250
PalBright = 0,0,0
time = 34
length  = 13
TimeGap = 1
FrameGap = 1

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1

;---------------------------------------------------------------------------

[Statedef 20020]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = DefenceMulSet
trigger1 = 1
value = 1
IgnoreHitPause = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -40
kill = 1
absolute = 1
ignorehitpause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = time = [0,13]
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = time = [0,13]
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 14
y = -8

[State 52, 1]
type = Veladd
trigger1 = time = [13,999]
y = .3

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 20020

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------

[Statedef 20021]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = DefenceMulSet
trigger1 = 1
value = 1
IgnoreHitPause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 2
x = -4
y = -4

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(2) >= 0
y = .4

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 20021

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 20022]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = DefenceMulSet
trigger1 = 1
value = 1
IgnoreHitPause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = Veladd
trigger1 = time = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = time = 15
x = 0
y = -8.8

[State 52, 1]
type = Veladd
trigger1 = time >= 15
y = .24

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5052)
value = 5052

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 20023]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = DefenceMulSet
trigger1 = 1
value = 1
IgnoreHitPause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, 1]
type = Veladd
trigger1 = time = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = time >= 0
x = -4

[State 52, 1]
type = VelSet
trigger1 = time = 0
y = -8.8

[State 52, 1]
type = Veladd
trigger1 = time >= 0
y = .47

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5052)
value = 5052

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 20098]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -20
kill = 0
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 8001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 8030

[State 5000, 8]
type = DefenceMulSet
trigger1 = 1
value = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------

[Statedef 20099]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -100
kill = 1
absolute = 1
ignorehitpause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -2.4
y = -14

[State 52, 2]
type = Veladd
trigger1 = time >= 2
y = .5

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 10

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2320

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; 裏参百拾六式・豺華(単発ver)
; CNS レベル: 中級

[Statedef 2300]
type     = S
movetype = A
physics  = S
juggle   = 3
poweradd = 0
velset   = 0,0
anim     = 2300
ctrl     = 0
sprpriority = 3

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 43
time = 43
darken = 0
p2defmul = 1

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = 1750
trigger2 = prevstateno = 1810
trigger3 = prevstateno = 1260
time = 5
add = 230,230,230

[State 2000]
type = Explod
trigger1 = time = 6
anim = 6100
pos = -15,-80
sprpriority = -5
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 6
anim = 6101
pos = -15,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1


;[State 2000]
;type = Explod
;triggerall = time = 6
;trigger1 = prevstateno = [1000,1999]
;anim = 7500
;pos = ifelse(facing=1,-320,0),0
;ontop = 1
;ownpal = 1
;postype = front
;bindtime = -1
;supermove = 1

;[State 2000]
;type = Explod
;triggerall = time = 6
;trigger1 = prevstateno = [1000,1999]
;anim = 7510
;pos = ifelse(facing=1,-320,0),0
;ontop = 1
;ownpal = 1
;postype = front
;bindtime = -1
;supermove = 1

[State 2000]
type = AssertSpecial
trigger1 = Anim = 2300
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 4
value = s10,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 15
value = s7,18

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 13
value = s18,2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 13
value = s5,3

[State 810,]
type = EnvShake
trigger1 = AnimElem = 13
ampl = 10
freq = 120
time = 25

[State 3000]
type = Projectile
trigger1 = AnimElem = 14
projID = 2300
projanim = 2310
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 36
getpower = 0
ownpal = 0
offset = 20,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 0,14
hitflag = MAF
guardflag = M
hitsound = s9,10
guardsound = s8,11
pausetime = 0,6
sparkno = s4010
guard.sparkno = s4120
sparkxy = 20,-100
ground.type = High
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -2.4,-10
air.juggle = 8
air.velocity = -2.4,-10
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
p2stateno = 2320
p2facing = 1

[State 0, Explod]
type = Explod
trigger1 =  animelem = 14
anim = 7601
ID = 20002
pos = 65,8
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
sprpriority = 20

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

[Statedef 2320]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -240
kill = 1
absolute = 1
ignorehitpause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -2.4
y = -14

[State 52, 2]
type = Veladd
trigger1 = time >= 2
y = .5

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 10

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2320

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; 禁千参百弐拾伍式・紅散華

[Statedef 3000]
type     = S
movetype = A
physics  = S
juggle   = ifelse((prevstateno=[2510,2515]),0,11)
velset   = 0,0
anim     = 3000
ctrl     = 0
sprpriority = 2

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
poweradd = -2000
movetime = 34
time = 34

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = 1260
trigger2 = prevstateno = 1310
trigger3 = prevstateno = 1750
trigger4 = prevstateno = 1810
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = 2010
trigger2 = prevstateno = 2015
trigger3 = prevstateno = 2510
trigger4 = prevstateno = 2515
time = 5
add = 250,120,210

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6200
pos = 30,-60
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6201
pos = 30,-60
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [1000,1999]
anim = 7500
pos = ifelse(facing=1,-320,0),0
ontop = 1
ownpal = 1
postype = front
bindtime = -1
supermove = 1

[State 2000]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [1000,1999]
anim = 7510
pos = ifelse(facing=1,-320,0),0
ontop = 1
ownpal = 1
postype = front
bindtime = -1
supermove = 1

[State 2000]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [2000,2999]
anim = 7600
pos = ifelse(facing=1,-320,0),0
ontop = 1
ownpal = 1
postype = front
bindtime = -1
supermove = 1

[State 2000]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [2000,2999]
anim = 7610
pos = ifelse(facing=1,-320,0),0
ontop = 1
ownpal = 1
postype = front
bindtime = -1
supermove = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s1,1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,34]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1950]
type = HitDef
trigger1 = AnimElem = 6
attr = S,HT
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 0,0
sparkno = s4010
sparkxy = -15,-65
hitsound = s0,21
guardsound = s8,11
guard.sparkno = s4120
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3010
p2stateno = 3020

[State 1000, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 禁千参百弐拾伍式・紅散華発動

[Statedef 3010]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3010
ctrl     = 0
sprpriority = 5

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 150,0

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0

[State 1100, エフェクト表示]
type = Explod
trigger1 = AnimElem = 1
persistent = 0
anim = F62
postype = P1
pos = 70,0
sprpriority = 10
bindtime = -1

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 1
pos = 65, -25

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2
pos = 70, -10

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 75, -13

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 4
pos = 75, -30

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 5
pos = 75, -50

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 6
pos = 72, -70

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 7
pos = 72, -90

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 8
pos = 90, -108

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 9
pos = 90, -110

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 10
pos = 85, -118

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 45
pos = 62, -25

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -120
kill = 0

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 17
value = -30
kill = 0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 12
freq = 120
time = 15

[State 810,]
type = EnvShake
trigger1 = AnimElem = 17
ampl = 3
freq = 100
time = 5

[State 810,]
type = EnvShake
trigger1 = AnimElem = 20
ampl = 2
freq = 100
time = 63

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 15
value = 5,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 45
value = 9,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 45
value = 15,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 45
value = 5,1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7,13

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 17
value = 17,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 17
value = 7,27
channel = 5

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 45
value = 7,23
channel = 5

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(15) > 0 && AnimElemtime(53) < 0
flag = noshadow

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 15
time = 148
value = 210,0,0
under = -1

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(24) < 0
flag = noBG

[State 2100]
type = Hitadd
trigger1 = AnimElem = 17
value = 1

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 45
attr = S, HA
damage = 300,0
getpower = 0
animtype = up
hitflag = MAF
priority = 3, Hit
pausetime = 0,30
sparkno = -1
hitsound = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-7
air.velocity = -4,-7
air.type = High
air.hittime = 12
fall = 1
fall.recover = 0
envshake.time = 26
envshake.ampl = 14
envshake.freq = 80

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作
[Statedef 3020]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2120]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(11) > 30
flag = noshadow

[State 2100,]
type = Palfx
trigger1 = AnimElemtime(11) = 20
add = -100,-255,-255
time = 150

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3020

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 5130

;---------------------------------------------------------------------------
; 三神技之弐

[Statedef 3100]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3000
ctrl     = 0
sprpriority = 2

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 34
time = 34

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = 1260
trigger2 = prevstateno = 1310
trigger3 = prevstateno = 1750
trigger4 = prevstateno = 1810
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = 2010
trigger2 = prevstateno = 2015
trigger3 = prevstateno = 2510
trigger4 = prevstateno = 2515
time = 5
add = 250,120,210

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6200
pos = 30,-60
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6201
pos = 30,-60
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;[State 2000]
;type = Explod
;triggerall = AnimElem = 2
;trigger1 = prevstateno = [1000,1999]
;anim = 7500
;pos = ifelse(facing=1,-320,0),0
;ontop = 1
;ownpal = 1
;postype = front
;bindtime = -1
;supermove = 1

;[State 2000]
;type = Explod
;triggerall = AnimElem = 2
;trigger1 = prevstateno = [1000,1999]
;anim = 7510
;pos = ifelse(facing=1,-320,0),0
;ontop = 1
;ownpal = 1
;postype = front
;bindtime = -1
;supermove = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s20,0

[State 1500,]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 40

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,34]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 1950]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 0,0
sparkno = s4080
sparkxy = -15,-65
hitsound = s1,112
guardsound = s8,11
guard.sparkno = s4120
ground.type = High
ground.slidetime = 10
ground.hittime = 25
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3110
p2stateno = 3120

[State 1100, エフェクト表示]
type = Explod
trigger1 = AnimElem = 6
persistent = 0
anim = 14000
postype = P1
pos = 25,0
sprpriority = 10
removetime = 23

[State 1000, ステート変更]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
[Statedef 3110]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3100
ctrl     = 0
sprpriority = 5

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(59) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = time = 28
edge = 105,0

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
x = 0

[State 1100, エフェクト表示]
type = Explod
trigger1 = AnimElemtime(10) = 1
persistent = 0
anim = 3120
postype = P1
pos = 79,0
sprpriority = 10
bindtime = -1
trans = addalpha
alpha = 200,256

[State 1100, エフェクト表示]
type = Explod
trigger1 = AnimElemtime(10) = 1
persistent = 0
anim = 3120
postype = P1
pos = 79,0
sprpriority = 10
bindtime = -1
trans = addalpha
alpha = 200,256

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 1
pos = 65, -25

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 2
pos = 70, -10

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 75, -13

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 4
pos = 75, -30

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 5
pos = 75, -50

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 6
pos = 72, -70

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 7
pos = 72, -90

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 8
pos = 90, -108

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 9
pos = 90, -110

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 10
pos = 85, -118

[State 810, 3]
type = TargetBind
trigger1 = AnimElem = 58
pos = 62, -25

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -10
absolute = 1
kill = 0

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 16
trigger3 = AnimElem = 19
trigger4 = AnimElem = 21
trigger5 = AnimElem = 24
trigger6 = AnimElem = 26
trigger7 = AnimElem = 29
trigger8 = AnimElem = 31
trigger9 = AnimElem = 34
trigger10 = AnimElem = 36
trigger11 = AnimElem = 39
trigger12 = AnimElem = 41
trigger13 = AnimElem = 44
trigger14 = AnimElem = 46
trigger15 = AnimElem = 49
trigger16 = AnimElem = 51
trigger17 = AnimElem = 54
value = -20
absolute = 1
kill = 0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 12
freq = 120
time = 15

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,10

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 11
value = 7,27
channel = 5

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 59
value = 7,18

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 10
value = 18,5

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 58
value = 18,11

[State 2100,]
type = AssertSpecial
trigger1 = AnimElemtime(10) > 0 && AnimElemtime(58) < 0
flag = noshadow

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 58
attr = S, HA
damage = 0
getpower = 0
animtype = up
numhits = 0
hitflag = MAF
priority = 3, Hit
pausetime = 0,5
sparkno = -1
hitsound = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-7.5
air.velocity = -6,-7.5
air.type = High
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 70
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 10
envshake.ampl = 7
envshake.freq = 80
p2stateno = 3199

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 15
trigger2 = AnimElem = 24
trigger3 = AnimElem = 27
trigger4 = AnimElem = 42
trigger5 = AnimElem = 48
trigger6 = AnimElemtime(56) = 1
trigger7 = AnimElemtime(56) = 2
trigger8 = AnimElemtime(57) = 1
trigger9 = AnimElemtime(58) = 1
trigger10 = AnimElemtime(58) = 4
time = 1
value = 255,255,255
under = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作
[Statedef 3120]
type    = S
movetype= H
physics = N
velset = 0,0

[State 700,]
type = Palfx
trigger1 = AnimElem = 11
time = 300
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2120]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3110

[State 1830]
type = ChangeState
trigger1 = Animtime = 0
value = 3130

;---------------------------------------------------------------------------
[Statedef 3130]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = DefenceMulSet
trigger1 = 1
value = 1
IgnoreHitPause = 1

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, 1]
type = Veladd
trigger1 = time = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = time >= 0
x = -4

[State 52, 1]
type = VelSet
trigger1 = time = 0
y = -8.8

[State 52, 1]
type = Veladd
trigger1 = time >= 0
y = .47

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5052)
value = 5052

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 3199]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -150
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 8001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 8030

[State 5000, 8]
type = DefenceMulSet
trigger1 = 1
value = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
;相手動作
[Statedef 1234]
type    = S
movetype= H
physics = N
velset = 0,0

[State 700,]
type = Palfx
trigger1 = AnimElem = 11
time = 300
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2120]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3110

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 5300

;Eternal light of moon
[Statedef 3200]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3200
ctrl     = 0
sprpriority = 1000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -6000;-3000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -2000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 3
anim = -1
movetime = 27
time = 29
darken = 0

[state 33]
type = playsnd
trigger1 = animelem = 3
value = s10,2

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1
time = 40
add = 0,0,0
mul = -256,-256,-256
sinadd =  256,256,256,51
invertall = 1
color = 256

[State 0,Explod]
type = Explod
trigger1 = time = 1
anim = 13579
postype = P1
pos = -23,0
sprpriority = 9999
supermove = -1
supermovetime = 99999
bindtime = -1
ownpal = 1
scale = 0.48,0.48
ID = 3000

[State 1000, EnvColor]
type = EnvColor
trigger1 = Time = 4
value = 255,255,255
time = 2
under = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 6300
pos = -20,-80
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 6301
pos = -20,-80
sprpriority = 1001
ownpal = 1
bindtime = 1
supermove = 1

;---------------------------------------------------------
;Super Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 1751
trigger2 = prevstateno = 1260
trigger3 = prevstateno = 1810
anim = f7500
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 1751
trigger2 = prevstateno = 1260
trigger3 = prevstateno = 1810
anim = f7510
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 8
trans = addalpha
alpha = 256, 135
ownpal = 1
;---------------------------------------------------------

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Atraccion"
ID = 3205
stateno = 3205
pos = 0,0
postype = p1
facing = 1
supermove = 1
pausemove = 1

[State 1000, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 2
length = 11
timegap = 1
paladd = 60,20,100
PalContrast = 220,200,350
palcolor = 0
framegap = 3

[State 3000, fterimagetime]
type = Afterimagetime
trigger1 = gametime%2 = 0
time = 2

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(5) > 0
x = 25

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 5
y = -5

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(5) > 0
y = .8

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3201
;---------------------------------------------------------------------------
[Statedef 3201]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3201
ctrl     = 0
sprpriority = 3

[State 1000, 軸位置移動]
type = Posset
trigger1 = time = 0
y = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HT
damage = 0,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
hitsound = -1
ground.type = Low
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
fall = 1
fall.recover = 0
fall.recovertime = 100
air.fall = 1
p1stateno = 2715
p2stateno = 24200
p2facing = 1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,0


[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Target 2
[Statedef 2715]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
velset   = 0,0
anim     = 2715
sprpriority = 2

[State 00];背景の暗転
type = BGPalfx
trigger1 = 1
ignorehitpause = 1
time = 2
mul = 255,0,0;var(7),var(7),var(7)
under = 0

[State 1000, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 2
length = 11
timegap = 1
paladd = 60,20,100
PalContrast = 220,200,350
palcolor = 0
framegap = 3

[State 3000, fterimagetime]
type = Afterimagetime
trigger1 = gametime%2 = 0
time = 2

[State 1000, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -20

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = AnimElem = 1
edge = 110,0

[State -2,]
type = Explod
trigger1 = animelemtime(3) >= 0
trigger1 = Random < 100
anim = 10070
pos = 0,0
postype = p2
sprpriority = 9
bindtime = 1
random = 100,100
ownpal = 1

[State -2,]
type = Explod
trigger1 = animelemtime(3) >= 0
trigger1 = Random < 100
anim = 10071
pos = 0,0
postype = p2
sprpriority = 9
bindtime = 1
random = 100,100
ownpal = 1

[State -2,]
type = Explod
trigger1 = animelemtime(3) >= 0
trigger1 = Random < 100
anim = 10072
pos = 0,0
postype = p2
sprpriority = 9
bindtime = 1
random = 100,100
ownpal = 1

[State -2,]
type = Explod
trigger1 = animelemtime(3) >= 0
trigger1 = Random < 100
anim = 10073
pos = 0,0
postype = p2
sprpriority = 9
bindtime = 1
random = 100,100
ownpal = 1

[State -2,]
type = Explod
trigger1 = animelemtime(3) >= 0
trigger1 = Random < 100
anim = 10074
pos = 0,0
postype = p2
sprpriority = 9
bindtime = 1
random = 100,100
ownpal = 1

[State 810,]
type = EnvShake
trigger1 = AnimElem = 3
ampl = -4
freq = 100
time = 15

[State 1100, エフェクト表示]
type = Explod
trigger1 = AnimElem = 3
persistent = 0
anim = 2720
postype = P1
pos = 20,-20
sprpriority = 9
bindtime = -1

[State 1100, エフェクト表示]
type = Explod
trigger1 = AnimElem = 3
persistent = 0
anim = 2725
postype = P1
pos = 20,0
sprpriority = -1
bindtime = -1

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 3
anim = 7420
sprpriority = -5
postype = p1
pos = 0,84
under = 0
ownpal = 1
movetime = 0

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 3
anim = 7425
sprpriority = -5
postype = p1
pos = 0,80
under = 0
ownpal = 1
movetime = 0

[State 3035, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 45
ampl = -20
freq = 150
phase = 150

[state 333]
type = envcolor
trigger1 = AnimElem = 3
value = 255,255,255
under = 0
time = 10

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = f7,5

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s777,666

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
pos = 40, -55

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 38, -25

[State 810, 3]
type = TargetBind
Trigger1 = AnimElem = 3
pos = 44, 2

[state 333]
type = targetstate
trigger1 = AnimElem = 3
value = 2330

[State 1000, 軸位置移動]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, 軸位置移動]
type = Velset
trigger1 = AnimElem = 1
x = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s777,555

[State 1000, 軸位置移動]
type = Posadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 20
        
[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [5,65]
time = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 3203]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1000, PalFX]
type = PalFX
trigger1 = time = 20
time = 120
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 1
invertall = 1

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2120]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3203

[State 1830]
type = changestate
trigger1 = Animtime = 0
value = 24200
;-------------------------------------------------------------------------------
[Statedef 24200]
type    = A
movetype= H
physics = S
velset = 0,0

[State 1000, PalFX]
type = PalFX
trigger1 = time = 5
time = 90
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 1
invertall = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 3
value = -ifelse(lifemax*.45<450,450,lifemax*.45)
kill = 1
absolute = 1
ignorehitpause = 1

[State 192,]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 24200
;-------------------------------------------------------------------------------
;Atraccion
[Statedef 3205]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3205

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA

[State 3110, 2]
type = BindToParent
trigger1 = time >= 0
facing = ifelse(parent, p2bodydist x <= 0, -1, 1)
pos = 0,0

[State 1000, 0]
type = PlayerPush
trigger1 = 1
value = 1

[state a]
type = destroyself
trigger1 = root,stateno != 3200

;---------------------------------------------------------------------------
[Statedef 13579]
type = A
ctrl = 0
anim = 13579
velset = 0,0
movetype = A
physics = N
sprpriority = 20

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------[]
[state a]
type = posset
trigger1 = time = 0
y = 0
;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 2330]
type    = A
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -7
y = -23

[State 52, 2]
type = Veladd
trigger1 = time >= 2
y = .5

[State 1000, PalFX]
type = PalFX
trigger1 = time = 0
time = 95
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1

[State 810,]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
ampl = 10
freq = 120
time = 10

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2320

[State 1830]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;---------------------------------------------------------------------------
;ＭＡＸ禁千弐百拾壱式・八稚女
[Statedef 3500]
type = S
physics = S
movetype = A
ctrl = 0
anim = 3500
sprpriority = 2

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State -2, VelSet]
type = VelSet
trigger1 = !(PrevStateNo = [200,700))
trigger1 = Time = 0
x = 0

[State -2, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State -2, VelSet]
type = VelSet
trigger1 = Time = 2
x = 0
y = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 6, < 0
value = SCA

[State 3000, Width]
type = Width
trigger1 = 1
edge = 40,20

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 3
value = s7,14

[State 3000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = NoFG

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 0
time = 27
movetime = 27
anim = -1
darken = 0
p2defmul = 1

[State 3000, EnvColor]
type = EnvColor
trigger1 = Time = 2
trigger2 = Time = 4
trigger3 = MoveHit = 1
value = 225,2,2
under = 1
time = 1

[State 3000, EnvColor]
type = EnvColor
trigger1 = Time = 3
trigger2 = Time = 5
value = 255,255,255
under = 1
time = 1

[State 3000, EnvColor]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
under = 1
time = 24

[State 3000, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,HA
damage = 0
animtype = Hard
air.animtype = Hard
ground.type = High
guardflag = M
hitflag = MAF
priority = 7,Miss
sparkno = S4010
guard.sparkno = S4120
sparkxy = -30,-40
hitsound = s0,21
guardsound = s8,11
pausetime = 2,2
guard.pausetime = 11,9
ground.hittime = 17
guard.slidetime = 17
guard.ctrltime = 17
air.hittime = 60
ground.velocity = 0
air.velocity = 0
guard.velocity = -10.35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .55
getpower = 0,0
givepower = 15,15
ID = 3500
numhits = 0
p1stateno = 3501
p2stateno = 3510
p2facing = 1

[State 2000]
type = Explod
trigger1 = time = 5
anim = 6200
pos = 20,-115
sprpriority = -5
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 14
anim = 6201
pos = 20,-115
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 5, >= 0
x = 10

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 6,>= 0
x = ifelse((p2bodydist x = [-5,20]),3,12)

[State 1000, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "Cheap"
ID = 2000
stateno = 2048
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 3000, BGPalFX]
type = BGPalFX
trigger1 = Time >= 29
time = 2
mul = 158,158,158
invertall = 1
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = -1
trans = None
timegap = 3
framegap = 1
length = 4
ignorehitpause = 1
paladd = 0,0,0
PalContrast = 0,0,0
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 1000, movehitreset]
type = movehitreset
triggerall = movehit > 0
trigger1 = numtarget(3500) = 0
trigger2 = numtarget(3500) > 0
trigger2 = target(3500),Movetype != H

[State 1000, p2GCRUSH]
type = targetstate
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 2028
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 3501
ctrl = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = Animelem = 9,>= 13
trigger2 = MoveGuarded
value = 2005

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElem = 12
time = 0

[State -2, CtrlSet]
type = CtrlSet
triggerall = !Win
trigger1 = AnimTime = -1
value = 1

[State 3000, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;P1StateDef
[Statedef 3501]
type = S
physics = N
movetype = A
ctrl = 0
anim = 3501
velset = 0,0
sprpriority = 2

[State 3501, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3501, Width]
type = Width
trigger1 = 1
edge = 60,30

[State 1000,]
type = TargetLifeadd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 9
trigger3 = AnimElem = 17
trigger4 = AnimElem = 20
trigger5 = AnimElem = 26
trigger6 = AnimElem = 32
trigger7 = AnimElem = 37
trigger8 = AnimElem = 44
value = -20
absolute = 1
kill = 0

[State 1000,]
type = TargetLifeadd
trigger1 = AnimElem = 52
trigger2 = AnimElem = 54
trigger3 = AnimElem = 56
trigger4 = AnimElem = 58
trigger5 = AnimElem = 60
value = -30
absolute = 1
kill = 0

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 63
value = -150
absolute = 1
kill = 1

[State 3501, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1, >= 0 && AnimElem = 49, < 0
pos = 47,0
ID = 3500

[State 3501, TargetBind]
type = TargetBind
trigger1 = AnimElem = 49, >= 0 && AnimElem = 63, < 0
pos = 30,0
ID = 3500

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 14
value = S1,118
volume = 255

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 36
value = S7,24
volume = 255

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 51
value = S7,25
volume = 255

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 63
value = S1,121
volume = 255
channel = 1

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6, = 1
value = S0,20

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9, = 1
value = S0,21

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 17, = 1
value = S15,0

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 26, = 1
value = S15,0

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 32, = 1
value = S15,0

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 37, = 1
value = S15,0

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 44, = 1
value = S15,0

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 50, = 1
value = S15000,0

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 52, = 1
trigger2 = AnimElem = 54, = 1
trigger3 = AnimElem = 56, = 1
trigger4 = AnimElem = 58, = 1
trigger5 = AnimElem = 60, = 1
value = S777,222

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 63, = 1
value = S666,2

[State 3501, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 64, = 1
value = S666,2

[State 3501, EnvColor]
type = EnvColor
trigger1 = AnimElem = 6, = 1
trigger2 = AnimElem = 9, = 1
trigger3 = AnimElem = 17, = 1
trigger4 = AnimElem = 26, = 1
trigger5 = AnimElem = 32, = 1
trigger6 = AnimElem = 37, = 1
trigger7 = AnimElem = 44, = 1
trigger8 = AnimElem = 52, = 1
trigger9 = AnimElem = 54, = 1
trigger10 = AnimElem = 56, = 1
trigger11 = AnimElem = 58, = 1
trigger12 = AnimElem = 60, = 1
value = 225,0,0
under = 2
time = 1

[State 3501, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6, = 1
trigger2 = AnimElem = 9, = 1
trigger3 = AnimElem = 17, = 1
trigger4 = AnimElem = 20, = 1
trigger5 = AnimElem = 26, = 1
trigger6 = AnimElem = 32, = 1
trigger7 = AnimElem = 37, = 1
trigger8 = AnimElem = 44, = 1
value = 1
ID = 3500

[State 3501, E.Shake]
type = EnvShake
trigger1 = AnimElem = 52, = 1
trigger2 = AnimElem = 54, = 1
trigger3 = AnimElem = 56, = 1
trigger4 = AnimElem = 58, = 1
trigger5 = AnimElem = 60, = 1
Time = 15
ampl = -5
freq = 255
phase = 10

[State 3501, E.Shake]
type = EnvShake
trigger1 = AnimElem = 63, = 1
Time = 20
ampl = -5
freq = 255
phase = 10

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 6, = 2
anim = 4010
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 9, = 2
anim = 4010
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 16, = 1
anim = 2003
sprpriority = 5
postype = P1
pos = 0,0
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
trans = AddAlpha
alpha = 230,70

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 17, = 2
anim = 4070
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 17, = 2
anim = 7007
sprpriority = 5
postype = P1
pos = 44,-74
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 23, = 1
anim = 2004
sprpriority = 5
postype = P1
pos = 0,0
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
trans = AddAlpha
alpha = 230,70

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 26, = 2
anim = 4070
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 26, = 2
anim = 7007
sprpriority = 5
postype = P1
pos = 38,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 31, = 1
anim = 2002
sprpriority = 5
postype = P1
pos = 0,0
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
trans = AddAlpha
alpha = 230,70

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 32, = 2
anim = 4070
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 32, = 2
anim = 7007
sprpriority = 5
postype = P1
pos = 52,-84
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 36, = 1
anim = 2003
sprpriority = 5
postype = P1
pos = 0,0
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
trans = AddAlpha
alpha = 230,70

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 37, = 2
anim = 4070
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 37, = 2
anim = 7007
sprpriority = 5
postype = P1
pos = 24,-70
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 43, = 1
anim = 2002
sprpriority = 5
postype = P1
pos = 0,0
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
trans = AddAlpha
alpha = 230,70

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 44, = 2
anim = 4070
sprpriority = 5
postype = P1
pos = 48,-64
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3501, Explod]
type = Explod
trigger1 = AnimElem = 50, = 1
anim = 4040
sprpriority = 5
postype = P1
pos = 28,-78
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0

[State 3501, Explod]
type = Explod
trigger1 = AnimElem = 52, = 1
trigger2 = AnimElem = 54, = 1
trigger3 = AnimElem = 56, = 1
trigger4 = AnimElem = 58, = 1
trigger5 = AnimElem = 60, = 1
anim = 10074
sprpriority = 5
postype = P1
pos = 17,-88
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0


[State 3501, Explod]
type = Explod
trigger1 = AnimElem = 52, = 1
trigger2 = AnimElem = 54, = 1
trigger3 = AnimElem = 56, = 1
trigger4 = AnimElem = 58, = 1
trigger5 = AnimElem = 60, = 1
anim = 10074
sprpriority = 5
postype = P1
pos = 49,-85
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0


[State 3501, Explod]
type = Explod
trigger1 = AnimElem = 52, = 1
trigger2 = AnimElem = 54, = 1
trigger3 = AnimElem = 56, = 1
trigger4 = AnimElem = 58, = 1
trigger5 = AnimElem = 60, = 1
anim = 10074
sprpriority = 5
postype = P1
pos = 28,-72
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0

[State 3501, Explod]
type = Explod
trigger1 = AnimElem = 63, = 1
anim = 10075
sprpriority = 5
postype = P1
pos = 28,-85
facing = 1
bindtime = 1
supermove = 0
ignorehitpause = 0

[State 3501, AfterImageTime]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3501, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
mul = 158,158,158
invertall = 1
ignorehitpause = 1

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 6000;3000
triggerall = AnimElem = 64, >= 0 && AnimElem = 66, < 0
trigger1 = var(59) = 0
trigger1 = command = "3200"
value = 3200

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 6000;3000
triggerall = AnimElem = 64, >= 0 && AnimElem = 66, < 0
trigger1 = var(59) = 0
trigger1 = command = "39000"
value = 39000

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 2000
triggerall = AnimElem = 64, >= 0 && AnimElem = 66, < 0
trigger1 = var(59) = 0
trigger1 = command = "38000"
value = 38000

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 2000
triggerall = AnimElem = 64, >= 0 && AnimElem = 66, < 0
trigger1 = var(59) = 0
trigger1 = command = "3100"
value = 3100

[State 3021, ステート変更]
type = ChangeState
triggerall = power >= 1000
triggerall = AnimElem = 64, >= 0 && AnimElem = 66, < 0
trigger1 = var(59) = 0
trigger1 = command = "20002"
value = 20002

[State 3021, ステート変更]
type = ChangeState
triggerall = AnimElemTime(7) >= 2 && AnimElemTime(10) < 0
trigger1 = var(59) = 0
trigger1 = command = "1300"
trigger2 = var(59) = 0
trigger2 = command = "1310"
value = 1310

[State -2, TargetDrop]
type = TargetDrop
trigger1 = AnimTime = -1

[State -2, CtrlSet]
type = CtrlSet
triggerall = !Win
trigger1 = AnimTime = -1
value = 1

[State 3501, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;P2StateDef
[Statedef 3510]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State -2, DestroySelf]
type = DestroySelf
trigger1 = IsHelper
ignorehitpause = 1

[State -2, DefenceMulSet]
type = DefenceMulSet
trigger1 = Time = 0
value = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, SelfState]
type = SelfState
trigger1 = Time > 500
trigger1 = P2StateNo != [3000,3100)
value = 5050

[State -2, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3510

[State -2, PalFX]
type = PalFX
trigger1 = AnimElem = 2
time = 300
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1
ignorehitpause = 1

[State 3010, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1

[State 3010, VelSet]
type = VelSet
trigger1 = AnimElem = 26
x = -6
y = -8

[State 3010, VelAdd]
type = VelAdd
Trigger1 = AnimElem = 26, >= 0
y = .48

[State 3010, SelfState] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;Freeze Yamibarai
[Statedef 2500]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2500
ctrl     = 0
poweradd = 0
sprpriority = 2

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S888,888

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 32
time = 32
darken = 0
p2defmul = 1

[State 100, EnvColor]
type = EnvColor
trigger1 = Time = [2,4]
value = 255,255,255
time = 1
under = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = time = 5
anim = 6100
pos = -12,-92
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 12
anim = 6101
pos = -12,-92
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000, 6]
type = PlaySnd
trigger1 = time = 5
value = s10,0
volumescale = 150

[State 1500,]
type = NotHitBy
triggerall = PalNo = [1,5]
trigger1 = time = [0,30]
value = SCA

[State -3,]
type = NotHitBy
triggerall = PalNo = [6,12]
Trigger1 = 1
value = SCA

[State 1000, Explod]
type = Explod
trigger1 = animelem = 2
anim = 666
ID = 1100
pos = -14,-89
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
supermove = 1
pausemove = 1
sprpriority = 10
removeongethit = 1

[State 902, 3]
type = ChangeState
triggerall = AnimElemtime(2) > 30
trigger1 = time >= 150
trigger2 = command != "holdx"
trigger2 = command != "holdy"
trigger3 = var(59) = 1
value = 2501

;-------------------------------------------------------------------------------
[Statedef 2501]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2501
ctrl     = 0
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 666
id = 1
postype = P1
pos = -11,-96
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2
id = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 666
id = 2
postype = P1
pos = -13,-99
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 2

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 666
id = 3
postype = P1
pos = -26,-65
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 3

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 666
id = 4
postype = P1
pos = 30,-60
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 5
id = 4

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 666
id = 4
postype = P1
pos = 31,-77
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 6
id = 4

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 666
id = 5
postype = P1
pos = 27,-86
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 7
id = 5

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 1100

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 7
persistent = 0
anim = 11111
postype = P1
pos = 32,-98
sprpriority = 10
bindtime = -1

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1605
postype = P1
pos = 0,0
sprpriority = 10
removetime = 20
bindtime = -1

[State 1000, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 5

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S18,11

[State 10000, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = player
name = "Freeze Yamibarai"
ID = 1000
stateno = 2504
pos = 35,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Yamibarai Helper
[StateDef 2504]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1620
poweradd = 0
sprpriority = 8

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1000, VelAdd]
type = Velset
trigger1 = 1
x = 3

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA, NP, SP, HP, HA
sparkno = -1
numhits = 0
hitsound = -1
p2stateno = 2028
ignorehitpause = 1

[State 1000,HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, NP, SP, HP, HA

[State 1000, HitOverride]
type = HitOverride
trigger1 = 1
time = -1
attr = SCA, NP, SP, HP, HA
stateno = 2504

[State 1000, ChangeState]
type = ChangeState
trigger1 = p2statetype != A
trigger1 = p2statetype != L
trigger2 = p2statetype = A
trigger2 = p2movetype != H
triggerall = p2bodydist X < 5
value = 2506

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 2506
;-------------------------------------------------------------------------------
;Freeze Yamibarai 2
[Statedef 2550]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2500
ctrl     = 0
poweradd = 0
sprpriority = 2

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S888,888

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 32
time = 32
darken = 0
p2defmul = 1

[State 100, EnvColor]
type = EnvColor
trigger1 = Time = [2,4]
value = 255,255,255
time = 1
under = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = time = 5
anim = 6100
pos = -12,-92
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 12
anim = 6101
pos = -12,-90
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000, 6]
type = PlaySnd
trigger1 = time = 5
value = s10,0
volumescale = 150

[State 1500,]
type = NotHitBy
triggerall = PalNo = [1,5]
trigger1 = time = [0,30]
value = SCA

[State -3,]
type = NotHitBy
triggerall = PalNo = [6,12]
Trigger1 = 1
value = SCA

[State 1000, Explod]
type = Explod
trigger1 = animelem = 2
anim = 666
ID = 1100
pos = -14,-89
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
supermove = 1
pausemove = 1
sprpriority = 10
removeongethit = 1

[State 902, 3]
type = ChangeState
triggerall = AnimElemtime(2) > 30
trigger1 = time >= 150
trigger2 = command != "holdx"
trigger2 = command != "holdy"
trigger3 = var(59) = 1
value = 2551

;-------------------------------------------------------------------------------
[Statedef 2551]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2501
ctrl     = 0
sprpriority = 2

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 666
id = 1
postype = P1
pos = -11,-96
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2
id = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 666
id = 2
postype = P1
pos = -13,-99
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 2

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 666
id = 3
postype = P1
pos = -26,-65
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 3

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 666
id = 4
postype = P1
pos = 30,-60
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 5
id = 4

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 666
id = 4
postype = P1
pos = 31,-77
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 6
id = 4

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 666
id = 5
postype = P1
pos = 27,-86
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 7
id = 5

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 1100

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 7
persistent = 0
anim = 11111
postype = P1
pos = 32,-98
sprpriority = 10
bindtime = -1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 1100

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1605
postype = P1
pos = 0,0
sprpriority = 10
removetime = 20
bindtime = -1

[State 1000, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 5

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S18,11

[State 10000, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = player
name = "Freeze Yamibarai"
ID = 1000
stateno = 2554
pos = 25,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Impacto
[StateDef 2554]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1620
poweradd = 0
sprpriority = 8

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1000, VelAdd]
type = Velset
trigger1 = 1
x = 6

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA, NP, SP, HP, HA
sparkno = -1
numhits = 0
hitsound = -1
p2stateno = 2028
ignorehitpause = 1

[State 1000,HitBy]
type = HitBy
trigger1 = 1
time = -1
value = SCA, NP, SP, HP, HA

[State 1000, HitOverride]
type = HitOverride
trigger1 = 1
time = -1
attr = SCA, NP, SP, HP, HA
stateno = 2554

[State 1000, ChangeState]
type = ChangeState
trigger1 = p2statetype != A
trigger1 = p2statetype != L
trigger2 = p2statetype = A
trigger2 = p2movetype != H
triggerall = p2bodydist X < 5
value = 2506

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 2506
;-------------------------------------------------------------------------------
;Impacto
[StateDef 2506]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 2502
poweradd = 0
sprpriority = 5

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 700, Explod]
type = Explod
trigger1 = time = 0
anim = 2504
postype = P1
pos = 0,0
persistent = 0
sprpriority = 9
ownpal = 1
bindtime = -1
removetime = -2
removeongethit = 1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S18,2

[State 1000, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, Explod]
type = Explod
trigger1 = moveguarded = 1
anim = 10070
pos = 0,-70
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -9
phase = 120
freq = 120

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = moveguarded = 1
value = S18,6

[State 3402, hitdef]
type = hitdef
triggerall = Roundstate = 2
trigger1 = time = 0
attr = C, SP
hitflag = MAF
guardflag = M
damage = 0,10
sprpriority = 8
animtype = Hard
;priority = 4,Hit
guard.pausetime = 0, 1
sparkno = s4010
guard.sparkno = s4120
sparkxy = 10, -44
hitsound = s0,21
guardsound = s8,11
ground.type = Low
air.type = Low
guard.slidetime = 21
guard.hittime = 15
guard.velocity = -15
air.hittime = 0
guard.ctrltime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2620

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
[Statedef 2505]
type    = S
physics = N
movetype= I
anim = 999
ctrl = 0
velset = 0,0

[state a]
type = posset
trigger1 = ishelper(2525)
trigger1 = enemy(0),stateno = 2620
x = enemy(0),pos x - 0
y = enemy(0),pos y - 0

[state a]
type = posset
trigger1 = ishelper(2526)
trigger1 = enemy(1),stateno = 2620
x = enemy(1),pos x - 0
y = enemy(1),pos y - 0

[State 700, Explod]
type = Explod
trigger1 = ishelper(2525)
trigger1 = numexplod(2625) = 0
trigger1 = enemy(0),movetype = H
trigger1 = enemy(0),stateno = 2620
anim = 2625
ID = 2625
postype = P1
pos = 0,0
persistent = 0
sprpriority = -5
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 700, Explod]
type = Explod
trigger1 = ishelper(2526)
trigger1 = numexplod(2626) = 0
trigger1 = enemy(1),movetype = H
trigger1 = enemy(1),stateno = 2620
anim = 2625
ID = 2626
postype = P1
pos = 0,0
persistent = 0
sprpriority = -5
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 700, Explod]
type = Explod
trigger1 = enemy(0),movetype = H
trigger1 = enemy(0),prevstateno = 2620
anim = 2630
postype = P1
pos = 0, 0
persistent = 0
sprpriority = -5
ownpal = 1
persistent = 0
removeongethit = 1

[State 700, Explod]
type = Explod
trigger1 = enemy(1),movetype = H
trigger1 = enemy(1),prevstateno = 2620
anim = 2630
postype = P1
pos = 0, 0
persistent = 0
sprpriority = -5
ownpal = 1
persistent = 0
removeongethit = 1

[State 192, ]
type = AssertSpecial
trigger1 = enemy(0),movetype = H
trigger1 = enemy(0),stateno = 2620
trigger2 = enemy(1),movetype = H
trigger2 = enemy(1),stateno = 2620
flag = nojugglecheck

[State 1001,]
type = RemoveExplod
trigger1 = numexplod(2625)
trigger1 = enemy(0),stateno != 2620
ID = 2625

[State 1001,]
type = RemoveExplod
trigger1 = numexplod(2626)
trigger1 = enemy(1),stateno != 2620
ID = 2626
;----------------------------------
;Efecto de fuego
[State 1000, explods]
type = Explod
trigger1 = Random < 150
anim = 12501
pos = -20,-40
postype = p1
sprpriority = 9
bindtime = 1
random = 80,60
ownpal = 1

[State 1000, explods]
type = Explod
trigger1 = Random < 20
anim = 6111
pos = -20,-40
postype = p1
sprpriority = 9
bindtime = 1
random = 80,60
ownpal = 1

[state 1000, destroyself]
type = destroyself
trigger1 = ishelper(2525)
trigger1 = enemy(0),movetype = H
trigger1 = enemy(0),stateno != 2620
trigger2 = ishelper(2526)
trigger2 = enemy(1),movetype = H
trigger2 = enemy(1),stateno != 2620
;-------------------------------------------------------------------------------
;Doble Freeze Yamibarai
[Statedef 2540]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2500
ctrl     = 0
poweradd = 0
sprpriority = 2

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S888,888

[State 2000, 6]
type = PlaySnd
trigger1 = time = 5
value = s10,1
volumescale = 150

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 32
time = 32
darken = 0

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = animelem = 1
time = 160
mul = 158,158,158
invertall = 1
ignorehitpause = 1

[State 100, EnvColor]
type = EnvColor
trigger1 = Time = [2,4]
value = 255,255,255
time = 1
under = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = time = 5
anim = 6200
pos = -12,-92
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 12
anim = 6201
pos = -12,-92
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1500,]
type = NotHitBy
triggerall = PalNo = [1,5]
trigger1 = time = [0,30]
value = SCA

[State -3,]
type = NotHitBy
triggerall = PalNo = [6,12]
Trigger1 = 1
value = SCA

[State 1000, Explod]
type = Explod
trigger1 = animelem = 2
anim = 666
ID = 1100
pos = -14,-89
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
supermove = 1
pausemove = 1
sprpriority = 10
removeongethit = 1

[State 902, 3]
type = ChangeState
triggerall = AnimElemtime(2) > 30
trigger1 = time = 150
trigger2 = command != "holdx"
trigger2 = command != "holdy"
trigger3 = var(59) = 1
value = 2541

;-------------------------------------------------------------------------------
[Statedef 2541]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2501
ctrl     = 0
sprpriority = 2

[State 1500,]
type = NotHitBy
trigger1 = var(58) = -123 
value = SCA
time = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 666
id = 1
postype = P1
pos = -11,-96
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2
id = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 666
id = 2
postype = P1
pos = -13,-99
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 2

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 666
id = 3
postype = P1
pos = -26,-65
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 3

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 666
id = 4
postype = P1
pos = 30,-60
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 5
id = 4

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 666
id = 4
postype = P1
pos = 31,-77
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 6
id = 4

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 666
id = 5
postype = P1
pos = 27,-86
sprpriority = 9
removetime = -1
bindtime = -1
removeongethit = 1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 7
id = 5

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 1100

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 7
persistent = 0
anim = 11111
postype = P1
pos = 32,-98
sprpriority = 10
bindtime = -1

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 1100

[State 10000, Helper]
type = Helper
trigger1 = animelem = 4
helpertype = player
name = "Freeze Yamibarai"
stateno = 2542
pos = 58,5
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1605
postype = P1
pos = 0,0
sprpriority = 10
removetime = 20
bindtime = -1

[State 1000, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 5

[State 1000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[StateDef 2542]
type = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 2506
poweradd = 0
sprpriority = 2

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
flag2 = invisible

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger2 = var(0) < 9
trigger2 = animelem = 6,= 2
v = 0
value = 1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = var(0) < 9
triggerall = animelem = 6,= 2
x = 33
y = 0

[State 1000, Helper]
type = Helper
trigger1 = time = 0
trigger2 = var(0) < 9
trigger2 = animelem = 6,= 2
helpertype = player
name = "Explosiones"
ID = 1000
stateno = 2543
pos = 0,0
postype = p1
facing = 1
ownpal = 1

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA, AA, AP, AT
sparkno = -1
numhits = 0
hitsound = -1
p2stateno = 2620
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = var(0) < 9
triggerall = animelem = 6,= 2
value = 2506
elem = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(0) = 9
trigger1 = root,PalNo = [1,5]
trigger1 = !numhelper(1000)
trigger2 = FrontEdgeBodyDist < -150
trigger3 = Time = 200
;-------------------------------------------------------------------------------
;doble Avansando
[StateDef 2543]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 2506
poweradd = 0
sprpriority = 3

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000,NotHitBy]
type = Nothitby
trigger1 = 1
value = SCA

[State 1000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = parent,var(0) = 8
id = 2504
anim = 2504
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
sprpriority = 9

[State 1000, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 10

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S666,2
volume = 500
persistent = 9

[State 3402, Hitdef]
type = hitdef
triggerall = Roundstate = 2
trigger1 = time = 0
attr = C, SP
hitflag = MAF
guardflag = M
sprpriority = 8
damage = 40,20
animtype = Hard
priority = 7,Hit
sparkno = s4010
guard.sparkno = s6077
sparkxy = 10, -44
hitsound = s0,21
guardsound = s8,11
ground.type = Low
air.type = Low
guard.slidetime = 18
guard.hittime = 19
guard.velocity = -7
air.hittime = 0
guard.ctrltime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 2620

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
;Colicion
[StateDef 2544]
type = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 2505
poweradd = 0

[state 1000]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 1000]
type = hitby
trigger1 = 1
value = SCA,NP,SP
time = -1

[state 1000]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP
stateno = 2514

[state 1000, destroyself]
type = destroyself
Trigger1 = animtime = 0
trigger2 = parent,movetype = H
trigger3 = parent,time = 17
;-------------------------------------------------------------------------------
[Statedef 2505]
type    = S
physics = N
movetype= I
anim = 999
ctrl = 0
velset = 0,0

[State 700, Explod]
type = Explod
trigger1 = time = 0
anim = 2625
ID = 2625
postype = P2
pos = 0,6
persistent = 0
sprpriority = 9
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 700, Explod]
type = Explod
trigger1 = time = 0
anim = 2630
ID = 2625
postype = P2
pos = 0,6
persistent = 0
sprpriority = -5
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 192, ]
type = AssertSpecial
trigger1 = enemy,movetype = H
trigger1 = enemy,stateno = 2620
flag = nojugglecheck

[State 1001,]
type = RemoveExplod
trigger1 = enemy,movetype = H
trigger1 = enemy,stateno != 2620
ID = 2625
;----------------------------------
;Efecto de fuego
[State 1000, explods]
type = Explod
trigger1 = Random < 200
anim = 12501
pos = -20,-40
postype = p1
sprpriority = 9
bindtime = 1
random = 80,60
ownpal = 1

[State 1000, explods]
type = Explod
trigger1 = Random < 30
anim = 6111
pos = -20,-40
postype = p1
sprpriority = 9
bindtime = 1
random = 80,60
ownpal = 1

[state 1000, destroyself]
type = destroyself
trigger1 = enemy,movetype = H
trigger1 = enemy,stateno != 2620
;---------------------------------------------------------------------------
;相手動作
[Statedef 2620]
movetype= H
velset = 0,0
ctrl = 0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1

[State 700,]
type = Palfx
trigger1 = time = 0
trigger2 = time = 10
trigger3 = time = 20
trigger4 = time = 30
trigger5 = time = 40
trigger6 = time = 50
trigger7 = time = 60
trigger8 = time = 70
trigger9 = time = 80
trigger10 = time = 90
trigger11 = time = 100
trigger12 = time = 110
trigger13 = time = 120
trigger14 = time = 130
trigger15 = time = 140
trigger16 = time = 150
trigger17 = time = 160
trigger18 = time = 170
trigger19 = time = 180
trigger20 = time = 190
time = 80
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1

[State 52, 1]
type = VelSet
trigger1 = time >= 0
x = 0
y = 0

[State 6000, 3]
type = StateTypeSet
trigger1 = Pos Y = 0
statetype = S

[State 6000, 3]
type = StateTypeSet
trigger1 = Pos Y != 0
trigger2 = AnimTime = 0
statetype = A

[State 2620, lifeadd]
type = lifeadd
trigger1 = gametime%30 = 0
trigger1 = time >= 30
value = -Ceil(Const(data.life)*0.03)
absolute = 1
ignorehitpause = 1

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [0,25]
trigger1 = timemod = 2,0
time = 1
movetime = 0

[State 1830]
type = ChangeAnim
trigger1 = anim = [120,159]
Trigger1 = Time < 12
value = 100
elem = 3

[State 1000, PosAdd]
type = PosAdd
trigger1 = time = 0
trigger2 = time = 2
trigger3 = time = 4
trigger4 = time = 6
trigger5 = time = 8
trigger6 = time = 10
x = 1

[State 1000, PosAdd]
type = PosAdd
trigger1 = time = 1
trigger2 = time = 3
trigger3 = time = 5
trigger4 = time = 7
trigger5 = time = 9
trigger6 = time = 11
x = -1

[State , RemoveExplod0]
type = RemoveExplod
trigger1 = ishelper
trigger1 = time = 0

[state haha]
type = destroyself
trigger1 = time = 0

[State 1000, defencemulSet]
type = defencemulSet
trigger1 = 1
value = 1

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2635

[State 1830]
type = ChangeState
trigger1 = Animtime = 0
value = 2630

;-------------------------------------------------------------------------------
;吹っ飛び
[Statedef 2630]
type = A
movetype= H
physics  = N
ctrl = 0

[State 2630, PalFX]
type = PalFX
trigger1 = time = 0
time = 1

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = -4
y = -6

[State 52, 1]
type = Veladd
trigger1 = time >= 0
y = .4

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5050

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100
;-------------------------------------------------------------------------------

;Nighttime Explosion
[Statedef 23000]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 23000
ctrl     = 0
sprpriority = 3

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
movetime = 48
time = 60
darken = 1
p2defmul = 1.2

[state 2]
type = playsnd
trigger1 = animelem = 7
value = s10,1

[State 1000, BGPalFX]
type = BGPalFX
trigger1 = animelem = 7
time = 120
mul = 158,158,158
invertall = 1
ignorehitpause = 1

[State 1000, EnvColor]
type = null;EnvColor
trigger1 = Time = 24
value = 255,255,255
time = 2
under = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 7
anim = 6200
pos = -25,-70
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 7
anim = 6201
pos = -25,-70
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1500,]
type = NotHitBy
trigger1 = time = [0,60]
value = SCA

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S7,333
persistent = 9
channel = 4

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = S7,444
persistent = 9
channel = 4

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 55
trigger2 = time = 65
trigger3 = time = 75
trigger4 = time = 85
trigger5 = time = 95
trigger6 = time = 105
value = S5,1

[State 1000, EnvShake]
type = EnvShake
trigger1 = time = 55
trigger2 = time = 65
trigger3 = time = 75
trigger4 = time = 85
trigger5 = time = 95
trigger6 = time = 105
time = 15
freq = 100
ampl = -8
persistent = 9

;------------------------

[State 3000, Projectile]
type = Projectile
trigger1 = time = 55
projID = 23000
projanim = 2315
projremove = 0
projpriority = 8
projhitanim = -1
projremovetime = 36
ownpal = 1
offset = 20,0
velocity = 0
attr = A, HA
animtype = up
damage = 0,10
hitflag = MAF
guardflag = M
hitsound = s9,10
guardsound = s8,11
pausetime = 0,6
sparkno = s4010
guard.sparkno = s4120
sparkxy = 20,0
ground.type = High
ground.slidetime = 20
ground.hittime = 21
ground.velocity = -8,-5
palfx.time = 35
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 5
envshake.freq = 120
envshake.phase = 120
air.velocity = -8,-5
fall.recover = 0
fall = 1
getpower = 0,0
p2stateno = 23099

[State 0, Explod]
type = Explod
trigger1 = time = 55
anim = 7601
ID = 20002
pos = 65,8
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
sprpriority = 20

[State 3000, Projectile]
type = Projectile
trigger1 = time = 65
projID = 23000
projanim = 2315
projremove = 0
projpriority = 8
projhitanim = -1
projremovetime = 36
ownpal = 1
offset = 80,0
velocity = 0
attr = A, HA
animtype = up
damage = 0,10
hitflag = MAF
guardflag = M
hitsound = s9,10
guardsound = s8,11
pausetime = 0,6
sparkno = s4010
guard.sparkno = s4120
sparkxy = 20,-100
ground.type = High
ground.slidetime = 20
ground.hittime = 21
ground.velocity = -8,-5
palfx.time = 35
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 5
envshake.freq = 120
envshake.phase = 120
air.velocity = -8,-5
fall.recover = 0
fall = 1
getpower = 0,0
p2stateno = 23099

[State 0, Explod]
type = Explod
trigger1 = time = 65
anim = 7601
ID = 20002
pos = 125,8
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
sprpriority = 20

[State 3000, Projectile]
type = Projectile
trigger1 = time = 75
projID = 23000
projanim = 2315
projremove = 0
projpriority = 8
projhitanim = -1
projremovetime = 36
ownpal = 1
offset = 140,0
velocity = 0
attr = A, HA
animtype = up
damage = 0,10
hitflag = MAF
guardflag = M
hitsound = s9,10
guardsound = s8,11
pausetime = 0,6
sparkno = s4010
guard.sparkno = s4120
sparkxy = 20,-100
ground.type = High
ground.slidetime = 20
ground.hittime = 21
ground.velocity = -8,-5
palfx.time = 35
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 5
envshake.freq = 120
envshake.phase = 120
air.velocity = -8,-5
fall.recover = 0
fall = 1
getpower = 0,0
p2stateno = 23099

[State 0, Explod]
type = Explod
trigger1 = time = 75
anim = 7601
ID = 20002
pos = 185,8
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
sprpriority = 20

[State 3000, Projectile]
type = Projectile
trigger1 = time = 85
projID = 23000
projanim = 2315
projremove = 0
projpriority = 8
projhitanim = -1
projremovetime = 36
ownpal = 1
offset = 200,0
velocity = 0
attr = A, HA
animtype = up
damage = 0,10
hitflag = MAF
guardflag = M
hitsound = s9,10
guardsound = s8,11
pausetime = 0,6
sparkno = s4010
guard.sparkno = s4120
sparkxy = 20,-100
ground.type = High
ground.slidetime = 20
ground.hittime = 21
ground.velocity = -15,-5
palfx.time = 35
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
envshake.time = 15
envshake.ampl = 5
envshake.freq = 120
envshake.phase = 120
air.velocity = -15,-5
fall.recover = 0
fall = 1
getpower = 0,0
p2stateno = 23099

[State 0, Explod]
type = Explod
trigger1 = time = 85
anim = 7601
ID = 20002
pos = 245,8
postype = p1  ;p2,front,back,left,right
facing = 1
ownpal = 1
sprpriority = 20

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 23099]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -90
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 8001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 8030

[State 5000, 8]
type = DefenceMulSet
trigger1 = 1
value = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
;P2StateDef
[Statedef 2039]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -100
kill = 1
absolute = 1
ignorehitpause = 1

[State -2, DestroySelf]
type = DestroySelf
trigger1 = IsHelper
ignorehitpause = 1

[State -2, DefenceMulSet]
type = DefenceMulSet
trigger1 = Time = 0
value = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, SelfState]
type = SelfState
trigger1 = Time > 500
trigger1 = P2StateNo != [3000,3100)
value = 5050

[State -2, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2039

[State 3010, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1

[State 3010, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -4
y = -8

[State 3026, 炎上]
type = palfx
trigger1 = time = 0
time = 30
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 0
invertall = 1

[State 3010, VelAdd]
type = VelAdd
Trigger1 = AnimElem = 1, >= 0
y = .48

[State 3010, SelfState] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 2028]
type    = S
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 0, HitBy]
type = HitBy
trigger1 = !ishelper
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1

[state haha]
type = nothitby
trigger1 = ishelper
value = SCA
time = 1
ignorehitpause = 1

[State , RemoveExplod0]
type = RemoveExplod
trigger1 = ishelper
trigger1 = time = 0

[state haha]
type = destroyself
trigger1 = time = 0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2028

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 2030]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = 1

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2030

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 弱裏参百拾壱式・析爪櫛

[Statedef 2400]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2400
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000]
type = Explod
trigger1 = time = 2
anim = 6100
pos = 8,-80
sprpriority = -5
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 3
anim = 6101
pos = 8,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (5) < 0
value = SCA

[State 3000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 3
time = 2
palcolor = 0
paladd = 60,20,100
PalContrast = 220,200,350
Trans = none
TimeGap  = 1
FrameGap = 3
length = 11
ignorehitpause = 1

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(3) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s7,21
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s2400,0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 10
value = s2400,1

[State 3200, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3 || AnimElem = 4 || AnimElem = 5
x = 16

[State 3200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = N

[State 3200, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 7
x = 6
y = -4

[State 3200, 軸位置移動]
type = Veladd
trigger1 = AnimElemtime(7) > 0
y = .48

[State 3200, エフェクト表示]
type = Explod
trigger1 = AnimElem = 11
anim = 14000
sprpriority = 5
postype = p1
pos = 0,0
bindtime = 3
supermove = 0
under = 0
ownpal = 1

[State 1950]
type = HitDef
trigger1 = AnimElem = 11
attr = A, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
guardflag = H
hitflag   = MAF
priority  = 4, Hit
pausetime = 3,5
guard.pausetime = 3,3
sparkno = s4020
guard.sparkno = s6077
sparkxy = -15, -50
hitsound = s1,112
guardsound = s8,11
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4.5,-7
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-7
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2facing = 1
kill = 0

[State 3200, ステート変更]
type = ChangeState
trigger1 = MoveHit && NumTarget
value = 2420

[State 3200, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2405

;---------------------------------------------------------------------------
; 着地

[Statedef 2405]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2405
ctrl     = 0
sprpriority = 2

[State 3205, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s44,0

[State 3205, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 3205, 軸位置移動]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 3205, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
x = 16

[State 3205, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 3205, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 強裏参百拾壱式・析爪櫛

[Statedef 2410]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2410
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000]
type = Explod
trigger1 = time = 2
anim = 6100
pos = 8,-80
sprpriority = -5
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = time = 3
anim = 6101
pos = 8,-80
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,30]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (5) < 0
value = SCA

[State 3000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 3
time = 2
palcolor = 0
paladd = 60,20,100
PalContrast = 220,200,350
Trans = none
TimeGap  = 1
FrameGap = 3
length = 11
ignorehitpause = 1

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(3) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s7,21
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s2400,0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 10
value = s2400,1

[State 3200, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3 || AnimElem = 4 || AnimElem = 5
x = 16

[State 3200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = N

[State 3200, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 7
x = 8
y = -6

[State 3200, 軸位置移動]
type = Veladd
trigger1 = AnimElemtime(7) > 0
y = .48

[State 3200, エフェクト表示]
type = Explod
trigger1 = AnimElem = 11
anim = 14000
sprpriority = 5
postype = p1
pos = 0,0
bindtime = 3
supermove = 0
under = 0
ownpal = 1

[State 1950]
type = HitDef
trigger1 = AnimElem = 11
attr = A, HA
damage    = 0
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
guardflag = H
hitflag   = MAF
priority  = 4, Hit
pausetime = 3,5
guard.pausetime = 3,3
sparkno = s4020
guard.sparkno = s6077
sparkxy = -15, -50
hitsound = s1,112
guardsound = s8,11
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4.5,-7
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-7
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
p2facing = 1
kill = 0

[State 3200, ステート変更]
type = ChangeState
trigger1 = MoveHit && NumTarget
value = 2420

[State 3200, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2415

;---------------------------------------------------------------------------
; 着地

[Statedef 2415]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2415
ctrl     = 0
sprpriority = 2

[State 3205, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s44,0

[State 3205, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 3205, 軸位置移動]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 3205, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
x = 16

[State 3205, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 3205, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 発動

[Statedef 2420]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2420
ctrl     = 0
sprpriority = 2

[State 3000, AfterImageTime]
type = AfterImageTime
trigger1 = AnimElemTime(1) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State a]
type = EnvColor
trigger1 = time = 0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4
anim = 6045
sprpriority = -10
postype = p1
pos = 54,0
bindtime = -1
under = 0
ownpal = 1

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4
anim = 6046
sprpriority = 10
postype = p1
pos = 54,0
bindtime = -1
under = 0
ownpal = 1

[State a]
type = EnvColor
trigger1 = movehit
trigger1 = animelem = 19,>=0
trigger1 = animelem = 21,<0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State a]
type = EnvColor
trigger1 = movehit
trigger1 = animelem = 21,>=0
trigger1 = animelem = 23,<0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State a]
type = EnvColor
trigger1 = movehit
trigger1 = animelem = 23,>=0
trigger1 = animelem = 25,<0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State a]
type = EnvColor
trigger1 = movehit
trigger1 = animelem = 25,>=0
trigger1 = animelem = 27,<0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State a]
type = EnvColor
trigger1 = movehit
trigger1 = animelem = 27,>=0
trigger1 = animelem = 29,<0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State a]
type = EnvColor
trigger1 = movehit
trigger1 = animelem = 29,>=0
persistent = 0
ignorehitpause = 1
time = 1
value = 255,0,0
under = 2

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 4
time = 15
ampl = -6
freq = 95
phase = 95

[State explod];炎
type = Explod
trigger1 = animelem = 19
trigger2 = animelem = 26
anim = 1750
sprpriority = 5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1

[State explod];炎
type = Explod
trigger1 = animelem = 23
trigger2 = animelem = 30
anim = 1760
sprpriority = 5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
under = 0
ownpal = 1

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = s321,1

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 12
value = s2,1

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 19
trigger2 = animelem = 26
value = s2400,2

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 7
value = s9,99
channel = 10

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 60,0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 10
trigger5 = animelem = 11
x = 16

[state a]
type = posadd
trigger1 = animelem = 5
x = 8

[State 3220, StateTypeSet]
type = statetypeset
trigger1 = AnimElem = 12
statetype = A
physics = N

[state a]
type = velset
trigger1 = animelem = 12
y = -6

[state a];
type = veladd
trigger1 = animelem = 20,>0
y = 0.3

[state a]
type = targetstate
trigger1 = time = 0
value = 2430

[State 3220, TargetBind]
type = TargetBind
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (2) < 0
pos = 44,0

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 2
pos = 64,-34

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 3
pos = 58,-12

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 4
pos = 54,-3

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 5
pos = 42,-3

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 7
pos = 35,-4

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 8
pos = 26,-4

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 9
pos = 13,-4

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 10
pos = 23,-40

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 11
pos = 26,-68

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 12
pos = 25,-98

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 13
pos = 21,-98

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 14
pos = -4,-103

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 15
pos = -16,-93

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 16
pos = -20,-88

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 17
pos = -5,-89

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 18
pos = 28,-85

[State 3220, TargetBind]
type = TargetBind
trigger1 = animelem = 19
pos = 28,-40

[State 3220, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 4
value = -20
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = animelem = 19 || animelem = 21 || animelem = 23 || animelem = 25 || animelem = 27
attr = A, HA
damage    = 0,10
getpower  = 0
givepower = 0
animtype  = Hard
air.animtype = back
;guardflag = M
hitflag   = MAF
priority  = 4, Hit
pausetime = 6,6
guard.pausetime = 3,3
sparkno = s4020
guard.sparkno = s6077
sparkxy = -20, -85
hitsound = s0,21
guardsound = s8,11
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2,-6
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -2,-6
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
palfx.time = 60
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
p2stateno = 2421

[State 3000, ヒット定義]
type = HitDef
trigger1 = animelem = 29
attr = A, HA
damage    = 0,10
getpower  = 0
givepower = 0
animtype  = up
;guardflag = M
hitflag   = MAF
priority  = 4, Hit
pausetime = 12,12
guard.pausetime = 11,12
sparkno = s4020
guard.sparkno = s6077
sparkxy = -20, -85
hitsound = s0,21
guardsound = s8,11
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4.5,-7
guard.velocity = -10.5
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.5,-7
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
palfx.time = 60
palfx.add = 50,0,170
palfx.mul = 170,170,170
palfx.sinadd = 95,95,95,15
palfx.color = 0
palfx.invertall = 1
p2stateno = 2499
ID = 20

[State 1000, 燃え小エフェクト]
type = Helper
trigger1 = movehit
trigger1 = HitPauseTime = 1
name = "hit"
stateno = 4910
ID = 4910
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2425

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 2421]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -30
kill = 0
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 8001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 8030

[State 5000, 8]
type = DefenceMulSet
trigger1 = 1
value = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; 着地

[Statedef 2425]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 2425
ctrl     = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s44,0

[State 1000, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 1000, 軸位置移動]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)裏参百拾壱式・析爪櫛・掴まれ
[Statedef 2430]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2430

[State a]
type = sprpriority
Trigger1 = animelem = 12
value = -4

[State a]
type = sprpriority
Trigger1 = animelem = 16
value = 4

[State a]
type = selfstate
Trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 2499]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -30
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 8001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 8030

[State 5000, 8]
type = DefenceMulSet
trigger1 = 1
value = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-------------------------------------------------------------------------------
[Statedef 38000]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3800
poweradd = 0
ctrl     = 0
sprpriority = 2

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -2000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -1000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 1
trigger1 = var(6) := 0 || 1
anim = -1
movetime = 32
time = 32
darken = 0

[State 100, EnvColor]
type = EnvColor
trigger1 = Time = [2,4]
value = 255,255,255
time = 1
under = 1

[State 2000]
type = AssertSpecial
trigger1 = Time = [0,36]
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 3100, Explod]
type = Explod
trigger1 = Time = 1
anim = 6200
postype = P1
pos = -24,-88
sprpriority = 1
supermove = -1
supermovetime = 99999
bindtime = 1
ownpal = 1

[State 3100, Explod]
type = Explod
trigger1 = Time = 12
anim = 6201
postype = P1
pos = -24,-88
sprpriority = 7
supermove = -1
supermovetime = 99999
bindtime = 1
ownpal = 1

[State 2000, 6]
type = PlaySnd
trigger1 = time = 1
value = s10,1

[State 1500,]
type = HitBy
trigger1 = time = 0
value = SC,AT

[State 1500,]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1500,]
type = HitBy
trigger1 = 1
value = AC,AA,AP

[State 3000, 軸位置移動]
type = VelSet
trigger1 = AnimElem = 11,>= 0
x = ifelse(p2bodydist x <= 20,3,8)

[State 3000, Afterimage]
type = Afterimage
trigger1 = animelem = 11
time = 2
length = 11
timegap = 1
paladd = 60,20,100
PalContrast = 220,200,350
palcolor = 0
framegap = 3

[State 3000, fterimagetime]
type = Afterimagetime
trigger1 = AnimElemtime(11) >= 0
trigger1 = gametime%2 = 0
time = 2

[State 1000, EnvColor]
type = EnvColor
trigger1 = movehit
value = 255,255,255
time = 1
under = 1
persistent = 0
ignorehitpause = 1

[State 1000, Helper]
type = Helper
trigger1 = animelem = 10
helpertype = normal
name = "Cheap"
ID = 2000
stateno = 2048
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 1950]
type = HitDef
trigger1 = time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = up
hitflag = MAF
guardflag = M
;priority = 9
pausetime = 0,0
sparkno = S4020
guard.sparkno = S4120
sparkxy = -30,-40
hitsound = S0,14
guardsound = S8,11
guard.velocity = -12
air.juggle = 11
ground.type = low
ground.slidetime = 30
ground.hittime = 15
ground.velocity = -4,-6
air.velocity = -4,-6
yaccel = .5
p2facing = 1
fall.recover = 0
fall = 1
id = 2000
ground.cornerpush.veloff = 0

[State 1000, movehitreset]
type = movehitreset
triggerall = movehit > 0
trigger1 = numtarget(2000) = 0
trigger2 = numtarget(2000) > 0
trigger2 = target(2000),Movetype != H

[State 1000, p2GCRUSH]
type = targetstate
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 38400
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = movehit
persistent = 0
ignorehitpause = 0
value = 38001
ctrl = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = Animelem = 14,>= 18
trigger2 = MoveGuarded
value = 2001

;-------------------------------------------------------------------------------
;Maiden
[Statedef 38001]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 3801
ctrl     = 0
sprpriority = 3

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 80,0

[State 3101, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 2
add = 0,0,0
mul = 170,0,10
invertall = 1
ignorehitpause = 1

[State 1000, TargetBind]
type = TargetBind
trigger1 = time = [0,55]
pos = 20,0

[State 1000, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 1

[State ]
type = TargetDrop
trigger1 = target(2000),ishelper
keepone = 0

[State 100, 5]
type = ChangeState
triggerall = time = 1
trigger1 = numtarget(2000) > 0
trigger1 = target(2000),Movetype != H
trigger2 = numtarget(2000) = 0
value = 2511

[State ]
type = ReversalDef
trigger1 = 1
reversal.attr = C,SP
sparkno = -1
hitsound = -1

[State 0, VarSet]
type = VarSet
trigger1 = Numtarget = 2
trigger1 = Enemy(1),Const(data.life) > Enemy(0),Const(data.life)
v = 6
value = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Numtarget = 2
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 15
trigger4 = animelem = 19
trigger5 = animelem = 24
trigger6 = animelem = 42
trigger7 = animelem = 50
value = -Ceil(Enemy(var(6)),Const(data.life) * (Const(data.attack) * 0.0004))
kill = 0
absolute = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Numtarget = 2
trigger1 = animelem = 24
value = -Ceil(Enemy(var(6)),Const(data.life) * (Const(data.attack) * 0.0007))
kill = 0
absolute = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Numtarget = 2
trigger1 = time = 320
trigger2 = time = 322
value = -Ceil(Enemy(var(6)),Const(data.life) * (Const(data.attack) * 0.00075))
kill = 1
absolute = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Numtarget = 1
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 15
trigger4 = animelem = 19
trigger5 = animelem = 24
trigger6 = animelem = 42
trigger7 = animelem = 50
value = -Ceil(Enemy,Const(data.life) * (Const(data.attack) * 0.0004))
kill = 0
absolute = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Numtarget = 1
trigger1 = animelem = 24
value = -Ceil(Enemy,Const(data.life) * (Const(data.attack) * 0.0007))
kill = 0
absolute = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Numtarget = 1
trigger1 = time = 320
trigger2 = time = 322
value = -Ceil(Enemy,Const(data.life) * (Const(data.attack) * 0.00075))
kill = 1
absolute = 1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,14

[State 1000, Explod]
type = Explod
trigger1 = animelem = 3
anim = 4070
pos = 41,-77
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3800,0
persistent = 9
channel = 1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 27
value = S3800,1
persistent = 9

[State 1000, TargetBind]
type = TargetBind
trigger1 = animelem = 1
pos = 20,0

[State 1000, EnvColor]
type = EnvColor
trigger1 = animelem = 1
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 15
trigger5 = animelem = 19
trigger6 = animelem = 24
trigger7 = animelem = 42
trigger8 = animelem = 50
trigger9 = animelem = 58
value = 255,0,0
time = 1
under = 1

[State 1000, EnvShake]
type = EnvShake
trigger1 = animelem = 42
trigger2 = animelem = 50
time = 12
freq = 100
ampl = -3
persistent = 9

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 15
trigger4 = animelem = 19
trigger5 = animelem = 24
value = S0,14

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = time = 160
value = S0,14

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 42
trigger2 = animelem = 50
value = S77,1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = animelem = 58
value = S666,2

[State 1000, Explod]
type = Explod
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 24
anim = 4070
pos = 33,-20
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1000, Explod]
type = Explod
trigger1 = animelem = 12
trigger2 = animelem = 19
trigger3 = animelem = 24
anim = 4070
pos = -22,-28
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1000, Explod]
type = Explod
trigger1 = animelem = 42
trigger2 = animelem = 50
trigger3 = animelem = 58
anim = 6045
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = -1

[State 1000, Explod]
type = Explod
trigger1 = animelem = 42
trigger2 = animelem = 50
trigger3 = animelem = 58
anim = 6046
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1000, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = time = [320,340]
time = 1
movetime = 1

[State 1000, EnvShake]
type = EnvShake
trigger1 = animelem = 58
time = 30
freq = 100
ampl = -4
persistent = 9
supermovetime = 999
pausemovetime = 999

[State 0, TargetDrop]
type = TargetDrop
trigger1 = AnimTime = -1
excludeID = -1
keepone = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
trigger1 = var(6) := 0 || 1
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[Statedef 38400]
type     = S
movetype = H
physics  = N
ctrl = 0
velset = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper

[State 1531, 5]
type = defencemulSet
trigger1 = 1
value = 1

[State 52, 1]
type = Hitfallset
trigger1 = 1
value = 0

[State 52, 2]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 1531, 5]
type = PosSet
trigger1 = time = 0
y = 0

[State 1531, 5]
type = ChangeAnim2
trigger1 = time = 0
value = 38400

[State 1221, 3]
type = velset
trigger1 = AnimTime = 0
x = -5.5
y = -5.5

[State 3305, 2]
type = PalFX
trigger1 = time = 320
time = 30
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 1
invertall = 1

[State 1221, 4]
type = changeState
Trigger1 = AnimTime = 0
value = 38410
ctrl = 0

;-------------------------------------------------------------------------------
[Statedef 38410]
type    = A
movetype= H
physics = N

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -1
kill = 1

[State 1531, 5]
type = defencemulSet
trigger1 = 1
value = 1

[State 3305, 2]
type = PalFX
trigger1 = time = 0
time = 30
add = 50,0,170
mul = 170,170,170
sinadd = 95,95,95,15
color = 1
invertall = 1

[State 5101, 1]
type = turn
trigger1 = time = 0

[State 5101, 1]
type = posadd
trigger1 = time = 0
x = -25

[State 5101, 1]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 8

[State 5101, 5]
type = VelAdd
trigger1 = 1
y = .48

[State 5101, 6]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 38420

[Statedef 38420]
type    = L
physics = N
movetype= H
ctrl = 0

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0,-9
under = 1

[State 1022, 7]
type = Posset
trigger1 = time = 0
y = 0

[State 1022, 1]
type = statetypeset
trigger1 = time = 1
value = A

[State 1022, 1]
type = changeanim
trigger1 = time = 0
value = 5100

[State 5100, Explod]
type = Explod
trigger1 = Time = 0
anim = f60
pos = 0,0
postype = p1
removetime = -2
pausemove = 1
sprpriority = 9

[State 5100, Explod]
type = Explod
trigger1 = Time = 0
anim = f61
pos = 0,0
postype = p1
removetime = -2
pausemove = 1
sprpriority = -9

[State 1022, 1]
type = playsnd
trigger1 = time = 0
value = f7,1

[State 1022, 8]
type = Changestate
trigger1 = time > 0
value = 38430

[Statedef 38430]          ;
type    = L
physics = N
movetype= H
ctrl = 0

[State 1022, 7]
type = Posset
trigger1 = time = 0
y = 20

[State 1022, 1]
type = changeanim
trigger1 = time = 0
value = 5160

[State 1022, 1]
type = changeanim
trigger1 = time > 8
trigger1 = vel y >= 0
value = 5100

[State 1022, 4]
type = velset
trigger1 = time = 0
y = -5
ignorehitpause = 1

[State 1022, 3]
type = veladd
trigger1 = time >= 0
x = 0.35
y = .45

[State 1022, 4]
type = velmul
trigger1 = 1
x = .8

[State 1022, 8]
type = Changestate
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 38440

[Statedef 38440]
type    = L
physics = N
movetype= H
ctrl = 0

[State 1203, 5]
type = nothitby
trigger1 = 1
value = SCA

[State 1022, 7]
type = Velset
trigger1 = 1
y = 0
x = 0

[State 1022, 7]
type = Posset
trigger1 = time = 0
y = 0

[State 1022, 1]
type = changeanim
trigger1 = 1
value = 5110

[State 1022, 1]
type = playsnd
trigger1 = time = 0
value = f7,0

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 1022, 8]
type = selfstate
trigger1 = time > 5
trigger1 = !alive
value = 5150

[State 1022, 8]
type = selfstate
trigger1 = time > 35
value = 5120
;----------------------------------
[Statedef 2511]
type     = S
movetype = A
physics  = N
anim = 2511
ctrl = 0
velset = 0,0
sprpriority = 0
poweradd = ifelse(prevstateno = 38001,2000,1000)

[State 100, 5]
type = stopsnd
trigger1 = time = 0
channel = 1

[State 100, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------

[Statedef 3900]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 3900
ctrl = 0
sprpriority = 1

[state turn]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -6000;-3000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -2000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = (prevstateno = [1000,2999])
time = 5
add = 230,230,230

[State 700,];点滅
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [3000,3999]
time = 5
add = 250,120,210

[State 3000, 残像]
type = AfterImage
trigger1 = time = 0
time = 1

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
movetime = 33
time = 33
darken = 0

[state 2]
type = pause
trigger1 = time = 24
time = 20
movetime = 20

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 6300
pos = 30,-60
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 6301
pos = 30,-60
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 9999

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,2

[state 22]
type = playsnd
trigger1 = animelem = 8
value = s3500,1

[state 22]
type = playsnd
trigger1 = animelem = 8
value = s3500,1

[State a]
type = PlaySnd
trigger1 = animelem = 6
value = s3500,0

[State 2000]
type = Explod
trigger1 = AnimElem = 5
anim = 3901
pos = 0,0
sprpriority = 8
ownpal = 0
scale = 0.5,0.5
bindtime = 1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999

[State 2000]
type = Explod
trigger1 = time = 34
anim = 25832
pos = 0,0
sprpriority = -5
ownpal = 1
scale = 2.5,2.5
bindtime = 1
supermove = 1
pausemove = 1

[State explod]
type = explod
trigger1 = AnimElem = 4
anim = 1887
sprpriority = 10
postype = p1
pos = 80,0
bindtime = -1
under = 0
ownpal = 1

[State 35000, ﾈｫﾉ殪筏]
type = NotHitBy
trigger1 = 1
value = SCA

[State 979, 1]
type = Projectile
trigger1 = AnimElem = 7
projanim = 3911
projID = 3900
projpriority = 99
projsprpriority = 9
projhits = 7
projheightbound = -240, 100
projedgebound = 100
projscreenbound = 100
projmisstime = 3
projshadow = -1
projremovetime = 25
offset = 40,0
attr = S, SP
damage = 80,10
animtype = diagup
guardflag = M
hitflag = MAF
pausetime = 0,5
hitsound = s17,0
guardsound = s8,11
sparkxy = 30,Floor((EnemyNear(var(58)),Const(size.mid.pos.y)+Floor(P2BodyDist Y))*(1-(P2StateType=C)*0.5))
sparkno = s4060
guard.sparkno = s4050
ground.hittime = 15
ground.type = low
ground.slidetime = 15
ground.velocity = -9,-8.5
air.animtype = diagup
air.velocity = -9,-8.5
fall = 1
fall.recover = 0
air.fall = 1
down.velocity = -4,-6
down.hittime = 30
down.bounce = 0
palfx.time = 27
palfx.add = -256,-256,-256
envshake.ampl = -8
envshake.time = 17
envshake.freq = 110
yaccel = .5

;---------------------[]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------

[Statedef 39000]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
poweradd= 0
anim = 39000
ctrl = 0
sprpriority = 1

[state turn]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

;---------------------[3ﾐﾇｱﾘﾉｱﾏｺﾄ]

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) = 0
trigger1 = time = 0
value = -6000;-3000

[State 3000, パワーゲージ消費]
type = poweradd
trigger1 = var(40) > 0
trigger1 = time = 0
value = -2000

[State 3000, スキルゲージ消費]
type = varadd
trigger1 = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = prevstateno = [1000,1999] 
fvar(35) = -101 

[State 3000, パワーMAX解除]
type = varset
trigger1 = time = 0
v = 40
value = 0

[State a];ﾈ｡ﾏﾁｬﾉﾁｹ
type = palfx
triggerall = time = 0
trigger1 = prevstateno = [1000,2999]
add = 96,96,96
mul = 240,240,240
sinadd = 96,96,96,32
color = 8
time = 10
ignorehitpause = 1

;---------------------[3ﾐﾇｱﾘﾉｱﾏｺﾄ]

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6300
pos = 30,-60
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 6301
pos = 30,-60
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 9999

;---------------------[無敵]
[state nothitby]
type = nothitby
trigger1 = animelem = 11,<0
value = SCA
time = 1

;---------------------[超必殺技演出]
[state removeexplod]
type = removeexplod
trigger1 = time = 0
id = 3000

[State superpause]
type = superpause
trigger1 = time = 1
time = 32
movetime = 32
anim = -1
darken = 0

[state helper]
type = Helper
trigger1 = time = 0
id = 39008
name = "bg"
pos = 0,0
postype = p1
stateno = 39008
helpertype = normal
supermovetime = 999999
ownpal = 1

[state helper]
type = Helper
trigger1 = animelem = 11
id = 39005
name = "bg"
pos = 0,0
postype = p1
stateno = 39006
helpertype = normal
supermovetime = 999999
ownpal = 1

;---------------------[効果音]

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,2

[State a]
type = PlaySnd
trigger1 = time = 0
value = s3500,0

[State a]
type = PlaySnd
trigger1 = animelem = 8
value = s3500,1

[State a]
type = PlaySnd
trigger1 = animelem = 8
value = s3500,1

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
x = 15

[state a]
type = posadd
trigger1 = animelem = 9
x = -8

[state a]
type = posadd
trigger1 = animelem = 10
x = -16

[state a]
type = posadd
trigger1 = animelem = 11
x = -16

[state a]
type = posadd
trigger1 = animelem = 15
x = -16

[state a]
type = posadd
trigger1 = animelem = 16
x = -16

;---------------------[エフェクト]
[State explod]
type = explod
trigger1 = animelem = 5
anim = 39015
sprpriority = 10
postype = p1
pos = 0,0
bindtime = -1
under = 0
ownpal = 1
;scale = 0.5,0.5

[State explod]
type = explod
trigger1 = animelem = 7
anim = 1888
id = 2500
sprpriority = 20
postype = p1
pos = 120,0
bindtime = 13
under = 0
ownpal = 1
scale = 0.47,0.47

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = enemynear,stateno != [5040,5049]
trigger1 = animelem = 9
attr = S, HA
animtype  = UP
damage    = 0,20
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s4060
sparkxy = 30,Floor((EnemyNear(var(58)),Const(size.mid.pos.y)+Floor(P2BodyDist Y))*(1-(P2StateType=C)*0.5))
hitsound = s17,0
guardsound = s8,11
guard.sparkno = s4050
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9,-8.5
air.velocity = -9,-8.5
air.hittime  = 120
envshake.ampl = -8
envshake.time = 17
envshake.freq = 110
yaccel = .5
fall = 1
fall.recover = 0
ID = 200
nochainID = 9999
p1stateno = 39020
p2stateno = 39099
palfx.time = 27
palfx.add = -256,-256,-256

[State 210, 2]
type = HitDef
triggerall = enemynear,stateno != [5040,5049]
trigger1 = animelem = 10
trigger2 = animelemtime(10) = 1
trigger3 = animelemtime(10) = 2
trigger4 = animelem = 11
trigger5 = animelemtime(11) = 1
trigger6 = animelemtime(11) = 2
attr = S, HA
animtype  = UP
damage    = 0,20
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s4060
sparkxy = 30,Floor((EnemyNear(var(58)),Const(size.mid.pos.y)+Floor(P2BodyDist Y))*(1-(P2StateType=C)*0.5))
hitsound = s17,0
guardsound = s8,11
guard.sparkno = s4050
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9,-8.5
air.velocity = -9,-8.5
air.hittime  = 120
yaccel = .5
envshake.ampl = -8
envshake.time = 17
envshake.freq = 110
fall = 1
fall.recover = 0
p2stateno = 39099
ID = 200
nochainID = 9999

;---------------------[]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 禁千弐百拾八式・八咫烏
[Statedef 39020]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
poweradd= 0
anim = 39020
ctrl = 0
sprpriority = 1

;---------------------[無敵]
[state nothitby]
type = nothitby
trigger1 = 1
value = SCA
time = 1

;---------------------[超必殺技演出]
[state helper]
type = Helper
trigger1 = time = 0
id = 39005
name = "bg"
pos = 0,0
postype = p1
stateno = 39007
helpertype = normal
supermovetime = 999999
ownpal = 1

[State envshake]
type = EnvShake
trigger1 = time = 0
time = 16
ampl = -14
freq = 75
phase = 75

[State palfx];
type = palfx
trigger1 = time <= 32
time = 1
add = -256,-256,-256
ignorehitpause = 1

;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 1
x = -8

[state a]
type = posadd
trigger1 = animelem = 2
x = -16

[state a]
type = posadd
trigger1 = animelem = 3
x = -16

[state a]
type = posadd
trigger1 = animelem = 7
x = -16

[state a]
type = posadd
trigger1 = animelem = 8
x = -16

;---------------------[エフェクト]
[State removeexplod]
type = removeexplod
trigger1 = animelem = 1
id = 2500

[State explod]
type = explod
trigger1 = animelem = 1
anim = 39025
sprpriority = 20
postype = p1
pos = 120,0
bindtime = 4
under = 0
ownpal = 1
scale = 0.5,0.5
;trans = addalpha
;alpha = 0,0
scale = 0.47,0.47

;---------------------[攻撃]
[State 210, 2]
type = HitDef
triggerall = enemynear,stateno != [5040,5049]
trigger1 = animelemtime(2) = 1
trigger2 = animelemtime(2) = 2
trigger3 = animelem = 3
trigger4 = animelemtime(3) = 1
trigger5 = animelemtime(3) = 2
attr = S, HA
animtype  = UP
damage    = 0,20
priority = 5, Hit
getpower = 0,0
guardflag = M
pausetime = 2,3
sparkno = s4060
sparkxy = 30,Floor((EnemyNear(var(58)),Const(size.mid.pos.y)+Floor(P2BodyDist Y))*(1-(P2StateType=C)*0.5))
hitsound = s17,0
guardsound = s8,11
guard.sparkno = s4050
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9,-8.5
air.velocity = -9,-8.5
air.hittime  = 120
yaccel = .5
envshake.ampl = -8
envshake.time = 17
envshake.freq = 110
fall = 1
fall.recover = 0
ID = 200
nochainID = 9999
palfx.time = 27
palfx.add = -256,-256,-256
p2stateno = 39099

;---------------------[]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------
;(HELPER)背景
[Statedef 39006]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 128

[state varadd]
type = varadd
trigger1 = time > 24
var(55) = -4

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = var(55),floor(-var(55)*0.5),floor(-var(55)*0.5)
invertall = 0
color = 256 - floor(var(55)*0.5)

;---------------------[消去]
[state destroyself]
type = destroyself
trigger1 = time >= 2
trigger1 = var(55) <= 0


;----------------------------------------------------------------------------
;(HELPER)背景
[Statedef 39007]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = varadd
trigger1 = time > 32
var(55) = -4

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = var(55),floor(-var(55)*0.5),floor(-var(55)*0.5)
invertall = 0
color = 256 - floor(var(55)*0.5)

;---------------------[消去]
[state destroyself]
type = destroyself
trigger1 = time >= 2
trigger1 = var(55) <= 0

[Statedef 39008]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = null;varadd
trigger1 = time > 40
var(55) = -8

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

[State assertspecial]
type = assertspecial
trigger1 = var(55) = 256
flag = NoBG
flag2 = NoFG

;---------------------[消去]
[state changestate]
type = changestate
trigger1 = root,stateno != [39000,39099]
trigger2 = root,movetype = H
value = 39009

[state destroyself]
type = destroyself
trigger1 = root,stateno = 39000
trigger1 = root,animelem = 11
trigger2 = root,stateno = 39020


;----------------------------------------------------------------------------
;(HELPER)NEO MAX超必殺
[Statedef 39009]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(55) = 256

[state varadd]
type = varadd
trigger1 = 1
var(55) = -8

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(55),-var(55),-var(55)
invertall = 0
color = 256 - var(55)

;---------------------[消去]
[state destroyself]
type = destroyself
trigger1 = var(55) <= 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 39099]
type    = S
movetype= H
physics = N
velset = 0,0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -lifemax*.1
kill = 1
absolute = 1
ignorehitpause = 1

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 8001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 8030

[State 5000, 8]
type = DefenceMulSet
trigger1 = 1
value = 1

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;============================================================================

;この下、一行以上空ける事…
