;>>>>>>>>>>>>>=====================<<<<<<<<<<<<<<<|
;|||||||||||| Takuma Sakazaki's CMD |||||||||||||||
;>>>>>>>>>>>>>=====================<<<<<<<<<<<<<<<|
;-| Button Remapping |----------------------------
[Remap]
x = x
y = y
z = z
a = a
b = b
c = c
s = s

;-| Default Values |------------------------------
[Defaults]
command.time = 17

command.buffer.time = 1

;==================================================
; Commands
;==================================================
;--------------------------------------------------
; Hidden Super Danger Moves
;--------------------------------------------------
[Command]
Name = "Kosatsu Jin"
Command = ~B, F, D, DF, x+y
Time = 25
Buffer.time = 10

[Command]
Name = "Kosatsu Jin"
Command = ~B, F, D, DF, y+z
Time = 25
Buffer.time = 10

[Command]
Name = "Kosatsu Jin"
Command = ~B, F, D, DF, x+z
Time = 25
Buffer.time = 10

[Command]
Name = "Shin Ryuko Rambu"
Command = ~D, DF, F, B, F, x+y
Time = 25
Buffer.time = 10

[Command]
Name = "Shin Ryuko Rambu"
Command = ~D, DF, F, B, F, y+z
Time = 25
Buffer.time = 10

[Command]
Name = "Shin Ryuko Rambu"
Command = ~D, DF, F, B, F, x+z
Time = 25
Buffer.time = 10

;--------------------------------------------------
; Danger Moves/ Super Danger Moves
;--------------------------------------------------
[Command]
Name = "Haoh Shikoken"
Command = ~F, B, $D, F, x
Time = 25
Buffer.time = 10

[Command]
Name = "Haoh Shikoken"
Command = ~F, B, $D, F, y
Time = 25
Buffer.time = 10

[Command]
Name = "Haoh Shikoken"
Command = ~F, B, $D, F, z
Time = 25
Buffer.time = 10

[Command]
Name = "Kyokugen Kohou"
Command = ~D, DF, F, D, DF, a
Time = 20
Buffer.time = 10

[Command]
Name = "Kyokugen Kohou"
Command = ~D, DF, F, D, DF, b
Time = 20
Buffer.time = 10

[Command]
Name = "Kyokugen Kohou"
Command = ~D, DF, F, D, DF, c
Time = 20
Buffer.time = 10

[Command]
Name = "Kishin Geki"
Command = ~D, DF, F, D, DF, F, x
Time = 20
Buffer.time = 10

[Command]
Name = "Kishin Geki"
Command = ~D, DF, F, D, DF, F, y
Time = 20
Buffer.time = 10

[Command]
Name = "Kishin Geki"
Command = ~D, DF, F, D, DF, F, z
Time = 20
Buffer.time = 10

[Command]
Name = "Kishin Geki SVC"
Command = ~D, DB, B, D, DB, B, x
Time = 20
Buffer.time = 10

[Command]
Name = "Kishin Geki SVC"
Command = ~D, DB, B, D, DB, B, y
Time = 20
Buffer.time = 10

[Command]
Name = "Kishin Geki SVC"
Command = ~D, DB, B, D, DB, B, z
Time = 20
Buffer.time = 10

[Command]
Name = "Ryuko Rambu"
Command = ~D, DF, F, $D, B, x
Time = 25
Buffer.time = 10

[Command]
Name = "Ryuko Rambu"
Command = ~D, DF, F, $D, B, y
Time = 25
Buffer.time = 10

[Command]
Name = "Ryuko Rambu"
Command = ~D, DF, F, $D, B, z
Time = 25
Buffer.time = 10

;--------------------------------------------------
; Super Moves
;--------------------------------------------------
[Command]
Name = "Zanretsu Ken"
Command = ~F, B, F, x
Time = 30
Buffer.time = 10

[Command]
Name = "Zanretsu Ken"
Command = ~F, B, F, y
Time = 30
Buffer.time = 10

[Command]
Name = "Zanretsu Ken"
Command = ~F, B, F, z
Time = 30
Buffer.time = 10

[Command]
Name = "Kohou"
Command = ~F, D, DF, x
Buffer.time = 10

[Command]
Name = "Kohou"
Command = ~F, D, DF, y
Buffer.time = 10

[Command]
Name = "Kohou"
Command = ~F, D, DF, z
Buffer.time = 10

[Command]
Name = "Kooh Ken"
Command = ~D, DF, F, x
Time = 17
Buffer.time = 10

[Command]
Name = "Kooh Ken"
Command = ~D, DF, F, y
Time = 17
Buffer.time = 10

[Command]
Name = "Kooh Ken"
Command = ~D, DF, F, z
Time = 17
Buffer.time = 10

[Command]
Name = "Mouko Burai Gan"
Command = ~D, DB, B, x
Time = 17
Buffer.time = 10

[Command]
Name = "Mouko Burai Gan"
Command = ~D, DB, B, y
Time = 17
Buffer.time = 10

[Command]
Name = "Mouko Burai Gan"
Command = ~D, DB, B, z
Time = 17
Buffer.time = 10

[Command]
Name = "Hien Shippukyaku"
Command = ~30DB, F, a
Time = 15
Buffer.time = 10

[Command]
Name = "Hien Shippukyaku"
Command = ~30DB, F, b
Time = 15
Buffer.time = 10

[Command]
Name = "Hien Shippukyaku"
Command = ~30DB, F, c
Time = 15
Buffer.time = 10

[Command]
Name = "Shorankyaku"
Command = ~D, DB, B, a
Time = 17
Buffer.time = 10

[Command]
Name = "Shorankyaku"
Command = ~D, DB, B, b
Time = 17
Buffer.time = 10

[Command]
Name = "Shorankyaku"
Command = ~D, DB, B, c
Time = 17
Buffer.time = 10

[Command]
Name = "Sanchin No Kata"
Command = ~D, D, x
Time = 10
Buffer.time = 10

[Command]
Name = "Sanchin No Kata"
Command = ~D, D, y
Time = 10
Buffer.time = 10

[Command]
Name = "Sanchin No Kata"
Command = ~D, D, z
Time = 10
Buffer.time = 10

[Command]
Name = "SFRecover"
Command = ~B, DB, D, x
Time = 17
Buffer.time = 10

[Command]
Name = "SFRecover"
Command = ~B, DB, D, y
Time = 17
Buffer.time = 10

[Command]
Name = "SFRecover"
Command = ~B, DB, D, z
Time = 17
Buffer.time = 10

[Command]
Name = "SFRecover Reverse"
Command = ~F, DF, D, x
Time = 17
Buffer.time = 10

[Command]
Name = "SFRecover Reverse"
Command = ~F, DF, D, y
Time = 17
Buffer.time = 10

[Command]
Name = "SFRecover Reverse"
Command = ~F, DF, D, z
Time = 17
Buffer.time = 10

[Command]
Name = "Oniguruma"
Command = /F,y
Time = 1

[Command]
Name = "Hisha Otoshi: Dan Tsubushi"
Command = /B,y
Time = 1

[Command]
Name = "Shagami Shite Mawashi Geri"
Command = /B,b
Time = 1

[Command]
Name = "Jigoku Zuki"
Command = /DF,y
Time = 1

[Command]
Name = "Keima Uchi: Oiuchi"
Command = /DF,b
Time = 1

[Command]
Name = "Kawara Wari"
Command = /F,b
Time = 1

;--------------------------------------------------
; Groove Moves
;--------------------------------------------------
[Command]
Name = "Power Attack"
Command = ~D, DF, F, y+b
Time = 17
Buffer.time = 10

[Command]
Name = "knockdown"
Command = y+b
Time = 1

[Command]
name = "longjump"
command = $D, $U

[Command]
name = "Power Charge"
command = x+y
time = 1

[Command]
name = "MAX Timer"
command = z+c
time = 1

[Command]
name = "MAX Timer"
command = a+y
time = 1

[Command]
name = "SVC Grab"
command = y+z
time = 1

[Command]
name = "SVC Grab"
command = b+c
time = 1

[Command]
name = "SVC Grab 1"
command = y+z
time = 1

;--------------------------------------------------
; Hold Button Player
;--------------------------------------------------
[Command]
name = "holdx"
command = /x
time = 1

[Command]
name = "holdy"
command = /y
time = 1

[Command]
name = "holdz"
command = /z
time = 1

[Command]
name = "holda"
command = /a
time = 1

[Command]
name = "holdb"
command = /b
time = 1

[Command]
name = "holdc"
command = /c
time = 1

[Command]
name = "holdstart"
command = /s
time = 1

;--------------------------------------------------
; Hold Button AI
;--------------------------------------------------
[Command]
name = "holda2"
command = /a
time = 1

[Command]
name = "holdb2"
command = /b
time = 1

[Command]
name = "holdc2"
command = /c
time = 1

[Command]
name = "holdx2"
command = /x
time = 1

[Command]
name = "holdy2"
command = /y
time = 1

[Command]
name = "holdz2"
command = /z
time = 1

[Command]
name = "holdstart2"
command = /s
time = 1


;--------------------------------------------------
; 2/3 Button Combination Player
;--------------------------------------------------
[Command]
name = "2punches"
command = x+y
time = 1

[Command]
name = "2punches"
command = y+z
time = 1

[Command]
name = "2punches"
command = x+z
time = 1

[Command]
name = "2kicks"
command = a+b
time = 1

[Command]
name = "2kicks"
command = b+c
time = 1

[Command]
name = "2kicks"
command = a+c
time = 1

;--------------------------------------------------
; Single Button Player
;--------------------------------------------------
[Command]
name = "x"
command = x
time = 1

[Command]
name = "a"
command = a
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "start"
command = s
time = 1

;--------------------------------------------------
; Single Button AI
;--------------------------------------------------
[Command]
name = "a2"
command = a
time = 1

[Command]
name = "b2"
command = b
time = 1

[Command]
name = "c2"
command = c
time = 1

[Command]
name = "x2"
command = x
time = 1

[Command]
name = "y2"
command = y
time = 1

[Command]
name = "z2"
command = z
time = 1

[Command]
name = "start2"
command = s
time = 1

;--------------------------------------------------
; Required(do not remove) - Player
;--------------------------------------------------
[Command]
name = "FF"
command = F, F
time = 10
Buffer.time = 10

[Command]
name = "BB"
command = B, B
time = 10

[Command]
name = "recovery"
command = x+a
time = 1

[Command]
name = "holdfwd"
command = /$F
time = 1

[Command]
name = "holdback"
command = /$B
time = 1

[Command]
name = "holdup" 
command = /$U
time = 1

[Command]
name = "holddown" 
command = /$D
time = 1

;--------------------------------------------------
; Required(do not remove) - AI
;--------------------------------------------------
[Command]
name = "FF2"
command = F, F
time = 10
Buffer.time = 10

[Command]
name = "BB2"
command = B, B
time = 10

[Command]
name = "recovery2"
command = x+a
time = 1

[Command]
name = "holdfwd2"
command = /$F
time = 1

[Command]
name = "holdback2"
command = /$B
time = 1

[Command]
name = "holdup2"
command = /$U
time = 1

[Command]
name = "holddown2"
command = /$D
time = 1

;==================================================
; Command Definition
;==================================================
[Statedef -1]

;--------------------------------------------------
; Combo Varset
;--------------------------------------------------
[State -1, Normal Combo]
type = Varset
trigger1 = 1
var(3) = 0

[State -1, Normal Combo]
type = Varset
TriggerAll = Movecontact = [1,5]
TriggerAll = var(1) != 3
Trigger1 = Anim = [205,206]
Trigger2 = Anim = [215,216]
Trigger3 = StateNo = 220
Trigger4 = StateNo = 300
Trigger5 = Anim = 245
Trigger6 = StateNo = 260
Trigger6 = PrevStateno != [150,152]
Trigger7 = StateNo = 310
Trigger7 = PrevStateno = [200,499]
Trigger8 = StateNo = 320
Trigger8 = PrevStateNo = [200,450]
Trigger9 = StateNo = 500
Trigger9 = PrevStateNo = [200,450]
Trigger10 = StateNo = [400,450]
Trigger10 = StateNo != 430
Trigger11 = StateNo = 730
ignorehitpause = 1
var(3) = 1

[State -1, Normal Combo]
type = Varset
Trigger1 = StateNo = [100,101]
ignorehitpause = 1
var(3) = 1

[State -1, Normal Combo]
type = Varset
trigger1 = Movetype = H
trigger2 = var(9)
trigger2 = !numtarget
ignorehitpause = 1
var(3) = 0

[State -1, Cancel Combo]
type = Varset
trigger1 = 1
var(18) = 0

[State -1, Super Cancel]
type = Varset
TriggerAll = Movecontact = [1,5]
Trigger1 = StateNo = 1100
Trigger1 = StateType != A
Trigger2 = StateNo = 1220
Trigger3 = StateNo = 1300
Trigger4 = StateNo = 1450
Trigger4 = numtarget(1401)
Trigger5 = StateNo = 1800
Trigger5 = StateType != A
Trigger6 = StateNo = [1900,1901]
Trigger7 = hitdefattr = SC, NA
Trigger7 = var(1) = 3
Trigger8 = StateNo = 1970
Trigger8 = var(47) < 70
Trigger9 = StateNo = 1350
Trigger9 = var(15)
ignorehitpause = 1
var(18) = 1

[State -1, Final Impact]
type = Varset
TriggerAll = projcontact = 1, = [1,12]
Trigger1 = StateNo = 1000
Trigger1 = Anim = [1000,1002]
Trigger1 = animelem = 7, > 0
Trigger1 = animelem = 8, < 14
Trigger2 = StateNo = 1000
Trigger2 = Anim = [1010, 1012]
Trigger2 = animelem = 6, > 1
Trigger2 = animelem = 7, < 14
Trigger3 = StateNo = 1000
Trigger3 = Anim = 1020
Trigger3 = animelem = 6, > 4
Trigger3 = animelem = 7, < 14
Trigger4 = StateNo = 1600
Trigger4 = animelem = 12, > 0
Trigger4 = animelem = 13, < 14
Trigger5 = StateNo = 1751
Trigger5 = animelem = 3, > 1
Trigger5 = animelem = 4, < 14
Trigger6 = StateNo = 1751
Trigger6 = animelem = 9, > 1
Trigger6 = animelem = 10, < 14
ignorehitpause = 1
var(18) = 1

[State -1, Normal Combo]
type = Varset
trigger1 = Movetype = H
trigger2 = var(9)
trigger2 = !numtarget
ignorehitpause = 1
var(18) = 0

;--------------------------------------------------
; Drago Groove Power Attack
;--------------------------------------------------
[State -1, DG P. Attack]
type = ChangeState
Value = 1950
TriggerAll = !var(9)
TriggerAll = Command ="Power Attack" || Helper(2000), var(19)
TriggerAll = StateType != A
TriggerAll = Power >= 500*(!var(15))
Trigger1 = ctrl
Trigger2 = StateNo = [100,102]

;--------------------------------------------------
; Hidden Super Danger Moves
;--------------------------------------------------
[State -1, Kosatsu Jin]
type = ChangeState
Value = 4000
TriggerAll = !var(9)
TriggerAll = Command ="Kosatsu Jin"
TriggerAll = !var(1)
TriggerAll = Life <= Const(Data.Life)/4
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = power >= 2000+2000*(!var(15))

[State -1, Shin Ryuko Rambu]
type = ChangeState
Value = 4100
TriggerAll = !var(9)
TriggerAll = Command ="Shin Ryuko Rambu"
TriggerAll = var(1) = 4
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = Life <= Const(Data.Life)/4
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = power >= 2000+2000*(!var(15))

[State -1, Chou Haoh Shikoken]
type = ChangeState
Value = 4200
TriggerAll = !var(9)
TriggerAll = Command ="Haoh Shikoken"
TriggerAll = Command ="2punches" || helper(2000), var(7)
TriggerAll = var(1) = [1,3]
TriggerAll = !Numproj
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = (Life <= Const(Data.Life)/4) || var(1) = 3
TriggerAll = var(1) != 3 || var(32)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = power >= 2000+2000*(!var(15))

[State -1, Chou Ryuko Rambu]
type = ChangeState
Value = 4300
TriggerAll = !var(9)
TriggerAll = Command ="Ryuko Rambu"
TriggerAll = Command ="2punches" || helper(2000), var(7)
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = Life <= Const(Data.Life)/4
Trigger1 = ctrl
Trigger2 = var(18)
Trigger2 = power >= 2000+2000*(!var(15))

;--------------------------------------------------
; Danger Moves/Super Danger Moves
;--------------------------------------------------
[State -1, Ryuko Rambu]
type = ChangeState
Value = 3300
TriggerAll = !var(9)
TriggerAll = Command ="Ryuko Rambu"
TriggerAll = var(1) != [2,3]
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = (power >= 1000 && var(15)) || power >= 2000

[State -1, Haoh Shikoken]
type = ChangeState
Value = 3000
TriggerAll = !var(9)
TriggerAll = var(1) = [1,2]
TriggerAll = Command ="Haoh Shikoken"
Triggerall = !numproj
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = (power >= 1000 && var(15)) || power >= 2000

[State -1, Kyokugen Kohou]
type = ChangeState
Value = 3150
TriggerAll = !var(9)
TriggerAll = Command ="Kyokugen Kohou"
TriggerAll = Command ="2kicks" || helper(2000), var(8)
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = (power >= 1000 && var(15)) || power >= 2000

[State -1, Kyokugen Kohou]
type = ChangeState
Value = 3100
TriggerAll = !var(9)
TriggerAll = Command ="Kyokugen Kohou"
TriggerAll = var(1) = 2
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = (power >= 1000 && var(15)) || power >= 2000

[State -1, Kishin Geki]
type = ChangeState
Value = 3220
TriggerAll = !var(9)
TriggerAll = Command ="Kishin Geki SVC"
TriggerAll = Command ="2punches" || helper(2000), var(7)
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2bodydist x <= 25
TriggerAll = p2Statetype = S || p2Statetype = C
Trigger1 = !var(6)
Trigger1 = ctrl
Trigger2 = !var(19)
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = !var(19)
Trigger3 = (power >= 1000 && var(15)) || power >= 2000

[State -1, Kishin Geki]
type = ChangeState
Value = 3200
TriggerAll = !var(9)
TriggerAll = Command ="Kishin Geki"
TriggerAll = var(1) <= 1
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2bodydist x <= 25 || !var(1)
TriggerAll = p2Statetype = S || p2Statetype = C || !var(1)
Trigger1 = !var(6) || !var(1)
Trigger1 = ctrl
Trigger2 = !var(19) || !var(1)
Trigger2 = var(3)
Trigger3 = var(18)
Trigger3 = !var(19) || !var(1)
Trigger3 = (power >= 1000 && var(15)) || power >= 2000

;--------------------------------------------------
; Super Moves
;--------------------------------------------------
[State -1, Kyokugen Kohou]
type = ChangeState
Value = 1800
TriggerAll = StateType != A
TriggerAll = var(1) = 3
TriggerAll = !var(9)
TriggerAll = Command ="Kyokugen Kohou"
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1800
Trigger3 = StateNo != 1000
Trigger3 = StateNo != 1751

[State -1, Kyokugen Kohou]
type = ChangeState
Value = 1900
TriggerAll = StateType != A
TriggerAll = var(1) = 3
TriggerAll = Command ="Kishin Geki SVC"
TriggerAll = !var(9)
TriggerAll = p2bodydist x < 25
TriggerAll = p2Statetype = S || p2Statetype = C
Trigger1 = !var(6)
Trigger1 = ctrl

[State -1, Haoh Shikoken]
type = ChangeState
Value = 1750
TriggerAll = StateType != A
TriggerAll = var(1) = 3
TriggerAll = !var(32)
TriggerAll = !var(9)
TriggerAll = !Numproj
TriggerAll = Command ="Haoh Shikoken"
TriggerAll = Command ="2punches" || helper(2000), var(7)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000
Trigger3 = StateNo != 1751

[State -1, Haoh Shikoken]
type = ChangeState
Value = 1700
TriggerAll = StateType != A
TriggerAll = var(1) >= 3
TriggerAll = !var(9)
TriggerAll = !Numproj
TriggerAll = Command ="Haoh Shikoken"
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000
Trigger3 = StateNo != 1751

[State -1, Haoh Shikoken]
type = ChangeState
Value = 1600
TriggerAll = StateType != A
TriggerAll = !var(1)
TriggerAll = !var(9)
TriggerAll = Command ="Haoh Shikoken"
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1600
Trigger3 = StateNo != 1751

[State -1, Zanretsu Ken]
type = ChangeState
Value = 1400
TriggerAll = StateType != A
TriggerAll = var(1) = [1,3]
TriggerAll = !var(9)
TriggerAll = Command ="Zanretsu Ken"
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000
Trigger3 = StateNo != [1400,1499]
Trigger3 = StateNo != 1751

[State -1, Kohou]
type = ChangeState
Value = 1100
TriggerAll = var(1) = [2,3]
TriggerAll = Command ="Kohou"
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1100
Trigger3 = StateNo != 1000
Trigger3 = StateNo != 1751

[State -1, Kooh Ken]
type = ChangeState
Value = 1000
TriggerAll = Command ="Kooh Ken"
TriggerAll = !Numproj || StateNo = 1600
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000
Trigger3 = StateNo != 1751

[State -1, Hien Shippukyaku]
type = ChangeState
Value = 1200
TriggerAll = Command ="Hien Shippukyaku"
TriggerAll = var(28)
TriggerAll = !var(9)
TriggerAll = StateType != A
TriggerAll = var(1)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000 || !var(1)
Trigger3 = StateNo != 1751

[State -1, grab shorankyaku]
type = ChangeState
Value = 1550
TriggerAll = Command ="Shorankyaku"
TriggerAll = Command ="a" || helper(2000),var(4)
TriggerAll = !var(9)
TriggerAll = var(1) = 4
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000

[State -1, Shorankyaku]
type = ChangeState
Value = Ifelse(var(1), 1500, 1220)
TriggerAll = Command ="Shorankyaku"
TriggerAll = !var(9)
TriggerAll = var(1) != 3
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000 || !var(1)
Trigger3 = StateNo != 1220

[State -1, Mouko Burai Gan]
type = ChangeState
Value = 1300+100*(var(1) = 4)
TriggerAll = Command ="Mouko Burai Gan"
TriggerAll = var(1) != 3
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != 1000 || !var(1)
Trigger3 = StateNo != 1300
Trigger3 = !(var(1) = 4 && StateNo = [1400, 1499])

[State -1, Sanchin No Kata]
type = ChangeState
Value = 1350
TriggerAll = Command ="Sanchin No Kata"
TriggerAll = !var(1)
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)

;--------------------------------------------------
; Groove Moves
;--------------------------------------------------
[State -1, Knockdown Attack]
Type = ChangeState
Value = Ifelse(StateType = A, 660, 260)
TriggerAll = command = "knockdown"
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = Power >= 1000
Trigger3 = StateNo = 150 || StateNo = 152

[State -1, Roll Fwd]
Type = ChangeState
Value = 700
TriggerAll = command = "recovery"
TriggerAll = command = "holdfwd"
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = Power >= 1000
Trigger3 = StateNo = 150 || StateNo = 152

[State -1, Roll Back]
Type = ChangeState
Value = 710
TriggerAll = command = "recovery"
TriggerAll = command = "holdback"
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = Power >= 1000
Trigger3 = StateNo = 150 || StateNo = 152

[State -1, Dodge]
Type = ChangeState
Value = 720
TriggerAll = command = "recovery"
TriggerAll = !var(9)
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Dodge Attack]
Type = ChangeState
Value = 730
TriggerAll = StateNo = 720
TriggerAll = Time >= 15
TriggerAll = Time < 29
TriggerAll = !var(9)
Trigger1 = command = "x"
Trigger2 = command = "y"
Trigger3 = command = "z"
Trigger4 = command = "a"
Trigger5 = command = "b"
Trigger6 = command = "c"

[State -1, MAX Timer]
type = ChangeState
value = 750
triggerall = !var(9)
triggerall = command = "MAX Timer"
triggerall = power >= ifelse(movecontact, 2000, 1000)
triggerall = var(15) <= 0
TriggerAll = StateType != A
trigger1 = Ctrl
Trigger2 = StateNo = [100, 101]
trigger3 = hitdefattr = SC,NA
Trigger3 = movecontact

[State -1, SVC Grab]
type = ChangeState
value = Ifelse (command = "SVC Grab 1", 950, 960)
triggerAll = command = "SVC Grab"
TriggerAll = StateType != A
TriggerAll = !var(9)
trigger1 = Ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Capcom Recovery Roll]
type = ChangeState
triggerAll = canrecover
TriggerAll = Alive
triggerAll = vel y > 0
triggerAll = Pos y >= -20
TriggerAll = !var(9)
triggerAll = Command = "SFRecover"
triggerAll = p2dist x > 0
trigger1 = StateNo = 5030
trigger2 = StateNo = 5035
trigger3 = StateNo = 5050
trigger4 = StateNo = 5071
value = 5202

[State -1, Capcom Recovery Roll]
type = ChangeState
triggerAll = canrecover
TriggerAll = Alive
triggerAll = vel y > 0
triggerAll = Pos y >= -20
TriggerAll = !var(9)
triggerAll = Command = "SFRecover Reverse"
triggerAll = p2dist x <= 0
trigger1 = StateNo = 5030
trigger2 = StateNo = 5035
trigger3 = StateNo = 5050
trigger4 = StateNo = 5071
value = 5202

[State -1, charge]
type = ChangeState
value = 770
TriggerAll = !var(9)
triggerAll = power < const(data.power)
triggerAll = ctrl || stateno = [100,101]
triggerAll = !var(15) || numpartner
triggerAll = statetype != A
trigger1 = command = "Power Charge"
trigger2 = var(51) > 4

;--------------------------------------------------
; Throws
;--------------------------------------------------
[State -1, Oosotogari]
type = ChangeState
value = 800
Trigger1 = ctrl
Trigger1 = StateType = S
Trigger1 = p2BodyDist x < 15
Trigger1 = StateNo != [100,101]
Trigger1 = Command !="holddown"
Trigger1 = p2MoveType != H
Trigger1 = P2StateType = S || P2StateType = C
Trigger1 = Command = "y" || Command = "z"
Trigger1 = Command ="holdfwd" || Command = "holdback"

[State -1, Ippon Seoi]
type = ChangeState
value = 810
Trigger1 = var(9) <= 4
Trigger1 = ctrl
Trigger1 = StateType = S
Trigger1 = p2BodyDist x < 15
Trigger1 = StateNo != [100,101]
Trigger1 = Command !="holddown"
Trigger1 = p2MoveType != H
Trigger1 = P2StateType = S || P2StateType = C
Trigger1 = Command = "b" || Command = "c"
Trigger1 = Command ="holdfwd" || Command = "holdback"

;--------------------------------------------------
; Command Moves
;--------------------------------------------------
[State -1, Oniguruma]
type = ChangeState
value = 300
TriggerAll = !var(9)
TriggerAll = command = "Oniguruma"
TriggerAll = var(1) = [1,2]
TriggerAll = StateType != A
Trigger1 = ctrl
Trigger2 = var(3)
Trigger2 = stateno != [260,399]
Trigger2 = stateno != 730
Trigger2 = stateno != [500,599]
Trigger2 = stateno != [100,101]
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != [1000,1099]

[State -1, Kawara Wari]
type = ChangeState
value = 310
TriggerAll = command = "Kawara Wari"
TriggerAll = StateType != A
TriggerAll = !var(9)
TriggerAll = var(1) < 3
Trigger1 = ctrl
Trigger2 = var(3)
Trigger2 = stateno != [260,399]
Trigger2 = stateno != 730
Trigger2 = stateno != [500,599]
Trigger2 = stateno != [100,101]

[State -1, Hisha Otoshi: Dan Tsubushi]
type = ChangeState
value = 320+10*(var(1) = 3)
TriggerAll = var(1) =[1,3]
TriggerAll = Command ="Hisha Otoshi: Dan Tsubushi"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = var(3)
Trigger2 = var(1) != 3
Trigger2 = stateno != [260,399]
Trigger2 = stateno != 730
Trigger2 = stateno != [500,599]
Trigger2 = stateno != [100,101]
Trigger3 = !var(1)
Trigger3 = var(15)
Trigger3 = var(18)
Trigger3 = StateNo != [1000, 1010]

[State -1, Shagami Shite Mawashi Geri]
type = ChangeState
value = 340
TriggerAll = var(1) = 3
TriggerAll = Command = "Shagami Shite Mawashi Geri"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl

[State -1, Keima Uchi: Oiuchi]
type = ChangeState
value = 500+20*(var(1) = 3)
TriggerAll = command = "Keima Uchi: Oiuchi"
TriggerAll = var(1) = 1 || var(1) = 3
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = var(1) != 3
Trigger2 = var(3)
Trigger2 = stateno != [260,310]
Trigger2 = stateno != 730
Trigger2 = stateno != [500,530]

[State -1, Jigoku Zuki]
type = ChangeState
value = 510
TriggerAll = command = "Jigoku Zuki"
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = var(1) != 3
Trigger2 = var(3)
Trigger2 = stateno != [260,310]
Trigger2 = stateno != 730
Trigger2 = stateno != 500

;--------------------------------------------------
; Basic Standing Attacks
;--------------------------------------------------
[State -1, Standing Weak Punch]
type = ChangeState
value = 200
TriggerAll = command = "x"
TriggerAll = Command !="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = StateNo = 200
Trigger3 = AnimElem = 3, > 2
Trigger4 = StateNo = 210
Trigger4 = Anim = 215
Trigger4 = AnimElem = 4, > 2
Trigger5 = StateNo = 400
Trigger5 = AnimElem = 2, > 2
Trigger6 = StateNo = 410
Trigger6 = AnimElem = 4, > 2 || MoveContact

[State -1, Standing Weak Kick]
type = ChangeState
value = 210
TriggerAll = command = "a"
TriggerAll = Command !="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = StateNo = 200
Trigger3 = AnimElem = 3, > 2
Trigger4 = StateNo = 210
Trigger4 = Anim = 215
Trigger4 = AnimElem = 4, > 2
Trigger5 = StateNo = 400
Trigger5 = AnimElem = 2, > 2
Trigger6 = StateNo = 410
Trigger6 = AnimElem = 4, > 2 || MoveContact

[State -1, Standing Medium Punch]
type = ChangeState
value = 220
TriggerAll = command = "y"
TriggerAll = Command !="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Standing Medium Kick]
type = ChangeState
value = 230
TriggerAll = command = "b"
TriggerAll = Command !="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Standing Strong Punch]
type = ChangeState
value = 240
TriggerAll = command = "z"
TriggerAll = Command !="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Standing Strong Kick]
type = ChangeState
value = 250
TriggerAll = command = "c"
TriggerAll = Command !="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

;--------------------------------------------------
; Basic Crouching Attacks
;--------------------------------------------------
[State -1, Crouching Weak Punch]
type = ChangeState
value = 400
TriggerAll = command = "x"
TriggerAll = Command ="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = AnimElem = 2, > 2
Trigger3 = StateNo = 200
Trigger4 = AnimElem = 2, > 2
Trigger4 = StateNo = 400
Trigger5 = StateNo = 410
Trigger5 = AnimElem = 4, > 2 || MoveContact

[State -1, Crouching Weak Kick]
type = ChangeState
value = 410
TriggerAll = command = "a"
TriggerAll = Command ="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]
Trigger3 = var(1) != 3
Trigger3 = AnimElem = 2, > 2
Trigger3 = sTATEnO = 200 || StateNo = 410

[State -1, Crouching Medium Punch]
type = ChangeState
value = 420
TriggerAll = command = "y"
TriggerAll = Command ="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]


[State -1, Crouching Medium Kick]
type = ChangeState
value = 430
TriggerAll = command = "b"
TriggerAll = Command ="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Crouching Strong Punch]
type = ChangeState
value = 440
TriggerAll = command = "z"
TriggerAll = Command ="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

[State -1, Crouching Strong Kick]
type = ChangeState
value = 450
TriggerAll = command = "c"
TriggerAll = Command ="holddown"
TriggerAll = StateType != A
TriggerAll = !var(9)
Trigger1 = ctrl
Trigger2 = StateNo = [100, 101]

;--------------------------------------------------
; Basic Aerial Attacks
;--------------------------------------------------
[State -1, Aerial Weak Punch]
type = ChangeState
value = 600
Trigger1 = command = "x"
Trigger1 = StateType = A
Trigger1 = ctrl
Trigger1 = !var(9)

[State -1, Aerial Weak Kick]
type = ChangeState
value = 610
Trigger1 = command = "a"
Trigger1 = StateType = A
Trigger1 = ctrl
Trigger1 = !var(9)

[State -1, Aerial Medium Punch]
type = ChangeState
value = 620
Trigger1 = command = "y"
Trigger1 = StateType = A
Trigger1 = ctrl
Trigger1 = !var(9)

[State -1, Aerial Medium Kick]
type = ChangeState
value = 630
Trigger1 = command = "b"
Trigger1 = StateType = A
Trigger1 = ctrl
Trigger1 = !var(9)

[State -1, Aerial Strong Punch]
type = ChangeState
value = 640
Trigger1 = command = "z"
Trigger1 = StateType = A
Trigger1 = ctrl
Trigger1 = !var(9)

[State -1, Aerial Strong Kick]
type = ChangeState
value = 650
Trigger1 = command = "c"
Trigger1 = StateType = A
Trigger1 = ctrl
Trigger1 = !var(9)

;--------------------------------------------------
; Taunt
;--------------------------------------------------
[State -1, Taunt]
type = ChangeState
value = 195
Trigger1 = command = "start"
Trigger1 = StateNo != 195
Trigger1 = statetype != A
Trigger1 = ctrl
Trigger1 = !var(9)

;--------------------------------------------------
; Running - Player
;--------------------------------------------------
[State -1, Run Fwd]
type = ChangeState
value = 100
Trigger1 = Command = "FF"
Trigger1 = Ctrl
Trigger1 = StateType = S
Trigger1 = !var(9)

[State -1, GC Dash]
type = ChangeState
value = 101
TriggerAll = Command = "FF"
TriggerAll = Power >= 500
Trigger1 = StateNo = 150
Trigger2 = StateNo = 152

[State -1, Run Back]
Type = ChangeState
Value = 105
Trigger1 = Command = "BB"
Trigger1 = Ctrl
Trigger1 = StateType = S
Trigger1 = !var(9)

;--------------------------------------------------
; Triangle jump
;--------------------------------------------------
[State -1, triangle jump]
type = ChangeState
value = 670
TriggerAll = var(1) = 3
TriggerAll = command = "holdup"
TriggerAll = !var(9)
TriggerAll = StateType = A
TriggerAll = ctrl
Trigger1 = vel x >= 0
Trigger1 = frontedgedist < 15
Trigger1 = command = "holdback"
Trigger2 = vel x <= 0
Trigger2 = backedgedist < 15
Trigger2 = command = "holdfwd"

;==================================================
; AI codes
;==================================================

;----------------- MAX Activation -----------------

[State -1, MAX Timer AI]
type = ChangeState
value = 750
Trigger1 = var(9)
Trigger1 = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
trigger1 = power >= ifelse(movecontact, 3000, 2000)
trigger1 = var(15) <= 0
Trigger1 = StateType != A
trigger1 = ctrl
Trigger1 = p2bodydist x > 150
Trigger1 = p2movetype != A

;------------------- 2002 Mode -------------------

[State -1, Kosatsu Jin AI]
type = ChangeState
Value = 4000
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = !var(1)
TriggerAll = Life <= LifeMax/4
triggerall = !var(25)
triggerall = !var(30)
triggerall = var(31) < 4
TriggerAll = StateType != A
triggerall = p2Movetype = A
triggerall = Enemynear, animtime < -10
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = p2Life >= 200
TriggerAll = ctrl || StateNo = [120,141]
trigger1 = Enemy, HitDefAttr = A, NA,SA,HA
trigger1 = p2bodydist x < 90
Trigger1 = p2bodydist y = [-145,-30]
trigger2 = Enemy, HitDefAttr = S,SA,HA
trigger2 = p2bodydist x < 95
trigger3 = Enemy, HitDefAttr = S, NA
Trigger3 = p2bodydist x < 70
trigger4 = Enemy, HitDefAttr = C, NA,SA,HA
trigger4 = p2bodydist x < 80

[State -1, Haoh Shikoken 02 AI-1]
type = ChangeState
value = 1600
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = !var(1)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2dist x = [0,90]
Trigger1 = StateNo = 52
Trigger1 = !Animtime
Trigger2 = p2StateNo = 5120
Trigger2 = EnemyNear, AnimTime = [-36,-30]
Trigger2 = Ctrl
Trigger3 = var(3)
Trigger3 = StateNo = 200
Trigger3 = moveguarded
Trigger4 = var(3)
Trigger4 = StateNo = [400,410]
Trigger4 = moveguarded

[State -1, Haoh Shikoken 02 AI-2]
type = ChangeState
value = 1600
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = !var(1)
TriggerAll = StateType != A
TriggerAll = EnemyNear, Numproj
TriggerAll = !var(22)
TriggerAll = p2bodydist x > 190
TriggerAll = EnemyNear, Numproj
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, Sanchin no Kata AI]
type = ChangeState
value = 1350
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(15-var(9))
TriggerAll = !var(1)
TriggerAll = StateType != A
TriggerAll = inguarddist
TriggerAll = ctrl || Stateno = [120,131]
TriggerAll = EnemyNear, AnimTime =[-40,-15]
TriggerAll = p2dist x = [0,100]
Trigger1 = EnemyNear, hitdefattr = SCA,AA,AP
Trigger2 = EnemyNear, numproj

;--------------- 01 Mode ---------------

[State -1, Suburu Ou Shikoken AI]
type = ChangeState
Value = 4200
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 1
TriggerAll = Life <= LifeMax/4
TriggerAll = p2Life > 200
TriggerAll = !var(22)
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = ctrl || stateno = 100 || (stateno = [120,131])
Trigger1 = p2dist x > 125
Trigger1 = p2statetype != A
Trigger1 = p2movetype = A
Trigger1 = EnemyNear, Animtime < -30
trigger1 = p2stateNo != [3950, 3999]
Trigger2 = p2dist x > 125
Trigger2 = p2StateType = A
Trigger2 = Enemy, vel x = 0
Trigger3 = p2StateType = A
Trigger3 = Enemy, vel x < 0

[State -1, Haoh Shikoken AI]
type = ChangeState
Value = 3000
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 1
TriggerAll = StateType != A
TriggerAll = !var(22)
TriggerAll = !var(25)
TriggerAll = !NumProj
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = ctrl
TriggerAll = p2bodydist x > 120
Trigger1 = P2StateType != A
Trigger1 = p2MoveType = A
Trigger1 = p2Stateno != [3900,3999]
Trigger2 = EnemyNear, pos y = [-120,-90]
Trigger2 = EnemyNear, vel y = [-2,4]
Trigger2 = Enemynear, vel x > 0
Trigger2 = p2MoveType != H

[State -1, Haoh Shikoken AI]
type = ChangeState
Value = 1700
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 4
TriggerAll = StateType != A
TriggerAll = !var(22)
TriggerAll = !Numproj
TriggerAll = StateNo = 160 || ctrl || (stateno = [100,102]) || stateno = [120,131]
Trigger1 = p2stateNo = [5102,5120]
Trigger1 = p2bodydist x > 120
Trigger1 = p2StateType != A
Trigger2 = p2bodydist x > 145
trigger2 = p2MoveType = H
trigger3 = p2bodydist x > 170
trigger3 = !enemynear, numproj
trigger3 = p2movetype != A
trigger3 = p2statetype != A
trigger3 = random < 150
trigger4 = p2dist x > 175
trigger4 = p2statetype = A
trigger4 = enemynear, vel X >= 0

[State -1, Shouran Kyaku 95 AI]
type = ChangeState
value = ifelse(p2dist x < 50, 1550, 1500)
TriggerAll = var(9)
TriggerAll = var(1) = 4
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(15-var(9))
TriggerAll = (p2statetype = C||p2statetype = S)
TriggerAll = p2stateNo != [1100,4999]
TriggerAll = p2stateNo != [6000,8999]
TriggerAll = StateType != A
triggerAll = !var(6)
Trigger1 = p2dist x = [0,50]
trigger1 = ctrl
trigger1 = !var(25)
Trigger2 = StateNo = [200,450]
Trigger2 = p2dist x = [0,50]
Trigger2 = !MoveContact
trigger2 = !AnimTime

[State -1, Kooh Ken AI]
type = ChangeState
Value = 1000
Trigger1 = var(9)
Trigger1 = var(1)
Trigger1 = Random < 200-100*(var(53) > 0)+50*(var(1) = 3)
Trigger1 = !Numproj
Trigger1 = StateType != A
Trigger1 = Ctrl
Trigger1 = p2StateNo != [3000, 4999]
trigger1 = p2bodydist x > 150-60*(var(1) = 3)
Trigger1 = p2statetype != A
Trigger1 = p2statetype != L
Trigger1 = !var(22)

[State -1, OTG AI Finisher]
type = ChangeState
Value = 500
TriggerAll = var(1) = 1
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = random < ifelse(var(9) < 3, 200,400)
TriggerAll = statetype != A
TriggerAll = P2MoveType = H
TriggerAll = p2dist x = [5,80]
TriggerAll = ctrl || stateno = [100,101]
Trigger1 = p2StateNo = 6700
Trigger2 = p2StateNo = [5100,5101]

;--------------- Classic Mode ---------------

[State -1, SRyuko Rambu AI]
type = ChangeState
value = 4100
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(15-var(9))
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = Life <= LifeMax/4
TriggerAll = var(1) = 4
triggerAll = ctrl || StateNo = 100 ||  StateNo = [120,131]
TriggerAll = p2dist x > 5
Trigger1 = p2StateNo = [5120,5201]
Trigger2 = p2MoveType = H
Trigger2 = P2StateNo = [6010,6019]
trigger3 = p2MoveType = H
trigger3 = p2StateType != A
trigger3 = p2StateType != L

[State -1, SRyuko Rambu AI trick]
type = ChangeState
value = 4100
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(15-var(9))
TriggerAll = StateType != A
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = (Life <= Const(Data.Life)/4)
TriggerAll = var(1) = 4
TriggerAll = p2dist x > 5
TriggerAll = MoveContact
TriggerAll = !AnimTime
Trigger1 = StateNo = [200,450]

[State -1, Shouran Kyaku AI]
type = ChangeState
value = 1500
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = var(1)
TriggerAll = var(1) != 3
TriggerAll = !Numtarget(1210)
TriggerAll = p2dist x > 0
triggerAll = p2StateType != A
triggerAll = p2StateType != L
triggerAll = StateNo = 160
trigger1 = prevstateno = [1200,1210]
trigger2 = random < 250

[State -1, Shouran Kyaku AI]
type = ChangeState
value = 1500
TriggerAll = var(1)
TriggerAll = var(1) != 3
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = var(9) = [1,4]
TriggerAll = !Numtarget(1210)
TriggerAll = p2dist x > 0
triggerAll = p2MoveType = I
triggerAll = p2StateNo = [300,2000]
triggerAll = p2StateType != A
triggerAll = p2StateType != L
triggerAll = StateNo = 160
triggerAll = p2bodydist x < 150
trigger1 = prevstateno != [1200,1210]
trigger2 = random < 250

[State -1, Hien Shippu Kyaku AI]
type = ChangeState
value = 1200
TriggerAll = var(1)
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = !Numtarget(1210)
TriggerAll = p2dist x > 0
triggerAll = p2StateType != A
triggerAll = p2StateType != L
triggerAll = p2bodydist x < 200
triggerAll = StateNo = 160
trigger1 = prevstateno != [1200,1210]
trigger2 = random < 250

;----------------- Mr. Karate Mode ----------------

[State -1, Chou Haoh Shikoken AI]
type = ChangeState
Value = 4200
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 2
TriggerAll = StateType != A
TriggerAll = !NumProj
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = !var(25)
TriggerAll = ctrl || stateno = [120,141]
TriggerAll = Life <= LifeMax/4
TriggerAll = p2bodydist x > 0
Trigger1 = EnemyNear, HitDefAttr = SC, AA, AP, AT
Trigger1 = EnemyNear, AnimTime < -28
Trigger2 = var(15) <= 100
Trigger2 = p2stateNo = [5120, 5201]
Trigger2 = EnemyNear, AnimTime > -20

[State -1, Haoh Shikoken AI]
type = ChangeState
Value = 3000
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 2
TriggerAll = StateType != A
TriggerAll = !var(22)
TriggerAll = !NumProj
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = !var(25)
TriggerAll = P2StateType = L
TriggerAll = p2bodydist x > 120
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, Kyokugen Kohou AI AA]
type = ChangeState
Value = 3100+50*(var(1) = 3)
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = [2,3]
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = Enemy, vel y > -5
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = p2dist x < 55+9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))|| frontEdgeDist < 70
TriggerAll = p2dist x > 10+9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -40-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*9))
TriggerAll = p2dist y > -95-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*9))
TriggerAll = random < floor(((1000-life)/1.5)/((1+(var(9) < 4))))
TriggerAll = p2MoveType != H
TriggerAll = !(var(1) = 3 && !var(32))
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, Kyokugen Kohou AI Counter]
type = ChangeState
Value = 3100+50*(var(1) = 3)
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = [2,3]
TriggerAll = StateType != A
TriggerAll = P2StateType != A
TriggerAll = p2dist x = [0,55]
TriggerAll = !var(25) || movehit
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = (p2StateNo!= [3000,4999]) || Enemynear, Moveguarded
TriggerAll = enemy, numproj >= 1 || EnemyNear, HitDefAttr = SCA, AA, AP, AT
TriggerAll = !(var(1) = 3 && !var(32))
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, Kohou AI]
type = ChangeState
Value = 1100
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 2
TriggerAll = statetype != A
TriggerAll = p2dist x < 80+5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -45-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*5))
TriggerAll = p2dist y > -90-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*5))
TriggerAll = p2statetype = A
TriggerAll = EnemyNear, vel y > -9
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2StateNo != [2000,4999]
TriggerAll = p2Movetype != H
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

;-------- Honki ni Natta Mr. Karate Mode ----------

[State -1, Chou Ryuko Rambu AI]
type = ChangeState
Value = 4300
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(15-var(9))
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = !var(22)
TriggerAll = !NumProj
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = Life <= LifeMax/4
TriggerAll = !var(25)
TriggerAll = p2bodydist x > 80
TriggerAll = ctrl || stateno = 100 || StateNo = 103
Trigger1 = p2StateNo = [5120,5201]
Trigger2 = p2MoveType = H
Trigger2 = P2StateNo = [6010,6019]
trigger3 = p2MoveType = H
trigger3 = p2StateType != A
trigger3 = p2StateType != L

[State -1, Chou Haoh Shikoken AI]
type = ChangeState
Value = 4200
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = !var(22)
TriggerAll = !var(25)
TriggerAll = StateType != A
TriggerAll = !NumProj
TriggerAll = Power >= 1000+2000*(!var(15))
TriggerAll = ctrl || stateno = [120,141]
Trigger1 = EnemyNear, HitDefAttr = SC, NA
Trigger1 = EnemyNear, AnimTime < -28
Trigger1 = p2dist x = [55,90]
Trigger2 = EnemyNear, HitDefAttr = SC, NT, ST, HT
Trigger2 = EnemyNear, AnimTime < -28
Trigger2 = p2dist x = [55,90]
Trigger3 = var(15) <= 100
Trigger3 = p2stateNo = [5102,5120]
Trigger3 = p2bodydist x > 120


[State -1, Kyokugen Kohou AI AA]
type = ChangeState
Value = ifelse(random < 500, 1800, 1100)
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 3
TriggerAll = statetype != A
TriggerAll = p2dist x < 60+14*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 14*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y > -95-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*14))
TriggerAll = p2statetype = A
TriggerAll = EnemyNear, vel y > -3
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2StateNo != [2000,4999]
TriggerAll = ctrl ||(stateno = [120,141]) || (time > 8 && stateno = [100,102])
TriggerAll = p2Movetype != H
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, Kishin Geki AI]
type = ChangeState
Value = 1900
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 3
TriggerAll = !var(25)
TriggerAll = !var(6)
TriggerAll = StateType != A
TriggerAll = p2bodydist x < 25
TriggerAll = p2Statetype = S || p2Statetype = C
TriggerAll = ctrl ||(stateno = [120,141]) || (time > 8 && stateno = [100,102])
Trigger1 = EnemyNear, HitDefAttr = SC, AA, AP, AT
Trigger1 = EnemyNear, animtime < -20
Trigger2 = var(52) > 35
Trigger3 = random < 45

[State -1, Haoh Shikoken AI]
type = ChangeState
Value = 1700+50*(random > 500 && !var(32))
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = !var(22)
TriggerAll = !Numproj
TriggerAll = StateNo = 160 || ctrl || (stateno = [100,102]) || stateno = [120,131]
Trigger1 = EnemyNear, HitDefAttr = SC, NA
Trigger1 = EnemyNear, AnimTime < -19
Trigger1 = p2dist x = [55,90]
Trigger1 = p2StateType != A
Trigger2 = EnemyNear, HitDefAttr = SC, NT, ST, HT
Trigger2 = EnemyNear, AnimTime < -19
Trigger2 = p2dist x = [55,90]
Trigger2 = p2StateType != A
Trigger3 = p2stateNo = [5102,5120]
Trigger3 = p2bodydist x > 120
Trigger4 = p2bodydist x > 145
trigger4 = p2MoveType = H
trigger5 = p2bodydist x > 175
trigger5 = p2statetype = A
trigger5 = enemynear, vel X >= 0

[State -1, Kooh Ken poking]
type = ChangeState
value = 1000
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) = 3
triggerAll = statetype != A
triggerAll = p2statetype != A
triggerAll = p2statetype != L
TriggerAll = !var(22)
TriggerAll = p2dist x > 85
TriggerAll = ctrl || StateNo = 100 || StateNo = [120,141]
Trigger1 = p2StateNo = [52,100]
Trigger1 = EnemyNear, AnimTime < -12-3*(p2dist x > 170)-2*(p2dist x > 225)
Trigger2 = p2StateNo = [200,1999]
Trigger2 = EnemyNear, AnimTime < -12-3*(p2dist x > 170)-2*(p2dist x > 225)
Trigger2 = p2MoveType = A
trigger3 = p2StateNo = 5120
Trigger3 = EnemyNear, AnimTime > -8-3*(p2dist x > 170)-2*(p2dist x > 225)
trigger4 = p2MoveType = H

[State -1, post-koohken 1]
type = ChangeState
value = ifelse(p2dist x < 95, 240, 430)
Trigger1 = var(1) = 3
Trigger1 = var(9) = [2,4]
Trigger1 = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x < 110
trigger1 = p2MoveType = H
Trigger1 = Numtarget(1000)
Trigger1 = Ctrl
trigger1 = statetype != A

[State -1, post-koohken 2]
type = ChangeState
value = ifelse(p2dist x < 30, 440, ifelse(p2dist x < 80, 420, 430))
Trigger1 = var(1) = 3
Trigger1 = var(9) = 5
Trigger1 = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x < 110
trigger1 = p2MoveType = H
Trigger1 = Numtarget(1000)
Trigger1 = Ctrl
trigger1 = statetype != A

;-------------------- All modes -------------------

[State -1, Ryuko Rambu AI]
type = ChangeState
Value = 3300
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
TriggerAll = var(1) != [2,3]
TriggerAll = StateType != A
TriggerAll = !var(25) || movehit
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = ctrl || stateno = 100 || (stateno = [120,131])
Trigger1 = P2StateType != A
Trigger1 = p2bodydist x = [0,90]
Trigger1 = EnemyNear, HitDefAttr = SCA, AA, AP, AT
Trigger1 = EnemyNear, AnimTime < -16-((p2dist x - 44)/10)
Trigger2 = p2bodydist x = [60, 120]
Trigger2 = p2statetype = A
Trigger2 = EnemyNear, vel y = [0,2]
Trigger2 = EnemyNear, pos y = [-130,-65]

[State -1, Kishin Geki AI]
type = ChangeState
value = 3200+20*(var(1) = 3)
TriggerAll = var(9)
TriggerAll = var(1) != 2
TriggerAll = var(1) != 4
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(12-var(9))
TriggerAll = p2statetype != A
TriggerAll = p2statetype != L
TriggerAll = p2stateNo != [1100,4999]
TriggerAll = p2stateNo != [6000,10999]
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = p2dist x = [0,60]
triggerAll = !var(6)
triggerAll = !var(25)
TriggerAll = !(var(1) = 3 && !var(32))
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, Mouko Burai Gan AI]
type = ChangeState
value = 1300
Triggerall = var(1) < 3
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
triggerall = !var(25)
triggerall = !var(30)
triggerall = var(31) < 5
triggerall = statetype != A
triggerall = Enemynear, animtime < -17
TriggerAll = ctrl || stateno = 100 || StateNo = [120,141]
triggerAll = p2bodydist x > 20*(enemynear, vel x > 0)
triggerAll = p2bodydist x < 68+20*(enemynear, vel x > 0)
trigger1 = Enemy, HitDefAttr = A, NA,SA,HA
Trigger1 = p2bodydist y = [-145,-40]
trigger2 = Enemy, HitDefAttr = S,NA,SA,HA

[State -1, Jump  AI]
type = ChangeState
value = 40+(random < 400)
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(12-var(9))
TriggerAll = statetype != A
TriggerAll = ctrl
TriggerAll = !var(53)
triggerAll = p2MoveType = A
Trigger1 = Enemy, vel x = 0
Trigger1 = p2stateNo = [1000,2999]
trigger1 = EnemyNear, AnimTime < -31
Trigger1 = p2bodydist x >= 90
Trigger1 = p2statetype != A
Trigger2 = Enemy, vel x = 0
Trigger2 = p2stateNo = [1000,2999]
trigger2 = EnemyNear, AnimTime < -31
Trigger2 = p2bodydist x >= 90
Trigger2 = p2statetype != A
trigger2 = EnemyNear, Numproj || EnemyNear, hitdefattr != SCA, AA
Trigger3 = EnemyNear, hitdefattr = SCA, AT

[State -1, SVC Grab]
type = ChangeState
value = ifelse(random >= 500, 950, 960)
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(12-var(9))
triggerall = p2statetype != A
triggerall = p2movetype != H
triggerall = ctrl
TriggerAll = statetype != A
TriggerAll = p2bodydist x < 20
triggerAll = p2stateNo != [3950, 3999]
TriggerAll = !var(6)
trigger1 = p2stateno = [52,59]
trigger2 = p2stateno = 5201
Trigger2 = enemyNear,animtime = 0
trigger3 = EnemyNear,authorname = "Don Drago"
Trigger3 = p2stateno = [5202,5204]
Trigger4 = var(25)
Trigger4 = EnemyNear, Ctrl

[State -1, Normal Grab]
type = ChangeState
value = ifelse(random < 500, 800, 810)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(12-var(9))
triggerAll = var(9)
triggerAll = !var(6)
triggerAll = !var(25)
triggerAll = ctrl
TriggerAll = statetype != A
TriggerAll = p2bodydist x < 15
TriggerAll = p2movetype != H
triggerAll = p2stateno != [5000,5210]
TriggerAll = p2stateno != [1100,4999]
TriggerAll = p2stateno != [6000,10999]
trigger1 = p2statetype = S
Trigger2 = p2statetype = C

[State -1, Roll Fwd against cross-up AI]
type = ChangeState
value = 700
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(10-var(9))
triggerAll = statetype != A
TriggerAll = ctrl || stateno = 100 || stateno = [120,131]
trigger1 = p2StateNo = 40
Trigger1 = EnemyNear, vel x > 0
Trigger1 = p2dist x < 30
trigger2 = p2StateType = A
trigger2 = p2MoveType != H
Trigger2 = EnemyNear, vel x > 0
Trigger2 = EnemyNear, vel y < .75
Trigger2 = p2dist x < 10

[State -1, Roll Fwd AI]
type = ChangeState
value = 700
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(9-var(9))
triggerAll = statetype != A
triggerAll = inguarddist
triggerAll = !var(25)
triggerAll = p2bodydist x = [25,130]
TriggerAll = EnemyNear, AnimTime = [-46, -36]
TriggerAll = p2statetype != A
TriggerAll = ctrl || ((stateno = 100 || stateno = 103)) || stateno = [120,131]
Trigger1 = EnemyNear, hitdefattr = SCA, AA, AP
Trigger2 = Enemy, Numproj

[State -1, Dodge AI]
type = ChangeState
value = 720
TriggerAll = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(9-var(9))
triggerall = statetype != A
triggerAll = !var(25)
triggerAll = inguarddist
TriggerAll = ctrl || stateno = [120,131]
triggerAll = p2bodydist x > 25
TriggerAll = p2statetype != A
Trigger1 = (p2StateNo != [200, 699]) || EnemyNear, AnimTime < -40

[State -1, Dodge Attack]
Type = ChangeState
Value = 730
Trigger1 = StateNo = 720
Trigger1 = Time >= 15
Trigger1 = Time < 29
Trigger1 = var(9)
Trigger1 = random < 200
Trigger1 = p2bodydist x = [0,35]
Trigger1 = EnemyNear, Ctrl = 0
Trigger1 = EnemyNear, AnimTime = [-19,-14]

;--------------------------------------------------
;------------- Advanced Combo Strings -------------
;--------------------------------------------------

;------------ LV4 MAX Thread -------------

[State -1, MAX Timer AI]
type = ChangeState
value = 750
TriggerAll = var(9) > 3
TriggerAll = random < 850
TriggerAll = Power >= 2000
TriggerAll = !var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2bodydist x <= 45
TriggerAll = MoveHit
Trigger1 = var(3)
Trigger1 = StateNo = 300
Trigger2 = var(1) != [1,2]
Trigger2 = StateNo = [220,240]
Trigger2 = var(3) || var(1) = 3
Trigger3 = var(1) != [1,2]
Trigger3 = StateNo = [420,440]
Trigger3 = var(3) || var(1) = 3

;------- 02 Takuma cancel thread --------

[State -1, 02 Cancel Thread]
type = ChangeState
Value = 1220
Trigger1 = var(9) = 5
Trigger1 = random < 750
Trigger1 = !var(1)
Trigger1 = var(15)
Trigger1 = var(18)
Trigger1 = StateNo = 1000
Trigger1 = ProjGuarded(1000) = 1, = [5,12]
trigger1 = Numtarget(1001)
trigger1 = Target, StateNo = 1610

;------- 01 cancel thread --------

[State -1, 01 Cancel Thread]
type = ChangeState
Value = 1000
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 1
TriggerAll = var(15)
TriggerAll = var(18)
TriggerAll = StateNo = 1450
TriggerAll = Numtarget(1401)
TriggerAll = Target, backedgebodydist > 60
Trigger1 = p2life < 150
Trigger2 = power < 1000

;------- Classic Takuma cancel thread --------

[State -1, Classic Cancel Thread]
type = ChangeState
Value = 1700
Trigger1 = var(9) = 5
Trigger1 = random < 750
Trigger1 = var(1) = 4
Trigger1 = var(15)
Trigger1 = var(18)
Trigger1 = StateNo = 1450
Trigger1 = Numtarget(1401)


;------- Karate cancel thread --------

[State -1, Karate Cancel Thread]
type = ChangeState
Value = 1100
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 2
TriggerAll = var(15)
TriggerAll = var(18)
TriggerAll = StateNo = 1450
TriggerAll = Numtarget(1401)
Trigger1 = p2life < 150
Trigger2 = power < 1000

;------- Serious cancel thread --------

[State -1, SKarate cancel thread 1]
type = ChangeState
Value = 1200
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = var(15)
TriggerAll = var(18)
TriggerAll = p2StateType != A
Trigger1 = StateNo = 1100
Trigger1 = AnimElem = 10, > 0
Trigger2 = StateNo = 1800
Trigger2 = AnimElem = 10, > 0
Trigger3 = StateNo = 1900
Trigger3 = AnimElem = 14, > 0
Trigger4 = StateNo = 425
Trigger5 = StateNo = 440

[State -1, SKarate cancel thread 2]
type = ChangeState
Value = ifelse(StateNo = 1800, 1100, 1800)
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = var(15)
TriggerAll = var(18)
TriggerAll = p2StateType != A
Trigger1 = StateNo = 1100
Trigger1 = AnimElem = 10, > 0
Trigger2 = StateNo = 1800
Trigger2 = AnimElem = 10, > 0
Trigger3 = StateNo = 1900
Trigger3 = AnimElem = 14, > 0

[State -1, SKarate cancel thread 3]
type = ChangeState
Value = 1000
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = var(15)
TriggerAll = var(18)
TriggerAll = p2MoveType = H
Trigger1 = p2StateNo = [6000,6005]
Trigger1 = StateNo = 1100
Trigger1 = AnimElem = 10, > 0
Trigger2 = p2StateNo = [6000,6005]
Trigger2 = StateNo = 1450
Trigger2 = Target, backedgebodydist < 10
Trigger3 = p2StateNo = [6000,6005]
Trigger3 = StateNo = 1800
Trigger3 = AnimElem = 10, > 0
Trigger4 = StateNo = [210,240]
Trigger5 = StateNo = [420,440]
Trigger5 = PrevStateNo != 52

[State -1, SKarate cancel thread 4b]
type = ChangeState
Value = 4200
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = StateType != A
TriggerAll = Power >= 2000+2000*(!var(15))
TriggerAll = movehit
TriggerAll = p2StateType = A
TriggerAll = p2StateNo = [6000,6004]
TriggerAll = var(15) <= 300
TriggerAll = var(18)
Trigger1 = StateNo = 1450
Trigger1 = EnemyNear, backedgedist > 20
Trigger2 = StateNo = 1100
Trigger2 = AnimElem = 10, > 0
Trigger3 = StateNo = 1800
Trigger3 = AnimElem = 10, > 0

[State -1, SKarate cancel thread 4b]
type = ChangeState
Value = 3150
Trigger1 = var(9) = 5
Trigger1 = random < 750
Trigger1 = var(1) = 3
Trigger1 = var(32)
Trigger1 = StateNo = 160
Trigger1 = PrevStateNo = 1000
Trigger1 = P2StateType = A
Trigger1 = P2MoveType = H
Trigger1 = P2StateNo = [6000,6005]
Trigger1 = p2dist x = [0,70]
Trigger1 = var(15) <= 300
Trigger1 = Power >= 1000 || var(15)
Trigger1 = p2Life >= 150 || var(15)

[State -1, SKarate cancel thread 4c]
type = ChangeState
Value = 1400
Trigger1 = var(9) = 5
Trigger1 = random < 750
Trigger1 = var(1) = 3
Trigger1 = StateType != A
Trigger1 = p2MoveType = H
Trigger1 = p2StateNo = [6000,6005]
Trigger1 = StateNo = 160
Trigger1 = PrevStateNo = 1000
Trigger1 = EnemyNear, backedgedist < 10

[State -1, SKarate cancel thread 4d]
type = ChangeState
Value = ifelse(random < 250, 1800, 1100)
Trigger1 = var(9) = 5
Trigger1 = random < 750
Trigger1 = var(1) = 3
Trigger1 = StateType != A
Trigger1 = p2MoveType = H
Trigger1 = p2StateNo = [6000,6005]
Trigger1 = StateNo = 160
Trigger1 = PrevStateNo = 1000

[State -1, SKarate Cancel Thread 4e]
type = ChangeState
Value = 1700+50*(random > 250 && !var(32))
TriggerAll = var(9) = 5
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = StateType != A
TriggerAll = !NumProj
TriggerAll = var(18)
TriggerAll = MoveHit
TriggerAll = numtarget
TriggerAll = p2StateType = A
TriggerAll = var(15)
TriggerAll = (var(15) <= 300) || (StateNo = 1450 && EnemyNear, backedgedist > 20)
Trigger1 = StateNo = 1450
Trigger2 = StateNo = 1100
Trigger2 = AnimElem = 10, > 0
Trigger3 = StateNo = 1800
Trigger3 = AnimElem = 10, > 0

;-------------- Basic Combo Starters --------------

[State -1, Combo starter - Generic]
type = ChangeState
value = ifelse(p2dist x < 30, 440, 425)
TriggerAll = var(9)
TriggerAll = random < 500
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = p2dist x > 0
TriggerAll = p2dist x < 70
TriggerAll = p2StateNo = [5000,5015]
TriggerAll = StateNo = 52
TriggerAll = !AnimTime
Trigger1 = var(1) != 3
Trigger2 = var(15)
Trigger2 = var(9) > 2
Trigger3 = power >= 2000
Trigger3 = var(9) > 3

[State -1, Combo starter - near - 1]
type = ChangeState
value = 200
TriggerAll = var(9)
Triggerall = random < 200
TriggerAll = StateType != A
TriggerAll = p2bodydist x < 6
TriggerAll = p2StateType = S
TriggerAll = p2StateNo != [5120, 5210]
TriggerAll = p2dist x > 0
TriggerAll = ctrl || StateNo = 101
Trigger1 = p2MoveType = H
Trigger2 = Enemy, Moveguarded
Trigger3 = var(25)
Trigger4 = !Enemy, Ctrl
Trigger4 = p2MoveType != A
Trigger5 = StateNo = 101
trigger5 = time > 3

[State -1, Combo starter - near - 2]
type = ChangeState
value = ifelse(var(1) = 3, 400, 410)
TriggerAll = var(9)
Triggerall = random < 200
TriggerAll = StateType != A
TriggerAll = p2bodydist x < 6
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = p2StateNo != [5120, 5210]
TriggerAll = p2dist x > 0
TriggerAll = ctrl || StateNo = 101
Trigger1 = p2MoveType = H
Trigger2 = Enemy, Moveguarded
Trigger3 = var(25)
Trigger4 = !Enemy, Ctrl
Trigger4 = p2MoveType != A
Trigger5 = StateNo = 101
trigger5 = time > 3

[State -1, Combo starter - near - 3a]
type = ChangeState
value = ifelse(random < 500, 220, 240)
TriggerAll = var(9)
TriggerAll = var(1) != 3
Triggerall = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = p2StateNo != [5120, 5210]
TriggerAll = p2dist x > 0
TriggerAll = p2bodydist x < 20
TriggerAll = ctrl || (time > 10 && StateNo = [100, 102]) || (StateNo = [120,131])
Trigger1 = p2MoveType = H
Trigger2 = EnemyNear, Moveguarded
Trigger3 = var(25)
Trigger4 = !EnemyNear, Ctrl
Trigger4 = p2MoveType != A
Trigger5 = StateNo = 101
trigger5 = time > 3
Trigger6 = P2BodyDist x < 25
trigger6 = p2StateNo = 5120
Trigger6 = EnemyNear, AnimTime > -4

[State -1, Combo starter - near - 3b]
type = ChangeState
value = ifelse(random < 500, 510, 520)
TriggerAll = var(9)
TriggerAll = var(1) = 3
Triggerall = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = p2StateNo != [5120, 5210]
TriggerAll = p2dist x > 0
TriggerAll = p2bodydist x < 53
TriggerAll = ctrl || (time > 10 && StateNo = [100, 102]) || (StateNo = [120,131])
Trigger1 = p2MoveType = H
Trigger2 = EnemyNear, Moveguarded
Trigger3 = var(25)
Trigger4 = !EnemyNear, Ctrl
Trigger4 = p2MoveType != A
Trigger5 = StateNo = 101
trigger5 = time > 3
Trigger6 = P2BodyDist x < 25
trigger6 = p2StateNo = 5120
Trigger6 = EnemyNear, AnimTime > -4

[State -1, Combo starter - far]
type = ChangeState
value = 420
Trigger1 = var(9)
Trigger1 = var(1) != 3
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = p2bodydist x > 20
Trigger1 = p2dist x < 70
Trigger1 = p2StateNo != [5120, 5210]
Trigger1 = ctrl || (time > 10 && StateNo = [100, 102]) || (StateNo = [120,131])
Trigger1 = p2MoveType = H

[State -1, Combo starter - far]
type = ChangeState
value = 520
Trigger1 = var(9)
Trigger1 = var(1) = 3
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = p2bodydist x > 20
Trigger1 = p2dist x < 89
Trigger1 = p2StateNo != [5120, 5210]
Trigger1 = ctrl || (time > 10 && StateNo = [100, 102]) || (StateNo = [120,131])
Trigger1 = p2MoveType = H

[State -1, Combo starter - no-1]
type = ChangeState
value = 450
Trigger1 = var(9)
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = p2dist x < 105
Trigger1 = p2dist x >= 80
Trigger1 = p2StateNo != [5120, 5210]
Trigger1 = ctrl || (time > 10 && StateNo = [100, 102]) || (StateNo = [120,131])
Trigger1 = p2MoveType = H

[State -1, Combo starter - no-2]
type = ChangeState
value = 430
Trigger1 = var(9)
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = p2dist x < 110
Trigger1 = p2dist x >= 90
Trigger1 = p2StateNo != [5120, 5210]
Trigger1 = ctrl || (time > 10 && StateNo = [100, 102]) || (StateNo = [120,131])
Trigger1 = p2MoveType = H

[State -1, basic combo follow 1]
type = ChangeState
value = 400
TriggerAll = var(9)
Triggerall = random < 750
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = p2dist x = [0,75]
TriggerAll = Movecontact
Trigger1 = StateNo = 410
Trigger2 = StateNo = 400
Trigger2 = AnimElem = 3, > 2

[State -1, basic combo follow 2]
type = ChangeState
value = 200
TriggerAll = var(9)
TriggerAll = random < 750
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = StateNo = 200
TriggerAll = Movecontact
TriggerAll = AnimElem = 3, > 2
Trigger1 = p2dist x <= 40
Trigger2 = var(9) < 3
Trigger3 = var(1) = 3

;---------- Level 1 Only Combo Finishers ----------

[State -1, Generic finisher 1]
type = ChangeState
Value = 1200
TriggerAll = var(9)
TriggerAll = var(1)
TriggerAll = var(1) != 3
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
Trigger1 = var(9) < 4
Trigger1 = StateNo = [425,440]
Trigger1 = PrevStateNo = 52
Trigger2 = var(9) >= 4
Trigger2 = StateNo = 300
Trigger2 = PrevStateNo = [425,440]

[State -1, LV1 finisher 2a]
type = ChangeState
Value = ifelse(random < 333, 1600, ifelse(random < 666, 1220, 1000))
Trigger1 = var(9) = 1
Trigger1 = !var(1)
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = var(3)
Trigger1 = MoveContact

[State -1, LV1 finisher 2b]
type = ChangeState
Value = ifelse(random < 250, 1300, ifelse(random < 500, 1500, ifelse(random < 750, 1400, 1000)))
Trigger1 = var(9) = 1
Trigger1 = var(1) = 1
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = var(3)
Trigger1 = MoveContact

[State -1, LV1 finisher 2c]
type = ChangeState
Value = ifelse(random < 200, 1300, ifelse(random < 400, 1500, ifelse(random < 600, 1400,ifelse(random < 800, 1100, 1000))))
Trigger1 = var(9) = 1
Trigger1 = var(1) = 2
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = var(3)
Trigger1 = MoveContact

[State -1, LV1 finisher 2d]
type = ChangeState
Value = ifelse(random < 333, 1400, ifelse(random < 666, 1500+50*(p2dist x < 65), 1000))
Trigger1 = var(9) = 1
Trigger1 = var(1) = 4
Trigger1 = random < 500
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = var(3)
Trigger1 = MoveContact

[State -1, LV1 G.finisher 1]
type = ChangeState
Value = 1000
TriggerAll = var(9) = 1
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = Moveguarded
Trigger1 = stateno = [200,299]
Trigger2 = stateno = [400,499]


;------------ Advanced Combo Follow-ups ------------

[State -1, adv combo follow 1]
type = ChangeState
value = 210
TriggerAll = var(9) > 1
Triggerall = random < 750
triggerAll = statetype != A
triggerAll = p2statetype != A
TriggerAll = p2StateType != L
TriggerAll = MoveContact
TriggerAll = p2dist x >= 60
TriggerAll = AnimElem = 3, > 2
Trigger1 = StateNo = 200
Trigger2 = StateNo = 400

[State -1, adv combo follow 2]
type = ChangeState
value = 410
Trigger1 = var(9) > 2
Trigger1 = random < 750
Trigger1 = var(1) != 3
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = StateNo = 200
Trigger1 = PrevStateNo = 200
Trigger1 = Movecontact

[State -1, adv combo follow 2]
type = ChangeState
value = 400
Trigger1 = var(9) > 2
Trigger1 = random < 750
Trigger1 = var(1) != 3
Trigger1 = StateType != A
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = StateNo = 410
Trigger1 = MoveContact

[State -1, adv combo follow 3]
type = ChangeState
value = ifelse(p2bodydist x >= 20, 220, 240)
Trigger1 = var(9)
Trigger1 = var(1) != 3
Trigger1 = random < 500
Trigger1 = StateNo = 200
Trigger1 = anim = [205,206]
Trigger1 = !AnimTime
Trigger1 = p2StateType != A
Trigger1 = p2StateType != L
Trigger1 = p2MoveType = H

[State -1, adv combo follow 3]
type = ChangeState
value = 310
TriggerAll = var(9) > 1
TriggerAll = var(1) < 3
Triggerall = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
TriggerAll = var(3)
TriggerAll = MoveContact
Trigger1 = p2bodydist x < 10
Trigger1 = (StateNo = [220,240]) || (StateNo = [420,440])
Trigger2 = p2dist x = [40,66]
Trigger2 = StateNo = [400,410]
Trigger2 = !var(1)

[State -1, adv combo follow 3]
type = ChangeState
value = 300
TriggerAll = var(9) > 1
TriggerAll = var(1) = [1,2]
Triggerall = random < 500
TriggerAll = var(3)
TriggerAll = StateType != A
TriggerAll = MoveContact
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
Trigger1 = StateNo = [220,240]
Trigger2 = StateNo = [420,440]
Trigger3 = StateNo = 400
Trigger3 = p2dist x >= 59
Trigger3 = var(9) > 2

;------------ LV4 Finishers -------------

[State -1, LV 4 H-finisher 1]
type = ChangeState
Value = 4000
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = !var(1)
TriggerAll = Power >= ifelse(var(15), 2000,4000)
TriggerAll = life <= lifemax/4
TriggerAll = p2Life >= 250 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(18)
TriggerAll = p2dist x <= 65
TriggerAll = var(15) || var(9) < 5
TriggerAll = power <= ifelse(var(15),4000,5000) || var(9) < 5
Trigger1 = StateNo = 1000
Trigger1 = numtarget
Trigger1 = target, stateno = 1610
Trigger1 = projcontact(1000) = 1, = [6,12]
Trigger1 = var(9) < 5
Trigger2 = StateNo = 1220
Trigger2 = MoveHit

[State -1, LV 4 H-finisher 2]
type = ChangeState
Value = 4200
Trigger1 = var(9) > 3
Trigger1 = random < 750
Trigger1 = var(1) = 2
Trigger1 = Power >= ifelse(var(15), 2000,4000)
Trigger1 = life <= lifemax/4
Trigger1 = p2Life >= 250 || var(15)
Trigger1 = StateType != A
Trigger1 = p2StateType = A
Trigger1 = var(18)
Trigger1 = numtarget
Trigger1 = StateNo = 1450

[State -1, LV 4 H-finisher 3]
type = ChangeState
Value = 4300
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = Power >= ifelse(var(15), 2000,4000)
TriggerAll = life <= lifemax/4
TriggerAll = p2Life >= 250 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType = A
TriggerAll = var(18)
TriggerAll = var(15) || var(9) < 5
TriggerAll = var(15) < 300 || var(9) < 5
TriggerAll = power <= ifelse(var(15),4000,5000) || var(9) < 5
TriggerAll = numtarget
TriggerAll = target, backedgebodydist < 10
Trigger1 = StateNo = 1450
Trigger2 = StateNo = 1100
Trigger2 = AnimElem = 10, > 0
Trigger3 = StateNo = 1800
Trigger3 = AnimElem = 10, > 0

[State -1, LV 4 H-finisher 4]
type = ChangeState
Value = 4100
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 4
TriggerAll = Power >= ifelse(var(15), 2000,4000)
TriggerAll = life <= lifemax/4
TriggerAll = p2Life >= 250 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(18)
TriggerAll = StateNo = 1450
Trigger1 = !var(15)
Trigger1 = !(power >= 5000 && target, backedgebodydist < 10)
Trigger2 = var(15)
Trigger2 = !(power >= 4000 && target, backedgebodydist < 10)
Trigger3 = var(9) < 5

[State -1, LV 4 S-finisher 1]
type = ChangeState
Value = 4200
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = Power >= ifelse(var(15), 2000,4000)
TriggerAll = p2Life >= 200 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType = A
TriggerAll = var(18)
TriggerAll = var(15) || var(9) < 5
TriggerAll = var(15) < 300 || var(9) < 5
TriggerAll = !(power >= ifelse(var(15),4000,5000) && life < lifemax/4) || var(9) < 5
TriggerAll = numtarget
Trigger1 = StateNo = 1450
Trigger2 = StateNo = 1100
Trigger2 = AnimElem = 10, > 0
Trigger3 = StateNo = 1800
Trigger3 = AnimElem = 10, > 0

[State -1, LV 4 D-finisher 1]
type = ChangeState
Value = 3300
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) != [2,3]
TriggerAll = Power >= ifelse(var(15), 1000,2000)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(18)
TriggerAll = var(15) || var(9) < 5
Trigger1 = stateno = 1220
Trigger1 = movehit
Trigger2 = stateno = 1450
Trigger2 = target, backedgebodydist < 10
Trigger3 = var(1)
Trigger3 = StateNo = 1000
Trigger3 = projhit(1000) = 1, = [1,12]
Trigger4 = !var(1)
Trigger4 = StateNo = 1000
Trigger4 = projcontact(1000) = 1, = [6,12]
Trigger4 = numtarget
Trigger4 = target, stateno = 1610
Trigger4 = var(9) < 5

[State -1, LV 4 D-finisher 2a]
type = ChangeState
Value = 3000
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 1
TriggerAll = Power >= ifelse(var(15), 1000,2000)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = StateType != A
TriggerAll = var(18)
TriggerAll = var(15) || var(9) < 5
TriggerAll = !(power >= ifelse(var(15),4000,5000) && life < lifemax/4 && target, backedgebodydist < 10) || var(9) < 5
Trigger1 = stateno = 1450
Trigger2 = StateNo = 1000
Trigger2 = projhit(1000) = 1, = [6,12]

[State -1, LV 4 D-finisher 2b]
type = ChangeState
Value = 3000
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 2
TriggerAll = Power >= ifelse(var(15), 1000,2000)
TriggerAll = StateType != A
TriggerAll = var(18)
TriggerAll = stateno = 1450
Trigger1 = var(9) < 5
Trigger2 = var(15)
Trigger2 = p2Life >= 150
Trigger2 = !(power >= ifelse(var(15),4000,5000) && life < lifemax/4)

[State -1, LV 4 D-finisher 3]
type = ChangeState
Value = 3150
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = Power >= ifelse(var(15), 1000,2000)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(18)
TriggerAll = var(15) || var(9) < 5
TriggerAll = var(15) < 300 || var(9) < 5
TriggerAll = Movehit
Trigger1 = StateNo = 240
Trigger1 = p2bodydist x < 10
Trigger2 = StateNo = 440
Trigger2 = p2bodydist x < 10
Trigger3 = StateNo = 220
Trigger3 = p2bodydist x < 20
Trigger4 = StateNo = 420
Trigger4 = p2bodydist x < 20
Trigger5 = StateNo = 200
Trigger5 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger5 = p2bodydist x < 30
Trigger6 = StateNo = [400,410]
Trigger6 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger6 = p2bodydist x < 30
Trigger7 = StateNo = 1100
Trigger7 = AnimElem = 10, > 0
Trigger8 = StateNo = 1800
Trigger8 = AnimElem = 10, > 0

[State -1, LV 4 D-finisher 4]
type = ChangeState
Value = 3220
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = Power >= ifelse(var(15), 1000,2000)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(18)
TriggerAll = !var(19)
TriggerAll = var(15) || var(9) < 5
TriggerAll = var(15) < 300 || var(9) < 5
TriggerAll = Movehit
TriggerAll = p2dist x < 60
Trigger1 = p2bodydist x < 20
Trigger1 = StateNo = 240
Trigger2 = p2bodydist x < 20
Trigger2 = StateNo = 440
Trigger3 = StateNo = 220
Trigger3 = p2bodydist x < 30
Trigger4 = StateNo = 420
Trigger4 = p2bodydist x < 30
Trigger5 = StateNo = 200
Trigger5 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger5 = p2bodydist x < 40
Trigger6 = StateNo = [400,410]
Trigger6 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger6 = p2bodydist x < 40
Trigger7 = StateNo = 1100
Trigger7 = AnimElem = 10, > 0
Trigger8 = StateNo = 1800
Trigger8 = AnimElem = 10, > 0

;------------ Hyper Finishers -------------

[State -1, LV3 finisher 2]
type = ChangeState
Value = 3300
TriggerAll = var(9) > 2
TriggerAll = var(1) != [2,3]
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 100 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = var(15) || power < 2000 || var(9) < 5
TriggerAll = power < 1000+1000*(!var(15)) || var(9) < 4
Trigger1 = Random < 200
Trigger2 = StateNo = [300,310]
Trigger3 = var(1) != 1
Trigger3 = p2bodydist x > 10 || var(1) = 4
Trigger3 = StateNo = [220,240]
Trigger4 = var(1) != 1
Trigger4 = p2bodydist x > 10 || var(1) = 4
Trigger4 = StateNo = [420,440]

[State -1, LV3 finisher 2]
type = ChangeState
Value = 3000
TriggerAll = var(9) > 2
TriggerAll = var(1) = 1
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 100 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = var(15) || power < 2000 || var(9) < 5
TriggerAll = power < 1000+1000*(!var(15)) || var(9) < 4
Trigger1 = StateNo = [300,310]

[State -1, LV3 finisher 2]
type = ChangeState
Value = 3100
TriggerAll = var(9) > 2
TriggerAll = var(1) = 2
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 100 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = var(15) || power < 2000 || var(9) < 5
TriggerAll = power < 1000+1000*(!var(15)) || var(9) < 4
Trigger1 = StateNo = 240
Trigger1 = p2bodydist x < 10
Trigger2 = StateNo = 440
Trigger2 = p2bodydist x < 10
Trigger3 = StateNo = 730
Trigger3 = p2bodydist x < 10
Trigger4 = StateNo = 220
Trigger4 = p2bodydist x < 20
Trigger5 = StateNo = 420
Trigger5 = p2bodydist x < 20
Trigger6 = StateNo = 200
Trigger6 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger6 = p2bodydist x < 30
Trigger7 = StateNo = [400,410]
Trigger7 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger7 = p2bodydist x < 30

[State -1, LV3 finisher 3]
type = ChangeState
Value = 3200
TriggerAll = var(9) > 2
TriggerAll = var(1) < 2
TriggerAll = random < 50
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 100 || var(15)
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = !var(19)
TriggerAll = p2dist x < 60
TriggerAll = var(15) || power < 2000 || var(9) < 5
TriggerAll = power < 1000+1000*(!var(15)) || var(9) < 4
Trigger1 = StateNo = 240
Trigger1 = p2bodydist x < 10 || !var(1)
Trigger2 = StateNo = 440
Trigger2 = p2bodydist x < 10 || !var(1)
Trigger3 = StateNo = 730
Trigger3 = p2bodydist x < 10 || !var(1)
Trigger4 = StateNo = 220
Trigger4 = p2bodydist x < 20 || !var(1)
Trigger5 = StateNo = 420
Trigger5 = p2bodydist x < 20 || !var(1)
Trigger6 = StateNo = 200
Trigger6 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger6 = p2bodydist x < 30 || !var(1)
Trigger7 = StateNo = [400,410]
Trigger7 = PrevStateNo = 200 || PrevStateNo = [400,410]
Trigger7 = p2bodydist x < 30 || !var(1)


;-------- LV 2~4 Special Finishers ---------

[State -1, LV2~4 finisher 1a]
type = ChangeState
Value = Ifelse(random < 333, 1300, Ifelse(random < 666, 1600, 1000))
TriggerAll = var(9) = [2,4]
TriggerAll = !var(1)
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = p2bodydist x > 10
Trigger1 = StateNo = 240
Trigger2 = StateNo = 440
Trigger3 = StateNo = 730

[State -1, LV2~4 finisher 1b]
type = ChangeState
Value = Ifelse(random < 500, 1000, 1220)
TriggerAll = var(9) = [2,4]
TriggerAll = !var(1)
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveContact
Trigger1 = StateNo = 310
Trigger2 = p2bodydist x > 10
Trigger2 = StateNo = [220,240]
Trigger3 = p2bodydist x > 10
Trigger3 = StateNo = [420,440]
Trigger4 = StateNo = 730


[State -1, LV2~4 finisher 2]
type = ChangeState
Value = Ifelse(random < 500, 1300, 1400)
TriggerAll = var(9) = [2,4]
TriggerAll = var(1) = 1
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = p2bodydist x < 20
Trigger1 = StateNo = [220,240]
Trigger1 = random < 100
Trigger2 = StateNo = 730
Trigger3 = StateNo = 420
Trigger3 = random < 100

[State -1, LV2~4 finisher 3]
type = ChangeState
Value = Ifelse(random < 333, 1300, Ifelse(random < 666, 1400, 1100))
TriggerAll = var(9) = [2,4]
TriggerAll = var(1) = 2
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = p2bodydist x < 20
Trigger1 = StateNo = [220,240]
Trigger1 = random < 100
Trigger2 = StateNo = 730
Trigger3 = StateNo = 420
Trigger3 = random < 100

[State -1, LV2~4 finisher 4]
type = ChangeState
Value = Ifelse(random < 333, 1400, Ifelse(random < 666, 1500, 1000))
TriggerAll = var(9) = [2,4]
TriggerAll = var(1) = 4
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
Trigger1 = StateNo = [220,240]
Trigger2 = StateNo = 420



;-------- LV 5 Special Finishers ---------

[State -1, LV5 finisher 1A]
type = ChangeState
Value = 1220
TriggerAll = var(9) = 5
TriggerAll = !var(1)
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
Trigger1 = StateNo = 310
Trigger2 = p2bodydist x > 10
Trigger2 = StateNo = [220,240]
Trigger3 = p2bodydist x > 10
Trigger3 = StateNo = [420,440]
Trigger4 = StateNo = 730

[State -1, LV5 finisher 1B]
type = ChangeState
Value = 1000
TriggerAll = var(9) = 5
TriggerAll = !var(1)
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveGuarded
Trigger1 = StateNo = 310
Trigger2 = p2bodydist x > 10
Trigger2 = StateNo = [220,240]
Trigger3 = p2bodydist x > 10
Trigger3 = StateNo = [420,440]
Trigger4 = StateNo = 730

[State -1, LV5 finisher 2]
type = ChangeState
Value = 1400
TriggerAll = var(9) = 5
TriggerAll = var(1) = 2
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
TriggerAll = p2bodydist x < 20
Trigger1 = StateNo = [220,240]
Trigger1 = random < 100
Trigger2 = StateNo = 730
Trigger3 = StateNo = 420
Trigger3 = random < 100

[State -1, LV5 finisher 3]
type = ChangeState
Value = 1400
TriggerAll = var(9) = 5
TriggerAll = var(1) = 4
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveHit
Trigger1 = StateNo = [220,240]
Trigger2 = StateNo = 420

[State -1, Guard finisher]
type = ChangeState
Value = 1000
TriggerAll = var(9) > 1
TriggerAll = var(1) != 3
TriggerAll = random < 500
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = var(3)
TriggerAll = MoveContact
Trigger1 = StateNo = [300,310]
Trigger2 = StateNo = [220,240]
Trigger2 = var(1) = 4
Trigger3 = StateNo = [420,450]
Trigger3 = var(1) = 4


;---------------- Jugglers -----------------

[State -1, Suburu Ou Shikoken AI Juggle - 1]
type = ChangeState
Value = 161
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = life < lifemax/4
TriggerAll = var(1) = 1
TriggerAll = StateType != A
TriggerAll = Power >= ifelse(var(15), 1000,3000)
TriggerAll = p2Life >= 250 || var(15)
TriggerAll = numtarget
TriggerAll = !AnimTime
Trigger1 = StateNo = 3010
Trigger1 = target, StateNo != [120,154]
Trigger1 = target, StateType = A
Trigger1 = target, pos y < -40
Trigger2 = StateNo = 3360

[State -1, Suburu Ou Shikoken AI Juggle - 2]
type = ChangeState
Value = 4200
TriggerAll = var(1) = 1
TriggerAll = StateType != A
TriggerAll = Power >= ifelse(var(15), 1000,3000)
TriggerAll = life < lifemax/4
TriggerAll = p2Life >= 250 || var(15)
Trigger1 = StateNo = 161
Trigger2 = var(9) > 3
Trigger2 = var(3)
Trigger2 = random < 750
Trigger2 = StateNo = 260
Trigger2 = MoveHit

[State -1, Haoh Shikoken AI Juggle]
type = ChangeState
Value = 3000
TriggerAll = var(9) > 2
TriggerAll = random < 750
TriggerAll = var(1) = 1
TriggerAll = StateType != A
TriggerAll = !NumProj
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = StateNo = 160
TriggerAll = NumTarget(1210)
TriggerAll = frontedgedist > 30
Trigger1 = Power < ifelse(var(15), 0, 1000)
Trigger2 = var(9) < 4

[State -1, Ryuko Rambu AI Juggle]
type = ChangeState
Value = 3300
TriggerAll = var(9) > 2
TriggerAll = random < 750
TriggerAll = var(1) != [2,3]
TriggerAll = !NumTarget(1210)
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = numtarget
TriggerAll = target,StateNo = [6000,6005]
TriggerAll = target, vel y > -2
TriggerAll = p2bodydist x = [5, 100]
TriggerAll = EnemyNear, vel y = [-1,2]
TriggerAll = EnemyNear, pos y = [-140,-90]
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = stateno = 103

[State -1, Ryuko Rambu AI Juggle2]
type = ChangeState
Value = 3300
TriggerAll = var(9) > 2
TriggerAll = random < 750
TriggerAll = var(1) != [2,3]
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = numtarget
TriggerAll = target,stateno = [6400,6402]
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = stateno = 103


[State -1, Kyokugen Kohou AI Juggle]
type = ChangeState
Value = 3100
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 2
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = Enemy, vel y > 0
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = p2StateType = A
TriggerAll = p2MoveType = H
TriggerAll = p2StateNo = [6000,6005]
TriggerAll = Enemy, vel y >= -2
TriggerAll = p2dist x < 50+9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || frontedgedist < 40
TriggerAll = p2dist x > 9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y > -70-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*9))
TriggerAll = p2dist y < -60-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*9))
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = stateno = 103

[State -1, Kyokugen Kohou AI Juggle]
type = ChangeState
Value = 3150
TriggerAll = var(9) > 3
TriggerAll = random < 750
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = StateType != A
TriggerAll = Power >= 1000 || var(15)
TriggerAll = Enemy, vel y > 0
TriggerAll = p2Life >= 150 || var(15)
TriggerAll = p2StateType = A
TriggerAll = p2MoveType = H
TriggerAll = p2StateNo = [6000,6005]
TriggerAll = Enemy, vel y >= -2
TriggerAll = p2dist x < 50+9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || frontedgedist < 40
TriggerAll = p2dist x > 9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y > -70-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*9))
TriggerAll = p2dist y < -60-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*9))
TriggerAll = ctrl || stateno = 100 || stateno = 103
Trigger1 = Power < ifelse(var(15), 0, 1000)
Trigger1 = var(15) < 300
Trigger2 = var(9) < 5

[State -1, Zanretsuken AI]
type = ChangeState
value = 1400
Trigger1 = var(9) > 1
Trigger1 = random < 500
Trigger1 = var(1)
Trigger1 = StateNo = 160
Trigger1 = NumTarget(1210)

[State -1, Kohou AI Juggle]
type = ChangeState
Value = 1100
TriggerAll = var(9)
TriggerAll = var(1) = 2
Triggerall = random < 750
TriggerAll = statetype != A
TriggerAll = p2dist x < 80+5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -45-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*5))
TriggerAll = p2dist y > -90-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*5))
TriggerAll = p2statetype = A
TriggerAll = EnemyNear, vel y > -9
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2StateNo != [2000,4999]
TriggerAll = p2Movetype = H
TriggerAll = p2StateNo = [6000,6005]
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = stateno = 103

[State -1, Kyokugen Kohou AI Juggle]
type = ChangeState
Value = ifelse(random < 500, 1800, 1100)
TriggerAll = var(9)
TriggerAll = var(1) = 3
Triggerall = random < 750
TriggerAll = statetype != A
TriggerAll = p2StateType = A
TriggerAll = p2MoveType = H
TriggerAll = p2StateNo = [6000, 6005]
TriggerAll = EnemyNear, vel y >= -2
TriggerAll = p2dist x < 70+14*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || frontedgedist < 40
TriggerAll = p2dist x > 10+14*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y > -125-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*14))
TriggerAll = p2dist y < -95-((EnemyNear, vel y)+(enemyNear, gethitvar(yaccel)*14))
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = stateno = 103










[State -1 AIcharge]
type = ChangeState
value = 770
Triggerall = random < 100+200*(var(53) = 2)
Trigger1 = var(9)
trigger1 = power < const(data.power)
trigger1 = p2bodydist x > 90
trigger1 = Enemy, gethitvar(fall) = 1 || p2StateNo = [5050, 5110]
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = !var(15) || numpartner

;----------- offensive code
[State -1]
type = ChangeState
value = 100
TriggerAll = var(9)
TriggerAll = random < ifelse(var(9) < 3, 100,200)+300*(!var(53))
triggerall = ctrl
triggerall = var(53) != 1
TriggerAll = statetype != A
TriggerAll = p2statetype != L
TriggerAll = p2stateNo != [5120,5205]
trigger1 = p2movetype != A
trigger1 = P2bodydist X >= 150
trigger2 = P2bodydist X >= 60
trigger2 = p2movetype = H || (var(25) && p2StateType != A)

;-----------defensive code

[State -1, Run back AI]
type = ChangeState
value = 105
TriggerAll = var(9)
TriggerAll = random < ifelse(var(9) < 3, 200,400)+300*(var(53) = 1)
triggerAll = statetype != A
TriggerAll = ctrl
TriggerAll = p2bodydist x <= 50
TriggerAll = backedgebodydist > 50
trigger1 = p2stateno = [5120,5202]
trigger2 = p2stateno = [153,155]
trigger3 = p2MoveType = H
Trigger3 = p2StateNo = [1350,1360]
trigger4 = p2MoveType = H
Trigger4 = p2StateNo = [6010,6019]
trigger5 = p2MoveType = H
Trigger5 = p2StateNo = 6700

[State -1, Guard]
type = ChangeState
value = 120
triggerall = var(9)
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(15-var(9))
triggerall = ctrl
TriggerAll = stateno != [120,140]
trigger1 = inguarddist
trigger1 = enemynear, MoveGuarded = 0

[State -1,recover1]
type = ChangeState
value = 5201
triggerall = var(9)
triggerall = canrecover
triggerall = movetype = H
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
TriggerAll = random < ifelse(var(9) < 3, 200,400)
triggerall = stateno = [5050,5100]
trigger1 = var(53) = 1
trigger2 = p2bodydist x < 60
trigger3 = var(50)

[State -1,recover2]
type = ChangeState
value = 5202
trigger1 = var(9)
trigger1 = !var(50)
trigger1 = var(53) != 1
trigger1 = canrecover
trigger1 = movetype = H
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -20
trigger1 = alive
Trigger1 = random < ifelse(var(9) < 3, 200,400)
trigger1 = stateno = [5050,5100]
trigger1 = p2bodydist x > 60

[State -1, GC Dash AI]
type = ChangeState
value = 101
TriggerAll = var(9) > 3
TriggerAll = Power >= 1500
TriggerAll = !var(53)
TriggerAll = Random < (power/10)
TriggerAll = p2bodydist x < 65
TriggerAll = p2statetype != A
TriggerAll = EnemyNear, AnimTime < -10
Trigger1 = StateNo = 150
Trigger2 = StateNo = 152

[State -1, Knockdown AI]
type = ChangeState
Value = 260
Trigger1 = var(9)
Trigger1 = random < 150
Trigger1 = Life < p2life || life < 300
Trigger1 = Power >= 1000
Trigger1 = StateNo = 150 || StateNo = 152
trigger1 = p2dist x = [10,60]
trigger1 = p2dist y > -120

[State -1 AIcharge]
type = ChangeState
value = 770
Triggerall = random < 100+200*(var(53) = 2)
Trigger1 = var(9)
trigger1 = power < const(data.power)
trigger1 = p2bodydist x > 90
trigger1 = Enemy, gethitvar(fall) = 1 || p2StateNo = [5050, 5110]
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = !var(15) || numpartner

[State -1, Dodge Attack]
Type = ChangeState
Value = 730
Trigger1 = var(9)
Trigger1 = StateNo = 720
Trigger1 = Time >= 15
Trigger1 = Time < 29
Trigger1 = random < 200
Trigger1 = p2bodydist x = [0,58]
Trigger1 = EnemyNear, Ctrl = 0
Trigger1 = EnemyNear, AnimTime = [-19,-14]

;--------- Anti-aerials

[State -1, Anti-Aerial 1a]
type = ChangeState
Value = 440
TriggerAll = var(9)
TriggerAll = var(1) != 4
Triggerall = random < 125
TriggerAll = statetype != A
TriggerAll = ctrl || stateno = [100,101]
Trigger1 = p2Movetype != H
Trigger1 = p2StateNo != [2000,4999]
Trigger1 = p2dist x < 50+9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || frontEdgeDist < 60
Trigger1 = p2dist x > 9*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || backEdgeDist < 5
Trigger1 = p2dist y < -45-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*9))
Trigger1 = p2dist y > -80-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*9))
Trigger1 = p2statetype = A

[State -1, Anti-Aerial 1b]
type = ChangeState
Value = 440
TriggerAll = var(9)
TriggerAll = var(1) = 4
Triggerall = random < 125
TriggerAll = statetype != A
TriggerAll = ctrl || stateno = [100,101]
Trigger1 = p2Movetype != H
Trigger1 = p2StateNo != [2000,4999]
Trigger1 = p2dist x < 50+6*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || frontEdgeDist < 60
Trigger1 = p2dist x > 6*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || backEdgeDist < 5
Trigger1 = p2dist y < -45-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*6))
Trigger1 = p2dist y > -80-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*6))
Trigger1 = p2statetype = A

[State -1, anti-aerial 2]
type = ChangeState
Value = 230
TriggerAll = var(9)
TriggerAll = var(1) != 3
Triggerall = random < 125
TriggerAll = statetype != A
TriggerAll = EnemyNear, vel y > -3
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2dist x < 85+8*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 65+8*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -65-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*8))
TriggerAll = p2dist y > -75-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*8))
TriggerAll = p2statetype = A
TriggerAll = p2Movetype != H
Trigger1 = ctrl
Trigger2 = stateno = [100,101]

[State -1, anti-aerial 3]
type = ChangeState
Value = 250
TriggerAll = var(9)
TriggerAll = var(1) = 3
Triggerall = random < 125
TriggerAll = statetype != A
TriggerAll = EnemyNear, vel y > 0
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2dist x < 63+16*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 16*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -80-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*16))
TriggerAll = p2dist y > -110-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*16))
TriggerAll = p2statetype = A
TriggerAll = p2Movetype != H
TriggerAll = p2MoveType != A || var(30)
Trigger1 = ctrl
Trigger2 = stateno = [100,101]

[State -1, anti-aerial 4]
type = ChangeState
Value = 210
TriggerAll = var(9)
Triggerall = random < 125
TriggerAll = statetype != A
TriggerAll = EnemyNear, vel y > 0
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2dist x < 84+5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1)) || frontEdgeDist < 90
TriggerAll = p2dist x > 30+5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -41-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*5))
TriggerAll = p2dist y > -80-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*5))
TriggerAll = p2bodydist x > 20
TriggerAll = p2statetype = A
TriggerAll = p2Movetype != H
TriggerAll = p2MoveType != A || var(30)
Trigger1 = ctrl
Trigger2 = stateno = [100,101]

[State -1, anti-aerial 5]
type = ChangeState
Value = 450
TriggerAll = var(9)
Triggerall = random < 125
TriggerAll = statetype != A
TriggerAll = p2dist x < 100+8*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 90+8*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -30-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*8))
TriggerAll = p2dist y > -40-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*8))
TriggerAll = p2statetype = A
TriggerAll = p2Movetype != H
TriggerAll = EnemyNear, vel y > 0
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2StateNo != [2000,4999]
Trigger1 = ctrl
Trigger2 = stateno = [100,101]

[State -1, anti-aerial 6a]
type = ChangeState
Value = 1100
TriggerAll = var(9)
TriggerAll = random < 120
TriggerAll = var(1) = 2
TriggerAll = statetype != A
TriggerAll = p2dist x < 80+5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 5*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y < -45-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*5))
TriggerAll = p2dist y > -90-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*5))
TriggerAll = p2statetype = A
TriggerAll = EnemyNear, vel y > -9
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2StateNo != [2000,4999]
TriggerAll = p2Movetype != H
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]

[State -1, anti-aerial 6b]
type = ChangeState
Value = ifelse(random < 500, 1800, 1100)
TriggerAll = var(9)
TriggerAll = random < 125
TriggerAll = var(1) = 3
TriggerAll = statetype != A
TriggerAll = p2dist x < 60+14*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist x > 14*((enemyNear, vel x)*ifelse(enemynear, p2dist x < 0, -1, 1))
TriggerAll = p2dist y > -95-((EnemyNear, vel y)+(enemyNear, const(movement.yaccel)*14))
TriggerAll = p2statetype = A
TriggerAll = EnemyNear, vel y > -3
TriggerAll = EnemyNear, pos y < 0
TriggerAll = p2StateNo != [2000,4999]
TriggerAll = ctrl ||(stateno = [120,141]) || (time > 8 && stateno = [100,102])
TriggerAll = p2Movetype != H
Trigger1 = ctrl
Trigger2 = stateno = 100
Trigger3 = StateNo = 103
Trigger4 = stateno = [120,131]
;----------- aerials
[State -1, Jump weak kick AI]
type = ChangeState
value = 610
triggerAll = var(9)
Trigger1 = random < 500
TriggerAll = statetype = A
TriggerAll = ctrl
Trigger1 = p2bodydist x < 60
trigger1 = vel y > 0 && pos y > -40
Trigger1 = p2statetype = C

[State -1, jump medium punch AI]
type = ChangeState
value = 620
Trigger1 = var(9)
Trigger1 = random < 500
Trigger1 = p2movetype != H
Trigger1 = p2statetype = A
Trigger1 = statetype = A
Trigger1 = ctrl
Trigger1 = p2dist x < 75+7*vel x
Trigger1 = p2dist x > 0
Trigger1 = p2bodydist y = [-40,-20]

[State -1, Jump Medium kick AI]
type = ChangeState
value = ifelse(var(1) = 3, 610,630)
triggerAll = var(9)
TriggerAll = random < 500
TriggerAll = statetype = A
TriggerAll = ctrl
TriggerAll = p2bodydist x < 100
triggerAll = vel y > ifelse(var(4), 0, 3.5)
Trigger1 = p2statetype = C
Trigger2 = p2statetype = S
Trigger2 = !var(24)
Trigger3 = p2movetype != H
Trigger3 = p2statetype = A
Trigger3 = p2dist x < 70+6*vel x
Trigger3 = p2dist x > 0
Trigger3 = p2bodydist y = [20,50]
Trigger3 = p2dist x > 60+6*vel x || p2MoveType != A

[State -1, Jump Medium kick SKarate]
type = ChangeState
value = 630
TriggerAll = var(9)
TriggerAll = random < 500
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = statetype = A
TriggerAll = ctrl
Trigger1 = p2dist x = [-70,0]
trigger1 = vel y > 0 && pos y > -65
Trigger2 = vel x <= 0
trigger2 = vel y = [-1,0]
trigger2 = backedgedist < 35

[State -1, Jump Strong punch AI]
type = ChangeState
value = 640
Trigger1 = var(9)
Trigger1 = random < 500
Trigger1 = statetype = A
Trigger1 = ctrl
Trigger1 = p2bodydist x < 75
trigger1 = vel y > 0 && pos y > -65
Trigger1 = p2statetype != A

[State -1, Jump Strong kick AI]
type = ChangeState
value = 650
triggerAll = var(9)
TriggerAll = statetype = A
TriggerAll = ctrl
TriggerAll = p2dist x > -2
TriggerAll = random < 500
Trigger1 = p2dist x < 80+8*vel x
trigger1 = vel y > 0 && pos y > -75+10*(var(1) = 4)
Trigger1 = p2statetype != A
Trigger2 = p2movetype != H
Trigger2 = p2statetype = A
Trigger2 = p2dist x < 80+8*vel x
Trigger2 = p2dist x > 0
Trigger2 = p2bodydist y = [-10,10]
Trigger2 = p2dist x > 30+8*vel x || p2MoveType != A
Trigger3 = p2dist x < (80+8*vel x)
trigger3 = vel y > 0 && pos y > -95
Trigger3 = var(1) = 3
Trigger3 = Ctrl
trigger3 = vel x = Const(Velocity.jump.Fwd.x)+3

[State -1, jump knockdown AI]
type = ChangeState
value = 660
Trigger1 = var(9)
Trigger1 = random < 500
Trigger1 = p2movetype != H
Trigger1 = p2statetype = A
Trigger1 = statetype = A
Trigger1 = ctrl
Trigger1 = p2dist x < 75+11*vel x
Trigger1 = p2dist x > 0
Trigger1 = p2bodydist y = [-30,-10]
Trigger1 = p2dist x > 60+11*vel x || p2MoveType != A

;--------------------------------------------------
;------------------ Poking system -----------------
;--------------------------------------------------

[State -1, poking All 1]
type = ChangeState
value = ifelse(random > 500, 200, 400)
Trigger1 = var(9)
Trigger1 = random < 250
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [0,40]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking All 1]
type = ChangeState
value = ifelse(random > 500, 220, 420)
Trigger1 = var(9)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [40,50]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking All 2]
type = ChangeState
value = ifelse(random > 500, 230, 420)
Trigger1 = var(9)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [75,90]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking All 3]
type = ChangeState
value = ifelse(random > 500, 200, 420)
Trigger1 = var(9)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [65,75]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking All 4]
type = ChangeState
value = ifelse(random > 500, 240, 450)
Trigger1 = var(9)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [75,95]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking All 5]
type = ChangeState
value = ifelse(random > 500, 250, 430)
Trigger1 = var(9)
Trigger1 = var(1) < 3
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [105,115]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking All 6]
type = ChangeState
value = ifelse(random > 500, 1000, 45)
Trigger1 = var(9)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [120,140]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking 02 - 1]
type = ChangeState
value = ifelse(random > 500, 1600, 430)
Trigger1 = var(9)
Trigger1 = !var(1)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [85,110]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking 02 - 2]
type = ChangeState
value = ifelse(random > 500, 1000, 1220)
Trigger1 = var(9)
Trigger1 = !var(1)
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [110,140]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking SKarate - 1]
type = ChangeState
value = ifelse(random > 500, 520, 450)
Trigger1 = var(9)
Trigger1 = var(1) = 3
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [85,95]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking SKarate - 2]
type = ChangeState
value = ifelse(random > 500, 430, 1000)
Trigger1 = var(9)
Trigger1 = var(1) = 3
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [95,110]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

[State -1, poking SKarate - 3]
type = ChangeState
value = ifelse(random > 500, 330, 340)
Trigger1 = var(9)
Trigger1 = var(1) = 3
Trigger1 = random < 125
trigger1 = statetype != A
trigger1 = p2statetype != A
trigger1 = p2statetype != L
Trigger1 = p2dist x = [65,75]
Trigger1 = p2stateno != [1100,4999]
Trigger1 = ctrl

;--------------------------------------------------
;------------ Tricks, wakeups, cheats -------------
;--------------------------------------------------

[State -1, Kawara Wari AI]
type = ChangeState
value = ifelse(p2statetype = C, 310, 450)
TriggerAll = var(9)
TriggerAll = var(1) != [3,4]
TriggerAll = random < ((lifemax-life)/(lifemax/const(data.life)))/(8-var(9))
TriggerAll = StateType != A
TriggerAll = p2StateType != A
TriggerAll = p2StateType != L
triggerAll = p2bodydist x = [35,70]
TriggerAll = p2movetype != A
TriggerAll = p2movetype != H
Trigger1 = var(52) > 40
Trigger1 = ctrl
Trigger2 = stateno = 52
Trigger2 = p2StateNo = [130,153]
Trigger2 = NumTarget
Trigger2 = Random < 250

[State -1, wakeup S punch]
type = ChangeState
value = 240
TriggerAll = var(9) > 2
TriggerAll = random < 250
TriggerAll = p2dist x > 3
TriggerAll = StateType != A
TriggerAll = P2BodyDist x < 25
TriggerAll = ctrl ||  StateNo = 100
trigger1 = p2StateNo = 5120
Trigger1 = EnemyNear, AnimTime > -4
Trigger2 = numtarget
Trigger2 = target,Stateno = 6014

[State -1, wakeup CD]
type = ChangeState
value = 260
TriggerAll = var(9)
TriggerAll = var(1) < 2
TriggerAll = random < 250
triggerAll = statetype != A
triggerAll = p2statetype != A
TriggerAll = p2dist x = [100,110]
TriggerAll = ctrl ||  StateNo = 100 || StateNo = [120,131]
trigger1 = p2StateNo = 5120
Trigger1 = EnemyNear, AnimTime > -11

[State -1, all kick trick]
type = ChangeState
value = 250
Trigger1 = var(9)
Trigger1 = random < 250
Trigger1 = StateType != A
trigger1 = p2bodydist x = [5,30]
Trigger1 = ctrl || stateno = 100 || StateNo = [120,131]
Trigger1 = p2StateNo = 40
trigger1 = EnemyNear, AnimTime >= -4

[State -1, wakeup zanretsuken]
type = ChangeState
value = 1400
Trigger1 = var(1)
Trigger1 = var(9)
Trigger1 = random < 250
trigger1 = statetype != A
trigger1 = p2statetype != A
Trigger1 = p2dist x = [70,90]
Trigger1 = EnemyNear, AnimTime > -14
trigger1 = p2StateNo = 5120
Trigger1 = ctrl

[State -1, Poke follow-up 1]
type = ChangeState
value = ifelse(random < 333, 41, ifelse(random < 666, 42, 43))
TriggerAll = var(9) = [1,3]
TriggerAll = random < ifelse(var(9) < 3, 150,300)
TriggerAll = !AnimTime
Trigger1 = stateNo = 210
Trigger2 = stateNo = 310
Trigger3 = stateNo = 430
Trigger4 = stateNo = 106
Trigger5 = stateNo = 240
Trigger5 = anim = 240
Trigger6 = stateNo = 250

[State -1, Poke follow-up 2]
type = ChangeState
value = ifelse(random < 333, 710, ifelse(random < 666, 700+10*(!MoveContact && stateno != 106),105))
TriggerAll = var(9) = [1,3]
TriggerAll = random < ifelse(var(9) < 3, 150,300)
TriggerAll = !AnimTime
Trigger1 = stateNo = 210
Trigger2 = stateNo = 310
Trigger3 = stateNo = 430
Trigger4 = stateNo = 106
Trigger5 = stateNo = 240
Trigger5 = anim = 240
Trigger6 = stateNo = 250

[State -1, Poke follow-up 3]
type = ChangeState
value = ifelse(random < 500 && var(1) != 3, 1000, 44)
TriggerAll = var(9) = [1,3]
TriggerAll = random < ifelse(var(9) < 3, 150,300)
TriggerAll = !AnimTime
Trigger1 = stateNo = 210
Trigger2 = stateNo = 310
Trigger3 = stateNo = 430
Trigger4 = stateNo = 106
Trigger5 = stateNo = 240
Trigger5 = anim = 240
Trigger6 = stateNo = 250

[State -1, Poke follow-up 4]
type = ChangeState
value = 44
TriggerAll = var(1) = 3
TriggerAll = var(9) = [1,3]
TriggerAll = random < ifelse(var(9) < 3, 200,400)
TriggerAll = !AnimTime
Trigger1 = stateNo = 210
Trigger2 = stateNo = 310
Trigger3 = stateNo = 430
Trigger4 = stateNo = 106
Trigger5 = stateNo = 240
Trigger5 = anim = 240
Trigger6 = stateNo = 250
Trigger7 = StateNo = 1000
Trigger7 = var(2)
Trigger7 = p2StateType != A

[State -1, Jump trick attack 1]
type = ChangeState
value = ifelse(p2StateType = A, 660,630-20*(var(1) = 3))
trigger1 = var(9)
trigger1 = p2dist x = [0,70]
Trigger1 = statetype = A
Trigger1 = ctrl
trigger1 = pos y = [-30,-15]
Trigger1 = prevstateno = [42,43]
Trigger1 = vel y < 0
trigger1 = p2bodydist x > 30

[State -1, Jump trick attack 2]
type = ChangeState
value = ifelse(p2StateType = A, 660, 630-20*(var(1) = 3))
trigger1 = var(9)
trigger1 = p2dist x = [0,70]
Trigger1 = statetype = A
Trigger1 = ctrl
trigger1 = pos y = [-40,-20]
Trigger1 = prevstateno = [43,44]
Trigger1 = vel y < 0

[State -1, Jump trick attack 3]
type = ChangeState
value = ifelse(p2StateType = C, 610, 650)
trigger1 = var(9)
Trigger1 = statetype = A
Trigger1 = ctrl
trigger1 = pos y = [-70,-50]
trigger1 = p2dist x = [0,70]
Trigger1 = prevstateno = [43,44]
Trigger1 = vel y < 0

[State -1, Jump trick 2]
type = ChangeState
value = ifelse(p2bodydist x < 20, 44,43)
trigger1 = var(9) = [1,3]
Trigger1 = random < 400
Trigger1 = p2bodydist x =[0,60]
Trigger1 = StateNo = 52
Trigger1 = !AnimTime
trigger1 = p2MoveType != H

[State -1, Jump trick 2]
type = ChangeState
value = 42
triggerAll = var(9)
TriggerAll = random < 500
TriggerAll = StateNo = 160
TriggerAll = NumTarget(1210)
trigger1 = var(9) = [1,3]
trigger2 = var(1) = 1
trigger3 = var(1) = 4

[State -1, Jump trick attack 2]
type = ChangeState
value = 660
Trigger1 = statetype = A
Trigger1 = ctrl
Trigger1 = NumTarget(1210)
Trigger1 = prevStateNo = 42
trigger1 = pos y = [-50,-30]
Trigger1 = vel y < 0

;--------------------------------------------------
;---------------- Personality chips ---------------
;--------------------------------------------------

;--------------- Run & grab ----------------

[State -1, Jump]
type = ChangeState
value = 7000
TriggerAll = var(9)
TriggerAll = var(53) = 3
triggerAll = statetype != A
triggerAll = p2StateType != A
triggerAll = p2StateType != L
triggerAll = p2MoveType != A
triggerAll = !EnemyNear, Numproj
TriggerAll = !inguarddist
trigger1 = p2bodydist x > 100
Trigger1 = ctrl
Trigger2 = Stateno = [400,430]
Trigger2 = !AnimTime

;--------------- jump, dodge & grab ----------------

[State -1, Dodge]
type = ChangeState
value = ifelse(p2bodydist x > 20,700,720)
Trigger1 = var(9)
Trigger1 = Random < 500
Trigger1 = var(53) = 3
trigger1 = statetype != A
trigger1 = p2StateType != A
trigger1 = p2StateType != L
trigger1 = p2bodydist x = [0,55]
Trigger1 = stateno = 52
Trigger1 = prevstateno = [600,690]
Trigger1 = p2stateno = [120,152]
Trigger1 = !AnimTime

[State -1, HGrab 1]
type = ChangeState
value = 3200
TriggerAll = var(9) > 2
TriggerAll = Random < 500
TriggerAll = var(1) < 2
TriggerAll = var(53) = 3
triggerAll = statetype != A
triggerAll = p2StateType != A
triggerAll = p2StateType != L
triggerAll = p2dist x = [0,60]
TriggerAll = prevstateno = 52
TriggerAll = stateno = [700,720]
TriggerAll = !AnimTime
TriggerAll = !var(6)
Trigger1 = var(15)
Trigger2 = power >= 1000
Trigger2 = p2life >= 150

[State -1, HGrab 2]
type = ChangeState
value = 3220
TriggerAll = var(9) > 2
TriggerAll = Random < 500
TriggerAll = var(1) = 3
TriggerAll = var(32)
TriggerAll = var(53) = 3
triggerAll = statetype != A
triggerAll = p2StateType != A
triggerAll = p2StateType != L
triggerAll = p2dist x = [1,60]
TriggerAll = prevstateno = 52
TriggerAll = stateno = [700,720]
TriggerAll = !AnimTime
TriggerAll = !var(6)
Trigger1 = var(15)
Trigger2 = power >= 1000
Trigger2 = p2life >= 150

[State -1, SGrab 1]
type = ChangeState
value = 1900
Trigger1 = var(9) > 2
Trigger1 = Random < 500
Trigger1 = var(1) = 3
Trigger1 = var(32)
Trigger1 = var(53) = 3
trigger1 = statetype != A
trigger1 = p2StateType != A
trigger1 = p2StateType != L
trigger1 = p2dist x = [1,60]
Trigger1 = prevstateno = 52
Trigger1 = stateno = [700,720]
Trigger1 = !AnimTime
Trigger1 = !var(6)

[State -1, SGrab 2]
type = ChangeState
value = 1550
Trigger1 = var(9) > 2
Trigger1 = Random < 500
Trigger1 = var(1) = 4
Trigger1 = var(32)
Trigger1 = var(53) = 3
trigger1 = statetype != A
trigger1 = p2StateType != A
trigger1 = p2StateType != L
trigger1 = p2dist x = [1,60]
Trigger1 = prevstateno = 52
Trigger1 = stateno = [700,720]
Trigger1 = !AnimTime
Trigger1 = !var(6)

[State -1, Jump]
type = ChangeState
value = 950+10*(random < 500)
Trigger1 = var(9)
Trigger1 = Random < 500
Trigger1 = var(53) = 3
trigger1 = statetype != A
trigger1 = p2StateType != A
trigger1 = p2StateType != L
trigger1 = p2bodydist x = [0,20]
Trigger1 = prevstateno = 52
Trigger1 = stateno = [700,720]
Trigger1 = !AnimTime
Trigger1 = !var(6)

