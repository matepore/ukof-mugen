;-----------------------------------------------------------------------------
[Statedef -2];常時監視ステート(相手に行動を制御されても関係無く常に実行される)
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------

[State -2, 二人目のイントロ]
type = ChangeState             ;二人目でもイントロを作る
value = 190                    ;イントロへ
triggerall = RoundsExisted = 0 ;自分が初参戦時
triggerall = TeamMode = Turns  ;ターンモード
trigger1 = stateno = 5900      ;5900番


;ここでtrigger用に自分の初期ライフを確認します
[State -2, ライフ確認]
type = VarSet
triggerall = RoundState = [0,1] ;開始前の間
trigger1 = RoundNo = 1          ;一試合目
trigger2 = TeamMode = Turns     ;5900でイントロを作らないと ↓
trigger2 = RoundsExisted = 0    ;これは使えません
v = 22
value = Life   ;Var(22)に自分のライフを保存

[State -2, ライフ取得ミス対策]
type = VarSet
triggerall = Var(22) = [0,100] ;ライフが100以下と認識されたら
triggerall = Time = 1
trigger1 = RoundNo = 1
trigger2 = RoundsExisted = 0
v = 22
value = const(data.life) ;自分のデータに書かれたLifeにする

;-------------------------------- 不可攻撃判定用 --------------------------------------------
[State -2, 中段(屈みガード不可攻撃)判定]
Type = VarSet
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = RoundState = 2
TriggerAll = StateNo != [120,155]			;現在のステートがガードステート以外の時
TriggerAll = GetHitVar(Damage) > 0			;ダメージを受けた瞬間
TriggerAll = playerid(var(56)),statetype != A		;相手が空中状態以外の時
TriggerAll = Var(51) = 0				;判定用Varが0の時
Trigger1 = helper(50000+id),Var(0) = 2
Trigger1 = helper(50000+id),Var(1) = 1
Trigger2 = PrevStateNo = 131				;前のステートが「屈みガード(ステート131)の時」
Trigger3 = PrevStateNo = [152,153]			;前のステートが「『屈み状態で』相手の攻撃をガードした」状態の時
V = 51
Value = p2stateno
IgnoreHitPause = 1

[State -2, 下段(立ちガード不可攻撃)判定]
Type = VarSet
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = RoundState = 2
TriggerAll = StateNo != [120,155]			;現在のステートがガードステート以外の時
TriggerAll = GetHitVar(Damage) > 0			;ダメージを受けた瞬間
TriggerAll = playerid(var(56)),StateType != C		;相手が屈み状態以外の時
TriggerAll = Var(51) = 0				;判定用Varが0の時
Trigger1 = helper(50000+id),Var(0) = 1
Trigger1 = helper(50000+id),Var(1) = 1
Trigger2 = PrevStateNo = 130				;前のステートが「立ちガード(ステート130)の時」
Trigger3 = PrevStateNo = [150,151]			;前のステートが「『立ち状態で』相手の攻撃をガードした状態の時」
V = 51
Value = -(p2stateno)
IgnoreHitPause = 1

[State -2, 空ガ不可攻撃判定]
Type = VarSet
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = RoundState = 2
TriggerAll = StateNo != [120,155]			;現在のステートがガードステート以外の時
TriggerAll = GetHitVar(Damage) > 0			;ダメージを受けた瞬間
TriggerAll = Var(51) = 0				;判定用Varが0の時
Trigger1 = helper(50000+id),Var(0) = 3
Trigger1 = helper(50000+id),Var(1) = 1
Trigger2 = PrevStateNo = 132				;前のステートが「空中ガード(ステート132)の時」
Trigger3 = PrevStateNo = [153,154]			;前のステートが「『空中状態で』相手の攻撃をガードした」状態の時
V = 51
Value = 10000*p2stateno
IgnoreHitPause = 1

[State -2, 判定用Varのリセット]
Type = VarSet
triggerall = !IsHelper
TriggerAll = RoundState = 2
triggerall = numhelper(50000+id)
Trigger1 = GetHitVar(Damage) = 0
V = 51
Value = 0
IgnoreHitPause = 1

;--------------------------------------------------------------------------------------------
[State -2,reversaldef]
type = varadd
;TriggerAll = var(59)>=1
triggerall = !IsHelper && playeridexist(var(56))
trigger1 = (var(54)&8388608)<8388608
trigger1 = MoveReversed
v = 54
value = 8388608
ignorehitpause=1

[State -2,reversaldef]
type = varadd
;TriggerAll = var(59)>=1
triggerall = !IsHelper && playeridexist(var(56))
trigger1 = (var(54)&8388608)=8388608
trigger1 = movetype = I || (stateno = [0,119]) || stateno = 5120
v = 54
value = -8388608
ignorehitpause = 1

[State -1,起き攻め]
type = varadd
triggerall = !IsHelper
triggerall = (var(54)&524288)=0
trigger1 = fvar(39) = [5120,5121)
trigger1 = prevstateno=[0,2000]
Trigger1 = GetHitVar(Damage) = 0 && time=0 && movetype = H && stateno != [120,155]
trigger1 = fvar(39):=0 || 1
;trigger2 = life<222
v = 54
value = 524288

[State -1,起き攻め]
type = varadd
triggerall = !IsHelper
triggerall = (var(54)&524288)>0
trigger1 = roundstate<2
trigger1 = playerid(var(56)),roundsexisted = 0 || teammode = simul || enemy,teammode = simul
v = 54
value = -(var(54)&524288)

[State -1,起き攻め]
type = varadd
triggerall = !IsHelper
triggerall = (var(54)&524288)>0
trigger1 = fvar(39) = [5120,5121)
Trigger1 = movetype = H
FV = 39
value = 0

;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;デバッグ支援記述集

; ※ この一連の記述は、キャラが完成したら消すか";"を付けて無効化しましょう。
;　　僅かにでも処理が重くなることが理由です。（ちなみにNullではダメです）


;デバッグモードに白い文字の表示を加える
;[State -2, デバッグ表示]
;type = DisplayToClipboard
;trigger1 = 1
;text = "V1-C=%d,V3-J=%d,V4-D=%d,V5-B=%d,V20-A=%d"
;params = var(1),var(3),var(4),var(5),var(20)
;ignorehitpause = 1

;表示を横に加える
;[State -2, デバッグ表示その2]
;type = AppendToClipboard
;trigger1 = 1
;text = " V22-L=%d,V21-R=%d,Pos X=%d,Y=%d"
;params = var(22),var(21),ceil(Pos X),floor(Pos Y)
;ignorehitpause = 1

;表示を下に加える
;[State -2, デバッグ表示その3]
;type = AppendToClipboard
;trigger1 = 1
;text = "\nDist X=%d,Y=%d, Vel X=%d/10,Y=%d/10 : Power=%d"
;params = floor(P2BodyDist X),ceil(P2BodyDist Y),ceil(Vel X*10),floor(Vel Y*10),Power
;ignorehitpause = 1


; ※ 関数説明：floor(1.5) = 1、ceil(1.5) = 2になります。 小数を含む場合によく使います。
;　　小数を詳しく見たい場合は%dの代わりに%fを使います。 MUGENに限らず結構常識です。
;　　Vel X*10に対し、表記はVel X=%d/10になっています。 10で割った数値が目安のVel Xです。
;　　PosとDistはfloorとceilが逆になっています。


;---------------------------------------------------------------------------------
;[State -2, 1]
;type = DisplayToClipboard
;trigger1 = 1
;text="AI = %d  p2bd X = %d  p2dist Y = %d  p2s = %d  pr=%d "
;params = floor(var(59)),floor(p2bodydist X),floor(P2BodyDist Y),(p2stateno),floor(prevstateno)
;ignorehitpause = 1

;[State -2, Debug]
;type = appendtoclipboard
;trigger1 = 1
;;text = "p=%d"
;;params = power;(var(54)&2097152)
;text = "my:%d"
;params = floor(P2BodyDist Y-(floor(10*(vel Y)+(10*(10+1)/2)*const(movement.yaccel))))+ floor(P2BodyDist Y+(floor(10*(fvar(34))+(10*(10+1)/2)*fvar(38))))
;ignorehitpause=1

;[State -2, 1]
;type = appendToClipboard
;trigger1 = 1
;text = "\nFV39:%f ran:%d fv37:%d jug:%d FV35:%f "
;params = (fvar(39)),floor((var(54)&127)),floor(fvar(37)),((var(54)&122880)/8192),fvar(35)
;ignorehitpause = 1

;[State -2, Debug]
;type = appendtoclipboard
;trigger1 = NumHelper(60000+id)
;text = "L=%d R=%d"
;params = floor(Helper(60000+id),fvar(37)),floor(Helper(60000+id),fvar(38))
;ignorehitpause=1

;[State -2, Debug]
;type = appendtoclipboard
;trigger1 = NumHelper(50000+id)
;text = " D=%d"
;params = ceil(Helper(50000+id),fvar(10))
;ignorehitpause=1


;無人デバッグ用（かなり長時間CPUに任せるデバッグ法）
;ウォッチ、サバイバル(ctrl+2使用)のチーム戦が良いと思う
;[State -2, バグ発生警報]
;type = VarSet
;triggerall = RoundState = 2
;triggerall = Var(20) >= 0
;trigger1 = floor(Pos Y) < -5 ;よくあるバグとして、宙に浮かぶことが挙げられる
;trigger1 = stateno = [0,22]  ;宙で立つ、しゃがむ、歩く
;trigger1 = Time = 1
;trigger2 = Anim != [5110,5120]
;trigger2 = Ctrl = 0     ;行動不能のまま
;trigger2 = Life > 0     ;まだ息があり
;trigger2 = !Lose        ;負けていないのに
;trigger2 = Time = 2047  ;長時間固まる
;var(20)  = -4           ;上記バグが出るとセットされます。

;[State -2, 永久戦闘デバッグ]
;type = LifeAdd
;trigger1 = TeamMode = Simul ;必要に応じて条件を変える
;value = 20  ;HPが減らない
;ignorehitpause = 1

[State -2, 残像]
type = AfterImage
trigger1 = Movetype = H
time = 1

[State -2,]
type = StopSnd
Trigger1 = var(59) <= 0
trigger1 = command != "holdfwd"
trigger2 = Anim != 100
channel = 6
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 1280
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 0
trigger1 = enemy, Vel Y > 0
value = s12,8

[State -2,]
type = StopSnd
trigger1 = Anim != 1240
channel = 7
ignorehitpause = 1

[State -2,]
type = StopSnd
trigger1 = Anim != 2000
channel = 8
ignorehitpause = 1

[State 240, 変数]
type = Varset
trigger1 = Anim = 0
var(15) = 0

[State 240, 変数]
type = Varset
trigger1 = Anim = 0
var(16) = 0

;落下エフェクト
[State -2,]
type = Explod
triggerall = P2Movetype = H
triggerall = P2Stateno = 2030
triggerall = P2Statetype = A
trigger1 = Enemy,AnimElem = 15
trigger2 = Enemy,AnimElem = 16
anim = 2045
pos = 0,-30
postype = p2
sprpriority = 10
ownpal = 1

;叩きつけエフェクト
[State -2,]
type = Explod
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 2030
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 20
trigger1 = enemy, Vel Y > 0
anim = 2050
pos = 0,0
postype = p2
sprpriority = 10
ownpal = 1

[State 700, エフェクト表示]
type = Explod
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 2030
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 20
trigger1 = enemy, Vel Y > 0
anim = 2001
postype = P2
pos = -30, 0
sprpriority = 10
ownpal = 0

[State 700, エフェクト表示]
type = Explod
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 2030
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 20
trigger1 = enemy, Vel Y > 0
anim = 2001
postype = P2
pos = 30, 0
sprpriority = 10
ownpal = 0
facing = -1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 2030
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 0
trigger1 = enemy, Vel Y > 0
value = s12,6

;---------------------------------------------------------------------------------

[State -3,]
type = PlaySnd
triggerall = alive = 1
triggerall = random <= 250
triggerall = time = 1
trigger1 = stateno = 5000
trigger1 = anim = 5000 || anim = 5010
trigger2 = stateno = 5010
trigger2 = anim = 5020
value = s11,1
volume = -100

[State -3,]
type = PlaySnd
triggerall = alive = 1
triggerall = random <= 250
triggerall = time = 1
trigger1 = stateno = 5000
trigger1 = anim = 5002 || anim = 5012
trigger2 = stateno = 5010
trigger2 = anim = 5022
value = s11,4
volume = -100

[State -3,]
type = PlaySnd
triggerall = alive = 1
triggerall = random <= 250
triggerall = time = 1
trigger1 = stateno = 5101
value = s11,3
volume = -100

;---------------------------------------------------------------------------------

[State 190,上司]
type = VarSet
trigger1 = p2name = "Foxy" | p4name = "Foxy"
trigger2 = p2name = "Krizalid" | p4name = "Krizalid"
trigger3 = p2name = "Original Zero" | p4name = "Original Zero"
trigger4 = p2name = "IGNIZ" | p4name = "IGNIZ"
trigger5 = p2name = "A-igniz" | p4name = "A-igniz"
var(5) = 1

[State 190,オリジナル]
type = VarSet
trigger1 = p2name = "Angel" | p4name = "Angel"
trigger2 = p2name = "angel" | p4name = "angel"
var(5) = 2

;---------------------------------------------------------------------------
[State 1000, ヘルパーを出す]
type = Helper
trigger1 = P2Movetype = H
trigger1 = P2Stateno = 2030
trigger1 = P2Statetype = A
trigger1 = enemy, Pos Y >= 0
trigger1 = enemy, Vel Y > 0
name = "Slow"
stateno = 4900
ID = 4900
helpertype = normal
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;---------------------------------------------------------------------------------

[State 1000, ヘルパーを出す]
type = Helper
triggerall = stateno = 3100
trigger1 = Anim = 3100
trigger1 = time = 30
name = "MAX3"
stateno = 8000
ID = 8000
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1000, ヘルパーを出す]
type = Helper
triggerall = stateno = 3100
trigger1 = Anim = 3100
trigger1 = Animtime = 0
name = "MAX3END"
stateno = 8010
ID = 8010
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ヘルパーを出す]
type = Helper
triggerall = stateno = 3115
trigger1 = Anim = 3115
trigger1 = AnimElem = 6
name = "MAX3END"
stateno = 8010
ID = 8010
helpertype = normal
pos = 0,0
postype = p2
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------------
; MAX3演出用ヘルパー

[Statedef 8000]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 9999
sprpriority = -50

[State 181, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = noshadow

[State 2000]
type = Explod
trigger1 = time = 0
anim = 8000
ID = 8000
pos = 0,0
postype = back
ownpal = 1
bindtime = -1
removetime = -1
supermove = 1
sprpriority = -100

[State 2000]
type = Explod
trigger1 = time = 0
anim = 8000
ID = 8000
pos = -320,0
postype = back
ownpal = 1
bindtime = -1
removetime = -1
supermove = 1
sprpriority = -100

[State 1000,]
type = RemoveExplod
trigger1 = root,stateno != [3100,3115]
trigger2 = root,stateno = 3115
trigger2 = root,AnimElem = 6
ID = 8000

[State 800, ステート変更]
type = DestroySelf
trigger1 = root,stateno != [3100,3115]
trigger2 = root,stateno = 3115
trigger2 = root,AnimElem = 6

;---------------------------------------------------------------------------------
; MAX3演出用ヘルパー
; パリーン

[Statedef 8010]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 9999
sprpriority = -50

[State 200,]
type = Posset
trigger1 = time = 0
x = 0
y = 0

[State 181, 特殊効果]
type = AssertSpecial
trigger1 = time = [0,6]
flag = noBG

[State 181, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = noshadow

[State 2000]
type = Explod
trigger1 = time = 0
anim = 8010
ID = 8010
pos = 0,0
postype = back
ownpal = 1
bindtime = -1
supermove = 1
sprpriority = -100

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 7
value = s12,4

[State 1000,]
type = RemoveExplod
trigger1 = time = 0
ID = 8000

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 8

;---------------------------------------------------------------------------
;スロー処理

[Statedef 4900]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 4900
sprpriority = 1

[State 1001,]
type = Pause
trigger1 = (GameTime%3) = 0
trigger1 = time = [0,20]
time = 1

[State 1001,]
type = Pause
trigger1 = (GameTime%6) = 0
trigger1 = time = [21,30]
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------------
[Statedef -3];常時監視ステート(p2statenoなどで相手に行動を制御された時は実行しない)
;---------------------------------------------------------------------------------

;※※※※※※※※※※※※※※※※※※※※ハイジャンプ・東方萃夢想風味
;理論は簡単
;ハイジャンプコマンドを入れた「瞬間」、varスイッチを１にする。
;でハイジャンプのコマンドは最後がU、つまりジャンプする。
;そしてジャンプステート５０の時にvarスイッチが１以上ならveladdで加速します。
;varスイッチを０にするトリガーは「ステート５０の２フレーム目」です。

[State -3, コマンドを入れたらVarをON] 
type = VarSet
TriggerAll = var(59) <= 0
trigger1 = command = "jump"
trigger1 = ctrl
trigger1 = statetype = S
trigger2 = prevstateno = 100
trigger2 = command = "holdfwd"
v = 3
value = 1

[State -3, コマンドを入れたらVarをON] 
type = VarSet
TriggerAll = var(59) > 0
triggerall = time<2 && stateno = 40
trigger1 = fvar(39)=[7,10)
trigger2 = fvar(39)=(-4,-1]
v = 3
value = 1

[State -3, sysvarを引継ぐ]
type = VarSet
trigger1 = Var(3) = 1
trigger1 = stateno = 40 ;ジャンプする前のステート
trigger1 = AnimTime = 0 ;ジャンプ方向を決めるsysvarがリセットされる寸前
var(3) = ifelse(sysvar(1)=0, 2, ifelse(sysvar(1)=1, 3, 4))

[State -3, varをOFFにするステート]
type = VarSet
triggerall = Time = 2
trigger1 = stateno = 50
trigger2 = stateno != [40,59]
v = 3
value = 0

[State -3, 前にボタンを押してたら前にも加速]
type = VelAdd
trigger1 = var(3) = 3
trigger1 = stateno = 50
y = -0.6
x = 1.75

[State -3, 後ろなら後ろに加速]
type = VelAdd
trigger1 = var(3) = 4
trigger1 = stateno = 50
y = -0.6
x = -1.5

[State -3, 垂直ジャンプにveladdを使って上に加速]
type = VelAdd
trigger1 = var(3) = 2
trigger1 = stateno = 50
y = -1.5

[State -3, 成功したときの残像]
type = AfterImage
trigger1 = var(3) >= 1
trigger1 = stateno = 50
time = 25
trans = add1
length = 4
timeGap = 3
frameGap = 1
palBright = 0, 0, 0
palContrast = 128, 128, 128
palAdd = 0, 0, 0
palMul = 1, 1, 1

;※常時監視ステートは常に有効にしたいステートコントローラをどんどん追加していきます。

;============================================================================================
;-------------------------------------- AI --------------------------------------------------
;var(51)  = 不可攻撃判定用
;var(52)  = simul用
;var(53)  = 相手停止F
;var(54)  = いろいろ
;var(55)  = 反応速度
;var(56)  = EnemyNear,id
;var(59)  = AILv
;fvar(34) = 敵y軸速度
;fvar(35) = 敵x軸速度
;fvar(36) = 摩擦係数
;fvar(37) = のけぞり時間
;fvar(38) = 重力加速度
;fvar(39) = AI制御

;----------------------------------- AI起動用 -----------------------------------------------
[State -3, AI起動用ヘルパー]
type=helper
TriggerAll = RoundState<2||(RoundState=2&&ctrl)
trigger1 = !NumHelper(10000+id)
trigger1 = alive
trigger1 = var(59)=0
helpertype=normal
name="N-Geese_AI"
stateno=10015
ID=10000+id
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1 = ishelper(10000+id)
trigger1 = stateno!=10015
value=10015

[State 50000]
type = changeState
triggerall = IsHelper(50000+id)
trigger1 = StateNo != 50000
value = 50000
ignorehitpause = 1

[State -3, AI]
type = VarSet
TriggerAll = var(59) <= 0
triggerall = !IsHelper
triggerall = roundstate = 2
trigger1 = Command = "AI0" || Command = "AI1" || Command = "AI2" || Command = "AI3" || Command = "AI4" || Command = "AI5" || Command = "AI6" || Command = "AI7" || Command = "AI8" || Command = "AI9" || Command = "AI10"
trigger2 = Command = "AI11" || Command = "AI12" || Command = "AI13" || Command = "AI14" || Command = "AI15" || Command = "AI16" || Command = "AI17" || Command = "AI18" || Command = "AI19" || Command = "AI20"
trigger3 = Command = "AI21" || Command = "AI22" || Command = "AI23" || Command = "AI24" || Command = "AI25" || Command = "AI26" || Command = "AI27" || Command = "AI28" || Command = "AI29" || Command = "AI30"
trigger4 = Command = "AI31" || Command = "AI32" || Command = "AI33" || Command = "AI34" || Command = "AI35" || Command = "AI36" || Command = "AI37" || Command = "AI38" || Command = "AI39" || Command = "AI40"
trigger5 = Command = "AI41" || Command = "AI42" || Command = "AI43" || Command = "AI44" || Command = "AI45" || Command = "AI46" || Command = "AI47" || Command = "AI48" || Command = "AI49" || Command = "AI50"
Trigger6 = var(59) = 0
Trigger6 = numhelper(10000+id)
Trigger6 = helper(10000+id),var(59)>0
var(59) = 1
IgNoreHitPause = 1

;[State -1,]
;type = VarSet
;trigger1 = command = "start"
;v = 59
;value = 1
;ignorehitpause = 1
;SuperMoveTime = 9999
;PauseMoveTime = 9999

;-------------------------------- AI補助ヘルパー --------------------------------------------
[State -3,AI補助ヘルパー]
Type = HelPer
triggerall = !IsHelper
TriggerAll = var(59) >= 0
Trigger1 = numhelper(50000+id) = 0
Trigger1 = Alive
HelperType = Normal
Name = "AI_helper"
StateNo = 50000
pos=0,999
ID = 50000+id
OwnPal = 0
PauseMoveTime= 99999999
SuperMoveTime= 99999999
IgnoreHitPause = 1

[State -3]
type = changeState
;triggerall = numhelper(50000+id)
triggerall = IsHelper(50000+id)
trigger1 = StateNo != 50000
value = 50000
ignorehitpause = 1

[state -3,画面端検出+AI補助]
Type = helper
Trigger1 = var(59)>=0
Trigger1 = !NumHelper(60000+id)
Helpertype = normal
Name = "AI_stage"
Postype = p1
Stateno = 60000
pos=0,-9999
ID = 60000+id
pausemovetime = 2147483647
supermovetime = 2147483647
Persistent = 0
Ignorehitpause  = 1
Keyctrl = 0
Ownpal = 0

;-------------------------- 中下段reversaldef記録持越用 -------------------------------------
;var(51)  = 下段1
;var(52)  = 下段2
;var(53)  = 下段3
;fvar(34) = 中段1
;fvar(35) = 中段2
;fvar(36) = 中段3
;var(55)  = reversaldef1
;fvar(38) = reversaldef2
;fvar(37) = reversaldef3

[State -3,持越]
Type = null
triggerall = !IsHelper
triggerall = Roundstate>2
Triggerall = numhelper(50000+id)
triggerall = Enemy,teammode = single ;|| Enemy,teammode = turns 
Trigger1 = var(51):=helper(50000+id),var(4) || 1
Trigger1 = var(52):=helper(50000+id),var(7) || 1
Trigger1 = var(53):=helper(50000+id),var(10) || 1
Trigger1 = fvar(34):=helper(50000+id),var(16) || 1
Trigger1 = fvar(35):=helper(50000+id),var(19) || 1
Trigger1 = fvar(36):=helper(50000+id),var(22) || 1
Trigger1 = var(55):=floor(helper(50000+id),fvar(6)) || 1
Trigger1 = fvar(38):=helper(50000+id),fvar(7) || 1
Trigger1 = fvar(37):=helper(50000+id),fvar(8)
IgnoreHitPause = 1
;SuperMoveTime = 9999
;PauseMoveTime = 9999

;----------------------------------- AI用変数 -----------------------------------------------
[state -1,反応速度]
type = VarRandom
triggerall = !IsHelper
triggerall = Roundstate=2
trigger1 = GameTime %60= 0
trigger1 = var(59)=[1,5]
v = 55
range = (6*(6-var(59))),(12+(6*(6-var(59))))
;range = (a),(b)
;6,18
;12,24
;18,30
;24,36
;30,42

[state -1,反応速度]
type = VarRandom
triggerall = !IsHelper
triggerall = Roundstate=2
trigger1 = GameTime %60= 0
trigger1 = var(59)=6
v = 55
range = 1,12

[State -3, 反応速度]
type = VarSet
triggerall = !IsHelper
triggerall = Roundstate=2
trigger1 = GameTime %60= 0
trigger1 = var(59)=7
trigger1 = 1
var(55) = 0
ignorehitpause = 1

[State -3, EnemyNear,id]
type = VarSet
triggerall = !IsHelper
trigger1 = numenemy = 1
trigger2 = numenemy = 2
trigger2 = enemynear(0),life > 0
var(56) = enemynear(0),id
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -3, EnemyNear,id]
type = VarSet
triggerall = !IsHelper
trigger1 = numenemy = 2
trigger1 = enemynear(0),life <= 0
var(56) = enemynear(1),id
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

;AI用重力加速度計測
[State -1, yaccel]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = fvar(38) != playerid(var(56)),const(movement.yaccel)
trigger1 = playerid(var(56)),stateno !=[5000,5210]
trigger1 = playerid(var(56)),stateno !=2025
trigger1 = playerid(var(56)),Vel Y != 0
FV = 38
value = playerid(var(56)),const(movement.yaccel)
ignorehitpause = 1

[State -1, yaccel]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = fvar(38) != playerid(var(56)),GetHitVar(yaccel)
trigger1 = playerid(var(56)),stateno = [5000,5210]
trigger1 = playerid(var(56)),stateno !=2025
FV = 38
value = playerid(var(56)),GetHitVar(yaccel)
ignorehitpause = 1

[State -1, yaccel]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = numtarget
trigger1 = target,stateno = 2025
FV = 38
value = .32
ignorehitpause = 1

[State -1, yaccel]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = fvar(38) != 0
trigger1 = playerid(var(56)),Vel Y = 0
FV = 38
value = 0
ignorehitpause = 1

[State -1,のけぞり時間]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
triggerall = fvar(37)>0
trigger1 = 1
;trigger2 = stateno = 760 && (time<=1 || time>31)
FV = 37
value = -1
ignorehitpause = 1

[State -1,のけぞり時間]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = playerid(var(56)),movetype != H
FV = 37
value = 0
ignorehitpause = 1

;[State -1,のけぞり時間]
;type = varset
;triggerall = !IsHelper && playeridexist(var(56))
;triggerall = Roundstate=2
;triggerall = numtarget
;triggerall = target,stateno = 797
;trigger1 = P2movetype = H
;FV = 37
;value = 110-playerid(var(56)),time
;ignorehitpause = 1

[State -1,のけぞり時間]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
triggerall = numtarget
triggerall = target,stateno =1420
trigger1 = P2movetype = H
FV = 37
value = 81-playerid(var(56)),time
ignorehitpause = 1

[State -1,のけぞり時間]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
triggerall = numtarget
triggerall = target,stateno =1120
trigger1 = P2movetype = H
FV = 37
value = 55-playerid(var(56)),time
ignorehitpause = 1

[State -1,のけぞり時間]
Type = VarSet
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = !playerid(var(56)),hitshakeover
Trigger1 = playerid(var(56)),movetype=H
trigger1 = playerid(var(56)),time<=1
Trigger1 = playerid(var(56)),gethitvar(fall)=1
FV = 37
value = playerid(var(56)),gethitvar(hittime)+playerid(var(56)),gethitvar(hitshaketime)+1+(-playerid(var(56)),gethitvar(fall.RecoverTime)-playerid(var(56)),time+(playerid(var(56)),gethitvar(fall.Recover)=0)*999)
ignorehitpause = 1

[State -1,のけぞり時間]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = playerid(var(56)),movetype = H
trigger1 = playerid(var(56)),stateno != [150,155]
trigger1 = playerid(var(56)),stateno !=1420
trigger1 = playerid(var(56)),stateno !=1120
trigger1 = playerid(var(56)),gethitvar(fall) = 0
FV = 37
value = playerid(var(56)),gethitvar(hittime)+playerid(var(56)),gethitvar(hitshaketime)+1
ignorehitpause = 1

[State -1,のけぞり時間]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = playerid(var(56)),movetype = H
trigger1 = playerid(var(56)),stateno = [150,155]
trigger1 = playerid(var(56)),gethitvar(fall) = 0
trigger1 = playerid(var(56)),gethitvar(hittime)<=playerid(var(56)),gethitvar(ctrltime)
FV = 37
value = playerid(var(56)),gethitvar(hittime)+playerid(var(56)),gethitvar(hitshaketime)+1
ignorehitpause = 1

[State -1,のけぞり時間]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = playerid(var(56)),movetype = H
trigger1 = playerid(var(56)),stateno = [150,155]
trigger1 = playerid(var(56)),gethitvar(fall) = 0
trigger1 = playerid(var(56)),gethitvar(ctrltime)<=playerid(var(56)),gethitvar(hittime) || playerid(var(56)),statetype = A
FV = 37
value = playerid(var(56)),gethitvar(ctrltime)+playerid(var(56)),gethitvar(hitshaketime)+1
ignorehitpause = 1

[State -1,摩擦係数]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = 1
FV = 36
value = ifelse(playerid(var(56)),BackEdgeBodyDist<=3,0.85,ifelse(playerid(var(56)),statetype=C,(playerid(var(56)),Const(movement.crouch.friction)),(playerid(var(56)),Const(movement.stand.friction))))
IgnoreHitPause = 1


[State -1,y速度]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Triggerall = playerid(var(56)),vel y=0
trigger1 = !playerid(var(56)),hitshakeover
FV = 34
value = (playerid(var(56)),hitvel y)
IgnoreHitPause = 1

[State -1,y速度]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Triggerall = playerid(var(56)),vel y=0
trigger1 = playerid(var(56)),hitshakeover
trigger1 = fvar(34)!=(playerid(var(56)),hitvel y)
FV = 34
value = 0
IgnoreHitPause = 0

[State -1,y速度]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Triggerall = playerid(var(56)),vel y!=0
trigger1 = playerid(var(56)),hitshakeover
FV = 34
value = (playerid(var(56)),vel y)
IgnoreHitPause = 1

[State -1,x速度]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Triggerall = playerid(var(56)),vel X=0
trigger1 = !playerid(var(56)),hitshakeover
FV = 35
value = (playerid(var(56)),hitvel x)*ifelse((playerid(var(56)),facing!=facing),-1,1)*ifelse(p2dist x>0,1,-1)
IgnoreHitPause = 1

[State -1,x速度]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Triggerall = playerid(var(56)),vel X=0
trigger1 = playerid(var(56)),hitshakeover
trigger1 = fvar(35)!=(playerid(var(56)),hitvel x)*ifelse((playerid(var(56)),facing!=facing),-1,1)*ifelse(p2dist x>0,1,-1)
FV = 35
value = 0
IgnoreHitPause = 0

[State -1,x速度]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Triggerall = playerid(var(56)),vel X!=0
trigger1 = playerid(var(56)),hitshakeover
FV = 35
value = (playerid(var(56)),vel x)*ifelse((playerid(var(56)),facing!=facing),-1,1)
IgnoreHitPause = 1

[State -1,相手停止F0]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) = 0
v = 53
value = 0
IgnoreHitPause = 1

[State -1,相手停止F1~5]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**5))<1
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))<1
v = 53
value = ifelse(abs(fvar(35)*fvar(36)**1)<1,1,ifelse(abs(fvar(35)*fvar(36)**2)<1,2,ifelse(abs(fvar(35)*fvar(36)**3)<1,3,ifelse(abs(fvar(35)*fvar(36)**4)<1,4,5))))+playerid(var(56)),gethitvar(hitshaketime)
IgnoreHitPause = 1

[State -1,相手停止F6~10]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = !(abs((playerid(var(56)),hitvel x)*(fvar(36)**5))<1)
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**10))<1
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))<1
v = 53
value = ifelse(abs(fvar(35)*fvar(36)**6)<1,6,ifelse(abs(fvar(35)*fvar(36)**7)<1,7,ifelse(abs(fvar(35)*fvar(36)**8)<1,8,ifelse(abs(fvar(35)*fvar(36)**9)<1,9,10))))+playerid(var(56)),gethitvar(hitshaketime)
IgnoreHitPause = 1

[State -1,相手停止F11~15]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = !(abs((playerid(var(56)),hitvel x)*(fvar(36)**10))<1)
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**15))<1
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))<1
v = 53
value = ifelse(abs(fvar(35)*fvar(36)**11)<1,11,ifelse(abs(fvar(35)*fvar(36)**12)<1,12,ifelse(abs(fvar(35)*fvar(36)**13)<1,13,ifelse(abs(fvar(35)*fvar(36)**14)<1,14,15))))+playerid(var(56)),gethitvar(hitshaketime)
IgnoreHitPause = 1

[State -1,相手停止F15~20]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = !(abs((playerid(var(56)),hitvel x)*(fvar(36)**15))<1)
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**20))<1
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))<1
v = 53
value = ifelse(abs(fvar(35)*fvar(36)**16)<1,16,ifelse(abs(fvar(35)*fvar(36)**17)<1,17,ifelse(abs(fvar(35)*fvar(36)**18)<1,18,ifelse(abs(fvar(35)*fvar(36)**19)<1,19,20))))+playerid(var(56)),gethitvar(hitshaketime)
IgnoreHitPause = 1

[State -1,相手停止F21~25]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = !(abs((playerid(var(56)),hitvel x)*(fvar(36)**20))<1)
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**25))<1
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))<1
v = 53
value = ifelse(abs(fvar(35)*fvar(36)**21)<1,21,ifelse(abs(fvar(35)*fvar(36)**22)<1,22,ifelse(abs(fvar(35)*fvar(36)**23)<1,23,ifelse(abs(fvar(35)*fvar(36)**24)<1,24,25))))+playerid(var(56)),gethitvar(hitshaketime)
IgnoreHitPause = 1

[State -1,相手停止F26~30]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = !(abs((playerid(var(56)),hitvel x)*(fvar(36)**26))<1)
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**30))<1
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))<1
v = 53
value = ifelse(abs(fvar(35)*fvar(36)**26)<1,26,ifelse(abs(fvar(35)*fvar(36)**27)<1,27,ifelse(abs(fvar(35)*fvar(36)**28)<1,28,ifelse(abs(fvar(35)*fvar(36)**29)<1,29,30))))+playerid(var(56)),gethitvar(hitshaketime)
IgnoreHitPause = 1

[State -1,相手停止F(slidetime)]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**playerid(var(56)),gethitvar(slidetime)))>=1
trigger1 = playerid(var(56)),gethitvar(slidetime)<=playerid(var(56)),gethitvar(hittime)
trigger1 = playerid(var(56)),gethitvar(slidetime)<=playerid(var(56)),gethitvar(ctrltime)||playerid(var(56)),stateno!=[120,155]
v = 53
value = playerid(var(56)),gethitvar(slidetime)+playerid(var(56)),gethitvar(hitshaketime)+1
IgnoreHitPause = 1

[State -1,相手停止F(fvar(37))]
Type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = !playerid(var(56)),hitshakeover
trigger1 = abs((playerid(var(56)),hitvel x)*(fvar(36)**fvar(37)))>=1
trigger1 = !(playerid(var(56)),gethitvar(slidetime)<=playerid(var(56)),gethitvar(hittime))
trigger1 = !(playerid(var(56)),gethitvar(slidetime)<=playerid(var(56)),gethitvar(ctrltime))||playerid(var(56)),stateno!=[120,155]
v = 53
value = floor(fvar(37))-2
IgnoreHitPause = 1

[State -1,相手停止F]
Type = varadd
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
Trigger1 = fvar(35) != 0
trigger1 = playerid(var(56)),hitshakeover
trigger1 = var(53)>0
v = 53
value = -1
IgnoreHitPause = 1

;1対1
[State -1,1:1]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
trigger1 = numpartner
trigger1 = teammode = single || teammode = turns || (teammode = simul && !partner,Alive)
trigger1 = Enemy,teammode = single || Enemy,teammode = turns
trigger2 = teammode = single || teammode = turns
trigger2 = Enemy,teammode = single || Enemy,teammode = turns
trigger3 = numpartner
trigger3 = teammode = single || teammode = turns || (teammode = simul && !partner,Alive)
trigger3 = Enemy,teammode=simul
trigger3 = !Enemynear(0),Alive || !Enemynear(1),Alive
var(52) = ifelse(var(52)>0,2,-2)

;2対1(向き合った状態)
[State -1,2:1]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
trigger1 = Enemy,teammode = single || Enemy,teammode = turns 
trigger1 = facing=-1
trigger1 = playerid(var(56)),Pos X<Pos X 
trigger1 = playerid(var(56)),Pos X<partner,Pos X
trigger2 = Enemy,teammode = single || Enemy,teammode = turns 
trigger2 = facing=1
trigger2 = playerid(var(56)),Pos X>Pos X 
trigger2 = playerid(var(56)),Pos X>partner,Pos X
trigger3 = Enemy,teammode=simul
trigger3 = !Enemynear(0),Alive || !Enemynear(1),Alive
trigger3 = facing=-1
trigger3 = playerid(var(56)),Pos X<Pos X 
trigger3 = playerid(var(56)),Pos X<partner,Pos X
trigger4 = Enemy,teammode=simul
trigger4 = !Enemynear(0),Alive || !Enemynear(1),Alive
trigger4 = facing=1
trigger4 = playerid(var(56)),Pos X>Pos X 
trigger4 = playerid(var(56)),Pos X>partner,Pos X
var(52) = ifelse(var(52)>0,3,-3)

;2対1(挟んだ状態)
[State -1,2:1]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
trigger1 = Enemy,teammode = single || Enemy,teammode = turns 
trigger1 = facing=-1
trigger1 = playerid(var(56)),Pos X<Pos X 
trigger1 = playerid(var(56)),Pos X>partner,Pos X
trigger2 = Enemy,teammode = single || Enemy,teammode = turns 
trigger2 = facing=1
trigger2 = playerid(var(56)),Pos X>Pos X 
trigger2 = playerid(var(56)),Pos X<partner,Pos X
trigger3 = Enemy,teammode = single || Enemy,teammode = turns 
trigger3 = partner,facing+facing=0
trigger4 = Enemy,teammode=simul
trigger4 = !Enemynear(0),Alive || !Enemynear(1),Alive
trigger4 = facing=-1
trigger4 = playerid(var(56)),Pos X<Pos X 
trigger4 = playerid(var(56)),Pos X>partner,Pos X
trigger5 = Enemy,teammode=simul
trigger5 = !Enemynear(0),Alive || !Enemynear(1),Alive
trigger5 = facing=1
trigger5 = playerid(var(56)),Pos X>Pos X 
trigger5 = playerid(var(56)),Pos X<partner,Pos X
trigger6 = Enemy,teammode=simul
trigger6 = !Enemynear(0),Alive || !Enemynear(1),Alive
trigger6 = partner,facing+facing=0
var(52) = ifelse(var(52)>0,4,-4)

;1対2(向き合った状態)
[State -1,1:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Enemy,teammode=simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = numpartner
trigger1 = teammode = single || teammode = turns || (teammode = simul && !partner,Alive)
trigger1 = facing=-1
trigger1 = Enemynear(0),Pos X<Pos X
trigger1 = Enemynear(1),Pos X<Pos X
trigger2 = numpartner
trigger2 = teammode = single || teammode = turns || (teammode = simul && !partner,Alive)
trigger2 = facing=1
trigger2 = Enemynear(0),Pos X>Pos X
trigger2 = Enemynear(1),Pos X>Pos X
trigger3 = teammode = single || teammode = turns
trigger3 = facing=-1
trigger3 = Enemynear(0),Pos X<Pos X
trigger3 = Enemynear(1),Pos X<Pos X
trigger4 = teammode = single || teammode = turns
trigger4 = facing=1
trigger4 = Enemynear(0),Pos X>Pos X
trigger4 = Enemynear(1),Pos X>Pos X
var(52) = ifelse(var(52)>0,5,-5)

;1対2(挟まれた状態)
[State -1,1:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Enemy,teammode = simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = numpartner
trigger1 = teammode = single || teammode = turns || (teammode = simul && !partner,Alive)
trigger1 = Enemynear(0),Pos X<Pos X
trigger1 = Enemynear(1),Pos X>Pos X
trigger2 = numpartner
trigger2 = teammode = single || teammode = turns || (teammode = simul && !partner,Alive)
trigger2 = Enemynear(0),Pos X>Pos X
trigger2 = Enemynear(1),Pos X<Pos X
trigger3 = teammode = single || teammode = turns
trigger3 = Enemynear(0),Pos X<Pos X
trigger3 = Enemynear(1),Pos X>Pos X
trigger4 = teammode = single || teammode = turns
trigger4 = Enemynear(0),Pos X>Pos X
trigger4 = Enemynear(1),Pos X<Pos X
var(52) = ifelse(var(52)>0,6,-6)

;2対2(向き合った状態)
[State -1,2:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
triggerall = Enemy,teammode=simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = facing=-1
trigger1 = Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X<Pos X
trigger1 = Enemynear(0),Pos X<partner,Pos X && Enemynear(1),Pos X<partner,Pos X
trigger2 = facing=1
trigger2 = Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X>Pos X
trigger2 = Enemynear(0),Pos X>partner,Pos X && Enemynear(1),Pos X>partner,Pos X
var(52) = ifelse(var(52)>0,7,-7)

;2対2(2人挟んだ状態)
[State -1,2:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
triggerall = Enemy,teammode=simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X<Pos X
trigger1 = Enemynear(0),Pos X>partner,Pos X && Enemynear(1),Pos X>partner,Pos X
trigger2 = Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X>Pos X
trigger2 = Enemynear(0),Pos X<partner,Pos X && Enemynear(1),Pos X<partner,Pos X
var(52) = ifelse(var(52)>0,8,-8)

;2対2(2人挟まれた状態)
[State -1,2:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
triggerall = Enemy,teammode=simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X>Pos X
trigger1 = Enemynear(0),Pos X<partner,Pos X && Enemynear(1),Pos X>partner,Pos X
trigger2 = Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X<Pos X
trigger2 = Enemynear(0),Pos X>partner,Pos X && Enemynear(1),Pos X<partner,Pos X
var(52) = ifelse(var(52)>0,9,-9)

;2対2(自分のみ挟まれた状態):var(56) = 10
[State -1,2:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
triggerall = Enemy,teammode=simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X>Pos X
trigger1 = (Enemynear(0),Pos X>partner,Pos X && Enemynear(1),Pos X>partner,Pos X)||(Enemynear(0),Pos X<partner,Pos X && Enemynear(1),Pos X<partner,Pos X)
trigger2 = Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X<Pos X
trigger2 = (Enemynear(0),Pos X>partner,Pos X && Enemynear(1),Pos X>partner,Pos X)||(Enemynear(0),Pos X<partner,Pos X && Enemynear(1),Pos X<partner,Pos X)
var(52) = ifelse(var(52)>0,10,-10)

;2対2(相方のみ挟まれた状態):var(56) = 11
[State -1,2:2]
type = VarSet
triggerall = abs(var(52))>0
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numpartner
triggerall = teammode = simul && partner,Alive
triggerall = Enemy,teammode=simul
triggerall = Enemynear(0),Alive && Enemynear(1),Alive
trigger1 = Enemynear(0),Pos X<partner,Pos X && Enemynear(1),Pos X>partner,Pos X
trigger1 = (Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X>Pos X)||(Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X<Pos X)
trigger2 = Enemynear(0),Pos X>partner,Pos X && Enemynear(1),Pos X<partner,Pos X
trigger2 = (Enemynear(0),Pos X>Pos X && Enemynear(1),Pos X>Pos X)||(Enemynear(0),Pos X<Pos X && Enemynear(1),Pos X<Pos X)
var(52) = ifelse(var(52)>0,11,-11)

;var(54)
;    1(&127)        = ランダム
;  128(&8064)       = 空中反応
; 8192(&122880)     = juggle
;131072(&131072)    = numtarget
;262144(&262144)    = 無敵チェック
;524288(&524288)    = 起き攻め
;1048576(&1048576)  = 挑発スイッチ
;2097152(&2097152)  = 判定チェック(立ち)
;4194304(&4194304)  = 判定チェック(屈み)
;8388608(&8388608)  = reversaldef

[State -1,ランダム]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
triggerall = (var(54)&127)>0
trigger1 = movetype = A || movetype = H
trigger1 = time=1 && stateno != [120,140)
trigger2 = playerid(var(56)),movetype != H && playerid(var(56)),statetype != L && playerid(var(56)),stateno != [5120,5129]
trigger2 = (movetype = I || stateno = [120,140)) && gametime%60 = 0 && stateno != [100,102]
v = 54
value = -(var(54)&127)

[State -1,ランダム]
type = varadd
triggerall = !IsHelper
trigger1 = (var(54)&127)=0
v = 54
value = (Random%100+1)

[State -1,空中反応]
type = varadd
triggerall = !IsHelper
triggerall = (var(54)&8064)>0
trigger1 = P2statetype != A
v = 54
value = -(var(54)&8064)

[State -1,空中反応]
type = varadd
triggerall = !IsHelper
triggerall = (var(54)&8064)<7680
trigger1 = P2statetype = A
v = 54
value = 128

[state 50000,numtarget]
type = varadd
triggerall = !IsHelper
triggerall = (var(54)&131072)=0
triggerall = numtarget
triggerall = target,stateno=[5000,5099]
trigger1 = stateno = 2100 && time=1
v = 54
value = 131072
IgnoreHitPause = 1

[state 50000,numtarget]
type = varadd
triggerall = !IsHelper
trigger1 = (var(54)&131072)=131072
trigger1 = !numtarget
v = 54
value = -131072
IgnoreHitPause = 1

[state -1,juggleリセット]
type = varadd
triggerall = !IsHelper
;triggerall = var(59)>0
triggerall = alive
triggerall = (var(54)&122880) > 0
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,id != var(56)
trigger2 = p2statetype=S || p2statetype=C
v = 54
value = -(var(54)&122880)
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1,airjuggle計算 15 ]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
;triggerall = var(59)>0
triggerall = alive
triggerall = (var(54)&122880) <= (8192*0)
triggerall = numtarget
triggerall = target,hitfall || target,prevstateno=5050
triggerall = (target,time = 1 && movehit = 1) || (target,prevstateno=5050 && movehit = 1)
trigger1 = stateno = 410 || stateno = 440 || stateno = 300
v = 54
value = (8192*15)
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1,airjuggle計算 8 ]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
;triggerall = var(59)>0
triggerall = alive
triggerall = (var(54)&122880) <= (8192*7)
triggerall = numtarget
triggerall = target,hitfall || target,prevstateno=5050
triggerall = (target,time = 1 && movehit = 1) || (target,prevstateno=5050 && movehit = 1)
trigger1 = stateno = 200 || stateno = 210 || stateno = 215 || stateno = 230 || stateno = 240 || stateno = 245 || stateno = 310 || stateno = 315 || stateno = 320
trigger2 = stateno = 400 || stateno = 430 || stateno = 600 || stateno = 605 || stateno = 610 || stateno = 615 || stateno = 630 || stateno = 635 || stateno = 640 || stateno = 645 || stateno = 650
trigger3 = stateno = 1000 || stateno = 1050 || stateno = 1300 || stateno = 1305 || stateno = 1350
trigger4 = stateno = 2000 || stateno = 2100 || stateno = 3000 || stateno = 3050
v = 54
value = (8192*8)
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1,airjuggle計算 8 ]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
;triggerall = var(59)>0
triggerall = alive
triggerall = (var(54)&122880) <= (8192*7)
triggerall = numtarget
triggerall = time=1
trigger1 = stateno = 1010
v = 54
value = (8192*8)
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1,airjuggle計算 3 ]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
;triggerall = var(59)>0
triggerall = alive
triggerall = (var(54)&122880) <= (8192*12)
triggerall = numtarget
triggerall = target,hitfall || target,prevstateno=5050
triggerall = (target,time = 1 && movehit = 1) || target,prevstateno=5050
trigger1 = stateno = 2010
v = 54
value = (8192*3)
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1,airjuggle計算 2 ]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
;triggerall = var(59)>0
triggerall = alive
triggerall = (var(54)&122880) <= (8192*13)
triggerall = numtarget
triggerall = target,hitfall || target,prevstateno=5050
triggerall = (target,time = 1 && movehit = 1) || target,prevstateno=5050
trigger1 = stateno = 2105 || stateno = 2110 || stateno = 3005 || stateno = 3055 || stateno = 3010 || stateno = 3015 || stateno = 3020
v = 54
value = (8192*2)
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state 50000,挑発スイッチ]
type = varset
triggerall = !IsHelper
trigger1 = stateno=195
v = 54
value = (var(54)|1048576)
IgnoreHitPause = 1

[state 50000,挑発スイッチ]
type = varset
triggerall = !IsHelper
trigger1 = (var(54)&1048576)=1048576
trigger1 = roundstate!=2
v = 54
value = (var(54)|1048576)-1048576
IgnoreHitPause = 1

[state 50000,判定チェック(立ち)]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = (var(54)&2097152)=0
trigger1 = numtarget && numenemy = 1
trigger1 = target,stateno = [5000,5001]
trigger1 = stateno = 215
trigger1 = p2bodydist x <= 45 && movecontact!=1
trigger1 = time=7 || time=10
v = 54
value = (var(54)|2097152)
IgnoreHitPause = 0

[state 50000,判定チェック(立ち)_リセット]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = (var(54)&2097152)=2097152
triggerall = roundstate<2
trigger1 = playerid(var(56)),roundsexisted = 0 || teammode = simul || enemy,teammode = simul
v = 54
value = (var(54)|2097152)-2097152
IgnoreHitPause = 1

[state 50000,判定チェック(屈み)]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = (var(54)&4194304)=0
trigger1 = numtarget && numenemy = 1
trigger1 = target,stateno = [5010,5011]
trigger1 = stateno = 215
trigger1 = p2bodydist x <= 45 && movecontact!=1
trigger1 = time=7 || time=10
trigger2 = (var(54)&2097152)=2097152
v = 54
value = (var(54)|4194304)
IgnoreHitPause = 0

[state 50000,判定チェック(屈み)_リセット]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = (var(54)&4194304)=4194304
triggerall = roundstate<2
trigger1 = playerid(var(56)),roundsexisted = 0 || teammode = simul || enemy,teammode = simul
v = 54
value = (var(54)|4194304)-4194304
IgnoreHitPause = 1

[state -3,ガード]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = var(57)<60 && playerid(var(56)),stateno!=[5000,5210]
trigger1 = helper(60000+id),var(6)!=0
trigger1 = helper(60000+id),var(47)!=0
trigger1 = helper(60000+id),var(47)=[-100,40]
v = 57
value = 30
IgnoreHitPause = 1

[state -3,ガード]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
triggerall = var(57)<60 && playerid(var(56)),stateno!=[5000,5210]
trigger1 = playerid(var(56)),hitdefattr = SCA,AA,AP,AT
trigger2 = numhelper(50000+id)
trigger2 = (helper(50000+id),var(51)=[1,10])
v = 57
value = 1
IgnoreHitPause = 1

[state -3,ガード]
type = varadd
triggerall = !IsHelper && playeridexist(var(56))
triggerall = var(57)>0
trigger1 = !(playerid(var(56)),hitdefattr = SCA,AA,AP,AT)
trigger1 = numhelper(50000+id)
trigger1 = !(helper(50000+id),var(51)=[1,10])
v = 57
value = ifelse(var(57)<=2,-1,-3)
IgnoreHitPause = 1

[state -3,ガード]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
triggerall = var(57)>0
trigger1 = (playerid(var(56)),stateno=[5000,5210]) || roundstate!=2
v = 57
value = 0
IgnoreHitPause = 1

[State -1,reset]
type = VarSet
;triggerall = var(59)>0
triggerall = !IsHelper
trigger1 = roundstate=1
fvar(39) = 0

;----------------------------------- 滑り防止 -----------------------------------------------
[State -3]
type = velset
triggerall = var(59)>0
triggerall = statetype != A
triggerall = time = 1 ;&& stateno != 400 && stateno != 430
trigger1 = (stateno = [200,450]) || stateno = 120 || stateno = 800 || stateno = 10 || (stateno = 0 && prevstateno=100) || stateno = 40
x = 0
IgnoreHitPause = 0

[state -3]
type = AssertSpecial
trigger1 = var(59)>3
flag = nowalk

;------------------------------------ 隙付き ------------------------------------------------
;弱ブルースドライヴモンスター
[State -1, 弱ブルースドライヴモンスター]
type = ChangeState
value = 1450
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper && statetype!=A
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 || helper(50000+id),var(59)=3
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >ifelse(backedgebodydist<=2,-30,-10)
triggerall = playerid(var(56)),StateType = S || helper(50000+id),var(59)=3
triggerall = playerid(var(56)),stateno >=200 || helper(50000+id),var(59)=3
triggerall = P2BodyDist Y+floor(16*(fvar(34))+(16*(16+1)/2)*fvar(38))>=-10
Triggerall = !playerid(var(56)),Ctrl
triggerall = (helper(50000+id),fvar(20) != playerid(var(56)),stateno) || helper(50000+id),fvar(20)=0 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = (helper(50000+id),fvar(21) != playerid(var(56)),stateno) || helper(50000+id),fvar(21)=0 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = (helper(50000+id),fvar(22) != playerid(var(56)),stateno) || helper(50000+id),fvar(22)=0 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = helper(50000+id),var(58)=0 || playerid(var(56)),facing=facing || (fvar(39)=[700,701]) || helper(50000+id),var(59)=3
triggerall = playerid(var(56)),time >= var(55)
triggerall = helper(60000+id),var(1)=0
triggerall = (playerid(var(56)),StateNo != [5100,5270])
triggerall = (playerid(var(56)),movetype = I && !inguarddist) || helper(50000+id),var(59)=3
Triggerall = playerid(var(56)),AnimTime <= -16 && fvar(35)<=0
triggerall = P2bodydist X+fvar(35)*16 <= 40 ;|| playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = P2bodydist X+fvar(35)*16 >= 0
triggerall = (var(54)&127)=[1,life*.1]
triggerall = random <= var(59)*80 || var(59)>6
Trigger1 = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
trigger2 = ((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)


;弱クレイジーサンシャイン
[State -1, 弱クレイジーサンシャイン]
type = ChangeState
value = 1000
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper && statetype!=A
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 || helper(50000+id),var(59)=3
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >ifelse(backedgebodydist<=2,-30,-10)
triggerall = playerid(var(56)),StateType = S || helper(50000+id),var(59)=3
triggerall = playerid(var(56)),stateno >=200 || helper(50000+id),var(59)=3
triggerall = P2BodyDist Y+floor(15*(fvar(34))+(15*(15+1)/2)*fvar(38))>=-10
Triggerall = !playerid(var(56)),Ctrl
triggerall = (helper(50000+id),fvar(20) != playerid(var(56)),stateno) || helper(50000+id),fvar(20)=0 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = (helper(50000+id),fvar(21) != playerid(var(56)),stateno) || helper(50000+id),fvar(21)=0 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = (helper(50000+id),fvar(22) != playerid(var(56)),stateno) || helper(50000+id),fvar(22)=0 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = helper(50000+id),var(58)=0 || playerid(var(56)),facing=facing || (fvar(39)=[700,701]) || helper(50000+id),var(59)=3
triggerall = playerid(var(56)),time >= var(55)
triggerall = helper(60000+id),var(1)=0
triggerall = (playerid(var(56)),StateNo != [5100,5270])
triggerall = (playerid(var(56)),movetype = I && !inguarddist) || helper(50000+id),var(59)=3
Triggerall = playerid(var(56)),AnimTime <= -15 && fvar(35)<=0
triggerall = P2bodydist X+fvar(35)*15 >= 40 || playerid(var(56)),prevstateno=150 || playerid(var(56)),prevstateno=152
triggerall = P2bodydist X+fvar(35)*15 <= 90
triggerall = random <= var(59)*80 || var(59)>6
triggerall = (var(54)&127)%3=0 || fvar(35)=[-1,1]
Trigger1 = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
trigger2 = ((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)

;弱ナイトメア
[State -1, 弱ナイトメア]
type = ChangeState
value = 1200
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper && statetype!=A
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >ifelse(backedgebodydist<=2,-30,-10)
triggerall = playerid(var(56)),StateType = S
triggerall = playerid(var(56)),stateno >=200
triggerall = P2BodyDist Y+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38))>=-10
Triggerall = !playerid(var(56)),Ctrl
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55)
triggerall = (playerid(var(56)),StateNo != [5100,5270])
triggerall = playerid(var(56)),movetype = I && !inguarddist
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
triggerall = (var(54)&127)<=life*.07+fvar(35)<(playerid(var(56)),const(velocity.walk.fwd.x))*-1
Trigger1 = playerid(var(56)),AnimTime = [-13,-11]
trigger1 = P2bodydist X+fvar(35)*11 = [70,90]

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper && statetype!=A
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >ifelse(backedgebodydist<=2,-30,-10)
triggerall = playerid(var(56)),StateType = S
triggerall = playerid(var(56)),stateno >=200
triggerall = P2BodyDist Y+floor(3*(fvar(34))+(3*(3+1)/2)*fvar(38))>=-30
Triggerall = !playerid(var(56)),Ctrl
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55)
triggerall = (playerid(var(56)),StateNo != [5100,5270])
triggerall = playerid(var(56)),movetype = I && !inguarddist
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = playerid(var(56)),AnimTime = -4
trigger1 = P2bodydist X+fvar(35)*5 <= 40
trigger1 = fvar(39):=-500
Trigger2 = playerid(var(56)),AnimTime = -13 ;&& ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*11 >ifelse(backedgebodydist<=2,-30,-10)
trigger2 = P2bodydist X+fvar(35)*5 <= 40
trigger2 = fvar(39):=-500

;しゃがみ弱キック
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper && statetype!=A
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >ifelse(backedgebodydist<=2,-30,-10)
triggerall = playerid(var(56)),StateType = S
triggerall = playerid(var(56)),stateno >=200
triggerall = P2BodyDist Y+floor(3*(fvar(34))+(3*(3+1)/2)*fvar(38))>=-30
Triggerall = !playerid(var(56)),Ctrl
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55)
triggerall = (playerid(var(56)),StateNo != [5100,5270])
triggerall = playerid(var(56)),movetype = I && !inguarddist
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = playerid(var(56)),AnimTime = -3
trigger1 = P2bodydist X+fvar(35)*5 > 40
trigger1 = P2bodydist X+fvar(35)*3 <= 50
trigger1 = fvar(39):=-500

[State -1, Throw]
type = ChangeState
value = 800+(5*(helper(60000+id),fvar(38)*facing>helper(60000+id),fvar(37)*facing))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >-10
triggerall = playerid(var(56)),StateType = S
triggerall = playerid(var(56)),stateno >=200
triggerall = P2BodyDist Y>=-30
Triggerall = !playerid(var(56)),Ctrl
triggerall = (var(54)&262144)=0
triggerall = (helper(50000+id),fvar(20) != playerid(var(56)),stateno) || helper(50000+id),fvar(20)=0
triggerall = (helper(50000+id),fvar(21) != playerid(var(56)),stateno) || helper(50000+id),fvar(21)=0
triggerall = (helper(50000+id),fvar(22) != playerid(var(56)),stateno) || helper(50000+id),fvar(22)=0
;triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55)
triggerall = (playerid(var(56)),StateNo != [5100,5270]) || (playerid(var(56)),StateNo != [5100,5270])
triggerall = playerid(var(56)),movetype = I && !inguarddist
triggerall = stateno != 100
triggerall = p2bodydist X < 15
triggerall = p2statetype != A && p2movetype != H
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||(stateno=[10,12]))
Trigger1 = playerid(var(56)),AnimTime = [-5,-1]
Trigger2 = playerid(var(56)),AnimTime <= -26

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
triggerall = ((var(54)&2097152)=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)=0 && playerid(var(56)),statetype = C)
Triggerall = !inguarddist || playerid(var(56)),facing=facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 6+random%(1+var(59)) || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*7 >0 || p2movetype = A)
triggerall = playerid(var(56)),StateType != A && statetype!=A
triggerall = helper(60000+id),var(10)>16 || playerid(var(56)),facing = facing
triggerall = P2BodyDist Y+floor(5*(fvar(34))+(5*(7+1)/2)*fvar(38))>=-30
triggerall = random <= var(59)*140 && ((var(54)&127)=[1,(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = (playerid(var(56)),AnimTime = [-8,-5]) || (fvar(39)=[700,701])
trigger1 = P2bodydist X+fvar(35)*4 <= 14+random%10

;近距離立ち強キック
[State -1, Standing Strong Kick]
type = ChangeState
value = 245
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
Triggerall = !inguarddist || playerid(var(56)),facing=facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 6+random%(1+var(59)) || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*7 >0 || p2movetype = A)
triggerall = playerid(var(56)),StateType != A && statetype!=A
triggerall = helper(60000+id),var(10)>22 || playerid(var(56)),facing = facing
triggerall = p2bodydist X < 20
triggerall = P2BodyDist Y+floor(7*(fvar(34))+(7*(7+1)/2)*fvar(38))>=-30
triggerall = random <= var(59)*140 && ((var(54)&127)=[1,(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = (playerid(var(56)),AnimTime = [-8,-7]) ;|| (fvar(39)=[700,701])
trigger1 = P2bodydist X+fvar(35)*7 <= 25+random%10
trigger1 = fvar(39):=-500

;近距離立ち強パンチ
[State -1, Stand Strong Punch]
type = ChangeState
value = 215
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
Triggerall = !inguarddist || playerid(var(56)),facing=facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 6+random%(1+var(59)) || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*7 >0 || p2movetype = A)
triggerall = playerid(var(56)),StateType != A && statetype!=A
triggerall = helper(60000+id),var(10)>22 || playerid(var(56)),facing = facing
triggerall = p2bodydist X < 24
triggerall = P2BodyDist Y+floor(7*(fvar(34))+(7*(7+1)/2)*fvar(38))>=-30
triggerall = random <= var(59)*140 && ((var(54)&127)=[1,(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = (playerid(var(56)),AnimTime = [-8,-7]) ;|| (fvar(39)=[700,701])
trigger1 = P2bodydist X+fvar(35)*7 <= 35+random%10
trigger1 = fvar(39):=-500

;ダッシュ
[state -3]
type = ChangeState
value = 100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
triggerall = p2bodydist X >= 18 && statetype!=A
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),MoveType != H
triggerall = life>111-random%20
triggerall = random <= var(59)*120 && ((var(54)&127)=[1,(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||(stateno=[10,12]))
triggerall = helper(50000+id),var(47)!=0
trigger1 = P2bodydist X <= 100+random%50
trigger1 = P2BodyDist Y+floor(7*(fvar(34))+(7*(7+1)/2)*fvar(38))>=-30
trigger1 = playerid(var(56)),StateType != A
trigger1 = playerid(var(56)),facing = facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701])
trigger1 = playerid(var(56)),AnimTime<=-5-ceil((p2bodydist x>35)*(p2bodydist x-35)/(const(velocity.run.fwd.x)*Const(movement.stand.friction)))
trigger1 = fvar(39):=700.9
trigger2 = fvar(35)>-5
trigger2 = playerid(var(56)),StateType = A
trigger2 = helper(50000+id),var(47)=playerid(var(56)),stateno
trigger2 = fvar(39):=700.9
trigger3 = fvar(35)>0
trigger3 = playerid(var(56)),StateType = A
trigger3 = helper(50000+id),var(47)=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]
trigger3 = helper(50000+id),var(47)=playerid(var(56)),prevstateno
trigger3 = fvar(39):=700.9
ctrl=0

;しゃがみ強パンチ
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),StateType = A && statetype!=A
triggerall = P2BodyDist Y+floor(8*(fvar(34))+(8*(8+1)/2)*fvar(38))>=0
triggerall = random <= var(59)*180 && ((var(54)&127)=[1,10+(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
triggerall = (P2bodydist X+fvar(35)*10 = [10,50]) && fvar(34)!=0
triggerall = helper(50000+id),var(47)!=0
trigger1 = fvar(35)>-5
trigger1 = helper(50000+id),var(47)=playerid(var(56)),stateno
trigger2 = fvar(35)>0
trigger2 = helper(50000+id),var(47)=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]
trigger2 = helper(50000+id),var(47)=playerid(var(56)),prevstateno

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200 && statetype!=A
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = P2BodyDist Y+floor(3*(fvar(34))+(3*(3+1)/2)*fvar(38))>=0
triggerall = random <= var(59)*180 && ((var(54)&127)=[1,10+(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
triggerall = P2bodydist X+fvar(35)*5 <= 40+random%5 && fvar(34)!=0
triggerall = helper(50000+id),var(47)!=0
trigger1 = fvar(35)>-5
trigger1 = playerid(var(56)),StateType = A
trigger1 = helper(50000+id),var(47)=playerid(var(56)),stateno
trigger2 = fvar(35)>0
;trigger2 = playerid(var(56)),StateType = A
trigger2 = (helper(50000+id),var(47)=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50])||playerid(var(56)),stateno=52
trigger2 = helper(50000+id),var(47)=playerid(var(56)),prevstateno

[State -1, Throw]
type = ChangeState
value = 800+(5*(helper(60000+id),fvar(38)*facing>helper(60000+id),fvar(37)*facing))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive && statetype!=A
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0 && p2stateno != [5000,5210)
triggerall = StateType != A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >-10
triggerall = playerid(var(56)),StateType = S || playerid(var(56)),StateType = C
triggerall = playerid(var(56)),stateno >=200
triggerall = P2BodyDist Y+floor(1*(fvar(34))+(1*(1+1)/2)*fvar(38))>=0
Triggerall = (PrevStateNo=[130,159]) || (Prevstateno = [5000,5029]) || !inguarddist || playerid(var(56)),facing=facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701]) ||((!playerid(var(56)),movecontact)&&p2statetype=S)
Triggerall = !playerid(var(56)),Ctrl
triggerall = (var(54)&262144)=0 && statetype!=A
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 4+random%(1+var(59)) || (fvar(39)=[700,701])
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || (playerid(var(56)),movetype = I && playerid(var(56)),stateno>=1000)
triggerall = random <= var(59)*70 && ((var(54)&127)=[1,var(59)*10]) || stateno = 700 || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Triggerall = (playerid(var(56)),AnimTime = [-7,-1]) || (fvar(39)=[700,701])
triggerall = (helper(50000+id),fvar(20) != playerid(var(56)),stateno) || helper(50000+id),fvar(20)=0
triggerall = (helper(50000+id),fvar(21) != playerid(var(56)),stateno) || helper(50000+id),fvar(21)=0
triggerall = (helper(50000+id),fvar(22) != playerid(var(56)),stateno) || helper(50000+id),fvar(22)=0
triggerall = stateno != 100
trigger1 = p2bodydist X < 15
trigger1 = p2statetype != A && p2movetype != H

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
Triggerall = !inguarddist || playerid(var(56)),facing=facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 6+random%(1+var(59)) || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >0 || p2movetype = A)
triggerall = playerid(var(56)),StateType != A && statetype!=A
triggerall = helper(60000+id),var(10)>16 || playerid(var(56)),facing = facing
triggerall = P2BodyDist Y+floor(5*(fvar(34))+(5*(5+1)/2)*fvar(38))>=-30
triggerall = random <= var(59)*180 && ((var(54)&127)=[1,10+(var(59)*10)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = (playerid(var(56)),AnimTime = [-7,-1]) || (fvar(39)=[700,701])
trigger1 = P2bodydist X+fvar(35)*5 <= 40+random%5
trigger1 = fvar(39)!=700.9||(playerid(var(56)),AnimTime = [-6,-1])
trigger1 = fvar(39):=-500

;遠距離立ち強キック
[State -1, Standing Strong Kick]
type = ChangeState
value = 240
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = playerid(var(56)),stateno >=200
triggerall = p2bodydist X >= 20
Triggerall = !inguarddist || playerid(var(56)),facing=facing || playerid(var(56)),moveguarded || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = helper(50000+id),var(58)=0  || playerid(var(56)),facing=facing || (fvar(39)=[700,701])
triggerall = playerid(var(56)),time >= var(55) || playerid(var(56)),prevstateno = playerid(var(56)),stateno || (fvar(39)=[700,701])
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 6+random%(1+var(59)) || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*3 >0 || p2movetype = A)
triggerall = playerid(var(56)),StateType != A && statetype!=A
triggerall = helper(60000+id),var(10)>30 || playerid(var(56)),facing = facing
triggerall = P2BodyDist Y+floor(5*(fvar(34))+(5*(5+1)/2)*fvar(38))>=-30
triggerall = random <= var(59)*120 && ((var(54)&127)=[1,10+(var(59)*7)]) || var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
Trigger1 = (playerid(var(56)),AnimTime = [-13,-11])
trigger1 = P2bodydist X+fvar(35)*11 <= 90+random%5
trigger1 = fvar(39)!=700.9
trigger1 = fvar(39):=-500

;前緊急回避
[State -1, T S]
type = ChangeState
value = 700
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != [150,152]
triggerall = RoundState = 2 && playerid(var(56)),prevstateno!=[5110,5120]
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = StateType != A && (ceil(facing*(playerid(var(56)),Pos X-Pos X))+fvar(35)*6 >0 || p2movetype = A)
triggerall = playerid(var(56)),StateType != L
triggerall = playerid(var(56)),stateno >=200
triggerall = P2BodyDist Y+floor(9*(fvar(34))+(9*(9+1)/2)*fvar(38))>=-80
Triggerall = playerid(var(56)),facing=facing
Triggerall = !playerid(var(56)),Ctrl && ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = playerid(var(56)),StateNo != [5100,5270]
triggerall = playerid(var(56)),time >= 6+random%(1+var(59)) || (fvar(39)=[700,701]) || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = (playerid(var(56)),StateNo = [200,649]) || playerid(var(56)),MoveType = A || helper(50000+id),fvar(11)=playerid(var(56)),stateno || (helper(50000+id),fvar(11)/100)=(playerid(var(56)),stateno/100)
triggerall = random <= var(59)*105 && ((var(54)&127)=[1,(life*0.2)]) || stateno = 700 ;|| var(59)>=6
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
trigger1 = playerid(var(56)),AnimTime<=-13-ceil((P2BodyDist X>60)*(P2BodyDist X-60)/(const(velocity.run.fwd.x)+.0))
trigger1 = playerid(var(56)),hitdefattr=SCA,NA,SA || playerid(var(56)),stateno =[200,699]
trigger1 = P2bodydist X+fvar(35)*(13+ceil((P2BodyDist X>60)*(P2BodyDist X-60)/(const(velocity.run.fwd.x)+.0))) > 180
trigger2 = playerid(var(56)),AnimTime<=-23
trigger2 = playerid(var(56)),hitdefattr=SCA,NA,SA,HA || playerid(var(56)),stateno =[200,1999]
trigger2 = P2bodydist X > 160
trigger3 = playerid(var(56)),AnimTime<=-18
trigger3 = playerid(var(56)),hitdefattr=SCA,NA,SA,HA || playerid(var(56)),stateno =[200,1999]
trigger3 = P2bodydist X > 80 && playerid(var(56)),p2bodydist x>p2bodydist x
trigger4 = P2bodydist X >160 && playerid(var(56)),p2bodydist x>p2bodydist x

[State -1,]
type = VarSet
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper(50000+id)
trigger1 = abs(helper(50000+id),var(49))!=playerid(var(56)),prevstateno || helper(50000+id),var(49)=0
trigger1 = abs(helper(50000+id),var(50))!=playerid(var(56)),prevstateno || helper(50000+id),var(50)=0
trigger1 = playerid(var(56)),prevstateno = 52 || movetype = A || stateno = 21 || stateno = 150 || stateno = 151
trigger1 = fvar(39)=700 || fvar(39)=700.5
trigger2 = abs(helper(50000+id),var(49))!=playerid(var(56)),prevstateno || abs(helper(50000+id),var(50))!=playerid(var(56)),prevstateno
trigger2 = playerid(var(56)),prevstateno = 52 || movetype = A || playerid(var(56)),ctrl
trigger2 = fvar(39)=700 || fvar(39)=700.5 || fvar(39)=700.9
trigger3 = fvar(39)=-500
trigger3 = movetype = H || movecontact || stateno = [0,155]
trigger4 = stateno!=100 || (playerid(var(56)),stateno=[0,155]) || playerid(var(56)),movetype=H
trigger4 = fvar(39)=700.9
fvar(39) = 0

;---------------------------------- 切り替えし ----------------------------------------------
;フーリー・クーリー
[State -1, フーリー・クーリー]
type = ChangeState
value = 3100
triggerall = var(59)>=4
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = power >= 3000
triggerall = fvar(39)!=700
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = (playerid(var(56)),hitdefattr=SCA,AA,AT,AP && time>18-(6*(life<666))-(6*(life<333))) || (playerid(var(56)),stateno = [200,699])
triggerall = !playerid(var(56)),Ctrl && playerid(var(56)),MoveType = A && playerid(var(56)),stateType != A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno!=[150,155]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(31)!=playerid(var(56)),stateno
triggerall = helper(50000+id),var(59)=0
triggerall = (playerid(var(56)),prevstateno!=[150,155]) || helper(60000+id),var(1)>=0
triggerall = playerid(var(56)),hitdefattr=SCA,AA,AT || playerid(var(56)),time>=3 ;|| (playerid(var(56)),stateno = [200,699])
triggerall = (p2dist y = [-10,10]) && fvar(34)=0
triggerall = p2bodydist x+fvar(35)*13 =[0,55+(15.2*5)]
triggerall = P2life>=((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*200.0) || p2bodydist x+fvar(35)*2 >25
triggerall = P2life<((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*550.0) || (random<=var(59)*33 && ((var(54)&127)=[1,10])) || (movetype = A && !ctrl)
triggerall = playerid(var(56)),AnimTime<=-13-ceil((P2BodyDist X>55)*(P2BodyDist X-55)/15.3)
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = statetype != A
Trigger1 = ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||stateno = [10,12] 
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 215 && movecontact
trigger4 = stateno = 230 && movecontact
trigger5 = stateno = 240 && AnimElemtime(9) < 0 && movecontact
trigger6 = stateno = 245 && movecontact
trigger7 = stateno = 400 && movecontact
trigger8 = stateno = 410 && movecontact
trigger9 = stateno = 440 && movecontact
trigger10 = stateno = 300 && movecontact
trigger11 = stateno = 310 && movecontact
trigger12 = stateno = 315 && AnimElemtime(14) < 0 && movecontact

;フーリー・クーリー
[State -1, フーリー・クーリー]
type = ChangeState
value = 3100
triggerall = var(59)>=5
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = power >= 3000
triggerall = fvar(39)!=700
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = !playerid(var(56)),Ctrl && playerid(var(56)),MoveType = A && playerid(var(56)),stateType != A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno!=[150,155]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(31)!=playerid(var(56)),stateno
triggerall = helper(50000+id),var(59)=0
triggerall = (playerid(var(56)),prevstateno!=[150,155]) || helper(60000+id),var(1)>=0
triggerall = (p2dist y = [-10,10]) && fvar(34)=0
triggerall = p2bodydist x+fvar(35)*13 =[0,55+(15.2*5)]
triggerall = P2life>=((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*200.0) || p2bodydist x+fvar(35)*2 >25
triggerall = P2life<((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*550.0) || (random<=var(59)*33 && ((var(54)&127)=[1,10])) || (movetype = A && !ctrl)
triggerall = playerid(var(56)),AnimTime<=-13-ceil((P2BodyDist X>55)*(P2BodyDist X-55)/15.3)
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
triggerall = statetype != A
Triggerall = ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||stateno = [10,12] 
trigger1 = ((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
trigger2 = (abs(helper(50000+id),fvar(29)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(30)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(31)) = playerid(var(56)),stateno)


;ハイブリット・レインボー
[State -1, ハイブリット・レインボー]
type = ChangeState
value = 2100
triggerall = var(59)>=4
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = power >= 1000
triggerall = fvar(39)!=700
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = (playerid(var(56)),hitdefattr=SCA,AA,AT,AP && time>18) || (playerid(var(56)),stateno = [200,699])
triggerall = !playerid(var(56)),Ctrl && playerid(var(56)),MoveType = A && playerid(var(56)),stateType != A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno!=[150,155]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(31)!=playerid(var(56)),stateno
triggerall = helper(50000+id),var(59)=0
triggerall = (playerid(var(56)),prevstateno!=[150,155]) || helper(60000+id),var(1)>=0
triggerall = playerid(var(56)),hitdefattr=SCA,NA,SA,NT,ST || playerid(var(56)),time>=12 || (playerid(var(56)),stateno = [200,699])
triggerall = (p2dist y = [-10,10]) && fvar(34)=0
triggerall = p2bodydist x+fvar(35)*3 <=35
triggerall = P2life<((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*ifelse(power>=3000,520.0,250.0)) || (random<=var(59)*25 && ((var(54)&127)=[11,15+(helper(50000+id),var(37)*.5)])) || (movetype = A && !ctrl)
triggerall = playerid(var(56)),AnimTime<=-3
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = statetype != A
Trigger1 = ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||stateno = [10,12] 
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 215 && movecontact
trigger4 = stateno = 230 && movecontact
trigger5 = stateno = 240 && AnimElemtime(9) < 0 && movecontact
trigger6 = stateno = 245 && movecontact
trigger7 = stateno = 400 && movecontact
trigger8 = stateno = 410 && movecontact
trigger9 = stateno = 440 && movecontact
trigger10 = stateno = 300 && movecontact
trigger11 = stateno = 310 && movecontact
trigger12 = stateno = 315 && AnimElemtime(14) < 0 && movecontact
trigger13 = stateno = 1300 && AnimElemtime(9) < 0 && movecontact
trigger14 = stateno = 1350 && AnimElemtime(9) < 0 && movecontact

;強ラスト・ダイナソー
[State -1, 強ラスト・ダイナソー]
type = ChangeState
value = 1350
triggerall = var(59)>=4
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = fvar(39)!=700
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = (playerid(var(56)),hitdefattr=SCA,AA,AT,AP && time>18) || (playerid(var(56)),stateno = [200,699]) || movetype=A
triggerall = !playerid(var(56)),Ctrl && playerid(var(56)),MoveType = A && (playerid(var(56)),stateType != A||movetype=A)
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno!=[150,155]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(31)!=playerid(var(56)),stateno
triggerall = helper(50000+id),var(59)=0
;triggerall = (playerid(var(56)),prevstateno!=[150,155]) || helper(60000+id),var(1)>=0
triggerall = playerid(var(56)),hitdefattr=SCA,NA,SA,NT,ST || playerid(var(56)),time>=12 || (playerid(var(56)),stateno = [200,699])||movetype=A
triggerall = (p2dist y = [-10,10]) && fvar(34)=0
triggerall = p2bodydist x+fvar(35)*14 <=45+((movetype=A)*10)
triggerall = P2life<((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*120.0) || (random<=var(59)*22 && ((var(54)&127)=[21-helper(50000+id),fvar(33),40+(helper(50000+id),var(37)*.5)])) || (movetype = A && !ctrl)
triggerall = playerid(var(56)),AnimTime<=-14 || (movetype=A&&playerid(var(56)),AnimTime>1)
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = statetype != A
Trigger1 = ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||stateno = [10,12] 
trigger2 = stateno = 200 && movecontact
trigger3 = stateno = 215 && movecontact
trigger4 = stateno = 230 && movecontact
trigger5 = stateno = 240 && AnimElemtime(9) < 0 && movecontact
trigger6 = stateno = 245 && movecontact
trigger7 = stateno = 400 && movecontact
trigger8 = stateno = 410 && movecontact
trigger9 = stateno = 440 && movecontact
trigger10 = stateno = 300 && movecontact
trigger11 = stateno = 310 && movecontact
trigger12 = stateno = 315 && AnimElemtime(14) < 0 && movecontact

[State -1, Throw]
type = ChangeState
value = 800+(5*(helper(60000+id),fvar(38)*facing>helper(60000+id),fvar(37)*facing))
triggerall = var(59)>=4
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = p2stateno != [150,159]
triggerall = fvar(39)!=700
triggerall = (var(54)&262144)=0
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = (playerid(var(56)),hitdefattr=SCA,AA,AT,AP && time>18) || (playerid(var(56)),stateno = [200,699])
triggerall = !playerid(var(56)),Ctrl && playerid(var(56)),MoveType = A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno!=[150,155]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(31)!=playerid(var(56)),stateno
triggerall = helper(50000+id),var(59)=0
triggerall = (playerid(var(56)),prevstateno!=[150,155]) || helper(60000+id),var(1)=0
triggerall = playerid(var(56)),hitdefattr=SCA,NA,SA,NT,ST || playerid(var(56)),time>=12 ;|| (playerid(var(56)),stateno = [200,699])
triggerall = (p2dist y = [-10,10]) && fvar(34)=0
triggerall = stateno != 100
triggerall = p2bodydist X < 15
triggerall = p2statetype != A && p2movetype != H
triggerall = movetype != A || (time>playerid(var(56)),time && (playerid(var(56)),stateno = [200,699]))
triggerall = P2life<((100.0)/(playerid(var(56)),Const(data.defence)+.0)*100.0) || (random<=var(59)*18 && ((var(54)&127)=[51-helper(50000+id),fvar(33)-(15*(backedgebodydist<5)),70+(helper(50000+id),var(37)*.7)])) || (movetype = A && !ctrl)
triggerall = playerid(var(56)),AnimTime<=-1-(Random%var(59))+(Random%(8-var(59))) && playerid(var(56)),statetype != A
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = statetype != A
Trigger1 = ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||stateno = [10,12] 

;しゃがみ弱キック
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59)>=4
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = fvar(39)!=700
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = (playerid(var(56)),hitdefattr=SCA,AA,AT,AP && time>18) || (playerid(var(56)),stateno = [200,699])
triggerall = !playerid(var(56)),Ctrl && playerid(var(56)),MoveType = A && playerid(var(56)),stateType = S
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno!=[150,155]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(31)!=playerid(var(56)),stateno
triggerall = helper(50000+id),var(59)=0
triggerall = (playerid(var(56)),prevstateno!=[150,155]) || helper(60000+id),var(1)=0
triggerall = playerid(var(56)),hitdefattr=S,NA,SA,NT,ST || playerid(var(56)),time>=12 || (playerid(var(56)),stateno = [200,699])
triggerall = (p2dist y = [-10,10]) && fvar(34)=0
triggerall = p2bodydist x+fvar(35)*4 <=50+((movetype=A)*10)
triggerall = (random<=var(59)*22 && ((var(54)&127)=[61-(25*(stateno=100||prevstateno=100)),80+(helper(50000+id),var(37)*.5)])) || (movetype = A && !ctrl)
triggerall = playerid(var(56)),AnimTime<=-4
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = statetype != A
Trigger1 = ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||stateno = [10,12] 
trigger2 = stateno = 430 && movecontact

[state -1,バックステップ]
type=changestate
value=700
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = RoundState=2
triggerall = Statetype != A
triggerall = stateno != [150,152]
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
TriggerAll = playerid(var(56)),Alive
triggerall = numhelper && ((playerid(var(56)),facing!=facing) || p2dist x<0)
triggerall = numhelper(50000+id)
triggerall = ((var(54)&127)=[1,var(59)*10]) || (var(59)>6 && life<250)
;対投げ
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) = [-30,160]
triggerall = p2dist y >= -80
Triggerall = (playerid(var(56)),HitDefAttr=A,NT,ST,HT)
triggerall = helper(50000+id),var(58)=0
Triggerall = playerid(var(56)),MoveType=A
triggerall = Random<=var(59)*ifelse(life<=200,180,80)||(var(59)>6)
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = (ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||(stateno=[10,12]))

[state -1,バックステップ]
type=changestate
value=ifelse(p2bodydist x<45&&playerid(var(56)),AnimTime<=-16&&random%3!=0,1450,ifelse(p2bodydist x<45&&playerid(var(56)),AnimTime<=-14&&random%2!=0,1350,105))
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = RoundState=2
triggerall = Statetype != A
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
TriggerAll = playerid(var(56)),Alive
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = ((var(54)&127)=[1,var(59)*10]) || (var(59)>6 && life<250)
;対投げ
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) = [-30,160]
triggerall = p2dist y >= -80
Triggerall = (playerid(var(56)),HitDefAttr=SC,NT,ST,HT)
triggerall = helper(50000+id),var(58)=0
Triggerall = playerid(var(56)),MoveType=A
triggerall = Random<=var(59)*ifelse(life<=200,180,80)||(var(59)>6)
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
trigger1 = (ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||(stateno=[10,12]))

;前緊急回避
[State -1, T S]
type = ChangeState
value = 700
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != [150,152]
triggerall = RoundState=2
triggerall = Statetype != A
triggerall = playerid(var(56)),statetype != L && !playerid(var(56)),HitDefAttr = SCA,AT
TriggerAll = playerid(var(56)),statetype != A || playerid(var(56)),HitDefAttr = SCA,HA
TriggerAll = playerid(var(56)),Alive && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(36)=0 || helper(60000+id),var(1)<0
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)||helper(50000+id),var(58)>=1
Triggerall = (ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||(stateno=[10,12]))
trigger1 = (random<=var(59)*80 && (var(54)&127)=[50-(15*(backedgebodydist<5)),ifelse(time<=2,90,80)]) || (helper(60000+id),var(1)<=-1000 && !inguarddist && p2dist x<60)
trigger1 = (playerid(var(56)),movetype = A || InGuardDist) && p2bodydist x<120
Trigger1 = (playerid(var(56)),AnimTime=[-36,-31+(3*p2bodydist x=[45,100])]) || (ceil(facing*(playerid(var(56)),Pos X-Pos X))<70&&(playerid(var(56)),AnimTime<=-29))
Trigger1 = playerid(var(56)),facing + facing = 0 && p2stateno>155
Trigger1 = helper(50000+id),var(58)=0 || ceil(facing*(playerid(var(56)),Pos X-Pos X))<60 || playerid(var(56)),HitDefAttr = SCA,AA,AP || (playerid(var(56)),stateno = [200,699])
trigger1 = helper(50000+id),var(27)!=playerid(var(56)),stateno || helper(50000+id),var(27)=0
trigger1 = helper(50000+id),var(28)!=playerid(var(56)),stateno || helper(50000+id),var(28)=0
trigger1 = fvar(39):=700
trigger2 = Random<=var(59)*100*ifelse(movetype=H&&var(59)>=7,2,1)
;Trigger2 = helper(50000+id),inguarddist || var(59)<5
trigger2 = p2bodydist x <=80
trigger2 = playerid(var(56)),Time>=var(55)||(var(59)>5)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
Trigger2 = playerid(var(56)),HitDefAttr = SCA,HA
trigger2 = fvar(35) <=-3 ;|| movetype = A
trigger3 = random<=var(59)*20 && ((var(54)&127)=[40,ifelse(time<=2,90,80)]) || helper(60000+id),var(1)<=-1000
Trigger3 = helper(50000+id),inguarddist || var(59)<5
trigger3 = helper(50000+id),var(58)>=1 ;|| (playerid(var(56)),numhelper>helper(50000+id),var(54))
trigger3 = helper(50000+id),Pos y=Pos y+999 && p2bodydist x>=160
trigger3 = 0;helper(60000+id),var(21)=0 || (helper(60000+id),var(47)=0 && helper(60000+id),var(48)=0 && helper(60000+id),var(49)=0 && helper(60000+id),var(50)=0)
trigger4 = random<=var(59)*40 && p2stateno>155 && (var(54)&127)=[50,ifelse(time<=2,90,80)]
trigger4 = p2bodydist x>=160
Trigger4 = (playerid(var(56)),AnimTime=[-24+(6*p2bodydist x>100),-22+(6*p2bodydist x>100)])
Trigger4 = playerid(var(56)),facing + facing = 0
Trigger4 = playerid(var(56)),HitDefAttr = SCA,AA,AP || (playerid(var(56)),stateno = [200,699])

;緊急回避前
[State -1, 対飛び道具緊急回避前]
type = ChangeState
value = 700
triggerall = var(59)>=3
triggerall = roundstate=2
triggerall = alive
triggerall = stateno != [150,152]
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(36)=0 || helper(60000+id),var(6)=[25,27]
triggerall = helper(50000+id),var(59)=0 && (life>500 || life<10 || helper(50000+id),var(37)>=100) || (helper(60000+id),var(6)=[25,27]) || helper(60000+id),var(1)<=-1000
triggerall = p2bodydist x+fvar(35)*4 >=90 || playerid(var(56)),AnimTime<=-28 || playerid(var(56)),statetype=A || helper(50000+id),var(37)>=360
triggerall = ((var(54)&127)>=80-((life*.1)*.5)) || life<10 || playerid(var(56)),AnimTime<=-28 || (playerid(var(56)),statetype = A && fvar(35)>=0) || (helper(60000+id),var(6)=[7,9]) || (helper(60000+id),var(6)=0) || (helper(60000+id),var(6)=[25,27]) 
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)||p2movetype!=A
triggerall = (ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||(stateno=[10,12]))
trigger1 = helper(60000+id),var(48)-((helper(60000+id),var(50))*17) = [-120,120] ;Y
trigger1 = helper(60000+id),var(47)-((helper(60000+id),var(49))*1) >= -50 ;X
trigger1 = helper(60000+id),var(47)-((helper(60000+id),var(49))*17) <= -20 ;X
trigger2 = helper(60000+id),var(1)<=-1000 || p2bodydist x>180
trigger2 = helper(50000+id),var(58)>0
trigger2 = helper(50000+id),var(51)>1
trigger2 = (p2dist x-helper(50000+id),fvar(13)-15)-helper(50000+id),fvar(14)*17 <= 0
trigger2 = (p2dist x-helper(50000+id),fvar(13)-15) > -30

;緊急回避前
[State -1, 対飛び道具緊急回避前]
type = ChangeState
value = 700
triggerall = var(59)>=3
triggerall = roundstate=2
triggerall = alive
triggerall = stateno != [150,152]
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(50000+id),var(36)=0 || helper(60000+id),var(6)=[25,27]
triggerall = helper(50000+id),var(59)=0 && (life>500 || life<10 || helper(50000+id),var(37)>=100)
triggerall = p2bodydist x+fvar(35)*4 >=90 || playerid(var(56)),AnimTime<=-28 || playerid(var(56)),statetype=A || helper(50000+id),var(37)>=100
;triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)||p2movetype!=A
triggerall = (ctrl || (stateno = [120,140])||(stateno=[21,22])||stateno=100||(stateno=[10,12]))
trigger1 = helper(60000+id),var(48)-((helper(60000+id),var(50))*20) = [-120,120] ;Y
trigger1 = helper(60000+id),var(47)-((helper(60000+id),var(49))*1) >= -50 ;X
trigger1 = helper(60000+id),var(47)-((helper(60000+id),var(49))*20) <= -50 ;X
trigger2 = helper(60000+id),var(1)<=-1000 || p2bodydist x>180
trigger2 = helper(50000+id),var(58)>0
trigger2 = helper(50000+id),var(51)>1
trigger2 = (p2dist x-helper(50000+id),fvar(13)-15)-helper(50000+id),fvar(14)*17 <= 0
trigger2 = (p2dist x-helper(50000+id),fvar(13)-15) > -50



;後緊急回避
[State -1, T S]
type = ChangeState
value = ifelse(random%2=0,700,710)
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = RoundState=2
triggerall = Statetype != A
triggerall = stateno != [150,152]
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
TriggerAll = playerid(var(56)),Alive
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
Triggerall = (ctrl || (stateno = [120,149])||(stateno=[21,22])||stateno=100||(stateno=[10,12]))
trigger1 = ceil(facing*(playerid(var(56)),Pos X-Pos X)) > 60 && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
Trigger1 = helper(50000+id),var(2)=1 && playerid(var(56)),facing!=facing
Trigger1 = P2BodyDist X<=160
trigger1 = helper(50000+id),var(58)=0
trigger1 = (ifelse(facing=1,helper(60000+id),fvar(37),helper(60000+id),fvar(38))>=80)
Trigger1 = playerid(var(56)),MoveType=A
trigger1 = Random<=var(59)*ifelse(life<=200,120,60)||(var(59)>6)||helper(50000+id),fvar(34)-time>=var(55)
;上からHELPER
trigger2 = prevstateno != [900,905]
trigger2 = (helper(60000+id),var(47))=[-80,80]
trigger2 = (helper(60000+id),var(48))-((helper(60000+id),var(50))) > 0 && helper(60000+id),var(22)=0
trigger2 = (helper(60000+id),var(48))-((helper(60000+id),var(50))*10) <= 0 || (helper(60000+id),var(48))-((helper(60000+id),var(50))*20) <= 0
trigger2 = (var(54)&127)<=ifelse(life<500,75,30) || helper(60000+id),var(1)<0 || helper(60000+id),var(5)>=3000 || (helper(60000+id),var(6)=[25,27])
;前から遅いHELPER
trigger3 = helper(60000+id),var(5)<-1000 || life>666 || (helper(60000+id),var(48))-((helper(60000+id),var(50))*20) <= 0
trigger3 = (playerid(var(56)),backedgebodydist + backedgebodydist)>40
trigger3 = (ifelse(facing=1,helper(60000+id),fvar(37),helper(60000+id),fvar(38))>=100)
trigger3 = helper(60000+id),var(49)>0
trigger3 = helper(60000+id),var(48) = [0,100]
trigger3 = helper(60000+id),var(47)-((helper(60000+id),var(49))) = [-10,80]
trigger3 = (helper(60000+id),var(49)) = [-1,1]
;後ろからHELPER
trigger4 = helper(60000+id),var(5)<-1000 || life>666
trigger4 = helper(60000+id),var(49)<0
trigger4 = helper(60000+id),var(48) = [0,100]
trigger4 = helper(60000+id),var(47)-((helper(60000+id),var(49))) <= 10
trigger4 = helper(60000+id),var(47)-((helper(60000+id),var(49))*15) > 10
trigger5 = Random<=var(59)*100*ifelse(movetype=H&&var(59)>=7,2,1)
;Trigger5 = helper(50000+id),inguarddist || var(59)<5
trigger5 = p2dist x <=0
trigger5 = playerid(var(56)),Time>=var(55)||(var(59)>5)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>5 && time <= 1)
Trigger5 = playerid(var(56)),HitDefAttr = SCA,HA
trigger5 = fvar(35) >=3

[State -1, T S]
type = ChangeState
value = 710
triggerall = var(59)>=3
triggerall = roundstate=2 && statetype!=A
triggerall = alive
triggerall = stateno != [150,152]
triggerall = !IsHelper && playeridexist(var(56))
triggerall = stateno !=[100,106]
triggerall = fvar(39)!=700
triggerall = Statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),statetype != L && playerid(var(56)),movetype != H
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = p2dist x>0
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = p2bodydist x+fvar(35)*4 >=20
;triggerall = ((var(54)&127)=[ifelse(life>750,1,ifelse(life>500,51,76)),100])
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>5)|| (((PrevStateNo=[130,159])||(PrevStateNo=[5000,5270]))&& var(59)>4 && time <= 1) || p2movetype != A
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100) || ((stateno=5001 || stateno=5011 || stateno=151 || stateno=153) && var(59)>=5 && hitover && time>0 && !ctrl) || ((stateno=[200,449]) && movecontact)
triggerall = helper(60000+id),var(5)>=1000 || life>666
triggerall = (playerid(var(56)),backedgebodydist + backedgebodydist)>40
trigger1 = (ifelse(facing=1,helper(60000+id),fvar(37),helper(60000+id),fvar(38))>=100)
trigger1 = helper(60000+id),var(49)>0
trigger1 = helper(60000+id),var(48) = [0,100]
trigger1 = helper(60000+id),var(47)-((helper(60000+id),var(49))) = [-10,80]
trigger1 = (helper(60000+id),var(49)) = [-1,2]

;強ファニーバニー
[State -1, 強ファニーバニー]
type = ChangeState
value = 1150
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState=2
triggerall = Statetype != A
triggerall = playerid(var(56)),statetype != L ;&& playerid(var(56)),movetype != H
TriggerAll = playerid(var(56)),statetype != A
TriggerAll = playerid(var(56)),Alive && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(60000+id),var(1)>=-500 && (helper(60000+id),var(6)!=[25,27])
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
triggerall = random<=var(59)*200 && p2stateno>155 && !(playerid(var(56)),hitdefattr=S,AA)
trigger1 = playerid(var(56)),movetype = A || InGuardDist ||(abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno)
Trigger1 = playerid(var(56)),AnimTime<=-35
trigger1 = playerid(var(56)),Time>=var(55)
trigger1 = p2bodydist x = [130,160]
trigger1 = P2BodyDist Y>=-60
trigger1 = ((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
trigger1 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger1 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
trigger1 = helper(50000+id),fvar(34) <= time+5
trigger1 = (var(54)&127)<=25+(life*.01) || life<20
trigger2 = playerid(var(56)),movetype = A || InGuardDist ||(abs(helper(50000+id),fvar(29)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(30)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(31)) = playerid(var(56)),stateno)
Trigger2 = playerid(var(56)),AnimTime<=-35
trigger2 = playerid(var(56)),Time>=var(55)
trigger2 = p2bodydist x = [130,160]
trigger2 = P2BodyDist Y>=-60
trigger2 = (abs(helper(50000+id),fvar(29)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(30)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(31)) = playerid(var(56)),stateno)
trigger2 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger2 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
;trigger2 = helper(50000+id),fvar(34) <= time+5
trigger2 = (var(54)&127)<=25+(life*.01) || life<20

[State -1, ジャンプ]
type = ChangeState
value = 40
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState=2
triggerall = Statetype != A
triggerall = playerid(var(56)),statetype != L ;&& playerid(var(56)),movetype != H
TriggerAll = playerid(var(56)),statetype != A||life>666
TriggerAll = playerid(var(56)),Alive && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = numhelper
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = helper(60000+id),var(1)>=-500 && (helper(60000+id),var(6)!=[25,27])
triggerall = playerid(var(56)),Time>=var(55)||(var(59)>6)
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))
triggerall = random<=var(59)*200 && p2stateno>155 && !(playerid(var(56)),hitdefattr=S,AA)
triggerall = playerid(var(56)),movetype = A || InGuardDist ||(abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno)
trigger1 = !((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
Trigger1 = playerid(var(56)),AnimTime<=-ifelse(helper(50000+id),var(37)>400,30,ifelse(helper(50000+id),var(37)>300,40,50))
trigger1 = helper(50000+id),var(37)>0 && playerid(var(56)),statetype != S
trigger1 = p2bodydist x = (40,80)
trigger1 = helper(50000+id),fvar(33)=0
trigger1 = (var(54)&127)<=10+(helper(50000+id),var(37)*.3)
trigger1 =0; fvar(39):=ifelse(random%2=0,2.7,3.7)
trigger2 = !((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
Trigger2 = playerid(var(56)),AnimTime<=-ifelse(helper(50000+id),var(37)>500,30,ifelse(helper(50000+id),var(37)>300,40,50))
trigger2 = helper(50000+id),var(37)>0 && playerid(var(56)),statetype != S
trigger2 = p2bodydist x = [80,100]
trigger2 = helper(50000+id),fvar(33)=0
trigger2 = (var(54)&127)<=10+(helper(50000+id),var(37)*.3)
trigger2 = fvar(39):=ifelse(playerid(var(56)),AnimTime<=-55,6.7,9.7)
trigger3 = !((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
Trigger3 = playerid(var(56)),AnimTime<=-ifelse(helper(50000+id),var(37)>400,40,ifelse(helper(50000+id),var(37)>180,45,55))
trigger3 = helper(50000+id),var(37)>0 && playerid(var(56)),statetype != S
trigger3 = p2bodydist x > 160
trigger3 = helper(50000+id),fvar(33)=0
trigger3 = (var(54)&127)<=10+(helper(50000+id),var(37)*.3)
trigger3 = fvar(39):=9.7
Trigger4 = playerid(var(56)),AnimTime<=-30
trigger4 = playerid(var(56)),Time>=var(55)
trigger4 = p2bodydist x = (55,80)
trigger4 = P2BodyDist Y>=-60
trigger4 = ((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
trigger4 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger4 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
trigger4 = helper(50000+id),fvar(34) <= time+5
trigger4 = (var(54)&127)<=30+(life*.01) || life<20
trigger4 = fvar(39):=6.7
Trigger5 = playerid(var(56)),AnimTime<=-34
trigger5 = playerid(var(56)),Time>=var(55)
trigger5 = p2bodydist x = [100,160]
trigger5 = P2BodyDist Y>=-60
trigger5 = ((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
trigger5 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger5 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
trigger5 = helper(50000+id),fvar(34) <= time+5
trigger5 = (var(54)&127)<=50+(life*.01) || life<20
trigger5 = fvar(39):=9.7
Trigger6 = playerid(var(56)),AnimTime=[-63,-38]
trigger6 = playerid(var(56)),Time>=var(55)
trigger6 = p2bodydist x >= 160
trigger6 = P2BodyDist Y>=-60
trigger6 = ((abs(helper(50000+id),var(52)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(53)) = playerid(var(56)),stateno) || (abs(helper(50000+id),var(54)) = playerid(var(56)),stateno))
trigger6 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger6 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
trigger6 = helper(50000+id),fvar(34) <= time+5
trigger6 = (var(54)&127)<=25+(life*.01) || life<20
trigger6 = fvar(39):=9.7

Trigger7 = playerid(var(56)),AnimTime<=-30
trigger7 = playerid(var(56)),Time>=var(55)
trigger7 = p2bodydist x = (55,80)
trigger7 = P2BodyDist Y>=-60
trigger7 = (abs(helper(50000+id),fvar(29)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(30)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(31)) = playerid(var(56)),stateno)
trigger7 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger7 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
;trigger7 = helper(50000+id),fvar(34) <= time+5
trigger7 = (var(54)&127)<=30+(life*.01) || life<20
trigger7 = fvar(39):=9.7
Trigger8 = playerid(var(56)),AnimTime<=-34
trigger8 = playerid(var(56)),Time>=var(55)
trigger8 = p2bodydist x = [100,160]
trigger8 = P2BodyDist Y>=-60
trigger8 = (abs(helper(50000+id),fvar(29)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(30)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(31)) = playerid(var(56)),stateno)
trigger8 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger8 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
;trigger8 = helper(50000+id),fvar(34) <= time+5
trigger8 = (var(54)&127)<=50+(life*.01) || life<20
trigger8 = fvar(39):=9.7
Trigger9 = playerid(var(56)),AnimTime=[-63,-38]
trigger9 = playerid(var(56)),Time>=var(55)
trigger9 = p2bodydist x >= 160
trigger9 = P2BodyDist Y>=-60
trigger9 = (abs(helper(50000+id),fvar(29)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(30)) = playerid(var(56)),stateno) || (abs(helper(50000+id),fvar(31)) = playerid(var(56)),stateno)
trigger9 = playerid(var(56)),stateno != 0 && playerid(var(56)),movetype = A
trigger9 = helper(60000+id),var(1)>=0 && playerid(var(56)),statetype != A
;trigger9 = helper(50000+id),fvar(34) <= time+5
trigger9 = (var(54)&127)<=25+(life*.01) || life<20
trigger9 = fvar(39):=9.7

[State -3,]
type = varset
triggerall = !IsHelper && time>1
triggerall = movetype=H || movetype = A || (stateno=[0,21]) || stateno = [800,805]
trigger1 = (fvar(39)=1.7) || (fvar(39)=2.7) || (fvar(39)=3.7) || (fvar(39)=4.7) || (fvar(39)=5.7) || (fvar(39)=6.7)
trigger2 = (fvar(39)=7.7) || (fvar(39)=8.7) || (fvar(39)=9.7) || (fvar(39)=-1.7) || (fvar(39)=-2.7) || (fvar(39)=-3.7)
fvar(39) = 0

;----------------------------------- 起き攻め -----------------------------------------------
;(var(54)&127)=[1,20]   : 前小JC
;(var(54)&127)=[21,40]  : 前Jサッド
;(var(54)&127)=[41,70]  : 屈みCorD
;(var(54)&127)=[71,77]  : 投げ(ブルースドライヴモンスター
;(var(54)&127)=[78,90]  : 投げ(弱ファニーバニー
;(var(54)&127)=[91,100] : 様子見

[state -1,バックステップ]
type=changestate
value=105
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21||stateno=100 || stateno = 1 || (stateno = [10,12])
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = p2movetype != A && playerid(var(56)),movetype != A
Triggerall = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
trigger1 = (var(54)&524288)!=0
trigger1 = ((var(54)&127)=[41,70])
Trigger1 = P2BodyDist X = [-20,150]
Trigger1 = (playerid(var(56)),Anim=[5120,5121]) || helper(50000+id),var(59)=2
trigger2 = life<222
trigger2 = ((var(54)&127)=[41,55])
Trigger2 = P2BodyDist X = [-20,150]
Trigger2 = (playerid(var(56)),Anim=[5120,5121]) || helper(50000+id),var(59)=2
trigger3 =0; helper(50000+id),var(59)=2
trigger3 = ((var(54)&127)!=[71,90])
trigger3 = p2bodydist x=[-10,35]
Trigger3 = P2BodyDist X = [-20,150]

;弱ブルースドライヴモンスター
[State -1, 弱ブルースドライヴモンスター]
type = ChangeState
value = 1450
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
Trigger1 = helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X-fvar(35)*ifelse((facing=playerid(var(56)),facing)&&(Frontedgebodydist<3)||(facing!=playerid(var(56)),facing)&&(backedgebodydist<3),0,16)=[-5,50]
trigger1 = ((var(54)&127)=[71,90])
Trigger1 = playerid(var(56)),AnimTime >= -14
trigger1 = fvar(39):=5120.1

;ジャンプ
[state -3,jump]
Type = ChangeState
value = 40
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21||stateno=100 || stateno = 1 || (stateno = [10,12])
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = p2movetype != A && playerid(var(56)),movetype != A
Triggerall = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
trigger1 = ((var(54)&127)=[1,20])
Trigger1 = P2BodyDist X = [-10,150]
Trigger1 = (playerid(var(56)),Anim=[5120,5121]) || helper(50000+id),var(59)=2
Trigger1 = playerid(var(56)),AnimTime >= -21-helper(50000+id),var(59)
Trigger1 = playerid(var(56)),AnimTime < -4
trigger1 = fvar(39):=ifelse(p2bodydist x<20,2.11,ifelse(p2bodydist x>120,-3.11,3.11))
trigger2 = (var(54)&127)=[21,40]
Trigger2 = P2BodyDist X = [-10,100]
Trigger2 = (playerid(var(56)),Anim=[5120,5121]) || helper(50000+id),var(59)=2
Trigger2 = playerid(var(56)),AnimTime >= -34-helper(50000+id),var(59)
Trigger2 = playerid(var(56)),AnimTime < -4
trigger2 = fvar(39):=ifelse(p2bodydist x>50-random%20,9.12,6.12)

;ジャンプ強パンチ
[State -1, Jump Strong Punch]
type = ChangeState
value = 610
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (stateno = [120,140])
Trigger1 = vel y >=0
Trigger1 = P2BodyDist X-(vel x*9) <= 40 ;&& p2dist y <= 60
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,10+random%25])
trigger1 = fvar(39)=3.11 || fvar(39)=2.11 || fvar(39)=-3.11 || fvar(39)=1.11
trigger1 = fvar(39):=0 || 1

;斜めジャンプ強キック
[State -1, Jump Strong Kick]
type = ChangeState
value = 645
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = vel X != 0
triggerall = ctrl || (stateno = [120,140])
Trigger1 = vel y >=0
Trigger1 = P2BodyDist X-(vel x*10) <= 60 ;&& p2dist y <= 60
trigger1 = ((Pos Y*-1)-floor(10*(vel Y)+(10*(10+1)/2)*const(movement.yaccel))=[0,10+random%25])
trigger1 = fvar(39)=3.11 || fvar(39)=2.11 || fvar(39)=-3.11 || fvar(39)=1.11
trigger1 = fvar(39):=0 || 1

;サッド・サッド・キディ
[State -1, サッド・サッド・キディ]
type = ChangeState
value = ifelse(playerid(var(56)),BackEdgeBodyDist<=0,610,320)
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (stateno = [120,140])
Trigger1 = vel y >=0
Trigger1 = P2BodyDist X-(vel x*9)<=0 ;&& p2dist y <= 60
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,10+random%25])
trigger1 = fvar(39)=6.12
trigger1 = fvar(39):=0 || 1
Trigger2 = vel y >=0
Trigger2 = P2BodyDist X-(vel x*9)<=0 ;&& p2dist y <= 60
trigger2 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,30+random%25])
trigger2 = fvar(39)=9.12
trigger2 = fvar(39):=0 || 1

;しゃがみ弱キック
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
Trigger1 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X < 51 ;&& (P2BodyDist X >= 30 || (var(54)&127)%2=0)
trigger1 = ((var(54)&127)=[41,70])
Trigger1 = playerid(var(56)),AnimTime = [-1-helper(50000+id),var(59),-1]
trigger1 = fvar(39):=5120.1
Trigger2 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2 ;|| playerid(var(56)),stateno != [5000,5210]
Trigger2 = P2BodyDist X <= 30
Trigger2 = playerid(var(56)),AnimTime >= -1-helper(50000+id),var(59) && ((var(54)&127)!=[71,80])
trigger2 = (playerid(var(56)),AnimTime <= -1 && ((playerid(var(56)),Anim=[5120,5121])))
trigger2 = fvar(39):=5120.1

;しゃがみ強キック
[State -1, Crouching Strong Kick]
type = ChangeState
value = 440
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
triggerall = (life>525&&(var(54)&127)%2=0) || (playerid(var(56)),power=[1,999]) || (playerid(var(56)),power=playerid(var(56)),powermax&&playerid(var(56)),power=0)
Trigger1 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X < 46 ;&& (P2BodyDist X >= 30 || (var(54)&127)%2=0)
trigger1 = ((var(54)&127)=[41,70]) && (playerid(var(56)),power>=1000 || playerid(var(56)),power=1000)
Trigger1 = playerid(var(56)),AnimTime = [-5-helper(50000+id),var(59),-1]
trigger1 = fvar(39):=5120.1
Trigger2 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2 ;|| playerid(var(56)),stateno != [5000,5210]
Trigger2 = P2BodyDist X <= 30 || (((var(54)&127)=[41,70]) && P2BodyDist X < 46)
Trigger2 = playerid(var(56)),AnimTime >= -5-helper(50000+id),var(59) && ((var(54)&127)!=[71,80])
trigger2 = (playerid(var(56)),AnimTime <= -1 && ((playerid(var(56)),Anim=[5120,5121])))
trigger2 = fvar(39):=5120.1

;しゃがみ強パンチ
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
triggerall = (life>525&&(var(54)&127)%4<=0 + (playerid(var(56)),power=[1,999]) + (playerid(var(56)),power=playerid(var(56)),powermax&&playerid(var(56)),power=0))
Trigger1 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X < 51 ;&& (P2BodyDist X >= 30 || (var(54)&127)%2=0)
trigger1 = ((var(54)&127)=[41,70])
Trigger1 = playerid(var(56)),AnimTime = [-8-helper(50000+id),var(59),-1]
trigger1 = fvar(39):=5120.1
Trigger2 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2 ;|| playerid(var(56)),stateno != [5000,5210]
Trigger2 = P2BodyDist X <= 30
Trigger2 = playerid(var(56)),AnimTime >= -8-helper(50000+id),var(59) && ((var(54)&127)!=[71,80])
trigger2 = (playerid(var(56)),AnimTime <= -1 && ((playerid(var(56)),Anim=[5120,5121])))
trigger2 = fvar(39):=5120.1

;スリーピィヘッド
[State -1, スリーピィヘッド]
type = ChangeState
value = 310
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
Trigger1 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X < 93 && P2BodyDist X > 51
trigger1 = ((var(54)&127)=[41,70]) && life>500
Trigger1 = playerid(var(56)),AnimTime = [-14-(var(54)&127)%3-helper(50000+id),var(59),-12]
trigger1 = fvar(39):=5120.1

;弱ブルースドライヴモンスター
[State -1, 弱ブルースドライヴモンスター]
type = ChangeState
value = 1450
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
Trigger1 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X < 51 ;&& (P2BodyDist X >= 30 || (var(54)&127)%2=0)
trigger1 = ((var(54)&127)=[71,77])
Trigger1 = playerid(var(56)),AnimTime = [-3-helper(50000+id),var(59),-1]
trigger1 = fvar(39):=5120.1

;弱ファニーバニー
[State -1, 弱ファニーバニー]
type = ChangeState
value = ifelse(p2bodydist x<35,105,1100)
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && playerid(var(56)),stateno != 5201
triggerall = p2movetype != A && playerid(var(56)),movetype != A && playerid(var(56)),StateType != A
Trigger1 = ((playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),StateNo = [5120,5129])) || helper(50000+id),var(59)=2
Trigger1 = P2BodyDist X < 123 ;&& (P2BodyDist X >= 30 || (var(54)&127)%2=0)
trigger1 = ((var(54)&127)=[78,90])
Trigger1 = playerid(var(56)),AnimTime >= ifelse(p2bodydist x<35,-100,ifelse(p2bodydist x<100,-13,-26))
trigger1 = fvar(39):=1100
trigger2 = fvar(39)=1100
trigger2 = fvar(39):=0||1

[state -1,バックステップ]
type=changestate
value=105
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id) && p2stateno!=5201
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A && (ifelse(facing=-1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>60)
TriggerAll = (ctrl || (stateno = [120,149])||(stateno=[10,12])||stateno=21||stateno=100)
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = p2movetype != A && playerid(var(56)),movetype != A
Trigger1 = (playerid(var(56)),StateType = L || playerid(var(56)),stateno = 5120) && (playerid(var(56)),Stateno = 5120 || playerid(var(56)),anim = 5120) || helper(50000+id),var(59)=2 || (playerid(var(56)),StateNo = [5120,5129])
Trigger1 = P2BodyDist X < 70
Trigger1 = playerid(var(56)),AnimTime <= -1 && !((var(54)&127)=[60-ifelse(playerid(var(56)),power>=2000,15,ifelse(playerid(var(56)),power>=1000,5,0)),60])
trigger1 = ((var(54)&127)=[91,100]) ;|| (stateno!=100&&p2bodydist x<25&&((var(54)&127)=[51,100]) && playerid(var(56)),AnimTime >= -10)

[State -3, ]
type = ChangeState
value = ifelse(fvar(39)=0,700,40)
TriggerAll = var(59)>=4
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = roundstate=2 && statetype!=A
Triggerall = (ceil(facing*(playerid(var(56)),Pos X-Pos X))>0)
Triggerall = P2BodyDist X <= 30 && BackEdgeBodyDist<20
triggerall = p2movetype != A && playerid(var(56)),movetype != A
;trigger1 = ((var(54)&127)=[81,100]) || (var(54)&127)=[26,35]
Trigger1 = (ctrl || (stateno = [120,149])||(stateno=[10,12])||stateno=21||stateno=100)
trigger1 = playerid(var(56)),stateno = 5110 || ((playerid(var(56)),StateNo = [5120,5129]) && playerid(var(56)),AnimTime <= -24) || ((playerid(var(56)),StateNo = [5100,5101]) && p2bodydist x <50)|| (numtarget && (p2stateno = [1310,1320]))
trigger1 = fvar(39):=ifelse(random%4!=0,9,0)||1

;ジャンプ(対移動起き)
[State -1, a]
type = ChangeState
value = 40
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
TriggerAll = StateType != A
TriggerAll = (ctrl || (stateno = [120,149])||(stateno=[10,12])||stateno=21||stateno=100)
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && fvar(35)!=0
triggerall = p2movetype != A && playerid(var(56)),movetype != A
Triggerall = (playerid(var(56)),prevstateno = 5120)
Trigger1 = P2BodyDist X > 60 && (ifelse(facing=-1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>100) && fvar(35)<0 && fvar(35)>-5
trigger1 = fvar(39):=-1 || 1
Trigger2 = P2BodyDist X > 60 && !(ifelse(facing=-1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>100) && fvar(35)<0
trigger2 = fvar(39):=-3 || 1
Trigger3 = P2BodyDist X <= 60 && fvar(35)<0
trigger3 = fvar(39):=-3 || 1

[State -3,]
type = varset
triggerall = !IsHelper
triggerall = fvar(39)=800.5 || fvar(39)=800.6 || fvar(39)=800.7 || fvar(39)=2.63 || fvar(39)=3.63
trigger1 = movetype = H || p2bodydist x>65 || time>60 || stateno = 800 || stateno = 830 || p2stateno = [5000,5099]
Trigger2 = stateno = 800 || stateno = 830 || stateno = 860 || stateno = 900 || stateno = 2300 || stateno = 3400 || stateno = 10000
fvar(39) = 0

[state -1]
type = varset
triggerall = !IsHelper && playeridexist(var(56))
trigger1 = fvar(39)=5120.1
trigger1 = (movecontact || movereversed) || (stateno=[0,155]) || (stateno=[5000,5100))
trigger2 = fvar(39)=3.11 || fvar(39)=3.12 || fvar(39)=2.11 || fvar(39)=9.11 || fvar(39)=1.11
trigger2 = movecontact || movereversed || movetype = H || ((stateno=[0,21])&&time>3) ;|| playerid(var(56)),statetype = A
trigger3 = fvar(39)=5120.3
trigger3 = ((movecontact || movereversed) && ((stateno = 440 || prevstateno = 440) || (stateno = 430 || prevstateno = 430))) || stateno=[0,21]
trigger4 = fvar(39)=[5120.1,5120.3]
trigger4 = (stateno = [150,155]) || (playerid(var(56)),stateno = [5000,5100)) || stateno = 21 || (playerid(var(56)),stateno = [150,155])
trigger5 = fvar(39)=5120.2
trigger5 = (stateno = 320) || stateno = 645
trigger6 = fvar(39)=3.11 || fvar(39)=3.12 || fvar(39)=2.11 || fvar(39)=2.12 || fvar(39)=6.11 || fvar(39)=1.11 || fvar(39)=1.12 || fvar(39)=-3.11 || fvar(39)=-3.12 || fvar(39)=1.13 || fvar(39)=9.12|| fvar(39)=7.12
trigger6 = movetype=H
trigger7 = fvar(39)=1100
trigger7 = stateno = 1100 || movetype=H || p2movetype=H
FV = 39
value = 0
IgnoreHitPause = 1

[State -3,]
type = varset
triggerall = !IsHelper && time>1
triggerall = statetype = A || movetype=H
trigger1 = (fvar(39)=1) || (fvar(39)=2) || (fvar(39)=3) || (fvar(39)=4) || (fvar(39)=5) || (fvar(39)=6)
trigger2 = (fvar(39)=7) || (fvar(39)=8) || (fvar(39)=9) || (fvar(39)=-1) || (fvar(39)=-2) || (fvar(39)=-3)
fvar(39) = 0

;--------------------------------- 目押し・拾い ---------------------------------------------
;フーリー・クーリー
[State -1, フーリー・クーリー]
type = ChangeState
value = 3100
triggerall = var(59)>3
triggerall = alive
triggerall = power >= 3000
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100))
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H ;&& fvar(34)>0
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = P2life<((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*550.0) || p2bodydist x>60 || (var(54)&127)&7<=(power*.001) || power>=3000
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)||fvar(39)=30
trigger1 = (helper(50000+id),var(40))>0
trigger1 = p2dist y+floor((helper(50000+id),var(40))*(fvar(34))+((helper(50000+id),var(40))*((helper(50000+id),var(40))+1.0)/2)*fvar(38)) < -40 || helper(50000+id),var(32)=0
trigger1 = p2dist y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((helper(50000+id),var(40))*(fvar(34))+((helper(50000+id),var(40))*((helper(50000+id),var(40))+1.0)/2)*fvar(38)) = [-110,30]
trigger1 = p2dist y+floor((helper(50000+id),var(40))*(fvar(34))+((helper(50000+id),var(40))*((helper(50000+id),var(40))+1.0)/2)*fvar(38)) <= (playerid(var(56)),anim = 5050)*20
trigger1 = floor(fvar(37))>=13+helper(50000+id),var(40)-playerid(var(56)),gethitvar(hitshaketime)
trigger1 = p2bodydist x +(fvar(35)*(helper(50000+id),var(40))) < 55+ceil((fvar(37)>=13)*(fvar(37)-13)*(15.3-fvar(35)))
trigger1 = p2bodydist x +(fvar(35)*(helper(50000+id),var(40))) > 0 || p2dist y>-60
trigger1 = p2bodydist x +(fvar(35)*(helper(50000+id),var(40))) < 55+(15.2*5)
trigger2 = (helper(50000+id),var(40))<=0
trigger2 = floor(fvar(37))>=13+helper(50000+id),var(40)-playerid(var(56)),gethitvar(hitshaketime)
trigger2 = p2bodydist x < 55+ceil((fvar(37)>=13)*(fvar(37)-13)*(15.3-fvar(35))) && p2dist y >-60
trigger2 = p2bodydist x < 55+(15.2*5) && p2dist y >-50 && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-110,30]

;ハイブリット・レインボー
[State -1, ハイブリット・レインボー]
type = ChangeState
value = 2100
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = power >= 1000
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) || (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H ;&& fvar(34)>0
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = (((var(54)&122880)/8192)<=3)
triggerall = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*250) && power<3000
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)||fvar(39)=30
Triggerall = ((facing=playerid(var(56)),facing)&&(playerid(var(56)),Frontedgebodydist<3))||((facing!=playerid(var(56)),facing)&&(playerid(var(56)),backedgebodydist<3))
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((3-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((3-playerid(var(56)),gethitvar(hitshaketime))*((3-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-60
trigger1 = P2BodyDist Y+floor((3-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((3-playerid(var(56)),gethitvar(hitshaketime))*((3-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger1 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger1 = P2BodyDist Y+floor((3-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((3-playerid(var(56)),gethitvar(hitshaketime))*((3-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger1 = floor(fvar(37))>=3
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=3
trigger1 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,3)-playerid(var(56)),gethitvar(hitshaketime)) =[-20,40]
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>3
trigger2 = floor(fvar(37))>=3
trigger2 = (p2bodydist x = [-10,40]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-60,40]

;強ラスト・ダイナソー
[State -1, 強ラスト・ダイナソー]
type = ChangeState
value = 1350
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) || (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H ;&& fvar(34)>0
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = (((var(54)&122880)/8192)<=7)
;triggerall = fvar(34)>0 || movecontact
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)||fvar(39)=30
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((14-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((14-playerid(var(56)),gethitvar(hitshaketime))*((14-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-60
trigger1 = P2BodyDist Y+floor((14-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((14-playerid(var(56)),gethitvar(hitshaketime))*((14-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger1 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger1 = P2BodyDist Y+floor((14-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((14-playerid(var(56)),gethitvar(hitshaketime))*((14-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger1 = floor(fvar(37))>=14
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=14
trigger1 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,14)-playerid(var(56)),gethitvar(hitshaketime)) =[-20,45]
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>14
trigger2 = floor(fvar(37))>=14
trigger2 = (p2bodydist x = [-20,45]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-60,40]

;弱ナイトメア
[State -1, 弱ナイトメア]
type = ChangeState
value = 1200
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) ;|| (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H ;&& fvar(34)>0
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = (((var(54)&122880)/8192)<=12)
;triggerall = fvar(34)>0 || movecontact
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)||fvar(39)=30
trigger1 = p2life>((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*250)||((facing=playerid(var(56)),facing)&&(playerid(var(56)),Frontedgebodydist>=5))||((facing!=playerid(var(56)),facing)&&(playerid(var(56)),backedgebodydist>=5))
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-55
trigger1 = P2BodyDist Y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < 20
trigger1 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger1 = P2BodyDist Y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger1 = floor(fvar(37))>=11
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger1 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,11)-playerid(var(56)),gethitvar(hitshaketime)) =[-10,85+(random%10)]
trigger2 = p2life>((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*250)||((facing=playerid(var(56)),facing)&&(playerid(var(56)),Frontedgebodydist>=5))||((facing!=playerid(var(56)),facing)&&(playerid(var(56)),backedgebodydist>=5))
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger2 = floor(fvar(37))>=11
trigger2 = (p2bodydist x = [-10,85+(random%10)]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-55,40]
trigger3 = power<1000 || power>=3000 || (((var(54)&122880)/8192)>3)
trigger3 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-55
trigger3 = P2BodyDist Y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < 20
trigger3 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger3 = P2BodyDist Y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger3 = floor(fvar(37))>=11
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger3 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,11)-playerid(var(56)),gethitvar(hitshaketime)) =[-10,85+(random%10)]
trigger4 = power<1000 || power>=3000 || (((var(54)&122880)/8192)>3)
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger4 = floor(fvar(37))>=11
trigger4 = (p2bodydist x = [-10,85+(random%10)]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-55,40]

;強ナイトメア
[State -1, 強ナイトメア]
type = ChangeState
value = 1250
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) ;|| (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H ;&& fvar(34)>0
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = (((var(54)&122880)/8192)<=12)
;triggerall = fvar(34)>0 || movecontact
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)||fvar(39)=30
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-55
trigger1 = P2BodyDist Y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((18-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger1 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger1 = P2BodyDist Y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((18-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger1 = floor(fvar(37))>=18
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=18
trigger1 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,18)-playerid(var(56)),gethitvar(hitshaketime)) =[-5,95]
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>18
trigger2 = floor(fvar(37))>=18
trigger2 = (p2bodydist x = [-5,95]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-55,40]
trigger3 = P2BodyDist Y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-55
trigger3 = P2BodyDist Y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((18-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger3 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger3 = P2BodyDist Y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((18-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger3 = floor(fvar(37))>=18 && stateno=240
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=18
trigger3 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,18)-playerid(var(56)),gethitvar(hitshaketime)) =[-5,95]


;近距離立ち強キック
[State -1, Standing Strong Kick]
type = ChangeState
value = 245
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) ;|| (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = fvar(34)>0 || floor(fvar(37))<=7
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = p2bodydist X < 20
;triggerall = fvar(34)>0 || movecontact
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((7-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((7-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-55
trigger1 = P2BodyDist Y+floor((7-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((7-playerid(var(56)),gethitvar(hitshaketime))*((7-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger1 = P2BodyDist Y < -40 || helper(50000+id),var(32) = 0
trigger1 = P2BodyDist Y+floor((7-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((7-playerid(var(56)),gethitvar(hitshaketime))*((7-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < -40 || helper(50000+id),var(32) = 0
trigger1 = floor(fvar(37))>=1
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=7
trigger1 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,7)-playerid(var(56)),gethitvar(hitshaketime)) =[-5,35]
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>7
trigger2 = floor(fvar(37))>=1
trigger2 = (p2bodydist x = [-5,35]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-55,60]

;しゃがみ弱パンチ
[State -1, Crouching Light Punch]
type = ChangeState
value = 400
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) ;|| (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = fvar(34)>0 || floor(fvar(37))<=7 || movecontact
triggerall = playerid(var(56)),statetype = A && statetype!=A
triggerall = (((var(54)&122880)/8192)<=7) || !playerid(var(56)),hitfall || stateno=400
;triggerall = fvar(34)>0 || movecontact
trigger1 = ((stateno = 400 || stateno = 430) && movecontact)
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-60
trigger1 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger1 = floor(fvar(37))>=1
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=5
trigger1 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,5)-playerid(var(56)),gethitvar(hitshaketime)) =[-5,40]
trigger2 = ((stateno = 400 || stateno = 430) && movecontact)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>5
trigger2 = floor(fvar(37))>=1
trigger2 = (p2bodydist x = [-5,40]) && p2bodydist y+playerid(var(56)),const(size.mid.pos.y)*.5 =[-60,60]
trigger3 = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)
trigger3 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38))>=-15
trigger3 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) < (playerid(var(56)),anim = 5050)*20
trigger3 = floor(fvar(37))>=1
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=5
trigger3 = p2bodydist x+fvar(35)*(ifelse(playerid(var(56)),BackEdgeBodyDist<10 || playerid(var(56)),FrontEdgeBodyDist<10 || (fvar(35)<0&&p2dist y>-60),0,5)-playerid(var(56)),gethitvar(hitshaketime)) =[-5,40]


;前緊急回避
[State -1, T S]
type = ChangeState
value = 700
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno = [150,152]
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) ;|| (playerid(var(56)),stateno = [150,155])
triggerall = p2stateno = playerid(var(56)),stateno
triggerall = statetype != A && p2statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>-15
triggerall = p2movetype = H && playerid(var(56)),movetype = H ;&& fvar(34)>0
triggerall = playerid(var(56)),statetype = A && statetype!=A && fvar(35)<0
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)
trigger1 = floor(fvar(37))>=28 && BackEdgeBodyDist<10
trigger1 = p2bodydist x <= 30

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = (((var(54)&2097152)=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)=0 && playerid(var(56)),statetype = C))
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12]);||stateno = 230 && movecontact
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<24
trigger1 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=5
trigger1 = fvar(35)<=1 || p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<18
trigger1 = fvar(39):=230
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>5
trigger2 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 24 && p2bodydist y =0
trigger2 = fvar(39):=230
trigger3 = playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
trigger3 = floor(fvar(37))>=5 
trigger3 = p2bodydist x < 18 && p2bodydist y =0
trigger3 = fvar(39):=230

;近距離立ち強キック
[State -1, Standing Strong Kick]
type = ChangeState
value = 245
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2bodydist X < 20
triggerall = p2bodydist x<=12 || fvar(37)<=9
triggerall = fvar(35)<=1 || fvar(37)<=9 || fvar(37)>=20
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12]
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=7-playerid(var(56)),gethitvar(hitshaketime),var(53),7-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<20
trigger1 = P2BodyDist Y+floor((7-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((7-playerid(var(56)),gethitvar(hitshaketime))*((7-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=7 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<7 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=7
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>7
trigger2 = (floor(fvar(37))>=7 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<7 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 20 && p2bodydist y =0
trigger3 = playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
trigger3 = floor(fvar(37))=[7,9]
trigger3 = p2bodydist x < 20 && p2bodydist y =0

;近距離立ち強パンチ
[State -1, Stand Strong Punch]
type = ChangeState
value = 215
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = ((var(54)&2097152)=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)=0 && playerid(var(56)),statetype = C)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2bodydist X < 24
triggerall = p2bodydist x<=14 || fvar(37)<=9 || stateno = 230
triggerall = fvar(35)<=1 || fvar(37)<=9 || fvar(37)>=20 || stateno = 230
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12]
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=7-playerid(var(56)),gethitvar(hitshaketime),var(53),7-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<50
trigger1 = P2BodyDist Y+floor((7-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((7-playerid(var(56)),gethitvar(hitshaketime))*((7-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=7 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<7 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=7
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>7
trigger2 = (floor(fvar(37))>=7 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<7 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 50 && p2bodydist y =0
trigger3 = playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
trigger3 = floor(fvar(37))=[7,9]
trigger3 = p2bodydist x < 20 && p2bodydist y =0

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = (stateno = 230 && movecontact)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
;trigger1 = ((var(54)&2097152)!=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)!=0 && playerid(var(56)),statetype = C)
trigger1 = fvar(39)!=230
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<40-(var(54)&127)%10
trigger1 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=5
;trigger2 = ((var(54)&2097152)!=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)!=0 && playerid(var(56)),statetype = C)
trigger2 = fvar(39)!=230
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>5
trigger2 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 40-(var(54)&127)%10 && p2bodydist y =0
trigger3 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))>=22
trigger3 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger3 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<40-(var(54)&127)%10
trigger3 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger3 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger3 =0; playerid(var(56)),gethitvar(hitshaketime)<=5
trigger4 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))>=22
trigger4 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>5
trigger4 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20)
trigger4 =0; p2bodydist x < 40-(var(54)&127)%10 && p2bodydist y =0

;しゃがみ弱パンチ
[State -1, Crouching Light Punch]
type = ChangeState
value = 400
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = p2bodydist x<=12 || fvar(37)<=7 || stateno = 400 || stateno = 430
triggerall = fvar(35)<0 || fvar(37)<=7 || fvar(37)>=20 || stateno = 400 || stateno = 430
triggerall = statetype=C || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)||(stateno = 400 && movecontact)||(stateno = 430 && movecontact)
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])||(stateno = 400 && movecontact)||(stateno = 430 && movecontact)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=5-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<45-(var(54)&127)%10+(200*(stateno=430))
trigger1 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=5
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>5
trigger2 = (floor(fvar(37))>=5 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<5 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 45-(var(54)&127)%10 && p2bodydist y =0
trigger3 = playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
trigger3 = floor(fvar(37))>=5 
trigger3 = p2bodydist x < 45-(var(54)&127)%10 && p2bodydist y =0

;しゃがみ強パンチ
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2movetype = H && playerid(var(56)),movetype = H && p2statetype!=A
triggerall = fvar(35)<0 || fvar(37)<=13

triggerall = statetype=C || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
triggerall = floor(fvar(37))<5+ceil((p2bodydist x>23)*(p2bodydist x-23)/(const(velocity.run.fwd.x)*Const(movement.stand.friction)))||((var(54)&2097152)!=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)!=0 && playerid(var(56)),statetype = C)
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=10-playerid(var(56)),gethitvar(hitshaketime),var(53),10-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<50
trigger1 = P2BodyDist Y+floor((10-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((10-playerid(var(56)),gethitvar(hitshaketime))*((10-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=10 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<10 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=10
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>10
trigger2 = (floor(fvar(37))>=10 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<10 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 50 && p2bodydist y =0
trigger3 = playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
trigger3 = floor(fvar(37))>=10
trigger3 = p2bodydist x < 50 && p2bodydist y =0


;遠距離立ち強キック
[State -1, Standing Strong Kick]
type = ChangeState
value = 240
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = p2bodydist X >= 20
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = fvar(35)<0 || fvar(37)<=13
triggerall = floor(fvar(37))<5+ceil((p2bodydist x>23)*(p2bodydist x-23)/(const(velocity.run.fwd.x)*Const(movement.stand.friction))) && p2statetype!=A

triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=11-playerid(var(56)),gethitvar(hitshaketime),var(53),11-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<85
trigger1 = P2BodyDist Y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=11 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<11 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger2 = (floor(fvar(37))>=11 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<11 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 85 && p2bodydist y =0
trigger3 = playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
trigger3 = floor(fvar(37))>=11
trigger3 = p2bodydist x < 85 && p2bodydist y =0

;ダッシュ
[state -3]
type = ChangeState
value = 100
triggerall = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = RoundSTate = 2 && P2movetype = H
triggerall = !inguarddist
TriggerAll = playerid(var(56)),Alive
triggerall = (playerid(var(56)),stateno = [5000,5100)) || playerid(var(56)),stateno =1420 || playerid(var(56)),stateno =1120
triggerall = !playerid(var(56)),ctrl
Triggerall = P2statetype != L ;&& p2bodydist x>25
triggerall = !(p2stateno = 5201 || (helper(50000+id),var(59)=2 && P2bodydist X <100))
triggerall = statetype != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && stateno!=100 && prevstateno!=100
triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=[10,12]
trigger1 = ceil(facing*(playerid(var(56)),Pos X-Pos X)) +(fvar(35))*(1-fvar(36)**var(53))/(1-fvar(36)) = [20,256]
trigger1 = floor(fvar(37))>=7+ceil((p2bodydist x>20)*(p2bodydist x-20)/(const(velocity.run.fwd.x)*Const(movement.stand.friction))) && p2statetype!=A
trigger2 = p2statetype = A && p2bodydist x>60+(var(54)&127)%40 && ((var(54)&127)<=50) ;- ((fvar(35)<=-1)*10)
trigger3 = ((var(54)&2097152)=0 && playerid(var(56)),statetype = S)||((var(54)&4194304)=0 && playerid(var(56)),statetype = C)
trigger3 = floor(fvar(37))>=5+ceil((p2bodydist x>24)*(p2bodydist x-24)/(const(velocity.run.fwd.x)*Const(movement.stand.friction))) && p2statetype!=A

[State -3,]
type = varset
triggerall = !IsHelper
trigger1 = (fvar(39)=30)
fvar(39) = 0
;------------------------------------ コンボ ------------------------------------------------
;スリーピィヘッド
[State -1, スリーピィヘッド]
type = ChangeState
value = 310
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)||((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440) && movecontact)
;triggerall = ((var(54)&127)=[46,75])
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((16-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((16-playerid(var(56)),gethitvar(hitshaketime))*((16-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=16-ifelse((var(59)=[1,4]),(5-var(59)),0);+(stateno=[0,111])
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=16
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=16-playerid(var(56)),gethitvar(hitshaketime),var(53),16-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 100
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>16
trigger2 = floor(fvar(37))>=16-ifelse((var(59)=[1,4]),(5-var(59)),0);+(stateno=[0,111])
trigger2 = p2bodydist x < 100 && p2dist y >=0

;フーリー・クーリー
[State -1, フーリー・クーリー]
type = ChangeState
value = 3100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = power >= 3000
triggerall = alive
triggerall = RoundState = 2
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-6 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-6 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = playerid(var(56)),statetype != A
triggerall = ((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*550)|| (var(54)&127)%5=0
triggerall = (p2dist y = [-10,10])
triggerall = p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=13-playerid(var(56)),gethitvar(hitshaketime),var(53),13-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36)) >= 0
trigger1 = floor(fvar(37))>=13-ifelse((var(59)=[1,4]),(5-var(59)),0)+ceil((P2BodyDist X>40)*(P2BodyDist X-40)/15.2)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=13
trigger1 = p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=13-playerid(var(56)),gethitvar(hitshaketime),var(53),13-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36)) < 55+ceil((fvar(37)>=13)*(fvar(37)-13)*15.2)
trigger1 = p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=13-playerid(var(56)),gethitvar(hitshaketime),var(53),13-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36)) < 55+(15.2*5)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>13
trigger2 = floor(fvar(37))>=13-ifelse((var(59)=[1,4]),(5-var(59)),0)+ceil((P2BodyDist X>55)*(P2BodyDist X-55)/15.2)
trigger2 = p2bodydist x < 55+ceil((fvar(37)>=13)*(fvar(37)-13)*15.2) && p2dist y >=0 && p2bodydist x<55+(15.2*5)

;ラスト・ダイナソー
[State -1, ラスト・ダイナソー]
type = ChangeState
value = floor(fvar(39))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39)=30
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
triggerall = power>=1000
trigger1 = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*ifelse(power>=2000,420.0,250.0))+((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0))*70)
trigger1 = p2dist y+floor((14-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((14-playerid(var(56)),gethitvar(hitshaketime))*((14-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=14-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=14
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=14-playerid(var(56)),gethitvar(hitshaketime),var(53),14-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 45
trigger1 = fvar(39):=1350
trigger2 = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*ifelse(power>=2000,420.0,250.0))+((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0))*70)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>14
trigger2 = floor(fvar(37))>=14-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 45 && p2dist y >=0
trigger2 = fvar(39):=1350
trigger3 = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*ifelse(power>=2000,420.0,250.0))+((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0))*60)
trigger3 = p2dist y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger3 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger3 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=11-playerid(var(56)),gethitvar(hitshaketime),var(53),11-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 35
trigger3 = fvar(39):=1300
trigger4 = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*ifelse(power>=2000,420.0,250.0))+((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0))*60)
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger4 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger4 = p2bodydist x < 35 && p2dist y >=0
trigger4 = fvar(39):=1300

[state -1,ハイブリット・レインボーMAX]
type=changestate
value=floor(fvar(39))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = power >= 2000
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39):=fvar(39)+(((stateno=1300&&AnimElemtime(9)<0)||(stateno=1350&&AnimElemtime(9)<0)||(stateno=2110&&AnimElemtime(10)<0))&&movecontact)*30||1
triggerall = fvar(39)=30
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = (((lifemax+.0)/(life+.0))<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))*1.33)||fvar(37)<17||var(59)<=5||stateno>=2000
triggerall = p2life>((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*ifelse((var(54)&131072)=0,1.5,2.25))*ifelse(stateno>=2000,30.0,200.0))
triggerall = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*ifelse((var(54)&131072)=0,1.5,2.25))*450.0)|| (var(54)&127)%10=1
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((12-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((12-playerid(var(56)),gethitvar(hitshaketime))*((12-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= -10
trigger1 = floor(fvar(37))>=12-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=12
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=12-playerid(var(56)),gethitvar(hitshaketime),var(53),12-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 80
trigger1 = fvar(39):=3000
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>12
trigger2 = floor(fvar(37))>=12-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 80 && p2dist y >=0
trigger2 = fvar(39):=3000
trigger3 = p2dist y+floor((3-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((3-playerid(var(56)),gethitvar(hitshaketime))*((3-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= -10
trigger3 = floor(fvar(37))>=3-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=3
trigger3 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=3-playerid(var(56)),gethitvar(hitshaketime),var(53),3-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 40
trigger3 = fvar(39):=3050
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>3
trigger4 = floor(fvar(37))>=3-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger4 = p2bodydist x < 40 && p2dist y >=0
trigger4 = fvar(39):=3050

[State -3,]
type = varset
triggerall = !IsHelper && time>1
trigger1 = fvar(39)=3000 || fvar(39)=3050 || fvar(39)=1300 || fvar(39)=1350 || fvar(39)=1200 || fvar(39)=1250 || fvar(39)=1000 || fvar(39)=1050
trigger1 = fvar(39)=stateno || movetype=H || movetype=A
trigger2 = fvar(39)=230 && stateno!=230
trigger2 = movetype=H || p2movetype!=H || (stateno = [200,800])
fvar(39) = 0

;ハイブリット・レインボー
[State -1, ハイブリット・レインボー]
type = ChangeState
value = 2100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = power >= 1000
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39):=fvar(39)+(((stateno=1300&&AnimElemtime(9)<0)||(stateno=1350&&AnimElemtime(9)<0))&&movecontact)*30||1
triggerall = fvar(39)=30
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*250) ;|| (var(54)&127)%10=2
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((3-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((3-playerid(var(56)),gethitvar(hitshaketime))*((3-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= -10
trigger1 = floor(fvar(37))>=3-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=3
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=3-playerid(var(56)),gethitvar(hitshaketime),var(53),3-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 40
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>3
trigger2 = floor(fvar(37))>=3-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 40 && p2dist y >=0

;ストーカー
[State -1, ストーカー]
type = ChangeState
value = 2000
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = power >= 1000
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = ((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)
;triggerall = ((var(54)&127)=[46,75])
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = p2life<=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0))*340)|| (var(54)&127)%(4-(life<350)-(((((lifemax+.0)/(life+.0))>=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))*1.1)&&var(59)>5)*2))=0
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((17-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((17-playerid(var(56)),gethitvar(hitshaketime))*((17-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= -10
trigger1 = floor(fvar(37))>=17-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=17
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=17-playerid(var(56)),gethitvar(hitshaketime),var(53),17-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 70
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>17
trigger2 = floor(fvar(37))>=17-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 70 && p2dist y >=0

;弱クレイジーサンシャイン
[State -1, 弱クレイジーサンシャイン]
type = ChangeState
value = 1000
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-6 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-6 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = playerid(var(56)),statetype != A
triggerall = ((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = ifelse(facing=1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>=160
triggerall = (var(54)&127)=[1,(50*(helper(60000+id),fvar(38)*facing>helper(60000+id),fvar(37)*facing))]
triggerall = (p2dist y = [-10,10])
triggerall = p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=15-playerid(var(56)),gethitvar(hitshaketime),var(53),15-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36)) >= 0
trigger1 = p2dist y+floor((15-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((15-playerid(var(56)),gethitvar(hitshaketime))*((15-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=15-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=15
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=15-playerid(var(56)),gethitvar(hitshaketime),var(53),15-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 75
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>15
trigger2 = floor(fvar(37))>=15-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 75 && p2dist y >=0
trigger3 = p2dist y+floor((16-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((16-playerid(var(56)),gethitvar(hitshaketime))*((16-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger3 = floor(fvar(37))>=16-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=16
trigger3 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=16-playerid(var(56)),gethitvar(hitshaketime),var(53),16-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 90
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>16
trigger4 = floor(fvar(37))>=16-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger4 = p2bodydist x < 90 && p2dist y >=0

;ラスト・ダイナソー
[State -1, ラスト・ダイナソー]
type = ChangeState
value = floor(fvar(39))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39)=30
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
triggerall = (var(54)&127)=[1,50]
triggerall = ifelse(facing=1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>=160
trigger1 = p2dist y+floor((14-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((14-playerid(var(56)),gethitvar(hitshaketime))*((14-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=14-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=14
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=14-playerid(var(56)),gethitvar(hitshaketime),var(53),14-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 45
trigger1 = fvar(39):=1350
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>14
trigger2 = floor(fvar(37))>=14-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 45 && p2dist y >=0
trigger2 = fvar(39):=1350
trigger3 = p2dist y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger3 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger3 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=11-playerid(var(56)),gethitvar(hitshaketime),var(53),11-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 35
trigger3 = fvar(39):=1300
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger4 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger4 = p2bodydist x < 35 && p2dist y >=0
trigger4 = fvar(39):=1300

;ナイトメア
[State -1, ナイトメア]
type = ChangeState
value = floor(fvar(39))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48))-2 >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48))-2 < var(55)&&(var(54)&127)>var(59)*20)
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39)=30
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ifelse(facing=1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>=160
trigger1 = p2dist y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((18-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=18-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=18
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=18-playerid(var(56)),gethitvar(hitshaketime),var(53),18-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 100+random%10
trigger1 = fvar(39):=1250
trigger2 = ifelse(facing=1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>=160
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>18
trigger2 = floor(fvar(37))>=18-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 100+random%10 && p2dist y >=0
trigger2 = fvar(39):=1250
trigger3 = p2dist y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger3 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger3 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=11-playerid(var(56)),gethitvar(hitshaketime),var(53),11-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 90+random%10
trigger3 = fvar(39):=1200
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger4 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger4 = p2bodydist x < 90+random%10 && p2dist y >=0
trigger4 = fvar(39):=1200

[State -3,]
type = varset
triggerall = !IsHelper
trigger1 = (fvar(39)=30)
fvar(39) = 0

;------------------------------------- 固め -------------------------------------------------
[State -1, Throw]
type = ChangeState
value = 800+(5*(helper(60000+id),fvar(38)*facing>helper(60000+id),fvar(37)*facing))
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = playerid(var(56)),Alive
triggerall = roundstate=2 && statetype!=A
triggerall = (playerid(var(56)),statetype = S) || (playerid(var(56)),statetype = C)
triggerall = (playerid(var(56)),stateno != [150,155]) || fvar(37)=0
triggerall = (p2stateno != [150,155])
triggerall = (var(54)&262144)=0 && p2stateno!=[5000,5210]
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>=0
triggerall = (p2dist y = [-10,10])
triggerall = stateno != 100
triggerall = p2bodydist X < 15
triggerall = p2statetype != A && p2movetype != H
Triggerall = (ctrl || (stateno = [120,140])||stateno=21||stateno=100||(stateno=[10,12]))||stateno=22
trigger1 = fvar(39)=800.5 || fvar(39)=2.63 || fvar(39)=3.63
trigger1 = fvar(39):=0 || 1

[State -3]
type = ChangeState
value = 22
triggerall = var(59)>4
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno = [120,155]
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = playerid(var(56)),statetype != A
Triggerall = ctrl || stateno = 21 || (stateno = [120,140]) || (stateno = [10,12]) || stateno = 100
triggerall = ((var(54)&127)=[91,100])
trigger1 = floor(fvar(37))<18
trigger1 = floor(fvar(37))>=1-ifelse((var(59)=[1,4]),(5-var(59)),0)+ceil((P2BodyDist X>15)*(P2BodyDist X-15)/((const(velocity.walk.fwd.x)+.0)))
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=1
trigger1 = p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=1-playerid(var(56)),gethitvar(hitshaketime),var(53),1-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<15+ceil((fvar(37)>=1)*(fvar(37)-1)*((const(velocity.walk.fwd.x)+.0)))
trigger1 = p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=1-playerid(var(56)),gethitvar(hitshaketime),var(53),1-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36)) < 40
trigger1 = fvar(39):=800.5
trigger2 = floor(fvar(37))<18
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>1
trigger2 = floor(fvar(37))>=1-ifelse((var(59)=[1,4]),(5-var(59)),0)+ceil((P2BodyDist X>15)*(P2BodyDist X-15)/((const(velocity.walk.fwd.x)+.0)))
trigger2 = p2bodydist x < 15+ceil((fvar(37)>=1)*(fvar(37)-1)*((const(velocity.walk.fwd.x)+.0))) && p2dist y >=0 && p2bodydist x<40
trigger2 = fvar(39):=800.5
trigger3 = fvar(39)=800.5

[State -1, ]
type = ChangeState
value = 40
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = p2movetype = H && playerid(var(56)),movetype = H
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12]
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<4
trigger1 = (var(54)&127)=[1,25]
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=15-playerid(var(56)),gethitvar(hitshaketime),var(53),15-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<80
trigger1 = P2BodyDist Y+floor((15-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((15-playerid(var(56)),gethitvar(hitshaketime))*((15-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=8
trigger1 = fvar(39):=3.5
trigger2 = (var(54)&127)=[1,25]
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>8
trigger2 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 80 && p2bodydist y =0
trigger2 = fvar(39):=3.5

trigger3 = (var(54)&127)=[26,50]
trigger3 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=15-playerid(var(56)),gethitvar(hitshaketime),var(53),15-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<80
trigger3 = P2BodyDist Y+floor((15-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((15-playerid(var(56)),gethitvar(hitshaketime))*((15-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger3 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20)
trigger3 = playerid(var(56)),gethitvar(hitshaketime)<=6
trigger3 = fvar(39):=ifelse(p2bodydist x>35-random%15,9.5,6.5)
trigger4 = (var(54)&127)=[26,50]
trigger4 = playerid(var(56)),gethitvar(hitshaketime)>6
trigger4 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20)
trigger4 = p2bodydist x < 80 && p2bodydist y =0
trigger4 = fvar(39):=ifelse(p2bodydist x>35-random%15,9.5,6.5)

;ジャンプ強パンチ
[State -1, Jump Strong Punch]
type = ChangeState
value = 610
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (stateno = [120,140])
Trigger1 = vel y >=0
Trigger1 = P2bodyDist X=0
Trigger1 = P2BodyDist X-(vel x*9) <= 40 ;&& p2dist y <= 60
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,35])
trigger1 = fvar(39)=6.5
trigger1 = fvar(39):=0 || 1

;サッド・サッド・キディ
[State -1, サッド・サッド・キディ]
type = ChangeState
value = ifelse(playerid(var(56)),BackEdgeBodyDist<=0,645,320)
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (stateno = [120,140])
Trigger1 = vel y >=-4
Trigger1 = P2BodyDist X-(vel x*9) <= 40 ;&& p2dist y <= 60
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,10+random%25])
trigger1 = fvar(39)=9.5 || fvar(39)=6.5 || (p2dist x<0&&fvar(39)=3.5)
trigger1 = fvar(39):=0 || 1

;ジャンプ強パンチ
[State -1, Jump Strong Punch]
type = ChangeState
value = 610
TriggerAll = var(59)>3
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
TriggerAll = RoundState=2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (stateno = [120,140])
Trigger1 = vel y >=-4
Trigger1 = P2BodyDist X-(vel x*9) <= 40 ;&& p2dist y <= 60
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,10+random%25])
trigger1 = fvar(39)=3.5
trigger1 = fvar(39):=0 || 1
Trigger2 = vel y >=0
Trigger2 = P2Dist X>=0
Trigger2 = P2BodyDist X-(vel x*9) <= 40 ;&& p2dist y <= 60
trigger2 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,10])
trigger2 = fvar(39)=6.5
trigger2 = fvar(39):=0 || 1

[State -3,]
type = varset
triggerall = !IsHelper
trigger1 = fvar(39)=6.5 || fvar(39)=9.5 || fvar(39)=1.2
trigger1 = movetype=H
fvar(39) = 0

;弱ブルースドライヴモンスター
[State -1, 弱ブルースドライヴモンスター]
type = ChangeState
value = 1450
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<4
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((var(54)&127)=[91,100])
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||(stateno=[10,12]))||fvar(39)=30
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((16-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((16-playerid(var(56)),gethitvar(hitshaketime))*((16-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))=15-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=16
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=16-playerid(var(56)),gethitvar(hitshaketime),var(53),16-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 40


;スリーピィヘッド
[State -1, スリーピィヘッド]
type = ChangeState
value = 310
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<4
triggerall = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12])||stateno=100)
;triggerall = ((var(54)&127)=[46,75])
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = stateno != 215 || (stateno = 215 && (time>9 || p2bodydist x >= 35))
triggerall = playerid(var(56)),statetype != A && fvar(34)=0 && life>333
trigger1 = p2dist y+floor((16-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((16-playerid(var(56)),gethitvar(hitshaketime))*((16-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=16-ifelse((var(59)=[1,4]),(5-var(59)),0)-((p2bodydist x>70)*6)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=16
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=16-playerid(var(56)),gethitvar(hitshaketime),var(53),16-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 90
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>16
trigger2 = floor(fvar(37))>=16-ifelse((var(59)=[1,4]),(5-var(59)),0)-((p2bodydist x>70)*6)
trigger2 = p2bodydist x < 90 && p2dist y >=0

;しゃがみ弱キック
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
;triggerall = ((var(54)&127)%7<=2)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = ((var(54)&127)!=[91,100])
triggerall = (playerid(var(56)),stateno = [120,155])||fvar(37)<4||stateno=430
triggerall = statetype=C || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
triggerall = p2movetype = H && playerid(var(56)),movetype = H
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||(stateno=[10,12]))||(stateno = 430 && movecontact)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=4-playerid(var(56)),gethitvar(hitshaketime),var(53),4-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<22+(28*(stateno=430))
trigger1 = P2BodyDist Y+floor((4-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((4-playerid(var(56)),gethitvar(hitshaketime))*((4-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=4 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<4 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=4
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>4
trigger2 = (floor(fvar(37))>=4 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<4 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 22+(28*(stateno=430)) && p2bodydist y =0

;しゃがみ強パンチ
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = statetype=C || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<4
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=10-playerid(var(56)),gethitvar(hitshaketime),var(53),10-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<50
trigger1 = P2BodyDist Y+floor((10-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((10-playerid(var(56)),gethitvar(hitshaketime))*((10-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=10 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<10 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=10
trigger2 = ((playerid(var(56)),stateno = [5000,5100))&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [5000,5100))&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>10
trigger2 = (floor(fvar(37))>=10 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<10 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 50 && p2bodydist y =0

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
;triggerall = ((var(54)&127)%7<=2)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<5
triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
triggerall = p2movetype = H && playerid(var(56)),movetype = H
triggerall = fvar(37)<=4
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12]
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=4-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<42
trigger1 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=5
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>5
trigger2 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20)
trigger2 = p2bodydist x < 42 && p2bodydist y =0

;弱ファニーバニー
[State -1, 弱ファニーバニー]
type = ChangeState
value = 1100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<5
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||(stateno=[10,12])) || fvar(39)=30
triggerall = ((var(54)&127)=[81-(10*(life>555)),100])
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)-6
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=11-playerid(var(56)),gethitvar(hitshaketime),var(53),11-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) = [40,90]

;バックステップ
[State -1, Back Step]
type = ChangeState
value = 105
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype!=A
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper
triggerall = numhelper(50000+id)
TriggerAll = playerid(var(56)),Alive
triggerall = statetype != A && playerid(var(56)),statetype != L
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = ((var(54)&127)%7<=2) || (((var(54)&122880)/8192)>=13)
triggerall = (playerid(var(56)),backedgebodydist + backedgebodydist)>40
triggerall = (ifelse(facing=1,helper(60000+id),fvar(37),helper(60000+id),fvar(38))>=100)
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<5
triggerall = statetype=S || (prevstateno!=[200,4000]) || stateno=21||stateno=100||(stateno=0&&time>1)
triggerall = p2movetype = H && playerid(var(56)),movetype = H
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12]
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2bodydist x+(fvar(35))*(1-fvar(36)**ifelse(var(53)<=4-playerid(var(56)),gethitvar(hitshaketime),var(53),5-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))<80
trigger1 = P2BodyDist Y+floor((5-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((5-playerid(var(56)),gethitvar(hitshaketime))*((5-playerid(var(56)),gethitvar(hitshaketime))+1)/2)*fvar(38)) = 0
trigger1 = (floor(fvar(37))>=1 && (var(54)&127)<=var(59)*20) || (floor(fvar(37))<1 && (var(54)&127)>var(59)*20) || (playerid(var(56)),stateno = 5300&&playerid(var(56)),movetype=H)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=5

;ナイトメア
[State -1, ナイトメア]
type = ChangeState
value = 1200
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<5
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39)=30
triggerall = ((var(54)&127)=[51,80+(10*(power<1000))]) || stateno=440 || playerid(var(56)),life<10
triggerall = stateno != 310 || (stateno = 310 && time>36)
triggerall = stateno != 215 || (stateno = 215 && time>9)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = p2dist y+floor((11-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((11-playerid(var(56)),gethitvar(hitshaketime))*((11-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=11
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=11-playerid(var(56)),gethitvar(hitshaketime),var(53),11-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 90
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>11
trigger2 = floor(fvar(37))>=11-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 90 && p2dist y >=0

;ストーカー
[State -1, ストーカー]
type = ChangeState
value = 2000
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = power >= 1000
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<5
triggerall = ((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)
triggerall = ((var(54)&127)=[1,25-(15*(life<333))])
triggerall = (stateno = 310 && time<36)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0 && fvar(37)=[18,20]
trigger1 = p2dist y+floor((17-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((17-playerid(var(56)),gethitvar(hitshaketime))*((17-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=17-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=17
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=17-playerid(var(56)),gethitvar(hitshaketime),var(53),17-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 50
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>17
trigger2 = floor(fvar(37))>=17-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 50 && p2dist y >=0

;ナイトメア
[State -1, ナイトメア]
type = ChangeState
value = 1250
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = statetype != A
TriggerAll = playerid(var(56)),Alive
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id)
triggerall = playerid(var(56)),movetype = H
triggerall = statetype != A && playerid(var(56)),statetype != L && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = ((playerid(var(56)),stateno = [120,155])&&abs(helper(50000+id),var(48)) >= var(55)&&(var(54)&127)<=var(59)*20)||((playerid(var(56)),stateno != [120,155])&&abs(helper(50000+id),var(48)) < var(55)&&(var(54)&127)>var(59)*20)||fvar(37)<5
triggerall = fvar(39)!=230
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
triggerall = fvar(39)=30
triggerall = (stateno = 310 && time>36)
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = playerid(var(56)),statetype != A && fvar(34)=0
trigger1 = ifelse(facing=1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>=160
trigger1 = p2dist y+floor((18-playerid(var(56)),gethitvar(hitshaketime))*(fvar(34))+((18-playerid(var(56)),gethitvar(hitshaketime))*((18-playerid(var(56)),gethitvar(hitshaketime))+1.0)/2)*fvar(38)) >= 0
trigger1 = floor(fvar(37))>=18-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger1 = playerid(var(56)),gethitvar(hitshaketime)<=18
trigger1 = (p2bodydist x +(fvar(35))*(1-fvar(36)**ifelse(var(53)<=18-playerid(var(56)),gethitvar(hitshaketime),var(53),18-playerid(var(56)),gethitvar(hitshaketime)))/(1-fvar(36))) < 90
trigger2 = ifelse(facing=1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>=160
trigger2 = playerid(var(56)),gethitvar(hitshaketime)>18
trigger2 = floor(fvar(37))>=18-ifelse((var(59)=[1,4]),(5-var(59)),0)
trigger2 = p2bodydist x < 90 && p2dist y >=0

[state -1,スイッチ]
type = varset
triggerall = var(59)>5
triggerall = !IsHelper && playeridexist(var(56))
trigger1 = p2bodydist x=[-30,30]
trigger1 = p2statetype!=A && fvar(39)=0 && (p2stateno=52||stateno=52)
FV = 39
value = 800.5
IgnoreHitPause = 1
;----------------------------------- 地上移動 -----------------------------------------------
;挑発
[State -1, Taunt]
type = ChangeState
value = 195
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = (var(54)&1048576)=0
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100)
triggerall = (var(52)!=[5,6]) && var(52)!=[9,10]
triggerall = alive
triggerall = var(20) = 0
triggerall = RoundState = 2
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype != A
triggerall = life>0 && playerid(var(56)),life>0 && (p2bodydist x>60||playerid(var(56)),stateno=[2030,2035])
triggerall = p2stateno != 5201 && !(p2stateno = 5210 && playerid(var(56)),time<=12)
triggerall = statetype != A && ceil(facing*(playerid(var(56)),Pos X-Pos X))>0
triggerall = p2bodydist x >= 120 || p2dist y<-100;||playerid(var(56)),stateno=[2030,2035]
triggerall = !inguarddist && fvar(35)>=-1
trigger1 = life>555
trigger1 = (p2stateno = [5000,5110])||playerid(var(56)),stateno=[1280,1285]
trigger1 = ((lifemax+.0)/(life+.0))*2.5<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))
trigger2 = life>500
trigger2 = ((lifemax+.0)/(life+.0))*1.5<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))
trigger2 = (playerid(var(56)),stateno=[1280,1285]);||playerid(var(56)),stateno=[2030,2035]
trigger3 = life>400
trigger3 = ((lifemax+.0)/(life+.0))*1.0<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))
trigger3 = playerid(var(56)),stateno=195
trigger3 = !inguarddist && playerid(var(56)),movetype=I
trigger4 = life>666
trigger4 = ((lifemax+.0)/(life+.0))*1.5<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))
trigger4 = helper(60000+id),var(1)>0 && playerid(var(56)),time>1
trigger4 = !inguarddist && playerid(var(56)),movetype=I

;弱クレイジーサンシャイン
[State -1, 弱クレイジーサンシャイン]
type = ChangeState
value = 1000
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
;Triggerall = var(57)<=var(55)
triggerall = RoundState = 2 && prevstateno!=5120
triggerall = numhelper(50000+id) && numhelper(60000+id)
TriggerAll = playerid(var(56)),Alive && helper(50000+id),fvar(33)=0
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0||P2bodydist X >=100
triggerall = helper(60000+id),var(52)!=1
triggerall = (helper(60000+id),var(47)) >= p2bodydist x || (helper(60000+id),var(47)=0 && helper(60000+id),var(48)=0 && helper(60000+id),var(49)=0 && helper(60000+id),var(50)=0)
triggerall = statetype != A
triggerall = !(p2stateno = 5201 || (helper(50000+id),var(59)=2 && P2bodydist X <100))
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && (p2bodydist x>20 || (helper(60000+id),var(1)>0 && helper(60000+id),time>1))
Triggerall = !helper(50000+id),inguarddist
triggerall = !playerid(var(56)),hitdefattr = SCA,HA,HT,HP
triggerall = helper(50000+id),var(32) = 0||playerid(var(56)),stateno=[1280,1285]
Triggerall = ctrl || (stateno = [120,149])||stateno=100||stateno=21||stateno=[10,12]
triggerall = (p2bodydist x>100)&&((p2statetype = A && p2movetype = H && fvar(37)>31)||(playerid(var(56)),stateno=[1280,1285]))
trigger1 = (p2statetype = A && p2movetype = H && fvar(37)>31)||playerid(var(56)),stateno=[1280,1285]
Trigger1 = !inguarddist && power<3000
trigger1 = p2bodydist x>=100-random%20;ifelse((var(54)&524288)=0,60,100)
;trigger1 = power<1000||playerid(var(56)),stateno=[1280,1285]

[State -3, Run/Dash Fwd]
type = ChangeState
value = 100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = stateno !=[100,106]
triggerall = alive
Triggerall = var(57)<=var(55)
triggerall = RoundState = 2 && prevstateno!=5120
triggerall = numhelper(50000+id) && numhelper(60000+id)
TriggerAll = playerid(var(56)),Alive && helper(50000+id),fvar(33)=0
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0||P2bodydist X >=100
triggerall = helper(60000+id),var(52)!=1
triggerall = (helper(60000+id),var(47)) >= p2bodydist x || (helper(60000+id),var(47)=0 && helper(60000+id),var(48)=0 && helper(60000+id),var(49)=0 && helper(60000+id),var(50)=0)
triggerall = statetype != A
triggerall = !(p2stateno = 5201 || (helper(50000+id),var(59)=2 && P2bodydist X <100))
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && (p2bodydist x>20 || (helper(60000+id),var(1)>0 && helper(60000+id),time>1))
Triggerall = !helper(50000+id),inguarddist
triggerall = !playerid(var(56)),hitdefattr = SCA,HA,HT,HP
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=[10,12]
triggerall = (var(54)&127)<=var(59)*10||(p2statetype!=L&&p2statetype != A && p2movetype = H && (fvar(37))>=13) || p2statetype=L || (helper(60000+id),var(1)>0 && playerid(var(56)),time>1)||(p2bodydist x>60&&p2statetype = A && p2movetype = H && fvar(37)>8)
trigger1 = P2bodydist X >=180 ;|| (p2statetype != L && p2statetype != A && p2movetype = H && (fvar(37))>=13&& (playerid(var(56)),stateno = [5000,5099])|| playerid(var(56)),stateno = [150,155])
trigger1 = p2statetype != L || (P2bodydist X >=100 && fvar(39)=0)
Trigger1 = !inguarddist
trigger1 = helper(50000+id),var(59)!=2
trigger1 = Random%12>=ifelse(life>333,8,10) || (p2statetype != L && p2statetype != A && p2movetype = H && (fvar(37))>=13)
trigger2 = p2statetype=L || (p2statetype = A && p2movetype = H && fvar(37)>8) || helper(50000+id),var(59)!=2
Trigger2 = !inguarddist
trigger2 = p2bodydist x>=60;ifelse((var(54)&524288)=0,60,100)
trigger3 = helper(50000+id),var(59)!=2
trigger3 = P2bodydist X >=25+(25*(stateno=21))+(var(54)&127)%50
Trigger3 = playerid(var(56)),Anim!=5120 && playerid(var(56)),stateno!=5120 && playerid(var(56)),prevstateno!=5120
Trigger3 = !inguarddist && p2movetype=I && p2statetype!=L
trigger3 = Random%15>=ifelse(life>333,10,12)
trigger4 = helper(60000+id),var(1)>0 && playerid(var(56)),time>1
trigger5 = !numpartner || p2bodydist x>65
trigger5 = (p2statetype = A && p2movetype = H && fvar(37)>8) && playerid(var(56)),time>3 && p2stateno=[5000,5099]
ctrl = 0

[state -3]
type = ChangeState
value = 40
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = roundstate = 2 && Alive && P2life!=0
Triggerall = StateType != A
triggerall = alive
triggerall = fvar(39) = 0 || fvar(39)=30
triggerall = numhelper(60000+id)
triggerall = numhelper(50000+id) && (helper(60000+id),var(6)!=[25,27])
triggerall = helper(50000+id),fvar(33)=0 && (helper(50000+id),fvar(1)=0 || life>750)
triggerall = helper(50000+id),var(59)=0 || helper(50000+id),var(59)=3
Triggerall = P2statetype != L && prevstateno!=[150,155]
triggerall = abs(playerid(var(56)),animtime)>playerid(var(56)),time || playerid(var(56)),movetype!=A
Triggerall = (playerid(var(56)),MoveType != H && p2movetype != H) || (!numtarget && floor(fvar(37))>=36 && playerid(var(56)),MoveType = H && p2movetype = H)
Triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = helper(50000+id),var(59)!=2
triggerall = fvar(35) <=2
triggerall = P2statetype!=A || (fvar(35)=0 && fvar(34)=0)
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100 || stateno = [10,12]
trigger1 = P2bodydist X = [80,90+random%10]
trigger1 = life>430 || ((lifemax+.0)/(life+.0))<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0))
trigger1 = Random <= ifelse(life>500,40,ifelse(life<250,5,20))
Trigger1 = !inguarddist || life>250
trigger1 = fvar(39):=ifelse(random%3=0,9,3) || 1
trigger2 = P2bodydist X = [120,160]
trigger2 = playerid(var(56)),vel X >=-2 && P2statetype!=A ;&& stateno != 100
trigger2 = Random <= ifelse(life>400,50,25)
Trigger2 = !inguarddist || life>250
trigger2 = fvar(39):=-3 || 1
trigger3 = P2bodydist X = [165,195]
trigger3 = life>250
trigger3 = playerid(var(56)),vel X >=-2 && P2statetype!=A
trigger3 = Random <= ifelse(life>500,30,ifelse(life<200,5,15))
Trigger3 = (!inguarddist || life>500) ;&& stateno != 100
trigger3 = fvar(39):=9 || 1

[state -3]
type = ChangeState
value = 40
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = roundstate = 2 && Alive && P2life!=0
Triggerall = StateType != A
triggerall = alive
triggerall = fvar(39) = 0
triggerall = numhelper(60000+id)
triggerall = numhelper(50000+id) && (helper(60000+id),var(6)!=[25,27])
triggerall = helper(50000+id),fvar(33)=0 && (helper(50000+id),fvar(1)=0 || life>750)
triggerall = helper(50000+id),var(59)=0 || helper(50000+id),var(59)=3
Triggerall = P2statetype != L
triggerall = life>432 && fvar(35)!=[-2,2]
Triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && life>100 && p2movetype != H
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100 || stateno = [10,12]
triggerall = playerid(var(56)),statetype = A
trigger1 = P2BodyDist X+floor(26*(fvar(35))) = [-35,55]
trigger1 = P2BodyDist Y+floor(26*(fvar(34))+(26*(26+1)/2)*fvar(38)) = [-30,40]
trigger1 = (var(54)&127)>=ifelse(life>=600,60,85)
trigger1 = fvar(39):=8;ifelse(inguarddist||random%2=0,5.7,2.7) || 1
trigger2 = P2BodyDist X+floor(26*(fvar(35))) = [85,120]
trigger2 = P2BodyDist Y+floor(26*(fvar(34))+(26*(26+1)/2)*fvar(38)) = [-30,40]
;trigger2 = (var(54)&127)<=ifelse(life>=666,30,15)
trigger2 = fvar(39):=6;ifelse(inguarddist||random%2=0,5.7,2.7) || 1

[state -3]
type = ChangeState
value = ifelse(random%(4+random%2)=0,200+(30*(random%2)),105)
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = roundstate = 2 && Alive && P2life!=0
Triggerall = StateType != A
triggerall = alive
triggerall = fvar(39) = 0 || fvar(39)=30
triggerall = numhelper(60000+id)
triggerall = numhelper(50000+id) && (helper(60000+id),var(6)!=[25,27])
triggerall = helper(50000+id),fvar(33)=0 && (helper(50000+id),fvar(1)=0 || life>750)
triggerall = helper(50000+id),var(59)=0 || helper(50000+id),var(59)=3
Triggerall = P2statetype != L && prevstateno!=[150,155]
triggerall = abs(playerid(var(56)),animtime)>playerid(var(56)),time || playerid(var(56)),movetype!=A
Triggerall = (playerid(var(56)),MoveType != H && p2movetype != H) || (!numtarget && floor(fvar(37))>=36 && playerid(var(56)),MoveType = H && p2movetype = H)
Triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
Triggerall = ctrl || (stateno = [120,149])||stateno=21||stateno=100 || stateno = [10,12]
triggerall = helper(60000+id),var(5)>=0 || life>777
triggerall = (playerid(var(56)),backedgebodydist + backedgebodydist)>40
triggerall = (ifelse(facing=1,helper(60000+id),fvar(37),helper(60000+id),fvar(38))>=100)
trigger1 = P2bodydist X = [90+random%10,120]
trigger1 = stateno != 100
trigger1 = Random <= var(59)*var(59)*2
Trigger1 = !inguarddist || life>432
trigger2 = P2bodydist X = [50,80]
trigger2 = stateno != 100
trigger2 = Random <= var(59)*(6+((prevstateno=[120,155])*2))
Trigger2= !inguarddist || life>678


[state -1]
type = ChangeState
value = 21
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = roundstate = 2 && Alive && P2life!=0
triggerall = playerid(var(56)),movetype != A
triggerall = statetype != A && Anim != 5
Triggerall = var(57)<=var(55) && helper(50000+id),fvar(33)=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && stateno != [100,102]
triggerall = fvar(39)!=800.5
triggerall = ctrl || (stateno = [120,140]) || (stateno = 1) || stateno = [10,12]
triggerall = !inguarddist
triggerall = playerid(var(56)),statetype!=A || random%6=0
trigger1 = playerid(var(56)),movetype=H && playerid(var(56)),statetype!=L && playerid(var(56)),stateno!=[5100,5110]
trigger1 = helper(50000+id),var(59)!=2
trigger2 = helper(50000+id),var(59)!=2
trigger2 = playerid(var(56)),movetype=I && playerid(var(56)),statetype!=L && playerid(var(56)),stateno!=[5100,5110]
trigger2 = p2bodydist x>180 || (p2bodydist x>80 && (var(54)&127)%4=1) || (p2bodydist x>20 && (var(54)&127)%4=2) || (p2bodydist x<110 && (var(54)&127)%4=0) || (p2bodydist x<40 && (var(54)&127)%4=1) || (p2bodydist x<=5)
trigger3 = playerid(var(56)),statetype=L || helper(50000+id),var(59)=2
trigger3 = p2bodydist x!=[35,45]

;受身
[State -1, UKEMI]
type = ChangeState
value = 5200
TriggerAll = var(59) > 3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = alive = 1
triggerall = stateno = 5050
triggerall = pos y > -30
triggerall = vel y > 0 && vel y < 9
trigger1 = roundstate != 2
trigger2 = roundstate = 2
trigger2 = (CanRecover && hitover) || p2movetype=H
trigger2 = pos y >=0-var(59)*5 || helper(50000+id),fvar(10)-life>300
trigger2 = (var(54)&127)<=var(59)*11 || var(59)>6

[state -1]
type = ChangeState
value = 10
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = roundstate = 2 && Alive && P2life!=0
triggerall = statetype != A && anim!=5
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X))>0 && stateno != [10,12]
triggerall = ctrl && time>2
trigger1 = (stateno = 0 && (prevstateno!=[10,12])) || stateno = 101
trigger1 = time>3 || playerid(var(56)),statetype = L ;|| (numtarget && (p2stateno = [5420,5422]))
trigger1 = (playerid(var(56)),statetype != L) || p2bodydist x=[35,45]
trigger1 = !(p2statetype = A && p2movetype = H && fvar(35)<=0)
ctrl = 0

[State -3,しゃがみ解除]
type = ChangeState
value = 12
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = stateno = 11
triggerall = !ctrl
triggerall = alive && (time>12||p2dist x<0)
trigger1 = RoundState != 2 ;|| ceil(facing*(playerid(var(56)),Pos X-Pos X)) < 0 || p2dist x<0
;trigger2 = inguarddist || playerid(var(56)),movetype = A
;trigger3 = playerid(var(56)),ctrl || playerid(var(56)),statetype != L
ctrl = 1

;バックステップ
[State -1, Back Step]
type = ChangeState
value = 105
triggerall = var(59)>0
triggerall = RoundState = 2
triggerall = alive
trigger1 = floor(Pos Y) < -10
trigger1 = stateno = [0,22]
trigger1 = Time >= 1

;------------------------------ 地上立ち回り技振り ------------------------------------------
;フーリー・クーリー
[State -1, フーリー・クーリー]
type = ChangeState
value = 3100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = power >= 3000
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5100,5210]
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || (p2stateno=[120,155])
triggerall = p2statetype=A && helper(50000+id),var(37)>=100
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = random<var(59)*var(59)*40 || movecontact || (p2stateno=[120,155])
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])||fvar(39)=30
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=3) && movecontact
triggerall = P2life>=((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*ifelse(p2movetype=H,1.5,1))*200.0)
triggerall = P2life<((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*ifelse(p2movetype=H,1.5,1))*550.0)
triggerall = (var(54)&127)%5<=ifelse(life<=300,2,1)+(p2movetype!=A)+(life>666)+(facing=playerid(var(56)),facing)
triggerall = playerid(var(56)),const(movement.airjump.num)=0 || !(playerid(var(56)),ctrl&&playerid(var(56)),stateno>=200)
trigger1 = p2bodydist x+(fvar(35)*13) =[25,55]
trigger1 = P2BodyDist Y+floor(13*(fvar(34))+(13*(13+1)/2)*fvar(38))<-20
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(13*(fvar(34))+(13*(13+1)/2)*fvar(38)) >= ifelse(fvar(34)<0,-75,-85)-random%10
trigger2 = p2bodydist x+(fvar(35)*14) =[40,70]
trigger2 = P2BodyDist Y+floor(14*(fvar(34))+(14*(14+1)/2)*fvar(38))<-20
trigger2 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(14*(fvar(34))+(14*(14+1)/2)*fvar(38)) >= ifelse(fvar(34)<0,-75,-85)-random%10
trigger3 = p2bodydist x+(fvar(35)*15) =[55,95]
trigger3 = P2BodyDist Y+floor(15*(fvar(34))+(15*(15+1)/2)*fvar(38))<-20
trigger3 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(15*(fvar(34))+(15*(15+1)/2)*fvar(38)) >= ifelse(fvar(34)<0,-75,-85)-random%10


;弱クレイジーサンシャイン
[State -1, 弱クレイジーサンシャイン]
type = ChangeState
value = floor(fvar(39));1000
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5100,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || (p2stateno=[120,155])
triggerall = p2statetype=A
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = !playerid(var(56)),hitdefattr = SCA,SA && (playerid(var(56)),stateno<1000||playerid(var(56)),stateno=5040)
triggerall = !playerid(var(56)),hitdefattr = SCA,HA && p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])||fvar(39)=30
triggerall = p2bodydist x>100 || (p2stateno=[120,155])||playerid(var(56)),stateno=5040 || movecontact
triggerall = random<var(59)*var(59)*28 || p2stateno = 5210 || (p2stateno=[150,155]) || movecontact
triggerall = (var(54)&127)%6<=ifelse(life>420,2,1)+(p2movetype!=A)+(life>666)-(facing=playerid(var(56)),facing)-((playerid(var(56)),const(movement.airjump.num)>0)*2) || p2stateno = 5210 || (p2stateno=[150,155]) || movecontact
trigger1 = P2BodyDist X+floor(20*(fvar(35))) = [100+random%10,120+random%15]
trigger1 = P2BodyDist Y+floor(20*(fvar(34))+(20*(20+1)/2)*fvar(38))<0+(10*(life<=500))
trigger1 = P2BodyDist Y+floor(20*(fvar(34))+(20*(20+1)/2)*fvar(38)) >= -10-random%5-(10*(life>500))
trigger1 = fvar(39):=1000||1
trigger2 = P2BodyDist X+floor(17*(fvar(35))) = [80+random%10,100+random%15]
trigger2 = P2BodyDist Y+floor(17*(fvar(34))+(17*(17+1)/2)*fvar(38))<0+(10*(life<=500))
trigger2 = P2BodyDist Y+floor(17*(fvar(34))+(17*(17+1)/2)*fvar(38)) >= -10-random%5-(10*(life>500))
trigger2 = fvar(39):=1000||1
trigger3 = (p2stateno=[120,155])
trigger3 = P2BodyDist X+floor(15*(fvar(35))) = [40-random%10,85-random%5]
trigger3 = P2BodyDist Y+floor(15*(fvar(34))+(15*(15+1)/2)*fvar(38))<0+(10*(life<=500))
trigger3 = P2BodyDist Y+floor(15*(fvar(34))+(15*(15+1)/2)*fvar(38)) >= -40+random%5-(10*(life>500))
trigger3 = fvar(39):=1000||1
trigger4 = fvar(35)>=0 && life>333
trigger4 = P2BodyDist X+floor(26*(fvar(35))) = [145-random%10,165-random%5]
trigger4 = P2BodyDist Y+floor(26*(fvar(34))+(26*(26+1)/2)*fvar(38))<0
trigger4 = P2BodyDist Y+floor(26*(fvar(34))+(26*(26+1)/2)*fvar(38)) >= -20-random%5-(10*(life>500))
trigger4 = fvar(39):=1050||1

;強ラスト・ダイナソー
[State -1, 強ラスト・ダイナソー]
type = ChangeState
value = 1350
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5100,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || (p2stateno=[120,155]) || p2stateno=[5000,5099]
triggerall = p2statetype=A
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = random<var(59)*var(59)*28 || p2stateno = 5210 || movecontact || (p2stateno=[120,155]) || p2stateno=[5000,5099]
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])||fvar(39)=30
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=2)
triggerall = P2BodyDist X+floor(14*(fvar(35))) = [-10+random%11-(25*backedgebodydist<3)-random%10+(15*(fvar(35)=0)),40+random%15]
triggerall = P2BodyDist Y+floor(14*(fvar(34))+(14*(14+1)/2)*fvar(38))<0
triggerall = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(14*(fvar(34))+(14*(14+1)/2)*fvar(38)) >= ifelse(fvar(34)<0,-45,-55)-random%10-((playerid(var(56)),const(size.mid.pos.y)*.5)*(p2stateno=[120,155]))
trigger1 = P2life<((Const(data.attack)+.0)/(playerid(var(56)),Const(data.defence)+.0)*120.0)|| p2stateno=[120,155]
trigger2 = (var(54)&127)%5<=ifelse(life>=260,2,1)+(p2movetype!=A)+(life>666)+(facing=playerid(var(56)),facing)-((playerid(var(56)),const(movement.airjump.num)>0)*2) || p2stateno = 5210

;弱ラスト・ダイナソー
[State -1, 弱ラスト・ダイナソー]
type = ChangeState
value = 1300
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5100,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || (p2stateno=[120,155]) || movecontact || p2stateno=[5000,5099]
triggerall = p2statetype=A
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = (((var(54)&122880)/8192)<=7)
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = random<var(59)*var(59)*28 || p2stateno = 5210 || (p2stateno=[120,155]) || p2stateno=[5000,5099]
triggerall = fvar(39)=0 || fvar(39)=30
triggerall = fvar(39):=0||1
triggerall = fvar(39):=((stateno=200||stateno=215||stateno=230||(stateno=240 && AnimElemtime(9)<0)||stateno=245||stateno=400||stateno=410||stateno=440||stateno=300||stateno=310||(stateno = 315 && AnimElemtime(14) < 0)) && movecontact)*30||1
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])||fvar(39)=30
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=2)
triggerall = P2BodyDist X+floor(11*(fvar(35))) = [-10+random%11-(25*backedgebodydist<3)-random%10+(15*(fvar(35)=0)),40+random%15]
triggerall = P2BodyDist Y+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38))<0
triggerall = P2BodyDist Y+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38)) >=-60-random%10
trigger1 = p2stateno=[150,155]
trigger2 = playerid(var(56)),hitdefattr = A,AT && var(59)>=7

;遠距離立ち強キック
[State -1, Standing Strong Kick]
type = ChangeState
value = 240
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = p2bodydist X >= 20
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5000,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || p2stateno=[120,155] ;&& abs (fvar(34))<5
triggerall = p2statetype=A && p2movetype=I
triggerall = !playerid(var(56)),hitdefattr = SCA,SA 
triggerall = !playerid(var(56)),hitdefattr = SCA,HA && p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=5)
triggerall = random<var(59)*var(59)*28 || p2stateno = 5210 || p2stateno=[150,155]
triggerall = (var(54)&127)%7<=ifelse(life>420,2,1)+(p2movetype!=A)+(life>666)-(facing=playerid(var(56)),facing)-((playerid(var(56)),const(movement.airjump.num)>0)*2) || p2stateno = 5210 || p2stateno=[150,155]
trigger1 = P2BodyDist X+floor(11*(fvar(35))) = [65+random%10,95+random%5-((fvar(35)=0)*5)]
trigger1 = P2BodyDist Y+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38))<0-(10*(life<=500))
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38)) >= -95+random%20

;しゃがみ弱キック
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5000,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
;triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || p2stateno=[120,155] ;&& abs (fvar(34))<5
triggerall = !playerid(var(56)),hitdefattr = SCA,HA && p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = fvar(34)>0
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=12)
triggerall = random<var(59)*var(59)*32 || p2stateno = 5210 || (p2stateno=[150,155])||fvar(39)=430.1
triggerall = (var(54)&127)%7>=6-ifelse(life>420,2,1)-(p2movetype!=A)-(life>666)-(facing=playerid(var(56)),facing) || p2stateno = 5210 || (p2stateno=[150,155])||p2movetype=I||p2stateno=5040||playerid(var(56)),time>12||fvar(39)=430.1
trigger1 = P2BodyDist X+floor(4*(fvar(35))) = [-25+random%10-((p2bodydist x=[-5,3])*20),45+random%5]
trigger1 = P2BodyDist Y+floor(4*(fvar(34))+(4*(4+1)/2)*fvar(38))<10-(10*(life<=500))
trigger1 = P2BodyDist Y+floor(4*(fvar(34))+(4*(4+1)/2)*fvar(38)) >= 0
trigger1 = fvar(39):=0||1
trigger2 = P2BodyDist X+floor(12*(fvar(35))) = [-25+random%10-((p2bodydist x=[-5,3])*20),45+random%5]
trigger2 = P2BodyDist Y+floor(12*(fvar(34))+(12*(12+1)/2)*fvar(38))<10-(10*(life<=500))
trigger2 = P2BodyDist Y+floor(12*(fvar(34))+(12*(12+1)/2)*fvar(38)) >= 0
trigger2 = fvar(39):=430.1
trigger3 = fvar(39)=430.1
trigger3 = fvar(39):=0||1


[state -1,スイッチ]
type = varset
triggerall = var(59)>5
triggerall = !IsHelper && playeridexist(var(56))
triggerall = fvar(39)=430.1
trigger1 = p2statetype!=A || movetype=H || p2movetype=H
FV = 39
value = 0
IgnoreHitPause = 1

;立ち弱パンチ
[State -1, Stand Light Punch]
type = ChangeState
value = 200
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5100,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = p2statetype=A
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = !playerid(var(56)),hitdefattr = SCA,SA,HA && p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=12)
triggerall = random<var(59)*var(59)*28 || p2stateno = 5210 || (p2stateno=[120,155]) || p2stateno=[5000,5099]
Trigger1 = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
trigger1 = P2movetype!=H || (p2stateno=[120,155])
trigger1 = (var(54)&127)<=ifelse(life>420,30,20)+((p2movetype!=A)*10)+((life>666)*5)-((facing=playerid(var(56)),facing)*10) || p2stateno = 5210 || (p2stateno=[120,155]) || (p2stateno=[5000,5099]) || (p2stateno<100&&p2bodydist x<10)
trigger1 = P2BodyDist X+floor(5*(fvar(35))) = [-5-random%10-(15*(fvar(35)<0)),25+random%5]
trigger1 = P2BodyDist Y+floor(5*(fvar(34))+(5*(5+1)/2)*fvar(38))<0-(10*(life<=500))
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(5*(fvar(34))+(5*(5+1)/2)*fvar(38)) >= -100+random%20
trigger2 = stateno = 200 && movecontact
trigger2 = P2BodyDist X+floor(5*(fvar(35))) <= 105-random%5
trigger2 = P2movetype!=H || (p2stateno=[5000,5099]) ;|| (p2stateno=[120,155])

;弱ファニーバニー
[State -1, 弱ファニーバニー]
type = ChangeState
value = 1100
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = p2bodydist X >= 20
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5000,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H || p2stateno=[120,155] ;&& abs (fvar(34))<5
triggerall = p2statetype=A
triggerall = !playerid(var(56)),hitdefattr = SCA,SA 
triggerall = !playerid(var(56)),hitdefattr = SCA,HA && p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = stateno = 240 && AnimElemtime(9) < 0 && movecontact
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=5)
trigger1 = p2stateno=[150,155]
trigger1 = (var(54)&127)%7<=ifelse(life>420,2,1)+(p2movetype!=A)+(life>666)-(facing=playerid(var(56)),facing)-((playerid(var(56)),const(movement.airjump.num)>0)*2) || p2stateno = 5210 || p2stateno=[150,155]

;前緊急回避
[State -1, T S]
type = ChangeState
value = 700
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5100,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >-10 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = p2stateno!=[90,119]
triggerall = stateno != [150,152]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = P2movetype!=H
triggerall = p2statetype=A
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
triggerall = random<var(59)*var(59)*36
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = frontedgebodydist>20
triggerall = P2BodyDist X <= 40-random%10 && fvar(35)<0
triggerall = P2BodyDist Y+floor(14*(fvar(34))+(14*(14+1)/2)*fvar(38))<0 && fvar(34)<=0
trigger1 = helper(50000+id),var(37)>=100
trigger2 = (var(54)&127)%9<=ifelse(life>=260,2,1)+(p2movetype!=A)+(life>666)-(facing=playerid(var(56)),facing)

[state -3]
type = ChangeState
value = 40
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L && prevstateno!=5120
triggerall = statetype != A && p2stateno != [5000,5210)
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = p2stateno!=[90,119]
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno != 5201 && p2stateno != 5120
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)=0 ;&& (life>200 || p2life<25 || ((lifemax+.0)/(life+.0))*1.1<=((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)))
triggerall = ((var(54)&8064)/128)>=var(55)|| var(59)>6
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = P2movetype!=H || p2stateno=[120,155] ;&& abs (fvar(34))<5
triggerall = p2statetype=A && life>250 && fvar(35)!=0
triggerall = !playerid(var(56)),hitdefattr = SCA,SA || life>400 || fvar(39)=700
triggerall = !playerid(var(56)),hitdefattr = SCA,HA && p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = helper(60000+id),var(47)=0 && p2stateno!=[101,108]
Triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100||stateno=[10,12])
triggerall = !(p2stateno = 5210 && playerid(var(56)),time<=6)
triggerall = random<var(59)*var(59)*18 || p2stateno = 5210
triggerall = (var(54)&127)%12<=ifelse(life>380,2,1)+(p2movetype!=A)+(life>666)-(facing=playerid(var(56)),facing)-((playerid(var(56)),const(movement.airjump.num)>0)*2) || p2stateno = 5210
trigger1 = P2BodyDist X+floor(10*(fvar(35))) = [0,40+random%10]
trigger1 = P2BodyDist Y+floor(10*(fvar(34))+(10*(10+1)/2)*fvar(38))<0
trigger1 = P2BodyDist Y+(playerid(var(56)),const(size.mid.pos.y)*.5)+floor(10*(fvar(34))+(10*(10+1)/2)*fvar(38)) = [-95-random%10,-55-random%10]
trigger1 = fvar(39):=1.2

;ジャンプ弱キック
[State -1, Jump Light Kick]
type = ChangeState
value = 630
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = stateno != 105
triggerall = statetype = A
triggerall = ctrl || (stateno = [120,149])
trigger1 = fvar(39)=1.2
trigger1 = fvar(39):=0||1

[State -3,]
type = varset
triggerall = !IsHelper && time>1
trigger1 = fvar(39)=1.2
trigger1 = movetype=H || movetype=A
fvar(39) = 0

;しゃがみ強パンチ
[State -1, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59)>4
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
TriggerAll = P2statetype != L
triggerall = statetype != A
triggerall = numhelper(50000+id) && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0 && numhelper(60000+id)
triggerall = helper(50000+id),fvar(33)=0
triggerall = numhelper(60000+id)
triggerall = helper(60000+id),var(6)=0
triggerall = p2stateno = 5201
triggerall = helper(50000+id),var(58)=0
triggerall = ((var(54)&8064)/128)>=var(55) || playerid(var(56)),Time>=var(55)|| var(59)>6
triggerall = p2statetype=A
Triggerall = !inguarddist || life>333
triggerall = helper(60000+id),var(47)=0
triggerall = random<var(59)*var(59)*80
triggerall = ctrl || (stateno = [120,140])||stateno=21 || stateno = 1 || (stateno = [10,12]) || stateno = 100
trigger1 = P2BodyDist X+floor(10*(fvar(35))) <= 50
trigger1 = P2BodyDist Y+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38)) > 0

[state -1,スイッチ]
type = varset
triggerall = var(59)>5
triggerall = !IsHelper && playeridexist(var(56))
triggerall = fvar(39)!=800.5||(p2bodydist x=[16,80])
trigger1 = (p2bodydist x=[-60,80])
trigger1 = p2statetype!=A &&stateno=52
FV = 39
value = 430
IgnoreHitPause = 1

[state -1,スイッチ]
type = varset
triggerall = var(59)>5
triggerall = !IsHelper && playeridexist(var(56))
triggerall = fvar(39)=430
trigger1 = (p2bodydist x!=[-30,80])|| p2statetype=A || movetype!=I || p2movetype=H
FV = 39
value = 0
IgnoreHitPause = 1

;フーリー・クーリー
[State -1, フーリー・クーリー/ぶっぱ]
type = ChangeState
value = 3100
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = playerid(var(56)),statetype != L
triggerall = power >= 3000
triggerall = statetype != A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
trigger1 = var(59)<5
trigger1 = p2bodydist x<160 && p2dist y>-140
trigger1 = (var(54)&127)<=10-var(59)

;ハイブリット・レインボー
[State -1, ハイブリット・レインボー/ぶっぱ]
type = ChangeState
value = 2100
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = playerid(var(56)),statetype != L
triggerall = power >= 1000
triggerall = statetype != A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
trigger1 = var(59)<5
trigger1 = p2bodydist x<80 && p2dist y>-90
trigger1 = (var(54)&127)=[11,20-var(59)]

;強ラスト・ダイナソー
[State -1, 強ラスト・ダイナソー]
type = ChangeState
value = 1350
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2
triggerall = playerid(var(56)),statetype != L
triggerall = statetype != A
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
trigger1 = var(59)<5
trigger1 = p2bodydist x<60 && p2dist y>-90
trigger1 = (var(54)&127)=[21,25]

[State -1, Throw]
type = ChangeState
value = 22
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && p2statetype != L && p2stateno != [5000,5210)
TriggerAll = playerid(var(56)),statetype != L && prevstateno!=5120
triggerall = statetype != A && playerid(var(56)),stateno != [5000,5210)
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12) && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=9)
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),stateno != [150,155]
triggerall = playerid(var(56)),statetype != A
triggerall = playerid(var(56)),movetype!=A||(playerid(var(56)),movetype=A&&playerid(var(56)),time<var(55))||fvar(39)=700||(var(59)>6&&p2stateno<600)
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)!=2 && helper(50000+id),fvar(33)=0
triggerall = (var(54)&262144)=0
triggerall = p2movetype != H
triggerall = p2stateno!=[150,155]
triggerall = P2BodyDist Y=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = (playerid(var(56)),stateno!=[5000,5210]) && (playerid(var(56)),prevstateno!=5201)
triggerall = (helper(50000+id),fvar(20) != playerid(var(56)),stateno) || helper(50000+id),fvar(20)=0
triggerall = (helper(50000+id),fvar(21) != playerid(var(56)),stateno) || helper(50000+id),fvar(21)=0
triggerall = (helper(50000+id),fvar(22) != playerid(var(56)),stateno) || helper(50000+id),fvar(22)=0
triggerall = p2bodydist X < 15
triggerall = p2statetype != A && p2movetype != H
trigger1 = var(59)>=5
trigger1 = stateno = 100
trigger1 = fvar(39):=800.5

[State -1, Throw]
type = ChangeState
value = 800+(5*(helper(60000+id),fvar(38)*facing>helper(60000+id),fvar(37)*facing))
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && p2statetype != L && p2stateno != [5000,5210)
TriggerAll = playerid(var(56)),statetype != L && prevstateno!=5120
triggerall = statetype != A && playerid(var(56)),stateno != [5000,5210)
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12) && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=9)
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),stateno != [150,155]
triggerall = playerid(var(56)),statetype != A
triggerall = helper(50000+id),var(58)=0
triggerall = helper(50000+id),var(59)!=2 && helper(50000+id),fvar(33)=0
triggerall = playerid(var(56)),movetype!=A||(playerid(var(56)),movetype=A&&playerid(var(56)),time<var(55))||fvar(39)=700||(var(59)>6&&p2stateno<600)
triggerall = (var(54)&262144)=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = p2movetype != H
triggerall = p2stateno!=[150,155]
triggerall = P2BodyDist Y=0
triggerall = (playerid(var(56)),stateno!=[5000,5210]) && (playerid(var(56)),prevstateno!=5201)
triggerall = (helper(50000+id),fvar(20) != playerid(var(56)),stateno) || helper(50000+id),fvar(20)=0
triggerall = (helper(50000+id),fvar(21) != playerid(var(56)),stateno) || helper(50000+id),fvar(21)=0
triggerall = (helper(50000+id),fvar(22) != playerid(var(56)),stateno) || helper(50000+id),fvar(22)=0
triggerall = stateno != 100
triggerall = p2bodydist X < 15
triggerall = p2statetype != A && p2movetype != H
trigger1 = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12]))||stateno=22
trigger1 = var(59)>=5
trigger1 = anim = 20 || (playerid(var(56)),stateno=52&&playerid(var(56)),facing=facing) || p2stateno = 52
trigger2 = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12]))
trigger2 = (var(54)&127)<=var(59)*var(59)+((var(55)<=1)*10)
trigger3 = var(59)>=7
trigger3 = (ctrl || (stateno = [120,149])||stateno=21||(stateno=[10,12]))
trigger3 = movetype=A && !movecontact

;しゃがみ弱キック
[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && p2statetype != L && p2stateno != [5000,5210)
TriggerAll = playerid(var(56)),statetype != L && prevstateno!=5120
triggerall = statetype != A && playerid(var(56)),stateno != [5000,5210)
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12) && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),movetype != H || (stateno = 21 && time>=600 && playerid(var(56)),movetype = H)
triggerall = fvar(39)=0||fvar(39)=700||fvar(39)=10 || fvar(39)=430
triggerall = playerid(var(56)),movetype!=A||(playerid(var(56)),movetype=A&&playerid(var(56)),time<var(55))
triggerall = helper(50000+id),var(58)=0 ;&& helper(60000+id),var(6)=0
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = p2bodydist y = 0
Triggerall = !inguarddist || life>250 || fvar(39)=430
triggerall = helper(60000+id),var(47)=0 && helper(60000+id),var(1)>=-1000
triggerall = random<var(59)*70 || stateno = 100 || fvar(39)=430
triggerall = stateno!=100 || (var(54)&127)%5<=1 || fvar(39)=430
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
trigger1 = (P2BodyDist X+floor(5*(fvar(35))) = [-15,50+((fvar(39)=430)*10)]) || (stateno=100 && P2BodyDist X+floor(5*(fvar(35))) <=50)
trigger1 = P2BodyDist Y+floor(5*(fvar(34))+(5*(5+1)/2)*fvar(38)) >= 0
trigger1 = (var(54)&127)%5<=2 || stateno = 100 || fvar(39)=430
trigger2 = (P2BodyDist X+floor(3*(fvar(35))) = [-5,50+random%5+((fvar(39)=430)*10)]) ;|| (stateno=100 && P2BodyDist X+floor(6*(fvar(35))) <=60)
trigger2 = P2BodyDist Y+floor(3*(fvar(34))+(3*(3+1)/2)*fvar(38)) >= 0 && stateno!=100
trigger2 = (var(54)&127)=[15,30]

;立ち弱キック
[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && p2statetype != L && p2stateno != [5000,5210)
TriggerAll = playerid(var(56)),statetype != L && prevstateno!=5120
triggerall = statetype != A && playerid(var(56)),stateno != [5000,5210)
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12) && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),movetype != H || (stateno = 21 && time>=600 && playerid(var(56)),movetype = H)
triggerall = fvar(39)=0||fvar(39)=700||fvar(39)=10 || fvar(39)=430
triggerall = playerid(var(56)),movetype!=A||(playerid(var(56)),movetype=A&&playerid(var(56)),time<var(55))
triggerall = helper(50000+id),var(58)=0 ;&& helper(60000+id),var(6)=0
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = p2bodydist y = 0
Triggerall = !inguarddist || life>250
triggerall = helper(60000+id),var(47)=0 && helper(60000+id),var(1)>=-1000
triggerall = random<var(59)*70 || stateno = 100
triggerall = stateno!=100 || (var(54)&127)%5=3
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
trigger1 = (P2BodyDist X+floor(5*(fvar(35))) = [-15,50+random%10+((life>444)*(random%15))]) || (stateno=100 && P2BodyDist X+floor(5*(fvar(35))) <=50)
trigger1 = P2BodyDist Y+floor(5*(fvar(34))+(5*(5+1)/2)*fvar(38)) >= 0
trigger1 = (var(54)&127)%5=3 || stateno = 100
trigger2 = (P2BodyDist X+floor(3*(fvar(35))) = [-5,50+random%10+((life>444)*(random%15))]) ;|| (stateno=100 && P2BodyDist X+floor(6*(fvar(35))) <=60)
trigger2 = P2BodyDist Y+floor(3*(fvar(34))+(3*(3+1)/2)*fvar(38)) >= 0 && stateno!=100
trigger2 = (var(54)&127)=[71,90+(playerid(var(56)),power*.001)]

[state -1,]
type=changestate
value=floor(fvar(39))
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && p2statetype != L && p2stateno != [5000,5210)
TriggerAll = playerid(var(56)),statetype != L && prevstateno!=5120
triggerall = statetype != A && playerid(var(56)),stateno != [5000,5210)
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12) && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),movetype != H || (stateno = 21 && time>=600 && playerid(var(56)),movetype = H)
triggerall = fvar(39)=0||fvar(39)=700||fvar(39)=10
triggerall = playerid(var(56)),movetype!=A||(playerid(var(56)),movetype=A&&playerid(var(56)),time<var(55))
triggerall = helper(50000+id),var(58)=0 ;&& helper(60000+id),var(6)=0
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = p2bodydist y = 0 && fvar(34)=0
triggerall = helper(60000+id),var(47)=0 && helper(60000+id),var(1)>=-1000
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
Trigger1 = (!inguarddist && life>300) || var(59)<7
trigger1 = random<var(59)*40 || stateno = 100
trigger1 = stateno!=100 || (var(54)&127)%5=2
trigger1 = (P2BodyDist X+floor(7*(fvar(35))) = [36,50-random%5])
trigger1 = (var(54)&127)=[31,40-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger1 = fvar(39):=410+((random%2)*30)
Trigger2 = (!inguarddist && life>400) || var(59)<6
trigger2 = random<var(59)*30 || stateno = 100
trigger2 = stateno!=100 || (var(54)&127)%5=2
trigger2 = (P2BodyDist X+floor(8*(fvar(35))) = [80-random%10,100-random%10])
trigger2 = (var(54)&127)=[41,50-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger2 = fvar(39):=240
Trigger3 = (!inguarddist && life>550+(var(59)*var(59)*2)) || var(59)<5
trigger3 = random<var(59)*30 ;|| stateno = 100
trigger3 = (P2BodyDist X+floor(13*(fvar(35))) = [70-random%10,90-random%10])
trigger3 = playerid(var(56)),power<3000-((random%2)*1000)
trigger3 = (var(54)&127)=[61,70-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger3 = fvar(39):=310
Trigger4 = (!inguarddist && life>200+(var(59)*var(59)*2)) || var(59)<5
trigger4 = random<var(59)*30 && fvar(35)<=1
trigger4 = (P2BodyDist X+floor(13*(fvar(35))) = [90-random%10,140-random%10])
trigger4 = playerid(var(56)),power<3000-((random%2)*1000)
trigger4 = (var(54)&127)=[71,80-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger4 = fvar(39):=1000
Trigger5 = (!inguarddist && life>300+(var(59)*var(59)*2)) || var(59)<5
trigger5 = random<var(59)*30 && fvar(35)<=1
trigger5 = (P2BodyDist X+floor(13*(fvar(35))) = [140-random%10,190-random%10])
trigger5 = playerid(var(56)),power<3000-((random%2)*1000)
trigger5 = (var(54)&127)=[1,10-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger5 = fvar(39):=1050
Trigger6 = (!inguarddist && life>200+(var(59)*var(59)*2)) || var(59)<5
trigger6 = random<var(59)*30 && fvar(35)<=1
trigger6 = (P2BodyDist X+floor(13*(fvar(35))) = [110+random%10,140-random%10])
trigger6 = playerid(var(56)),power<3000-((random%2)*1000)
trigger6 = (var(54)&127)=[81,90-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger6 = fvar(39):=1100
Trigger7 = (!inguarddist && life>250+(var(59)*var(59)*2)) || var(59)<5
trigger7 = random<var(59)*30 && fvar(35)<=1
trigger7 = (P2BodyDist X+floor(13*(fvar(35))) = [160-random%10,200-random%10])
trigger7 = playerid(var(56)),power<3000-((random%2)*1000)
trigger7 = (var(54)&127)=[91,100-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger7 = fvar(39):=1150
Trigger8 = (!inguarddist && life>350+(var(59)*var(59)*2)) || var(59)<5
trigger8 = random<var(59)*30 && fvar(35)<=1
trigger8 = (P2BodyDist X+floor(13*(fvar(35))) = [70-random%10,90-random%10])
trigger8 = playerid(var(56)),power<3000-((random%2)*1000)
trigger8 = (var(54)&127)=[91,100-(playerid(var(56)),power*.001)+(3*(power<1000))+(3*(power<2000))+(3*(power<3000))]
trigger8 = fvar(39):=1200

[State -3,]
type = varset
triggerall = !IsHelper && time>1
trigger1 = fvar(39)=410 || fvar(39)=440 || fvar(39)=240 || fvar(39)=310 || fvar(39)=1000 || fvar(39)=1050 || fvar(39)=1100 || fvar(39)=1150 || fvar(39)=1200
trigger1 = fvar(39)=stateno || movetype=H || movetype=A
fvar(39) = 0

[State -1, Crouching Light Kick]
type = ChangeState
value = ifelse(random%3!=0,200+(((var(54)&127)%3=0)*30),400+(((var(54)&127)%2)*30))
triggerall = var(59)>0
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = RoundState = 2 && p2statetype != L && p2stateno != [5000,5210)
TriggerAll = playerid(var(56)),statetype != L && prevstateno!=5120
triggerall = statetype != A && playerid(var(56)),stateno != [5000,5210)
triggerall = playerid(var(56)),stateno != 5201 && playerid(var(56)),stateno != 5120 && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12) && !(playerid(var(56)),stateno = 5210 && playerid(var(56)),time<=12)
triggerall = numhelper(50000+id) && numhelper(60000+id)
triggerall = playerid(var(56)),movetype != H || (stateno = 21 && time>=600 && playerid(var(56)),movetype = H)
triggerall = fvar(39)=0||fvar(39)=700||fvar(39)=10
triggerall = playerid(var(56)),movetype!=A||(playerid(var(56)),movetype=A&&playerid(var(56)),time<var(55))
triggerall = helper(50000+id),var(58)=0 ;&& helper(60000+id),var(6)=0
triggerall = helper(50000+id),var(59)=0 && helper(50000+id),fvar(33)=0
triggerall = ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0
triggerall = p2bodydist y = 0
Triggerall = !inguarddist || life>250
triggerall = helper(60000+id),var(47)=0 && helper(60000+id),var(1)>=-1000
triggerall = random<var(59)*80
;triggerall = stateno!=100
triggerall = helper(50000+id),var(47)!=playerid(var(56)),stateno || helper(50000+id),var(47)=0
triggerall = (helper(50000+id),var(47)!=[playerid(var(56)),stateno-50,playerid(var(56)),stateno-50]) || helper(50000+id),var(47)=0
triggerall = helper(50000+id),var(47)!=playerid(var(56)),prevstateno || helper(50000+id),var(47)=0
triggerall = (ctrl || (stateno = [120,149])||stateno=21||stateno=100) || stateno = [10,12]
trigger1 = (P2BodyDist X+floor(3*(fvar(35))) = [61+random%20-random%10,200+random%20])
trigger1 = P2BodyDist Y+floor(3*(fvar(34))+(3*(3+1)/2)*fvar(38)) >= -80 && stateno!=100
trigger1 = (var(54)&127)=[81+(10*(life<250)),100]

;------------------------------ 空中立ち回り技振り ------------------------------------------
;サッド・サッド・キディ
[State -1, サッド・サッド・キディ]
type = ChangeState
value = ifelse(playerid(var(56)),BackEdgeBodyDist<=0,610,320);320
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != 105
triggerall = playerid(var(56)),stateno!=[5100,5120]
triggerall = RoundState = 2
TriggerAll = P2statetype != L
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype = A ;&& ceil(facing*(playerid(var(56)),Pos X-Pos X)) <10
triggerall = fvar(39)=0 || fvar(39)=700 || fvar(39)=3.7 || fvar(39)=-3.7 || fvar(39)=6.7 || fvar(39)=9.7
triggerall = (var(54)&127)<=90+(10*(p2movetype=A||inguarddist)) || fvar(39)=3.7 || fvar(39)=-3.7 || fvar(39)=6.7 || fvar(39)=9.7
triggerall = (ctrl || (stateno = [120,140]))
triggerall = p2bodydist x!=[-3,3]
triggerall = p2statetype!=A || p2dist x<0
trigger1 = pos y<-34-((p2statetype=S)*(6+random%10)) || p2dist x<0
trigger1 = P2BodyDist X-floor(9*(vel x-fvar(35))) = [-105-random%15,-5-random%10+((fvar(35)>0)*(random%20))]
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,35-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])

;空中強パンチ
[State -1, Jump Strong Punch]
type = ChangeState
value = 610
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != 105
triggerall = playerid(var(56)),stateno!=[5100,5120]
triggerall = RoundState = 2
TriggerAll = P2statetype != L
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype = A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >10
triggerall = fvar(39)=0 || fvar(39)=700 || fvar(39)=3.7 || fvar(39)=-3.7 || fvar(39)=6.7 || fvar(39)=9.7
triggerall = (var(54)&127)<=90+(10*(p2movetype=A||inguarddist)) || fvar(39)=3.7 || fvar(39)=-3.7 || fvar(39)=6.7 || fvar(39)=9.7
triggerall = (ctrl || (stateno = [120,140]))
triggerall = pos y>=-34-((p2statetype=S)*(6+random%10)) || p2dist x>=0
trigger1 = P2BodyDist X-floor(9*(vel x-fvar(35))) <= 30+random%5
trigger1 = ((Pos Y*-1)-floor(9*(vel Y)+(9*(9+1)/2)*const(movement.yaccel))=[0,20-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])
trigger2 = P2BodyDist X-floor(11*(vel x-fvar(35))) <= 30+random%5
trigger2 = ((Pos Y*-1)-floor(11*(vel Y)+(11*(11+1)/2)*const(movement.yaccel))=[0,15-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])
trigger3 = P2BodyDist X-floor(13*(vel x-fvar(35))) = [20,30+random%5]
trigger3 = ((Pos Y*-1)-floor(13*(vel Y)+(13*(13+1)/2)*const(movement.yaccel))=[0,10-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])
trigger4 = P2BodyDist X-floor(15*(vel x-fvar(35))) = [25,30+random%5]
trigger4 = ((Pos Y*-1)-floor(15*(vel Y)+(15*(15+1)/2)*const(movement.yaccel))=[0,10-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])
;
;斜めジャンプ強キック
[State -1, Jump Strong Kick]
type = ChangeState
value = 645
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != 105
triggerall = vel X != 0
triggerall = playerid(var(56)),stateno!=[5100,5120]
triggerall = RoundState = 2
TriggerAll = P2statetype != L
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype = A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >10
triggerall = fvar(39)=0 || fvar(39)=700 || fvar(39)=3.7 || fvar(39)=-3.7 || fvar(39)=6.7 || fvar(39)=9.7
triggerall = (var(54)&127)<=90+(10*(p2movetype=A||inguarddist)) || fvar(39)=3.7 || fvar(39)=-3.7 || fvar(39)=6.7 || fvar(39)=9.7
triggerall = (ctrl || (stateno = [120,140]))
trigger1 = P2BodyDist X-floor(13*(vel x-fvar(35))) = [30,50+random%5]
trigger1 = ((Pos Y*-1)-floor(13*(vel Y)+(13*(13+1)/2)*const(movement.yaccel))=[0,10-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])

[State -1,]
type = ChangeState
value = 630
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != 105
triggerall = playerid(var(56)),stateno!=[5100,5120]
triggerall = RoundState = 2
TriggerAll = P2statetype != L
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype = A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >10
triggerall = stateno=5040
triggerall = (var(54)&127)<=90+(10*(p2movetype=A||inguarddist))
triggerall = (ctrl || (stateno = [120,140]))
triggerall = pos y>=-34-((p2statetype=S)*(6+random%10)) || p2dist x>=0
trigger1 = P2BodyDist X-floor(5*(vel x-fvar(35))) <= 40+random%5
trigger1 = ((Pos Y*-1)-floor(5*(vel Y)+(5*(5+1)/2)*const(movement.yaccel))=[0,40-(25*p2statetype=C)+(((var(54)&127)%(8-var(59)))*10)])

;空中ふっとばし
[State -1, CD]
type = ChangeState
value = 650
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != 105
triggerall = playerid(var(56)),stateno!=[5000,5120]
triggerall = RoundState = 2
triggerall = fvar(39)=0
TriggerAll = P2statetype = A || (playerid(var(56)),time>1&&playerid(var(56)),stateno=[38,42]) || (playerid(var(56)),time>1&&playerid(var(56)),anim=40)
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype = A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >-10
triggerall = (ctrl || (stateno = [120,140]))
triggerall = playerid(var(56)),stateno<200 || playerid(var(56)),stateno>=1000
trigger1 = P2BodyDist X-floor(12*(vel x-fvar(35))) <= 55+random%10
trigger1 = floor(P2BodyDist Y-(floor(12*(vel Y)+(12*(12+1)/2)*const(movement.yaccel))))+ floor(P2BodyDist Y+(floor(12*(fvar(34))+(12*(12+1)/2)*fvar(38))))=[-10,80]
trigger1 = ((Pos Y*-1)-floor(12*(vel Y)+(12*(12+1)/2)*const(movement.yaccel)))>=0

;空中強パンチ
[State -1, Jump Strong Punch]
type = ChangeState
value = 610
triggerall = var(59)>3
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
triggerall = stateno != 105
triggerall = playerid(var(56)),stateno!=[5000,5120]
triggerall = RoundState = 2
triggerall = fvar(39)=0
TriggerAll = P2statetype = A || (playerid(var(56)),time>1&&playerid(var(56)),stateno=[38,42]) || (playerid(var(56)),time>1&&playerid(var(56)),anim=40)
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(59)=0
triggerall = statetype = A && ceil(facing*(playerid(var(56)),Pos X-Pos X)) >-10
triggerall = (ctrl || (stateno = [120,140]))
triggerall = playerid(var(56)),stateno<200 || playerid(var(56)),stateno>=1000
trigger1 = P2BodyDist X-floor(10*(vel x-fvar(35))) <= 40+random%10
trigger1 = floor(P2BodyDist Y-(floor(10*(vel Y)+(10*(10+1)/2)*const(movement.yaccel))))+ floor(P2BodyDist Y+(floor(10*(fvar(34))+(10*(10+1)/2)*fvar(38))))=[-50,50]
trigger1 = ((Pos Y*-1)-floor(10*(vel Y)+(10*(10+1)/2)*const(movement.yaccel)))>=0


;------------------------------- ガードキャンセル -------------------------------------------
;ふっとばし
[State -1, Throw]
type = ChangeState
value = 300
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = statetype = S
triggerall = stateno != 100
triggerall = power >= 1000
triggerall = stateno = [150,152]
triggerall = stateno = 150 || stateno = 152
triggerall = alive
triggerall = !IsHelper
TriggerAll = RoundState=2
triggerall = !numtarget
TriggerAll = playerid(var(56)),Alive && !playerid(var(56)),ctrl
triggerall = p2statetype != L
triggerall = numhelper
triggerall = numhelper(50000+id)
triggerall = p2life>((Const(data.attack)+.0)/((playerid(var(56)),Const(data.defence)+.0)*1.5)*550) || power!=[3000,3999]
trigger1 = playerid(var(56)),HitPauseTime>=11 || p2statetype = A
trigger1 = helper(50000+id),var(37)>=220-((backedgebodydist<15)*120)
trigger1 = random <= var(59)*helper(50000+id),var(37)*.1*((backedgebodydist<15)*20) || power>=2000
trigger1 = (((lifemax+.0)/(life+.0))*2)>((playerid(var(56)),lifemax+.0)/(playerid(var(56)),life+.0)) ;|| (backedgebodydist<15)
trigger1 = p2statetype != L && (p2movetype = A || (p2stateno=[200,699]))
trigger1 = (playerid(var(56)),hitdefattr=SCA,AA,AP,AT || (p2stateno=[200,699]))
trigger1 = (p2bodydist x+floor(11*(fvar(35))) = [-10,60-((p2statetype=C)*10)+(10*helper(50000+id),var(37)>=220)]) && p2bodydist y = [-55,0]
trigger1 = P2BodyDist Y+floor(11*(fvar(34))+(11*(11+1)/2)*fvar(38)) >= 0||p2statetype!=A
trigger2 = helper(50000+id),var(28)=5

;ガードキャンセル緊急回避前
[State -1, 700]
type = ChangeState
value = ifelse(p2bodydist x > 90&&(ifelse(facing=-1,helper(60000+id),fvar(38),helper(60000+id),fvar(37))>80),710,700)
triggerall = var(59)>2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = statetype != A
triggerall = stateno != 100
triggerall = power >= 1000
triggerall = stateno = [150,152]
triggerall = stateno = 150 || stateno = 151
triggerall = alive
triggerall = !IsHelper
TriggerAll = RoundState=2
triggerall = !numtarget
TriggerAll = playerid(var(56)),Alive && !playerid(var(56)),ctrl
triggerall = p2statetype != L
triggerall = numhelper
triggerall = numhelper(50000+id)
trigger1 = helper(50000+id),var(28)=6

;------------------------------------ ガード ------------------------------------------------
[state -3,ガード]
Type = ChangeState
Value = 120
TriggerAll = var(59)>2
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
TriggerAll = stateno = 140 || StateNo != [120,155]
TriggerAll = ctrl || (stateno = [120,140])||(stateno=[21,22])||(stateno=1) || stateno = 100 || stateno = [10,12]
triggerall = numhelper && fvar(39)!=700.9
triggerall = numhelper(50000+id)
triggerall = stateno != 50 || time>=2
triggerall = helper(50000+id),var(59)!=3
trigger1 = facing = playerid(var(56)),facing || ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
Trigger1 = helper(50000+id),inguarddist || inguarddist
Trigger1 = (playerid(var(56)),movetype!=A)||playerid(var(56)),Time>=var(55)||Anim=21||var(59)>6||statetype=A||(stateno=[10,12])||(stateno=[700,702])||(var(59)>=5&&p2statetype=A)||prevstateno=5120||random<var(59)*var(59)
trigger1 = Random<=var(59)*50||var(59)>4
trigger2 = helper(50000+id),inguarddist
trigger2 = helper(50000+id),var(58)>0
trigger2 = helper(50000+id),Pos y=Pos y+999
trigger2 = Random<=var(59)*100||var(59)>4
Trigger3 = (inguarddist) || ((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&var(59)>3&&abs(P2bodydist X)<80) || (p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
Trigger3 = Random<=var(59)*100||var(59)>4
Trigger3 = (playerid(var(56)),movetype!=A)||playerid(var(56)),Time>=var(55)||Anim=21||var(59)>6||statetype=A||(stateno=[10,12])||(stateno=[700,702])||(var(59)>=5&&p2statetype=A)||prevstateno=5120||random<var(59)*var(59)
Trigger4 = var(57)>var(55) || helper(50000+id),fvar(33)>0
ctrl = 0

[State -3]
type = AssertSpecial
trigger1 = var(59) = 1
trigger2 = numhelper(50000+id)
trigger2 = !(helper(50000+id),fvar(36)<helper(50000+id),fvar(38) || helper(50000+id),fvar(37)>=helper(50000+id),fvar(39))
trigger3 = numhelper(50000+id)
trigger3 = helper(50000+id),var(59)=3
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State -3]
type = ChangeState
trigger1 = var(59) >= 1 && time>30
trigger1 = roundstate > 2 && stateno = [120,155]
value = 0

;--------------------------------------------------------------------------------------------
[state -3]
type = ChangeState
value = ifelse(Frontedgebodydist<70,105,ifelse(p2bodydist x<=80,700,100))
triggerall = var(59)>4
triggerall = !IsHelper && playeridexist(var(56))
triggerall = !playerid(var(56)),alive
triggerall = alive && statetype != A && Win && fvar(39)!=-100
triggerall = roundstate = [2,3]
trigger1 = (Frontedgebodydist<65 && backedgebodydist>50)
trigger1 = ctrl && time>1 && prevstateno!=3115
trigger1 = (fvar(39):=-100) || 1
trigger2 = (Frontedgebodydist>65 && backedgebodydist<40)
trigger2 = ctrl && time>1 && prevstateno!=3115
trigger2 = (fvar(39):=-100) || 1

;サッド・サッド・キディ
[State -1, サッド・サッド・キディ]
type = ChangeState
value = 320
triggerall = var(59)>4
triggerall = Roundstate=2
triggerall = !IsHelper && playeridexist(var(56))
triggerall = alive
trigger1 = stateno = 105 && Pos Y < 0


[State -3,]
type = varset
triggerall = !IsHelper
trigger1 = (roundstate=[0,1])
trigger1 = (fvar(39)=-100)
fvar(39) = 0

[State -3,]
type = varset
triggerall = var(59)>4
triggerall = !IsHelper && playeridexist(var(56))
triggerall = !playerid(var(56)),alive
triggerall = alive && statetype != A && Win && fvar(39)!=-100
triggerall = roundstate = [2,3]
trigger1 = (Frontedgebodydist<65 && backedgebodydist>50)
trigger1 = prevstateno=2016
trigger1 = (fvar(39):=-100) || 1
fvar(39) = -100

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, Hi to Lo]
type = StateTypeSet
Trigger1 = var(59) = [1,5]
trigger1 = statetype = S && time = 0 && ((var(54)&8064)/128)<var(55)
trigger1 = var(59)<=3 || Random%4!=0
statetype = C
physics = C

[State 120,AI Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = C
physics = C

[State 120,AI Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 120,AI Stop Guarding]
type = ChangeState
Triggerall = var(59) > 0 && playeridexist(var(56))
Triggerall = var(57)<=var(55)
trigger1 = numhelper
trigger1 = numhelper(50000+id)
Trigger1 = !(helper(50000+id),inguarddist)
trigger1 = !inguarddist && helper(50000+id),fvar(33)=0
trigger1 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger1 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger2 = Roundstate>=3
trigger3 = !numhelper(50000+id)
trigger3 = !inguarddist
trigger3 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger3 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger4 = playerid(var(56)),Facing != facing && ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
trigger5 = var(59)<=4 && random<(5-var(59))*10
value=140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command = "holddown"
value = 131

[State 130,AI Hi to Lo]
type = ChangeState
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
value=131

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 130,AI Stop Guarding]
type = ChangeState
Triggerall = var(59) > 0 && playeridexist(var(56))
Triggerall = var(57)<=var(55)
trigger1 = numhelper
trigger1 = numhelper(50000+id)
Trigger1 = !(helper(50000+id),inguarddist)
trigger1 = !inguarddist && helper(50000+id),fvar(33)=0
trigger1 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger1 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger2 = Roundstate>=3
trigger3 = !numhelper(50000+id)
trigger3 = !inguarddist
trigger3 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger3 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger4 = playerid(var(56)),Facing != facing && ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
trigger5 = var(59)<=4 && random<(5-var(59))*10
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holddown"
value = 130

[State 131,AI Lo to Hi]
type = ChangeState
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
value = 130

[State 131, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 131,AI Stop Guarding]
type = ChangeState
Triggerall = var(59) > 0 && playeridexist(var(56))
Triggerall = var(57)<=var(55)
trigger1 = numhelper
trigger1 = numhelper(50000+id)
Trigger1 = !(helper(50000+id),inguarddist)
trigger1 = !inguarddist && helper(50000+id),fvar(33)=0
trigger1 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger1 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger2 = Roundstate>=3
trigger3 = !numhelper(50000+id)
trigger3 = !inguarddist
trigger3 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger3 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger4 = playerid(var(56)),Facing != facing && ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
trigger5 = var(59)<=4 && random<(5-var(59))*10
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = var(59)<=0
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[state 132,ガード]
Type = ChangeState
TriggerAll = var(59)>2
triggerall = sysvar(0)
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
triggerall = numhelper
triggerall = numhelper(50000+id)
trigger1 = facing = playerid(var(56)),facing || ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
Trigger1 = helper(50000+id),inguarddist || inguarddist
Trigger1 = (playerid(var(56)),movetype!=A)||playerid(var(56)),Time>=var(55)||Anim=21||var(59)>6||statetype=A||(stateno=[10,12])||(stateno=[700,702])||(var(59)>=5&&p2statetype=A)||prevstateno=5120
trigger1 = Random<=var(59)*50||var(59)>4
trigger2 = helper(50000+id),inguarddist
trigger2 = helper(50000+id),var(58)>0
trigger2 = helper(50000+id),Pos y=Pos y+999
trigger2 = Random<=var(59)*100||var(59)>4
Trigger3 = (inguarddist) || ((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&var(59)>3&&abs(P2bodydist X)<80) || (p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
Trigger3 = Random<=var(59)*100||var(59)>4
Trigger3 = (playerid(var(56)),movetype!=A)||playerid(var(56)),Time>=var(55)||Anim=21||var(59)>6||statetype=A||(stateno=[10,12])||(stateno=[700,702])||(var(59)>=5&&p2statetype=A)||prevstateno=5120
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 132,AI Stop Guarding]
type = ChangeState
Triggerall = var(59) > 0 && playeridexist(var(56))
Triggerall = var(57)<=var(55)
trigger1 = numhelper
trigger1 = numhelper(50000+id)
Trigger1 = !(helper(50000+id),inguarddist)
trigger1 = !inguarddist && helper(50000+id),fvar(33)=0
trigger1 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger1 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger2 = Roundstate>=3
trigger3 = !numhelper(50000+id)
trigger3 = !inguarddist
trigger3 = !((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&abs(P2bodydist X)<80)
trigger3 = !(p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
trigger4 = playerid(var(56)),Facing != facing && ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
trigger5 = var(59)<=4 && random<(5-var(59))*10
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 140,AI Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = C
physics = C

[State 140,AI Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
triggerall = var(59)<=0
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, 2]
type = ChangeState
Trigger1 = var(59) > 0 && playeridexist(var(56))
trigger1 = HitShakeOver
trigger1 = numhelper(50000+id)
value = 151 + 2*(playerid(var(56)),statetype=C||(!playerid(var(56)),HitDefAttr = AC,AA&&playerid(var(56)),statetype=S&&playerid(var(56)),Time <= 14||helper(50000+id),var(28) = 1))

[State 150, 2]
type = ChangeState
Trigger1 = var(59) > 0 && playeridexist(var(56))
trigger1 = HitShakeOver
trigger1 = !numhelper(50000+id)
value = 151 + 2*(playerid(var(56)),statetype=C||(!playerid(var(56)),HitDefAttr = AC,AA&&playerid(var(56)),statetype=S&&playerid(var(56)),Time <= 14))

[State 150, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150,AI Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
triggerall = helper(50000+id),var(28)!=[5,6]
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = C
physics = C

[State 150,AI Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
trigger4 = helper(50000+id),var(28)=[5,6]
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151,AI Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
triggerall = helper(50000+id),var(28)!=[5,6]
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = C
physics = C

[State 151,AI Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
trigger4 = helper(50000+id),var(28)=[5,6]
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
triggerall = var(59)<=0
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, 2]
type = ChangeState
Trigger1 = var(59) > 0 && playeridexist(var(56))
trigger1 = HitShakeOver
trigger1 = numhelper(50000+id)
value = 151 + 2*(playerid(var(56)),statetype=C||(!playerid(var(56)),HitDefAttr = AC,AA&&playerid(var(56)),statetype=S&&playerid(var(56)),Time <= 14)||helper(50000+id),var(28) = 1)

[State 152, 2]
type = ChangeState
Trigger1 = var(59) > 0 && playeridexist(var(56))
trigger1 = HitShakeOver
trigger1 = !numhelper(50000+id)
value = 151 + 2*(playerid(var(56)),statetype=C||(!playerid(var(56)),HitDefAttr = AC,AA&&playerid(var(56)),statetype=S&&playerid(var(56)),Time <= 14))

[State 152, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152,AI Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
triggerall = helper(50000+id),var(28)!=[5,6]
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = C
physics = C

[State 152,AI Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
trigger4 = helper(50000+id),var(28)=[5,6]
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153,AI Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 2
triggerall = helper(50000+id),var(28)!=[5,6]
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype =C) || (playerid(var(56)),statetype = A && playerid(var(56)),vel Y = 0 && (playerid(var(56)),stateno != [600,699]))
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),Time = [2,20]
trigger3 = helper(50000+id),var(28) = 1
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
statetype = C
physics = C

[State 153,AI Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Triggerall = var(59) > 0 && playeridexist(var(56))
triggerall = numhelper(50000+id)
triggerall = helper(50000+id),var(28) != 1
Triggerall = Random <= var(59)*80||var(59)>4
;Triggerall = Time > 0
Trigger1 = (playerid(var(56)),statetype=A) && ((var(54)&8064)/128)>=var(55)
Trigger1 = playerid(var(56)),vel Y != 0 || (playerid(var(56)),stateno = [600,699])
Trigger2 = playerid(var(56)),statetype=S
Trigger2 = playerid(var(56)),HitDefAttr = S,NA,SA
Trigger2 = playerid(var(56)),Time != [2,20]
trigger3 = helper(50000+id),var(28) = 2
trigger3 = playerid(var(56)),Time>=var(55)||(var(59)>6)
trigger4 = helper(50000+id),var(28)=[5,6]
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = var(59)<=0
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[state 155,ガード]
Type = ChangeState
TriggerAll = var(59)>2
triggerall = sysvar(0)
triggerall = alive
triggerall = !IsHelper && playeridexist(var(56))
triggerall = Roundstate=2
triggerall = numhelper
triggerall = numhelper(50000+id)
trigger1 = facing = playerid(var(56)),facing || ceil(facing*(playerid(var(56)),Pos X-Pos X))<0
Trigger1 = helper(50000+id),inguarddist || inguarddist
Trigger1 = (playerid(var(56)),movetype!=A)||playerid(var(56)),Time>=var(55)||Anim=21||var(59)>6||statetype=A||(stateno=[10,12])||(stateno=[700,702])||(var(59)>=5&&p2statetype=A)||prevstateno=5120
trigger1 = Random<=var(59)*50||var(59)>4
trigger2 = helper(50000+id),inguarddist
trigger2 = helper(50000+id),var(58)>0
trigger2 = helper(50000+id),Pos y=Pos y+999
trigger2 = Random<=var(59)*100||var(59)>4
Trigger3 = (inguarddist) || ((Facing*(playerid(var(56)),Facing)*ceil(facing*(playerid(var(56)),Pos X-Pos X)) >0)&&playerid(var(56)),movetype=A&&var(59)>3&&abs(P2bodydist X)<80) || (p2bodydist x<120&&playerid(var(56)),numproj&&playerid(var(56)),movetype=A)
Trigger3 = Random<=var(59)*100||var(59)>4
Trigger3 = (playerid(var(56)),movetype!=A)||playerid(var(56)),Time>=var(55)||Anim=21||var(59)>6||statetype=A||(stateno=[10,12])||(stateno=[700,702])||(var(59)>=5&&p2statetype=A)||prevstateno=5120
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = var(59)<=0
trigger1 = Command = "recovery"
trigger2 = var(59)>=1
trigger2 = Pos Y < -60
trigger2 = (p2bodydist x>=120&&(var(54)&127)%5=0) || (p2bodydist y>=100&&(var(54)&127)%6=0)
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = var(59)<=0
trigger1 = Command = "recovery"
trigger2 = var(59)>=1
trigger2 = Pos Y < -20
trigger2 = (p2bodydist x>=120&&(var(54)&127)%5=0) || (p2bodydist y>=100&&(var(54)&127)%6=0)
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = var(59)<=0
trigger1 = Time = 4
trigger1 = Command = "holdup"
trigger2 = var(59)>0
trigger2 = Time = 4
trigger2 = random%4=0 && Pos Y >= -40
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = var(59)<=0
trigger1 = Time = 4
trigger1 = Command = "holddown"
trigger2 = var(59)>0
trigger2 = Time = 4
trigger2 = random%4!=0 || Pos Y < -40
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = var(59)<=0
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
trigger2 = var(59)>0
trigger2 = Time = 4
trigger2 = p2dist x<0
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = var(59)<=0
trigger1 = Time = 4
trigger1 = Command = "holdback"
trigger2 = var(59)>0
trigger2 = Time = 4
trigger2 = p2dist x>=0
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Walk
[Statedef 21]
type    = S
physics = S
sprpriority = 0
ctrl = 0

;[State 21,0]
;type = AssertSpecial
;trigger1 = 1
;flag = NoAutoTurn

;[State 21, 00]
;type = Turn
;trigger1 = ceil(facing*(playerid(var(56)),Pos X-Pos X)) < 0

[State 21, 1]
type = VelSet
trigger1 = numhelper(50000+id)
trigger1 = time = 0 && (P2statetype = L || helper(50000+id),var(59)=2)
trigger1 = P2bodydist x>=45;ifelse((var(54)&524288)=0,45,100)
trigger2 = anim = 20
trigger3 = time = 0 && P2statetype != L && p2movetype != H
trigger3 = (P2bodydist x=[30,80]) || p2bodydist x>100
trigger4 = time = 0 && p2movetype = H && p2statetype!=L
trigger4 = p2bodydist x >= 10-((p2statetype=A&&fvar(35)<0)*10)
x = const(velocity.walk.fwd.x)

[State 21, 2]
type = VelSet
trigger1 = numhelper(50000+id)
trigger1 = time = 0 && (P2statetype = L || helper(50000+id),var(59)=2)
trigger1 = P2bodydist x<=35;ifelse((var(54)&524288)=0,35,100)
trigger2 = anim = 21 || (time>1&&anim != [20,21])
trigger3 = time = 0 && P2statetype != L && p2movetype != H
trigger3 = P2bodydist x<30 || p2bodydist x=(80,100]
trigger4 = time = 0 && p2movetype = H && p2statetype!=L
trigger4 = p2bodydist x  < 10
x = const(velocity.walk.back.x)

[State 21, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 21, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 21,stop1]
type = ChangeState
triggerall = numhelper(50000+id)
triggerall = playeridexist(var(56))
triggerall = (P2statetype = L || helper(50000+id),var(59)=2)
triggerall = abs(fvar(35))<=.5 || anim = 21 || helper(50000+id),var(59)=2 || playerid(var(56)),Frontedgebodydist<10 || playerid(var(56)),backedgebodydist<10
trigger1 = P2BodyDist X = [35,45]
trigger2 = anim = 20
trigger2 = P2BodyDist X < 45;ifelse((var(54)&524288)=0,45,100)
trigger3 = anim = 21
trigger3 = P2BodyDist X > 35;ifelse((var(54)&524288)=0,35,90)
trigger4 = roundstate != 2 || ceil(facing*(playerid(var(56)),Pos X-Pos X))<-20
value = 10
ctrl = 0

[State 21,stop2]
type = ChangeState
triggerall = numhelper(50000+id)
triggerall = !(P2statetype = L || helper(50000+id),var(59)=2)
trigger1 = roundstate != 2 || ceil(facing*(playerid(var(56)),Pos X-Pos X))<-20
trigger2 = p2statetype != L
trigger2 = p2movetype!=H
trigger2 = frontedgebodydist<=0 ;|| backedgebodydist<=10
trigger3 = p2statetype != L || p2bodydist x>130
trigger3 = time>12
trigger3 = Anim = 21 && random<120
trigger3 = (p2bodydist x =[60,70]) || p2bodydist x>130-random%30 || backedgebodydist<=0 && time>60
trigger4 = p2statetype != L
trigger4 = time>12
trigger4 = Anim = 20 && random<120
trigger4 = P2bodydist x<30 || p2bodydist x=[60,70]
trigger5 = p2statetype = A && p2movetype!=H
trigger5 = (random<15)
trigger6 = p2movetype = H && p2statetype!=L
trigger6 = (p2bodydist x <10 && anim = 20) || (p2bodydist x >30 && anim = 21)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Walk
[Statedef 22]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 21, 1]
type = VelSet
trigger1 = numhelper(50000+id)
trigger1 = time >= 0
trigger1 = P2bodydist x>=4
trigger2 = anim = 20
x = const(velocity.walk.fwd.x)

[State 21, 2]
type = VelSet
triggerall = !IsHelper && playeridexist(var(56))
trigger1 = numhelper(50000+id)
trigger1 = time >= 0
trigger1 = P2bodydist x<=0 && fvar(35)<=0
trigger2 = anim = 21
x = const(velocity.walk.back.x)

[State 21, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 21, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 21,stop2]
type = ChangeState
trigger1 = roundstate != 2 || ceil(facing*(playerid(var(56)),Pos X-Pos X))<-20
trigger2 = p2statetype != L
trigger2 = p2movetype!=H
trigger2 = frontedgebodydist<=0 ;|| backedgebodydist<=10
trigger3 = (p2bodydist x =[0,6])
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

