;======================================================
;======================================================
;======================================================
; Stand Attacks
;======================================================
;======================================================
;======================================================
;======================================================
; Light Punch
;======================================================

[Statedef 200]
type = S
movetype= A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 200
sprpriority = 2

[State 200, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = AnimElem = 3
persistent = 1
attr = S, NA
damage = 26, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
animtype = Light
guardflag = MA
priority = 6, Hit
pausetime = 7, 8
sparkno = S6000
sparkxy = -10, -76
guard.sparkno = s6012
hitsound = s1, 0
guardsound = s2, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5
guard.velocity = -6
air.type = light
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 200, 2]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
triggerall = P2BodyDist X > 30
trigger1 = AnimElem = 3
persistent = 0
attr = S, NA
damage = 26, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
animtype = Light
guardflag = MA
priority = 6, Hit
pausetime = 7, 8
sparkno = S6000
sparkxy = -10, -76
guard.sparkno = s6012
hitsound = s1, 0
guardsound = s2, 0
ground.type = low
ground.slidetime = 10
ground.hittime  = 11
air.type = Light
yaccel = 0.54
ground.velocity = -6
guard.velocity = -6
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Strong Punch Close
;======================================================

[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 210, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = AnimElem = 3
attr = S, NA
damage = 84, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
animtype = Hard
guardflag = MA
priority = 5, Hit
pausetime = 11, 12
sparkno = s6001
sparkxy = -10, -76
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -7
ground.cornerpush.veloff = -14
guard.velocity = -5
airguard.velocity = -5,-4
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Strong Punch Far
;======================================================

[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2

[State 220, 1]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = Animelem = 7
x = 5

[State 220, 2]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = Animelem = 8
x = 3

[State 220, 3]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = AnimElem = 5
attr = S, NA
damage = 53, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
animtype = Hard
guardflag = MA
priority = 5, Hit
pausetime = 8, 12
sparkno = s6002
sparkxy = -10, -74
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 220, 4]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
triggerall = P2BodyDist X > 30
trigger1 = AnimElem = 5
attr = S, NA
damage = 53, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
animtype = Hard
guardflag = MA
priority = 5, Hit
pausetime = 8, 12
sparkno = s6002
sparkxy = -10, -74
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
fall.recover = 0 
yaccel = 0.54

[State 220, 5]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = AnimElem = 9
attr = S, NA
damage = 53, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
animtype = Hard
guardflag = MA
priority = 5, Hit
pausetime = 10, 12
sparkno = s6002
sparkxy = -10, -80
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -10
ground.cornerpush.veloff = -18
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 220, 6]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
triggerall = P2BodyDist X > 30
trigger1 = AnimElem = 9
attr = S, NA
damage = 53, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
animtype = Hard
guardflag = MA
priority = 5, Hit
pausetime = 10, 12
sparkno = s6002
sparkxy = -10, -80
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -10
ground.cornerpush.veloff = -18
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 220, 7]
type = PosAdd
trigger1 = AnimElem = 10
x = 3

[State 220, 8]
type = PosAdd
trigger1 = Animtime = 0
x = -10

[State 220, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Light Kick
;======================================================

[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    = 29, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
guardflag = MA
priority = 6, Hit
pausetime = 7,8
sparkno = s6000
sparkxy = -10,-69
guard.sparkno = s6012
hitsound   = s1,1
guardsound = s2,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 230, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Light Kick Close
;======================================================

[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 8
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2

[State 235, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    = 29, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
guardflag = MA
priority = 6, Hit
pausetime = 7,8
sparkno = s6000
sparkxy = -10,-69
guard.sparkno = s6012
hitsound   = s1,1
guardsound = s2,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 235, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Strong Kick Close
;======================================================

[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = S, NA
animtype  = Hard
damage    = 100, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
guardflag = MA
priority = 5, Hit
pausetime = 11,12
sparkno = s6001
sparkxy = -10,-63
guard.sparkno = s6013
hitsound   = s1,3
guardsound = s2,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -9
ground.cornerpush.veloff = -14
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 240, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Strong Kick Far
;======================================================

[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 250, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 4
attr = S, NA
animtype  = Hard
damage    = 100, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
guardflag = MA
priority = 5,Hit
pausetime = 12,12
sparkno = s6001
sparkxy = -10,-73
guard.sparkno = s6013
hitsound   = s1,3
guardsound = s2,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -9
ground.cornerpush.veloff = -19
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
;======================================================
;======================================================
; Crouching Attacks
;======================================================
;======================================================
;======================================================
;======================================================
; Light Punch
;======================================================

[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 2
attr = C, NA
damage    = 39, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
priority  = 6, Hit
animtype  = Light
guardflag = MA
pausetime = 7,8
sparkno = s6000
sparkxy = -10,-55
guard.sparkno = s6012
hitsound   = s1,0
guardsound = s2,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -2
guard.velocity = -2.5
air.type = High
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 400, 2]
type = CtrlSet
trigger1 = Time = 8
value = 1

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;======================================================
; Strong Punch
;======================================================

[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 10
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = AnimElem = 3
attr = C, NA
damage    = 84, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
priority  = 5, Hit
animtype  = Hard
guardflag = M
pausetime = 11,12
sparkno = s6002
sparkxy = -10,-60
guard.sparkno = s6013
hitsound   = s1,2
guardsound = s2,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -4
ground.cornerpush.veloff = -16
guard.velocity = -7
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 410, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;======================================================
; Light Kick
;======================================================

[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = C, NA
damage    = 46, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
animtype  = Light
guardflag = L
priority = 6, Hit
pausetime = 7,8
sparkno = s6000
sparkxy = -10,-8
guard.sparkno = s6012
hitsound   = s1,1
guardsound = s2,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4
guard.velocity = -6
air.type = High
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 430, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;======================================================
; Strong Kick
;======================================================

[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 15
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = C, NA
damage    = 112, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
priority  = 5, Hit
hitflag = MA
guardflag = L
pausetime = 11,12
sparkno = s6001
sparkxy = -5,-10
guard.sparkno = s6013
hitsound   = s1,3
guardsound = s2,0
ground.type = Trip
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-8
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -16
guard.velocity = -6
airguard.velocity = -5,-4
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54
fall = 1

[State 440, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;======================================================
;======================================================
;======================================================
; Air Attacks
;======================================================
;======================================================
;======================================================
;======================================================
; Light Punch
;======================================================

[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = A, NA
damage    = 63, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
guardflag = MA
priority = 6, Hit
pausetime = 11,11
sparkno = s6000
sparkxy = -10,-58
guard.sparkno = s6012
hitsound   = s1,0
guardsound = s2,0
animtype = Light
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

;======================================================
; Strong Punch
;======================================================

[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 10
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = A, NA
damage = 100, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
priority  = 5, Hit
guardflag = HA
priority = 4
pausetime = 11,12
sparkno = s6001
sparkxy = -10,-55
guard.sparkno = s6013
hitsound   = s1,2
guardsound = s2,0
animtype = Hard
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -9
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

;======================================================
; Light Kick
;======================================================

[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = A, NA
damage = 56, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
guardflag = MA
priority = 6, Hit
pausetime = 11,11
sparkno = s6000
sparkxy = -5,-48
guard.sparkno = s6012
hitsound   = s1,1
guardsound = s2,0
animtype = Light
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -3.5,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

;======================================================
; Light Kick Up
;======================================================

[Statedef 635]
type    = A
movetype= A
physics = A
juggle  = 8
ctrl = 0
anim = 635
sprpriority = 2

[State 635, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 4
attr = A, NA
damage = 56, 0
getpower = ifelse(Var(23)>0,0,46),ifelse(Var(23)>0,0,46)
givepower = 16, 16
guardflag = MA
priority = 6, Hit
pausetime = 11,11
sparkno = s6000
sparkxy = -5,-60
guard.sparkno = s6012
hitsound   = s1,1
guardsound = s2,0
animtype = Light
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

;======================================================
; Strong Kick
;======================================================

[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 10
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 4
attr = A, NA
damage = 100, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
priority  = 5, Hit
guardflag = HA
priority = 4
pausetime = 11,12
sparkno = s6001
sparkxy = -10,-40
guard.sparkno = s6013
hitsound   = s1,3
guardsound = s2,0
animtype = Hard
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -9
guard.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

;======================================================
;======================================================
;======================================================
; Special Attacks
;======================================================
;======================================================
;======================================================
;======================================================
; Kobokushu
;======================================================

[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 260
sprpriority = 2

[State 260, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Time = 0
attr = S, SA
damage = 125, 0
getpower = ifelse(Var(23)>0,0,100),ifelse(Var(23)>0,0,100)
givepower = 16, 16
animtype = Hard
guardflag = HA
hitflag = M
priority = 4, Hit
pausetime = 10, 12
sparkno = s6002
sparkxy = -10, -54
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = -8
ground.cornerpush.veloff = -18
guard.velocity = -6
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 260, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Kobokushu Cancelable
;======================================================

[Statedef 261]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 260
sprpriority = 2

[State 260, 1]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Time = 0
attr = S, SA
damage = 56, 0
getpower = ifelse(Var(23)>0,0,74),ifelse(Var(23)>0,0,74)
givepower = 16, 16
animtype = Hard
guardflag = H
hitflag = M
priority = 4, Hit
pausetime = 10, 12
sparkno = s6002
sparkxy = -10, -54
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = -8
ground.cornerpush.veloff = -18
guard.velocity = -6
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 260, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Kousentai (1/3)
;======================================================

[Statedef 270]
type    = S
movetype= A
physics = S
juggle  = ifelse((Var(23)>0),1,11)
ctrl = 0
velset = 0,0
anim = 270
sprpriority = 2

[state 270, 1]
type = varset
trigger1 = prevstateno = 200 || prevstateno = 210 || prevstateno = 220 || prevstateno = 235
trigger2 = prevstateno = 240 || prevstateno = 400 || prevstateno = 410 || prevstateno = 430
v = 3
value = 3

[State 270, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 271
ctrl = 0

;------------------------------------------------------
; Kousentai (2/3)
;------------------------------------------------------

[Statedef 271]
type    = A
movetype= A
physics = N
ctrl = 0
velset = 0,0
anim = 271
sprpriority = 2

[State 271, 1]
type = VelAdd
trigger1 = Animelemtime(2) >= 1
y = 0.44

[State 271, 2]
type = Velset
trigger1 = Animelem = 2,1
x = 4
y = -3

[State 271, 3]
type = PlaySnd
trigger1 = Animelem = 3
value = s9,0

[State 271, 4]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Animelem = 3
attr = S, SA
animtype  = Hard
damage    = 56, 0
getpower = ifelse(Var(23)>0,0,91),ifelse(Var(23)>0,0,91)
givepower = 16, 16
guardflag = MA
priority = 4, Hit
pausetime = 11,12
sparkno = s6001
sparkxy = -10,-78
guard.sparkno = s6013
hitsound   = s1,3
guardsound = s2,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -9
ground.cornerpush.veloff = -4
air.cornerpush.veloff = -16
guard.velocity = -6
guard.velocity = -6
airguard.velocity = -5,-4
air.type = High
air.velocity = -3,-9
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.58

[State 271, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 272
ctrl = 0

;------------------------------------------------------
; Kousentai (3/3)
;------------------------------------------------------

[Statedef 272]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 272
sprpriority = 2

[State 272, 1]
type = Posset
trigger1 = time = 0
y = 0

[State 272, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Stand CD
;======================================================

[Statedef 300]
type    = S
movetype= A
physics = S
anim = 300
juggle = 10
velset = 0, 0
ctrl = 0

[State 300, 1]
type = HitDef
triggerall = enemynear,movetype = A
trigger1 = time = 0
attr = S, SA
damage = 50, 0
getpower = 112, 112
givepower = 16, 16
animtype = diagup
priority  = 4, Hit
hitflag = MAF
guardflag = MA
sparkno = s6003
guard.sparkno = s6013
sparkxy = -10,-60
hitsound = s1,4
guardsound = s2,0
pausetime = 14,14
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -18,-0
ground.cornerpush.veloff = -20
guard.velocity = -6
airguard.velocity = -4,-7.5
air.type = High
air.velocity = -18,-1
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.58
fall = 1
p2stateno = 361
p2facing = 1

[State 300, 2]
type = HitDef
triggerall = enemynear,movetype != A
trigger1 = time = 0
attr = S, SA
damage = 143, 0
getpower = ifelse(Var(23)>0,0,112),ifelse(Var(23)>0,0,112)
givepower = 16, 16
priority  = 4, Hit
animtype = Heavy
guardflag = MA
sparkno = s6003
guard.sparkno = s6013
sparkxy = -10,-60
hitsound = s1,4
guardsound = s2,0
pausetime = 12,12
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-8
ground.cornerpush.veloff = -20
guard.velocity = -6
airguard.velocity = -4,-7.5
air.type = High
air.velocity = -5,-8
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.55
fall = 1

[State 300, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
; Stand CD (Guard Cancel)
;------------------------------------------------------

[Statedef 350]
type    = S
movetype= A
physics = S
juggle  = 15
poweradd= -1000
velset = 0,0
anim = 350
ctrl = 0
sprpriority = 2

[State 350, 1]
type = PalFX
trigger1 = (GameTime%2) = 0 && time < 5
time = 1
add = 256,256,256
mul = 256,256,256
sinadd = 256,256,256,1
invertall = 0
color = 256
ignorehitpause = 1

[State 350, 2]
type = Varset
trigger1 = time = 0
v = 3
value = 1

[State 350, 3]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA

[State 350, 4]
type = AfterImage
trigger1 = Time = 0
time = 26
length = 4
frameGap = 1
timeGap = 4
PalAdd = 0, 0, 0
PalMul = 1, 1, 1
PalBright = 0, 0, 0
PalContrast = 128, 128, 128
Trans = add1

[State 350, 5]
type = AfterImageTime
trigger1 = AnimElemTime(6) < 0
time = 2

[State 350, 6]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
damage = 60, 0
getpower = ifelse(Var(23)>0,0,112),ifelse(Var(23)>0,0,112)
givepower = 80, 40
priority  = 4, Hit
animtype = diagup
hitflag = MAF
guardflag = MA
sparkno = s6003
guard.sparkno = s6013
sparkxy = -10,-60
hitsound = s1,4
guardsound = s2,0
pausetime = 12,12
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -18,0
ground.cornerpush.veloff = -24
guard.velocity = -6
airguard.velocity = -5,-4
air.type = High
air.velocity = -18,-1
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.58
fall = 1
p2stateno = 351
p2facing = 1

[State 350, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
; Wire Attack (P2 - Shaking from the hit)
;------------------------------------------------------

[Statedef 351]
type    = A
movetype= H
physics = N
velset = 0,0

[State 351, 1]
type = ChangeAnim2
trigger1 = SelfAnimExist(5555)
value = 5555

[State 351, 2]
type = ChangeAnim2
trigger1 = !SelfAnimExist(5555)
value = 351

[State 351, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 351, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 352

;------------------------------------------------------
; Wire Attack (P2 - Flying through the air)
;------------------------------------------------------

[Statedef 352]
type    = A
movetype= H
physics = N

[State 352, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 352, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 352, 3]
type = HitVelSet
trigger1 = Time = 0
x = 16
y = 0

[State 352, No scroll]
type = ScreenBound
triggerall = Pos y < -240
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 352, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
;trigger2 = FrontEdgeBodyDist <= 10
value = 353

[State 352, Hit ground]
type = null ;SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------------------------------------------
; Wire Attack (P2 - Hit wall)
;------------------------------------------------------

[Statedef 353]
type    = A
movetype= H
physics = N

[State 353, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 120
ampl = -6

[State 353, LifeAdd]
type = LifeAdd
trigger1 = time = 1
value = -40

[State 353, Pos]
type = PosAdd
trigger1 = Time = 0
x = -20 - BackEdgeBodyDist
y = ifelse(SelfAnimexist(55552),-15,0)

[State 353, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 353, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 353, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 353, Anim]
type = ChangeAnim2
triggerall = SelfAnimExist(55551)
trigger1 = Time = 0
value = 55551

[State 353, Anim]
type = ChangeAnim2
triggerall = !SelfAnimExist(55551)
trigger1 = Time = 0
value = 354

[State 353, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 353, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 354

;------------------------------------------------------
; Wire Attack (P2 - Bounce off wall)
;------------------------------------------------------

[Statedef 354]
type    = A
movetype= H
physics = N

[State 354, 1]
type = NotHitBy
trigger1 = 1
value = SCA,SA,HA,SP,HP,ST,HT

[State 364, Turn]
type = Turn
triggerall = !SelfAnimExist(55552)
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 354, Vel Y]
type = VelSet
trigger1 = Time = 0
x = ifelse(SelfAnimExist(55552),1,-2)
y = -ifelse(SelfAnimExist(55552),1,5)

[State 354, Gravity]
type = VelAdd
trigger1 = 1
y = 0.5

[State 354, Anim 5050] ;Self falling animation
type = ChangeAnim
triggerall = !SelfAnimExist(55552)
trigger1 = Time = 0
value = 5050

[State 354, Anim 5050] ;Self falling animation
type = ChangeAnim
triggerall = SelfAnimExist(55552)
trigger1 = Time = 0
value = 55552

[State 354, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050 && Animtime = 0
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 364, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 55552 && Pos y >= 0
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 354, Reduce Vel X]
type = Velset
triggerall = SelfAnimExist(55552)
trigger1 = (Vel y > 0) && (Pos y >= 0)
x = 1

[State 354, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------------------------------------------
; Counter Wire Attack (P2 - Shaking from the hit)
;------------------------------------------------------

[Statedef 361]
type    = A
movetype= H
physics = N
velset = 0,0

[State 361, 1]
type = ChangeAnim2
trigger1 = SelfAnimExist(5555)
value = 5555

[State 361, 2]
type = ChangeAnim2
trigger1 = !SelfAnimExist(5555)
value = 351

[State 361, 3]
type = PlayerPush
trigger1 = 1
value = 0

[State 351, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 362

;------------------------------------------------------
; Counter Wire Attack (P2 - Flying through the air)
;------------------------------------------------------

[Statedef 362]
type    = A
movetype= H
physics = N

[State 362, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 362, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 362, 3]
type = HitVelSet
trigger1 = Time = 0
x = 16
y = 0

[State 362, No scroll]
type = ScreenBound
triggerall = Pos y < -240
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 352, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 363

[State 362, Hit ground]
type = null ;SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------------------------------------------
; Counter Wire Attack (P2 - Hit wall)
;------------------------------------------------------

[Statedef 363]
type    = A
movetype= H
physics = N

[State 363, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 120
ampl = -6

[State 363, LifeAdd]
type = LifeAdd
trigger1 = time = 1
value = -50

[State 363, Turn]
type = Turn
trigger1 = (Time = 3) && (FrontEdgeBodyDist <= 10)

[State 363, Pos]
type = PosAdd
trigger1 = Time = 0
x = 5 - BackEdgeBodyDist

[State 363, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 363, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 363, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 363, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 364

[State 363, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 363, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 364

;------------------------------------------------------
; Counter Wire Attack (P2 - Bounce off wall)
;------------------------------------------------------

[Statedef 364]
type    = A
movetype= H
physics = N

[State 364, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -12
x = 3.1

[State 364, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 364, Gravity]
type = VelAdd
trigger1 = 1
y = .49

[State 364, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 364, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 364, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050 && Animtime = 0
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 364, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052 && Animtime = 0
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 364, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;======================================================
; Jumping CD
;======================================================

[Statedef 650]
type     = A
movetype = A
physics  = A
anim = 650
juggle = 10
ctrl = 0

[State 650, 1]
type = HitDef
trigger1 = Animelem = 5
attr = S, SA
damage = 125, 0
getpower = ifelse(Var(23)>0,0,112),ifelse(Var(23)>0,0,112)
givepower = 16, 16
priority  = 4, Hit
animtype = Heavy
hitflag = MAF
guardflag = HA
sparkxy = 0,-38
hitsound = s1,4
guardsound = s2,0
sparkno = s6003
guard.sparkno = s6013
pausetime = 11,12
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-8
guard.velocity = -6
airguard.velocity = -5,-4
air.type = High
air.velocity = -5,-8
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.55
fall = 1
fall.recover = 0

;======================================================
;======================================================
;======================================================
; DODGES
;======================================================
;======================================================
;======================================================
;======================================================
; Dodge Forward
;======================================================

[Statedef 700]
type    = S
physics = S
anim = 700
sprpriority = -2
velset = 0,0
ctrl = 0

[State 700, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 700, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 700, 3]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 700, 4]
type = Poweradd
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440]
trigger1 = time = 0
value = -1000

[State 700, 5]
type = PalFX
triggerall = prevstateno = [200,440] 
trigger1 = (GameTime%1) = 0 && time <=1
time = 10
add = 0,0,192
color = 0
ignorehitpause = 1

[State 700, 6]
type = PalFX
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = (GameTime%2) = 0 && time < 7
time = 1
add = 256,256,256
mul = 256,256,256
sinadd = 256,256,256,1
invertall = 0
color = 256
ignorehitpause = 1

[State 700, 7]
type = superpause
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440] 
trigger1 = time = 0
time = ifelse((prevstateno=[200,440]),12,8)
movetime = ifelse((prevstateno=[200,440]),12,8)
anim = -1
darken = 0

[State 700, 8]
type = EnvColor
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440] 
trigger1 = time = 0
value = 255,255,255
time = 4
under = 1

[State 700, 9]
type = Explod
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440] 
trigger1 = time = 0
anim = 6016
pos = 0,-60
sprpriority = 2
bindtime = 1
supermove = 1
ownpal = 1

[State 700, 10]
type = PlaySnd
trigger1 = Animelem = 2
value = s700,0

[State 700, 11]
type = velset
triggerall = prevstateno = 100
trigger1 = Animelemtime(1) >= 0 && Animelemtime(7) <=0
x = 6

[State 700, 12]
type = velset
trigger1 = Animelemtime(3) >= 0 && Animelemtime(6) <=0
x = 6.2

[State 700, 13]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Dodge Backward
;======================================================

[Statedef 710]
type    = S
physics = S
anim = 710
sprpriority = -2
velset = 0,0
ctrl = 0

[State 710, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 710, 2]
type = HitBy
trigger1 = 1
value = SCA

[State 710, 3]
type = Poweradd
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
value = -1000

[State 710, 4]
type = PalFX
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = (GameTime%2) = 0 && time < 7
time = 1
add = 256,256,256
mul = 256,256,256
sinadd = 256,256,256,1
invertall = 0
color = 256
ignorehitpause = 1

[State 710, 5]
type = superpause
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
time = 8
movetime = 8
anim = -1
darken = 0

[State 710, 6]
type = EnvColor
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
value = 255,255,255
time = 4
under = 1

[State 710, 7]
type = Explod
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = time = 0
anim = 6016
pos = 0,-60
sprpriority = 2
bindtime = 1
supermove = 1
trans = add1
ownpal = 1

[State 710, 8]
type = PlaySnd
trigger1 = Animelem = 2
value = s700,0

[State 710, 9]
type = velset
trigger1 = Animelemtime(3) >= 0 && Animelemtime(7) <=0
x = -5.5

[State 710, 10]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Dodge Neutral
;======================================================

[Statedef 720]
type    = S
physics = S
anim = 720
sprpriority = -3
velset = 0,0
ctrl = 0

[State 720, 1]
type = PosAdd
trigger1 = Animelem = 2
x = -20

[State 720, 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 720, 3]
type = NotHitBy
trigger1 = 1
value = SCA

[State 720, 4]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 720, 5]
type = Poweradd
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440]
trigger1 = time = 0
value = -1000

[State 720, 6]
type = PalFX
triggerall = prevstateno = [200,440] 
trigger1 = (GameTime%1) = 0 && time <=1
time = 10
add = 0,0,192
color = 0
ignorehitpause = 1

[State 720, 7]
type = PalFX
triggerall = prevstateno = 150 || prevstateno = 151
trigger1 = (GameTime%2) = 0 && time < 7
time = 1
add = 256,256,256
mul = 256,256,256
sinadd = 256,256,256,1
invertall = 0
color = 256
ignorehitpause = 1

[State 720, 8]
type = superpause
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440] 
trigger1 = time = 0
time = ifelse((prevstateno=[200,440]),12,8)
movetime = ifelse((prevstateno=[200,440]),12,8)
anim = -1
darken = 0

[State 720, 9]
type = EnvColor
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440] 
trigger1 = time = 0
value = 255,255,255
time = 4
under = 1

[State 720, 10]
type = Explod
triggerall = prevstateno = 150 || prevstateno = 151 || prevstateno = [200,440] 
trigger1 = time = 0
anim = 6016
pos = 0,-60
sprpriority = 2
bindtime = 1
supermove = 1
ownpal = 1

[State 720, 11]
type = PlaySnd
trigger1 = Animelem = 2
value = s700,2

[State 720, 12]
type = PosAdd
trigger1 = Animelem = 5
;trigger2 = Animelemtime(3) >= 0 && (command = "x" || command = "y" || command = "z" || command = "a" || command = "b")
x = 20

[State 720, 13]
type = ChangeState
triggerall = Animelemtime(3) >= 0 && Animelemtime(4) <=0
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
value = 730
ctrl = 0

[State 720, 14]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
; Dodge Reversal
;------------------------------------------------------

[Statedef 730]
type    = S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 730
sprpriority = 2

[State 730, 1]
type = PlaySnd
trigger1 = Animelem = 3
value = s9,3

[State 730, 2]
type = HitDef
triggerall = !((p2stateno = [5020,5040]) && !Enemy,Gethitvar(Fall)) || 0
trigger1 = Time = 0
attr = S, SA
damage = 87, 0
getpower = ifelse(Var(23)>0,0,100),ifelse(Var(23)>0,0,100)
givepower = 16, 16
animtype = Hard
guardflag = M
hitflag = MA
priority = 4, Hit
pausetime = 10, 14
sparkno = s6002
sparkxy = -10, -76
guard.sparkno = s6013
hitsound = s1, 2
guardsound = s2, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -9
ground.cornerpush.veloff = -19
guard.velocity = -6
air.hittime = 10
air.type = High
air.velocity = -4,-7.5
air.recover = 0
air.animtype = back
fall.recover = 0 
yaccel = 0.54

[State 730, 3]
type = null ;PosAdd
trigger1 = Animelem = 1
trigger2 = Animelem = 4
x = 15

[State 730, 4]
type = PosAdd
trigger1 = Animelem = 6
x = 22

[State 730, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
;======================================================
;======================================================
; THROWS
;======================================================
;======================================================
;======================================================
;======================================================
; Tomoe Nage
;======================================================

[Statedef 800]
type    = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2


[State 800, ヒット定義（投げ用）]
type = ReversalDef
trigger1 = p2stateno != [150,152]
hitflag = MF
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
numhits = 0
pausetime = 0,2
sparkno = -1
hitsound = -1
p1stateno = 810
p2stateno = 820
ignorehitpause = 1

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 7, Miss  
sparkno = -1
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------

[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810

[State 810, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 2]
type = Width
trigger1 = AnimElemTime(1) >= 0
edge = 0,60

[State 810, 3]
type = Explod
trigger1 = Animelem = 2
anim = 6010
pos = 36,-80
sprpriority = 2
bindtime = 1
ownpal = 1

;------------------------------------------------------

[State 810, 1 Holding fwd?]
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[State 810, 2 Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 2
value = s5, 0

[State 810, 3 Throw Sound]
type = PlaySnd
trigger1 = AnimElem = 6
value = 800, 0

[State 810, 4 Bind]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 28, 0

[State 810, 5 Bind]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(5) < 0
pos = 30, 0

[State 810, 6 Bind]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 30, -80

[State 810, 7 Bind]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = -40, -60

[State 810, 8 Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -143

[State 810, 9 Throw]
type = TargetState
trigger1 = AnimElem = 7
value = 821

[State 810, 10 SoundFX]
type = null ;PlaySnd
trigger1 = Animelem = 6
value = s800,1

[State 810, Turn 11]
type = Turn
trigger1 = Animtime = 0

[State 810, 12 Pos]
type = PosAdd
trigger1 = AnimElem = 15
x = -10

[State 810, 13 State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1

;------------------------------------------------------

[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;------------------------------------------------------
; In case attacker loses binding on player for any
; reason, this controller guarantees that the player
; will never get stuck in this thrown state.
;------------------------------------------------------

[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;------------------------------------------------------

[Statedef 821]
type    = A
movetype= H
physics = N
velset = 5,-8

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .54

[State 821, 2] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -25
value = 5100 ;Hit ground

;======================================================
; Sunda
;======================================================

[Statedef 830]
type    = S
movetype= A
physics = S
velset = 0,0
juggle = 0
ctrl = 0
anim = 800
sprpriority = 2

[State 830, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT
hitflag = M- 
priority = 3, Miss 
sparkno = -1
p1sprpriority = 1 
p1facing = 1
p2facing = 1
p1stateno = 850 
p2stateno = 860
guard.dist = 0
fall = 1
numhits = 0

[State 830, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------

[Statedef 850]
type     = S
movetype = A
physics  = S
anim = 850
juggle = 12
velset = 0, 0
ctrl = 0

[State 850, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 850, 2]
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(4) < 0
pos = 20, 0

[State 850, 3]
type = PlaySnd
trigger1 = time = 19
value = s1200, 1

[State 850, 4]
type = PlaySnd
trigger1 = time = 19
value = s1, 2

[State 850, 5]
type = PlaySnd
trigger1 = time = 42
value = s850, 0

[State 850, 6]
type = Explod
trigger1 = time = 19
anim = 6002
pos = 20,-60
sprpriority = 2
bindtime = 1
ownpal = 1

[State 850, 7]
type = TargetLifeadd
trigger1 = time = 19
value = -143

[State 850, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------

[Statedef 860]
type    = S
movetype= H
physics = N
sprpriority = -2

[State 860, 1]
type = ChangeAnim2
Trigger1 = time = 0
value = 860

[State 860, 2]
type = ChangeState
trigger1 = Animtime = 0
value = 861

;------------------------------------------------------

[Statedef 861]
type    = A
movetype= H
physics = N
sprpriority = -2

[State 861, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 861, 2]
type = ChangeAnim2
Trigger1 = time = 0
value = 861

[State 861, 3]
type = Velset
Trigger1 = Time = 0
x = -6.3
y = -4.8

[State 861, 4]
type = VelAdd
trigger1 = time >= 0
y = .54

[State 861, 5]
type = ChangeAnim
trigger1 = anim = 5030 && animtime = 0 && SelfAnimExist(5035)
value = 5035

[State 861, 6]
type = ChangeAnim
trigger1 = anim = 5035 && animtime = 0
trigger2 = anim = 5030 && animtime = 0 && !SelfAnimExist(5035)
value = 5050

[State 861, 7]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 25 && time > 0
value = 862

;------------------------------------------------------

[Statedef 862]
type    = L
movetype= H
physics = N
sprpriority = -2

[State 862, 1]
type = Velmul
trigger1 = 1
x = .92

[State 862, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 862

[State 862, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 862, 4]
type = VelSet
trigger1 = Time = 0
x = -4.3
y = 0

[State 862, 5]
type = VelSet
trigger1 = Time = 30
x = 0
y = 0

[State 862, 6]
type = ChangeAnim
trigger1 = time = 30
value = 5110

[State 862, 7]
type = SelfState
triggerall = !Alive
trigger1 = time = 30
value = 5150

[State 862, 8]
type = SelfState
trigger1 = Alive && Time = 30 + const(data.liedown.time) 
value = 5120

;======================================================
; Energy Charge (Start & Chaging)
;======================================================

[Statedef 900]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 900
sprpriority = 2

[State 900, 1]
type = PlaySnd
trigger1 = Animelem = 1
value = s903,2
channel = 3

[State 900, 2]
type = PlaySnd
trigger1 = Animelem = 1
value = s900,0
channel = 4

[State 900, 3]
type = PowerAdd
trigger1 = Gametime%1 = 0
value = 8

[State 900, 4]
type = explod
trigger1 = time = 9
anim = 910
ID = 910
pos = 5,5
sprpriority = 4
ownpal = 1
bindtime = -1
shadow  = 128,128,128
removetime = -1
removeongethit = 1
ignorehitpause = 0

[State 900, 5]
type = ChangeState
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
trigger3 = command != "hold_y"
value = 901

[State 900, 6]
type = ChangeState
trigger1 = Power = PowerMax
value = 902

;------------------------------------------------------
; Energy Charge (End)
;------------------------------------------------------

[Statedef 901]
type = S
movetype = A
physics = S
anim = 901
ctrl = 0

[State 901, 1]
type = RemoveExplod
trigger1 = Time = 0
ID = 910

[State 901, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
; Energy Charge (Full - End)
;------------------------------------------------------

[Statedef 902]
type = S
movetype = A
physics = S
anim = 901
ctrl = 0

[State 902, 1]
type = RemoveExplod
trigger1 = Time = 0
ID = 910

[State 902, 2]
type = PlaySnd
trigger1 = Animelem = 1
value = s903,0

[State 902, 3]
type = PlaySnd
trigger1 = Animelem = 1
value = s800,0

[State 902, 4]
type = explod
trigger1 = time = 1
anim = 911
ID = 911
pos = 5,5
sprpriority = 4
ownpal = 1
bindtime = 1
shadow  = 128,128,128
removetime = 19
removeongethit = 1
ignorehitpause = 0

[State 902, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;======================================================
; Max-On
;======================================================

[Statedef 903]
type = S
movetype = I
physics = S
anim = 903
ctrl = 0
velset = 0,0
poweradd = -1000

[State 903, 1]
type = Helper
trigger1 = TeamSide = 1 && NumHelper(904) = 0
helpertype = Normal
name = "Max-On"
stateno = 904
id = 904
postype = Left
pos = 50,ifelse((ID = (33)),203,210)
facing = 1
keyctrl = 0 
ownpal = 1
sprpriority = 10
ignorehitpause = 1
bindtime = -1

[State 903, 2]
type = Helper
trigger1 = TeamSide = 2 && NumHelper(904) = 0
helpertype = Normal
name = "Max-On"
stateno = 904
id = 904
postype = Right
pos = -50,ifelse((ID = (35)),203,210)
facing = 1
keyctrl = 0 
ownpal = 1
sprpriority = 10
ignorehitpause = 1

[State 903, 3]
type = PlaySnd
triggerall = Anim = 903
trigger1 = time = 1
value = s800,0

[State 903, 4]
type = EnvShake
triggerall = Anim = 903
trigger1 = time = 1
time = 8
freq = 120
ampl = 8

[State 903, 5]
type = VarSet
trigger1 = Time = 0
var(23) = 1000
ignorehitpause = 1

[State 903, 6]
type = PowerAdd
triggerall = Time = 0
trigger1 = Prevstateno=200||Prevstateno=210||Prevstateno=220||Prevstateno=230||Prevstateno=235||Prevstateno=240
trigger2 = Prevstateno=250||Prevstateno=260||Prevstateno=261||Prevstateno=280||Prevstateno=300||Prevstateno=350
trigger3 = Prevstateno=400||Prevstateno=410||Prevstateno=430||Prevstateno=440
Value = -1000

[State 903, 7]
type = Changestate
triggerall = Time = 0
trigger1 = Prevstateno=200||Prevstateno=210||Prevstateno=220||Prevstateno=230||Prevstateno=235||Prevstateno=240
trigger2 = Prevstateno=250||Prevstateno=260||Prevstateno=261||Prevstateno=280||Prevstateno=300||Prevstateno=350
trigger3 = Prevstateno=400||Prevstateno=410||Prevstateno=430||Prevstateno=440
Value = 905
ctrl = 1

[State 903, 8]
type = PlaySnd
trigger1 = Time = 0
value = s903,0

[State 903, 9]
type = explod
trigger1 = Anim = 903 && Time = 0
anim = 907
ID = 907
pos = 10,-55
sprpriority = -1
ownpal = 1
postype = P1
bindtime = 1
shadow  = 128,128,128
removetime = 10
removeongethit = 1
ignorehitpause = 0

[State 903, 10]
type = ChangeState
triggerall = Anim = 903
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
; Max-On Anim Helper
;------------------------------------------------------

[Statedef 904]
type    = S
physics = S
juggle = 0
anim = 10000
ctrl = 0
sprpriority = 5

[State 904, 1: Max-On Anim P1]
type = Explod
triggerall = time = 0
trigger1 = TeamSide = 1 && NumExplod(904) = 0
anim = 904
id = 904
postype = Left
pos = 52,ifelse((Parent,ID = (33)),211,218)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
ontop = 1
pausemovetime = 999999999999
removetime = 33

[State 904, 2: Max-On Anim P2]
type = Explod
triggerall = time = 0
trigger1 = TeamSide = 2 && NumExplod(904) = 0
anim = 904
id = 904
postype = Right
pos = -79,ifelse((Parent,ID = (35)),211,218)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
ontop = 1
pausemovetime = 999999999999
removetime = 33

[state 904, 3]
type = ModifyExplod
trigger1 = NumExplod(904) = 1 && time <= 10
ID = 904
scale = 1,((time)*0.1)

[state 904, 4]
type = ModifyExplod
trigger1 = NumExplod(904) = 1 && time >= 23
ID = 904
scale = 1,((33-time)*0.1)

[State 904, 5]
type = DestroySelf
trigger1 = Time >= 33

------------------------------------------------------
; Max-On Bridge
------------------------------------------------------

[Statedef 905]
type = S
movetype = A
physics = S
anim = 0
ctrl = 1
velset = 0,0

[State 905, 1]
type = PlaySnd
trigger1 = Time = 0
value = s903,1

[State 905, 2]
type = Changestate
trigger1 = Time = 0
value = ifelse(command = "holddown",11,ifelse(command="High Jump",40,0))
ctrl = 1