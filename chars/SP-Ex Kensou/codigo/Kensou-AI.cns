;======================================================
; States that are executed when in self's state file
;======================================================
[Statedef -3]
;======================================================

[State -3, 1: Win Normal]
type = VarRandom
trigger1 = Roundstate = 2
v = 4
range = 5

[State -3, 2: Intro/Athena 2002]
type = Varset
trigger1 = ((P2Name = "Asamiya Athena" && Enemy,Anim = 199) && Enemy,Authorname = "Chloe")
trigger2 = ((P4Name = "Asamiya Athena" && Enemy,Anim = 199) && Enemy,Authorname = "Chloe")
trigger3 = (P2Name = "Athena Asamiya 2002") || (P4Name = "Athena Asamiya 2002") 
trigger4 = ((P2Name = "Athena") && Enemy,Authorname = "Themaztr/Hell Angel")
trigger5 = ((P4Name = "Athena") && Enemy,Authorname = "Themaztr/Hell Angel")
trigger6 = (P2Name = "Athena Asamiya") || (P4Name = "Athena Asamiya") 
v = 4
value = 6

[State -3, 3: Intro/Athena 2001]
type = Varset
trigger1 = ((P2Name = "Asamiya Athena" && Enemy,Anim = 192) && Enemy,Authorname = "Chloe")
trigger2 = ((P4Name = "Asamiya Athena" && Enemy,Anim = 192) && Enemy,Authorname = "Chloe")
v = 4
value = 7

[State -3, 4: Intro/Athena 2000]
type = Varset
trigger1 = (P2Name = "Athena Asamiya" && Enemy,Authorname = "EI and Ecchichuu") || ((P2Name = "Dark Athena 2nd" || P2Name = "Dark Athena 2nd B") && Enemy,Authorname = "ActJapan") || (P2Name = "Athena Asamiya" && Enemy,Authorname = "EI")
trigger2 = (P4Name = "Athena Asamiya" && Enemy,Authorname = "EI and Ecchichuu") || ((P4Name = "Dark Athena 2nd" || P4Name = "Dark Athena 2nd B") && Enemy,Authorname = "ActJapan") || (P4Name = "Athena Asamiya" && Enemy,Authorname = "EI")
v = 4
value = 8

[State -3, 5: Intro/Athena 1999]
type = Varset
trigger1 = P2Name = "Athena 1999"
trigger2 = P4Name = "Athena 1999"
v = 4
value = 9

[State -3, 6: Intro/Athena 1998]
type = Varset
trigger1 = P2Name = "Athena98"
trigger2 = P4Name = "Athena98"
v = 4
value = 10

[State -3, 7: Intro/Chin]
type = Varset
trigger1 = (P2Name = "chin" && Enemy,Authorname = "shinriyo") || ((P2Name = "M_Chin" && Enemy,Palno<7) && Enemy,Authorname = "MDK") || ((P2Name = "M_Chin" && Enemy,Palno>7) && Enemy,Authorname = "MDK")
trigger2 = (P4Name = "chin" && Enemy,Authorname = "shinriyo") || ((P4Name = "M_Chin" && Enemy,Palno<7) && Enemy,Authorname = "MDK") || ((P4Name = "M_Chin" && Enemy,Palno>7) && Enemy,Authorname = "MDK")
v = 4
value = ifelse(((P2Name = "M_Chin" && Enemy,Palno>7) && Enemy,Authorname = "MDK"),12,11)

[State -3, 8: Intro/Momoko]
type = VarSet
trigger1 = P2Name = "Momoko"
trigger2 = P4Name = "Momoko"
v = 5
value = 3

[State -3, 9: Intro/Win Athena]
type = VarSet
trigger1 = P2Name = "Athena Asamiya" || P2Name = "Athena" || P2Name = "Athena97" || P2Name = "Athena98" || P2Name = "Dark Athena 2nd" || P2Name = "Mystic Athena" || P2Name = "Athena_WPr"
trigger2 = P4Name = "Athena Asamiya" || P4Name = "Athena" || P4Name = "Athena97" || P4Name = "Athena98" || P4Name = "Dark Athena 2nd" || P4Name = "Mystic Athena" || P4Name = "Athena_WPr"
v = 5
value = 4

[State -3, 10: Intro/Win Bao]
type = VarSet
trigger1 = P2Name = "Bao" || P4Name = "Bao" || P2Name = "Bao KOF XI" || P4Name = "Bao KOF XI"
v = 5
value = 5

[State -3, 11: Intro/Win Chin]
type = VarSet
trigger1 = P2Name = "Chin" || P2Name = "Chin Gentsai"
trigger2 = P4Name = "Chin" || P4Name = "Chin Gentsai"
v = 5
value = 6

[State -3, 12: Intro/Win Xiangfei]
type = VarSet
trigger1 = P2Name = "Xiangfei" || P2Name = "Li Xiangfei" || P2Name = "Li Xiang Fei"
trigger2 = P4Name = "Xiangfei" || P4Name = "Li Xiangfei" || P4Name = "Li Xiang Fei"
v = 5
value = 7

[State -3, 13: Intro/Win Robert]
type = VarSet
trigger1 = P2Name = "Robert" || P2Name = "Robert Garcia" || P2Name = "nbcrobert" || P2Name = "ROBERT2003" || P2Name = "Robert Garcia 98" || P2Name = "Dark Robert"
trigger2 = P4Name = "Robert" || P4Name = "Robert Garcia" || P4Name = "nbcrobert" || P4Name = "ROBERT2003" || P4Name = "Robert Garcia 98" || P4Name = "Dark Robert"
v = 5
value = 8

[State -3, 14: Intro/Win Shingo]
type = VarSet
trigger1 = P2Name = "Shingo" || P2Name = "Shingo Yabuki" || P2Name = "Yabuki" || P2Name = "shingoX" || P2Name = "singoXI" || P2Name = "M_Shingo" || P2Name = "shingo after school" || P2Name = "Bad Shingo"
trigger2 = P4Name = "Shingo" || P4Name = "Shingo Yabuki" || P4Name = "Yabuki" || P4Name = "shingoX" || P4Name = "singoXI" || P4Name = "M_Shingo" || P4Name = "shingo after school" || P4Name = "Bad Shingo"
v = 5
value = 9

[State -3, 15: Intro/Win Duolon]
type = VarSet
trigger1 = P2Name = "Duolon"
trigger2 = P4Name = "Duolon"
v = 5
value = 10

[State -3, 16: Intro/Win Tung]
type = VarSet
trigger1 = P2Name = "Tung Fu Rue"
trigger2 = P4Name = "Tung Fu Rue"
v = 5
value = 11

[State -3, 17: Selector]
type = VarRandom
trigger1 = 1
v = 6
range = 1

[State -3, 18]
type = VarSet
trigger1 = GetHitVar(AnimType) = 0
V = 7
value = 0

[State -3, 19]
type = VarSet
trigger1 = GetHitVar(AnimType) = 1
V = 7
value = 1

[State -3, 20]
type = VarSet
trigger1 = GetHitVar(AnimType) >= 2
V = 7
value = 2

[State -3, 21]
type = VarRandom
trigger1 = 1
v = 9
range = 18

[State -3, 22: Running Sound]
type = PlaySnd
trigger1 = anim = 100 && Animelem = 2
value = s6, 0
loop = 1
channel = 2

[State -3, 23: Running Sound Stop]
type = StopSnd
trigger1 = anim != 100
channel = 2

[State -3, 24: Running Sound Stop]
type = StopSnd
trigger1 = Movetype = H
trigger2 = Movetype = I
trigger3 = stateno != 900
channel = 3

[State -3, 25: Charge Sound Stop]
type = StopSnd
trigger1 = Movetype = H
trigger2 = Movetype = A
trigger3 = stateno != 900
channel = 4

[State -3, 26: Dash Back]
type = PlaySnd
trigger1 = stateno = 105 && Animelem = 2
value = s3, 2

[State -3, 27: Intro Voice Channel]
type = StopSnd
trigger1 = RoundState >= 2
channel = 5

[State -3, 28: Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52
trigger2 = stateno = 106
trigger3 = stateno = 1812
trigger4 = stateno = 272
trigger5 = stateno = 1231
trigger6 = stateno = 1262
trigger7 = stateno = 1293
trigger8 = stateno = 1001
trigger9 = stateno = 1011
trigger10 = stateno = 1266
trigger11 = stateno = 3011
trigger12 = stateno = 3001
trigger13 = stateno = 3051
trigger14 = stateno = 3601
trigger15 = stateno = 3605
value = s4, 0

[State -3, 29: Weak Punch]
type = PlaySnd
triggerall = Var(6) = 1
trigger1 = (stateno = 200 && Animelem = 2)
trigger2 = (stateno = 400 && Animelem = 2)
trigger3 = (stateno = 600 && Animelem = 2)
value = s9, 0

[State -3, 30: Strong Punch]
type = PlaySnd
;triggerall = Var(6) = 1
trigger1 = (stateno = 210 && Animelem = 3)
trigger2 = (stateno = 220 && Animelem = 4)
;trigger3 = (stateno = 220 && Animelem = 8)
trigger3 = (stateno = 260 && Animelem = 4)
trigger4 = (stateno = 261 && Animelem = 4)
trigger5 = (stateno = 410 && Animelem = 3)
trigger6 = (stateno = 610 && Animelem = 3)
value = s9, 1

[State -3, 31: Weak Kick]
type = PlaySnd
triggerall = Var(6) = 1
trigger1 = (stateno = 230 && Animelem = 2)
trigger2 = (stateno = 235 && Animelem = 2)
trigger3 = (stateno = 430 && Animelem = 2)
trigger4 = (stateno = 630 && Animelem = 3)
trigger5 = (stateno = 635 && Animelem = 4)
value = s9, 0

[State -3, 32: Strong Kick]
type = PlaySnd
;triggerall = Var(6) = 1
trigger1 = (stateno = 240 && Animelem = 3)
trigger2 = (stateno = 250 && Animelem = 3)
trigger3 = (stateno = 440 && Animelem = 2)
trigger4 = (stateno = 640 && Animelem = 3)
value = s9, 1

[State -3, 33: CD]
type = PlaySnd
triggerall = Var(6) = 1
trigger1 = (stateno = 300 && Animelem = 5)
trigger2 = (stateno = 350 && Animelem = 2)
trigger3 = (stateno = 650 && Animelem = 4)
value = s9, 2

[State -3, 34: FX1]
type = PlaySnd
trigger1 = (stateno = 200 && Animelem = 2)
trigger2 = (stateno = 400 && Animelem = 2)
trigger3 = (stateno = 600 && Animelem = 3)
value = s8, 0

[State -3, 35: FX2]
type = PlaySnd
trigger1 = (stateno = 230 && Animelem = 2)
trigger2 = (stateno = 235 && Animelem = 2)
trigger3 = (stateno = 430 && Animelem = 3)
trigger4 = (stateno = 630 && Animelem = 2)
trigger5 = (stateno = 635 && Animelem = 4)
value = s8, 1

[State -3, 36: FX3]
type = PlaySnd
trigger1 = (stateno = 210 && Animelem = 3)
trigger2 = (stateno = 220 && Animelem = 4)
trigger3 = (stateno = 220 && Animelem = 8)
trigger4 = (stateno = 260 && Animelem = 7)
trigger5 = (stateno = 261 && Animelem = 7)
trigger6 = (stateno = 410 && Animelem = 2,2)
trigger7 = (stateno = 610 && Animelem = 3)
trigger8 = (stateno = 1000 && Animelem = 4)
trigger9 = (stateno = 1010 && Animelem = 4)
trigger10 = (stateno = 1290 && Animelem = 4)
trigger11 = (stateno = 1290 && Animelem = 10)
trigger12 = (stateno = 1290 && Animelem = 16)
trigger13 = (stateno = 1294 && Animelem = 4)
trigger14 = (stateno = 1294 && Animelem = 10)
trigger15 = (stateno = 1294 && Animelem = 16)
trigger16 = (stateno = 1296 && Animelem = 6)
trigger17 = (stateno = 1296 && Animelem = 12)
trigger18 = (stateno = 1296 && Animelem = 18)
trigger19 = (stateno = 3100 && Animelem = 5)
trigger20 = (stateno = 3100 && Animelem = 11)
trigger21 = (stateno = 3100 && Animelem = 17)
trigger22 = (stateno = 3110 && Animelem = 3)
trigger23 = (stateno = 3110 && Animelem = 7)
trigger24 = (stateno = 3110 && Animelem = 12)
trigger25 = (stateno = 3110 && Animelem = 19)
value = s8, 2

[State -3, 37: FX4]
type = PlaySnd
trigger1 = (stateno = 240 && Animelem = 3)
trigger2 = (stateno = 250 && Animelem = 3,2)
trigger3 = (stateno = 271 && Animelem = 3)
trigger4 = (stateno = 440 && Animelem = 2,3)
trigger5 = (stateno = 640 && Animelem = 3,2)
trigger6 = (stateno = 730 && Animelem = 2,4)
trigger7 = (stateno = 1000 && Animelem = 7)
trigger8 = (stateno = 1000 && Animelem = 11)
trigger9 = (stateno = 1010 && Animelem = 7)
trigger10 = (stateno = 1010 && Animelem = 11)
trigger11 = (stateno = 1100 && Animelem = 5)
trigger12 = (stateno = 1100 && Animelem = 8)
trigger13 = (stateno = 1110 && Animelem = 5)
trigger14 = (stateno = 1110 && Animelem = 8)
trigger15 = (stateno = 3000 && Animelem = 8)
trigger16 = (stateno = 3011 && Animelem = 4)
trigger17 = (stateno = 3011 && Animelem = 8)
trigger18 = (stateno = 3050 && Animelem = 8)
trigger19 = (stateno = 3050 && Animelem = 11)
trigger20 = (stateno = 3050 && Animelem = 15)
trigger21 = (stateno = 3600 && Animelem = 8)
trigger22 = (stateno = 3600 && Animelem = 11)
trigger23 = (stateno = 3600 && Animelem = 15)
value = s8, 3

[State -3, 38: FX5]
type = PlaySnd
trigger1 = (stateno = 300 && Animelem = 4,2)
trigger2 = (stateno = 350 && Animelem = 5)
trigger3 = (stateno = 650 && Animelem = 4)
trigger4 = (stateno = 1266 && Animelem = 5)
trigger5 = (stateno = 1291 && Animelem = 4)
trigger6 = (stateno = 1295 && Animelem = 4)
trigger7 = (stateno = 1400 && Animelem = 6)
trigger8 = (stateno = 1450 && Animelem = 6)
trigger9 = (stateno = 3120 && Animelem = 5)
value = s8, 4

[State -3, 39: Ouch A]
type = PlaySnd
triggerall = Alive
triggerall = Var(6) = 1
triggerall = time = 2 && Var(7) = 0
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000, 0

[State -3, 40: Ouch B]
type = PlaySnd
triggerall = Alive
triggerall = Var(6) = 1
triggerall = time = 2 && Var(7) = 1
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000, 1

[State -3, 41: Ouch C]
type = PlaySnd
triggerall = Alive
triggerall = Var(6) = 1
triggerall = time = 2 && Var(7) = 2
trigger1 = stateno = 5000
trigger2 = stateno = 5010
trigger3 = stateno = 5020
value = s5000, 2

[State -3, 42: Ouch D]
type = PlaySnd
triggerall = Alive
triggerall = time = 2 && Var(6) = 1
trigger1 = stateno = 5100 && life > 1
value = s5000, 3

[State -3, コマンドを入れたらVarをON] 
type = VarSet
triggerall = !var(59)
trigger1 = command = "jump"
trigger1 = ctrl
trigger2 = prevstateno = 100
trigger2 = command = "holdfwd"
v = 10
value = 1

[State -3, sysvarを引継ぐ]
type = VarSet
trigger1 = Var(10) = 1
trigger1 = stateno = 40
trigger1 = AnimTime = 0
var(10) = ifelse(sysvar(1)=0, 2, ifelse(sysvar(1)=1, 3, 4))

[State -3, AI]
type = VarSet
trigger1 = var(59)
trigger1 = stateno = [34,37]
trigger1 = AnimTime = 0
var(10) = ifelse(sysvar(1) = 0, 2, ifelse(sysvar(1)=1, 3, 4))

[State -3, varをOFFにするステート]
type = VarSet
triggerall = Time = 2
trigger1 = stateno = 50
trigger2 = stateno != [40,59]
v = 10
value = 0

[State -3, 前にボタンを押してたら前にも加速]
type = VelAdd
trigger1 = var(10) = 3
trigger1 = stateno = 50
x = 2

[State -3, 後ろなら後ろに加速]
type = VelAdd
trigger1 = var(10) = 4
trigger1 = stateno = 50
x = -2.1

[State -3, 垂直ジャンプにveladdを使って上に加速]
type = VelAdd
trigger1 = var(10) = 2
trigger1 = stateno = 50
y = -2.1

[State -3, Afterimage]
type = Afterimage
trigger1 = var(10) >= 1
trigger1 = stateno = 50
trigger2 = AnimTime = 0
trigger2 = prevstateno = 100 ;RUN_FWD
trigger2 = sysvar(1) = 1
time = 2
length = 7
PalBright = 0,0,0
PalContrast = 256,256,256
PalAdd = 0,0,0
PalMul = 1,1,1
FrameGap = 3

[State 2041, 2]
type = Afterimagetime
triggerall = Var(10) = 0
trigger1 = stateno = 50
trigger1 = time%2 = 0 && Time < 15
time = 2

;---------------------------------------------------------------------------
; 端でめくらないように

[State -3, CornerPush]
type = Width
trigger1 = Enemy, BackEdgeDist < 10
trigger2 = Enemy, FrontEdgeDist < 10
edge = 10

;-------------------------------------------------------------------------------
; AI By Z.E.R.O.
;---------------------------------------------------------------------------
; 各種ヘルパー
;---------------------------------------------------------------------------
[State -3, AI起動ヘルパー]
type = Helper
triggerall = var(59) = 0
trigger1 =!NumHelper(30000)
trigger1 =!IsHelper
trigger1 = roundstate <= 2 && alive
Trigger1 =!ctrl && stateno=0
helpertype = normal
name = "AI"
stateno = 30000
ID = 30000
pos = 0,0
keyctrl = 1
pausemovetime = 9999999
supermovetime = 9999999
persistent = 0

[State -3, ガードチェックヘルパー]
Type = Helper
triggerall = var(59) = 1
triggerall = RoundState = 2
trigger1 =!NumHelper(31000+id)
trigger1 =!IsHelper
HelperType = Normal
Name = "Guard"
PosType = left
StateNo = 31000
ID = 31000+id
PauseMoveTime = 0
pos=0,9999
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0
IgnoreHitPause = 1
KeyCtrl = 0
Ownpal = 1

[State -3, 飛び道具確認ヘルパー]
Type = Helper
triggerall = var(59) = 1
trigger1 =!NumHelper(32000)
trigger1 =!ishelper
HelperType = Normal
Name = "TOBIDOUGU"
StateNo = 32000
ID = 32000
Pos = 9999,9999
KeyCtrl = 0
persistent = 0
pausemovetime=2147483647
supermovetime=2147483647

[State -3, 飛び道具確認ヘルパー]
Type = Helper
triggerall = var(59) = 1
trigger1 =!NumHelper(32500)
trigger1 =!ishelper
HelperType = Normal
Name = "TOBIDOUGU ITI A"
StateNo = 32500
ID = 32500
Pos = 9999,9999
KeyCtrl = 0
persistent = 0
pausemovetime=2147483647
supermovetime=2147483647

[State -3, 飛び道具確認ヘルパー]
Type = Helper
triggerall = var(59) = 1
trigger1 =!NumHelper(32501)
trigger1 =!ishelper
HelperType = Normal
Name = "TOBIDOUGU ITI B"
StateNo = 32500
ID = 32501
Pos = 9999,9999
KeyCtrl = 0
persistent = 0
pausemovetime=2147483647
supermovetime=2147483647

[State -3]
type = Helper
trigger1 = !numhelper(999)
helpertype = normal
name = "AIhelper"
ID = 999
stateno = 999
pos = 9999,9999
pausemovetime = 2147483647
supermovetime = 2147483647
persistent = 0


[State -3,  AIhelper]
Type = HelPer
Trigger1 = !IsHelPer
Trigger1 = !NumHelPer(35000) && Var(59)
HelPerType = Normal
Name = "AI_Learning"
StateNo = 35000
ID = 35000
OwnPal = 1
IgnoreHitPause = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

[State -3,  AIhelper]
Type = HelPer
Trigger1 = !IsHelPer
Trigger1 = !NumHelPer(35001) && Var(59)
HelPerType = Normal
Name = "AI_Learning"
StateNo = 35001
ID = 35001
OwnPal = 1
IgnoreHitPause = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647

[State -3, AIhelper]
Type = HelPer
Trigger1 = !IsHelPer
Trigger1 = !NumHelPer(35002) && Var(59)
HelPerType = Normal
Name = "AI_Learning"
StateNo = 35002
ID = 35002
OwnPal = 1
IgnoreHitPause = 1
PauseMoveTime = 2147483647
SuperMoveTime = 2147483647
;---------------------------------------------------------------------------
[State -3, 関係無いステートに行かないように]
type = ChangeState
trigger1 = ishelper(30000)
trigger1 = stateno != 30000
value = 30000

[State -3, 関係無いステートに行かないように]
type = ChangeState
trigger1 = ishelper
trigger1 = ishelper(31000+root,id)
trigger1 = stateno != 31000
value = 31000

[State -3]
type = ChangeState
trigger1 = ishelper(999)
trigger1 = stateno!=999
value = 999

[State -3, 関係無いステートに行かないように]
type = SelfState
trigger1 = ishelper(32000)
trigger1 = stateno != 32000
value = 32000

[State -3, 関係無いステートに行かないように]
type = SelfState
trigger1 = ishelper(32500) || ishelper(32501)
trigger1 = stateno != 32500
value = 32500

;---------------------------------------------------------------------------
; AI swich -> ON
[State -3, AI]
type = VarSet
triggerall = !ishelper || isHelper(30000)
triggerall = var(59) != 1
triggerall = RoundState = [1,2]
trigger1  = Command = "AI1"
trigger2  = Command = "AI2"
trigger3  = Command = "AI3"
trigger4  = Command = "AI4"
trigger5  = Command = "AI5"
trigger6  = Command = "AI6"
trigger7  = Command = "AI7"
trigger8  = Command = "AI8"
trigger9  = Command = "AI9"
trigger10 = Command = "AI10"
trigger11 = Command = "AI11"
trigger12 = Command = "AI12"
trigger13 = Command = "AI13"
trigger14 = Command = "AI14"
trigger15 = Command = "AI15"
trigger16 = Command = "AI16"
trigger17 = Command = "AI17"
trigger18 = Command = "AI18"
trigger19 = Command = "AI19"
trigger20 = Command = "AI20"
trigger21 = Command = "AI21"
trigger22 = Command = "AI22"
trigger23 = Command = "AI23"
trigger24 = Command = "AI24"
trigger25 = Command = "AI25"
trigger26 = NumHelper(30000)
trigger26 = Helper(30000),var(59)
trigger26 = Helper(30000),time > 5
var(59) = 1

;---------------------------------------------------------------------------
[State -3, AI]
Type = VarSet
triggerall = var(59) = 1
trigger1 = RoundState = 4
trigger2 = Win = 1
trigger3 = Lose = 1
trigger4 = DrawGame = 1
V = 59
Value = -1

[State -3, AI]
Type = VarSet
triggerall = var(59) = -1
trigger1 = RoundState = 2
V = 59
Value = 1

;-----------------------------------------------------------------------------
;タッグ用生死判別
;-----------------------------------------------------------------------------
[State -3, VarSet]
Type = VarSet
Trigger1 = NumEnemy = 1
Trigger2 = NumEnemy = 2
Trigger2 = Enemynear,Life > 0
var(58) = 0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -3, VarSet]
Type = VarSet
Trigger1 = NumEnemy > 1
Trigger1 = Enemynear,Life = 0
var(58) = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

;-----------------------------------------------------------------------------
[State -3,varset]
Type = varset
trigger1 = NumEnemy = 1
fvar(37) = 0

[State -3,varset]
Type = varset
trigger1 = NumEnemy = 2
trigger1 = EnemyNear(0),Alive
trigger1 = EnemyNear(1),Alive
fvar(37) = IfElse(((Abs(Pos X - EnemyNear(0),Pos X)) < (Abs(Pos X - EnemyNear(1),Pos X))),0,1)
ignorehitpause = 1

[State -3,varset]
Type = varset
trigger1 = NumEnemy = 2
trigger1 = !EnemyNear(0),Alive || !EnemyNear(1),Alive
fvar(37) = IfElse(EnemyNear(0),Alive,0,1)
ignorehitpause = 1

;-----------------------------------------------------------------------------
;相手の起き上がりの投げ無敵を調べる
;-----------------------------------------------------------------------------
[State -3, VarSet]
Type = VarSet
trigger1 = enemynear(var(58)),statetype = L
V = 53
Value = -1
IgnoreHitPause = 1

[State -3, VarSet]
Type = VarAdd
triggerall = var(53) > 0
trigger1 = enemynear(var(58)),statetype != L
V = 53
Value = -1
IgnoreHitPause = 1

[State -3, VarSet]
Type = VarSet
triggerall = var(53) = -1
trigger1 = enemynear(var(58)),statetype != L
V = 53
Value = 12
IgnoreHitPause = 1

; AIレベル管理
;-----------------------------------------------------------------------------
[State -3, リミッター]
Type = VarSet
trigger1 = var(57) > 8
trigger2 = Var(56) > 10
var(57) = 0

[State -3, 反応速度制限]
Type = VarSet
trigger1 = var(56) > var(57) + 2
var(56) = var(57) + 2

[State -3, リミッター]
Type = VarSet
trigger1 = var(57) != 8
var(57) = 8

[State -3, リミッター]
Type = VarSet
trigger1 = var(56) != 10
var(56) = 10

[State -2];movereversed
type = varset
trigger1 = movereversed
v = 27
value = enemy,prevstateno
ignorehitpause = 1

[State -2];movereversed
type = varset
trigger1 = movereversed
v = 28
value = enemy,stateno
ignorehitpause = 1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;飛び道具対策
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;前転(飛び道具対策)
[State -3, FRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2  
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),MoveType != H
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,52]) || stateno = 52 || (stateno = [100,101]) || (stateno = [120,149])
trigger1 = P2bodydist X >= 200 || (enemynear(var(58)),AnimTime <= -35 && !enemynear(var(58)),Ctrl)
trigger1 = (Enemy,NumHelper > 0 && Enemy,NumHelper > Helper(32000),var(1)) || Enemy,Numproj != 0
trigger1 = var(45) = 1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
; タッグ用
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[State -3, 敵が１人]
Type = VarSet
trigger1 = NumEnemy != 2
trigger2 = !(EnemyNear(0),Alive && EnemyNear(1),Alive)
v = 51
value = 0

[State -3, 敵が２人かつ前方のみ]
Type = VarSet
triggerall = NumEnemy = 2
triggerall = EnemyNear(0),Alive
triggerall = EnemyNear(1),Alive
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
v = 51
value = 1

[State -3, 自分、パートナー、敵、敵]
Type = VarSet
triggerall = NumEnemy = 2
triggerall = NumPartner
triggerall = EnemyNear(0),Alive
triggerall = EnemyNear(1),Alive
triggerall = Partner,Alive
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Partner,Pos X > 0,EnemyNear(0),Pos X - Partner,Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Partner,Pos X > 0,EnemyNear(1),Pos X - Partner,Pos X < 0)
v = 51
value = 2

[State -3, 自分、敵、パートナー、敵]
Type = VarSet
triggerall = NumEnemy = 2
triggerall = NumPartner
triggerall = EnemyNear(0),Alive
triggerall = EnemyNear(1),Alive
triggerall = Partner,Alive
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Partner,Pos X < 0,EnemyNear(0),Pos X - Partner,Pos X > 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Partner,Pos X > 0,EnemyNear(1),Pos X - Partner,Pos X < 0)
v = 51
value = 3

[State -3, 自分、敵、敵、パートナー]
Type = VarSet
triggerall = NumEnemy = 2
triggerall = NumPartner
triggerall = EnemyNear(0),Alive
triggerall = EnemyNear(1),Alive
triggerall = Partner,Alive
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X > 0,EnemyNear(0),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X > 0,EnemyNear(1),Pos X - Pos X < 0)
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Partner,Pos X < 0,EnemyNear(0),Pos X - Partner,Pos X > 0)
trigger1 = ifelse(facing = 1,EnemyNear(1),Pos X - Partner,Pos X < 0,EnemyNear(1),Pos X - Partner,Pos X > 0)
v = 51
value = 4

[State -3, 背後に敵有り]
Type = VarSet
triggerall = NumEnemy = 2
triggerall = EnemyNear(0),Alive
triggerall = EnemyNear(1),Alive
trigger1 = ifelse(facing = 1,EnemyNear(0),Pos X - Pos X < 0,EnemyNear(0),Pos X - Pos X > 0)
trigger2 = ifelse(facing = 1,EnemyNear(1),Pos X - Pos X < 0,EnemyNear(1),Pos X - Pos X > 0)
v = 51
value = 5

;---------------------------------------------------------------------------
[State -3, パートナー不在]
Type = VarSet
triggerall = TeamMode = Simul
trigger1 = !NumPartner
trigger2 = !Partner,Alive
v = 52
value = 0

[State -3, パートナー後衛]
Type = VarSet
triggerall = TeamMode = Simul
triggerall = NumPartner
triggerall = Partner,Alive
trigger1 = ifelse(facing = 1,Partner,Pos X - Pos X < 0,Partner,Pos X - Pos X > 0)
v = 52
value = 1

[State -3, パートナー前衛]
Type = VarSet
triggerall = TeamMode = Simul
triggerall = NumPartner
triggerall = Partner,Alive
trigger1 = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
v = 52
value = 2

[State -3, パートナー被ダメージ]
Type = VarSet
triggerall = TeamMode = Simul
triggerall = NumPartner
triggerall = Partner,Alive
triggerall = Partner,MoveType = H
triggerall = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
trigger1 = Partner,StateNo = [5000,5100)
trigger2 = Partner,StateNo = [120,159]
v = 52
value = 3

[State -3, パートナー攻撃中]
Type = VarSet
triggerall = TeamMode = Simul
triggerall = NumPartner
triggerall = Partner,Alive
triggerall = Partner,MoveType = A
triggerall = Partner,MoveType != H
triggerall = EnemyNear(var(58)),MoveType = H
triggerall = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
trigger1 = EnemyNear(var(58)),StateNo = [5000,5100)
v = 52
value = 4

[State -3, パートナー被ステート奪取]
Type = VarSet
triggerall = TeamMode = Simul
triggerall = NumPartner
triggerall = Partner,Alive
triggerall = Partner,MoveType = H
triggerall = ifelse(facing = 1,Partner,Pos X - Pos X > 0,Partner,Pos X - Pos X < 0)
trigger1 = Partner,StateNo != [5000,5500]
trigger1 = Partner,StateNo != [120,159]
v = 52
value = 5

[State -3, パートナーステート奪取]
Type = VarSet
triggerall = TeamMode = Simul
triggerall = NumPartner
triggerall = Partner,Alive
triggerall =(Partner,StateNo = [2000,4999]) || Partner,StateNo > 5500
trigger1 = EnemyNear(var(58)),MoveType = H
trigger1 = EnemyNear(var(58)),StateNo != [5000,5500]
trigger1 = EnemyNear(var(58)),StateNo != [120,159]
v = 52
value = 6

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;隙突き
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[State -3,G･C]
type = ChangeState
value = 41
triggerall = var(59)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2BodyDist X = [-10,100+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22 || stateno = 52
triggerall = P2MoveType = A
trigger1 = P2StateType != A
trigger1 = EnemyNear(floor(fvar(37))),HitDefAttr = SCA,AT

[State -3,]
Type = ChangeState
value = 42
Triggerall = var(59)
triggerall = Helper(3500),var(10) < 2
triggerall = roundstate = 2
TriggerAll = StateType != A
TriggerAll = P2StateType = L
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
Triggerall = P2BodyDist X = [-5,120]
Triggerall = P2StateNo = 5120
Trigger1 = EnemyNear(floor(fvar(37))),Facing = Facing
Trigger1 = EnemyNear(floor(fvar(37))),FrontEdgeBodyDist < 20
Trigger2 = EnemyNear(floor(fvar(37))),Facing!= Facing
Trigger2 = EnemyNear(floor(fvar(37))),BackEdgeBodyDist  < 20


[State -3,]
Type = ChangeState
value = 42
Triggerall = var(59)
triggerall = roundstate = 2
TriggerAll = StateType != A
TriggerAll = P2StateType = S
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
Triggerall = P2BodyDist X = [-5,120]
Triggerall = EnemyNear(floor(fvar(37))),prevstateno = 5050
Trigger1 = EnemyNear(floor(fvar(37))),Facing = Facing
Trigger1 = EnemyNear(floor(fvar(37))),FrontEdgeBodyDist < 20
Trigger2 = EnemyNear(floor(fvar(37))),Facing!= Facing
Trigger2 = EnemyNear(floor(fvar(37))),BackEdgeBodyDist  <  20

[State -3, Sjump]
type = ChangeState
value = 41
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
triggerall = P2BodyDist X = [0,90]
triggerall = !inguarddist
triggerall = P2StateType != L
triggerall = P2StateType = C
triggerall = P2stateno = [120,159]
Trigger1 = Random <= var(59)*60

[State -3, H-Jump]
type = ChangeState
value = 42
Triggerall = var(59)
Triggerall = StateType != A
Triggerall = RoundState = 2
Triggerall = !InGuardDist
triggerall = P2StateType != L
triggerall = P2StateType != A
Triggerall = P2BodyDist X >= 170
triggerall = enemynear(fvar(37)),Animtime < -33
triggerall = enemynear(fvar(37)),numproj = 0
triggerall = Ctrl || stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3) || stateno = 99
trigger1 = helper(35002),var(11) = enemynear(fvar(37)),stateno
trigger2 = helper(35002),var(12) = enemynear(fvar(37)),stateno
trigger3 = helper(35002),var(13) = enemynear(fvar(37)),stateno
trigger4 = helper(35002),var(14) = enemynear(fvar(37)),stateno
trigger5 = helper(35002),var(15) = enemynear(fvar(37)),stateno

[State -3,G･C]
type = ChangeState
value = 41
triggerall = var(59)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
;triggerall = P2BodyDist X = [80,150+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22 || stateno = 52
triggerall = P2MoveType = A
trigger1 = P2StateType != A
trigger1 = time > 20 && stateno = [120,149]

[State -3,]
Type = ChangeState
value = 43
Triggerall = var(59)
triggerall = roundstate = 2
TriggerAll = StateType != A
TriggerAll = P2StateType = L
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
Triggerall = P2BodyDist X = [40,69]
Trigger1 = P2StateNo = 5120
Trigger1 = Random <= var(59)*100

[State -3,]
Type = ChangeState
value = 41
Triggerall = var(59)
triggerall = roundstate = 2
TriggerAll = StateType != A
TriggerAll = P2StateType = L
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
Triggerall = P2BodyDist X = [70,90]
Trigger1 = P2StateNo = 5120
Trigger1 = EnemyNear(floor(fvar(37))),Animtime = [-17,-15]

[State -3, Sjump]
type = ChangeState
value = 41
Triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
triggerall = P2BodyDist X = [50,140]
triggerall = backedgebodydist >= 25
triggerall = P2BodyDist Y >= 0
triggerall = !inguarddist
triggerall = P2movetype != H
triggerall = P2StateType != L
triggerall = P2StateType = C
Trigger1 = Random <= 333

[State -3, Sjump]
type = ChangeState
value = 42
Triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
triggerall = P2BodyDist X = [140,200]
triggerall = backedgebodydist >= 25
triggerall = P2BodyDist Y >= 0
triggerall = !inguarddist
Triggerall = P2StateType != A
Triggerall = P2moveType != H
Triggerall = P2MoveType = I
Triggerall = P2StateType != L
Trigger1 = Random <= 333

[State -3, Sjump]
type = ChangeState
value = 41
Triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
triggerall = P2BodyDist X = [0,120]
triggerall = backedgebodydist >= 25
triggerall = P2BodyDist Y >= 0
triggerall = !inguarddist
Triggerall = P2StateType != A
Triggerall = P2moveType != H
triggerall = P2stateno = [120,159]
Triggerall = P2StateType != L
Trigger1 = Random <= 333

[State -3, Sjump]
type = ChangeState
value = 42
triggerall = var(59) > 1
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
triggerall = P2BodyDist X = [140,200]
triggerall = backedgebodydist >= 25
triggerall = P2BodyDist Y >= 0
triggerall = !inguarddist
Triggerall = P2StateType != A
Triggerall = P2moveType != H
triggerall = P2stateno = [120,159]
Triggerall = P2StateType != L
Trigger1 = Random <= 333

[State -3,KONGZHEN]
type = ChangeState
value = 1060
triggerall = var(59) > 1
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2StateType != L
triggerall = P2bodydist X = [0+floor(8*(EnemyNear(floor(fvar(37))),vel X)),80+floor(8*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2bodydist y = [-50,10]
TriggerAll = EnemyNear(floor(fvar(37))),MoveType = A
triggerall = EnemyNear(floor(fvar(37))),ctrl = 0
Trigger1 = Stateno = 200
Trigger2 = Stateno = 210
Trigger3 = Stateno = 220
Trigger4 = Stateno = 230
Trigger5 = Stateno = 235
Trigger6 = Stateno = 240
trigger7 = stateno = 250
trigger8 = stateno = 261
trigger9 = stateno = 270
trigger10 = stateno = 271
trigger11 = stateno = 400
trigger12 = stateno = 410
trigger13 = stateno = 430

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2  
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 720
triggerall = statetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno >= 200
triggerall = enemynear(var(58)),animtime <= -4
triggerall = enemy,numproj = 0
triggerall =!InGuardDist || enemynear(var(58)),facing = facing || (prevstateno = [130,155]) || (prevstateno = [700,720])
triggerall = p2bodydist X < 30
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [100,101]) || stateno = 1120 || stateno = 1160 || (stateno = [120,149])
trigger1 = p2bodydist x = [-5,25]

[State -3]
type = ChangeState
value = ifelse(random<=500,800,810)
triggerall = var(59) > 1
triggerall = Roundstate = 2
triggerall = P2Movetype != H
triggerall = P2stateno != [5000,5050]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 52|| stateno = [120,149]
triggerall = prevstateno != 1700||stateno !=1700
triggerall = statetype != A
triggerall = p2statetype != A
triggerall = P2statetype != L
triggerall = p2stateno != 5120
triggerall = p2bodydist x = [-10,15]
trigger1 = EnemyNear(floor(fvar(37))),facing != facing
trigger2 = EnemyNear(floor(fvar(37))),Animtime < -5
trigger2 = EnemyNear(floor(fvar(37))),facing  = facing

[State -3]
type = ChangeState
value = ifelse(random<=500,800,810)
triggerall = var(59) > 1
triggerall = Roundstate = 2
triggerall = P2Movetype != H
triggerall = P2stateno != [5000,5050]
triggerall = Stateno = 200 || Stateno = 210 || Stateno = 220 || Stateno = 230 || Stateno = 235 || Stateno = 400 || Stateno = 410 || Stateno = 430 || Stateno = 250|| Stateno = 260
triggerall = !MoveContact && Animtime = 0
triggerall = statetype != A
triggerall = p2statetype != A
triggerall = P2statetype != L
triggerall = p2stateno != 5120
triggerall = p2bodydist x = [-10,15]
trigger1 = EnemyNear(floor(fvar(37))),facing != facing
trigger2 = EnemyNear(floor(fvar(37))),Animtime < -5
trigger2 = EnemyNear(floor(fvar(37))),facing  = facing

[State -3, Crouching Light Kick]
type = ChangeState
value = ifelse(Random <= 500,400,210)
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99
triggerall = P2BodyDist X = [-5,25+floor(5*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2BodyDist Y >= 0
triggerall = P2statetype != L
triggerall = P2movetype = H
triggerall = P2statetype != A
;triggerall = !InGuardDist
Trigger1 = Random <= (var(59)+7)*100
Trigger1 = EnemyNear(floor(fvar(37))),Facing!= Facing
Trigger2 = Random <= (var(59)+7)*100
Trigger2 = EnemyNear(floor(fvar(37))),Facing = Facing

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 235
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2  
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 720
triggerall = statetype != A
triggerall = enemynear(var(58)),ctrl = 0
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno >= 200
triggerall = enemynear(var(58)),animtime <= -5
triggerall = enemy,numproj = 0
triggerall =!InGuardDist || enemynear(var(58)),facing = facing || (prevstateno = [130,155]) || (prevstateno = [700,720])
triggerall = p2bodydist X < 20
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [100,101]) || stateno = 1120 || stateno = 1160 || (stateno = [120,149])
trigger1 = p2bodydist x = [-5,20]

[State -3, Crouching Light Punch]
type = ChangeState
value = 400
triggerall = var(59)
triggerall = roundstate = 2
triggerall = statetype != A
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99 || stateno = 100
triggerall = P2BodyDist X = [-5+floor(5*(EnemyNear(floor(fvar(37))),vel X)),15+floor(5*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2BodyDist Y >= 0--floor(5*(EnemyNear(floor(fvar(37))),vel Y)+(5*(5+1)/2)*fvar(30))
triggerall = P2statetype != L
triggerall = P2movetype != H
triggerall = P2statetype != C
;triggerall = !InGuardDist || Facing = EnemyNear(fvar(37)),Facing
Trigger1 = Random <= var(59)*30

[State -3]
type = ChangeState
value = 210
triggerall = var(59)
triggerall = Roundstate = 2
triggerall = EnemyNear(fvar(37)),Movetype != H
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 52
|| stateno = 99
triggerall = statetype != A
triggerall = EnemyNear(fvar(37)),statetype != A
triggerall = EnemyNear(fvar(37)),statetype != L
triggerall = EnemyNear(fvar(37)),stateno != 5120
triggerall = P2bodydist x = [-10,20]
trigger1 = EnemyNear(floor(fvar(37))),facing  = facing
trigger1 = EnemyNear(floor(fvar(37))),Animtime < -3

[State -3, Stand Strong Punch]
type = ChangeState
value = 210
triggerall = var(59)
triggerall = RoundState = 2
triggerall = Random <= var(59)*80
triggerall = statetype != A
triggerall = enemynear(floor(fvar(37))),statetype != L
triggerall = enemynear(floor(fvar(37))),movetype = A
triggerall = enemynear(floor(fvar(37))),ctrl = 0
triggerall = enemynear(floor(fvar(37))),stateno = [200,999]
triggerall = p2bodydist X = [-8,24]
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99 || stateno = 100|| stateno = [120,149]
trigger1 = (enemynear(fvar(37)), StateNo = Helper(34000), var(1)) && enemynear(fvar(37)), Time < (Helper(34000), var(2) - 3)
trigger2 = (enemynear(fvar(37)), StateNo = Helper(34000), var(3)) && enemynear(fvar(37)), Time < (helper(34000), var(4) - 3)
trigger3 = (enemynear(fvar(37)), StateNo = helper(34000), var(5)) && enemynear(fvar(37)), Time < (helper(34000), var(6) - 3)
trigger4 = (enemynear(fvar(37)), StateNo = helper(34000), var(7)) && enemynear(fvar(37)), Time < (helper(34000), var(8) - 3)
trigger5 = (enemynear(fvar(37)), StateNo = helper(34000), var(9)) && enemynear(fvar(37)), Time < (helper(34000), var(10) - 3)
trigger6 = (enemynear(fvar(37)), StateNo = helper(34000), var(11)) && enemynear(fvar(37)), Time < (helper(34000), var(12) - 3)
trigger7 = (enemynear(fvar(37)), StateNo = helper(34000), var(13)) && enemynear(fvar(37)), Time < (helper(34000), var(14) - 3)
trigger8 = (enemynear(fvar(37)), StateNo = helper(34000), var(15)) && enemynear(fvar(37)), Time < (helper(34000), var(16) - 3)
trigger9 = (enemynear(fvar(37)), StateNo = helper(34000), var(17)) && enemynear(fvar(37)), Time < (helper(34000), var(18) - 3)
trigger10 = (enemynear(fvar(37)), StateNo = helper(34000), var(19)) && enemynear(fvar(37)), Time < (helper(34000), var(20) - 3)
trigger11 = (enemynear(fvar(37)), StateNo = helper(34000), var(21)) && enemynear(fvar(37)), Time < (helper(34000), var(22) - 3)
trigger12 = (enemynear(fvar(37)), StateNo = helper(34000), var(23)) && enemynear(fvar(37)), Time < (helper(34000), var(24) - 3)
trigger13 = (enemynear(fvar(37)), StateNo = helper(34000), var(25)) && enemynear(fvar(37)), Time < (helper(34000), var(26) - 3)
trigger14 = (enemynear(fvar(37)), StateNo = helper(34000), var(27)) && enemynear(fvar(37)), Time < (helper(34000), var(28) - 3)
trigger15 = (enemynear(fvar(37)), StateNo = helper(34000), var(29)) && enemynear(fvar(37)), Time < (helper(34000), var(30) - 3)
trigger16 = (enemynear(fvar(37)), StateNo = helper(34000), var(31)) && enemynear(fvar(37)), Time < (helper(34000), var(32) - 3)
trigger17 = (enemynear(fvar(37)), StateNo = helper(34000), var(33)) && enemynear(fvar(37)), Time < (helper(34000), var(34) - 3)
trigger18 = (enemynear(fvar(37)), StateNo = helper(34000), var(35)) && enemynear(fvar(37)), Time < (helper(34000), var(36) - 3)
trigger19 = (enemynear(fvar(37)), StateNo = helper(34000), var(37)) && enemynear(fvar(37)), Time < (helper(34000), var(38) - 3)
trigger20 = (enemynear(fvar(37)), StateNo = helper(34000), var(39)) && enemynear(fvar(37)), Time < (helper(34000), var(40) - 3)
trigger21 = (enemynear(fvar(37)), StateNo = helper(34000), var(41)) && enemynear(fvar(37)), Time < (helper(34000), var(42) - 3)
trigger22 = (enemynear(fvar(37)), StateNo = helper(34000), var(43)) && enemynear(fvar(37)), Time < (helper(34000), var(44) - 3)
trigger23 = (enemynear(fvar(37)), StateNo = helper(34000), var(45)) && enemynear(fvar(37)), Time < (helper(34000), var(46) - 3)
trigger24 = (enemynear(fvar(37)), StateNo = helper(34000), var(47)) && enemynear(fvar(37)), Time < (helper(34000), var(48) - 4)
trigger25 = (enemynear(fvar(37)), StateNo = helper(34000), var(49)) && enemynear(fvar(37)), Time < (helper(34000), var(50) - 5)
trigger26 = (enemynear(fvar(37)), StateNo = helper(34000), var(51)) && enemynear(fvar(37)), Time < (helper(34000), var(52) - 5)
trigger27 = (enemynear(fvar(37)), StateNo = helper(34000), var(53)) && enemynear(fvar(37)), Time < (helper(34000), var(54) - 5)
trigger28 = (enemynear(fvar(37)), StateNo = helper(34000), var(55)) && enemynear(fvar(37)), Time < (helper(34000), var(56) - 5)

[State -3, Crouching Light Kick]
type = ChangeState
value = 410
triggerall = var(59)
TriggerAll = StateType != A
TriggerAll = RoundState = 2
triggerall = P2StateType != L
triggerall = P2StateType != A
triggerall = P2BodyDist X = [-10,15+floor(5*(EnemyNear(floor(fvar(37))),vel X))]
triggerall = P2BodyDist Y >= 0
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99 || stateno = 100
TriggerAll = EnemyNear(floor(fvar(37))),AnimTime <= -5 
Triggerall = (PrevStateNo=[5000,5270]) || (PrevStateNo=[120,159]) || prevstateno = 700 || prevstateno = 52000
triggerall = EnemyNear(floor(fvar(37))),ctrl = 0
Trigger1 = Random<= var(59)*100

[State -3, Crouching Light Kick]
type = ChangeState
value = 410
TriggerAll = var(59)
triggerall = roundstate = 2
TriggerAll = StateType != A
TriggerAll = P2StateType = L
triggerall = ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99 || stateno = 100
Triggerall = P2BodyDist X = [-5,15+floor(5*(EnemyNear(floor(fvar(37))),vel X))]
Triggerall = Facing = EnemyNear(floor(fvar(37))),Facing
Triggerall = EnemyNear(floor(fvar(37))),AnimTime = [-3,-1]
Trigger1 = P2StateNo = 5120
Trigger1 = Random <= var(59)*100

[State -3,2b]
Type = ChangeState
Value = 400
TriggerAll = var(59)
TriggerAll = EnemyNear(fvar(37)),facing = facing
TriggerAll = StateType != A
TriggerAll = EnemyNear(fvar(37)),MoveType = A || Enemy,NumProj && EnemyNear(fvar(37)),StateNo < 2000
TriggerAll = EnemyNear(fvar(37)),StateType != A
TriggerAll =!EnemyNear(fvar(37)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(fvar(37)),AnimTime <= -7
TriggerAll =!InGuardDist
TriggerAll = P2BodyDist X = [-5,25]
Trigger1 = Ctrl || stateno = 20|| stateno = 21|| stateno = 22|| stateno = 99 || stateno = 312

;ダッシュ(隙突き)
[State -3, Dash]
type = ChangeState
value = 100
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2  
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = statetype != A
triggerall = P2Dist X > 0
triggerall =!InGuardDist
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [120,149]) 
trigger1 = p2bodydist x > 120 || enemynear(var(58)),facing = facing
trigger1 = enemynear(var(58)),statetype = A
trigger1 = enemynear(var(58)),MoveType = A
trigger1 =!enemynear(var(58)),HitDefAttr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
trigger1 = enemynear(var(58)),Time >= 60
trigger2 = enemynear(var(58)),MoveType != H
trigger2 = enemynear(var(58)),StateType = A
trigger2 =!enemynear(var(58)),Ctrl
trigger2 = enemynear(var(58)),facing = facing
Trigger3 = EnemyNear(var(58)),MoveType != H
Trigger3 = EnemyNear(var(58)),StateType != A
Trigger3 =!EnemyNear(var(58)),Ctrl
Trigger3 = EnemyNear(var(58)),facing = facing
Trigger3 = EnemyNear(var(58)),HitDefAttr = SC, NA, SA, HA

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;切り返し
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;前転
[State -3, FRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = enemynear(var(58)),time >= 50-var(56)*5 || (!time && var(56) > 7) || life <= var(57)*var(56)*8 || Random <= var(57)*var(56) || var(56) >= 10
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),StateNo >= 200
triggerall =!enemynear(var(58)),HitDefAttr = SCA, AT
triggerall = enemynear(var(58)),facing != facing
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-10,150]
trigger1 = enemynear(var(58)),animtime <= -30

[State -3,回り込み、前 超反応専用]
Type  = ChangeState
Value  = 700
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SC, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime <= -29
TriggerAll = InGuardDist
TriggerAll = Ctrl || (StateNo = [100,101]) || (StateNo = [120,149])  
Trigger1 = Enemy,Numproj
Trigger1 = P2BodyDist X = [30,110]
Trigger2 = P2BodyDist X = [30,70]

;後転
[State -3]
Type = ChangeState
Value = 710
TriggerAll = var(59) = 1
TriggerAll = BackEdgeBodyDist >= 20
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SCA, NT, ST, HT
TriggerAll = EnemyNear(var(58)),StateNo < 1000
TriggerAll = EnemyNear(var(58)),MoveType = A || EnemyNear(var(58)),Ctrl
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!Enemy,NumProj
TriggerAll = Ctrl || (StateNo = [120,149])  
Trigger1 = P2BodyDist X = [20,140]
Trigger1 = Random < 50

[State -3,回り込み、前 切り返し]
Type  = ChangeState
Value  = 700
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),Vel X >= 0
TriggerAll = EnemyNear(var(58)),StateNo >= 200
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SC, NT, ST, HT
TriggerAll = EnemyNear(var(58)),AnimTime <= -29
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(56) > 9
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!EnemyNear(var(58)),Ctrl
TriggerAll = InGuardDist
TriggerAll = Ctrl || (StateNo = [100,101]) || (StateNo = [120,149])  
Trigger1 = P2BodyDist X = [30,70]
Trigger2 = P2BodyDist X = [30,110]
Trigger2 = Enemy,Numproj

[State -3,回り込み、後 切り返し]
Type = ChangeState
Value = 710
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = Random <= var(57) * 100 || var(56) > 9
TriggerAll = StateType != A
TriggerAll = BackEdgeBodyDist >= 40
TriggerAll =!Enemy,Numproj
TriggerAll = EnemyNear(var(58)),MoveType = A && EnemyNear(var(58)),StateNo >= 200
TriggerAll = EnemyNear(var(58)),StateType != A
TriggerAll =!EnemyNear(var(58)),HitDefAttr = SC, NT, ST, HT
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(56) > 9
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll = InGuardDist
TriggerAll = Ctrl || (stateno = [120,149])  || var(56) > 8 && (StateNo = [100,101])
Trigger1 =(P2BodyDist X = [-5,50]) &&  EnemyNear(var(58)),AnimTime > -3
Trigger2 =(P2BodyDist X = [30,70]) &&  EnemyNear(var(58)),AnimTime > -29

[State -3,バックステップ 投げ外し]
Type = ChangeState
Value = 105
TriggerAll = var(59) = 1
TriggerAll = Random <= var(57) * 80 || var(56) > 9
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = BackEdgeBodyDist >= 30
TriggerAll = EnemyNear(var(58)),Time >= 40-var(56)*5 || var(56) > 9
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll = Ctrl || (stateno = [120,149]) 
Trigger1 = P2BodyDist X = [-5,60]
Trigger1 = EnemyNear(var(58)),Vel Y >= 0
Trigger1 = EnemyNear(var(58)),HitDefAttr = SCA,NT,ST,HT



[State -3, 中ジャンプ(対投げ用)]
type = ChangeState
value = 34
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2  
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 250
triggerall = StateType != A
triggerall =!Enemy,NumProj
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [100,101]) || stateno = 1120 || stateno = 1160 || (stateno = [120,149]) 
trigger1 = p2bodydist x = [-20,100]
trigger1 = enemynear(var(58)),statetype != A
trigger1 = enemynear(var(58)),HitDefAttr = SC, NT, ST, HT

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;防御(ガード等)
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;ガード

[State -3]
Type = ChangeState
Value = 120
TriggerAll = RoundState = 2
TriggerAll = NumHelPer(35000) > 0
TriggerAll = NumHelPer(35001) > 0
TriggerAll = var(59)
TriggerAll = Ctrl && StateType = A && StateNo != 5120
TriggerAll = P2StateNo != HelPer(35000),Var(6)
TriggerAll = P2StateNo != HelPer(35001),Var(6)
TriggerAll = HelPer(35000),Var(2) = 0
TriggerAll = HelPer(35000),InGuardDist || HelPer(35001),InGuardDist
TriggerAll = IfElse(Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0,(Abs(P2Dist X) <= 60),1)
Trigger1 = InGuardDist || (Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0 && P2MoveType = A)
Trigger1 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger2 = (InGuardDist && HelPer(35002),InGuardDist) || Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0
Trigger2 = Enemy(0),NumProj > 0 || Enemy(1),NumProj > 0
Trigger3 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger3 = P2BodyDist X < 0
Trigger4 = EnemyNear(floor(fvar(37))),Vel X > 0
Trigger4 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger5 = HelPer(35002),Var(9) > 1
Trigger5 = InGuardDist
Trigger6 = InGuardDist
Trigger6 = HelPer(35000),Var(53)

[State -3]
Type = ChangeState
Value = 120
TriggerAll = RoundState = 2
TriggerAll = NumHelPer(35000) > 0
TriggerAll = NumHelPer(35001) > 0
TriggerAll = var(59)
TriggerAll = StateType != A
TriggerAll = Ctrl || stateno = 0|| stateno = 19 || stateno = 20 || stateno = 21 || (stateno = 52 && Time >= 3)|| stateno = 22 || stateno = 99 || stateno = 100
TriggerAll = Helper(35000),Var(2) = 0
TriggerAll = IfElse(Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0,(Abs(P2Dist X) <= 60),1)
Trigger1 = InGuardDist || (Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0 && P2MoveType = A)
Trigger1 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger2 = InGuardDist || Facing*(EnemyNear(floor(fvar(37))),Facing)*P2Dist X >0
Trigger2 = Enemy(0),NumProj > 0 || Enemy(1),NumProj > 0
Trigger3 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger3 = P2BodyDist X < 0
Trigger4 = EnemyNear(floor(fvar(37))),Vel X > 0
Trigger4 = EnemyNear(floor(fvar(37))),HitDefAttr = SC,NA,SA,HA,NP,SP,HP || EnemyNear(floor(fvar(37))),HitDefAttr = A,NA,SA,HA,NP,SP,HP
Trigger5 = HelPer(35002),Var(9) > 1
Trigger5 = InGuardDist
Trigger6 = InGuardDist
Trigger6 = HelPer(35000),Var(53)

;ダウン回避(空中)
[State -3, HITFall_AIRRECOVER]
type = ChangeState
value = 5210
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= ((20 + (var(57) * 10)) * var(56))
triggerall = Random <= 800
triggerall = StateNo = 5050
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Vel Y > 0
trigger1 = Pos Y < -20 && Pos Y > -80
trigger1 = p2bodydist x = [-60,60]
trigger1 = P2Bodydist Y = [-40,40]
trigger1 = enemynear(var(58)),MoveType = A
trigger1 = enemynear(var(58)),Time < 15

;受身
[State -3, UKEMI]
type = ChangeState
value = 5200
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = Random <= 1000
triggerall = alive = 1
trigger1 = StateNo = 5050 || StateNo = 5071
trigger1 = anim != 5052 && anim != 5062
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -30

;ガードキャンセル前転
[State -3, GCFRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = RoundState = 2
triggerall = power >= 1000 && var(23) = 0 || var(23) > 0
triggerall = Random <= var(57) * 125
triggerall = StateType != A
triggerall = (stateno = 150 || stateno = 152) && HitShakeOver
trigger1 = p2bodydist x = [0,50]
trigger1 = enemynear(var(58)),StateNo >= 200
trigger1 = enemynear(var(58)),statetype != A
trigger1 = enemynear(var(58)),MoveType = A
trigger1 = enemynear(var(58)),AnimTime <= -30



;---------------------------------------------------------------------------
;位置取り
;---------------------------------------------------------------------------
;ダッシュ 起き攻め位置取り
[State -3, Dash]
Type = ChangeState
Value = 100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = Random <= var(57) * 125
triggerall = RoundState = 2
triggerall = StateType != A
triggerall =!inguarddist
triggerall =!enemy,numproj
triggerall = p2bodydist x >= 90
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [120,149]) 
trigger1 = enemynear(var(58)),StateType = A
trigger1 = enemynear(var(58)),StateNo = [5000,5100]
trigger2 = enemynear(var(58)),StateType = L

;ダッシュ
[State -3]
Type = ChangeState
Value = 100
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType != A || EnemyNear(var(58)),facing = facing
TriggerAll =!InGuardDist
TriggerAll = Ctrl || (StateNo = [120,149]) 
Trigger1 = P2BodyDist X > 140
Trigger1 = EnemyNear(var(58)),StateType != A
Trigger1 = EnemyNear(var(58)),MoveType = I
Trigger2 = P2BodyDist X > 100
Trigger2 = EnemyNear(var(58)),StateType = L
Trigger3 = P2BodyDist X > 140 || EnemyNear(var(58)),facing = facing
Trigger3 = EnemyNear(var(58)),StateType = A
Trigger3 = EnemyNear(var(58)),MoveType = A && EnemyNear(var(58)),StateNo >= 200
Trigger3 =!EnemyNear(var(58)),HitDefAttr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
Trigger4 = EnemyNear(var(58)),MoveType != H
Trigger4 = EnemyNear(var(58)),StateType = A
Trigger4 =!EnemyNear(var(58)),Ctrl
Trigger4 = EnemyNear(var(58)),facing = facing

;歩き(起き攻め位置取り)
[State -3, Walk]
type = ChangeState
value = 22
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = stateno != 22
triggerall = ctrl || (stateno = [20,22]) || stateno = 52
trigger1 = enemynear(var(58)),StateType = L

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;移動
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;ダッシュ
[State -3, RUN]
type = ChangeState
value = 100
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = Random <= var(57) * 125
triggerall = RoundState = 2
triggerall = statetype != A
triggerall = !inguarddist
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [120,149]) 
trigger1 = p2bodydist x >= 240
trigger1 = Random <= 400
trigger2 = p2bodydist x = [120,240]
trigger2 = Random <= 200
trigger3 = p2bodydist x = [60,120]
trigger3 = Random <= 100
trigger4 = p2bodydist x = [30,60]
trigger4 = Random <= 100
trigger5 = p2bodydist x <= -20

;歩き
[State -3, Walk]
type = ChangeState
value = 21
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = StateType != A
triggerall = enemynear(var(58)),StateType != A
triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),StateNo != [5120,5299]
triggerall = stateno != 21
triggerall = ctrl || (stateno = [20,22]) || stateno = 52
trigger1 = p2bodydist x <= 140
trigger1 =!InGuardDist || enemynear(var(58)),facing = facing
trigger2 = p2bodydist x > 180

[State -3, 垂直小ジャンプ]
Type = ChangeState
value = 39
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = Random <= 250
triggerall = StateType != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),StateNo != [5000,5120]
triggerall = enemynear(var(58)),stateno != [5710,5715]
triggerall = !enemy,numproj
triggerall = ctrl || (stateno = [20,22]) || stateno = 52
trigger1 = p2bodydist x = [-5,35]

[State -3, 前ジャンプ]
Type = ChangeState
value = 30
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = Random <= 100
triggerall = StateType != A
triggerall = !inguarddist
triggerall =!Enemy,NumProj
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),StateNo!=[5000,5120]
triggerall = enemynear(var(58)),StateType != L
triggerall = ctrl || (stateno = [20,22]) || stateno = 52
trigger1 = p2bodydist x = [130,160]

[State -3,小ジャンプ タッグ]
Type = ChangeState
Value = 32
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
;triggerall = random <= (100 + (var(57) * 100))
TriggerAll = Random <= 600 || var(57) > 9
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
TriggerAll = P2BodyDist X = [30,80]
Trigger1 = var(52) = 3
Trigger1 = EnemyNear(var(58)),facing = facing

[State -3,中ジャンプ タッグ]
Type = ChangeState
Value = 34
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = random <= (100 + (var(57) * 100))
TriggerAll = Random <= 600 || var(57) > 9
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
TriggerAll = P2BodyDist X = [80,120]
Trigger1 = var(52) = [3,4]
Trigger1 = EnemyNear(var(58)),facing = facing

[State -3,大ジャンプ タッグ]
Type = ChangeState
Value = 36
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = random <= (100 + (var(57) * 100))
TriggerAll = Random <= 600 || var(57) > 9
TriggerAll = StateType != A
TriggerAll = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
TriggerAll = P2BodyDist X = [120,180]
Trigger1 = var(52) = [3,4]
Trigger1 = EnemyNear(var(58)),facing = facing

[State -3,ダッシュ タッグ]
Type = ChangeState
Value = 100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 && enemynear(var(58)),life > 0 && fvar(22) = 0
triggerall = random <= (100 + (var(57) * 100))
TriggerAll = Random <= 600 || var(57) > 9
TriggerAll = StateType != A
TriggerAll =!Enemy,NumProj
TriggerAll = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
TriggerAll = P2BodyDist X > 140
Trigger1 = var(52) = [2,4]
Trigger1 = EnemyNear(var(58)),facing = facing

;ジャンプ(めくり狙い)
[State -3, Jump]
type = ChangeState
value = 30
triggerall = Var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = ctrl || (stateno = [20,22])
trigger1 = p2bodydist X = [5,25]
trigger1 = enemynear(var(58)),statetype != A
trigger1 = enemynear(var(58)),movetype = I
trigger1 = frontedgebodydist > 60
trigger1 = Random <= 200

[State -3, 垂直小ジャンプ]
Type = ChangeState
value = 39
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= 1000/var(57)
triggerall = StateType != A
triggerall = ctrl || (stateno = [20,22])
triggerall = enemynear(var(58)),movetype != H
triggerall = !enemy,numproj 
triggerall = enemynear(var(58)),StateNo!=[5000,5120]
triggerall = enemynear(var(58)),StateType != L
triggerall = ctrl || (stateno = [20,22])
triggerall = P2BodyDist X = [0,35]
trigger1 = enemynear(var(58)),statetype != A
trigger1 = Random <= 200

[State -3, 前ジャンプ]
Type = ChangeState
value = 30
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= 1000/var(57)
triggerall = StateType != A
triggerall = !inguarddist
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),StateNo!=[5000,5120]
triggerall = enemynear(var(58)),StateType != L
triggerall = ctrl || (stateno = [20,22])
trigger1 = P2BodyDist X = [130,160]
trigger1 = Random <= 50

[State -3, 前小ジャンプ]
Type = ChangeState
value = 32
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= 1000/var(57)
triggerall = StateType != A
triggerall = enemynear(var(58)),movetype != H
triggerall = !enemy,numproj 
triggerall = enemynear(var(58)),StateNo!=[5000,5120]
triggerall = enemynear(var(58)),StateType != L
triggerall = ctrl || (stateno = [20,22])
trigger1 = P2BodyDist X = [-5,60]
trigger1 = enemynear(var(58)),statetype != A
trigger1 = Random <= 200

[State -3,前中ジャンプ]
Type = ChangeState
value = 34
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= 1000/var(57)
triggerall = StateType != A
triggerall = enemynear(var(58)),movetype != H
triggerall = !enemy,numproj 
triggerall = !inguarddist
triggerall = enemynear(var(58)),StateNo!=[5000,5120]
triggerall = enemynear(var(58)),StateType != L
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [40,120]
trigger1 = enemynear(var(58)),statetype != A
trigger1 = Random <= 250

[State -3, 前大ジャンプ]
Type = ChangeState
value = 36
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = enemynear(var(58)),StateNo!=[5000,5120]
triggerall = enemynear(var(58)),StateType != L
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = !inguarddist
trigger1 = enemynear(var(58)),movetype != H
trigger1 = P2BodyDist X = [120,225]
trigger1 = Random <= 1000/var(57)
trigger1 = Random <= 250

[State -3, 後ジャンプ]
Type = ChangeState
value = 31
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = ctrl || (stateno = [20,22])
triggerall = !inguarddist
triggerall = enemynear(var(58)),movetype != H
triggerall = (enemynear(var(58)),MoveType != A && enemynear(var(58)),statetype != A)
triggerall = P2BodyDist X = [60,120]
trigger1 = Random <= floor(Var(57)/2)

[State -3,後大ジャンプ]
Type = ChangeState
value = 37
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = !inguarddist
triggerall = enemynear(var(58)),movetype != H
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [60,90]
trigger1 = Random <= floor(Var(57)/2)

;バックステップ
[State -3, Back Step]
type = ChangeState
value = 105
triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = BackEdgeBodyDist > 60
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [80,140]
trigger1 = enemynear(var(58)),movetype = I
trigger1 = enemynear(var(58)),statetype != A
trigger1 = EnemyNear(var(58)),facing != facing
trigger1 =!Enemy,NumProj
trigger1 = Random <= 50

;歩き
[State -3, Walk]
type = ChangeState
value = 21
triggerall = var(59) >= 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = StateType != A
triggerall = enemynear(var(58)),StateNo != [5120,5299]
triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),StateType != A
triggerall = stateno != 21
triggerall = ctrl || (stateno = [20,22])
trigger1 = P2BodyDist X <= 140
trigger1 =!InGuardDist || enemynear(var(58)),facing = facing
trigger2 = P2BodyDist X > 180

[State -3, 後ジャンプ]
Type = ChangeState
value = 31
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = Random <= 100
triggerall = StateType != A
triggerall = !inguarddist
triggerall = enemynear(var(58)),movetype != H
triggerall = (enemynear(var(58)),MoveType != A && enemynear(var(58)),statetype != A)
triggerall = ctrl || (stateno = [20,22]) || stateno = 52
trigger1 = p2bodydist x = [60,120]

[State -3, 後大ジャンプ]
Type = ChangeState
value = 37
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2
triggerall = Random <= var(57) * 125
triggerall = Random <= 100
triggerall = StateType != A
triggerall = !inguarddist
triggerall = enemynear(var(58)),movetype != H
triggerall = ctrl || (stateno = [20,22]) || stateno = 52 || (stateno = [100,101]) || (stateno = [120,149]) 
trigger1 = p2bodydist x = [60,90]

;バックステップ
[State -3]
Type = ChangeState
Value = 105
TriggerAll = var(59) = 1
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = BackEdgeBodyDist >= 40
TriggerAll = Ctrl || (StateNo = [120,149]) 
Trigger1 = P2BodyDist X < 80 || FrontEdgeBodyDist < 80
Trigger1 = EnemyNear(var(58)),StateNo = [5200,5299]
trigger1 =!Enemy,NumProj

;バックステップ
[State -3]
Type = ChangeState
Value = 105
TriggerAll = var(59) = 1
TriggerAll = Random <= var(57) * 75 || var(56) > 9
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = EnemyNear(var(58)),MoveType = I
TriggerAll = EnemyNear(var(58)),facing != facing
TriggerAll =!Enemy,NumProj
TriggerAll = Ctrl || (stateno = [120,149]) 
Trigger1 = P2BodyDist X = [100,140]
Trigger1 = Random < 30



[State -3, FRoll]
type = ChangeState
value = 700
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = Random <= ((20 + (var(57) * 10)) * var(56))
triggerall = statetype != A
triggerall = enemynear(var(58)),MoveType != H
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2bodydist X >= 125
trigger1 = (Enemy,NumHelper > 0&&Enemy,NumHelper > Helper(32000),var(1))||Enemy,Numproj != 0
;trigger1 = Random <= 600
trigger2 = (enemynear(var(58)),AnimTime <= -35 && !enemynear(var(58)),Ctrl)
trigger2 = (Enemy,NumHelper > 0&&Enemy,NumHelper > Helper(32000),var(1))||Enemy,Numproj != 0
;trigger2 = Random <= 600


[State -3,バックステップ、後転 砲台占位]
Type =null; ChangeState
Value = ifelse(var(51) = 5,710,700)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (20 + (var(57) * 100))
TriggerAll = Random <= 100 || var(57) > 9
TriggerAll = StateType != A
TriggerAll = BackEdgeBodyDist >= 40
TriggerAll = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
Trigger1 = EnemyNear(var(58)),MoveType != H
Trigger1 =(100*life/lifeMax) <= 33
Trigger1 = Life*2 < Partner,Life
Trigger1 = Random <= (LifeMax - Life)
Trigger1 = BackEdgeBodyDist >= 40
Trigger2 = P2BodyDist X <= 60
Trigger2 = EnemyNear(var(58)),StateNo >= 1000 

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 210
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [-5,35]
trigger2 = stateno = 200 && movehit || P2BodyDist X = [-5,15]

;近距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = 210
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 0
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [-5,25]
trigger2 = stateno = 200 && movehit || P2BodyDist X = [-5,15] 

;しゃがみ弱パンチ
[State -3, Crouching Light Kick]
type  = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H || enemynear(var(58)),stateno = [120,159]
triggerall = enemynear(var(58)),movetype != A
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = P2BodyDist X = [-5,25]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = random <= 250
trigger1 = ifelse(enemynear(var(58)),statetype = S,1,random <= 500)

[State -3, Crouching Light Punch]
type  = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 0
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
Triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = p2bodydist X = [5,25]

[State -3, Crouching Light Punch]
type  = ChangeState
value = 400
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
Triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = p2bodydist X = [10,40]

[State -3,]
type  = ChangeState
value = 1290
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
Triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = p2bodydist X = [10,25]

;遠距離立ち弱パンチ
[State -3, Stand Light Punch]
type = ChangeState
value = 200
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = p2bodydist X = [10,24]

;遠距離立ち強パンチ
[State -3, Stand Strong Punch]
type = ChangeState
value = ifelse(random<=500, ifelse(random<=500,260,220),300)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (50 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype = L && time >= 5
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [16,26]



;立ち強キック
[State -3, Standing Strong Kick]
type = ChangeState
value = 250
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (20 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall =!InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = P2BodyDist X = [45,60]


;ジャンプ弱パンチ
[State -3, Jump Light Punch]
type = ChangeState
value = 600
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl
trigger1 = P2BodyDist X = [-10,30]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-40,40]
trigger1 = enemynear(var(58)),StateType = A
trigger1 = enemynear(var(58)),MoveType != H

;ジャンプ強パンチ
[State -3, Jump Strong Punch]
type = ChangeState
value = 610
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl
trigger1 = Vel Y > 0
trigger1 = ifelse((enemynear(var(58)),BackEdgeBodyDist <= 10),(p2bodydist X = [-30,40]),(p2bodydist X = [0,40]))
trigger1 = enemynear(var(58)),statetype != A ;空対地
trigger2 = Vel X >= 0
trigger2 = P2BodyDist X = [-10,40]
trigger2 = enemynear(var(58)),Pos Y - Pos Y = [-30,40]
trigger2 = enemynear(var(58)),StateType = A;空対空
trigger2 = enemynear(var(58)),MoveType != H

;空中強キック
[State -3, Jump Strong Kick]
type = ChangeState
value = 640
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = ctrl
trigger1 = P2BodyDist X = [-10,49+floor(10*(EnemyNear(Var(58)),vel X)+floor(10*vel X))]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-80,20]
trigger1 = enemynear(var(58)),StateType = A
trigger2 = vel X = 0
trigger2 = Vel Y > 0
trigger2 = P2BodyDist X = [-10,49+floor(10*(EnemyNear(Var(58)),vel X)+floor(10*vel X))]
trigger2 = enemynear(var(58)),statetype != A

;ジャンプ弱キック
[State -3, Jump Light Kick]
type = ChangeState
value = 630
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 600
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),stateno != [5020,5040]
triggerall = ctrl
trigger1 = P2BodyDist X = [-10,56+floor(10*(EnemyNear(Var(58)),vel X)+floor(10*vel X))]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-80,20]
trigger1 = enemynear(var(58)),StateType = A

;しゃがみ強パンチ
[State -3, Crouching Strong Punch]
type = ChangeState
value = 410
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),StateType = A
Triggerall = enemynear(var(58)),StateType != L
triggerall = enemynear(var(58)),facing != facing
triggerall =!InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = p2bodydist x = [10+floor(8*(enemynear(var(58)),vel x)),50+floor(8*(enemynear(var(58)),vel x))]
trigger1 = p2bodydist y = [-50-floor(8*(enemynear(var(58)),vel y)+(8*(8+1)/2)*fvar(20)),0-floor(8*(enemynear(var(58)),vel y)+(8*(8+1)/2)*fvar(20))]


;しゃがみ弱キック
[State -3, Crouching Light Kick]
type  = ChangeState
value = 430
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H || enemynear(var(58)),stateno = [120,159]
triggerall = enemynear(var(58)),movetype != A
triggerall =!InGuardDist || enemynear(var(58)),facing = facing
triggerall = P2BodyDist X = [-5,20]
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = random <= 250
trigger1 = ifelse(enemynear(var(58)),statetype = S,1,random <= 500)


;ガードキャンセルふっとばし攻撃`
[State -3,GCA]
type = ChangeState
value = 350
Triggerall = var(59)
triggerall = var(57) >= 1
triggerall = RoundState = 2
Triggerall = Power >= 1000
triggerall = random <= (100 + (var(57) * 100))
Triggerall = Random <= 200
Triggerall = StateType != A
triggerall = stateno = 150 || stateno = 151
Trigger1 = P2BodyDist X = [0,50]
Trigger1 = enemynear(var(58)),StateNo >= 200
Trigger1 = enemynear(var(58)),statetype != A
Trigger1 = enemynear(var(58)),MoveType = A
Trigger1 = enemynear(var(58)),AnimTime <= -6


;空中ふっとばし
[State -1, CD]
type = ChangeState
value = 650
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype = A
TriggerAll = EnemyNear(var(58)),MoveType = H
TriggerAll = EnemyNear(var(58)),StateType = A
TriggerAll = EnemyNear(var(58)),StateNo != [120,159]
TriggerAll = EnemyNear(var(58)),StateNo != [5100,5299]
triggerall = ctrl
trigger1 = p2bodydist X = [-10,80]
trigger1 = enemynear(var(58)),Pos Y - Pos Y = [-40,40]

[State -3, S1 ]
type = ChangeState
value = ifelse(random<=500,903,1000)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = power >= 2000
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 700
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,22]
triggerall = movecontact
trigger1 = stateno = 210 
trigger2 = stateno = 240 

[State -3, S1 ]
type = ChangeState
value = ifelse(random<=500,261,1000)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 300
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,22]
triggerall = movecontact
trigger1 = stateno = 210 
trigger2 = stateno = 240 


[State -3, S2 ]
type = ChangeState
value = ifelse(random<=500,1000,1010)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 300
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,28]
triggerall = movehit
trigger1 = stateno = 210 
trigger2 = stateno = 240 

[State -3, S2 ]
type = ChangeState
value = ifelse(random<=500,903,1290)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = power >= 2000
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 700
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,28]
triggerall = movehit
trigger1 = stateno = 210 
trigger2 = stateno = 240 



[State -1, S3 ]
type = ChangeState
value = 1400
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),HitDefAttr = SA,NA,SA,HA
triggerall = enemynear(var(58)),facing != facing
triggerall = !enemy,NumProj
triggerall = p2bodydist x < 62
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (stateno = [200,599])



[State -1, S4 ]
type = ChangeState
value = 1110
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),HitDefAttr = SA,NA,SA,HA
triggerall = enemynear(var(58)),facing != facing
triggerall = !enemy,NumProj
triggerall = p2bodydist x < 50
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (stateno = [200,599]) 




[State -3, S5 ]
type = ChangeState
value = ifelse(random<=500,1290,1450)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = movehit
trigger1 = stateno = 210 
trigger2 = stateno = 240



[State -3, S6 ]
type = ChangeState
value = ifelse(random<=500,1260,210)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,25]
triggerall = movehit
trigger1 = stateno = 400 
trigger2 = stateno = 235 
trigger3 = stateno = 200 

[State -3, S6 ]
type = ChangeState
value = 3130
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
triggerall = p2life <= 50
triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = enemynear(var(58)),statetype = A
triggerall = P2BodyDist X = [-5,75]
trigger1 = stateno = 1262 


[State -3, S6 ]
type = ChangeState
value = 1260
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,75]
triggerall = movehit
trigger1 = stateno = 400 
trigger2 = stateno = 235 
trigger3 = stateno = 200 
trigger4 = stateno = 261
 
[State -3, H1 ]
type = ChangeState
value = 261
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = random <= 1000
triggerall = RoundState = 2 
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
trigger1 = stateno = 210 && moveguarded
trigger2 = stateno = 220 && moveguarded
trigger3 = stateno = 410 && moveguarded
trigger4 = stateno = 400 && moveguarded


[State -3, S7 ]
type = ChangeState
value = 1230
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (10 + (var(57) * 50))
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != A || random <= (200 + (var(57) * 100))
triggerall = P2BodyDist X = [15,50]
triggerall = pos X <= -70
trigger1 = ctrl || (stateno = [0,100]) 


[State -3, S8 ]
type = ChangeState
value = 1235
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
triggerall = random <= (10 + (var(57) * 50))
triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != A
triggerall = P2BodyDist X = [45,110]
triggerall = pos X <= -70
trigger1 = ctrl || (stateno = [0,100]) 

[State -3, S9 ]
type = null;ChangeState
value = 1010
triggerall = var(59) = 1
triggerall = var(57) >= 1
;triggerall = random <= (100 + (var(57) * 100))
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = P2BodyDist X = [25,90]
triggerall = P2BodyDist Y <= -55
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (stateno = [200,599])  || p2stateno != [5000,5120]
trigger2 = stateno = 1110 && movehit && time = 44


[State -3, S10 ]
type = ChangeState
value = ifelse(random<=500,1050,1060)
triggerall = var(59)
triggerall = var(57) = [1,4]
triggerall = random <= 1000/var(57)
triggerall = random <= 500
triggerall = RoundState = 2 
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype != H
triggerall = enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger1 = p2bodydist X = [-5,50]
trigger1 = random <= 200

[State -3, S10 ]
type = ChangeState
value = ifelse(random<=500,1050,1060)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = Random <= 400
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing != facing
triggerall = InGuardDist
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
trigger1 = p2bodydist X = [-5,35]



[State -3, H1 ]
type = null;ChangeState
value = 3050
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 2000 || power >= 1000 && p2life <= 200
;triggerall = random <= (100 + (var(57) * 100))
triggerall = RoundState = 2 
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = P2BodyDist X = [25,90]
triggerall = P2BodyDist Y <= -55
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (stateno = [200,599])  || p2stateno != [5000,5120]
trigger2 = stateno = 1110 && movehit && time = 44


[State -3, H1 ]
type = ChangeState
value = 3050
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 2000 || power >= 1000 && p2life <= 200
;triggerall = random <= (100 + (var(57) * 100))
triggerall = RoundState = 2 
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype = A
triggerall = P2BodyDist X >= 10
trigger1 = stateno = 1060 && movehit && time = 10



[State -3, H1 ]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 2000 || power >= 1000 && p2life <= 200
;triggerall = random <= (100 + (var(57) * 100))
triggerall = RoundState = 2 
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = P2BodyDist X >= 10
trigger1 = stateno = 1060 && movehit && time = 10



[State -3, H1 ]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && p2life <= 100
;triggerall = random <= (100 + (var(57) * 100))
triggerall = RoundState = 2 
triggerall = statetype != A
trigger1 = stateno = 1400 && movehit && time = 16




[State -3, H1 ]
type = ChangeState
value = 3100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 2000 || power >= 1000 && p2life <= 300
;triggerall = random <= (100 + (var(57) * 100))
triggerall = RoundState = 2 
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
trigger1 = stateno = 1291 && movehit 


[State -3, H2 ]
type = ChangeState
value = ifelse(random<=500,3300,3600)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = power >= 2000 && p2life <= 300
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,35]
triggerall = movehit
trigger1 = stateno = 400 
trigger2 = stateno = 235 
trigger3 = stateno = 200 
trigger4 = stateno = 1260
trigger5 = stateno = 3110 && time = 102


[State -1, H2 ]
type = ChangeState
value = 3300
triggerall = var(59) = 1
triggerall = var(57) >= 3
triggerall = power >= 2000 && life <= 700 
triggerall = RoundState = 2 
triggerall = Random <= ((var(57) * 12.5) * var(56))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),movetype = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing != facing
triggerall = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
trigger1 = p2bodydist x = [-5,35]


[State -3, H3 ]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && p2life <= 250
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = BackEdgeBodyDist <= 45
triggerall = movehit
trigger1 = stateno = 400 
trigger2 = stateno = 235 
trigger3 = stateno = 200 




[State -3, H3 ]
type = ChangeState
value = 3000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && p2life <= 250
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = movehit
trigger1 = stateno = 210 
trigger2 = stateno = 240



[State -3, H4 ]
type = ChangeState
value = 3100
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = RoundState = 2 
triggerall = power >=  2000 && life <= 600
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
trigger1 = random <= (70 + (var(57) * 50))
triggerall = random <= 500
trigger1 = enemynear(var(58)),MoveType = A
trigger1 = enemynear(var(58)),StateNo >= 200
trigger1 = enemynear(var(58)),facing != facing
trigger1 = InGuardDist
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149]) || (var(1) = [1,2]) && !movecontact && movetype != H
trigger1 = p2bodydist X = [-5,32]
trigger2 = stateno = 1291 && movehit 
trigger2 = random <= (200 + (var(57) * 100))
trigger3 = stateno = 1260 && movehit 
trigger3 = random <= (200 + (var(57) * 100))


[State -3, H5 ]
type = ChangeState
value = 3200
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 1000 && life <= 70
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = p2bodydist x >= 190
trigger1 = stateno = 350 && movehit 
trigger2 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || stateno = 115 || (stateno = [120,149])
trigger2 = enemynear(var(58)),statetype = L



[State -3, H5 ]
type = ChangeState
value = 3600
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 2500 && life <= 250
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = movehit
trigger1 = stateno = 210 
trigger2 = stateno = 240
trigger3 = stateno = 3110 && time = 102


[State -1, H6 ]
type = ChangeState
value = 3500
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = NumHelper(3505) != 1
triggerall = RoundState = 2  
triggerall = power >= 3000 && life <= 350
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),StateNo >= 200
triggerall = enemynear(var(58)),facing != facing
triggerall = !enemy,NumProj
triggerall = p2bodydist x < 72
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (stateno = [200,599])


[State -1, H6 ]
type = ChangeState
value = 1200
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = NumHelper(3505) = 1
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = enemynear(var(58)),statetype != A
trigger1 = p2life <= 150
trigger1 = stateno = 210  &&  movehit
trigger2 = p2life <= 150
trigger2 = stateno = 240  &&  movehit
trigger3 = enemy,NumProj = 1
trigger3 = P2BodyDist X >= 150


[State -3, H7 ]
type = ChangeState
value = 3800
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 3000 && life <= 350
triggerall = RoundState = 2  
;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = enemynear(var(58)),statetype != L
triggerall = P2BodyDist X = [-5,75]
triggerall = movehit
trigger1 = stateno = 400 
trigger2 = stateno = 235 
trigger3 = stateno = 200 
trigger4 = stateno = 261


[State -3, H7 ]
type = ChangeState
value = 3800
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = power >= 3000 && life <= 350
triggerall = RoundState = 2  
;;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = enemynear(var(58)),MoveType = A
triggerall = enemynear(var(58)),statetype != A
triggerall = P2BodyDist X >= 150
triggerall = enemynear(var(58)),facing != facing
triggerall = enemy,NumProj = 0
trigger1 = ctrl || (stateno = [20,22]) || (stateno = [100,101]) || (stateno = [120,149]) || (stateno = [200,599])



[State -3, BC ]
type = ChangeState
value = 903
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) <= 0
triggerall = power >= 2000 
triggerall = RoundState = 2  
;;triggerall = random <= (100 + (var(57) * 100))
triggerall = random <= 500
triggerall = statetype != A
triggerall = P2BodyDist X <= 40
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 210 
trigger2 = stateno = 240
trigger3 = stateno = 220
trigger4 = stateno = 410
trigger5 = stateno = 400
trigger6 = stateno = 261



[State -3, BC ]
type = ChangeState
value = 1260
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 210 
trigger2 = stateno = 240
trigger3 = stateno = 400
trigger4 = stateno = 261
trigger5 = stateno = 220



[State -3, BC ｷﾇｰ豎ﾟ]
type = ChangeState
value = 1290
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200 
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = frontedgebodydist > 70 
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 1260 


[State -3, BC ｷﾇｰ豎ﾟ]
type = ChangeState
value = 1060
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 1290  && time = 35



[State -3, BC ｷﾇｰ豎ﾟ]
type = ChangeState
value = 1290
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 1060  && time = 11


[State -3, BC ｰ豎ﾟ]
type = ChangeState
value = 1000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200
triggerall = RoundState = 2  
triggerall = statetype != A
triggerall = frontedgebodydist <= 70 
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 1260  && time = 11


[State -3, BC ｰ豎ﾟ]
type = ChangeState
value = 1230
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200
triggerall = RoundState = 2  
;triggerall = statetype = A
triggerall = enemynear(var(58)),statetype != A
triggerall = movehit 
trigger1 = stateno = 1000  && time = 33



[State -3, BC ｰ豎ﾟ]
type = ChangeState
value = 1000
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) > 200
triggerall = RoundState = 2  
;triggerall = statetype = A
trigger1 = stateno = 1231  && time = 3




[State -3, BC ｷﾇｰ豎ﾟ]
type = ChangeState
value = ifelse(random<=500,3000,3100)
triggerall = var(59) = 1
triggerall = var(57) >= 1
triggerall = var(23) = [1,200]
triggerall = RoundState = 2  
;triggerall = statetype != A
trigger1 = stateno = 1060  && time = 11 && movehit 
trigger2 = stateno = 1290  && time = 35 && movehit 
trigger3 = stateno = 1231  && time = 3


;---------------------------------------------------------------------------
;AI用p2name
;---------------------------------------------------------------------------
;特殊地上受け身なし
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = 1
fvar(21) = 0

;特殊地上受け身持ち1(高め)
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = enemynear(var(58)),authorname = "ahuron"
trigger1 = enemynear(var(58)),name != "SHIN" || enemynear(var(58)),name != "REI" || enemynear(var(58)),name != "JAGI" || enemynear(var(58)),name != "THOUTHER"
trigger1 = enemynear(var(58)),name != "Shinnosuke Kagami" || enemynear(var(58)),name != "Mukuro"
trigger1 = enemynear(var(58)),name != "Misuzu"
trigger2 = enemynear(var(58)),authorname = "jin"
trigger3 = enemynear(var(58)),authorname = "Chin-ya"
trigger4 = enemynear(var(58)),authorname = "kayui uma"
trigger4 = enemynear(var(58)),name ="anna" || enemynear(var(58)),name ="henri" || enemynear(var(58)),name ="mora" || enemynear(var(58)),name ="saya" || enemynear(var(58)),name ="dragon"
trigger5 = enemynear(var(58)),authorname = "aoba"
trigger6 = enemynear(var(58)),authorname = "Mikita"
fvar(21) = 1

;特殊地上受け身持ち2
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = enemynear(var(58)),authorname = "ikaruga"
trigger2 = enemynear(var(58)),authorname = "warusaki3"
trigger3 = enemynear(var(58)),authorname = "Gonzo-"
fvar(21) = 2

;---------------------------------------------------------------------------
;行動制限
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = 1
fvar(22) = 0

;行動するな
[State -3, ]
Type = VarSet
triggerall = var(59)
trigger1 = enemynear(var(58)),stateno = [5200,5201]
trigger2 = enemynear(var(58)),stateno = 702
trigger2 = enemynear(var(58)),authorname = "ahuron"
trigger3 = enemynear(var(58)),stateno = 52000
fvar(22) = 1

;この下、一行以上空ける事！
