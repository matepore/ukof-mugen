

;===============================================================================
; Definition of the Basic Action
;===============================================================================
;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = Var(32)!=0 && Var(36)=2
x = const(velocity.walk.fwd.x)*(1+IfElse(Var(32)!=0 && Var(36)=2,0.5,0))

[State -2]
type = AfterImageTime
trigger1 = Var(32)!=0 && Var(36)=2
trigger1 = 1
time = 20

[State -2]
type = BGPalFx
trigger1 = Var(32)!=0 && Var(36)=2
trigger1 = 1
time = 11
add = -100,-100,-100

[State 20, 3]
type = ChangeAnim
triggerall = Var(32)!=0 && Var(36)=2
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Var(32)=0 || (Var(32)!=0 && Var(36)!=2)
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; cpu
[Statedef 21]
type    = S
physics = S
sprpriority = 1
anim = 20
ctrl = 0

[State 21, 1]
type = Turn
trigger1 = P2dist X < 0

[State 21, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 21, 5]
type = changestate
trigger1 = roundstate != 2
trigger2 = p2bodydist X <= 5
trigger3 = inguarddist
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; cpu

[Statedef 22]
type    = S
physics = S
sprpriority = 1
anim = 21
ctrl = 0

[State 22, 1]
type = Turn
trigger1 = P2dist X < 0

[State 22, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 22, 5]
type = changestate
trigger1 = roundstate != 2
trigger2 = p2bodydist x >= 240
trigger3 = inguarddist
value = 0
ctrl = 1


;-------------------------------------------------------------------------------
; ダッシュ
[Statedef 100]
type    = S
movetype = I
physics = N
anim = 100
ctrl = 1

[State -3, AI]
type = changestate
triggerall = var(59)>0
trigger1 = time = 0
value = 0
ctrl = 1

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 100,1]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 100, 0

[State 100,2]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 100, 1

[State 100,3]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 100, 2

[State 100,ChangeState]
type = ChangeState
triggerall = !(var(30)!=0 && var(31)!=0 && var(32)!=0)
trigger1 = Command = "holdupfwd" && Time >= 4
value = 40

[State 100,4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100,101]
type = ChangeState
trigger1 = Command != "holdfwd"&&time>4
value = 101
ctrl = 1

;-------------------------------------------------------------------------------
; cpu
[Statedef 99]
type    = S
movetype = I
physics = N
anim = 100
ctrl = 0

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 100,1]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 100, 0

[State 100,2]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 100, 1

[State 100,3]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 100, 2

[State 100,4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 4]
type = ChangeState
triggerall = var(59)>0
trigger1 = p2bodydist x <= 5
trigger2 = roundstate != 2
trigger3 = var(59)
trigger3 = InGuardDist
value = 101
ctrl = 1

;-------------------------------------------------------------------------------
; cpu
[Statedef 98]
type    = S
movetype = I
physics = N
anim = 100
ctrl = 0

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 100,1]
type = PlaySnd
trigger1 = TimeMod = 70, 0
value = 100, 0

[State 100,2]
type = PlaySnd
trigger1 = TimeMod = 70, 21
value = 100, 1

[State 100,3]
type = PlaySnd
trigger1 = TimeMod = 70, 47
value = 100, 2

[State 100,4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 4]
type = ChangeState
triggerall = var(59)>0
trigger1 = p2bodydist x <= 5
trigger2 = roundstate != 2
value = 101
ctrl = 1

;------------------------ 停止
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0
ctrl = 1

[State 101,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; バックステップ
;------------------------ 開始
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 105,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 181,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 105,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105,VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .42

[State 105,VelMul]
type = VelMul
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y >0
x = .91

[State 105,0]
type = PlaySnd
trigger1 = AnimElem = 3
value = 41, 0

[State 105,1]
type = ChangeState
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;------------------------ 着地
[Statedef 106]
type = S
movetype = I
physics = S
anim = 106
velset = 0, 0

[State 106,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106,2]
type = MakeDust
trigger1 = Time >= 0
pos = -30, 0

[State 106,3]
type = PlaySnd
trigger1 = Time = 0
value = 47, 0

[State 106,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 120, Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0 
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command = "holddown"
value = 131

[State 130, Hi to Lo]
type = ChangeState
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
value = 131

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 130, AI_Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist 
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holddown"
value = 130

[State 120, Lo to Hi]
type = ChangeState
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
value = 130

[State 131, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 131, AI_Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist 
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132]
type = ChangeState
triggerall = var(59)<=0
triggerall = sysvar(0)
trigger1 = command = "holdback" 
trigger1 = inguarddist
value = 130

[State 132, AI]
Type = ChangeState
TriggerAll = var(59)>0
TriggerAll = sysvar(0)
Trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 132, AI_Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 140, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
Type = ChangeState
TriggerAll = var(59)<=0
Trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, AI]
Type = ChangeState
TriggerAll = var(59)>0
Trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)<=0,(command = "holddown"),(EnemyNear(Var(57)),StateType!=A))

[State 150, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 2]
Type = ChangeState
TriggerAll = var(59)<=0
Trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, AI]
Type = ChangeState
TriggerAll = var(59)>0
Trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)<=0,(command = "holddown"),(EnemyNear(Var(57)),StateType!=A))

[State 152, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = var(59)<=0
trigger1 = command = "holdback" 
trigger2 = var(59)>0
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52


;===============================================================================
; Definition of the Win/Lose/Intro Pause
;===============================================================================
; 時間切れ負け
[Statedef 170]
type = S
physics = N
ctrl = 0
anim = 170
velset = 0,0

[State 170,1]
type = NotHitBy
trigger1 = 1
value = SCA

;-------------------------------------------------------------------------------
; 時間切れ引き分け
[Statedef 175]
type = S
physics = N
ctrl = 0
velset = 0,0

[State 175,0]
type = ChangeState
trigger1 = Time = 0
value = 170

;-------------------------------------------------------------------------------
; 勝利
[Statedef 180]
type = S
physics = N

[State 180,VarSet]
type = VarSet
trigger1 = Time = 0
v = 2
value = Random

[State 180,0]
type = VarSet
trigger1 = Command = "hold_a"
v = 2
value = 100

[State 180,0]
type = VarSet
trigger1 = Command = "hold_y"
v = 2
value = 550

[State 180,VarSet]
type = VarSet
trigger1 = Command = "hold_x"
v = 2
value = 100

[State 180,VarSet]
type = VarSet
trigger1 = Command = "hold_b"
v = 2
value = 550

[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
value = IfElse((Var(2) = [0,500]),181,182)

[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
value = 181

;-------------------------------------------------------------------------------
; 勝利１
[Statedef 181]
type = S
physics = N
ctrl = 0
anim = 180
velset = 0,0,0

[State 181,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 182,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=15
value = 180, 0

[State 182,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8,=5
value = 180, 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 181
pos = 0,0
postype = P1
sprpriority = 1
bindtime = 1
ownpal = 1

[State 183,4]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 勝利２
[Statedef 182]
type = A
physics = N
ctrl = 0
anim = 182
velset = 0,0,0

[State 182,1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 182, 0

[State 183,0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183,4]
type = AssertSpecial
trigger1 = Time = [0,140]
flag = RoundNotOver

;---------------------------------------------------------------------------
; プレイントロ
[Statedef 190]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0

[State 190,VarSet]
type = VarSet
trigger1 = Time = 0
v = 8
value = 0

[State 190,VarSet]
type = VarSet
triggerall = Time = 0
trigger1 = P2Name = "Yuri Sakazaki" || P4Name = "Yuri Sakazaki" || P2Name = "Yuri" || P4Name = "Yuri"
v = 8
value = 2

[State 190,VarSet]
type = VarSet
triggerall = Time = 0
trigger1 = P2Name = "Ryo Sakazaki" || P4Name = "Ryo Sakazaki" || P2Name = "Ryo" || P4Name = "Ryo"
trigger2 = P2Name = "Takuma Sakazaki" || P4Name = "Takuma Sakazaki" || P2Name = "Takuma" || P4Name = "Takuma"
trigger3 = P2Name = "RyukoAct" || P4Name = "RyukoAct"
v = 8
value = 1

[State 190, 2]
type = ChangeState
trigger1 = Time = 0
value = IfElse(Var(8) = 0,191,IfElse(Var(8) = 1,192,193))

[State 190, 2]
type = ChangeState
trigger1 = Time = 0
value = 191

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

;-------------------------------------------------------------------------------
; イントロ
[Statedef 191]
type = S
movetype = I
physics = S
ctrl = 0
anim = 190
velset = 0,0,0

[State 191,4]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12
value = 190, 0

[State 191,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ
[Statedef 192]
type = S
movetype = I
physics = S
ctrl = 0
anim = 191
velset = 0,0,0

[State 191,4]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 191, 0

[State 191,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ
[Statedef 193]
type = S
movetype = I
physics = S
ctrl = 0
anim = 192
velset = 0,0,0

[State 191,4]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 810,Explod]
type = Explod
trigger1 = time = 0
anim = 193
pos = 0,0
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State -2, AI]
type = Helper
trigger1 = !NumHelper(194)
trigger1 = AnimElem = 9
name = "AI"
id = 194
pos = 5,-60
stateno = 194
keyctrl = -1
sprpriority = 3

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 193, 0

[State 191,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 15
value = 193, 1

[State 191,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ 花束
[Statedef 194]
type = A
movetype = I
physics = N
ctrl = 0
anim = 194
velset = 6.3,-4.8,0

[State 191,VelAdd]
type = VelAdd
trigger1 = 1
y = 0.25

[State 7999, Destroy] 
type = DestroySelf 
trigger1 = Parent,Stateno != 193
trigger2 = Pos Y > 20

;-------------------------------------------------------------------------------
; 挑発
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0, 0
ctrl = 0

[State 195,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 195, 0
channel = 0

[State 195,VarSet]
type = VarSet
trigger1 = Time = 0
v = 30
value = 0

[State 195,CtrlSet]
type = CtrlSet
triggerall = Alive = 1 && (enemy,Alive = 1)
trigger1 = AnimElem = 7,=0
value = 1

[State 195,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Definition of the Basic Arts
;===============================================================================
; 近距離・立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 200
poweradd = 5

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 220, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
damage    = Ceil((32-Var(20)-Var(22)))
getpower = 65 
givepower = 11
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12,13
numhits = 1
sparkno = S2010
guard.sparkno = S2050
sparkxy = -10,-80
hitsound = S900,9
guardsound = S900, 13
ground.type = High
ground.slidetime = 16
ground.hittime  = 15
guard.pausetime = 11,11
guard.slidetime = 14
guard.hittime  = 14
ground.velocity = -4.5
air.velocity = -3.0,-2
ground.cornerpush.veloff = -11.5

[State 200,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 205
poweradd = 10

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 220, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 205,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
damage    = Ceil((34-Var(20)-Var(22)))
getpower = 65 
givepower = 11
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12,13
numhits = 1
sparkno = S2010
guard.sparkno = S2050
sparkxy = -8,-75
hitsound = S900,9
guardsound = S900, 13
ground.type = High
ground.slidetime = 14
ground.hittime  = 10
guard.pausetime = 10,10
guard.slidetime = 14
guard.hittime  = 12
ground.velocity = -6.5
air.velocity = -3.0,-2
ground.cornerpush.veloff = -11.3

[State 200,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち強パンチ
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
anim = 220

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 220, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 220,3]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = Ceil((65-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = M
priority = 5, Hit
pausetime = 14,15
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-60
hitsound = S900,15
guardsound = S900, 5
ground.type = Low
ground.slidetime = 26
ground.hittime  = 18
guard.pausetime = 11,11
guard.slidetime = 24
guard.hittime  = 22
ground.velocity = -8.2
air.velocity = -4.2,-3.2
ground.cornerpush.veloff = -12.8

[State 220,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち強パンチ
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
anim = 225

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 225, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 225,3]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = Ceil((105-(Var(26)=2)*10-Var(21)-Var(23)))
getpower = 50 
givepower = 12
hitflag = MAF
guardflag = M
priority = 5, Hit
pausetime = 14,13
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-85
hitsound = S900,15
guardsound = S900, 5
ground.type = High
ground.slidetime = 24
ground.hittime  = 24
guard.pausetime = 12,13
guard.slidetime = 24
guard.hittime  = 18
ground.velocity = -7.5
air.velocity = -4.2,-3.2
ground.cornerpush.veloff = -12.5

[State 225,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち弱キック
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 10
ctrl = 0
anim = 210

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 210, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 210,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    =  Ceil((35-(Var(26)=2)*3-Var(20)-Var(22)))
getpower = 55 
givepower = 11
hitflag = MAF
guardflag = L
priority = 4, Hit
pausetime = 11,11
numhit = 1
sparkno = S2010
guard.sparkno = S2050
sparkxy = -20,-32
hitsound = S900, 11
guardsound = S900, 13
ground.type = Low
ground.slidetime = 15
ground.hittime  = 11
guard.pausetime = 12,13
guard.slidetime = 14
guard.hittime  = 12
ground.velocity = -4.2
air.velocity = -3.0,-2
ground.cornerpush.veloff = -11.5

[State 210,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち弱キック
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 10
ctrl = 0
anim = 215

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 215, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 10

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 3
x = 5

[State 215,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
damage    =  Ceil((38-(Var(26)=2)*5-Var(20)-Var(22)))
getpower = 55 
givepower = 12
hitflag = MAF
guardflag = L
priority = 4, Hit
pausetime = 12,12
numhit = 1
sparkno = S2010
guard.sparkno = S2050
sparkxy = -15,-45
hitsound = S900, 11
guardsound = S900, 13
ground.type = Low
ground.slidetime = 14
ground.hittime  = 11
guard.pausetime = 11,12
guard.slidetime = 14
guard.hittime  = 11
ground.velocity = -5.7
air.velocity = -3.0,-2
ground.cornerpush.veloff = -11.8

[State 210,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち強キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
anim = 230

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 230, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 230,3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Hard
damage    =  Ceil((41-Var(21)-Var(23)))
getpower = 30 
givepower = 12
hitflag = MAF
guardflag = M
priority = 5, Hit
pausetime = 12,12
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-78
hitsound = S900,4
guardsound = S900, 16
ground.type = High
ground.slidetime = 27
ground.hittime  = 16
guard.pausetime = 11,12
guard.slidetime = 24
guard.hittime  = 18
ground.velocity = -8.1
air.velocity = -0.5,-1.2
ground.cornerpush.veloff = -13.8

[State 230,3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Hard
damage    =  Ceil((72-Var(21)-Var(23)))
getpower = 45 
givepower = 12
hitflag = MAF
guardflag = H
priority = 5, Hit
pausetime = 13,12
sparkno = S2020
guard.sparkno = S2100
sparkxy = -18,-80
hitsound = S900,4
guardsound = S900, 16
ground.type = Low
ground.slidetime = 26
ground.hittime  = 16
guard.pausetime = 13,13
guard.slidetime = 25
guard.hittime  = 15
ground.velocity = -8.3
air.velocity = -5.2,-3.2
ground.cornerpush.veloff = -11.5

[State 230,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち強キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 15
ctrl = 0
anim = 235

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 235, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 235,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    =  Ceil((110-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = M
priority = 5, Hit
pausetime = 11,12
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-68
hitsound = S900,17
guardsound = S900, 16
ground.type = Low
ground.slidetime = 24
ground.hittime  = 18
guard.pausetime = 12,12
guard.slidetime = 23
guard.hittime  = 20
ground.velocity = -8.0
air.velocity = -4.2,-3.2
ground.cornerpush.veloff = -10.5

[State 235,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 5
ctrl = 0
anim = 400

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 400, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 400,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Light
damage    = Ceil((38-Var(20)-Var(22)))
getpower = 55 
givepower = 11
hitflag = MAF
guardflag = L
priority = 4, Hit
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2050
sparkxy = -10,-52
hitsound = S900,9
guardsound = S900, 13
ground.type = Low
ground.slidetime = 15
ground.hittime  = 11
guard.pausetime = 11,11
guard.slidetime = 14
guard.hittime  = 10
ground.velocity = -4.6
air.velocity = -3.0,-2
ground.cornerpush.veloff = -10.5

[State 400,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ強パンチ
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 20
ctrl = 0
anim = 420

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 420, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 420,VarSet]
type = VarSet
trigger1 = Time = 0
v = 17
value = 0

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 3
x = 10

[State 420,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Hard
damage    = Ceil((80-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = M
priority = 5, Hit
pausetime = 13,13
sparkno = S2020
guard.sparkno = S2060
sparkxy = -15,-78
hitsound = S900,15
guardsound = S900, 5
ground.type = High
ground.slidetime = 23
ground.hittime  = 17
guard.pausetime = 13,13
guard.slidetime = 24
guard.hittime  = 19
ground.velocity = -7.5
air.velocity = -3.2,-4.2
ground.cornerpush.veloff = -11.0

[State 420,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ弱キック
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 0
ctrl = 0
anim = 410

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 410, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 410,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype = Light
damage    = Ceil((35-Var(20)-Var(22)))
getpower = 55 
givepower = 11
hitflag = MAF
guardflag = L
priority = 4, Hit
pausetime = 11,11
sparkno = S2010
guard.sparkno = S2050
sparkxy = -15,-8
hitsound = S900, 11
guardsound = S900, 13
ground.type = Low
ground.slidetime = 16
ground.hittime  = 15
guard.pausetime = 11,11
guard.slidetime = 16
guard.hittime  = 13
ground.velocity = -5.7
air.velocity = -3.0,-2
ground.cornerpush.veloff = -10.3

[State 410,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ強キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 20
ctrl = 0
anim = 430

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 430, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 430,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype = Hard
damage    = Ceil((102-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = L
priority = 5, Hit
pausetime = 14,13
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-13
hitsound = S900,4
guardsound = S900, 16
ground.type = Trip
ground.slidetime = 14
ground.hittime  = 10
guard.pausetime = 11,14
guard.slidetime = 18
guard.hittime  = 23
ground.velocity = -2.0,-3.1
air.velocity = -2.6,-4
guard.velocity = -5
ground.cornerpush.veloff = -10.5
fall = 1

[State 430,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ弱パンチ
[Statedef 500]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 5
ctrl = 0
anim = IfElse((Vel X =0 && Var(25)!=2),500,500)

[State 500,3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
damage    = Ceil(36*fVar(20)*fvar(22)*fVar(12))
getpower = 55 
givepower = 11
hitflag = MAF
guardflag = H
priority = 4, Hit
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2050
sparkxy = -15,-62
hitsound = S900, 9
guardsound = S900, 13
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
guard.pausetime = 11,11
guard.slidetime = 10
guard.hittime  = 10
ground.velocity = -4.0
ground.cornerpush.veloff = -6.5
air.velocity = -3.0,-3

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ強パンチ
[Statedef 520]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 10
ctrl = 0
anim = IfElse((Vel X =0 && Var(25)!=2),520,520)

[State 520,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = Ceil((71-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = H
priority = 5, Hit
pausetime = 12,13
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-60
hitsound = S900,15
guardsound = S900, 5
ground.type = High
ground.slidetime = 14
ground.hittime  = 19
guard.pausetime = 12,13
guard.slidetime = 11
guard.hittime  = 19
ground.velocity = -4.5
ground.cornerpush.veloff = -7.5
air.velocity = -3.2,-3.2

[State 3000,VarSet]
type = VarSet
triggerall = fVar(30)=1
trigger1 = MoveHit
fv = 30
value = 2

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ弱キック
[Statedef 510]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim = IfElse((Vel X =0 && Var(25)!=2),510,510)

[State 510,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
damage    = Ceil(36*fVar(20)*fvar(22)*fVar(12))
getpower = 55 
givepower = 11
hitflag = MAF
guardflag = H
priority = 4, Hit
pausetime = 12,13
sparkno = S2010
guard.sparkno = S2100
sparkxy = -15,-35
hitsound = S900, 11
guardsound = S900, 13
ground.type = High
ground.slidetime = 9
ground.hittime  = 20
guard.pausetime = 12,12
guard.slidetime = 14
guard.hittime  = 18
ground.velocity = -4.0
ground.cornerpush.veloff = -6.5
air.velocity = -3.0,-3

;-------------------------------------------------------------------------------
; 垂直ジャンプ強キック
[Statedef 530]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 15
ctrl = 0
anim = 530

[State 530,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, NA
animtype = Hard
damage    = Ceil((70-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = H
priority = 5, Hit
pausetime = 12,13
sparkno = S2020
guard.sparkno = S2100
sparkxy = -18,-45
hitsound = S900,4
guardsound = S900, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
guard.pausetime = 12,12
guard.slidetime = 14
guard.hittime  = 20
ground.velocity = -3.5
ground.cornerpush.veloff = -6.3
air.velocity = -3.2,-3.2

;-------------------------------------------------------------------------------
; 斜めジャンプ強キック
[Statedef 535]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 10
ctrl = 0
anim = 535

[State 535,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, NA
animtype = Hard
damage    = Ceil((70-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = H
priority = 5, Hit
pausetime = 12,13
sparkno = S2020
guard.sparkno = S2100
sparkxy = -18,-45
hitsound = S900,4
guardsound = S900, 16
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
guard.pausetime = 12,12
guard.slidetime = 14
guard.hittime  = 20
ground.velocity = -3.5
ground.cornerpush.veloff = -6.3
air.velocity = -3.2,-3.2

;-------------------------------------------------------------------------------
; 地上ふっとばし攻撃
[Statedef 600]
type = S
movetype = A
physics = N
juggle = 7
poweradd= 10
anim = 602
ctrl = 0
velset = 0,0

[State 600,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200, 2

[State 720, VelSet]
type = PosAdd
trigger1 = AnimElem = 1
x = 24

[State 720, VelSet]
type = PosAdd
trigger1 = AnimElem = 2
x = 15

[State explod];砂煙
type = Explod
trigger1 = animelem = 2
anim = 6011
id = 6011
pos = 5,0
sprpriority = -3
ontop = 0
shadow = -1
ownpal = 1
scale = 0.6,0.5

[State 600,Hitdef]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage    = Ceil((120-Var(21)-Var(23)))
getpower = 120 
givepower = 30
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 14,17
sparkno = S2031
guard.sparkno = S2100
sparkxy = -10,-61
hitsound = S300, 4
guardsound = S900, 16
ground.type = high
ground.slidetime = 7
ground.hittime  = 15
guard.pausetime = 14,15
guard.slidetime = 25
guard.hittime  = 19
guard.velocity = -8.2
ground.velocity = -4.8,-4.2
air.velocity = -4.7,-4.5
fall = 1
air.fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=9

[State 600,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 空中ふっとばし攻撃
[Statedef 610]
type = A
movetype = A
physics = A
ctrl = 0
anim = 610
juggle = 7
poweradd= 10

[State 600,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200, 2

[State 610,Hitdef]
type = Hitdef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
damage    = Ceil((120-Var(21)-Var(23)))
getpower = 120 
givepower = 30
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 14,17
sparkno = S2031
guard.sparkno = S2100
sparkxy = -10,-66
hitsound = S300, 4
guardsound = S900, 16
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
guard.pausetime = 13,16
guard.slidetime = 8
guard.hittime  = 24
guard.velocity = -7.2
ground.velocity = -4.3,-3.5
air.velocity = -4.2,-3.5
fall = 1
air.fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=9

;===============================================================================
; Definition of the (Dir + Button) attack
;===============================================================================
; キャンセル 龍翻脚
[Statedef 700]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 15
ctrl = 0
anim = 255

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 700, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = VelMul
trigger1 = Vel X <0
trigger1 = !MoveContact
x = 0.8

[State 3220,Width]
type = Width
trigger1 = AnimElem = 1,>=0
trigger1 = AnimElem = 3,<0
player = 15,0

[State 3220,Width]
type = Width
trigger1 = AnimElem = 3
player = 0,0

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 3
x = 12

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 6
x = 28

[State explod];砂煙
type = Explod
trigger1 = animelem = 5,=1
anim = 6011
id = 6011
pos = 0,0
sprpriority = -3
ontop = 0
shadow = -1
ownpal = 1
scale = 0.5,0.4

[State 720,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = Ceil((62-Var(20)-Var(22)))
getpower = 50
givepower = 22
hitflag = MA
guardflag = M
priority = 6, Hit
pausetime = 17,18
sparkno = S2010
guard.sparkno = S2100
sparkxy = -20,-75
hitsound = S900, 15
guardsound = S900, 16
ground.type = High
ground.slidetime = 28
ground.hittime  = 17
guard.pausetime = 13,13
guard.slidetime = 23
guard.hittime  = 18
ground.velocity = -7.0
air.velocity = -2.2,-4.5
ground.cornerpush.veloff = -13.8
fall = 0
air.fall = 0
fall.recover = 0
envshake.ampl=4
envshake.time=12
forcestand = 1

[State 720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 龍翻脚
[Statedef 710]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 10
ctrl = 0
anim = 250

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 700, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = VelMul
trigger1 = Vel X <0
trigger1 = !MoveContact
x = 0.8

[State 3220,Width]
type = Width
trigger1 = AnimElem = 1,>=0
trigger1 = AnimElem = 3,<0
player = 15,0

[State 3220,Width]
type = Width
trigger1 = AnimElem = 3
player = 0,0

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 3
x = 15

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 200, 2]
type = PosAdd
trigger1 = AnimElem = 6
x = 28

[State explod];砂煙
type = Explod
trigger1 = animelem = 5,=1
anim = 6011
id = 6011
pos = 0,0
sprpriority = -3
ontop = 0
shadow = -1
ownpal = 1
scale = 0.6,0.4

[State 720,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage    = Ceil((70-Var(20)-Var(22)))
getpower = 50
givepower = 22
hitflag = MAF
guardflag = M
priority = 6, Hit
pausetime = 17,18
sparkno = S2010
guard.sparkno = S2100
sparkxy = -20,-75
hitsound = S900, 15
guardsound = S900, 16
ground.type = High
ground.slidetime = 24
ground.hittime  = 17
guard.pausetime = 13,13
guard.slidetime = 23
guard.hittime  = 19
ground.velocity = -7.0
air.velocity = -2.2,-4.5
ground.cornerpush.veloff = -12.5
fall = 0
air.fall = 0
fall.recover = 0
envshake.ampl=4
envshake.time=12
forcestand = 1

[State 720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; キャンセル 勾龍降脚蹴り_1
[Statedef 720]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 240

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 700, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 725
ctrl = 0

;↓
;-------------------------------------------------------------------------------
; キャンセル 勾龍降脚蹴り_2

[Statedef 725]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 10
velset = 5.3,-5.1,0
ctrl = 0
anim = 245

[State 600,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,1

[State 200, 2]
type = VelMul
trigger1 = AnimElem = 3,>=0
x = 1

[State 200, 2]
type = gravity
trigger1 = AnimElem = 1,>=0

[State 200, 2]
type = VelAdd
trigger1 = AnimElem = 3,>=0
y = -0.18

[State 720,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, NA
animtype  = Hard
damage    = Ceil((75-Var(20)-Var(22)))
getpower = 40
givepower = 18
hitflag = MAF
guardflag = M
priority = 6, Hit
pausetime = 12,13
sparkno = S2010
guard.sparkno = S2100
sparkxy = -10,-55
hitsound = S900, 15
guardsound = S900, 16
ground.type = High
ground.slidetime = 35
ground.hittime  = 20
guard.pausetime = 12,10
guard.slidetime = 32
guard.hittime  = 22
ground.velocity = -7.5
air.velocity = -2.2,-4.5
ground.cornerpush.veloff = -15.5
fall = 0
air.fall = 1
fall.recover = 0

[State 720,ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 727
ctrl = 0

;------------------- 着地
[Statedef 727]
type    = S
movetype= I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0,0
anim = 247

[State 1120,VelSet]
type = VelSet
trigger1 = time = 0
y = 0

[State 1120,PosSet]
type = PosSet
trigger1 = time = 0
trigger1 = Pos Y != 0
y = 0

[State 1110,PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 47,0

[State 1120,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 勾龍降脚蹴り_1

[Statedef 722]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 240

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 700, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 726
ctrl = 0

;-------------------------------------------------------------------------------
; 勾龍降脚蹴り_2

[Statedef 726]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 10
velset = 5.3,-5.1,0
ctrl = 0
anim = 245

[State 600,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,1

[State 200, 2]
type = VelMul
trigger1 = AnimElem = 3,>=0
x = 1

[State 200, 2]
type = gravity
trigger1 = AnimElem = 1,>=0

[State 200, 2]
type = VelAdd
trigger1 = AnimElem = 3,>=0
y = -0.18

[State 720,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, NA
animtype  = Hard
damage    = Ceil((77-Var(20)-Var(22)))
getpower = 40
givepower = 18
hitflag = MAF
guardflag = H
priority = 6, Hit
pausetime = 11,12
sparkno = S2010
guard.sparkno = S2100
sparkxy = -10,-55
hitsound = S900, 15
guardsound = S900, 16
ground.type = High
ground.slidetime = 35
ground.hittime  = 25
guard.pausetime = 12,10
guard.slidetime = 32
guard.hittime  = 25
ground.velocity = -7.2
air.velocity = -2.2,-4.5
ground.cornerpush.veloff = -15.5
fall = 0
air.fall = 1
fall.recover = 0

[State 720,ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 727
ctrl = 0

;-------------------------------------------------------------------------------
; 裏拳(キャンセル版)

[Statedef 741]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 30
ctrl = 0
anim = 261

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 700, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = VelMul
trigger1 = Vel X <0
trigger1 = !MoveContact
x = 0.4

[State 720,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Up
damage    = Ceil((62-Var(20)-Var(22)))
getpower = 50
givepower = 22
hitflag = MA
guardflag = M
priority = 6, Hit
pausetime = 14,14
sparkno = S2020
guard.sparkno = S2100
sparkxy = -12,-82
hitsound = S900,15
guardsound = S900, 16
ground.type = High
ground.slidetime = 24
ground.hittime  = 16
guard.pausetime = 13,13
guard.slidetime = 24
guard.hittime  = 20
ground.velocity = -0.35,-9.2
air.velocity = -0.35,-8.0
guard.velocity = -7.5
ground.cornerpush.veloff = -10.5
fall = 1
air.fall = 1
fall.recover = 0
yaccel = 0.41

[State 720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 裏拳

[Statedef 740]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 30
ctrl = 0
anim = 260

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 700, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = VelMul
trigger1 = Vel X <0
trigger1 = !MoveContact
x = 0.4

[State 720,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Up
damage    = Ceil((88-Var(20)-Var(22)))
getpower = 50
givepower = 22
hitflag = MA
guardflag = M
priority = 6, Hit
pausetime = 14,14
sparkno = S2020
guard.sparkno = S2100
sparkxy = -12,-82
hitsound = S900,15
guardsound = S900, 16
ground.type = High
ground.slidetime = 24
ground.hittime  = 16
guard.pausetime = 13,13
guard.slidetime = 24
guard.hittime  = 20
ground.velocity = -0.35,-9.5
air.velocity = -0.35,-9.5
guard.velocity = -7.5
ground.cornerpush.veloff = -10.5
fall = 1
air.fall = 1
fall.recover = 0
yaccel = 0.41

[State 720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 上段回し蹴り
[Statedef 750]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 10
ctrl = 0
anim = 270

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 235, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = posadd
trigger1 = AnimElem = 3,=2
x = 1

[State 200, 2]
type = posadd
trigger1 = AnimElem = 4,=1
x = 2

[State 235,3]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    =  Ceil((105-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = M
priority = 6, Hit
pausetime = 12,12
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-88
hitsound = S900,17
guardsound = S900, 16
ground.type = Low
ground.slidetime = 24
ground.hittime  = 20
guard.pausetime = 12,12
guard.slidetime = 23
guard.hittime  = 17
ground.velocity = -5.0
air.velocity = -4.2,-4.6
ground.cornerpush.veloff = -10.5
air.fall = 1
fall.recover = 0

[State 235,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 龍落蹴
[Statedef 760]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 50
ctrl = 0
anim = 601

[State 1810, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4, = 0
value = s900, 14

[State 1810, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3, = 1
value = 500, 11

[State 200, 2]
type = VelSet
trigger1 = Vel X >0
trigger1 = Time = 0
x = 0

[State 235, 2]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 2
x = 0.3

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 1.5

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 8.2

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 6

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 6
x = -1.2

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 235,3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype  = Hard
damage    =  Ceil((65-Var(21)-Var(23)))
getpower = 90 
givepower = 22
hitflag = MAF
guardflag = H
priority = 6, Hit
pausetime = 12,13
sparkno = S2020
guard.sparkno = S2100
sparkxy = -15,-68
hitsound = S900,4
guardsound = S900, 16
ground.type = Low
ground.slidetime = 24
ground.hittime  = 16
guard.pausetime = 15,16
guard.slidetime = 24
guard.hittime  = 13
guard.velocity = -9.2
ground.velocity = -10.0
air.velocity = -4.2,-3.2
ground.cornerpush.veloff = -13.5
envshake.ampl=10
envshake.time=10

[State 235,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Definition of the Basic Throws
;===============================================================================
; （Ｐ通常投げ）
[Statedef 800]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800
juggle  = 8
velset = 0, 0

[State 800,Hitdef]
type = Hitdef
trigger1 = Time = 0
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 5,dodge
getpower = 120
givepower = 100
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
sprpriority = 2
hitsound = S900, 0
fall = 1
air.fall = 1
fall.recover = 0
fall.yvelocity = -3.5
snap = 34,0
animtype = Hard
ground.velocity = -2.5,-6.0
air.velocity = -3.5,-4.0

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 220

;-------------------------------------------------------------------------------
; （成功）
[Statedef 810]
type = S
movetype = A
physics = N
anim = 810
velset = 0, 0
poweradd = 70

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3220,Width]
type = Width
trigger1 = AnimTime != 0
edge = 40,40
player = 0

[State 3220,Width]
type = Width
trigger1 = AnimTime = 0
edge = 0
player = 0

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 2100
pos = 38,-76
postype = P1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 810, 4]
type = ChangeState
trigger1 = time>=1
trigger1 = time<=12
trigger1 = P2Stateno!=820
value = 840
ctrl = 0

[State -2,PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = 500, IfElse(Random<200,1,IfElse(Random<500,11,21))

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 810, TargetBind1]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = 38, 0

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 4, < 0
pos = 48, 0

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
pos = 52, -84

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 6, < 0
pos = 47, -85

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 7, < 0
pos = 24, -101

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 8, < 0
pos = -23, -91

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 8
pos = -35, -8
time = 1

[State explod];足元１
type = Explod
trigger1 = AnimElem = 8,=2
anim = 6012
id = 6012
pos = -53,5
sprpriority = 0
ownpal = 1
shadow = 0
scale = 1.1, 1.1

[State 1000, EnvShake] ;振動
type = EnvShake
trigger1 = AnimElem = 8
time = 12
ampl = 8
freq = 175
ignorehitpause = 1

[State -2,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,=5
value = 900,2

[State -2,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7,=2
value = 900, 6
volume = 256

[State 810, TargetLifeAdd] 
type = TargetLifeAdd
trigger1 = AnimElem = 8
value = Ceil(-100)

[State 810,Turn]
type = Turn
trigger1 = AnimElem = 9

[State 810, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; （投げられ側）
[Statedef 820]
type = S
movetype = H
physics = N
ctrl = 0

[State 820,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 5000, 1]
type = ChangeAnim2
triggerall = (AuthorName = "ActJapan" && Name = "RyuKoAct")
trigger1 = time = 0
value = 820+Var(36)*10000

[State 5000, 1]
type = ChangeAnim2
triggerall = !(AuthorName = "ActJapan" && Name = "RyuKoAct")
triggerall = AuthorName = "ActJapan" && Name = "Robert Garcia"
trigger1 = time = 0
value = 825

[State 5000, 1]
type = ChangeAnim2
triggerall = !(AuthorName = "ActJapan" && Name = "RyuKoAct")
triggerall = !(AuthorName = "ActJapan" && Name = "Robert Garcia")
triggerall = AuthorName = "ActJapan"
trigger1 = time = 0
value = 820

[State 5000, 1]
type = ChangeAnim2
triggerall = !AuthorName = "ActJapan"
trigger1 = time = 0
value = 824

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "ActJapan" && (Name = "RyuKoAct" || Name = "Ryo Sakazaki" || Name = "Robert" || Name = "King" || Name = "Kensou"))
trigger1 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
trigger2 = (AuthorName = "ActJapan" && (Name = "Yuri Sakazaki" || Name = "Takuma Sakazaki" || Name = "Ralf"))
trigger2 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<300)
trigger3 = (AuthorName = "ActJapan" && Name = "Blue Mary")
trigger3 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<350)
trigger4 = (AuthorName = "M.M.R." && (Name = "King" || Name = "Vice" || Name = "Mai Shiranui" || Name = "Hinako Shijo" || Name = "Athena Asamiya"))
trigger4 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
trigger5 = (AuthorName = "M.M.R." && (Name = "Kasumi Todo" || Name = "Chang Koehan" || Name = "Maxima" || Name = "Foxy"))
trigger5 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
trigger6 = (AuthorName = "Tin" && (Name = "Tin's Leona" || Name = "Tin's May Lee"))
trigger6 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(10)!=0 && time = 10 && Random<250)
trigger7 = (AuthorName = "Tin" && (Name = "Tin's Clark" || Name = "Tin 2002_rugal"))
trigger7 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(1)!=0 && time = 10 && Random<250)
trigger8 = AuthorName = "ActJapan"
trigger8 = (AuthorName = "ActJapan" && !(Name = "RyuKoAct" || Name = "Ryo Sakazaki" || Name = "Robert" || Name = "King" || Name = "Kensou"))
trigger8 = (AuthorName = "ActJapan" && !(Name = "Yuri Sakazaki" || Name = "Takuma Sakazaki" || Name = "Ralf"))
trigger8 = (AuthorName = "ActJapan" && Name != "Blue Mary")
trigger8 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
value = 830

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Tin" && (Name = "Tin's Ramon" || Name = "Tin's Another Ramon"))
trigger1 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(1)!=0 && time = 10 && Random<250)
value = 831

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Deuce" && (Name = "Benimaru Nikaido"))
trigger1 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(9)!=0 && time = 10 && Random<250)
value = 832

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Sander71113" && (Name = "Kyo Kusanagi" || Name = "NeoKyo" || Name = "Goro Daimon"))
trigger1 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(9)!=0 && time = 10 && Random<250)
trigger2 = (AuthorName = "Sander71113" && (Name = "Iori Yagami" || Name = "Ramon" || Name = "Chizuru Kagura" || Name = "Lucky Glauber"))
trigger2 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11) || (Var(9)!=0 && time = 10 && Random<250)
value = 833

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "NeoGouki" && (Name = "Shermie" || Name = "Sie Kensou" || Name = "Chris"))
trigger1 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11)
value = 834

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Mouser" && (Name = "Ryo Sakazaki" || Name = "Takuma Sakazaki" || Name = "Ralf Jones" || Name = "K9999"))
trigger1 = (((Command = "holdfwd" && Command = "y" ) || (Command = "holdback" && Command = "y")) && time >= 1 && time <= 11)
value = 835

[State 820, HitBy]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

[State 810, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 825
ctrl = 0

;-------------------------------------------------------------------------------
; （投げられ側）prt2
[Statedef 825]
type = L
movetype = H
physics = N
ctrl = 0
velset = 0,0
poweradd = 20

[State 820, HitBy]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = AuthorName = "ActJapan" && Name = "RyuKoAct"
trigger1 = time = 0
value = 5160+Var(36)*10000

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = !(AuthorName = "ActJapan" && Name = "RyuKoAct")
trigger1 = time = 0
value = 5160

[State 5101, 3]
type = VelSet
trigger1 = Time = 0
x = 0.5
y = -6.5

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110

;-------------------------------------------------------------------------------
; 投げはずし 地上ふっとばし攻撃
[Statedef 830]
type = S
movetype = A
physics = N
juggle = 0
poweradd= 10
ctrl = 0
velset = 0,0

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3290,00]
type = BGPalfx
trigger1 = time = 3
add = 250,250,250
time = 1

[State 820,ChangeAnim]
type = ChangeAnim
triggerall = AuthorName = "ActJapan" && Name = "RyuKoAct"
trigger1 = Time = 0
value = 600+Var(36)*10000

[State 820,ChangeAnim]
type = ChangeAnim
triggerall = AuthorName = "ActJapan"
trigger1 = Name != "RyuKoAct"
trigger1 = Time = 0
value = 600

[State 820,ChangeAnim]
type = ChangeAnim
triggerall = AuthorName = "M.M.R."
trigger1 = Time = 0
value = 600

[State 820,ChangeAnim]
type = ChangeAnim
triggerall = AuthorName = "Tin"
trigger1 = Time = 0
value = 250

[State 600,PlaySnd]
type = PlaySnd
triggerall = AuthorName = "M.M.R." || AuthorName = "ActJapan"
trigger1 = time = 5
value = 200, 2

[State 600,6]
type = Hitdef
triggerall = (AuthorName = "ActJapan" || AuthorName = "M.M.R.")
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = 0
getpower = 60 
givepower = 60
guardflag = M
hitflag = MAF
pausetime = 12,14
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-61
hitsound = S300, 4
guardsound = S0, 0
ground.type = High
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -4.5,-4.5
air.velocity = -4.7,-4.5
guard.pausetime = 12,12
guard.slidetime = 5
guard.hittime  = 10
fall = 1
recover = 0
fall.recover = 0
air.recover = 0

[State 250,1]
type=HitDef
triggerall = (AuthorName = "Tin" && (Name = "Tin's Leona" || Name = "Tin's Clark" || Name = "Tin's May Lee"))
trigger1=time = 0
attr=S,NA
damage=0
getpower=160,80
animtype=heavy
guardflag=MA
hitflag=MAF
priority=6,Hit
pausetime=12,12
guard.pausetime=12,12
sparkno=S82
guard.sparkno=S84
sparkxy=-15,-80
hitsound=S1,11
guardsound=S1,14
ground.type=high
ground.slidetime=8
ground.hittime=12
ground.velocity=-4.4,-7
airguard.velocity=-2.9,-5
air.type=High
air.velocity=-3.4,-6
air.hittime=12
fall=1

[State 250, 2]
type = HitDef
triggerall = (AuthorName = "Tin" && Name = "Tin 2002_rugal")
trigger1=time = 0
attr = S, NA
animtype  = digup
damage    = 0
getpower=150,30
guardflag = MA
pausetime = 15,15
sparkno = s2003
guard.sparkno=S2006
sparkxy = -10,-100
hitsound   = s1,10
guardsound = s1,15
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-7
air.velocity = -5.2,-5.2
fall=1
envshake.time=5
envshake.ampl=2

[State 600,7]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げはずし 地上ふっとばし攻撃 Tin's ラモン
[Statedef 831]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3290,00]
type = BGPalfx
trigger1 = time = 3
add = 250,250,250
time = 1

[State 99,99]
type = PlaySnd
trigger1 =animelem=8
value =1,1
channel=1

[State 99,99]
type = PlaySnd
trigger1 =animelem=2
value =0,1
channel=0

[State 250,3]
type=velset
triggerall = Name = "Tin's Another Ramon"
trigger1=Animelem=6
x=1.5
[State 250,3]
type=statetypeset
triggerall = Name = "Tin's Another Ramon"
trigger1=Animelem=5
value=A
[State 250,3]
type=statetypeset
triggerall = Name = "Tin's Another Ramon"
trigger1=Animelem=14
value=S

[State 0]
type = HitDef
triggerall = Name = "Tin's Ramon"
trigger1 = AnimElem = 9
attr = S, NA
damage = 0
getpower = 112,60
givepower = 112,60
animtype = heavy
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 10,10
guard.pausetime=10,10
sparkno = s2020
guard.sparkno=s95
sparkxy = -10,-86
hitsound = s1,11
guardsound = s1,14
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -5,-5
guard.slidetime = 10;仰け反る時間
guard.hittime = 10;仰け反り中の時間
guard.velocity = -15
airguard.velocity = -3,-4
air.type = trip
air.velocity = -4,-5 
air.hittime = 10
ground.cornerpush.veloff = -15
guard.cornerpush.veloff = -21
down.cornerpush.veloff = -10
fall = 1

[State 250, 2]
type = HitDef
triggerall = Name = "Tin's Another Ramon"
trigger1 = Animelem=9
attr = S, NA
animtype  = hard
damage    = 200
guardflag = MA
pausetime = 12,12
sparkno = s2020
guard.sparkno=s2040         
sparkxy = -10,-86
hitsound = s1,11
guardsound = s1,14
ground.type = high
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,-5
air.velocity = -4.8,-5.3
envshake.time=10
envshake.ampl=3
fall=1
getpower=100,50
id=2

[STate 999,0];地面衝撃
type=Explod
trigger1=animelem=15
anim=2080
pos=0,0
sprpriority=-3
ownpal=1

[State 250,3]
type=PosAdd
trigger1=Animelem=20
x=20

[STate 250,4]
type=StatetypeSet
trigger1=animelem=15
movetype=I

[State 250, 5]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 投げはずし 地上ふっとばし攻撃 Deuce/Sander71113(Benimaru Nikaido)
[Statedef 832]
type = S
movetype = A
physics = S
velset = 0,0
juggle = 0
anim = 240
ctrl = 0

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3290,00]
type = BGPalfx
trigger1 = time = 3
add = 250,250,250
time = 1

[State 240, Voice]
channel = 0
type = PlaySnd
trigger1 = animelem = 3
value = 5,2

[State 240, SFX]
type = PlaySnd
trigger1 = animelem = 4
value = 1,0

[State 240, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 0
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12,12
sparkno = 2
sparkxy = 4,-60
hitsound = S2,1
guardsound = S2,0
ground.type = High
air.animtype = Low
ground.velocity = -3.5,-8
air.velocity = -3.5,-7
guard.velocity = -11
fall = 1
fall.recovertime = 35
guard.velocity = -12
getpower = 20,20
givepower = 20,20
fall.yvelocity = -3.4
guard.pausetime = 10,10
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
yaccel = .55

[State 240, State]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げはずし 地上ふっとばし攻撃 
; Sander71113(Kyo Kusanagi/Goro Daimon/Ramon/Iori Yagami/NeoKyo/Chizuru Kagura/Lucky Glauber)
; Standing knockdown attack
[Statedef 833]
type = S
movetype = A
physics = S
poweradd = 50
juggle = 0
velset = 0,0
ctrl = 0

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3290,00]
type = BGPalfx
trigger1 = time = 3
add = 250,250,250
time = 1

[State 280, Changeanim]
type = Changeanim
trigger1 = time = 0
trigger1 = anim != 280
value = 280

[State 280, VS1]
type = velset
triggerall = (Name="Kyo Kusanagi" || Name="NeoKyo")
trigger1 = AnimElem = 5, = 0
x = 5

[State 280, VS2]
type = velset
triggerall =(Name="Kyo Kusanagi" || Name="NeoKyo")
trigger1 = AnimElem = 6, = 0
x = 0

[State 280, 3]
type = PlaySnd
triggerall = (Name="Kyo Kusanagi" || Name="NeoKyo")
trigger1 = AnimElem = 5
trigger1 = Random < 750
volume = 50
value = 5,2
channel = 0

[State 280, 4]
type = PlaySnd
triggerall = (Name="Kyo Kusanagi" || Name="NeoKyo")
trigger1 = AnimElem = 5
value = 220,2

[State 280, 5]
type = HitDef
triggerall = (Name="Kyo Kusanagi" || Name="NeoKyo")
trigger1 = time = 0
attr = S, NA
damage = 0
hitflag = MAF
guardflag = MA
animtype = DIAGUP
ground.animtype = low
pausetime = 11,13
sparkno = S1037
guard.sparkno = S1039
sparkxy = 6,-71
hitsound = S280,0
guardsound = S200,3
ground.velocity = -4,-9
air.velocity = -4,-6
guard.velocity = -12
fall = 1
fall.recovertime = 35
guard.velocity = -12
getpower = 21,21
givepower = 21,21
fall.yvelocity = -3.4
guard.pausetime = 11,11
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
yaccel = .55

[State 280, 3]
type = PlaySnd
triggerall = Name="Goro Daimon"
trigger1 = AnimElem = 1
trigger1 = Random < 750
volume = 50
value = 5,2
channel = 0

[State 280, 4]
type = PlaySnd
triggerall = Name="Goro Daimon"
trigger1 = AnimElem = 5
value = 220,2

[State 280, 5]
type = HitDef
triggerall = Name="Goro Daimon"
trigger1 = AnimElem = 4, = 1
attr = S, NA
damage = 0
hitflag = MAF
guardflag = MA
animtype = Hard
ground.animtype = low
pausetime = 10,12
sparkno = S1037
guard.sparkno = S1039
sparkxy = -5,-71
hitsound = S280,0
guardsound = S200,3
ground.velocity = -3.5,-8
air.velocity = -3.5,-7
guard.velocity = -11
fall = 1
fall.recovertime = 35
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 20,20
givepower = 20,20
fall.yvelocity = -3.4
guard.pausetime = 10,10
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
yaccel = .55

[State 280, 3]
type = PlaySnd
triggerall = Name="Ramon"
trigger1 = AnimElem = 5
trigger1 = Random < 750
volume = 50
value = 5,6
channel = 0

[State 280, 4]
type = PlaySnd
triggerall = Name="Ramon"
trigger1 = AnimElem = 5
value = 220,2

[State 280, 5]
type = HitDef
triggerall = Name="Ramon"
trigger1 = AnimElem = 9
attr = S, NA
damage = 0
hitflag = MAF
guardflag = MA
animtype = Hard
ground.animtype = low
pausetime = 10,12
sparkno = S1037
guard.sparkno = S1039
sparkxy = 6,-71
hitsound = S280,0
guardsound = S200,3
ground.velocity = -4,-9
air.velocity = -4,-6
guard.velocity = -11
fall = 1
fall.recovertime = 35
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 20,20
givepower = 20,20
yaccel = .55

[State 280, Posadd1]
type = posadd
triggerall = Name="Ramon"
trigger1 = AnimElem = 19
trigger2 = Animelem = 20
trigger3 = animelem = 21
trigger4 = animelem = 22
x = 8

[State 280, EnvShake]
type = EnvShake
triggerall = Name="Ramon"
trigger1 = animelem = 15
time = 2

[State 280, snd]
type = PlaySnd
triggerall = Name="Ramon"
trigger1 = animelem = 15
trigger2 = animelem = 17
value = F7, 0 
volume = 75

[State 280, 3]
type = PlaySnd
triggerall = Name="Iori Yagami"
trigger1 = AnimElem = 1
trigger1 = Random < 750
volume = 0
value = 5,3
channel = 0

[State 280, 4]
type = PlaySnd
triggerall = Name="Iori Yagami"
trigger1 = AnimElem = 2
value = 220,2

[State 280, 5]
type = HitDef
triggerall = Name="Iori Yagami"
trigger1 = AnimElem = 3, = 1
attr = S, NA
damage = 0
hitflag = MAF
guardflag = MA
animtype = Hard
ground.animtype = low
pausetime = 10,12
sparkno = S1037
guard.sparkno = S1039
sparkxy = -5,-71
hitsound = S280,0
guardsound = S200,3
ground.velocity = -4.5,-8
air.velocity = -4.5,-7
guard.velocity = -11
fall = 1
fall.recovertime = 35
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 20,20
givepower = 21,21
fall.yvelocity = -3.4
guard.pausetime = 10,10
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
yaccel = .55

[State 280, Posadd1]
type = posadd
triggerall = Name="Iori Yagami"
trigger1 = Animelem = 3
x = 7

[State 280, Posadd1]
type = velset
triggerall = Name="Iori Yagami"
trigger1 = animelem = 4, = 0
x = 5

[State 280, Posadd1]
type = velset
triggerall = Name="Iori Yagami"
trigger1 = animelem = 4, = 1
x = 3

[State 280, Posadd1]
type = velset
triggerall = Name="Iori Yagami"
trigger1 = animelem = 4, = 2
x = 2

[State 280, Posadd1]
type = velset
triggerall = Name="Iori Yagami"
trigger1 = animelem = 4, = 3
x = 1

[State 280, Posadd1]
type = velset
triggerall = Name="Iori Yagami"
trigger1 = animelem = 5
x = 0

[State 240, 2]
type = width
triggerall = Name="Chizuru Kagura"
trigger1 = animelem = 5, >=0
player = 35,20

[State 200, 1]
type = PlaySnd
triggerall = Name="Chizuru Kagura"
trigger1 = animelem = 5
trigger1 = random < 750
volume = 50
value = 2,1

[State 270, 2]
type = PlaySnd
triggerall = Name="Chizuru Kagura"
trigger1 = animelem = 5
value = 220,2

[State 280, 3]
type = HitDef
triggerall = Name="Chizuru Kagura"
trigger1 = AnimElem = 6
attr = S, NA
damage = 0
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = S1037
guard.sparkno = S1039
sparkxy = -11,-65
hitsound = S280,0
guardsound = S200,3
ground.velocity = -4.5,-3.5
air.velocity = -4,-4
airguard.velocity = -4,-2
fall = 1
fall.recover = 0
guard.velocity = -8.9
getpower = 30,30
givepower = 30,30

[State 240, 2]
type = posadd
triggerall = Name="Lucky Glauber"
trigger1 = animelem = 4, = 3
trigger2 = animelem = 4, = 4
trigger3 = animelem = 4, = 5 
x = 5

[State 240, 2]
type = width
triggerall = Name="Lucky Glauber"
trigger1 = animelem = 5, >=0
player = 35,20

[State 200, 1]
type = PlaySnd
triggerall = Name="Lucky Glauber"
trigger1 = animelem = 5
trigger1 = random < 750
volume = 50
value = 2,1
channel = 0

[State 270, 2]
type = PlaySnd
triggerall = Name="Lucky Glauber"
trigger1 = animelem = 5
value = 220,2

[State 280, 3]
type = HitDef
triggerall = Name="Lucky Glauber"
trigger1 = AnimElem = 6
attr = S, NA
damage = 0
hitflag = MAF
guardflag = MA
pausetime = 16,16
sparkno = S1037
guard.sparkno = S1039
sparkxy = 6,-65
hitsound = S280,0
guardsound = S200,3
ground.velocity = -3,-3.5
air.velocity = -4,-4
airguard.velocity = -4,-2
fall = 1
fall.recover = 0
guard.velocity = -8.9
getpower = 30,20
givepower = 30,20

[State 280, 6]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げはずし 地上ふっとばし攻撃 
; NeoGouki(Shermie/Sie Kensou/Chris)
; Standing knockdown attack
[Statedef 834]
type = S
movetype = A
physics = S
anim = 280
poweradd = 0
velset = 0
ctrl = 0

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3290,00]
type = BGPalfx
trigger1 = time = 3
add = 250,250,250
time = 1

[State 280, 1]
type = PlaySnd
triggerall = Name="Shermie"
trigger1 = Time = 0
value = 220,0

[State 280, 2]
type = PlaySnd
triggerall = Name="Shermie"
trigger1 = Time = 0
value = 240,1

[State 280, 6]
type = HitDef
triggerall = Name="Shermie"
trigger1 = AnimElem = 7
attr = S, NA
damage = 0
getpower = 20
givepower = 20
animtype = back
guardflag = MA
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-80
hitsound = S280,2
guardsound = S200,3
pausetime = 12,12
ground.velocity = -4,-4.5
air.velocity = -4,-4
fall = 1
fall.recover = 0

[State 280, 1]
type = PlaySnd
triggerall = Name="Sie Kensou"
trigger1 = AnimElem = 4
trigger1 = random < 250
value = 280,0

[State 280, 2]
type = PlaySnd
triggerall = Name="Sie Kensou"
trigger1 = AnimElem = 4
value = 220,2

[State 280, 3]
type = HitDef
triggerall = Name="Sie Kensou"
trigger1 = AnimElem = 5
attr = S, NA
damage = 0
animtype = back
guardflag = MA
sparkno = S3110
guard.sparkno = S3160
sparkxy = -10,-65
hitsound = S1200,1
guardsound = S200,1
pausetime = 12,12
ground.velocity = -4,-4.5
air.velocity = -4,-4
fall = 1
fall.recover = 0
getpower = 20
givepower = 20

[State 280, 1]
type = PlaySnd
triggerall = Name="Chris"
trigger1 = AnimElem = 1, = 1
value = 220,0
channel = 1

[State 280, 2]
type = PlaySnd
triggerall = Name="Chris"
trigger1 = AnimElem = 2
value = 240,1
channel = 0

[State 280, 6]
type = HitDef
triggerall = Name="Chris"
trigger1 = AnimElem = 5
attr = S, NA
damage = 0
getpower = 20
givepower = 20
animtype = back
hitflag = MA
guardflag = MA
sparkno = S3210
guard.sparkno = S3260
sparkxy = -10,-75
hitsound = S280,2
guardsound = S200,3
pausetime = 12,12
ground.velocity = -3,-5
air.velocity = -3,-5
fall = 1
fall.recover = 0

[State 280, 6]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げはずし 地上ふっとばし攻撃 
;Mouser(Ryo Sakazaki/Takuma Sakazaki/Ralf Jones/K9999)
[Statedef 835]
type = S
movetype = A
physics = S
velset = 0
ctrl = 0
juggle = 0

[State 280, Changeanim]
type = Changeanim
triggerall = time = 0
trigger1 = Name="Ryo Sakazaki"
trigger2 = Name="Ralf Jones"
trigger3 = Name="K9999"
value = 300

[State 280, Changeanim]
type = Changeanim
triggerall = time = 0
trigger1 = Name="Takuma Sakazaki"
value = 300

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3290,00]
type = BGPalfx
trigger1 = time = 3
add = 250,250,250
time = 1

[State 300, 1]
type = HitDef
triggerall = Name="Ryo Sakazaki"
trigger1 = AnimElem = 6
attr = S, NA
damage = 0
animtype = Hard
guardflag = M
hitflag = MAF
getpower = 20,20
givepower = 20
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8070
sparkxy = -10, -65
hitsound = S5,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -4.5,-4
air.velocity = -4.5,-4
guard.velocity = -10
fall = 1

[State 300, 1]
type = posadd
triggerall = Name="Ralf Jones"
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
x = 20

[State 300, 1]
type = HitDef
triggerall = Name="Ralf Jones"
trigger1 = AnimElem = 6
attr = S, NA
damage = 0
animtype = Hard
guardflag = M
hitflag = MAF
getpower = 20,20
givepower = 20
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8070
sparkxy = -10, -75
hitsound = S5,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -4.5,-4
air.velocity = -4.5,-4
guard.velocity = -10
fall = 1

[State 300, 1]
type = HitDef
triggerall = Name="K9999"
trigger1 = AnimElem = 6
attr = S, NA
damage = 0
animtype = Up
guardflag = M
hitflag = MAF
getpower = 20,20
givepower = 20
pausetime = 12,12
sparkno = S8020
guard.sparkno = S8070
sparkxy = -10, -95
hitsound = S5,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -4.5,-4
air.velocity = -4.5,-4
guard.velocity = -10
fall = 1

[State 300, 1]
type = BGPalFX
triggerall = Name="K9999"
trigger1 = MoveHit
time = 1
add = 255,255,255
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = PlaySnd
triggerall = Name="Takuma Sakazaki"
trigger1 = AnimElem = 1 && Random % 10 < 8
value = 200,3

[State 200, 1]
type = PlaySnd
triggerall = Name="Takuma Sakazaki"
trigger1 = AnimElem = 1
value = 300,1

[State 320, 1]
type = HitDef
triggerall = Name="Takuma Sakazaki"
trigger1 = AnimElem = 3
attr = S, NA
damage    = 0
animtype = Heavy
getpower = 20
givepower = 20
guardflag = MA
hitflag = MAF
pausetime = 12,14
sparkno = S8010
guard.sparkno = S8050
sparkxy = -10,-80
hitsound = S5,4
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -5,-5.5
guard.velocity = -6
air.velocity = -5,-5
fall = 1

[State 300, 2]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 投げはずし （投げ側やられ）
[Statedef 840]
type = S
movetype = H
physics = N
anim = 830
ctrl = 0

[State 820, PosSet]
type = PosSet
trigger1 = Pos Y !=0
trigger1 = Time = 0
y = 0



[State 600,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; （Ｋ通常投げ）
[Statedef 850]
type = S
movetype = A
physics = S
ctrl = 0
anim = 850
velset = 0, 0
juggle  = 8

[State 850,Hitdef]
type = Hitdef
trigger1 = Time = 0
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 5,dodge
getpower = 120
givepower = 110
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 860
p2stateno = 870
p2getp1state = 1
hitsound = S900, 0
fall = 1
air.fall = 1
fall.recover = 0
snap = 35,0
animtype = Hard
ground.velocity = 2.5,-4.0
air.velocity = 3.5,-4.0

[State 850,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 230

;-------------------------------------------------------------------------------
; （成功）
[Statedef 860]
type = S
movetype = A
physics = N
anim = 810
velset = 0, 0
poweradd = 70

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3220,Width]
type = Width
trigger1 = AnimTime != 0
edge = 30,30
player = 0

[State 3220,Width]
type = Width
trigger1 = AnimTime = 0
edge = 0
player = 0

[State 810,Turn]
type = Turn
trigger1 = AnimElem = 4

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 2100
pos = 38,-76
postype = P1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 810, 4]
type = ChangeState
trigger1 = time>=1
trigger1 = time<=12
trigger1 = P2Stateno!=870
value = 840
ctrl = 0

[State -2,PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = 500, IfElse(Random<200,1,IfElse(Random<500,11,21))

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 810, TargetBind1]
type = TargetBind
trigger1 = AnimElem = 2, < 0
pos = 38, 0

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 4, < 0
pos = 48, 0

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 5, < 0
pos = 52, -84

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 6, < 0
pos = 47, -85

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 6, >= 0
trigger1 = AnimElem = 7, < 0
pos = 24, -101

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 7, >= 0
trigger1 = AnimElem = 8, < 0
pos = -23, -91

[State 810, TargetBind2]
type = TargetBind
trigger1 = AnimElem = 8
pos = -35, -8
time = 1

[State explod];足元１
type = Explod
trigger1 = AnimElem = 8,=2
anim = 6012
id = 6012
pos = -53,5
sprpriority = 0
ownpal = 1
shadow = 0
scale = 1.1, 1.1

[State 1000, EnvShake] ;振動
type = EnvShake
trigger1 = AnimElem = 8
time = 12
ampl = 8
freq = 175
ignorehitpause = 1

[State -2,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,=5
value = 900,2

[State -2,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7,=2
value = 900, 6
volume = 256

[State 810, TargetLifeAdd] 
type = TargetLifeAdd
trigger1 = AnimElem = 8
value = Ceil(-95)

[State 810,Turn]
type = Turn
trigger1 = AnimElem = 9

[State 810, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; （投げられ側）
[Statedef 870]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = 1

[State 870, HitBy]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

[State 810,Turn]
type = Turn
trigger1 = AnimElem = 3

[State 820,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 5000, 1]
type = ChangeAnim2
triggerall = (AuthorName = "ActJapan" && Name = "RyuKoAct")
trigger1 = time = 0
value = 820+Var(36)*10000

[State 5000, 1]
type = ChangeAnim2
triggerall = !(AuthorName = "ActJapan" && Name = "RyuKoAct")
triggerall = AuthorName = "ActJapan" && Name = "Robert Garcia"
trigger1 = time = 0
value = 825

[State 5000, 1]
type = ChangeAnim2
triggerall = !(AuthorName = "ActJapan" && Name = "RyuKoAct")
triggerall = !(AuthorName = "ActJapan" && Name = "Robert Garcia")
triggerall = AuthorName = "ActJapan"
trigger1 = time = 0
value = 820

[State 5000, 1]
type = ChangeAnim2
triggerall = !AuthorName = "ActJapan"
trigger1 = time = 0
value = 824

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "ActJapan" && (Name = "RyuKoAct" || Name = "Ryo Sakazaki" || Name = "Robert" || Name = "King" || Name = "Kensou"))
trigger1 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
trigger2 = (AuthorName = "ActJapan" && (Name = "Yuri Sakazaki" || Name = "Takuma Sakazaki" || Name = "Ralf"))
trigger2 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<300)
trigger3 = (AuthorName = "ActJapan" && Name = "Blue Mary")
trigger3 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<350)
trigger4 = (AuthorName = "M.M.R." && (Name = "King" || Name = "Vice" || Name = "Mai Shiranui" || Name = "Hinako Shijo" || Name = "Athena Asamiya"))
trigger4 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
trigger5 = (AuthorName = "M.M.R." && (Name = "Kasumi Todo" || Name = "Chang Koehan" || Name = "Maxima" || Name = "Foxy"))
trigger5 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
trigger6 = (AuthorName = "Tin" && (Name = "Tin's Leona" || Name = "Tin's May Lee"))
trigger6 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(10)!=0 && time = 10 && Random<250)
trigger7 = (AuthorName = "Tin" && (Name = "Tin's Clark" || Name = "Tin 2002_rugal"))
trigger7 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(1)!=0 && time = 10 && Random<250)
trigger8 = AuthorName = "ActJapan"
trigger8 = (AuthorName = "ActJapan" && !(Name = "RyuKoAct" || Name = "Ryo Sakazaki" || Name = "Robert" || Name = "King" || Name = "Kensou"))
trigger8 = (AuthorName = "ActJapan" && !(Name = "Yuri Sakazaki" || Name = "Takuma Sakazaki" || Name = "Ralf"))
trigger8 = (AuthorName = "ActJapan" && Name != "Blue Mary")
trigger8 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(30)!=0 && time = 10 && Random<250)
value = 830

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Tin" && (Name = "Tin's Ramon" || Name = "Tin's Another Ramon"))
trigger1 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(1)!=0 && time = 10 && Random<250)
value = 831

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Deuce" && (Name = "Benimaru Nikaido"))
trigger1 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(9)!=0 && time = 10 && Random<250)
value = 832

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Sander71113" && (Name = "Kyo Kusanagi" || Name = "NeoKyo" || Name = "Goro Daimon"))
trigger1 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(9)!=0 && time = 10 && Random<250)
trigger2 = (AuthorName = "Sander71113" && (Name = "Iori Yagami" || Name = "Ramon" || Name = "Chizuru Kagura" || Name = "Lucky Glauber"))
trigger2 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11) || (Var(9)!=0 && time = 10 && Random<250)
value = 833

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "NeoGouki" && (Name = "Shermie" || Name = "Sie Kensou" || Name="Chris"))
trigger1 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11)
value = 834

[State 830,ChangeState]
type = ChangeState
trigger1 = (AuthorName = "Mouser" && (Name = "Ryo Sakazaki" || Name = "Takuma Sakazaki" || Name = "Ralf Jones" || Name = "K9999"))
trigger1 = (((Command = "holdfwd" && Command = "b" ) || (Command = "holdback" && Command = "b")) && time >= 1 && time <= 11)
value = 835

[State 810, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 875
ctrl = 0

;-------------------------------------------------------------------------------
; （投げられ側）prt2
[Statedef 875]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
poweradd = 20

[State 820, HitBy]
type = HitBy
Trigger1 = 1
value = SCA
time = 1

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = AuthorName = "ActJapan" && Name = "RyuKoAct"
trigger1 = time = 0
value = 5160+Var(36)*10000

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = !(AuthorName = "ActJapan" && Name = "RyuKoAct")
trigger1 = time = 0
value = 5160

[State 5101, 3]
type = VelSet
trigger1 = Time = 0
x = 0.5
y = -6.5

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = SelfState
value = 5110


;=====================================================================
; 特殊動作
;=====================================================================
; 気合溜め
[Statedef 990]
type = S
movetype = I
physics = S
anim = 990
velset = 0
ctrl = 0

[State 990, 気力エフェクト]
type = Explod
trigger1 = time = 15
anim = 991
ID = 991
pos = -3,-69
scale = 0.98, 1.3
bindtime = -1
removetime = -1
sprpriority = -3
ontop = 0
shadow = -1
ownpal = 1
removeongethit = 1

[State 990, 3]
type = PowerAdd
trigger1 = (TeamMode = single || TeamMode = turns)
trigger1 = power < const(data.power)
trigger2 = TeamMode = simul
value = 10

[State 990, 4]
type = PlaySnd
trigger1 = !Time
value = s900,26
channel = 0

[State 990, 5]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "hold_c"
trigger2 = command != "hold_z"
trigger3 = power >= const(data.power)
value = 999
ctrl = 0

[State 990, 5]
type = ChangeState
triggerall =var(59)>0 
trigger1 = p2bodydist X <= 180&&enemynear(var(57)),statetype != L && enemynear(var(57)),stateno != [5030,5210]
trigger2 = var(47)=1&&EnemyNear(var(57)),vel x > 5
trigger3 = EnemyNear(var(57)),vel x >= 8
trigger4 = InGuardDist||(Helper(35000),Var(41))||EnemyNear(var(57)),MoveType = A
trigger5 = roundstate != 2 || power >= const(data.power)
value = 999
ctrl = 0

;---------------------------------------------------------------------
; 気力溜め終了

[statedef 999]
type    = S
movetype= I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 999
sprpriority = 0

[State 999, 1]
type = stopsnd
trigger1 = 1
channel = 0

[State 990, 気力エフェクト消し]
type = RemoveExplod
trigger1 = 1
ID = 991

[State -1, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作（前）
[Statedef 4000]
type = S
movetype = I
physics = N
ctrl = 0
anim = 905
velset = 0, 0
poweradd = -1000

[State 4000,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 900, 19

[State 4050,PlaySnd]
type = PlaySnd
trigger1 = Time = 2
value = 900, 18

[State 3000,PalFx]
type = PalFx
trigger1 = Time = 1
add = 155,155,155
sinadd = 125,125,125,10
time = 2

[State a]
type = EnvColor
trigger1 = Time = 1
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State 4050,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5200, 0

[State 4050,PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = 900, 18

[State 4000,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4000,PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5.5

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 5.90

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 5.60

[State 4050,4]
type = VelSet
trigger1 = AnimElem = 7
x = 5

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0
1 = AnimElem = 8
x = 0

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 20
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 12,12,12
palcontrast = 130,130,130
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 4000,VarSet]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 4000,Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 4000,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 緊急回避動作（前）
[Statedef 4050]
type = S
movetype = I
physics = N
ctrl = 0
anim = 900
velset = 0, 0
sprpriority = 1

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = animelem = 7,<=0
value = SCA

[State 1];無敵の状態を作る
type = hitBy
trigger1 = animelem = 7,<=0
value = SCA,NT,ST,HT

[State 4050,PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5.3

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 5.7

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 5.4

[State 4050,4]
type = VelSet
trigger1 = AnimElem = 7
x = 5

[State 4050,VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4050,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5200, 0

[State 4000,Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 50, 4]
type = AfterImage
trigger1 = time = 1
time = 20
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 12,12,12
palcontrast = 130,130,130
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 4050,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作（後）
[Statedef 4100]
type = S
movetype = I
physics = N
ctrl = 0
anim = 910
velset = 0, 0

[State 4000,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 900, 19

[State 3000,PalFx]
type = PalFx
trigger1 = Time = 1
add = 155,155,155
sinadd = 125,125,125,10
time = 2

[State a]
type = EnvColor
trigger1 = Time = 1
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State 4100,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5200, 0

[State 4100,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4100,PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -5.05

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -4.65

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = -4.55

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 7
x = -2.2

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4600,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 20
length = 15
palbright = 40,40,40
palcontrast = 250,250,250
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 4100,VarSet]
type = VarSet
trigger1 = Time = 0
v = 4
value = 0

[State 4100,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 緊急回避動作（後）
[Statedef 4150]
type = S
movetype = I
physics = N
ctrl = 0
anim = 910
velset = 0, 0

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 20
trans = add1
timegap = 2
framegap = 2
length = 6
palbright = 12,12,12
palcontrast = 130,130,130
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 4150,PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -5.05

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -4.65

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = -4.55

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 7
x = -2.2

[State 4150,VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 4150,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5200, 0

[State 4150,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;
;---------------------------------------------------------------------
; ガードキャンセル吹っ飛ばし攻撃
[Statedef 4500]
type = S
movetype = A
physics = S
ctrl = 0
anim = 603
velset = 0, 0
poweradd = -1000

[State 4500,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 600,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 200, 2

[State 720, VelSet]
type = PosAdd
trigger1 = AnimElem = 1
x = 20

[State 720, VelSet]
type = PosAdd
trigger1 = AnimElem = 2
x = 13

[State explod];砂煙
type = Explod
trigger1 = animelem = 2
anim = 6011
id = 6011
pos = 5,0
sprpriority = -3
ontop = 0
shadow = -1
ownpal = 1
scale = 0.5,0.5

[State 3000,PalFx]
type = PalFx
trigger1 = Time = 1
add = 155,155,155
sinadd = 125,125,125,10
time = 2

[State a]
type = EnvColor
trigger1 = movecontact
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State 600,Hitdef]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage    = 100
getpower = 50 
givepower = 30
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 13,16
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-61
hitsound = S300, 4
guardsound = S0, 0
ground.type = high
ground.slidetime = 7
ground.hittime  = 15
guard.pausetime = 14,15
guard.slidetime = 25
guard.hittime  = 19
guard.velocity = -8.2
ground.velocity = -4.8,-4.2
air.velocity = -4.7,-4.5
fall = 1
air.fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=9

[State 4500,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 各種ジャンプ
[Statedef 40]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

[State -3, AI]
type = changestate
triggerall = var(59)>0
trigger1 = time = 0
value = 0
ctrl = 1

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

;前方向
[State 40,2]
type = VarSet
trigger1 = Command = "holdfwd"
trigger2 = Var(30)!=0 && Var(18)!=0
v = 27
value = 1

;後ろ
[State 40,3]
type = VarSet
trigger1 = Command = "holdback"
trigger1 = Var(30)=0
trigger2 = Command = "holdback"
trigger2 = Var(30)!=0 && Var(27)=0
v = 27
value = -1

'小ジャンプ
[State 40,VarSet]
type = VarSet
triggerall = AnimTime = 0
trigger1 = Command != "holdup"
trigger1 = Var(26)=0
trigger1 = Var(30)=0
trigger2 = Var(30)!=0 && Var(18)=2
trigger3 = Command != "holdup" && Var(27)=0
trigger3 = Var(26)=1
trigger3 = Var(30)=0
v = 25
value = 2

'中ジャンプ
[State 40,VarSet]
type = VarSet
triggerall = AnimTime = 0
trigger1 = Command != "holdup" && Var(27)!=0
trigger1 = Var(26)=1
trigger1 = Var(30)=0
trigger2 = Var(30)!=0 && Var(18)=1
trigger3 = PrevStateNo = 100 && Var(27) = 1
v = 25
value = 1

'大ジャンプ
[State 40,VarSet]
type = VarSet
triggerall = AnimTime = 0
trigger1 = Command = "holdup" && Var(27)!=0
trigger1 = Var(26)=1
trigger1 = Var(30)=0
trigger2 = Var(30)!=0 && Var(18)=3
v = 25
value = 3

'通常ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 0
trigger2 = PrevStateNo = 100 && Var(27) != 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x),Const(velocity.jump.fwd.x)))
y = Const(velocity.jump.y)

;中ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x)*1.1,Const(velocity.runjump.fwd.x)*1.1))
y = -6.5

'大ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 3
trigger2 = PrevStateNo = 100 && Var(27) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x),Const(velocity.runjump.fwd.x)))
y = Const(velocity.jump.y)*1.1

'小ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 2
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x)*0.9,Const(velocity.jump.fwd.x)*0.9))
y = -6.0

[State 40,9]
type = AfterImage
trigger1 = Var(25) = 1
trigger1 = AnimTime = 0
trigger2 = Var(25) = 3
trigger2 = AnimTime = 0
time = 16
length = 20
palbright = 40,40,40
palcontrast = 120,120,120
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(27)=1 && PrevStateNo = 100
trigger1 = AnimTime = 0
value = 2054
ctrl = 1

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=3
trigger1 = AnimTime = 0
value = 2050
ctrl = 1

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=1
trigger1 = AnimTime = 0
value = 2051
ctrl = 1

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=2
trigger1 = AnimTime = 0
value = 2053
ctrl = 1

[State 4600,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------
; AI用_小ジャンプ
[Statedef 41]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;小ジャンプ
[State 40,VarSet]
type = VarSet
trigger1 = AnimTime = 0
v = 25
value = 2

;前方向
[State 40,2]
type = VarSet
trigger1 = 1
v = 27
value = 1

'小ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 2
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x)*0.9,Const(velocity.jump.fwd.x)*0.9))
y = -6.0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=2
trigger1 = AnimTime = 0
value = 2053
ctrl = 1

;---------------------------------------------------------------------
; AI用_中ジャンプ
[Statedef 42]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;中ジャンプ
[State 40,VarSet]
type = VarSet
trigger1 = AnimTime = 0
v = 25
value = 1

;前方向
[State 40,2]
type = VarSet
trigger1 = 1
v = 27
value = 1

;後ろ
[State 40,3]
type = null;VarSet
trigger1 = Command = "holdback"
trigger1 = Var(30)=0
trigger2 = Command = "holdback"
trigger2 = Var(30)!=0 && Var(27)=0
v = 27
value = -1

[State 40,9]
type = AfterImage
trigger1 = Var(25) = 1
trigger1 = AnimTime = 0
trigger2 = Var(25) = 3
trigger2 = AnimTime = 0
time = 16
length = 20
palbright = 40,40,40
palcontrast = 120,120,120
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

;中ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x)*1.1,Const(velocity.runjump.fwd.x)*1.1))
y = -6.5

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=1
trigger1 = AnimTime = 0
value = 2051
ctrl = 1

;---------------------------------------------------------------------
; AI用_大ジャンプ
[Statedef 43]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;大ジャンプ
[State 40,VarSet]
type = VarSet
trigger1 = AnimTime = 0
v = 25
value = 3

;前方向
[State 40,2]
type = VarSet
trigger1 = 1
v = 27
value = 1

[State 40,9]
type = AfterImage
trigger1 = Var(25) = 1
trigger1 = AnimTime = 0
trigger2 = Var(25) = 3
trigger2 = AnimTime = 0
time = 16
length = 20
palbright = 40,40,40
palcontrast = 120,120,120
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

'大ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 3
trigger2 = PrevStateNo = 100 && Var(27) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x),Const(velocity.runjump.fwd.x)))
y = Const(velocity.jump.y)*1.1

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=3
trigger1 = AnimTime = 0
value = 2050
ctrl = 1

;---------------------------------------------------------------------
; AI用_垂直小ジャンプ
[Statedef 44]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;小ジャンプ
[State 40,VarSet]
type = VarSet
trigger1 = AnimTime = 0
v = 25
value = 2

;垂直方向
[State 40,2]
type = VarSet
trigger1 = 1
v = 27
value = 0

'小ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 2
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x)*0.9,Const(velocity.jump.fwd.x)*0.9))
y = -6.0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=2
trigger1 = AnimTime = 0
value = 2053
ctrl = 1

;---------------------------------------------------------------------
; AI用_後方小ジャンプ
[Statedef 45]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;小ジャンプ
[State 40,VarSet]
type = VarSet
trigger1 = AnimTime = 0
v = 25
value = 2

;前方向
[State 40,2]
type = VarSet
trigger1 = 1
v = 27
value = -1

'小ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 2
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.jump.back.x)*0.9,Const(velocity.jump.fwd.x)*0.9))
y = -6.0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=2
trigger1 = AnimTime = 0
value = 2053
ctrl = 1

;---------------------------------------------------------------------
; AI用_後方中ジャンプ
[Statedef 46]
type = S
movetype = I
physics = S
anim = 40
velset = 0, 0
ctrl = 0

;投げに対して無敵
[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40,0]
type = VarSet
trigger1 = Var(28) = 1
v = 26
value = 1

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 27
value = 0

[State 40,1]
type = VarSet
trigger1 = Time = 0
v = 18
value = 0

;中ジャンプ
[State 40,VarSet]
type = VarSet
trigger1 = AnimTime = 0
v = 25
value = 1

;前方向
[State 40,2]
type = VarSet
trigger1 = 1
v = 27
value = -1

;後ろ
[State 40,3]
type = null;VarSet
trigger1 = Command = "holdback"
trigger1 = Var(30)=0
trigger2 = Command = "holdback"
trigger2 = Var(30)!=0 && Var(27)=0
v = 27
value = -1

[State 40,9]
type = AfterImage
trigger1 = Var(25) = 1
trigger1 = AnimTime = 0
trigger2 = Var(25) = 3
trigger2 = AnimTime = 0
time = 16
length = 20
palbright = 40,40,40
palcontrast = 120,120,120
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

;中ジャンプ
[State 40,VelSet]
type = VelSet
triggerall = AnimTime = 0
trigger1 = PrevStateNo != 100 && Var(25) = 1
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x)*1.1,Const(velocity.runjump.fwd.x)*1.1))
y = -6.5

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=1
trigger2 = Var(25)=3
value = 41, 0

[State 40,PlaySnd]
type = PlaySnd
triggerall = AnimTime = 0
trigger1 = Var(25)=0
trigger2 = Var(25)=2
value = 40, 0

[State 4600,10]
type = ChangeState
trigger1 = Var(25)=1
trigger1 = AnimTime = 0
value = 2051
ctrl = 1


;---------------------------------------------------------------------------
; 大ジャンプ 始め
[Statedef 2050]
type    = A
movetype = I
physics = A

;大ジャンプ
[State 40,ChangeState]
type = ChangeState
triggerall = Time <= 1
trigger1 = Var(25) != 3 && Command = "holdup" && Var(27) != 0 && Var(30) = 0
value = 2054

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 61, ifelse((vel x)>0, 62, 63))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 中ジャンプ 始め
[Statedef 2051]
type    = A
movetype = I
physics = A

;中ジャンプ
[State 40,ChangeState]
type = ChangeState
triggerall = Time <= 1
trigger1 = Var(25) != 1 && Command != "holdup" && Var(27) != 0 && Var(30) = 0
value = 2055

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 41, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; ダッシュ中ジャンプ
[Statedef 2052]
type    = A
movetype = I
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 41, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3


;---------------------------------------------------------------------------
; 小ジャンプ
[Statedef 2053]
type    = A
movetype = I
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 大ジャンプ 決定
[Statedef 2054]
type    = A
movetype = I
physics = A

;大ジャンプ
[State 40,VelSet]
type = VelSet
trigger1 = Time = 0
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x),Const(velocity.runjump.fwd.x)))
y = (Const(velocity.jump.y)*1.1)+Const(Movement.yaccel)

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 61, ifelse((vel x)>0, 62, 63))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 中ジャンプ 決定
[Statedef 2055]
type    = A
movetype = I
physics = A

;中ジャンプ
[State 40,VelSet]
type = VelSet
trigger1 = Time = 0
x = IfElse(Var(27) = 0,0,IfElse(Var(27) = -1,Const(velocity.runjump.back.x)*1.1,Const(velocity.runjump.fwd.x)*1.1))
y = -6.5+Const(Movement.yaccel)

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 41, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3


;---------------------------------------------------------------------------
; 通常ジャンプ
[Statedef 50]
type    = A
movetype = I
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 61, ifelse((vel x)>0, 62, 63))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0, 0

[State 320,3]
type = VarSet
trigger1 = Time = 0
v = 17
value = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ダウン回避
[Statedef 4200]
type = S
movetype = I
physics = N
anim = 5200
ctrl = 0

[State 40,9]
type = AfterImage
trigger1 = 1
time = 1
length = 20
palbright = 40,40,40
palcontrast = 120,120,120
palpostbright = -80,-80,-80
timegap = 1
flamegap = 1
trans = add1

[State 5201,4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5201,4]
type = NotHitBy
trigger1 = AnimTime = 0
value = SCA
time=2

[State 5201,0]
type = VelSet
trigger1 = Time = 0
x = -4.5
y = 0

[State 5201,1]
type = VelAdd
trigger1 = Time >= 16
x = .80

[State 5201,2]
type = VelSet
trigger1 = Time > 16
trigger1 = Vel X >= 0
x = 0
y = 0

[State 5201,3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 500, 5

[State 5201,6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 22

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1
;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5950]
type    = S
movetype= H
physics = S
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 150

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5951

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 130
trigger1 = GetHitVar(animtype)=[0,1]
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 130
trigger1 = GetHitVar(animtype)=[2,2]
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 130
trigger1 = GetHitVar(animtype)=[3,5]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5951]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = Time = 10
value = 5951

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = Anim = 5951
trigger1 = AnimTime = 0
value = 5150
ctrl = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5955]
type    = C
movetype= H
physics = C
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 151

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5956

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 130
trigger1 = GetHitVar(animtype)=[0,1]
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 130
trigger1 = GetHitVar(animtype)=[2,2]
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 130
trigger1 = GetHitVar(animtype)=[3,5]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5956]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = Time = 10
value = 5951

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = Anim = 5951
trigger1 = AnimTime = 0
value = 5150
ctrl = 0

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = !(PrevStateno = 5951 || PrevStateno = 5956)
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
triggerall = !(PrevStateno = 5951 || PrevStateno = 5956)
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
triggerall = !(PrevStateno = 5951 || PrevStateno = 5956)
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = !(PrevStateno = 5951 || PrevStateno = 5956)
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = PrevStateno = 5951 || PrevStateno = 5956
trigger1 = Time = 0
value = 5111

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1




