;---------------------------------------------------------------------------
; ここからは超必殺技のステート
;---------------------------------------------------------------------------
; 絶！激拳
; CNS レベル: 中級

[Statedef 3000]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = -1000
velset   = 0,0
anim     = 3000
ctrl     = 0
sprpriority = 3

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 3000, SC]
type = VarSet
trigger1 = (prevstateno = [1000,2999])
var(11) = 1

[State 3000, スキルゲージ消費]
type = VarAdd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
trigger1 = var(11) = 1
trigger1 = time = 0
fvar(35) = -101

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(10) < 0
value = SCA

[State 3000, 点滅]
type = palfx
trigger1 = var(11) = 1
trigger1 = time = 0
time = 5
add = 230,230,230

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
trigger1 = var(31) := 1
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,28]
flag = NoFG
flag2 = NOBG
flag3 = GlobalNoShadow
ignorehitpause = 1

[State 3000, 超必殺技発動のエフェクト表示]
type = Helper
trigger1 = AnimElem = 1
name = "DM"
stateno = 7000
id = 7000
pos = 12, -75
postype = p1
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 3000, スーパーキャンセル]
type = Helper
triggerall = Numhelper(7100)=0
trigger1 = var(11) = 1
trigger1 = AnimElem = 1
helpertype = normal
name = "SC"
stateno = 7100
ID = 7100
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 3000, ChangeAnim]
type = ChangeAnim
triggerall = var(10) = 1
trigger1 = Time = 0
value = 3001

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,18
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 11
value = s10,19
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 13
value = s12,5

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 10
anim = 6057
postype = P1
pos = 0, 0
persistent = 0
sprpriority = 5
ownpal = 1

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 14
anim = 3005
postype = P1
pos = 0, 0
bindtime = -1
sprpriority = 5
ownpal = 0
removeongethit = 1
ignohitpause = 1

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 12

[State 3000, VelMul]
type = VelMul
trigger1 = AnimElemTime(14) >= 0
x = .92

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 22
x = 0

[State 3000, ヒット定義]
type = HitDef
triggerall = var(12) = 0
trigger1 = AnimElem = 14
attr = S, HA
damage    = floor(ifelse(var(6),42,34)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype = Diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 32-(helper(40000),var(0)),32
sparkno = s6002
guard.sparkno = s6012
sparkxy = -20, -70
hitsound = s1,4
guardsound = s2,1
ground.type = High
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6,-9
guard.velocity = -10
airguard.velocity = -4,-1
air.type = High
air.velocity = -6,-9
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 600
envshake.time = 32
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92

[State 3000, TargetState]
type = TargetState
trigger1 = var(6) && movehit = 1
value = 5605
ignorehitpause = 1
persistent = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 強絶！激拳
; CNS レベル: 中級

[Statedef 3010]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = -1000
velset   = 0,0
anim     = 3010
ctrl     = 0
sprpriority = 3

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 3000, SC]
type = VarSet
trigger1 = (prevstateno = [1000,2999])
var(11) = 1

[State 3000, スキルゲージ消費]
type = VarAdd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
trigger1 = var(11) = 1
trigger1 = time = 0
fvar(35) = -101

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(10) < 0
value = SCA

[State 3000, 点滅]
type = palfx
trigger1 = var(11) = 1
trigger1 = time = 0
time = 5
add = 230,230,230

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
trigger1 = var(31) := 1
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,28]
flag = NoFG
flag2 = NOBG
flag3 = GlobalNoShadow
ignorehitpause = 1

[State 3010, 超必殺技発動のエフェクト表示]
type = Helper
trigger1 = AnimElem = 1
name = "DM"
stateno = 7000
id = 7000
pos = 12, -75
postype = p1
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 3010, スーパーキャンセル]
type = Helper
triggerall = Numhelper(7100)=0
trigger1 = var(11) = 1
trigger1 = AnimElem = 1
helpertype = normal
name = "SC"
stateno = 7100
ID = 7100
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 3000, ChangeAnim]
type = ChangeAnim
triggerall = var(10) = 1
trigger1 = Time = 0
value = 3011

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,18
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 11
value = s10,19
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 13
value = s12,5

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 10
anim = 6057
postype = P1
pos = 0, 0
persistent = 0
sprpriority = 5
ownpal = 1

[State 3000, エフェクト表示]
type = Explod
trigger1 = AnimElem = 14
anim = 3005
postype = P1
pos = 0, 0
bindtime = -1
sprpriority = 5
ownpal = 0
removeongethit = 1
ignohitpause = 1

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 12

[State 3000, VelMul]
type = VelMul
trigger1 = AnimElemTime(14) >= 0
x = .92

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 22
x = 0

[State 3000, ヒット定義]
type = HitDef
triggerall = var(12) = 0
trigger1 = AnimElem = 14
attr = S, HA
damage    = floor(ifelse(var(6),42,34)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype = Diagup
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 32-(helper(40000),var(0)),32
sparkno = s6002
guard.sparkno = s6012
sparkxy = -20, -70
hitsound = s1,4
guardsound = s2,1
ground.type = High
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6,-9
guard.velocity = -10
airguard.velocity = -4,-1
air.type = High
air.velocity = -6,-9
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 600
envshake.time = 32
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92

[State 3000, TargetState]
type = TargetState
trigger1 = var(6) && movehit = 1
value = 5605
ignorehitpause = 1
persistent = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 虎豹連撃
; CNS レベル: 中級

[Statedef 3100]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = -1000
velset   = 0,0
anim     = 3100
ctrl     = 0
sprpriority = 3

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 3000, SC]
type = VarSet
trigger1 = (prevstateno = [1000,2999])
var(11) = 1

[State 3000, スキルゲージ消費]
type = VarAdd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
trigger1 = var(11) = 1
trigger1 = time = 0
fvar(35) = -101

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
value = SCA

[State 3000, 点滅]
type = palfx
trigger1 = var(11) = 1
trigger1 = time = 0
time = 5
add = 230,230,230

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
trigger1 = var(31) := 1
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,28]
flag = NoFG
flag2 = NOBG
flag3 = GlobalNoShadow
ignorehitpause = 1

[State 3100, 超必殺技発動のエフェクト表示]
type = Helper
trigger1 = AnimElem = 1
name = "DM"
stateno = 7000
id = 7000
pos = 0,-104
postype = p1
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 3100, スーパーキャンセル]
type = Helper
triggerall = Numhelper(7100)=0
trigger1 = var(11) = 1
trigger1 = AnimElem = 1
helpertype = normal
name = "SC"
stateno = 7100
ID = 7100
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 99
pausemovetime = 99
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 3000, ChangeAnim]
type = ChangeAnim
triggerall = var(10) = 1
trigger1 = Time = 0
value = 3101

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,20
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s0,4

[State 3100, ガード不能再現]
type = VarSet
triggerall = var(10) = 1
trigger1 = time = [0,1]
trigger1 = numenemy
var(33) = p2stateno = [120,155]

[State 3100, ガード不能再現]
type = AssertSpecial
triggerall = var(10) = 1
trigger1 = !var(33)
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
flag = unguardable
ignorehitpause = 1

[State 3000, ヒット定義]
type = HitDef
triggerall = var(12) = 0
trigger1 = AnimElem = 2
attr = S, HA
damage    = floor(ifelse(var(6),14,11)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype  = Hard
air.animtype = back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 16-(helper(40000),var(0)),16
sparkno = s6002
guard.sparkno = s6012
sparkxy = -25, -70
hitsound = s1,4
guardsound = s2,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = 0
guard.velocity = -9
air.type = High
air.hittime = 12
air.velocity = -4.5,-6.5
airguard.velocity = -4,-1
yaccel = .5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1facing = 1
p2facing = 1
p2stateno = 5655
envshake.time = 16
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92
kill = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = anim = 3100
trigger1 = movehit = 1
value = 3110

[State 3000, ステート変更]
type = ChangeState
trigger1 = anim = 3101
trigger1 = movehit = 1
value = 3120

[State 1205, MoveType]
type = StateTypeSet
trigger1 = AnimElem = 3
MoveType = I

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 虎豹連撃(XI)　発動

[Statedef 3110]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 3110
ctrl     = 0
sprpriority = 3

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3110, TargetBind]
type = TargetBind
Trigger1 = time = 0
pos = 60, 0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 8
value = s10,5
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 12
value = s10,16
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 22
value = s10,21
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 8 || AnimElem = 12 || AnimElem = 22
value = s0,4

[State 3110, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 5

[State 3110, VelSet]
type = VelSet
trigger1 = AnimElem = 22
x = 8

[State 1005, VelMul]
type = VelMul
trigger1 = AnimElemTime(22) >= 0
x = .95

[State 3110, VelSet]
type = VelSet
trigger1 = AnimElem = 7 || AnimElem = 30
x = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
damage    = floor(ifelse(var(6),14,11)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype  = Hard
air.animtype = back
hitflag = MAF
priority = 4, Hit
pausetime = 11-(helper(40000),var(0)),11
sparkno = s6002
sparkxy = -20, -70
hitsound = s1,4
ground.type = High
ground.slidetime = 17
ground.hittime = 27
ground.velocity = -6
air.type = High
air.hittime = 12
air.velocity = -4.5,-6.5
airguard.velocity = -4,-1
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
damage    = floor(ifelse(var(6),14,11)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype  = Hard
air.animtype = back
hitflag = MAF
priority = 4, Hit
pausetime = 11-(helper(40000),var(0)),11
sparkno = s6002
sparkxy = -20, -70
hitsound = s1,4
ground.type = Low
ground.slidetime = 17
ground.hittime = 27
ground.velocity = -6
air.type = High
air.hittime = 12
air.velocity = -4.5,-6.5
airguard.velocity = -4,-1
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 23
attr = S, HA
damage    = floor(ifelse(var(6),15,12)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype = Diagup
hitflag = MAF
priority = 4, Hit
pausetime = 32-(helper(40000),var(0)),32
sparkno = s6002
sparkxy = -20, -70
hitsound = s1,4
ground.type = High
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6,-9
guard.velocity = -10
airguard.velocity = -4,-1
air.type = High
air.velocity = -6,-9
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 600
envshake.time = 32
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 虎豹連撃('03)　発動

[Statedef 3120]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = 0
velset   = 0,0
anim     = 3120
ctrl     = 0
sprpriority = 3

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3110, TargetBind]
type = TargetBind
Trigger1 = time = 0
pos = 60, 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 38, -133

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 31, -136

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(11) < 0
pos = 40, -20

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 9
value = s10,21
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 1 || AnimElem = 6 || AnimElem = 10
value = s0,4

[State 3110, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 8

[State 1005, VelMul]
type = VelMul
trigger1 = AnimElemTime(10) >= 0
x = .95

[State 3110, VelSet]
type = VelSet
trigger1 = AnimElem = 18
x = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
damage    = floor(ifelse(var(6),14,11)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype  = Hard
air.animtype = back
hitflag = MAF
priority = 4, Hit
pausetime = 11-(helper(40000),var(0)),11
sparkno = s6002
sparkxy = -20, -70
hitsound = s1,4
ground.type = High
ground.slidetime = 17
ground.hittime = 27
ground.velocity = 0
air.type = High
air.hittime = 12
air.velocity = -4.5,-6.5
airguard.velocity = -4,-1
yaccel = .5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
damage    = floor(ifelse(var(6),14,11)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype  = Hard
air.animtype = back
hitflag = MAF
priority = 4, Hit
pausetime = 11-(helper(40000),var(0)),11
sparkno = s6002
sparkxy = -20, -70
hitsound = s1,4
ground.type = High
ground.slidetime = 17
ground.hittime = 27
ground.velocity = 0
air.type = High
air.hittime = 12
air.velocity = -4.5,-6.5
airguard.velocity = -4,-1
yaccel = .5
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p1facing = 1
p2facing = 1
p2stateno = 3125
envshake.time = 12
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92
kill = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
damage    = floor(ifelse(var(6),15,12)*fvar(7)),floor(1*fvar(7))
getpower  = 0
givepower = floor(1*fvar(8)),floor(1*fvar(8))
animtype = Diagup
hitflag = MAF
priority = 4, Hit
pausetime = 32-(helper(40000),var(0)),32
sparkno = s6002
sparkxy = -20, -70
hitsound = s1,4
ground.type = High
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6,-9
guard.velocity = -10
airguard.velocity = -4,-1
air.type = High
air.velocity = -6,-9
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 600
envshake.time = 32
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 虎豹連撃('03) - 相手動作
; P2 - Shaking from the hit

[Statedef 3125]
type    = S;A
movetype= H
physics = N
VelSet = 0,0

[State 3125, Hitfallset]
type = Hitfallset
trigger1 = time = 0
value = 0

[State 3125, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 3125, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3125, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5650

[State 3125, ChangeState]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3126

;---------------------------------------------------------------------------
; 虎豹連撃('03) - 相手動作

[Statedef 3126]
type    = A
movetype= H
physics = N
VelSet = 0,0

[State 3126, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3126

[State 3126, PosSet]
type = PosSet
trigger1 = AnimElem = 2
y = -20

[State 3126, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 5050

;==============================================================================
; 爆真(通常版)

[Statedef 4000]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = -2000
velset   = 0,0
anim     = 4000
ctrl     = 0
sprpriority = 0

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(22) < 0
value = SCA

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 11
trigger1 = var(31) := 1
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemtime(11) >= 0 && AnimElemtime(16) < 0
flag = NoFG
flag2 = NOBG
flag3 = GlobalNoShadow
ignorehitpause = 1

[State 4000, 超必殺技発動のエフェクト表示]
type = Helper
trigger1 = AnimElem = 11
name = "LDM"
stateno = 7010
id = 7000
pos = 1,-93
postype = p1
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 6
value = s12,4

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 15
value = s10,22
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 17
value = s12,6

[State 3000, ヘルパーを出す]
type = Helper
trigger1 = AnimElem = 17
stateno = 4001
id = 4000
name = "Proj"
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
persistent = 0

[State 4000, VarAdd]
type = VarAdd
trigger1 = AnimTime = 0
var(29) = 200

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 爆真　キャンセルver

[Statedef 4010]
type     = S
movetype = A
physics  = N
juggle   = 0
poweradd = -1000
velset   = 0,0
anim     = 4010
ctrl     = 0
sprpriority = 0

[State 3000, VarSet]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 3000, SC]
type = VarSet
trigger1 = (prevstateno = [1000,2999])
var(11) = 1

[State 3000, DC]
type = VarSet
trigger1 = (prevstateno = [3000,3999])
var(11) = 2

[State 3000, スキルゲージ消費]
type = varadd
triggerall = var(40) = 0
triggerall = fvar(35) >= 100
triggerall = time = 0
trigger1 = var(11) = 1
trigger2 = var(11) = 2
fvar(35) = -101

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000, 点滅]
type = palfx
triggerall = time = 0
trigger1 = var(11) = 1
time = 5
add = 230,230,230

[State 3000, 点滅]
type = palfx
triggerall = time = 0
trigger1 = var(11) = 2
time = 5
add = 250,120,210

[State 3000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
trigger1 = var(31) := 1
anim = -1
time = 28
movetime = 28
darken = 0
p2defmul = 1.0

[State 3000, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,28]
flag = NoFG
flag2 = NOBG
flag3 = GlobalNoShadow
ignorehitpause = 1

[State 4010, 超必殺技発動のエフェクト表示]
type = Helper
trigger1 = AnimElem = 1
name = "LDM"
stateno = 7010
id = 7000
pos = 1,-93
postype = p1
helpertype = normal
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
persistent = 0
ignorehitpause = 1
supermovetime = 999
pausemovetime = 999

[State 4010, スーパーキャンセル]
type = Helper
triggerall = Numhelper(7100) = 0
trigger1 = var(11) = 1
trigger1 = AnimElem = 1
helpertype = normal
name = "SC"
stateno = 7100
ID = 7100
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 1
size.yscale = 1
size.shadowoffset = 0
ignorehitpause = 0

[State 4010, ドリームキャンセル]
type = Helper
triggerall = Numhelper(7110) = 0
trigger1 = var(11) = 2
trigger1 = AnimElem = 1
helpertype = normal
name = "DC"
stateno = 7110
ID = 7110
pos = 0,0
postype = left
keyctrl = 0
ownpal = 1
facing = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 1
size.yscale = 1
ignorehitpause = 0

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s10,22
channel = 10

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,6

[State 3000, ヘルパーを出す]
type = Helper
trigger1 = AnimElem = 7
stateno = 4001
id = 4000
name = "Proj"
pos = 0,0
postype = P1
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1
persistent = 0

[State 4000, VarAdd]
type = VarAdd
trigger1 = AnimTime = 0
var(29) = 200

[State 3000, ステート変更]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
value = 99

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)爆真・ヘルパー
[Statedef 4001]
type     = S
movetype = A
physics  = N
ctrl     = 0
anim     = 4001
sprpriority = 5

[State 3000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 3000, AttackDist]
type = AttackDist
trigger1 = 1
value = 90

[State 3000, ヒット定義]
type = HitDef
trigger1 = root,stateno = 4000
trigger1 = AnimElem = 3
attr = S, HP
damage    = floor((ifelse(root,var(6),88,60)*root,fvar(7))*root,fvar(5)),floor(1*root,fvar(7))
getpower  = 0
givepower = floor(1*root,fvar(8)),floor(1*root,fvar(8))
animtype = Diagup
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0,11
sparkno = s6002
guard.sparkno = s6012
sparkxy = 0,-65 + (floor(p2bodydist Y))
hitsound = s1,4
guardsound = s2,1
ground.type = High
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6,-9
guard.velocity = -10
airguard.velocity = -4,-1
air.type = High
air.velocity = -6,-9
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 1
fall.recovertime = 600
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 1000, ヒット数測定]
type = ParentVarAdd
trigger1 = movehit = 1
fvar(0) = 1

[State 1000, ガード弾き値回復不能時間]
type = ParentVarSet
triggerall = root,fvar(11) != 180
triggerall = roundstate = 2
trigger1 = moveguarded = 1
fvar(11) = 180

[State -2, 気絶値回復不能時間]
type = ParentVarSet
triggerall = root,fvar(13) != 180
triggerall = RoundState = 2
triggerall = p2movetype = H
trigger1 = MoveHit = 1 && root,fvar(1) <= 1
fvar(13) = 180

[State -2, 気絶値回復不能時間]
type = ParentVarSet
triggerall = root,fvar(13) != 60
triggerall = RoundState = 2
triggerall = p2movetype = H
trigger1 = MoveGuarded = 1
fvar(13) = 60

[State 3000, このヘルパーを消す]
type = DestroySelf
trigger1 = AnimTime = 0

;この下、一行以上空ける事。
